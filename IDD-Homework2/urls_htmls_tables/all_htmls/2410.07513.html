<!DOCTYPE html>
<html lang="en">
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<title>Evolutionary Contrastive Distillation for Language Model Alignment</title>
<!--Generated on Thu Oct 10 00:58:31 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv-fonts.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/latexml_styles.css" rel="stylesheet" type="text/css"/>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.3/html2canvas.min.js"></script>
<script src="/static/browse/0.3.4/js/addons_new.js"></script>
<script src="/static/browse/0.3.4/js/feedbackOverlay.js"></script>
<base href="/html/2410.07513v1/"/></head>
<body>
<nav class="ltx_page_navbar">
<nav class="ltx_TOC">
<ol class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#S1" title="In Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1 </span>Introduction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#S2" title="In Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2 </span>Related Work</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#S2.SS0.SSS0.Px1" title="In 2 Related Work ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_title">Instruction-Following.</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#S2.SS0.SSS0.Px2" title="In 2 Related Work ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_title">Contrastive Learning.</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#S2.SS0.SSS0.Px3" title="In 2 Related Work ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_title">Data Generation Methods for PFT.</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#S3" title="In Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3 </span>Evolutionary Contrastive Distillation</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#S3.SS0.SSS0.Px1" title="In 3 Evolutionary Contrastive Distillation ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_title">Data Generation Framework</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#S3.SS0.SSS0.Px2" title="In 3 Evolutionary Contrastive Distillation ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_title">Contrastive Learning</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#S4" title="In Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4 </span>Fine-Grained Evolution Taxonomy</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#S5" title="In Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5 </span>Experiments</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#S5.SS1" title="In 5 Experiments ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5.1 </span>Models and Datasets</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#S5.SS2" title="In 5 Experiments ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5.2 </span>Evaluation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#S5.SS3" title="In 5 Experiments ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5.3 </span>Results</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#S6" title="In Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">6 </span>Conclusion</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#S7" title="In Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7 </span>Limitations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#S8" title="In Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8 </span>Ethical Considerations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix">
<a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#A1" title="In Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A </span>Evolution Details</span></a>
<ol class="ltx_toclist ltx_toclist_appendix">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#A1.SS1" title="In Appendix A Evolution Details ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.1 </span>Full Taxonomy</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#A1.SS2" title="In Appendix A Evolution Details ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.2 </span>Evolution Elimination</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_appendix">
<a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#A2" title="In Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">B </span>Additional Details</span></a>
<ol class="ltx_toclist ltx_toclist_appendix">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#A2.SS1" title="In Appendix B Additional Details ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">B.1 </span>Training Details</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#A2.SS2" title="In Appendix B Additional Details ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">B.2 </span>Ablation Study on Removing UltraFeedback from Data Mixture</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_appendix">
<a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#A3" title="In Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C </span>Prompts Used</span></a>
<ol class="ltx_toclist ltx_toclist_appendix">
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#A3.SS1" title="In Appendix C Prompts Used ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C.1 </span>Prompt for Fine-grained Evolution</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#A3.SS1.SSS1" title="In C.1 Prompt for Fine-grained Evolution ‣ Appendix C Prompts Used ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C.1.1 </span>Content Evolution</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#A3.SS1.SSS2" title="In C.1 Prompt for Fine-grained Evolution ‣ Appendix C Prompts Used ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C.1.2 </span>Format Evolution</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#A3.SS1.SSS3" title="In C.1 Prompt for Fine-grained Evolution ‣ Appendix C Prompts Used ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C.1.3 </span>Style Evolution</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#A3.SS1.SSS4" title="In C.1 Prompt for Fine-grained Evolution ‣ Appendix C Prompts Used ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C.1.4 </span>Breadth Evolution</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#A3.SS1.SSS5" title="In C.1 Prompt for Fine-grained Evolution ‣ Appendix C Prompts Used ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C.1.5 </span>Reasoning Evolution</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#A3.SS2" title="In Appendix C Prompts Used ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C.2 </span>Prompt for RLAIF</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#A3.SS3" title="In Appendix C Prompts Used ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C.3 </span>Prompts for RLCD</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#A4" title="In Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">D </span>Licences and Terms of Service Compliance</span></a></li>
</ol></nav>
</nav>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document">
<h1 class="ltx_title ltx_title_document">Evolutionary Contrastive Distillation for Language Model Alignment</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">
<span class="ltx_text ltx_font_bold" id="id1.1.id1">Julian Katz-Samuels</span>,  
<span class="ltx_text ltx_font_bold" id="id2.2.id2">Zheng Li</span>,  
<span class="ltx_text ltx_font_bold" id="id3.3.id3">Hyokun Yun</span>, 
<br class="ltx_break"/><span class="ltx_text ltx_font_bold" id="id4.4.id4">Priyanka Nigam</span>,  
<span class="ltx_text ltx_font_bold" id="id5.5.id5">Yi Xu</span>,  
<span class="ltx_text ltx_font_bold" id="id6.6.id6">Vaclav Petricek</span>, 
<br class="ltx_break"/><span class="ltx_text ltx_font_bold" id="id7.7.id7">Bing Yin</span>,  
<span class="ltx_text ltx_font_bold" id="id8.8.id8">Trishul Chilimbi</span>
<br class="ltx_break"/>Amazon 
<br class="ltx_break"/>
<span class="ltx_text ltx_font_bold" id="id9.9.id9">Correspondence:</span> {jkatzsam,amzzhe,yunhyoku}@amazon.com
</span></span>
</div>
<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p class="ltx_p" id="id10.id1">The ability of large language models (LLMs) to execute complex instructions is essential for their real-world applications. However, several recent studies indicate that LLMs struggle with challenging instructions <cite class="ltx_cite ltx_citemacro_citep">(Zhou et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib50" title="">2023</a>; Qin et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib27" title="">2024</a>; Jiang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib20" title="">2023b</a>)</cite>. In this paper, we propose Evolutionary Contrastive Distillation (ECD), a novel method for generating high-quality synthetic preference data designed to enhance
the complex instruction-following capability of language models. ECD generates data that specifically illustrates the difference between a response that successfully follows a set of complex instructions and a response that is high-quality, but nevertheless makes some subtle mistakes. This is done by prompting LLMs to progressively evolve simple instructions into more complex instructions.
When an instruction is made more complex, the original successful response mostly meets the new requirements but misses one or two, thus becoming a “hard negative” example for the new instruction.
By pairing a good response with such a hard negative response, and employing contrastive learning algorithms
such as DPO <cite class="ltx_cite ltx_citemacro_citep">(Rafailov et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib30" title="">2023</a>)</cite>, we improve language models’ ability to follow complex instructions. Empirically, we observe that our method yields a 7B model that exceeds the complex instruction-following performance of current state-of-the-art (SOTA) 7B models and is competitive even with open-source 70B models.</p>
</div>
<div class="ltx_para ltx_noindent" id="p1">
<div class="ltx_block ltx_align_bottom" id="p1.1">
<p class="ltx_p" id="p1.1.1"><span class="ltx_text ltx_font_bold" id="p1.1.1.1">Evolutionary Contrastive Distillation for Language Model Alignment</span></p>
<br class="ltx_break ltx_centering"/>
<p class="ltx_p ltx_align_center" id="p1.1.2" style="width:433.6pt;"><span class="ltx_text ltx_inline-block" id="p1.1.2.1" style="width:0.0pt;">
<span class="ltx_tabular ltx_align_top" id="p1.1.2.1.1">
<span class="ltx_tr" id="p1.1.2.1.1.1">
<span class="ltx_td ltx_align_center" id="p1.1.2.1.1.1.1"><span class="ltx_text ltx_font_bold" id="p1.1.2.1.1.1.1.1">
Julian Katz-Samuels,  
Zheng Li,  
Hyokun Yun,</span></span></span>
<span class="ltx_tr" id="p1.1.2.1.1.2">
<span class="ltx_td ltx_align_center" id="p1.1.2.1.1.2.1"><span class="ltx_text ltx_font_bold" id="p1.1.2.1.1.2.1.1">Priyanka Nigam</span>,  
<span class="ltx_text ltx_font_bold" id="p1.1.2.1.1.2.1.2">Yi Xu</span>,  
<span class="ltx_text ltx_font_bold" id="p1.1.2.1.1.2.1.3">Vaclav Petricek</span>,</span></span>
<span class="ltx_tr" id="p1.1.2.1.1.3">
<span class="ltx_td ltx_align_center" id="p1.1.2.1.1.3.1"><span class="ltx_text ltx_font_bold" id="p1.1.2.1.1.3.1.1">Bing Yin</span>,  
<span class="ltx_text ltx_font_bold" id="p1.1.2.1.1.3.1.2">Trishul Chilimbi</span></span></span>
<span class="ltx_tr" id="p1.1.2.1.1.4">
<span class="ltx_td ltx_align_center" id="p1.1.2.1.1.4.1">Amazon</span></span>
<span class="ltx_tr" id="p1.1.2.1.1.5">
<span class="ltx_td ltx_align_center" id="p1.1.2.1.1.5.1">
<span class="ltx_text ltx_font_bold" id="p1.1.2.1.1.5.1.1">Correspondence:</span> {jkatzsam,amzzhe,yunhyoku}@amazon.com</span></span>
</span></span></p>
<br class="ltx_break ltx_centering"/>
</div>
</div>
<section class="ltx_section" id="S1">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>Introduction</h2>
<figure class="ltx_figure" id="S1.F1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="121" id="S1.F1.g1" src="extracted/5913898/figures/rlced_example_v2.png" width="598"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1: </span>Example of ECD preference pair construction. The original instruction is to provide three examples of sports while the evolved instruction adds the additional requirement to sort the examples in alphabetical order. Since the original response violates this requirement, it can be used as a rejected response in the preference pair. On the other hand, the evolved response satisfies all the requirements and can be used as the chosen response.</figcaption>
</figure>
<div class="ltx_para" id="S1.p1">
<p class="ltx_p" id="S1.p1.1">Large language models (LLMs) have demonstrated impressive capabilities in a wide range of tasks ranging from creative writing to code generation. In light of these achievements, there has been a surge of interest in building complex data processing systems with LLM-based components <cite class="ltx_cite ltx_citemacro_citep">(Developers, <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib9" title="">2024a</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib10" title="">b</a>)</cite>. Complex instruction-following capability, which is the capability of LLMs to generate outputs consistent with multiple interdependent specifications in the prompt, is critically important for such systems to operate reliably. Consequently, multiple benchmarks have been proposed to capture various aspects of complex instruction-following <cite class="ltx_cite ltx_citemacro_citep">(Zhou et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib50" title="">2023</a>; Qin et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib27" title="">2024</a>; Jiang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib20" title="">2023b</a>)</cite>.
Unfortunately, these studies find that there still is a significant gap between proprietary LLMs and open source models on these benchmarks.</p>
</div>
<div class="ltx_para" id="S1.p2">
<p class="ltx_p" id="S1.p2.1">This raises the question: how shall we effectively distill the complex instruction-following ability of stronger LLMs into smaller language models? After the seminal work by <cite class="ltx_cite ltx_citemacro_citet">Wang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib42" title="">2023</a>)</cite>, the usage of proprietary LLMs for the generation of alignment data has been actively studied. As a typical alignment pipeline consists of Supervised Fine-Tuning (SFT) methods and Preference Fine-Tuning (PFT<span class="ltx_note ltx_role_footnote" id="footnote1"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_tag ltx_tag_note">1</span>We denote this stage PFT instead of RLHF (Reinforcement Learning from Human Feedback), because many data collection methods for preference data do not necessarily involve human feedback <cite class="ltx_cite ltx_citemacro_citep">(Lee et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib21" title="">2023</a>; Cui et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib8" title="">2023</a>; Yang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib47" title="">2023</a>)</cite>.</span></span></span>) stages <cite class="ltx_cite ltx_citemacro_citep">(Ouyang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib26" title="">2022</a>)</cite>, these data generation methods are also largely categorized into SFT data generation methods (e.g., UltraChat <cite class="ltx_cite ltx_citemacro_citep">(Ding et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib11" title="">2023</a>)</cite>) and PFT data generation methods (e.g., UltraFeedback <cite class="ltx_cite ltx_citemacro_citep">(Cui et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib8" title="">2023</a>)</cite>).</p>
</div>
<div class="ltx_para" id="S1.p3">
<p class="ltx_p" id="S1.p3.1">Among a wide variety of SFT data generatin methods,
Evol-Instruct <cite class="ltx_cite ltx_citemacro_citep">(Xu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib45" title="">2023</a>)</cite> and Conifer <cite class="ltx_cite ltx_citemacro_citep">(Sun et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib36" title="">2024</a>)</cite> are specifically designed to improve complex instruction-following. They share the common goal: generate highly complex instructions. And they also share the same evolutionary strategy: they first prompt proprietary LLMs to evolve simple seed instructions from ShareGPT to have progressively more complex requirements. Then, proprietary LLMs are again prompted to generate demonstrations on these complex instructions.</p>
</div>
<div class="ltx_para" id="S1.p4">
<p class="ltx_p" id="S1.p4.1">On the other hand, while a wide variety of PFT data generation methods have been proposed in the literature <cite class="ltx_cite ltx_citemacro_citep">(Lee et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib21" title="">2023</a>; Cui et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib8" title="">2023</a>; Yang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib47" title="">2023</a>)</cite> there has been little attention on leveraging PFT stage for complex instruction-following.
We claim, however, that PFT stage has distinctive advantages in teaching complex instruction-following.
First, SFT training places an equal weight on every token in the response, and this can be less than ideal for instruction-following. When a tricky requirement such as "make sure every sentence rhymes with each other" is imposed in the instruction, certain tokens play a more important role in meeting this requirement than other tokens. In the PFT stage, we can leverage preference pairs which are similar in content but differ in these instruction-critical tokens to more directly illustrate the causality between the token generation and the successful instruction-following. Second, while the SFT stage can utilize positive examples only, PFT stage can also leverage negative examples to highlight
the fine difference between a successful instruction-following and a subtle failure.</p>
</div>
<div class="ltx_para" id="S1.p5">
<p class="ltx_p" id="S1.p5.1">To this end, we propose a novel technique, Evolutionary Contrastive Distillation (ECD), for generating high-quality, synthetic preference data targeting complex instruction-following.
Following <cite class="ltx_cite ltx_citemacro_citet">Xu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib45" title="">2023</a>); Sun et al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib36" title="">2024</a>)</cite>, we prompt proprietary LLMs to progressively increase the complexity of instructions. Instead of separating the original example and the evolved example as two independent examples for SFT, however, we connect them as a preference pair for PFT: the proprietary LLM’s response on the evolved instruction is considered as a positive example, and its response on the original instruction is considered a negative example. The key observation is that when an instruction is evolved to have a new requirement, the original <em class="ltx_emph ltx_font_italic" id="S1.p5.1.1">good</em> response for the original instruction is not a good response for the evolved instruction anymore, and therefore can be used as the negative example to the evolved instruction. Since the evolution of instructions is gradual, however, the original response still satisfies most of the requirements of the evolved instruction, and therefore can be used as a "hard" negative for the evolved instruction. See Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#S1.F1" title="Figure 1 ‣ 1 Introduction ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_tag">1</span></a> for a concrete example.
This method has the desireable properties that (i) it does not rely on LLMs to annotate preferences or generate undesirable responses, which can be unreliable <cite class="ltx_cite ltx_citemacro_citep">(Yang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib47" title="">2023</a>)</cite> and (ii) it is effective at creating hard negative examples, which have are crucial in contrastive learning <cite class="ltx_cite ltx_citemacro_citep">(Chopra et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib5" title="">2005</a>; Hadsell et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib15" title="">2006</a>; Robinson et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib31" title="">2020</a>)</cite>.</p>
</div>
<div class="ltx_para" id="S1.p6">
<p class="ltx_p" id="S1.p6.1">To ensure that each step of instruction evolution provides a high-quality example of subtle nuance in instruction-following, we devise a fine-grained hierarchical taxonomy of evolution operations, which we discuss in Section <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#S4" title="4 Fine-Grained Evolution Taxonomy ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_tag">4</span></a>. We demonstrate the data generated from this taxonomy is not only effective at improving complex instruction-following, but can also be combined with previous evolutionary <cite class="ltx_cite ltx_citemacro_citep">(Sun et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib36" title="">2024</a>)</cite> as well as non-evolutionary <cite class="ltx_cite ltx_citemacro_citep">(Cui et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib8" title="">2023</a>)</cite> methods to yield even stronger results.
Therefore, we believe the proposed taxonomy will serve as a useful resource on its own for future research on complex instruction-following.</p>
</div>
<div class="ltx_para" id="S1.p7">
<p class="ltx_p" id="S1.p7.1">We validate the effectiveness of our approach in an extensive set of experiments, benchmarking our models on three recent instruction-following benchmarks: IFEval, FollowBench, and InfoBench. Our approach yields a state-of-the-art 7B model, improving on prior SOTA (state-of-the-art) instruction-following 7B models by 7pp on IFEval and is competitive with popular open-source models at the 70B scale. Furthermore, we develop a recipe to build SOTA instruction-following models that also achieve highly competitive performance on popular conversational quality benchmarks such as MT-Bench and AlpacaEval. Finally, we perform ablations illustrating the advantages of ECD over other synthetic preference data generation methods such as RLAIF and RLCD, and the importance of using contrastive learning (e.g., DPO) instead of SFT to learn from preference pairs.</p>
</div>
</section>
<section class="ltx_section" id="S2">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>Related Work</h2>
<section class="ltx_paragraph" id="S2.SS0.SSS0.Px1">
<h5 class="ltx_title ltx_title_paragraph">Instruction-Following.</h5>
<div class="ltx_para" id="S2.SS0.SSS0.Px1.p1">
<p class="ltx_p" id="S2.SS0.SSS0.Px1.p1.1">The complex instruction-following ability of LLMs has received significant attention recently with many works proposing new evaluation benchmarks <cite class="ltx_cite ltx_citemacro_citep">(Zhou et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib50" title="">2023</a>; Jiang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib20" title="">2023b</a>; Qin et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib27" title="">2024</a>)</cite>.
They consistently find that open source LLMs have significant gaps on following complex instructions compared to proprietary LLMs.
At the same time, there has been relatively less work on developing techniques to <em class="ltx_emph ltx_font_italic" id="S2.SS0.SSS0.Px1.p1.1.1">improve</em> the complex instruction-following ability. Two exceptions include Evol-Instruct <cite class="ltx_cite ltx_citemacro_citep">(Xu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib45" title="">2023</a>)</cite> and Conifer <cite class="ltx_cite ltx_citemacro_citep">(Sun et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib36" title="">2024</a>)</cite>, which prompt LLMs to evolve the complexity of instructions, and apply SFT on the generated data. There are two main differences between these works and ours. First, we focus on generating preference data for PFT instead of demonstration data for SFT. While SFT data provides only positive feedback to the model on the correct behavior, PFT data provides both positive and negative feedback, which enables teaching the contrast between a successful instruction-following example and a subtle failure example. Second, we propose a fine-grained hierarchical taxonomy of evolution operations to ensure each step of evolution introduces diverse and subtle variations of requirements.</p>
</div>
</section>
<section class="ltx_paragraph" id="S2.SS0.SSS0.Px2">
<h5 class="ltx_title ltx_title_paragraph">Contrastive Learning.</h5>
<div class="ltx_para" id="S2.SS0.SSS0.Px2.p1">
<p class="ltx_p" id="S2.SS0.SSS0.Px2.p1.1">The effectiveness of contrastive learning <cite class="ltx_cite ltx_citemacro_citep">(Chopra et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib5" title="">2005</a>; Hadsell et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib15" title="">2006</a>)</cite> has been shown across
numerous modalities <cite class="ltx_cite ltx_citemacro_citep">(He et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib16" title="">2020</a>; Chi et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib4" title="">2020</a>; Radford et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib28" title="">2021</a>)</cite>.
In the contrastive learning literature, the importance of the quality of negative samples has been well-established <cite class="ltx_cite ltx_citemacro_citep">(Robinson et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib31" title="">2020</a>)</cite>. Numerous "hard" negative mining techniques have been introduced to improve the quality of negative samples <cite class="ltx_cite ltx_citemacro_citep">(Schroff et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib33" title="">2015</a>; Wu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib43" title="">2018</a>; Xiong et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib44" title="">2021</a>)</cite>. While many
alignment methods such as InstructGPT <cite class="ltx_cite ltx_citemacro_citep">(Ouyang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib26" title="">2022</a>)</cite> and DPO <cite class="ltx_cite ltx_citemacro_citep">(Rafailov et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib30" title="">2023</a>)</cite> leverage negative samples to facilitate learning <cite class="ltx_cite ltx_citemacro_citep">(Tajwar et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib37" title="">2024</a>)</cite>, how to obtain sufficiently hard negative samples
has not been actively studied. <cite class="ltx_cite ltx_citemacro_citet">Yan et al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib46" title="">2024</a>)</cite> employs hard negative mining
techniques to improve the robustness of the model. Our work instead targets improving
complex instruction-following, and uses LLM prompting to generate negative examples
rather than mining samples from a fixed dataset.</p>
</div>
</section>
<section class="ltx_paragraph" id="S2.SS0.SSS0.Px3">
<h5 class="ltx_title ltx_title_paragraph">Data Generation Methods for PFT.</h5>
<div class="ltx_para" id="S2.SS0.SSS0.Px3.p1">
<p class="ltx_p" id="S2.SS0.SSS0.Px3.p1.1">Much attention has been given to how to generate preference data for fine-tuning LLMs. Pioneering works focused on collecting feedback from humans <cite class="ltx_cite ltx_citemacro_citep">(Christiano et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib6" title="">2017</a>; Stiennon et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib35" title="">2020</a>; Ouyang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib26" title="">2022</a>)</cite>. Under this approach, human annotators would observe a set of responses to an instruction and rank them according to their preferences. As human annotation is expensive and difficult to scale, however, follow-up works have proposed alternative synthetic data generation approaches.</p>
</div>
<div class="ltx_para" id="S2.SS0.SSS0.Px3.p2">
<p class="ltx_p" id="S2.SS0.SSS0.Px3.p2.1">The most popular method of generating PFT data from LLMs
is to sample two independent responses on the same instruction, and then
ask an LLM to judge which one is of higher quality. This method is often called
RLAIF (Reinforcement Learning from AI Feedback) <cite class="ltx_cite ltx_citemacro_citep">(Bai et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib3" title="">2022b</a>)</cite>. While RLAIF methods have shown encouraging results
<cite class="ltx_cite ltx_citemacro_citep">(Cui et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib8" title="">2023</a>; Tunstall et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib41" title="">2023</a>; Ivison et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib18" title="">2023</a>)</cite>, obtaining
high-quality preference annotations from LLMs have been found challenging
<cite class="ltx_cite ltx_citemacro_citep">(Yang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib47" title="">2023</a>; Sharma et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib34" title="">2024</a>)</cite>. This is because the difference between
two responses on the identical instruction can be minor, and LLM-based preference
annotation can be subject to many confounding factors, such as self-bias and verbosity bias <cite class="ltx_cite ltx_citemacro_citep">(Zheng et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib49" title="">2023</a>)</cite>.</p>
</div>
<div class="ltx_para" id="S2.SS0.SSS0.Px3.p3">
<p class="ltx_p" id="S2.SS0.SSS0.Px3.p3.1">To avoid quality issues from LLM-based preference annotation,
Reinforcement Learning from Contrastive Distillation (RLCD) <cite class="ltx_cite ltx_citemacro_citep">(Yang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib47" title="">2023</a>)</cite> proposes to employ two different prompt templates
rather than using the same one. One prompt template is designed to elicit desirable responses, and another is designed to elicit undesirable response.
Such a deliberate design of templates allows RLCD to bypass preference annotation.
As we discuss in Section <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#S5" title="5 Experiments ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_tag">5</span></a>, however, we find it challenging to prompt-engineer proprietary LLMs to generate undesirable responses.
As proprietary LLMs are already aligned to generate helpful and harmless responses <cite class="ltx_cite ltx_citemacro_citep">(Bai et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib2" title="">2022a</a>)</cite>, very often, their response from the undesirable response template are either as helpful as the response from the desirable response template,
or trivially unhelpful ("No, I can’t answer that question."), limiting their value as a <em class="ltx_emph ltx_font_italic" id="S2.SS0.SSS0.Px3.p3.1.1">hard</em>
negative example.</p>
</div>
<div class="ltx_para" id="S2.SS0.SSS0.Px3.p4">
<p class="ltx_p" id="S2.SS0.SSS0.Px3.p4.1">In contrast to RLHF or RLAIF, ECD does not require preference annotation by neither humans nor LLMs. This circumvents issues with preference annotation quality. In contrast to easy negative examples from RLCD, negative examples from ECD are hard, as they are helpful responses on a similar but subtly different instruction.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S3">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span>Evolutionary Contrastive Distillation</h2>
<figure class="ltx_figure" id="S3.F2"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="231" id="S3.F2.g1" src="extracted/5913898/figures/main_alg_v3.png" width="598"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 2: </span>Overview of Evolutionary Contrastive Distillation. The left-hand side depicts the evolutionary process of creating complex instructions and their demonstrations. The right-hand side depicts the process of extracting the preference data from this process.</figcaption>
</figure>
<div class="ltx_para" id="S3.p1">
<p class="ltx_p" id="S3.p1.1">First, we propose the evolutionary data generation process to synthesize
preference data for complex instruction-following.
Then, we discuss how contrastive learning methods shall be employed to
train on this generated data.</p>
</div>
<section class="ltx_paragraph" id="S3.SS0.SSS0.Px1">
<h5 class="ltx_title ltx_title_paragraph">Data Generation Framework</h5>
<div class="ltx_para" id="S3.SS0.SSS0.Px1.p1">
<p class="ltx_p" id="S3.SS0.SSS0.Px1.p1.6">We assume access to a seed set of instructions <math alttext="\mathcal{I}^{(0)}=\{I^{(0)}_{1},\ldots,I^{(0)}_{n}\}" class="ltx_Math" display="inline" id="S3.SS0.SSS0.Px1.p1.1.m1.6"><semantics id="S3.SS0.SSS0.Px1.p1.1.m1.6a"><mrow id="S3.SS0.SSS0.Px1.p1.1.m1.6.6" xref="S3.SS0.SSS0.Px1.p1.1.m1.6.6.cmml"><msup id="S3.SS0.SSS0.Px1.p1.1.m1.6.6.4" xref="S3.SS0.SSS0.Px1.p1.1.m1.6.6.4.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS0.SSS0.Px1.p1.1.m1.6.6.4.2" xref="S3.SS0.SSS0.Px1.p1.1.m1.6.6.4.2.cmml">ℐ</mi><mrow id="S3.SS0.SSS0.Px1.p1.1.m1.1.1.1.3" xref="S3.SS0.SSS0.Px1.p1.1.m1.6.6.4.cmml"><mo id="S3.SS0.SSS0.Px1.p1.1.m1.1.1.1.3.1" stretchy="false" xref="S3.SS0.SSS0.Px1.p1.1.m1.6.6.4.cmml">(</mo><mn id="S3.SS0.SSS0.Px1.p1.1.m1.1.1.1.1" xref="S3.SS0.SSS0.Px1.p1.1.m1.1.1.1.1.cmml">0</mn><mo id="S3.SS0.SSS0.Px1.p1.1.m1.1.1.1.3.2" stretchy="false" xref="S3.SS0.SSS0.Px1.p1.1.m1.6.6.4.cmml">)</mo></mrow></msup><mo id="S3.SS0.SSS0.Px1.p1.1.m1.6.6.3" xref="S3.SS0.SSS0.Px1.p1.1.m1.6.6.3.cmml">=</mo><mrow id="S3.SS0.SSS0.Px1.p1.1.m1.6.6.2.2" xref="S3.SS0.SSS0.Px1.p1.1.m1.6.6.2.3.cmml"><mo id="S3.SS0.SSS0.Px1.p1.1.m1.6.6.2.2.3" stretchy="false" xref="S3.SS0.SSS0.Px1.p1.1.m1.6.6.2.3.cmml">{</mo><msubsup id="S3.SS0.SSS0.Px1.p1.1.m1.5.5.1.1.1" xref="S3.SS0.SSS0.Px1.p1.1.m1.5.5.1.1.1.cmml"><mi id="S3.SS0.SSS0.Px1.p1.1.m1.5.5.1.1.1.2.2" xref="S3.SS0.SSS0.Px1.p1.1.m1.5.5.1.1.1.2.2.cmml">I</mi><mn id="S3.SS0.SSS0.Px1.p1.1.m1.5.5.1.1.1.3" xref="S3.SS0.SSS0.Px1.p1.1.m1.5.5.1.1.1.3.cmml">1</mn><mrow id="S3.SS0.SSS0.Px1.p1.1.m1.2.2.1.3" xref="S3.SS0.SSS0.Px1.p1.1.m1.5.5.1.1.1.cmml"><mo id="S3.SS0.SSS0.Px1.p1.1.m1.2.2.1.3.1" stretchy="false" xref="S3.SS0.SSS0.Px1.p1.1.m1.5.5.1.1.1.cmml">(</mo><mn id="S3.SS0.SSS0.Px1.p1.1.m1.2.2.1.1" xref="S3.SS0.SSS0.Px1.p1.1.m1.2.2.1.1.cmml">0</mn><mo id="S3.SS0.SSS0.Px1.p1.1.m1.2.2.1.3.2" stretchy="false" xref="S3.SS0.SSS0.Px1.p1.1.m1.5.5.1.1.1.cmml">)</mo></mrow></msubsup><mo id="S3.SS0.SSS0.Px1.p1.1.m1.6.6.2.2.4" xref="S3.SS0.SSS0.Px1.p1.1.m1.6.6.2.3.cmml">,</mo><mi id="S3.SS0.SSS0.Px1.p1.1.m1.4.4" mathvariant="normal" xref="S3.SS0.SSS0.Px1.p1.1.m1.4.4.cmml">…</mi><mo id="S3.SS0.SSS0.Px1.p1.1.m1.6.6.2.2.5" xref="S3.SS0.SSS0.Px1.p1.1.m1.6.6.2.3.cmml">,</mo><msubsup id="S3.SS0.SSS0.Px1.p1.1.m1.6.6.2.2.2" xref="S3.SS0.SSS0.Px1.p1.1.m1.6.6.2.2.2.cmml"><mi id="S3.SS0.SSS0.Px1.p1.1.m1.6.6.2.2.2.2.2" xref="S3.SS0.SSS0.Px1.p1.1.m1.6.6.2.2.2.2.2.cmml">I</mi><mi id="S3.SS0.SSS0.Px1.p1.1.m1.6.6.2.2.2.3" xref="S3.SS0.SSS0.Px1.p1.1.m1.6.6.2.2.2.3.cmml">n</mi><mrow id="S3.SS0.SSS0.Px1.p1.1.m1.3.3.1.3" xref="S3.SS0.SSS0.Px1.p1.1.m1.6.6.2.2.2.cmml"><mo id="S3.SS0.SSS0.Px1.p1.1.m1.3.3.1.3.1" stretchy="false" xref="S3.SS0.SSS0.Px1.p1.1.m1.6.6.2.2.2.cmml">(</mo><mn id="S3.SS0.SSS0.Px1.p1.1.m1.3.3.1.1" xref="S3.SS0.SSS0.Px1.p1.1.m1.3.3.1.1.cmml">0</mn><mo id="S3.SS0.SSS0.Px1.p1.1.m1.3.3.1.3.2" stretchy="false" xref="S3.SS0.SSS0.Px1.p1.1.m1.6.6.2.2.2.cmml">)</mo></mrow></msubsup><mo id="S3.SS0.SSS0.Px1.p1.1.m1.6.6.2.2.6" stretchy="false" xref="S3.SS0.SSS0.Px1.p1.1.m1.6.6.2.3.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS0.Px1.p1.1.m1.6b"><apply id="S3.SS0.SSS0.Px1.p1.1.m1.6.6.cmml" xref="S3.SS0.SSS0.Px1.p1.1.m1.6.6"><eq id="S3.SS0.SSS0.Px1.p1.1.m1.6.6.3.cmml" xref="S3.SS0.SSS0.Px1.p1.1.m1.6.6.3"></eq><apply id="S3.SS0.SSS0.Px1.p1.1.m1.6.6.4.cmml" xref="S3.SS0.SSS0.Px1.p1.1.m1.6.6.4"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px1.p1.1.m1.6.6.4.1.cmml" xref="S3.SS0.SSS0.Px1.p1.1.m1.6.6.4">superscript</csymbol><ci id="S3.SS0.SSS0.Px1.p1.1.m1.6.6.4.2.cmml" xref="S3.SS0.SSS0.Px1.p1.1.m1.6.6.4.2">ℐ</ci><cn id="S3.SS0.SSS0.Px1.p1.1.m1.1.1.1.1.cmml" type="integer" xref="S3.SS0.SSS0.Px1.p1.1.m1.1.1.1.1">0</cn></apply><set id="S3.SS0.SSS0.Px1.p1.1.m1.6.6.2.3.cmml" xref="S3.SS0.SSS0.Px1.p1.1.m1.6.6.2.2"><apply id="S3.SS0.SSS0.Px1.p1.1.m1.5.5.1.1.1.cmml" xref="S3.SS0.SSS0.Px1.p1.1.m1.5.5.1.1.1"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px1.p1.1.m1.5.5.1.1.1.1.cmml" xref="S3.SS0.SSS0.Px1.p1.1.m1.5.5.1.1.1">subscript</csymbol><apply id="S3.SS0.SSS0.Px1.p1.1.m1.5.5.1.1.1.2.cmml" xref="S3.SS0.SSS0.Px1.p1.1.m1.5.5.1.1.1"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px1.p1.1.m1.5.5.1.1.1.2.1.cmml" xref="S3.SS0.SSS0.Px1.p1.1.m1.5.5.1.1.1">superscript</csymbol><ci id="S3.SS0.SSS0.Px1.p1.1.m1.5.5.1.1.1.2.2.cmml" xref="S3.SS0.SSS0.Px1.p1.1.m1.5.5.1.1.1.2.2">𝐼</ci><cn id="S3.SS0.SSS0.Px1.p1.1.m1.2.2.1.1.cmml" type="integer" xref="S3.SS0.SSS0.Px1.p1.1.m1.2.2.1.1">0</cn></apply><cn id="S3.SS0.SSS0.Px1.p1.1.m1.5.5.1.1.1.3.cmml" type="integer" xref="S3.SS0.SSS0.Px1.p1.1.m1.5.5.1.1.1.3">1</cn></apply><ci id="S3.SS0.SSS0.Px1.p1.1.m1.4.4.cmml" xref="S3.SS0.SSS0.Px1.p1.1.m1.4.4">…</ci><apply id="S3.SS0.SSS0.Px1.p1.1.m1.6.6.2.2.2.cmml" xref="S3.SS0.SSS0.Px1.p1.1.m1.6.6.2.2.2"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px1.p1.1.m1.6.6.2.2.2.1.cmml" xref="S3.SS0.SSS0.Px1.p1.1.m1.6.6.2.2.2">subscript</csymbol><apply id="S3.SS0.SSS0.Px1.p1.1.m1.6.6.2.2.2.2.cmml" xref="S3.SS0.SSS0.Px1.p1.1.m1.6.6.2.2.2"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px1.p1.1.m1.6.6.2.2.2.2.1.cmml" xref="S3.SS0.SSS0.Px1.p1.1.m1.6.6.2.2.2">superscript</csymbol><ci id="S3.SS0.SSS0.Px1.p1.1.m1.6.6.2.2.2.2.2.cmml" xref="S3.SS0.SSS0.Px1.p1.1.m1.6.6.2.2.2.2.2">𝐼</ci><cn id="S3.SS0.SSS0.Px1.p1.1.m1.3.3.1.1.cmml" type="integer" xref="S3.SS0.SSS0.Px1.p1.1.m1.3.3.1.1">0</cn></apply><ci id="S3.SS0.SSS0.Px1.p1.1.m1.6.6.2.2.2.3.cmml" xref="S3.SS0.SSS0.Px1.p1.1.m1.6.6.2.2.2.3">𝑛</ci></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS0.Px1.p1.1.m1.6c">\mathcal{I}^{(0)}=\{I^{(0)}_{1},\ldots,I^{(0)}_{n}\}</annotation><annotation encoding="application/x-llamapun" id="S3.SS0.SSS0.Px1.p1.1.m1.6d">caligraphic_I start_POSTSUPERSCRIPT ( 0 ) end_POSTSUPERSCRIPT = { italic_I start_POSTSUPERSCRIPT ( 0 ) end_POSTSUPERSCRIPT start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , … , italic_I start_POSTSUPERSCRIPT ( 0 ) end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_n end_POSTSUBSCRIPT }</annotation></semantics></math> and responses on these instructions <math alttext="\mathcal{R}^{(0)}=\{R^{(0)}_{1},\ldots,R^{(0)}_{n}\}" class="ltx_Math" display="inline" id="S3.SS0.SSS0.Px1.p1.2.m2.6"><semantics id="S3.SS0.SSS0.Px1.p1.2.m2.6a"><mrow id="S3.SS0.SSS0.Px1.p1.2.m2.6.6" xref="S3.SS0.SSS0.Px1.p1.2.m2.6.6.cmml"><msup id="S3.SS0.SSS0.Px1.p1.2.m2.6.6.4" xref="S3.SS0.SSS0.Px1.p1.2.m2.6.6.4.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS0.SSS0.Px1.p1.2.m2.6.6.4.2" xref="S3.SS0.SSS0.Px1.p1.2.m2.6.6.4.2.cmml">ℛ</mi><mrow id="S3.SS0.SSS0.Px1.p1.2.m2.1.1.1.3" xref="S3.SS0.SSS0.Px1.p1.2.m2.6.6.4.cmml"><mo id="S3.SS0.SSS0.Px1.p1.2.m2.1.1.1.3.1" stretchy="false" xref="S3.SS0.SSS0.Px1.p1.2.m2.6.6.4.cmml">(</mo><mn id="S3.SS0.SSS0.Px1.p1.2.m2.1.1.1.1" xref="S3.SS0.SSS0.Px1.p1.2.m2.1.1.1.1.cmml">0</mn><mo id="S3.SS0.SSS0.Px1.p1.2.m2.1.1.1.3.2" stretchy="false" xref="S3.SS0.SSS0.Px1.p1.2.m2.6.6.4.cmml">)</mo></mrow></msup><mo id="S3.SS0.SSS0.Px1.p1.2.m2.6.6.3" xref="S3.SS0.SSS0.Px1.p1.2.m2.6.6.3.cmml">=</mo><mrow id="S3.SS0.SSS0.Px1.p1.2.m2.6.6.2.2" xref="S3.SS0.SSS0.Px1.p1.2.m2.6.6.2.3.cmml"><mo id="S3.SS0.SSS0.Px1.p1.2.m2.6.6.2.2.3" stretchy="false" xref="S3.SS0.SSS0.Px1.p1.2.m2.6.6.2.3.cmml">{</mo><msubsup id="S3.SS0.SSS0.Px1.p1.2.m2.5.5.1.1.1" xref="S3.SS0.SSS0.Px1.p1.2.m2.5.5.1.1.1.cmml"><mi id="S3.SS0.SSS0.Px1.p1.2.m2.5.5.1.1.1.2.2" xref="S3.SS0.SSS0.Px1.p1.2.m2.5.5.1.1.1.2.2.cmml">R</mi><mn id="S3.SS0.SSS0.Px1.p1.2.m2.5.5.1.1.1.3" xref="S3.SS0.SSS0.Px1.p1.2.m2.5.5.1.1.1.3.cmml">1</mn><mrow id="S3.SS0.SSS0.Px1.p1.2.m2.2.2.1.3" xref="S3.SS0.SSS0.Px1.p1.2.m2.5.5.1.1.1.cmml"><mo id="S3.SS0.SSS0.Px1.p1.2.m2.2.2.1.3.1" stretchy="false" xref="S3.SS0.SSS0.Px1.p1.2.m2.5.5.1.1.1.cmml">(</mo><mn id="S3.SS0.SSS0.Px1.p1.2.m2.2.2.1.1" xref="S3.SS0.SSS0.Px1.p1.2.m2.2.2.1.1.cmml">0</mn><mo id="S3.SS0.SSS0.Px1.p1.2.m2.2.2.1.3.2" stretchy="false" xref="S3.SS0.SSS0.Px1.p1.2.m2.5.5.1.1.1.cmml">)</mo></mrow></msubsup><mo id="S3.SS0.SSS0.Px1.p1.2.m2.6.6.2.2.4" xref="S3.SS0.SSS0.Px1.p1.2.m2.6.6.2.3.cmml">,</mo><mi id="S3.SS0.SSS0.Px1.p1.2.m2.4.4" mathvariant="normal" xref="S3.SS0.SSS0.Px1.p1.2.m2.4.4.cmml">…</mi><mo id="S3.SS0.SSS0.Px1.p1.2.m2.6.6.2.2.5" xref="S3.SS0.SSS0.Px1.p1.2.m2.6.6.2.3.cmml">,</mo><msubsup id="S3.SS0.SSS0.Px1.p1.2.m2.6.6.2.2.2" xref="S3.SS0.SSS0.Px1.p1.2.m2.6.6.2.2.2.cmml"><mi id="S3.SS0.SSS0.Px1.p1.2.m2.6.6.2.2.2.2.2" xref="S3.SS0.SSS0.Px1.p1.2.m2.6.6.2.2.2.2.2.cmml">R</mi><mi id="S3.SS0.SSS0.Px1.p1.2.m2.6.6.2.2.2.3" xref="S3.SS0.SSS0.Px1.p1.2.m2.6.6.2.2.2.3.cmml">n</mi><mrow id="S3.SS0.SSS0.Px1.p1.2.m2.3.3.1.3" xref="S3.SS0.SSS0.Px1.p1.2.m2.6.6.2.2.2.cmml"><mo id="S3.SS0.SSS0.Px1.p1.2.m2.3.3.1.3.1" stretchy="false" xref="S3.SS0.SSS0.Px1.p1.2.m2.6.6.2.2.2.cmml">(</mo><mn id="S3.SS0.SSS0.Px1.p1.2.m2.3.3.1.1" xref="S3.SS0.SSS0.Px1.p1.2.m2.3.3.1.1.cmml">0</mn><mo id="S3.SS0.SSS0.Px1.p1.2.m2.3.3.1.3.2" stretchy="false" xref="S3.SS0.SSS0.Px1.p1.2.m2.6.6.2.2.2.cmml">)</mo></mrow></msubsup><mo id="S3.SS0.SSS0.Px1.p1.2.m2.6.6.2.2.6" stretchy="false" xref="S3.SS0.SSS0.Px1.p1.2.m2.6.6.2.3.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS0.Px1.p1.2.m2.6b"><apply id="S3.SS0.SSS0.Px1.p1.2.m2.6.6.cmml" xref="S3.SS0.SSS0.Px1.p1.2.m2.6.6"><eq id="S3.SS0.SSS0.Px1.p1.2.m2.6.6.3.cmml" xref="S3.SS0.SSS0.Px1.p1.2.m2.6.6.3"></eq><apply id="S3.SS0.SSS0.Px1.p1.2.m2.6.6.4.cmml" xref="S3.SS0.SSS0.Px1.p1.2.m2.6.6.4"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px1.p1.2.m2.6.6.4.1.cmml" xref="S3.SS0.SSS0.Px1.p1.2.m2.6.6.4">superscript</csymbol><ci id="S3.SS0.SSS0.Px1.p1.2.m2.6.6.4.2.cmml" xref="S3.SS0.SSS0.Px1.p1.2.m2.6.6.4.2">ℛ</ci><cn id="S3.SS0.SSS0.Px1.p1.2.m2.1.1.1.1.cmml" type="integer" xref="S3.SS0.SSS0.Px1.p1.2.m2.1.1.1.1">0</cn></apply><set id="S3.SS0.SSS0.Px1.p1.2.m2.6.6.2.3.cmml" xref="S3.SS0.SSS0.Px1.p1.2.m2.6.6.2.2"><apply id="S3.SS0.SSS0.Px1.p1.2.m2.5.5.1.1.1.cmml" xref="S3.SS0.SSS0.Px1.p1.2.m2.5.5.1.1.1"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px1.p1.2.m2.5.5.1.1.1.1.cmml" xref="S3.SS0.SSS0.Px1.p1.2.m2.5.5.1.1.1">subscript</csymbol><apply id="S3.SS0.SSS0.Px1.p1.2.m2.5.5.1.1.1.2.cmml" xref="S3.SS0.SSS0.Px1.p1.2.m2.5.5.1.1.1"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px1.p1.2.m2.5.5.1.1.1.2.1.cmml" xref="S3.SS0.SSS0.Px1.p1.2.m2.5.5.1.1.1">superscript</csymbol><ci id="S3.SS0.SSS0.Px1.p1.2.m2.5.5.1.1.1.2.2.cmml" xref="S3.SS0.SSS0.Px1.p1.2.m2.5.5.1.1.1.2.2">𝑅</ci><cn id="S3.SS0.SSS0.Px1.p1.2.m2.2.2.1.1.cmml" type="integer" xref="S3.SS0.SSS0.Px1.p1.2.m2.2.2.1.1">0</cn></apply><cn id="S3.SS0.SSS0.Px1.p1.2.m2.5.5.1.1.1.3.cmml" type="integer" xref="S3.SS0.SSS0.Px1.p1.2.m2.5.5.1.1.1.3">1</cn></apply><ci id="S3.SS0.SSS0.Px1.p1.2.m2.4.4.cmml" xref="S3.SS0.SSS0.Px1.p1.2.m2.4.4">…</ci><apply id="S3.SS0.SSS0.Px1.p1.2.m2.6.6.2.2.2.cmml" xref="S3.SS0.SSS0.Px1.p1.2.m2.6.6.2.2.2"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px1.p1.2.m2.6.6.2.2.2.1.cmml" xref="S3.SS0.SSS0.Px1.p1.2.m2.6.6.2.2.2">subscript</csymbol><apply id="S3.SS0.SSS0.Px1.p1.2.m2.6.6.2.2.2.2.cmml" xref="S3.SS0.SSS0.Px1.p1.2.m2.6.6.2.2.2"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px1.p1.2.m2.6.6.2.2.2.2.1.cmml" xref="S3.SS0.SSS0.Px1.p1.2.m2.6.6.2.2.2">superscript</csymbol><ci id="S3.SS0.SSS0.Px1.p1.2.m2.6.6.2.2.2.2.2.cmml" xref="S3.SS0.SSS0.Px1.p1.2.m2.6.6.2.2.2.2.2">𝑅</ci><cn id="S3.SS0.SSS0.Px1.p1.2.m2.3.3.1.1.cmml" type="integer" xref="S3.SS0.SSS0.Px1.p1.2.m2.3.3.1.1">0</cn></apply><ci id="S3.SS0.SSS0.Px1.p1.2.m2.6.6.2.2.2.3.cmml" xref="S3.SS0.SSS0.Px1.p1.2.m2.6.6.2.2.2.3">𝑛</ci></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS0.Px1.p1.2.m2.6c">\mathcal{R}^{(0)}=\{R^{(0)}_{1},\ldots,R^{(0)}_{n}\}</annotation><annotation encoding="application/x-llamapun" id="S3.SS0.SSS0.Px1.p1.2.m2.6d">caligraphic_R start_POSTSUPERSCRIPT ( 0 ) end_POSTSUPERSCRIPT = { italic_R start_POSTSUPERSCRIPT ( 0 ) end_POSTSUPERSCRIPT start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , … , italic_R start_POSTSUPERSCRIPT ( 0 ) end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_n end_POSTSUBSCRIPT }</annotation></semantics></math> where <math alttext="R^{(0)}_{i}" class="ltx_Math" display="inline" id="S3.SS0.SSS0.Px1.p1.3.m3.1"><semantics id="S3.SS0.SSS0.Px1.p1.3.m3.1a"><msubsup id="S3.SS0.SSS0.Px1.p1.3.m3.1.2" xref="S3.SS0.SSS0.Px1.p1.3.m3.1.2.cmml"><mi id="S3.SS0.SSS0.Px1.p1.3.m3.1.2.2.2" xref="S3.SS0.SSS0.Px1.p1.3.m3.1.2.2.2.cmml">R</mi><mi id="S3.SS0.SSS0.Px1.p1.3.m3.1.2.3" xref="S3.SS0.SSS0.Px1.p1.3.m3.1.2.3.cmml">i</mi><mrow id="S3.SS0.SSS0.Px1.p1.3.m3.1.1.1.3" xref="S3.SS0.SSS0.Px1.p1.3.m3.1.2.cmml"><mo id="S3.SS0.SSS0.Px1.p1.3.m3.1.1.1.3.1" stretchy="false" xref="S3.SS0.SSS0.Px1.p1.3.m3.1.2.cmml">(</mo><mn id="S3.SS0.SSS0.Px1.p1.3.m3.1.1.1.1" xref="S3.SS0.SSS0.Px1.p1.3.m3.1.1.1.1.cmml">0</mn><mo id="S3.SS0.SSS0.Px1.p1.3.m3.1.1.1.3.2" stretchy="false" xref="S3.SS0.SSS0.Px1.p1.3.m3.1.2.cmml">)</mo></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS0.Px1.p1.3.m3.1b"><apply id="S3.SS0.SSS0.Px1.p1.3.m3.1.2.cmml" xref="S3.SS0.SSS0.Px1.p1.3.m3.1.2"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px1.p1.3.m3.1.2.1.cmml" xref="S3.SS0.SSS0.Px1.p1.3.m3.1.2">subscript</csymbol><apply id="S3.SS0.SSS0.Px1.p1.3.m3.1.2.2.cmml" xref="S3.SS0.SSS0.Px1.p1.3.m3.1.2"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px1.p1.3.m3.1.2.2.1.cmml" xref="S3.SS0.SSS0.Px1.p1.3.m3.1.2">superscript</csymbol><ci id="S3.SS0.SSS0.Px1.p1.3.m3.1.2.2.2.cmml" xref="S3.SS0.SSS0.Px1.p1.3.m3.1.2.2.2">𝑅</ci><cn id="S3.SS0.SSS0.Px1.p1.3.m3.1.1.1.1.cmml" type="integer" xref="S3.SS0.SSS0.Px1.p1.3.m3.1.1.1.1">0</cn></apply><ci id="S3.SS0.SSS0.Px1.p1.3.m3.1.2.3.cmml" xref="S3.SS0.SSS0.Px1.p1.3.m3.1.2.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS0.Px1.p1.3.m3.1c">R^{(0)}_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS0.SSS0.Px1.p1.3.m3.1d">italic_R start_POSTSUPERSCRIPT ( 0 ) end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> is the response on instruction <math alttext="I^{(0)}_{i}" class="ltx_Math" display="inline" id="S3.SS0.SSS0.Px1.p1.4.m4.1"><semantics id="S3.SS0.SSS0.Px1.p1.4.m4.1a"><msubsup id="S3.SS0.SSS0.Px1.p1.4.m4.1.2" xref="S3.SS0.SSS0.Px1.p1.4.m4.1.2.cmml"><mi id="S3.SS0.SSS0.Px1.p1.4.m4.1.2.2.2" xref="S3.SS0.SSS0.Px1.p1.4.m4.1.2.2.2.cmml">I</mi><mi id="S3.SS0.SSS0.Px1.p1.4.m4.1.2.3" xref="S3.SS0.SSS0.Px1.p1.4.m4.1.2.3.cmml">i</mi><mrow id="S3.SS0.SSS0.Px1.p1.4.m4.1.1.1.3" xref="S3.SS0.SSS0.Px1.p1.4.m4.1.2.cmml"><mo id="S3.SS0.SSS0.Px1.p1.4.m4.1.1.1.3.1" stretchy="false" xref="S3.SS0.SSS0.Px1.p1.4.m4.1.2.cmml">(</mo><mn id="S3.SS0.SSS0.Px1.p1.4.m4.1.1.1.1" xref="S3.SS0.SSS0.Px1.p1.4.m4.1.1.1.1.cmml">0</mn><mo id="S3.SS0.SSS0.Px1.p1.4.m4.1.1.1.3.2" stretchy="false" xref="S3.SS0.SSS0.Px1.p1.4.m4.1.2.cmml">)</mo></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS0.Px1.p1.4.m4.1b"><apply id="S3.SS0.SSS0.Px1.p1.4.m4.1.2.cmml" xref="S3.SS0.SSS0.Px1.p1.4.m4.1.2"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px1.p1.4.m4.1.2.1.cmml" xref="S3.SS0.SSS0.Px1.p1.4.m4.1.2">subscript</csymbol><apply id="S3.SS0.SSS0.Px1.p1.4.m4.1.2.2.cmml" xref="S3.SS0.SSS0.Px1.p1.4.m4.1.2"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px1.p1.4.m4.1.2.2.1.cmml" xref="S3.SS0.SSS0.Px1.p1.4.m4.1.2">superscript</csymbol><ci id="S3.SS0.SSS0.Px1.p1.4.m4.1.2.2.2.cmml" xref="S3.SS0.SSS0.Px1.p1.4.m4.1.2.2.2">𝐼</ci><cn id="S3.SS0.SSS0.Px1.p1.4.m4.1.1.1.1.cmml" type="integer" xref="S3.SS0.SSS0.Px1.p1.4.m4.1.1.1.1">0</cn></apply><ci id="S3.SS0.SSS0.Px1.p1.4.m4.1.2.3.cmml" xref="S3.SS0.SSS0.Px1.p1.4.m4.1.2.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS0.Px1.p1.4.m4.1c">I^{(0)}_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS0.SSS0.Px1.p1.4.m4.1d">italic_I start_POSTSUPERSCRIPT ( 0 ) end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>. In our experiments, we use ShareGPT <cite class="ltx_cite ltx_citemacro_citep">(Team, <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib39" title="">2023</a>)</cite> as the seed set.
As instructions which are publicly accessible in scale such as ShareGPT lack the complexity needed for LLM applications <cite class="ltx_cite ltx_citemacro_citep">(Xu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib45" title="">2023</a>)</cite>, we iteratively increase their complexity through <math alttext="T" class="ltx_Math" display="inline" id="S3.SS0.SSS0.Px1.p1.5.m5.1"><semantics id="S3.SS0.SSS0.Px1.p1.5.m5.1a"><mi id="S3.SS0.SSS0.Px1.p1.5.m5.1.1" xref="S3.SS0.SSS0.Px1.p1.5.m5.1.1.cmml">T</mi><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS0.Px1.p1.5.m5.1b"><ci id="S3.SS0.SSS0.Px1.p1.5.m5.1.1.cmml" xref="S3.SS0.SSS0.Px1.p1.5.m5.1.1">𝑇</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS0.Px1.p1.5.m5.1c">T</annotation><annotation encoding="application/x-llamapun" id="S3.SS0.SSS0.Px1.p1.5.m5.1d">italic_T</annotation></semantics></math> rounds of an evolutionary process, and generate the preference dataset <math alttext="\mathcal{D}" class="ltx_Math" display="inline" id="S3.SS0.SSS0.Px1.p1.6.m6.1"><semantics id="S3.SS0.SSS0.Px1.p1.6.m6.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS0.SSS0.Px1.p1.6.m6.1.1" xref="S3.SS0.SSS0.Px1.p1.6.m6.1.1.cmml">𝒟</mi><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS0.Px1.p1.6.m6.1b"><ci id="S3.SS0.SSS0.Px1.p1.6.m6.1.1.cmml" xref="S3.SS0.SSS0.Px1.p1.6.m6.1.1">𝒟</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS0.Px1.p1.6.m6.1c">\mathcal{D}</annotation><annotation encoding="application/x-llamapun" id="S3.SS0.SSS0.Px1.p1.6.m6.1d">caligraphic_D</annotation></semantics></math>, which consist of (instruction, positive response, negative response) triples.</p>
</div>
<div class="ltx_para" id="S3.SS0.SSS0.Px1.p2">
<p class="ltx_p" id="S3.SS0.SSS0.Px1.p2.2">At each round <math alttext="t" class="ltx_Math" display="inline" id="S3.SS0.SSS0.Px1.p2.1.m1.1"><semantics id="S3.SS0.SSS0.Px1.p2.1.m1.1a"><mi id="S3.SS0.SSS0.Px1.p2.1.m1.1.1" xref="S3.SS0.SSS0.Px1.p2.1.m1.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS0.Px1.p2.1.m1.1b"><ci id="S3.SS0.SSS0.Px1.p2.1.m1.1.1.cmml" xref="S3.SS0.SSS0.Px1.p2.1.m1.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS0.Px1.p2.1.m1.1c">t</annotation><annotation encoding="application/x-llamapun" id="S3.SS0.SSS0.Px1.p2.1.m1.1d">italic_t</annotation></semantics></math>, for each instruction <math alttext="I_{i}^{(t-1)}" class="ltx_Math" display="inline" id="S3.SS0.SSS0.Px1.p2.2.m2.1"><semantics id="S3.SS0.SSS0.Px1.p2.2.m2.1a"><msubsup id="S3.SS0.SSS0.Px1.p2.2.m2.1.2" xref="S3.SS0.SSS0.Px1.p2.2.m2.1.2.cmml"><mi id="S3.SS0.SSS0.Px1.p2.2.m2.1.2.2.2" xref="S3.SS0.SSS0.Px1.p2.2.m2.1.2.2.2.cmml">I</mi><mi id="S3.SS0.SSS0.Px1.p2.2.m2.1.2.2.3" xref="S3.SS0.SSS0.Px1.p2.2.m2.1.2.2.3.cmml">i</mi><mrow id="S3.SS0.SSS0.Px1.p2.2.m2.1.1.1.1" xref="S3.SS0.SSS0.Px1.p2.2.m2.1.1.1.1.1.cmml"><mo id="S3.SS0.SSS0.Px1.p2.2.m2.1.1.1.1.2" stretchy="false" xref="S3.SS0.SSS0.Px1.p2.2.m2.1.1.1.1.1.cmml">(</mo><mrow id="S3.SS0.SSS0.Px1.p2.2.m2.1.1.1.1.1" xref="S3.SS0.SSS0.Px1.p2.2.m2.1.1.1.1.1.cmml"><mi id="S3.SS0.SSS0.Px1.p2.2.m2.1.1.1.1.1.2" xref="S3.SS0.SSS0.Px1.p2.2.m2.1.1.1.1.1.2.cmml">t</mi><mo id="S3.SS0.SSS0.Px1.p2.2.m2.1.1.1.1.1.1" xref="S3.SS0.SSS0.Px1.p2.2.m2.1.1.1.1.1.1.cmml">−</mo><mn id="S3.SS0.SSS0.Px1.p2.2.m2.1.1.1.1.1.3" xref="S3.SS0.SSS0.Px1.p2.2.m2.1.1.1.1.1.3.cmml">1</mn></mrow><mo id="S3.SS0.SSS0.Px1.p2.2.m2.1.1.1.1.3" stretchy="false" xref="S3.SS0.SSS0.Px1.p2.2.m2.1.1.1.1.1.cmml">)</mo></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS0.Px1.p2.2.m2.1b"><apply id="S3.SS0.SSS0.Px1.p2.2.m2.1.2.cmml" xref="S3.SS0.SSS0.Px1.p2.2.m2.1.2"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px1.p2.2.m2.1.2.1.cmml" xref="S3.SS0.SSS0.Px1.p2.2.m2.1.2">superscript</csymbol><apply id="S3.SS0.SSS0.Px1.p2.2.m2.1.2.2.cmml" xref="S3.SS0.SSS0.Px1.p2.2.m2.1.2"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px1.p2.2.m2.1.2.2.1.cmml" xref="S3.SS0.SSS0.Px1.p2.2.m2.1.2">subscript</csymbol><ci id="S3.SS0.SSS0.Px1.p2.2.m2.1.2.2.2.cmml" xref="S3.SS0.SSS0.Px1.p2.2.m2.1.2.2.2">𝐼</ci><ci id="S3.SS0.SSS0.Px1.p2.2.m2.1.2.2.3.cmml" xref="S3.SS0.SSS0.Px1.p2.2.m2.1.2.2.3">𝑖</ci></apply><apply id="S3.SS0.SSS0.Px1.p2.2.m2.1.1.1.1.1.cmml" xref="S3.SS0.SSS0.Px1.p2.2.m2.1.1.1.1"><minus id="S3.SS0.SSS0.Px1.p2.2.m2.1.1.1.1.1.1.cmml" xref="S3.SS0.SSS0.Px1.p2.2.m2.1.1.1.1.1.1"></minus><ci id="S3.SS0.SSS0.Px1.p2.2.m2.1.1.1.1.1.2.cmml" xref="S3.SS0.SSS0.Px1.p2.2.m2.1.1.1.1.1.2">𝑡</ci><cn id="S3.SS0.SSS0.Px1.p2.2.m2.1.1.1.1.1.3.cmml" type="integer" xref="S3.SS0.SSS0.Px1.p2.2.m2.1.1.1.1.1.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS0.Px1.p2.2.m2.1c">I_{i}^{(t-1)}</annotation><annotation encoding="application/x-llamapun" id="S3.SS0.SSS0.Px1.p2.2.m2.1d">italic_I start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ( italic_t - 1 ) end_POSTSUPERSCRIPT</annotation></semantics></math>, we run the following:</p>
<ul class="ltx_itemize" id="S3.I1">
<li class="ltx_item" id="S3.I1.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S3.I1.i1.p1">
<p class="ltx_p" id="S3.I1.i1.p1.2"><span class="ltx_text ltx_font_bold" id="S3.I1.i1.p1.2.1">Evolution</span>: Prompt an LLM to evolve <math alttext="I_{i}^{(t-1)}" class="ltx_Math" display="inline" id="S3.I1.i1.p1.1.m1.1"><semantics id="S3.I1.i1.p1.1.m1.1a"><msubsup id="S3.I1.i1.p1.1.m1.1.2" xref="S3.I1.i1.p1.1.m1.1.2.cmml"><mi id="S3.I1.i1.p1.1.m1.1.2.2.2" xref="S3.I1.i1.p1.1.m1.1.2.2.2.cmml">I</mi><mi id="S3.I1.i1.p1.1.m1.1.2.2.3" xref="S3.I1.i1.p1.1.m1.1.2.2.3.cmml">i</mi><mrow id="S3.I1.i1.p1.1.m1.1.1.1.1" xref="S3.I1.i1.p1.1.m1.1.1.1.1.1.cmml"><mo id="S3.I1.i1.p1.1.m1.1.1.1.1.2" stretchy="false" xref="S3.I1.i1.p1.1.m1.1.1.1.1.1.cmml">(</mo><mrow id="S3.I1.i1.p1.1.m1.1.1.1.1.1" xref="S3.I1.i1.p1.1.m1.1.1.1.1.1.cmml"><mi id="S3.I1.i1.p1.1.m1.1.1.1.1.1.2" xref="S3.I1.i1.p1.1.m1.1.1.1.1.1.2.cmml">t</mi><mo id="S3.I1.i1.p1.1.m1.1.1.1.1.1.1" xref="S3.I1.i1.p1.1.m1.1.1.1.1.1.1.cmml">−</mo><mn id="S3.I1.i1.p1.1.m1.1.1.1.1.1.3" xref="S3.I1.i1.p1.1.m1.1.1.1.1.1.3.cmml">1</mn></mrow><mo id="S3.I1.i1.p1.1.m1.1.1.1.1.3" stretchy="false" xref="S3.I1.i1.p1.1.m1.1.1.1.1.1.cmml">)</mo></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.I1.i1.p1.1.m1.1b"><apply id="S3.I1.i1.p1.1.m1.1.2.cmml" xref="S3.I1.i1.p1.1.m1.1.2"><csymbol cd="ambiguous" id="S3.I1.i1.p1.1.m1.1.2.1.cmml" xref="S3.I1.i1.p1.1.m1.1.2">superscript</csymbol><apply id="S3.I1.i1.p1.1.m1.1.2.2.cmml" xref="S3.I1.i1.p1.1.m1.1.2"><csymbol cd="ambiguous" id="S3.I1.i1.p1.1.m1.1.2.2.1.cmml" xref="S3.I1.i1.p1.1.m1.1.2">subscript</csymbol><ci id="S3.I1.i1.p1.1.m1.1.2.2.2.cmml" xref="S3.I1.i1.p1.1.m1.1.2.2.2">𝐼</ci><ci id="S3.I1.i1.p1.1.m1.1.2.2.3.cmml" xref="S3.I1.i1.p1.1.m1.1.2.2.3">𝑖</ci></apply><apply id="S3.I1.i1.p1.1.m1.1.1.1.1.1.cmml" xref="S3.I1.i1.p1.1.m1.1.1.1.1"><minus id="S3.I1.i1.p1.1.m1.1.1.1.1.1.1.cmml" xref="S3.I1.i1.p1.1.m1.1.1.1.1.1.1"></minus><ci id="S3.I1.i1.p1.1.m1.1.1.1.1.1.2.cmml" xref="S3.I1.i1.p1.1.m1.1.1.1.1.1.2">𝑡</ci><cn id="S3.I1.i1.p1.1.m1.1.1.1.1.1.3.cmml" type="integer" xref="S3.I1.i1.p1.1.m1.1.1.1.1.1.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I1.i1.p1.1.m1.1c">I_{i}^{(t-1)}</annotation><annotation encoding="application/x-llamapun" id="S3.I1.i1.p1.1.m1.1d">italic_I start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ( italic_t - 1 ) end_POSTSUPERSCRIPT</annotation></semantics></math> into proposal instruction <math alttext="\tilde{I}_{i}^{(t)}" class="ltx_Math" display="inline" id="S3.I1.i1.p1.2.m2.1"><semantics id="S3.I1.i1.p1.2.m2.1a"><msubsup id="S3.I1.i1.p1.2.m2.1.2" xref="S3.I1.i1.p1.2.m2.1.2.cmml"><mover accent="true" id="S3.I1.i1.p1.2.m2.1.2.2.2" xref="S3.I1.i1.p1.2.m2.1.2.2.2.cmml"><mi id="S3.I1.i1.p1.2.m2.1.2.2.2.2" xref="S3.I1.i1.p1.2.m2.1.2.2.2.2.cmml">I</mi><mo id="S3.I1.i1.p1.2.m2.1.2.2.2.1" xref="S3.I1.i1.p1.2.m2.1.2.2.2.1.cmml">~</mo></mover><mi id="S3.I1.i1.p1.2.m2.1.2.2.3" xref="S3.I1.i1.p1.2.m2.1.2.2.3.cmml">i</mi><mrow id="S3.I1.i1.p1.2.m2.1.1.1.3" xref="S3.I1.i1.p1.2.m2.1.2.cmml"><mo id="S3.I1.i1.p1.2.m2.1.1.1.3.1" stretchy="false" xref="S3.I1.i1.p1.2.m2.1.2.cmml">(</mo><mi id="S3.I1.i1.p1.2.m2.1.1.1.1" xref="S3.I1.i1.p1.2.m2.1.1.1.1.cmml">t</mi><mo id="S3.I1.i1.p1.2.m2.1.1.1.3.2" stretchy="false" xref="S3.I1.i1.p1.2.m2.1.2.cmml">)</mo></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.I1.i1.p1.2.m2.1b"><apply id="S3.I1.i1.p1.2.m2.1.2.cmml" xref="S3.I1.i1.p1.2.m2.1.2"><csymbol cd="ambiguous" id="S3.I1.i1.p1.2.m2.1.2.1.cmml" xref="S3.I1.i1.p1.2.m2.1.2">superscript</csymbol><apply id="S3.I1.i1.p1.2.m2.1.2.2.cmml" xref="S3.I1.i1.p1.2.m2.1.2"><csymbol cd="ambiguous" id="S3.I1.i1.p1.2.m2.1.2.2.1.cmml" xref="S3.I1.i1.p1.2.m2.1.2">subscript</csymbol><apply id="S3.I1.i1.p1.2.m2.1.2.2.2.cmml" xref="S3.I1.i1.p1.2.m2.1.2.2.2"><ci id="S3.I1.i1.p1.2.m2.1.2.2.2.1.cmml" xref="S3.I1.i1.p1.2.m2.1.2.2.2.1">~</ci><ci id="S3.I1.i1.p1.2.m2.1.2.2.2.2.cmml" xref="S3.I1.i1.p1.2.m2.1.2.2.2.2">𝐼</ci></apply><ci id="S3.I1.i1.p1.2.m2.1.2.2.3.cmml" xref="S3.I1.i1.p1.2.m2.1.2.2.3">𝑖</ci></apply><ci id="S3.I1.i1.p1.2.m2.1.1.1.1.cmml" xref="S3.I1.i1.p1.2.m2.1.1.1.1">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I1.i1.p1.2.m2.1c">\tilde{I}_{i}^{(t)}</annotation><annotation encoding="application/x-llamapun" id="S3.I1.i1.p1.2.m2.1d">over~ start_ARG italic_I end_ARG start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ( italic_t ) end_POSTSUPERSCRIPT</annotation></semantics></math>.
The evolution typically increases the complexity of the instruction.
We discuss types of evolution operations we consider in Section <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#S4" title="4 Fine-Grained Evolution Taxonomy ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_tag">4</span></a>.</p>
</div>
</li>
<li class="ltx_item" id="S3.I1.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S3.I1.i2.p1">
<p class="ltx_p" id="S3.I1.i2.p1.2"><span class="ltx_text ltx_font_bold" id="S3.I1.i2.p1.2.1">Adaptation</span>: Prompt an LLM to generate a proposal response <math alttext="\tilde{R}_{i}^{(t)}" class="ltx_Math" display="inline" id="S3.I1.i2.p1.1.m1.1"><semantics id="S3.I1.i2.p1.1.m1.1a"><msubsup id="S3.I1.i2.p1.1.m1.1.2" xref="S3.I1.i2.p1.1.m1.1.2.cmml"><mover accent="true" id="S3.I1.i2.p1.1.m1.1.2.2.2" xref="S3.I1.i2.p1.1.m1.1.2.2.2.cmml"><mi id="S3.I1.i2.p1.1.m1.1.2.2.2.2" xref="S3.I1.i2.p1.1.m1.1.2.2.2.2.cmml">R</mi><mo id="S3.I1.i2.p1.1.m1.1.2.2.2.1" xref="S3.I1.i2.p1.1.m1.1.2.2.2.1.cmml">~</mo></mover><mi id="S3.I1.i2.p1.1.m1.1.2.2.3" xref="S3.I1.i2.p1.1.m1.1.2.2.3.cmml">i</mi><mrow id="S3.I1.i2.p1.1.m1.1.1.1.3" xref="S3.I1.i2.p1.1.m1.1.2.cmml"><mo id="S3.I1.i2.p1.1.m1.1.1.1.3.1" stretchy="false" xref="S3.I1.i2.p1.1.m1.1.2.cmml">(</mo><mi id="S3.I1.i2.p1.1.m1.1.1.1.1" xref="S3.I1.i2.p1.1.m1.1.1.1.1.cmml">t</mi><mo id="S3.I1.i2.p1.1.m1.1.1.1.3.2" stretchy="false" xref="S3.I1.i2.p1.1.m1.1.2.cmml">)</mo></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.I1.i2.p1.1.m1.1b"><apply id="S3.I1.i2.p1.1.m1.1.2.cmml" xref="S3.I1.i2.p1.1.m1.1.2"><csymbol cd="ambiguous" id="S3.I1.i2.p1.1.m1.1.2.1.cmml" xref="S3.I1.i2.p1.1.m1.1.2">superscript</csymbol><apply id="S3.I1.i2.p1.1.m1.1.2.2.cmml" xref="S3.I1.i2.p1.1.m1.1.2"><csymbol cd="ambiguous" id="S3.I1.i2.p1.1.m1.1.2.2.1.cmml" xref="S3.I1.i2.p1.1.m1.1.2">subscript</csymbol><apply id="S3.I1.i2.p1.1.m1.1.2.2.2.cmml" xref="S3.I1.i2.p1.1.m1.1.2.2.2"><ci id="S3.I1.i2.p1.1.m1.1.2.2.2.1.cmml" xref="S3.I1.i2.p1.1.m1.1.2.2.2.1">~</ci><ci id="S3.I1.i2.p1.1.m1.1.2.2.2.2.cmml" xref="S3.I1.i2.p1.1.m1.1.2.2.2.2">𝑅</ci></apply><ci id="S3.I1.i2.p1.1.m1.1.2.2.3.cmml" xref="S3.I1.i2.p1.1.m1.1.2.2.3">𝑖</ci></apply><ci id="S3.I1.i2.p1.1.m1.1.1.1.1.cmml" xref="S3.I1.i2.p1.1.m1.1.1.1.1">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I1.i2.p1.1.m1.1c">\tilde{R}_{i}^{(t)}</annotation><annotation encoding="application/x-llamapun" id="S3.I1.i2.p1.1.m1.1d">over~ start_ARG italic_R end_ARG start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ( italic_t ) end_POSTSUPERSCRIPT</annotation></semantics></math> on the new instruction <math alttext="\tilde{I}_{i}^{(t)}" class="ltx_Math" display="inline" id="S3.I1.i2.p1.2.m2.1"><semantics id="S3.I1.i2.p1.2.m2.1a"><msubsup id="S3.I1.i2.p1.2.m2.1.2" xref="S3.I1.i2.p1.2.m2.1.2.cmml"><mover accent="true" id="S3.I1.i2.p1.2.m2.1.2.2.2" xref="S3.I1.i2.p1.2.m2.1.2.2.2.cmml"><mi id="S3.I1.i2.p1.2.m2.1.2.2.2.2" xref="S3.I1.i2.p1.2.m2.1.2.2.2.2.cmml">I</mi><mo id="S3.I1.i2.p1.2.m2.1.2.2.2.1" xref="S3.I1.i2.p1.2.m2.1.2.2.2.1.cmml">~</mo></mover><mi id="S3.I1.i2.p1.2.m2.1.2.2.3" xref="S3.I1.i2.p1.2.m2.1.2.2.3.cmml">i</mi><mrow id="S3.I1.i2.p1.2.m2.1.1.1.3" xref="S3.I1.i2.p1.2.m2.1.2.cmml"><mo id="S3.I1.i2.p1.2.m2.1.1.1.3.1" stretchy="false" xref="S3.I1.i2.p1.2.m2.1.2.cmml">(</mo><mi id="S3.I1.i2.p1.2.m2.1.1.1.1" xref="S3.I1.i2.p1.2.m2.1.1.1.1.cmml">t</mi><mo id="S3.I1.i2.p1.2.m2.1.1.1.3.2" stretchy="false" xref="S3.I1.i2.p1.2.m2.1.2.cmml">)</mo></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.I1.i2.p1.2.m2.1b"><apply id="S3.I1.i2.p1.2.m2.1.2.cmml" xref="S3.I1.i2.p1.2.m2.1.2"><csymbol cd="ambiguous" id="S3.I1.i2.p1.2.m2.1.2.1.cmml" xref="S3.I1.i2.p1.2.m2.1.2">superscript</csymbol><apply id="S3.I1.i2.p1.2.m2.1.2.2.cmml" xref="S3.I1.i2.p1.2.m2.1.2"><csymbol cd="ambiguous" id="S3.I1.i2.p1.2.m2.1.2.2.1.cmml" xref="S3.I1.i2.p1.2.m2.1.2">subscript</csymbol><apply id="S3.I1.i2.p1.2.m2.1.2.2.2.cmml" xref="S3.I1.i2.p1.2.m2.1.2.2.2"><ci id="S3.I1.i2.p1.2.m2.1.2.2.2.1.cmml" xref="S3.I1.i2.p1.2.m2.1.2.2.2.1">~</ci><ci id="S3.I1.i2.p1.2.m2.1.2.2.2.2.cmml" xref="S3.I1.i2.p1.2.m2.1.2.2.2.2">𝐼</ci></apply><ci id="S3.I1.i2.p1.2.m2.1.2.2.3.cmml" xref="S3.I1.i2.p1.2.m2.1.2.2.3">𝑖</ci></apply><ci id="S3.I1.i2.p1.2.m2.1.1.1.1.cmml" xref="S3.I1.i2.p1.2.m2.1.1.1.1">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I1.i2.p1.2.m2.1c">\tilde{I}_{i}^{(t)}</annotation><annotation encoding="application/x-llamapun" id="S3.I1.i2.p1.2.m2.1d">over~ start_ARG italic_I end_ARG start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ( italic_t ) end_POSTSUPERSCRIPT</annotation></semantics></math>.</p>
</div>
</li>
<li class="ltx_item" id="S3.I1.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S3.I1.i3.p1">
<p class="ltx_p" id="S3.I1.i3.p1.3"><span class="ltx_text ltx_font_bold" id="S3.I1.i3.p1.3.1">Elimination</span>: The quality of <math alttext="\tilde{R}_{i}^{(t)}" class="ltx_Math" display="inline" id="S3.I1.i3.p1.1.m1.1"><semantics id="S3.I1.i3.p1.1.m1.1a"><msubsup id="S3.I1.i3.p1.1.m1.1.2" xref="S3.I1.i3.p1.1.m1.1.2.cmml"><mover accent="true" id="S3.I1.i3.p1.1.m1.1.2.2.2" xref="S3.I1.i3.p1.1.m1.1.2.2.2.cmml"><mi id="S3.I1.i3.p1.1.m1.1.2.2.2.2" xref="S3.I1.i3.p1.1.m1.1.2.2.2.2.cmml">R</mi><mo id="S3.I1.i3.p1.1.m1.1.2.2.2.1" xref="S3.I1.i3.p1.1.m1.1.2.2.2.1.cmml">~</mo></mover><mi id="S3.I1.i3.p1.1.m1.1.2.2.3" xref="S3.I1.i3.p1.1.m1.1.2.2.3.cmml">i</mi><mrow id="S3.I1.i3.p1.1.m1.1.1.1.3" xref="S3.I1.i3.p1.1.m1.1.2.cmml"><mo id="S3.I1.i3.p1.1.m1.1.1.1.3.1" stretchy="false" xref="S3.I1.i3.p1.1.m1.1.2.cmml">(</mo><mi id="S3.I1.i3.p1.1.m1.1.1.1.1" xref="S3.I1.i3.p1.1.m1.1.1.1.1.cmml">t</mi><mo id="S3.I1.i3.p1.1.m1.1.1.1.3.2" stretchy="false" xref="S3.I1.i3.p1.1.m1.1.2.cmml">)</mo></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.I1.i3.p1.1.m1.1b"><apply id="S3.I1.i3.p1.1.m1.1.2.cmml" xref="S3.I1.i3.p1.1.m1.1.2"><csymbol cd="ambiguous" id="S3.I1.i3.p1.1.m1.1.2.1.cmml" xref="S3.I1.i3.p1.1.m1.1.2">superscript</csymbol><apply id="S3.I1.i3.p1.1.m1.1.2.2.cmml" xref="S3.I1.i3.p1.1.m1.1.2"><csymbol cd="ambiguous" id="S3.I1.i3.p1.1.m1.1.2.2.1.cmml" xref="S3.I1.i3.p1.1.m1.1.2">subscript</csymbol><apply id="S3.I1.i3.p1.1.m1.1.2.2.2.cmml" xref="S3.I1.i3.p1.1.m1.1.2.2.2"><ci id="S3.I1.i3.p1.1.m1.1.2.2.2.1.cmml" xref="S3.I1.i3.p1.1.m1.1.2.2.2.1">~</ci><ci id="S3.I1.i3.p1.1.m1.1.2.2.2.2.cmml" xref="S3.I1.i3.p1.1.m1.1.2.2.2.2">𝑅</ci></apply><ci id="S3.I1.i3.p1.1.m1.1.2.2.3.cmml" xref="S3.I1.i3.p1.1.m1.1.2.2.3">𝑖</ci></apply><ci id="S3.I1.i3.p1.1.m1.1.1.1.1.cmml" xref="S3.I1.i3.p1.1.m1.1.1.1.1">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I1.i3.p1.1.m1.1c">\tilde{R}_{i}^{(t)}</annotation><annotation encoding="application/x-llamapun" id="S3.I1.i3.p1.1.m1.1d">over~ start_ARG italic_R end_ARG start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ( italic_t ) end_POSTSUPERSCRIPT</annotation></semantics></math> is checked with another
LLM prompt. If the quality is acceptable, the proposal is kept: <math alttext="(I_{i}^{(t)},R_{i}^{(t)})\leftarrow(\tilde{I}_{i}^{(t)},\tilde{R}_{i}^{(t)})" class="ltx_Math" display="inline" id="S3.I1.i3.p1.2.m2.8"><semantics id="S3.I1.i3.p1.2.m2.8a"><mrow id="S3.I1.i3.p1.2.m2.8.8" xref="S3.I1.i3.p1.2.m2.8.8.cmml"><mrow id="S3.I1.i3.p1.2.m2.6.6.2.2" xref="S3.I1.i3.p1.2.m2.6.6.2.3.cmml"><mo id="S3.I1.i3.p1.2.m2.6.6.2.2.3" stretchy="false" xref="S3.I1.i3.p1.2.m2.6.6.2.3.cmml">(</mo><msubsup id="S3.I1.i3.p1.2.m2.5.5.1.1.1" xref="S3.I1.i3.p1.2.m2.5.5.1.1.1.cmml"><mi id="S3.I1.i3.p1.2.m2.5.5.1.1.1.2.2" xref="S3.I1.i3.p1.2.m2.5.5.1.1.1.2.2.cmml">I</mi><mi id="S3.I1.i3.p1.2.m2.5.5.1.1.1.2.3" xref="S3.I1.i3.p1.2.m2.5.5.1.1.1.2.3.cmml">i</mi><mrow id="S3.I1.i3.p1.2.m2.1.1.1.3" xref="S3.I1.i3.p1.2.m2.5.5.1.1.1.cmml"><mo id="S3.I1.i3.p1.2.m2.1.1.1.3.1" stretchy="false" xref="S3.I1.i3.p1.2.m2.5.5.1.1.1.cmml">(</mo><mi id="S3.I1.i3.p1.2.m2.1.1.1.1" xref="S3.I1.i3.p1.2.m2.1.1.1.1.cmml">t</mi><mo id="S3.I1.i3.p1.2.m2.1.1.1.3.2" stretchy="false" xref="S3.I1.i3.p1.2.m2.5.5.1.1.1.cmml">)</mo></mrow></msubsup><mo id="S3.I1.i3.p1.2.m2.6.6.2.2.4" xref="S3.I1.i3.p1.2.m2.6.6.2.3.cmml">,</mo><msubsup id="S3.I1.i3.p1.2.m2.6.6.2.2.2" xref="S3.I1.i3.p1.2.m2.6.6.2.2.2.cmml"><mi id="S3.I1.i3.p1.2.m2.6.6.2.2.2.2.2" xref="S3.I1.i3.p1.2.m2.6.6.2.2.2.2.2.cmml">R</mi><mi id="S3.I1.i3.p1.2.m2.6.6.2.2.2.2.3" xref="S3.I1.i3.p1.2.m2.6.6.2.2.2.2.3.cmml">i</mi><mrow id="S3.I1.i3.p1.2.m2.2.2.1.3" xref="S3.I1.i3.p1.2.m2.6.6.2.2.2.cmml"><mo id="S3.I1.i3.p1.2.m2.2.2.1.3.1" stretchy="false" xref="S3.I1.i3.p1.2.m2.6.6.2.2.2.cmml">(</mo><mi id="S3.I1.i3.p1.2.m2.2.2.1.1" xref="S3.I1.i3.p1.2.m2.2.2.1.1.cmml">t</mi><mo id="S3.I1.i3.p1.2.m2.2.2.1.3.2" stretchy="false" xref="S3.I1.i3.p1.2.m2.6.6.2.2.2.cmml">)</mo></mrow></msubsup><mo id="S3.I1.i3.p1.2.m2.6.6.2.2.5" stretchy="false" xref="S3.I1.i3.p1.2.m2.6.6.2.3.cmml">)</mo></mrow><mo id="S3.I1.i3.p1.2.m2.8.8.5" stretchy="false" xref="S3.I1.i3.p1.2.m2.8.8.5.cmml">←</mo><mrow id="S3.I1.i3.p1.2.m2.8.8.4.2" xref="S3.I1.i3.p1.2.m2.8.8.4.3.cmml"><mo id="S3.I1.i3.p1.2.m2.8.8.4.2.3" stretchy="false" xref="S3.I1.i3.p1.2.m2.8.8.4.3.cmml">(</mo><msubsup id="S3.I1.i3.p1.2.m2.7.7.3.1.1" xref="S3.I1.i3.p1.2.m2.7.7.3.1.1.cmml"><mover accent="true" id="S3.I1.i3.p1.2.m2.7.7.3.1.1.2.2" xref="S3.I1.i3.p1.2.m2.7.7.3.1.1.2.2.cmml"><mi id="S3.I1.i3.p1.2.m2.7.7.3.1.1.2.2.2" xref="S3.I1.i3.p1.2.m2.7.7.3.1.1.2.2.2.cmml">I</mi><mo id="S3.I1.i3.p1.2.m2.7.7.3.1.1.2.2.1" xref="S3.I1.i3.p1.2.m2.7.7.3.1.1.2.2.1.cmml">~</mo></mover><mi id="S3.I1.i3.p1.2.m2.7.7.3.1.1.2.3" xref="S3.I1.i3.p1.2.m2.7.7.3.1.1.2.3.cmml">i</mi><mrow id="S3.I1.i3.p1.2.m2.3.3.1.3" xref="S3.I1.i3.p1.2.m2.7.7.3.1.1.cmml"><mo id="S3.I1.i3.p1.2.m2.3.3.1.3.1" stretchy="false" xref="S3.I1.i3.p1.2.m2.7.7.3.1.1.cmml">(</mo><mi id="S3.I1.i3.p1.2.m2.3.3.1.1" xref="S3.I1.i3.p1.2.m2.3.3.1.1.cmml">t</mi><mo id="S3.I1.i3.p1.2.m2.3.3.1.3.2" stretchy="false" xref="S3.I1.i3.p1.2.m2.7.7.3.1.1.cmml">)</mo></mrow></msubsup><mo id="S3.I1.i3.p1.2.m2.8.8.4.2.4" xref="S3.I1.i3.p1.2.m2.8.8.4.3.cmml">,</mo><msubsup id="S3.I1.i3.p1.2.m2.8.8.4.2.2" xref="S3.I1.i3.p1.2.m2.8.8.4.2.2.cmml"><mover accent="true" id="S3.I1.i3.p1.2.m2.8.8.4.2.2.2.2" xref="S3.I1.i3.p1.2.m2.8.8.4.2.2.2.2.cmml"><mi id="S3.I1.i3.p1.2.m2.8.8.4.2.2.2.2.2" xref="S3.I1.i3.p1.2.m2.8.8.4.2.2.2.2.2.cmml">R</mi><mo id="S3.I1.i3.p1.2.m2.8.8.4.2.2.2.2.1" xref="S3.I1.i3.p1.2.m2.8.8.4.2.2.2.2.1.cmml">~</mo></mover><mi id="S3.I1.i3.p1.2.m2.8.8.4.2.2.2.3" xref="S3.I1.i3.p1.2.m2.8.8.4.2.2.2.3.cmml">i</mi><mrow id="S3.I1.i3.p1.2.m2.4.4.1.3" xref="S3.I1.i3.p1.2.m2.8.8.4.2.2.cmml"><mo id="S3.I1.i3.p1.2.m2.4.4.1.3.1" stretchy="false" xref="S3.I1.i3.p1.2.m2.8.8.4.2.2.cmml">(</mo><mi id="S3.I1.i3.p1.2.m2.4.4.1.1" xref="S3.I1.i3.p1.2.m2.4.4.1.1.cmml">t</mi><mo id="S3.I1.i3.p1.2.m2.4.4.1.3.2" stretchy="false" xref="S3.I1.i3.p1.2.m2.8.8.4.2.2.cmml">)</mo></mrow></msubsup><mo id="S3.I1.i3.p1.2.m2.8.8.4.2.5" stretchy="false" xref="S3.I1.i3.p1.2.m2.8.8.4.3.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.I1.i3.p1.2.m2.8b"><apply id="S3.I1.i3.p1.2.m2.8.8.cmml" xref="S3.I1.i3.p1.2.m2.8.8"><ci id="S3.I1.i3.p1.2.m2.8.8.5.cmml" xref="S3.I1.i3.p1.2.m2.8.8.5">←</ci><interval closure="open" id="S3.I1.i3.p1.2.m2.6.6.2.3.cmml" xref="S3.I1.i3.p1.2.m2.6.6.2.2"><apply id="S3.I1.i3.p1.2.m2.5.5.1.1.1.cmml" xref="S3.I1.i3.p1.2.m2.5.5.1.1.1"><csymbol cd="ambiguous" id="S3.I1.i3.p1.2.m2.5.5.1.1.1.1.cmml" xref="S3.I1.i3.p1.2.m2.5.5.1.1.1">superscript</csymbol><apply id="S3.I1.i3.p1.2.m2.5.5.1.1.1.2.cmml" xref="S3.I1.i3.p1.2.m2.5.5.1.1.1"><csymbol cd="ambiguous" id="S3.I1.i3.p1.2.m2.5.5.1.1.1.2.1.cmml" xref="S3.I1.i3.p1.2.m2.5.5.1.1.1">subscript</csymbol><ci id="S3.I1.i3.p1.2.m2.5.5.1.1.1.2.2.cmml" xref="S3.I1.i3.p1.2.m2.5.5.1.1.1.2.2">𝐼</ci><ci id="S3.I1.i3.p1.2.m2.5.5.1.1.1.2.3.cmml" xref="S3.I1.i3.p1.2.m2.5.5.1.1.1.2.3">𝑖</ci></apply><ci id="S3.I1.i3.p1.2.m2.1.1.1.1.cmml" xref="S3.I1.i3.p1.2.m2.1.1.1.1">𝑡</ci></apply><apply id="S3.I1.i3.p1.2.m2.6.6.2.2.2.cmml" xref="S3.I1.i3.p1.2.m2.6.6.2.2.2"><csymbol cd="ambiguous" id="S3.I1.i3.p1.2.m2.6.6.2.2.2.1.cmml" xref="S3.I1.i3.p1.2.m2.6.6.2.2.2">superscript</csymbol><apply id="S3.I1.i3.p1.2.m2.6.6.2.2.2.2.cmml" xref="S3.I1.i3.p1.2.m2.6.6.2.2.2"><csymbol cd="ambiguous" id="S3.I1.i3.p1.2.m2.6.6.2.2.2.2.1.cmml" xref="S3.I1.i3.p1.2.m2.6.6.2.2.2">subscript</csymbol><ci id="S3.I1.i3.p1.2.m2.6.6.2.2.2.2.2.cmml" xref="S3.I1.i3.p1.2.m2.6.6.2.2.2.2.2">𝑅</ci><ci id="S3.I1.i3.p1.2.m2.6.6.2.2.2.2.3.cmml" xref="S3.I1.i3.p1.2.m2.6.6.2.2.2.2.3">𝑖</ci></apply><ci id="S3.I1.i3.p1.2.m2.2.2.1.1.cmml" xref="S3.I1.i3.p1.2.m2.2.2.1.1">𝑡</ci></apply></interval><interval closure="open" id="S3.I1.i3.p1.2.m2.8.8.4.3.cmml" xref="S3.I1.i3.p1.2.m2.8.8.4.2"><apply id="S3.I1.i3.p1.2.m2.7.7.3.1.1.cmml" xref="S3.I1.i3.p1.2.m2.7.7.3.1.1"><csymbol cd="ambiguous" id="S3.I1.i3.p1.2.m2.7.7.3.1.1.1.cmml" xref="S3.I1.i3.p1.2.m2.7.7.3.1.1">superscript</csymbol><apply id="S3.I1.i3.p1.2.m2.7.7.3.1.1.2.cmml" xref="S3.I1.i3.p1.2.m2.7.7.3.1.1"><csymbol cd="ambiguous" id="S3.I1.i3.p1.2.m2.7.7.3.1.1.2.1.cmml" xref="S3.I1.i3.p1.2.m2.7.7.3.1.1">subscript</csymbol><apply id="S3.I1.i3.p1.2.m2.7.7.3.1.1.2.2.cmml" xref="S3.I1.i3.p1.2.m2.7.7.3.1.1.2.2"><ci id="S3.I1.i3.p1.2.m2.7.7.3.1.1.2.2.1.cmml" xref="S3.I1.i3.p1.2.m2.7.7.3.1.1.2.2.1">~</ci><ci id="S3.I1.i3.p1.2.m2.7.7.3.1.1.2.2.2.cmml" xref="S3.I1.i3.p1.2.m2.7.7.3.1.1.2.2.2">𝐼</ci></apply><ci id="S3.I1.i3.p1.2.m2.7.7.3.1.1.2.3.cmml" xref="S3.I1.i3.p1.2.m2.7.7.3.1.1.2.3">𝑖</ci></apply><ci id="S3.I1.i3.p1.2.m2.3.3.1.1.cmml" xref="S3.I1.i3.p1.2.m2.3.3.1.1">𝑡</ci></apply><apply id="S3.I1.i3.p1.2.m2.8.8.4.2.2.cmml" xref="S3.I1.i3.p1.2.m2.8.8.4.2.2"><csymbol cd="ambiguous" id="S3.I1.i3.p1.2.m2.8.8.4.2.2.1.cmml" xref="S3.I1.i3.p1.2.m2.8.8.4.2.2">superscript</csymbol><apply id="S3.I1.i3.p1.2.m2.8.8.4.2.2.2.cmml" xref="S3.I1.i3.p1.2.m2.8.8.4.2.2"><csymbol cd="ambiguous" id="S3.I1.i3.p1.2.m2.8.8.4.2.2.2.1.cmml" xref="S3.I1.i3.p1.2.m2.8.8.4.2.2">subscript</csymbol><apply id="S3.I1.i3.p1.2.m2.8.8.4.2.2.2.2.cmml" xref="S3.I1.i3.p1.2.m2.8.8.4.2.2.2.2"><ci id="S3.I1.i3.p1.2.m2.8.8.4.2.2.2.2.1.cmml" xref="S3.I1.i3.p1.2.m2.8.8.4.2.2.2.2.1">~</ci><ci id="S3.I1.i3.p1.2.m2.8.8.4.2.2.2.2.2.cmml" xref="S3.I1.i3.p1.2.m2.8.8.4.2.2.2.2.2">𝑅</ci></apply><ci id="S3.I1.i3.p1.2.m2.8.8.4.2.2.2.3.cmml" xref="S3.I1.i3.p1.2.m2.8.8.4.2.2.2.3">𝑖</ci></apply><ci id="S3.I1.i3.p1.2.m2.4.4.1.1.cmml" xref="S3.I1.i3.p1.2.m2.4.4.1.1">𝑡</ci></apply></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I1.i3.p1.2.m2.8c">(I_{i}^{(t)},R_{i}^{(t)})\leftarrow(\tilde{I}_{i}^{(t)},\tilde{R}_{i}^{(t)})</annotation><annotation encoding="application/x-llamapun" id="S3.I1.i3.p1.2.m2.8d">( italic_I start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ( italic_t ) end_POSTSUPERSCRIPT , italic_R start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ( italic_t ) end_POSTSUPERSCRIPT ) ← ( over~ start_ARG italic_I end_ARG start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ( italic_t ) end_POSTSUPERSCRIPT , over~ start_ARG italic_R end_ARG start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ( italic_t ) end_POSTSUPERSCRIPT )</annotation></semantics></math>. Otherwise,
<math alttext="(I_{i}^{(t)},R_{i}^{(t)})\leftarrow(I_{i}^{(t-1)},R_{i}^{(t-1)})" class="ltx_Math" display="inline" id="S3.I1.i3.p1.3.m3.8"><semantics id="S3.I1.i3.p1.3.m3.8a"><mrow id="S3.I1.i3.p1.3.m3.8.8" xref="S3.I1.i3.p1.3.m3.8.8.cmml"><mrow id="S3.I1.i3.p1.3.m3.6.6.2.2" xref="S3.I1.i3.p1.3.m3.6.6.2.3.cmml"><mo id="S3.I1.i3.p1.3.m3.6.6.2.2.3" stretchy="false" xref="S3.I1.i3.p1.3.m3.6.6.2.3.cmml">(</mo><msubsup id="S3.I1.i3.p1.3.m3.5.5.1.1.1" xref="S3.I1.i3.p1.3.m3.5.5.1.1.1.cmml"><mi id="S3.I1.i3.p1.3.m3.5.5.1.1.1.2.2" xref="S3.I1.i3.p1.3.m3.5.5.1.1.1.2.2.cmml">I</mi><mi id="S3.I1.i3.p1.3.m3.5.5.1.1.1.2.3" xref="S3.I1.i3.p1.3.m3.5.5.1.1.1.2.3.cmml">i</mi><mrow id="S3.I1.i3.p1.3.m3.1.1.1.3" xref="S3.I1.i3.p1.3.m3.5.5.1.1.1.cmml"><mo id="S3.I1.i3.p1.3.m3.1.1.1.3.1" stretchy="false" xref="S3.I1.i3.p1.3.m3.5.5.1.1.1.cmml">(</mo><mi id="S3.I1.i3.p1.3.m3.1.1.1.1" xref="S3.I1.i3.p1.3.m3.1.1.1.1.cmml">t</mi><mo id="S3.I1.i3.p1.3.m3.1.1.1.3.2" stretchy="false" xref="S3.I1.i3.p1.3.m3.5.5.1.1.1.cmml">)</mo></mrow></msubsup><mo id="S3.I1.i3.p1.3.m3.6.6.2.2.4" xref="S3.I1.i3.p1.3.m3.6.6.2.3.cmml">,</mo><msubsup id="S3.I1.i3.p1.3.m3.6.6.2.2.2" xref="S3.I1.i3.p1.3.m3.6.6.2.2.2.cmml"><mi id="S3.I1.i3.p1.3.m3.6.6.2.2.2.2.2" xref="S3.I1.i3.p1.3.m3.6.6.2.2.2.2.2.cmml">R</mi><mi id="S3.I1.i3.p1.3.m3.6.6.2.2.2.2.3" xref="S3.I1.i3.p1.3.m3.6.6.2.2.2.2.3.cmml">i</mi><mrow id="S3.I1.i3.p1.3.m3.2.2.1.3" xref="S3.I1.i3.p1.3.m3.6.6.2.2.2.cmml"><mo id="S3.I1.i3.p1.3.m3.2.2.1.3.1" stretchy="false" xref="S3.I1.i3.p1.3.m3.6.6.2.2.2.cmml">(</mo><mi id="S3.I1.i3.p1.3.m3.2.2.1.1" xref="S3.I1.i3.p1.3.m3.2.2.1.1.cmml">t</mi><mo id="S3.I1.i3.p1.3.m3.2.2.1.3.2" stretchy="false" xref="S3.I1.i3.p1.3.m3.6.6.2.2.2.cmml">)</mo></mrow></msubsup><mo id="S3.I1.i3.p1.3.m3.6.6.2.2.5" stretchy="false" xref="S3.I1.i3.p1.3.m3.6.6.2.3.cmml">)</mo></mrow><mo id="S3.I1.i3.p1.3.m3.8.8.5" stretchy="false" xref="S3.I1.i3.p1.3.m3.8.8.5.cmml">←</mo><mrow id="S3.I1.i3.p1.3.m3.8.8.4.2" xref="S3.I1.i3.p1.3.m3.8.8.4.3.cmml"><mo id="S3.I1.i3.p1.3.m3.8.8.4.2.3" stretchy="false" xref="S3.I1.i3.p1.3.m3.8.8.4.3.cmml">(</mo><msubsup id="S3.I1.i3.p1.3.m3.7.7.3.1.1" xref="S3.I1.i3.p1.3.m3.7.7.3.1.1.cmml"><mi id="S3.I1.i3.p1.3.m3.7.7.3.1.1.2.2" xref="S3.I1.i3.p1.3.m3.7.7.3.1.1.2.2.cmml">I</mi><mi id="S3.I1.i3.p1.3.m3.7.7.3.1.1.2.3" xref="S3.I1.i3.p1.3.m3.7.7.3.1.1.2.3.cmml">i</mi><mrow id="S3.I1.i3.p1.3.m3.3.3.1.1" xref="S3.I1.i3.p1.3.m3.3.3.1.1.1.cmml"><mo id="S3.I1.i3.p1.3.m3.3.3.1.1.2" stretchy="false" xref="S3.I1.i3.p1.3.m3.3.3.1.1.1.cmml">(</mo><mrow id="S3.I1.i3.p1.3.m3.3.3.1.1.1" xref="S3.I1.i3.p1.3.m3.3.3.1.1.1.cmml"><mi id="S3.I1.i3.p1.3.m3.3.3.1.1.1.2" xref="S3.I1.i3.p1.3.m3.3.3.1.1.1.2.cmml">t</mi><mo id="S3.I1.i3.p1.3.m3.3.3.1.1.1.1" xref="S3.I1.i3.p1.3.m3.3.3.1.1.1.1.cmml">−</mo><mn id="S3.I1.i3.p1.3.m3.3.3.1.1.1.3" xref="S3.I1.i3.p1.3.m3.3.3.1.1.1.3.cmml">1</mn></mrow><mo id="S3.I1.i3.p1.3.m3.3.3.1.1.3" stretchy="false" xref="S3.I1.i3.p1.3.m3.3.3.1.1.1.cmml">)</mo></mrow></msubsup><mo id="S3.I1.i3.p1.3.m3.8.8.4.2.4" xref="S3.I1.i3.p1.3.m3.8.8.4.3.cmml">,</mo><msubsup id="S3.I1.i3.p1.3.m3.8.8.4.2.2" xref="S3.I1.i3.p1.3.m3.8.8.4.2.2.cmml"><mi id="S3.I1.i3.p1.3.m3.8.8.4.2.2.2.2" xref="S3.I1.i3.p1.3.m3.8.8.4.2.2.2.2.cmml">R</mi><mi id="S3.I1.i3.p1.3.m3.8.8.4.2.2.2.3" xref="S3.I1.i3.p1.3.m3.8.8.4.2.2.2.3.cmml">i</mi><mrow id="S3.I1.i3.p1.3.m3.4.4.1.1" xref="S3.I1.i3.p1.3.m3.4.4.1.1.1.cmml"><mo id="S3.I1.i3.p1.3.m3.4.4.1.1.2" stretchy="false" xref="S3.I1.i3.p1.3.m3.4.4.1.1.1.cmml">(</mo><mrow id="S3.I1.i3.p1.3.m3.4.4.1.1.1" xref="S3.I1.i3.p1.3.m3.4.4.1.1.1.cmml"><mi id="S3.I1.i3.p1.3.m3.4.4.1.1.1.2" xref="S3.I1.i3.p1.3.m3.4.4.1.1.1.2.cmml">t</mi><mo id="S3.I1.i3.p1.3.m3.4.4.1.1.1.1" xref="S3.I1.i3.p1.3.m3.4.4.1.1.1.1.cmml">−</mo><mn id="S3.I1.i3.p1.3.m3.4.4.1.1.1.3" xref="S3.I1.i3.p1.3.m3.4.4.1.1.1.3.cmml">1</mn></mrow><mo id="S3.I1.i3.p1.3.m3.4.4.1.1.3" stretchy="false" xref="S3.I1.i3.p1.3.m3.4.4.1.1.1.cmml">)</mo></mrow></msubsup><mo id="S3.I1.i3.p1.3.m3.8.8.4.2.5" stretchy="false" xref="S3.I1.i3.p1.3.m3.8.8.4.3.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.I1.i3.p1.3.m3.8b"><apply id="S3.I1.i3.p1.3.m3.8.8.cmml" xref="S3.I1.i3.p1.3.m3.8.8"><ci id="S3.I1.i3.p1.3.m3.8.8.5.cmml" xref="S3.I1.i3.p1.3.m3.8.8.5">←</ci><interval closure="open" id="S3.I1.i3.p1.3.m3.6.6.2.3.cmml" xref="S3.I1.i3.p1.3.m3.6.6.2.2"><apply id="S3.I1.i3.p1.3.m3.5.5.1.1.1.cmml" xref="S3.I1.i3.p1.3.m3.5.5.1.1.1"><csymbol cd="ambiguous" id="S3.I1.i3.p1.3.m3.5.5.1.1.1.1.cmml" xref="S3.I1.i3.p1.3.m3.5.5.1.1.1">superscript</csymbol><apply id="S3.I1.i3.p1.3.m3.5.5.1.1.1.2.cmml" xref="S3.I1.i3.p1.3.m3.5.5.1.1.1"><csymbol cd="ambiguous" id="S3.I1.i3.p1.3.m3.5.5.1.1.1.2.1.cmml" xref="S3.I1.i3.p1.3.m3.5.5.1.1.1">subscript</csymbol><ci id="S3.I1.i3.p1.3.m3.5.5.1.1.1.2.2.cmml" xref="S3.I1.i3.p1.3.m3.5.5.1.1.1.2.2">𝐼</ci><ci id="S3.I1.i3.p1.3.m3.5.5.1.1.1.2.3.cmml" xref="S3.I1.i3.p1.3.m3.5.5.1.1.1.2.3">𝑖</ci></apply><ci id="S3.I1.i3.p1.3.m3.1.1.1.1.cmml" xref="S3.I1.i3.p1.3.m3.1.1.1.1">𝑡</ci></apply><apply id="S3.I1.i3.p1.3.m3.6.6.2.2.2.cmml" xref="S3.I1.i3.p1.3.m3.6.6.2.2.2"><csymbol cd="ambiguous" id="S3.I1.i3.p1.3.m3.6.6.2.2.2.1.cmml" xref="S3.I1.i3.p1.3.m3.6.6.2.2.2">superscript</csymbol><apply id="S3.I1.i3.p1.3.m3.6.6.2.2.2.2.cmml" xref="S3.I1.i3.p1.3.m3.6.6.2.2.2"><csymbol cd="ambiguous" id="S3.I1.i3.p1.3.m3.6.6.2.2.2.2.1.cmml" xref="S3.I1.i3.p1.3.m3.6.6.2.2.2">subscript</csymbol><ci id="S3.I1.i3.p1.3.m3.6.6.2.2.2.2.2.cmml" xref="S3.I1.i3.p1.3.m3.6.6.2.2.2.2.2">𝑅</ci><ci id="S3.I1.i3.p1.3.m3.6.6.2.2.2.2.3.cmml" xref="S3.I1.i3.p1.3.m3.6.6.2.2.2.2.3">𝑖</ci></apply><ci id="S3.I1.i3.p1.3.m3.2.2.1.1.cmml" xref="S3.I1.i3.p1.3.m3.2.2.1.1">𝑡</ci></apply></interval><interval closure="open" id="S3.I1.i3.p1.3.m3.8.8.4.3.cmml" xref="S3.I1.i3.p1.3.m3.8.8.4.2"><apply id="S3.I1.i3.p1.3.m3.7.7.3.1.1.cmml" xref="S3.I1.i3.p1.3.m3.7.7.3.1.1"><csymbol cd="ambiguous" id="S3.I1.i3.p1.3.m3.7.7.3.1.1.1.cmml" xref="S3.I1.i3.p1.3.m3.7.7.3.1.1">superscript</csymbol><apply id="S3.I1.i3.p1.3.m3.7.7.3.1.1.2.cmml" xref="S3.I1.i3.p1.3.m3.7.7.3.1.1"><csymbol cd="ambiguous" id="S3.I1.i3.p1.3.m3.7.7.3.1.1.2.1.cmml" xref="S3.I1.i3.p1.3.m3.7.7.3.1.1">subscript</csymbol><ci id="S3.I1.i3.p1.3.m3.7.7.3.1.1.2.2.cmml" xref="S3.I1.i3.p1.3.m3.7.7.3.1.1.2.2">𝐼</ci><ci id="S3.I1.i3.p1.3.m3.7.7.3.1.1.2.3.cmml" xref="S3.I1.i3.p1.3.m3.7.7.3.1.1.2.3">𝑖</ci></apply><apply id="S3.I1.i3.p1.3.m3.3.3.1.1.1.cmml" xref="S3.I1.i3.p1.3.m3.3.3.1.1"><minus id="S3.I1.i3.p1.3.m3.3.3.1.1.1.1.cmml" xref="S3.I1.i3.p1.3.m3.3.3.1.1.1.1"></minus><ci id="S3.I1.i3.p1.3.m3.3.3.1.1.1.2.cmml" xref="S3.I1.i3.p1.3.m3.3.3.1.1.1.2">𝑡</ci><cn id="S3.I1.i3.p1.3.m3.3.3.1.1.1.3.cmml" type="integer" xref="S3.I1.i3.p1.3.m3.3.3.1.1.1.3">1</cn></apply></apply><apply id="S3.I1.i3.p1.3.m3.8.8.4.2.2.cmml" xref="S3.I1.i3.p1.3.m3.8.8.4.2.2"><csymbol cd="ambiguous" id="S3.I1.i3.p1.3.m3.8.8.4.2.2.1.cmml" xref="S3.I1.i3.p1.3.m3.8.8.4.2.2">superscript</csymbol><apply id="S3.I1.i3.p1.3.m3.8.8.4.2.2.2.cmml" xref="S3.I1.i3.p1.3.m3.8.8.4.2.2"><csymbol cd="ambiguous" id="S3.I1.i3.p1.3.m3.8.8.4.2.2.2.1.cmml" xref="S3.I1.i3.p1.3.m3.8.8.4.2.2">subscript</csymbol><ci id="S3.I1.i3.p1.3.m3.8.8.4.2.2.2.2.cmml" xref="S3.I1.i3.p1.3.m3.8.8.4.2.2.2.2">𝑅</ci><ci id="S3.I1.i3.p1.3.m3.8.8.4.2.2.2.3.cmml" xref="S3.I1.i3.p1.3.m3.8.8.4.2.2.2.3">𝑖</ci></apply><apply id="S3.I1.i3.p1.3.m3.4.4.1.1.1.cmml" xref="S3.I1.i3.p1.3.m3.4.4.1.1"><minus id="S3.I1.i3.p1.3.m3.4.4.1.1.1.1.cmml" xref="S3.I1.i3.p1.3.m3.4.4.1.1.1.1"></minus><ci id="S3.I1.i3.p1.3.m3.4.4.1.1.1.2.cmml" xref="S3.I1.i3.p1.3.m3.4.4.1.1.1.2">𝑡</ci><cn id="S3.I1.i3.p1.3.m3.4.4.1.1.1.3.cmml" type="integer" xref="S3.I1.i3.p1.3.m3.4.4.1.1.1.3">1</cn></apply></apply></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I1.i3.p1.3.m3.8c">(I_{i}^{(t)},R_{i}^{(t)})\leftarrow(I_{i}^{(t-1)},R_{i}^{(t-1)})</annotation><annotation encoding="application/x-llamapun" id="S3.I1.i3.p1.3.m3.8d">( italic_I start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ( italic_t ) end_POSTSUPERSCRIPT , italic_R start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ( italic_t ) end_POSTSUPERSCRIPT ) ← ( italic_I start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ( italic_t - 1 ) end_POSTSUPERSCRIPT , italic_R start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ( italic_t - 1 ) end_POSTSUPERSCRIPT )</annotation></semantics></math></p>
</div>
</li>
<li class="ltx_item" id="S3.I1.i4" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S3.I1.i4.p1">
<p class="ltx_p" id="S3.I1.i4.p1.2"><span class="ltx_text ltx_font_bold" id="S3.I1.i4.p1.2.1">Contrast</span>: If the proposal was accepted, add the triple <math alttext="(I_{i}^{(t)},R_{i}^{(t)},R_{i}^{(t-1)})" class="ltx_Math" display="inline" id="S3.I1.i4.p1.1.m1.6"><semantics id="S3.I1.i4.p1.1.m1.6a"><mrow id="S3.I1.i4.p1.1.m1.6.6.3" xref="S3.I1.i4.p1.1.m1.6.6.4.cmml"><mo id="S3.I1.i4.p1.1.m1.6.6.3.4" stretchy="false" xref="S3.I1.i4.p1.1.m1.6.6.4.cmml">(</mo><msubsup id="S3.I1.i4.p1.1.m1.4.4.1.1" xref="S3.I1.i4.p1.1.m1.4.4.1.1.cmml"><mi id="S3.I1.i4.p1.1.m1.4.4.1.1.2.2" xref="S3.I1.i4.p1.1.m1.4.4.1.1.2.2.cmml">I</mi><mi id="S3.I1.i4.p1.1.m1.4.4.1.1.2.3" xref="S3.I1.i4.p1.1.m1.4.4.1.1.2.3.cmml">i</mi><mrow id="S3.I1.i4.p1.1.m1.1.1.1.3" xref="S3.I1.i4.p1.1.m1.4.4.1.1.cmml"><mo id="S3.I1.i4.p1.1.m1.1.1.1.3.1" stretchy="false" xref="S3.I1.i4.p1.1.m1.4.4.1.1.cmml">(</mo><mi id="S3.I1.i4.p1.1.m1.1.1.1.1" xref="S3.I1.i4.p1.1.m1.1.1.1.1.cmml">t</mi><mo id="S3.I1.i4.p1.1.m1.1.1.1.3.2" stretchy="false" xref="S3.I1.i4.p1.1.m1.4.4.1.1.cmml">)</mo></mrow></msubsup><mo id="S3.I1.i4.p1.1.m1.6.6.3.5" xref="S3.I1.i4.p1.1.m1.6.6.4.cmml">,</mo><msubsup id="S3.I1.i4.p1.1.m1.5.5.2.2" xref="S3.I1.i4.p1.1.m1.5.5.2.2.cmml"><mi id="S3.I1.i4.p1.1.m1.5.5.2.2.2.2" xref="S3.I1.i4.p1.1.m1.5.5.2.2.2.2.cmml">R</mi><mi id="S3.I1.i4.p1.1.m1.5.5.2.2.2.3" xref="S3.I1.i4.p1.1.m1.5.5.2.2.2.3.cmml">i</mi><mrow id="S3.I1.i4.p1.1.m1.2.2.1.3" xref="S3.I1.i4.p1.1.m1.5.5.2.2.cmml"><mo id="S3.I1.i4.p1.1.m1.2.2.1.3.1" stretchy="false" xref="S3.I1.i4.p1.1.m1.5.5.2.2.cmml">(</mo><mi id="S3.I1.i4.p1.1.m1.2.2.1.1" xref="S3.I1.i4.p1.1.m1.2.2.1.1.cmml">t</mi><mo id="S3.I1.i4.p1.1.m1.2.2.1.3.2" stretchy="false" xref="S3.I1.i4.p1.1.m1.5.5.2.2.cmml">)</mo></mrow></msubsup><mo id="S3.I1.i4.p1.1.m1.6.6.3.6" xref="S3.I1.i4.p1.1.m1.6.6.4.cmml">,</mo><msubsup id="S3.I1.i4.p1.1.m1.6.6.3.3" xref="S3.I1.i4.p1.1.m1.6.6.3.3.cmml"><mi id="S3.I1.i4.p1.1.m1.6.6.3.3.2.2" xref="S3.I1.i4.p1.1.m1.6.6.3.3.2.2.cmml">R</mi><mi id="S3.I1.i4.p1.1.m1.6.6.3.3.2.3" xref="S3.I1.i4.p1.1.m1.6.6.3.3.2.3.cmml">i</mi><mrow id="S3.I1.i4.p1.1.m1.3.3.1.1" xref="S3.I1.i4.p1.1.m1.3.3.1.1.1.cmml"><mo id="S3.I1.i4.p1.1.m1.3.3.1.1.2" stretchy="false" xref="S3.I1.i4.p1.1.m1.3.3.1.1.1.cmml">(</mo><mrow id="S3.I1.i4.p1.1.m1.3.3.1.1.1" xref="S3.I1.i4.p1.1.m1.3.3.1.1.1.cmml"><mi id="S3.I1.i4.p1.1.m1.3.3.1.1.1.2" xref="S3.I1.i4.p1.1.m1.3.3.1.1.1.2.cmml">t</mi><mo id="S3.I1.i4.p1.1.m1.3.3.1.1.1.1" xref="S3.I1.i4.p1.1.m1.3.3.1.1.1.1.cmml">−</mo><mn id="S3.I1.i4.p1.1.m1.3.3.1.1.1.3" xref="S3.I1.i4.p1.1.m1.3.3.1.1.1.3.cmml">1</mn></mrow><mo id="S3.I1.i4.p1.1.m1.3.3.1.1.3" stretchy="false" xref="S3.I1.i4.p1.1.m1.3.3.1.1.1.cmml">)</mo></mrow></msubsup><mo id="S3.I1.i4.p1.1.m1.6.6.3.7" stretchy="false" xref="S3.I1.i4.p1.1.m1.6.6.4.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.I1.i4.p1.1.m1.6b"><vector id="S3.I1.i4.p1.1.m1.6.6.4.cmml" xref="S3.I1.i4.p1.1.m1.6.6.3"><apply id="S3.I1.i4.p1.1.m1.4.4.1.1.cmml" xref="S3.I1.i4.p1.1.m1.4.4.1.1"><csymbol cd="ambiguous" id="S3.I1.i4.p1.1.m1.4.4.1.1.1.cmml" xref="S3.I1.i4.p1.1.m1.4.4.1.1">superscript</csymbol><apply id="S3.I1.i4.p1.1.m1.4.4.1.1.2.cmml" xref="S3.I1.i4.p1.1.m1.4.4.1.1"><csymbol cd="ambiguous" id="S3.I1.i4.p1.1.m1.4.4.1.1.2.1.cmml" xref="S3.I1.i4.p1.1.m1.4.4.1.1">subscript</csymbol><ci id="S3.I1.i4.p1.1.m1.4.4.1.1.2.2.cmml" xref="S3.I1.i4.p1.1.m1.4.4.1.1.2.2">𝐼</ci><ci id="S3.I1.i4.p1.1.m1.4.4.1.1.2.3.cmml" xref="S3.I1.i4.p1.1.m1.4.4.1.1.2.3">𝑖</ci></apply><ci id="S3.I1.i4.p1.1.m1.1.1.1.1.cmml" xref="S3.I1.i4.p1.1.m1.1.1.1.1">𝑡</ci></apply><apply id="S3.I1.i4.p1.1.m1.5.5.2.2.cmml" xref="S3.I1.i4.p1.1.m1.5.5.2.2"><csymbol cd="ambiguous" id="S3.I1.i4.p1.1.m1.5.5.2.2.1.cmml" xref="S3.I1.i4.p1.1.m1.5.5.2.2">superscript</csymbol><apply id="S3.I1.i4.p1.1.m1.5.5.2.2.2.cmml" xref="S3.I1.i4.p1.1.m1.5.5.2.2"><csymbol cd="ambiguous" id="S3.I1.i4.p1.1.m1.5.5.2.2.2.1.cmml" xref="S3.I1.i4.p1.1.m1.5.5.2.2">subscript</csymbol><ci id="S3.I1.i4.p1.1.m1.5.5.2.2.2.2.cmml" xref="S3.I1.i4.p1.1.m1.5.5.2.2.2.2">𝑅</ci><ci id="S3.I1.i4.p1.1.m1.5.5.2.2.2.3.cmml" xref="S3.I1.i4.p1.1.m1.5.5.2.2.2.3">𝑖</ci></apply><ci id="S3.I1.i4.p1.1.m1.2.2.1.1.cmml" xref="S3.I1.i4.p1.1.m1.2.2.1.1">𝑡</ci></apply><apply id="S3.I1.i4.p1.1.m1.6.6.3.3.cmml" xref="S3.I1.i4.p1.1.m1.6.6.3.3"><csymbol cd="ambiguous" id="S3.I1.i4.p1.1.m1.6.6.3.3.1.cmml" xref="S3.I1.i4.p1.1.m1.6.6.3.3">superscript</csymbol><apply id="S3.I1.i4.p1.1.m1.6.6.3.3.2.cmml" xref="S3.I1.i4.p1.1.m1.6.6.3.3"><csymbol cd="ambiguous" id="S3.I1.i4.p1.1.m1.6.6.3.3.2.1.cmml" xref="S3.I1.i4.p1.1.m1.6.6.3.3">subscript</csymbol><ci id="S3.I1.i4.p1.1.m1.6.6.3.3.2.2.cmml" xref="S3.I1.i4.p1.1.m1.6.6.3.3.2.2">𝑅</ci><ci id="S3.I1.i4.p1.1.m1.6.6.3.3.2.3.cmml" xref="S3.I1.i4.p1.1.m1.6.6.3.3.2.3">𝑖</ci></apply><apply id="S3.I1.i4.p1.1.m1.3.3.1.1.1.cmml" xref="S3.I1.i4.p1.1.m1.3.3.1.1"><minus id="S3.I1.i4.p1.1.m1.3.3.1.1.1.1.cmml" xref="S3.I1.i4.p1.1.m1.3.3.1.1.1.1"></minus><ci id="S3.I1.i4.p1.1.m1.3.3.1.1.1.2.cmml" xref="S3.I1.i4.p1.1.m1.3.3.1.1.1.2">𝑡</ci><cn id="S3.I1.i4.p1.1.m1.3.3.1.1.1.3.cmml" type="integer" xref="S3.I1.i4.p1.1.m1.3.3.1.1.1.3">1</cn></apply></apply></vector></annotation-xml><annotation encoding="application/x-tex" id="S3.I1.i4.p1.1.m1.6c">(I_{i}^{(t)},R_{i}^{(t)},R_{i}^{(t-1)})</annotation><annotation encoding="application/x-llamapun" id="S3.I1.i4.p1.1.m1.6d">( italic_I start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ( italic_t ) end_POSTSUPERSCRIPT , italic_R start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ( italic_t ) end_POSTSUPERSCRIPT , italic_R start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ( italic_t - 1 ) end_POSTSUPERSCRIPT )</annotation></semantics></math> into <math alttext="\mathcal{D}" class="ltx_Math" display="inline" id="S3.I1.i4.p1.2.m2.1"><semantics id="S3.I1.i4.p1.2.m2.1a"><mi class="ltx_font_mathcaligraphic" id="S3.I1.i4.p1.2.m2.1.1" xref="S3.I1.i4.p1.2.m2.1.1.cmml">𝒟</mi><annotation-xml encoding="MathML-Content" id="S3.I1.i4.p1.2.m2.1b"><ci id="S3.I1.i4.p1.2.m2.1.1.cmml" xref="S3.I1.i4.p1.2.m2.1.1">𝒟</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.I1.i4.p1.2.m2.1c">\mathcal{D}</annotation><annotation encoding="application/x-llamapun" id="S3.I1.i4.p1.2.m2.1d">caligraphic_D</annotation></semantics></math>.</p>
</div>
</li>
</ul>
</div>
<div class="ltx_para" id="S3.SS0.SSS0.Px1.p3">
<p class="ltx_p" id="S3.SS0.SSS0.Px1.p3.8">The key intuition is that as the original response <math alttext="R_{i}^{(t-1)}" class="ltx_Math" display="inline" id="S3.SS0.SSS0.Px1.p3.1.m1.1"><semantics id="S3.SS0.SSS0.Px1.p3.1.m1.1a"><msubsup id="S3.SS0.SSS0.Px1.p3.1.m1.1.2" xref="S3.SS0.SSS0.Px1.p3.1.m1.1.2.cmml"><mi id="S3.SS0.SSS0.Px1.p3.1.m1.1.2.2.2" xref="S3.SS0.SSS0.Px1.p3.1.m1.1.2.2.2.cmml">R</mi><mi id="S3.SS0.SSS0.Px1.p3.1.m1.1.2.2.3" xref="S3.SS0.SSS0.Px1.p3.1.m1.1.2.2.3.cmml">i</mi><mrow id="S3.SS0.SSS0.Px1.p3.1.m1.1.1.1.1" xref="S3.SS0.SSS0.Px1.p3.1.m1.1.1.1.1.1.cmml"><mo id="S3.SS0.SSS0.Px1.p3.1.m1.1.1.1.1.2" stretchy="false" xref="S3.SS0.SSS0.Px1.p3.1.m1.1.1.1.1.1.cmml">(</mo><mrow id="S3.SS0.SSS0.Px1.p3.1.m1.1.1.1.1.1" xref="S3.SS0.SSS0.Px1.p3.1.m1.1.1.1.1.1.cmml"><mi id="S3.SS0.SSS0.Px1.p3.1.m1.1.1.1.1.1.2" xref="S3.SS0.SSS0.Px1.p3.1.m1.1.1.1.1.1.2.cmml">t</mi><mo id="S3.SS0.SSS0.Px1.p3.1.m1.1.1.1.1.1.1" xref="S3.SS0.SSS0.Px1.p3.1.m1.1.1.1.1.1.1.cmml">−</mo><mn id="S3.SS0.SSS0.Px1.p3.1.m1.1.1.1.1.1.3" xref="S3.SS0.SSS0.Px1.p3.1.m1.1.1.1.1.1.3.cmml">1</mn></mrow><mo id="S3.SS0.SSS0.Px1.p3.1.m1.1.1.1.1.3" stretchy="false" xref="S3.SS0.SSS0.Px1.p3.1.m1.1.1.1.1.1.cmml">)</mo></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS0.Px1.p3.1.m1.1b"><apply id="S3.SS0.SSS0.Px1.p3.1.m1.1.2.cmml" xref="S3.SS0.SSS0.Px1.p3.1.m1.1.2"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px1.p3.1.m1.1.2.1.cmml" xref="S3.SS0.SSS0.Px1.p3.1.m1.1.2">superscript</csymbol><apply id="S3.SS0.SSS0.Px1.p3.1.m1.1.2.2.cmml" xref="S3.SS0.SSS0.Px1.p3.1.m1.1.2"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px1.p3.1.m1.1.2.2.1.cmml" xref="S3.SS0.SSS0.Px1.p3.1.m1.1.2">subscript</csymbol><ci id="S3.SS0.SSS0.Px1.p3.1.m1.1.2.2.2.cmml" xref="S3.SS0.SSS0.Px1.p3.1.m1.1.2.2.2">𝑅</ci><ci id="S3.SS0.SSS0.Px1.p3.1.m1.1.2.2.3.cmml" xref="S3.SS0.SSS0.Px1.p3.1.m1.1.2.2.3">𝑖</ci></apply><apply id="S3.SS0.SSS0.Px1.p3.1.m1.1.1.1.1.1.cmml" xref="S3.SS0.SSS0.Px1.p3.1.m1.1.1.1.1"><minus id="S3.SS0.SSS0.Px1.p3.1.m1.1.1.1.1.1.1.cmml" xref="S3.SS0.SSS0.Px1.p3.1.m1.1.1.1.1.1.1"></minus><ci id="S3.SS0.SSS0.Px1.p3.1.m1.1.1.1.1.1.2.cmml" xref="S3.SS0.SSS0.Px1.p3.1.m1.1.1.1.1.1.2">𝑡</ci><cn id="S3.SS0.SSS0.Px1.p3.1.m1.1.1.1.1.1.3.cmml" type="integer" xref="S3.SS0.SSS0.Px1.p3.1.m1.1.1.1.1.1.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS0.Px1.p3.1.m1.1c">R_{i}^{(t-1)}</annotation><annotation encoding="application/x-llamapun" id="S3.SS0.SSS0.Px1.p3.1.m1.1d">italic_R start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ( italic_t - 1 ) end_POSTSUPERSCRIPT</annotation></semantics></math> was generated without seeing all of the requirements from the evolved instruction, the evolved response <math alttext="R_{i}^{(t)}" class="ltx_Math" display="inline" id="S3.SS0.SSS0.Px1.p3.2.m2.1"><semantics id="S3.SS0.SSS0.Px1.p3.2.m2.1a"><msubsup id="S3.SS0.SSS0.Px1.p3.2.m2.1.2" xref="S3.SS0.SSS0.Px1.p3.2.m2.1.2.cmml"><mi id="S3.SS0.SSS0.Px1.p3.2.m2.1.2.2.2" xref="S3.SS0.SSS0.Px1.p3.2.m2.1.2.2.2.cmml">R</mi><mi id="S3.SS0.SSS0.Px1.p3.2.m2.1.2.2.3" xref="S3.SS0.SSS0.Px1.p3.2.m2.1.2.2.3.cmml">i</mi><mrow id="S3.SS0.SSS0.Px1.p3.2.m2.1.1.1.3" xref="S3.SS0.SSS0.Px1.p3.2.m2.1.2.cmml"><mo id="S3.SS0.SSS0.Px1.p3.2.m2.1.1.1.3.1" stretchy="false" xref="S3.SS0.SSS0.Px1.p3.2.m2.1.2.cmml">(</mo><mi id="S3.SS0.SSS0.Px1.p3.2.m2.1.1.1.1" xref="S3.SS0.SSS0.Px1.p3.2.m2.1.1.1.1.cmml">t</mi><mo id="S3.SS0.SSS0.Px1.p3.2.m2.1.1.1.3.2" stretchy="false" xref="S3.SS0.SSS0.Px1.p3.2.m2.1.2.cmml">)</mo></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS0.Px1.p3.2.m2.1b"><apply id="S3.SS0.SSS0.Px1.p3.2.m2.1.2.cmml" xref="S3.SS0.SSS0.Px1.p3.2.m2.1.2"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px1.p3.2.m2.1.2.1.cmml" xref="S3.SS0.SSS0.Px1.p3.2.m2.1.2">superscript</csymbol><apply id="S3.SS0.SSS0.Px1.p3.2.m2.1.2.2.cmml" xref="S3.SS0.SSS0.Px1.p3.2.m2.1.2"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px1.p3.2.m2.1.2.2.1.cmml" xref="S3.SS0.SSS0.Px1.p3.2.m2.1.2">subscript</csymbol><ci id="S3.SS0.SSS0.Px1.p3.2.m2.1.2.2.2.cmml" xref="S3.SS0.SSS0.Px1.p3.2.m2.1.2.2.2">𝑅</ci><ci id="S3.SS0.SSS0.Px1.p3.2.m2.1.2.2.3.cmml" xref="S3.SS0.SSS0.Px1.p3.2.m2.1.2.2.3">𝑖</ci></apply><ci id="S3.SS0.SSS0.Px1.p3.2.m2.1.1.1.1.cmml" xref="S3.SS0.SSS0.Px1.p3.2.m2.1.1.1.1">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS0.Px1.p3.2.m2.1c">R_{i}^{(t)}</annotation><annotation encoding="application/x-llamapun" id="S3.SS0.SSS0.Px1.p3.2.m2.1d">italic_R start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ( italic_t ) end_POSTSUPERSCRIPT</annotation></semantics></math> is likely better than the original response <math alttext="R_{i}^{(t-1)}" class="ltx_Math" display="inline" id="S3.SS0.SSS0.Px1.p3.3.m3.1"><semantics id="S3.SS0.SSS0.Px1.p3.3.m3.1a"><msubsup id="S3.SS0.SSS0.Px1.p3.3.m3.1.2" xref="S3.SS0.SSS0.Px1.p3.3.m3.1.2.cmml"><mi id="S3.SS0.SSS0.Px1.p3.3.m3.1.2.2.2" xref="S3.SS0.SSS0.Px1.p3.3.m3.1.2.2.2.cmml">R</mi><mi id="S3.SS0.SSS0.Px1.p3.3.m3.1.2.2.3" xref="S3.SS0.SSS0.Px1.p3.3.m3.1.2.2.3.cmml">i</mi><mrow id="S3.SS0.SSS0.Px1.p3.3.m3.1.1.1.1" xref="S3.SS0.SSS0.Px1.p3.3.m3.1.1.1.1.1.cmml"><mo id="S3.SS0.SSS0.Px1.p3.3.m3.1.1.1.1.2" stretchy="false" xref="S3.SS0.SSS0.Px1.p3.3.m3.1.1.1.1.1.cmml">(</mo><mrow id="S3.SS0.SSS0.Px1.p3.3.m3.1.1.1.1.1" xref="S3.SS0.SSS0.Px1.p3.3.m3.1.1.1.1.1.cmml"><mi id="S3.SS0.SSS0.Px1.p3.3.m3.1.1.1.1.1.2" xref="S3.SS0.SSS0.Px1.p3.3.m3.1.1.1.1.1.2.cmml">t</mi><mo id="S3.SS0.SSS0.Px1.p3.3.m3.1.1.1.1.1.1" xref="S3.SS0.SSS0.Px1.p3.3.m3.1.1.1.1.1.1.cmml">−</mo><mn id="S3.SS0.SSS0.Px1.p3.3.m3.1.1.1.1.1.3" xref="S3.SS0.SSS0.Px1.p3.3.m3.1.1.1.1.1.3.cmml">1</mn></mrow><mo id="S3.SS0.SSS0.Px1.p3.3.m3.1.1.1.1.3" stretchy="false" xref="S3.SS0.SSS0.Px1.p3.3.m3.1.1.1.1.1.cmml">)</mo></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS0.Px1.p3.3.m3.1b"><apply id="S3.SS0.SSS0.Px1.p3.3.m3.1.2.cmml" xref="S3.SS0.SSS0.Px1.p3.3.m3.1.2"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px1.p3.3.m3.1.2.1.cmml" xref="S3.SS0.SSS0.Px1.p3.3.m3.1.2">superscript</csymbol><apply id="S3.SS0.SSS0.Px1.p3.3.m3.1.2.2.cmml" xref="S3.SS0.SSS0.Px1.p3.3.m3.1.2"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px1.p3.3.m3.1.2.2.1.cmml" xref="S3.SS0.SSS0.Px1.p3.3.m3.1.2">subscript</csymbol><ci id="S3.SS0.SSS0.Px1.p3.3.m3.1.2.2.2.cmml" xref="S3.SS0.SSS0.Px1.p3.3.m3.1.2.2.2">𝑅</ci><ci id="S3.SS0.SSS0.Px1.p3.3.m3.1.2.2.3.cmml" xref="S3.SS0.SSS0.Px1.p3.3.m3.1.2.2.3">𝑖</ci></apply><apply id="S3.SS0.SSS0.Px1.p3.3.m3.1.1.1.1.1.cmml" xref="S3.SS0.SSS0.Px1.p3.3.m3.1.1.1.1"><minus id="S3.SS0.SSS0.Px1.p3.3.m3.1.1.1.1.1.1.cmml" xref="S3.SS0.SSS0.Px1.p3.3.m3.1.1.1.1.1.1"></minus><ci id="S3.SS0.SSS0.Px1.p3.3.m3.1.1.1.1.1.2.cmml" xref="S3.SS0.SSS0.Px1.p3.3.m3.1.1.1.1.1.2">𝑡</ci><cn id="S3.SS0.SSS0.Px1.p3.3.m3.1.1.1.1.1.3.cmml" type="integer" xref="S3.SS0.SSS0.Px1.p3.3.m3.1.1.1.1.1.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS0.Px1.p3.3.m3.1c">R_{i}^{(t-1)}</annotation><annotation encoding="application/x-llamapun" id="S3.SS0.SSS0.Px1.p3.3.m3.1d">italic_R start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ( italic_t - 1 ) end_POSTSUPERSCRIPT</annotation></semantics></math> for the evolved instruction <math alttext="I_{i}^{(t)}" class="ltx_Math" display="inline" id="S3.SS0.SSS0.Px1.p3.4.m4.1"><semantics id="S3.SS0.SSS0.Px1.p3.4.m4.1a"><msubsup id="S3.SS0.SSS0.Px1.p3.4.m4.1.2" xref="S3.SS0.SSS0.Px1.p3.4.m4.1.2.cmml"><mi id="S3.SS0.SSS0.Px1.p3.4.m4.1.2.2.2" xref="S3.SS0.SSS0.Px1.p3.4.m4.1.2.2.2.cmml">I</mi><mi id="S3.SS0.SSS0.Px1.p3.4.m4.1.2.2.3" xref="S3.SS0.SSS0.Px1.p3.4.m4.1.2.2.3.cmml">i</mi><mrow id="S3.SS0.SSS0.Px1.p3.4.m4.1.1.1.3" xref="S3.SS0.SSS0.Px1.p3.4.m4.1.2.cmml"><mo id="S3.SS0.SSS0.Px1.p3.4.m4.1.1.1.3.1" stretchy="false" xref="S3.SS0.SSS0.Px1.p3.4.m4.1.2.cmml">(</mo><mi id="S3.SS0.SSS0.Px1.p3.4.m4.1.1.1.1" xref="S3.SS0.SSS0.Px1.p3.4.m4.1.1.1.1.cmml">t</mi><mo id="S3.SS0.SSS0.Px1.p3.4.m4.1.1.1.3.2" stretchy="false" xref="S3.SS0.SSS0.Px1.p3.4.m4.1.2.cmml">)</mo></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS0.Px1.p3.4.m4.1b"><apply id="S3.SS0.SSS0.Px1.p3.4.m4.1.2.cmml" xref="S3.SS0.SSS0.Px1.p3.4.m4.1.2"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px1.p3.4.m4.1.2.1.cmml" xref="S3.SS0.SSS0.Px1.p3.4.m4.1.2">superscript</csymbol><apply id="S3.SS0.SSS0.Px1.p3.4.m4.1.2.2.cmml" xref="S3.SS0.SSS0.Px1.p3.4.m4.1.2"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px1.p3.4.m4.1.2.2.1.cmml" xref="S3.SS0.SSS0.Px1.p3.4.m4.1.2">subscript</csymbol><ci id="S3.SS0.SSS0.Px1.p3.4.m4.1.2.2.2.cmml" xref="S3.SS0.SSS0.Px1.p3.4.m4.1.2.2.2">𝐼</ci><ci id="S3.SS0.SSS0.Px1.p3.4.m4.1.2.2.3.cmml" xref="S3.SS0.SSS0.Px1.p3.4.m4.1.2.2.3">𝑖</ci></apply><ci id="S3.SS0.SSS0.Px1.p3.4.m4.1.1.1.1.cmml" xref="S3.SS0.SSS0.Px1.p3.4.m4.1.1.1.1">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS0.Px1.p3.4.m4.1c">I_{i}^{(t)}</annotation><annotation encoding="application/x-llamapun" id="S3.SS0.SSS0.Px1.p3.4.m4.1d">italic_I start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ( italic_t ) end_POSTSUPERSCRIPT</annotation></semantics></math>.
On the other hand, <math alttext="R_{i}^{(t-1)}" class="ltx_Math" display="inline" id="S3.SS0.SSS0.Px1.p3.5.m5.1"><semantics id="S3.SS0.SSS0.Px1.p3.5.m5.1a"><msubsup id="S3.SS0.SSS0.Px1.p3.5.m5.1.2" xref="S3.SS0.SSS0.Px1.p3.5.m5.1.2.cmml"><mi id="S3.SS0.SSS0.Px1.p3.5.m5.1.2.2.2" xref="S3.SS0.SSS0.Px1.p3.5.m5.1.2.2.2.cmml">R</mi><mi id="S3.SS0.SSS0.Px1.p3.5.m5.1.2.2.3" xref="S3.SS0.SSS0.Px1.p3.5.m5.1.2.2.3.cmml">i</mi><mrow id="S3.SS0.SSS0.Px1.p3.5.m5.1.1.1.1" xref="S3.SS0.SSS0.Px1.p3.5.m5.1.1.1.1.1.cmml"><mo id="S3.SS0.SSS0.Px1.p3.5.m5.1.1.1.1.2" stretchy="false" xref="S3.SS0.SSS0.Px1.p3.5.m5.1.1.1.1.1.cmml">(</mo><mrow id="S3.SS0.SSS0.Px1.p3.5.m5.1.1.1.1.1" xref="S3.SS0.SSS0.Px1.p3.5.m5.1.1.1.1.1.cmml"><mi id="S3.SS0.SSS0.Px1.p3.5.m5.1.1.1.1.1.2" xref="S3.SS0.SSS0.Px1.p3.5.m5.1.1.1.1.1.2.cmml">t</mi><mo id="S3.SS0.SSS0.Px1.p3.5.m5.1.1.1.1.1.1" xref="S3.SS0.SSS0.Px1.p3.5.m5.1.1.1.1.1.1.cmml">−</mo><mn id="S3.SS0.SSS0.Px1.p3.5.m5.1.1.1.1.1.3" xref="S3.SS0.SSS0.Px1.p3.5.m5.1.1.1.1.1.3.cmml">1</mn></mrow><mo id="S3.SS0.SSS0.Px1.p3.5.m5.1.1.1.1.3" stretchy="false" xref="S3.SS0.SSS0.Px1.p3.5.m5.1.1.1.1.1.cmml">)</mo></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS0.Px1.p3.5.m5.1b"><apply id="S3.SS0.SSS0.Px1.p3.5.m5.1.2.cmml" xref="S3.SS0.SSS0.Px1.p3.5.m5.1.2"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px1.p3.5.m5.1.2.1.cmml" xref="S3.SS0.SSS0.Px1.p3.5.m5.1.2">superscript</csymbol><apply id="S3.SS0.SSS0.Px1.p3.5.m5.1.2.2.cmml" xref="S3.SS0.SSS0.Px1.p3.5.m5.1.2"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px1.p3.5.m5.1.2.2.1.cmml" xref="S3.SS0.SSS0.Px1.p3.5.m5.1.2">subscript</csymbol><ci id="S3.SS0.SSS0.Px1.p3.5.m5.1.2.2.2.cmml" xref="S3.SS0.SSS0.Px1.p3.5.m5.1.2.2.2">𝑅</ci><ci id="S3.SS0.SSS0.Px1.p3.5.m5.1.2.2.3.cmml" xref="S3.SS0.SSS0.Px1.p3.5.m5.1.2.2.3">𝑖</ci></apply><apply id="S3.SS0.SSS0.Px1.p3.5.m5.1.1.1.1.1.cmml" xref="S3.SS0.SSS0.Px1.p3.5.m5.1.1.1.1"><minus id="S3.SS0.SSS0.Px1.p3.5.m5.1.1.1.1.1.1.cmml" xref="S3.SS0.SSS0.Px1.p3.5.m5.1.1.1.1.1.1"></minus><ci id="S3.SS0.SSS0.Px1.p3.5.m5.1.1.1.1.1.2.cmml" xref="S3.SS0.SSS0.Px1.p3.5.m5.1.1.1.1.1.2">𝑡</ci><cn id="S3.SS0.SSS0.Px1.p3.5.m5.1.1.1.1.1.3.cmml" type="integer" xref="S3.SS0.SSS0.Px1.p3.5.m5.1.1.1.1.1.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS0.Px1.p3.5.m5.1c">R_{i}^{(t-1)}</annotation><annotation encoding="application/x-llamapun" id="S3.SS0.SSS0.Px1.p3.5.m5.1d">italic_R start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ( italic_t - 1 ) end_POSTSUPERSCRIPT</annotation></semantics></math> is still a <em class="ltx_emph ltx_font_italic" id="S3.SS0.SSS0.Px1.p3.8.1">hard</em> negative, as it was a desirable
response for <math alttext="I_{i}^{(t-1)}" class="ltx_Math" display="inline" id="S3.SS0.SSS0.Px1.p3.6.m6.1"><semantics id="S3.SS0.SSS0.Px1.p3.6.m6.1a"><msubsup id="S3.SS0.SSS0.Px1.p3.6.m6.1.2" xref="S3.SS0.SSS0.Px1.p3.6.m6.1.2.cmml"><mi id="S3.SS0.SSS0.Px1.p3.6.m6.1.2.2.2" xref="S3.SS0.SSS0.Px1.p3.6.m6.1.2.2.2.cmml">I</mi><mi id="S3.SS0.SSS0.Px1.p3.6.m6.1.2.2.3" xref="S3.SS0.SSS0.Px1.p3.6.m6.1.2.2.3.cmml">i</mi><mrow id="S3.SS0.SSS0.Px1.p3.6.m6.1.1.1.1" xref="S3.SS0.SSS0.Px1.p3.6.m6.1.1.1.1.1.cmml"><mo id="S3.SS0.SSS0.Px1.p3.6.m6.1.1.1.1.2" stretchy="false" xref="S3.SS0.SSS0.Px1.p3.6.m6.1.1.1.1.1.cmml">(</mo><mrow id="S3.SS0.SSS0.Px1.p3.6.m6.1.1.1.1.1" xref="S3.SS0.SSS0.Px1.p3.6.m6.1.1.1.1.1.cmml"><mi id="S3.SS0.SSS0.Px1.p3.6.m6.1.1.1.1.1.2" xref="S3.SS0.SSS0.Px1.p3.6.m6.1.1.1.1.1.2.cmml">t</mi><mo id="S3.SS0.SSS0.Px1.p3.6.m6.1.1.1.1.1.1" xref="S3.SS0.SSS0.Px1.p3.6.m6.1.1.1.1.1.1.cmml">−</mo><mn id="S3.SS0.SSS0.Px1.p3.6.m6.1.1.1.1.1.3" xref="S3.SS0.SSS0.Px1.p3.6.m6.1.1.1.1.1.3.cmml">1</mn></mrow><mo id="S3.SS0.SSS0.Px1.p3.6.m6.1.1.1.1.3" stretchy="false" xref="S3.SS0.SSS0.Px1.p3.6.m6.1.1.1.1.1.cmml">)</mo></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS0.Px1.p3.6.m6.1b"><apply id="S3.SS0.SSS0.Px1.p3.6.m6.1.2.cmml" xref="S3.SS0.SSS0.Px1.p3.6.m6.1.2"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px1.p3.6.m6.1.2.1.cmml" xref="S3.SS0.SSS0.Px1.p3.6.m6.1.2">superscript</csymbol><apply id="S3.SS0.SSS0.Px1.p3.6.m6.1.2.2.cmml" xref="S3.SS0.SSS0.Px1.p3.6.m6.1.2"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px1.p3.6.m6.1.2.2.1.cmml" xref="S3.SS0.SSS0.Px1.p3.6.m6.1.2">subscript</csymbol><ci id="S3.SS0.SSS0.Px1.p3.6.m6.1.2.2.2.cmml" xref="S3.SS0.SSS0.Px1.p3.6.m6.1.2.2.2">𝐼</ci><ci id="S3.SS0.SSS0.Px1.p3.6.m6.1.2.2.3.cmml" xref="S3.SS0.SSS0.Px1.p3.6.m6.1.2.2.3">𝑖</ci></apply><apply id="S3.SS0.SSS0.Px1.p3.6.m6.1.1.1.1.1.cmml" xref="S3.SS0.SSS0.Px1.p3.6.m6.1.1.1.1"><minus id="S3.SS0.SSS0.Px1.p3.6.m6.1.1.1.1.1.1.cmml" xref="S3.SS0.SSS0.Px1.p3.6.m6.1.1.1.1.1.1"></minus><ci id="S3.SS0.SSS0.Px1.p3.6.m6.1.1.1.1.1.2.cmml" xref="S3.SS0.SSS0.Px1.p3.6.m6.1.1.1.1.1.2">𝑡</ci><cn id="S3.SS0.SSS0.Px1.p3.6.m6.1.1.1.1.1.3.cmml" type="integer" xref="S3.SS0.SSS0.Px1.p3.6.m6.1.1.1.1.1.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS0.Px1.p3.6.m6.1c">I_{i}^{(t-1)}</annotation><annotation encoding="application/x-llamapun" id="S3.SS0.SSS0.Px1.p3.6.m6.1d">italic_I start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ( italic_t - 1 ) end_POSTSUPERSCRIPT</annotation></semantics></math>, and the difference between <math alttext="I_{i}^{(t-1)}" class="ltx_Math" display="inline" id="S3.SS0.SSS0.Px1.p3.7.m7.1"><semantics id="S3.SS0.SSS0.Px1.p3.7.m7.1a"><msubsup id="S3.SS0.SSS0.Px1.p3.7.m7.1.2" xref="S3.SS0.SSS0.Px1.p3.7.m7.1.2.cmml"><mi id="S3.SS0.SSS0.Px1.p3.7.m7.1.2.2.2" xref="S3.SS0.SSS0.Px1.p3.7.m7.1.2.2.2.cmml">I</mi><mi id="S3.SS0.SSS0.Px1.p3.7.m7.1.2.2.3" xref="S3.SS0.SSS0.Px1.p3.7.m7.1.2.2.3.cmml">i</mi><mrow id="S3.SS0.SSS0.Px1.p3.7.m7.1.1.1.1" xref="S3.SS0.SSS0.Px1.p3.7.m7.1.1.1.1.1.cmml"><mo id="S3.SS0.SSS0.Px1.p3.7.m7.1.1.1.1.2" stretchy="false" xref="S3.SS0.SSS0.Px1.p3.7.m7.1.1.1.1.1.cmml">(</mo><mrow id="S3.SS0.SSS0.Px1.p3.7.m7.1.1.1.1.1" xref="S3.SS0.SSS0.Px1.p3.7.m7.1.1.1.1.1.cmml"><mi id="S3.SS0.SSS0.Px1.p3.7.m7.1.1.1.1.1.2" xref="S3.SS0.SSS0.Px1.p3.7.m7.1.1.1.1.1.2.cmml">t</mi><mo id="S3.SS0.SSS0.Px1.p3.7.m7.1.1.1.1.1.1" xref="S3.SS0.SSS0.Px1.p3.7.m7.1.1.1.1.1.1.cmml">−</mo><mn id="S3.SS0.SSS0.Px1.p3.7.m7.1.1.1.1.1.3" xref="S3.SS0.SSS0.Px1.p3.7.m7.1.1.1.1.1.3.cmml">1</mn></mrow><mo id="S3.SS0.SSS0.Px1.p3.7.m7.1.1.1.1.3" stretchy="false" xref="S3.SS0.SSS0.Px1.p3.7.m7.1.1.1.1.1.cmml">)</mo></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS0.Px1.p3.7.m7.1b"><apply id="S3.SS0.SSS0.Px1.p3.7.m7.1.2.cmml" xref="S3.SS0.SSS0.Px1.p3.7.m7.1.2"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px1.p3.7.m7.1.2.1.cmml" xref="S3.SS0.SSS0.Px1.p3.7.m7.1.2">superscript</csymbol><apply id="S3.SS0.SSS0.Px1.p3.7.m7.1.2.2.cmml" xref="S3.SS0.SSS0.Px1.p3.7.m7.1.2"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px1.p3.7.m7.1.2.2.1.cmml" xref="S3.SS0.SSS0.Px1.p3.7.m7.1.2">subscript</csymbol><ci id="S3.SS0.SSS0.Px1.p3.7.m7.1.2.2.2.cmml" xref="S3.SS0.SSS0.Px1.p3.7.m7.1.2.2.2">𝐼</ci><ci id="S3.SS0.SSS0.Px1.p3.7.m7.1.2.2.3.cmml" xref="S3.SS0.SSS0.Px1.p3.7.m7.1.2.2.3">𝑖</ci></apply><apply id="S3.SS0.SSS0.Px1.p3.7.m7.1.1.1.1.1.cmml" xref="S3.SS0.SSS0.Px1.p3.7.m7.1.1.1.1"><minus id="S3.SS0.SSS0.Px1.p3.7.m7.1.1.1.1.1.1.cmml" xref="S3.SS0.SSS0.Px1.p3.7.m7.1.1.1.1.1.1"></minus><ci id="S3.SS0.SSS0.Px1.p3.7.m7.1.1.1.1.1.2.cmml" xref="S3.SS0.SSS0.Px1.p3.7.m7.1.1.1.1.1.2">𝑡</ci><cn id="S3.SS0.SSS0.Px1.p3.7.m7.1.1.1.1.1.3.cmml" type="integer" xref="S3.SS0.SSS0.Px1.p3.7.m7.1.1.1.1.1.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS0.Px1.p3.7.m7.1c">I_{i}^{(t-1)}</annotation><annotation encoding="application/x-llamapun" id="S3.SS0.SSS0.Px1.p3.7.m7.1d">italic_I start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ( italic_t - 1 ) end_POSTSUPERSCRIPT</annotation></semantics></math> and <math alttext="I_{i}^{(t)}" class="ltx_Math" display="inline" id="S3.SS0.SSS0.Px1.p3.8.m8.1"><semantics id="S3.SS0.SSS0.Px1.p3.8.m8.1a"><msubsup id="S3.SS0.SSS0.Px1.p3.8.m8.1.2" xref="S3.SS0.SSS0.Px1.p3.8.m8.1.2.cmml"><mi id="S3.SS0.SSS0.Px1.p3.8.m8.1.2.2.2" xref="S3.SS0.SSS0.Px1.p3.8.m8.1.2.2.2.cmml">I</mi><mi id="S3.SS0.SSS0.Px1.p3.8.m8.1.2.2.3" xref="S3.SS0.SSS0.Px1.p3.8.m8.1.2.2.3.cmml">i</mi><mrow id="S3.SS0.SSS0.Px1.p3.8.m8.1.1.1.3" xref="S3.SS0.SSS0.Px1.p3.8.m8.1.2.cmml"><mo id="S3.SS0.SSS0.Px1.p3.8.m8.1.1.1.3.1" stretchy="false" xref="S3.SS0.SSS0.Px1.p3.8.m8.1.2.cmml">(</mo><mi id="S3.SS0.SSS0.Px1.p3.8.m8.1.1.1.1" xref="S3.SS0.SSS0.Px1.p3.8.m8.1.1.1.1.cmml">t</mi><mo id="S3.SS0.SSS0.Px1.p3.8.m8.1.1.1.3.2" stretchy="false" xref="S3.SS0.SSS0.Px1.p3.8.m8.1.2.cmml">)</mo></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS0.Px1.p3.8.m8.1b"><apply id="S3.SS0.SSS0.Px1.p3.8.m8.1.2.cmml" xref="S3.SS0.SSS0.Px1.p3.8.m8.1.2"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px1.p3.8.m8.1.2.1.cmml" xref="S3.SS0.SSS0.Px1.p3.8.m8.1.2">superscript</csymbol><apply id="S3.SS0.SSS0.Px1.p3.8.m8.1.2.2.cmml" xref="S3.SS0.SSS0.Px1.p3.8.m8.1.2"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px1.p3.8.m8.1.2.2.1.cmml" xref="S3.SS0.SSS0.Px1.p3.8.m8.1.2">subscript</csymbol><ci id="S3.SS0.SSS0.Px1.p3.8.m8.1.2.2.2.cmml" xref="S3.SS0.SSS0.Px1.p3.8.m8.1.2.2.2">𝐼</ci><ci id="S3.SS0.SSS0.Px1.p3.8.m8.1.2.2.3.cmml" xref="S3.SS0.SSS0.Px1.p3.8.m8.1.2.2.3">𝑖</ci></apply><ci id="S3.SS0.SSS0.Px1.p3.8.m8.1.1.1.1.cmml" xref="S3.SS0.SSS0.Px1.p3.8.m8.1.1.1.1">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS0.Px1.p3.8.m8.1c">I_{i}^{(t)}</annotation><annotation encoding="application/x-llamapun" id="S3.SS0.SSS0.Px1.p3.8.m8.1d">italic_I start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ( italic_t ) end_POSTSUPERSCRIPT</annotation></semantics></math>
is often subtle due to the design of evolution operations.</p>
</div>
<div class="ltx_para" id="S3.SS0.SSS0.Px1.p4">
<p class="ltx_p" id="S3.SS0.SSS0.Px1.p4.1">We emphasize that this framework of generating preference data from a evolutionary process
is generic, and can accommodate different definitions of the evolutionary process.
In Section <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#S5" title="5 Experiments ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_tag">5</span></a>, we show the evolutionary process from <cite class="ltx_cite ltx_citemacro_citet">Sun et al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib36" title="">2024</a>)</cite> can be successfully adopted in this framework.
In order to further improve the quality of the data generated, we propose a
fine-grained taxonomy of evolution operations in Section <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#S4" title="4 Fine-Grained Evolution Taxonomy ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_tag">4</span></a>.</p>
</div>
</section>
<section class="ltx_paragraph" id="S3.SS0.SSS0.Px2">
<h5 class="ltx_title ltx_title_paragraph">Contrastive Learning</h5>
<div class="ltx_para" id="S3.SS0.SSS0.Px2.p1">
<p class="ltx_p" id="S3.SS0.SSS0.Px2.p1.1">A variety of alignment algorithms can be leveraged to
fine-tune LLMs with triplets <math alttext="\mathcal{D}" class="ltx_Math" display="inline" id="S3.SS0.SSS0.Px2.p1.1.m1.1"><semantics id="S3.SS0.SSS0.Px2.p1.1.m1.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS0.SSS0.Px2.p1.1.m1.1.1" xref="S3.SS0.SSS0.Px2.p1.1.m1.1.1.cmml">𝒟</mi><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS0.Px2.p1.1.m1.1b"><ci id="S3.SS0.SSS0.Px2.p1.1.m1.1.1.cmml" xref="S3.SS0.SSS0.Px2.p1.1.m1.1.1">𝒟</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS0.Px2.p1.1.m1.1c">\mathcal{D}</annotation><annotation encoding="application/x-llamapun" id="S3.SS0.SSS0.Px2.p1.1.m1.1d">caligraphic_D</annotation></semantics></math> generated from the evolutionary process <cite class="ltx_cite ltx_citemacro_citep">(Ouyang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib26" title="">2022</a>; Rafailov et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib30" title="">2023</a>; Azar et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib1" title="">2023</a>; Ethayarajh et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib14" title="">2024</a>; Hong et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib17" title="">2024</a>; Meng et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib25" title="">2024</a>)</cite>. In this work, we focus on Direct Policy Optimization (DPO)
<cite class="ltx_cite ltx_citemacro_citep">(Rafailov et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib30" title="">2023</a>)</cite> mainly because it is the most well-established in
open source LLMs <cite class="ltx_cite ltx_citemacro_citep">(Tunstall et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib41" title="">2023</a>; Ivison et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib18" title="">2023</a>)</cite>, making our experiments
and checkpoints easily comparable with existing work. We leave it as a future work
to explore the implication of algorithm choice on the complex instruction-following capability.</p>
</div>
<div class="ltx_para" id="S3.SS0.SSS0.Px2.p2">
<p class="ltx_p" id="S3.SS0.SSS0.Px2.p2.8">For completeness, we briefly discuss how DPO is adopted for ECD.
Let us denote <math alttext="\pi_{\theta}" class="ltx_Math" display="inline" id="S3.SS0.SSS0.Px2.p2.1.m1.1"><semantics id="S3.SS0.SSS0.Px2.p2.1.m1.1a"><msub id="S3.SS0.SSS0.Px2.p2.1.m1.1.1" xref="S3.SS0.SSS0.Px2.p2.1.m1.1.1.cmml"><mi id="S3.SS0.SSS0.Px2.p2.1.m1.1.1.2" xref="S3.SS0.SSS0.Px2.p2.1.m1.1.1.2.cmml">π</mi><mi id="S3.SS0.SSS0.Px2.p2.1.m1.1.1.3" xref="S3.SS0.SSS0.Px2.p2.1.m1.1.1.3.cmml">θ</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS0.Px2.p2.1.m1.1b"><apply id="S3.SS0.SSS0.Px2.p2.1.m1.1.1.cmml" xref="S3.SS0.SSS0.Px2.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px2.p2.1.m1.1.1.1.cmml" xref="S3.SS0.SSS0.Px2.p2.1.m1.1.1">subscript</csymbol><ci id="S3.SS0.SSS0.Px2.p2.1.m1.1.1.2.cmml" xref="S3.SS0.SSS0.Px2.p2.1.m1.1.1.2">𝜋</ci><ci id="S3.SS0.SSS0.Px2.p2.1.m1.1.1.3.cmml" xref="S3.SS0.SSS0.Px2.p2.1.m1.1.1.3">𝜃</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS0.Px2.p2.1.m1.1c">\pi_{\theta}</annotation><annotation encoding="application/x-llamapun" id="S3.SS0.SSS0.Px2.p2.1.m1.1d">italic_π start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT</annotation></semantics></math> as a language model policy, where <math alttext="\pi_{\theta}(R|I)" class="ltx_Math" display="inline" id="S3.SS0.SSS0.Px2.p2.2.m2.1"><semantics id="S3.SS0.SSS0.Px2.p2.2.m2.1a"><mrow id="S3.SS0.SSS0.Px2.p2.2.m2.1.1" xref="S3.SS0.SSS0.Px2.p2.2.m2.1.1.cmml"><msub id="S3.SS0.SSS0.Px2.p2.2.m2.1.1.3" xref="S3.SS0.SSS0.Px2.p2.2.m2.1.1.3.cmml"><mi id="S3.SS0.SSS0.Px2.p2.2.m2.1.1.3.2" xref="S3.SS0.SSS0.Px2.p2.2.m2.1.1.3.2.cmml">π</mi><mi id="S3.SS0.SSS0.Px2.p2.2.m2.1.1.3.3" xref="S3.SS0.SSS0.Px2.p2.2.m2.1.1.3.3.cmml">θ</mi></msub><mo id="S3.SS0.SSS0.Px2.p2.2.m2.1.1.2" xref="S3.SS0.SSS0.Px2.p2.2.m2.1.1.2.cmml">⁢</mo><mrow id="S3.SS0.SSS0.Px2.p2.2.m2.1.1.1.1" xref="S3.SS0.SSS0.Px2.p2.2.m2.1.1.1.1.1.cmml"><mo id="S3.SS0.SSS0.Px2.p2.2.m2.1.1.1.1.2" stretchy="false" xref="S3.SS0.SSS0.Px2.p2.2.m2.1.1.1.1.1.cmml">(</mo><mrow id="S3.SS0.SSS0.Px2.p2.2.m2.1.1.1.1.1" xref="S3.SS0.SSS0.Px2.p2.2.m2.1.1.1.1.1.cmml"><mi id="S3.SS0.SSS0.Px2.p2.2.m2.1.1.1.1.1.2" xref="S3.SS0.SSS0.Px2.p2.2.m2.1.1.1.1.1.2.cmml">R</mi><mo fence="false" id="S3.SS0.SSS0.Px2.p2.2.m2.1.1.1.1.1.1" xref="S3.SS0.SSS0.Px2.p2.2.m2.1.1.1.1.1.1.cmml">|</mo><mi id="S3.SS0.SSS0.Px2.p2.2.m2.1.1.1.1.1.3" xref="S3.SS0.SSS0.Px2.p2.2.m2.1.1.1.1.1.3.cmml">I</mi></mrow><mo id="S3.SS0.SSS0.Px2.p2.2.m2.1.1.1.1.3" stretchy="false" xref="S3.SS0.SSS0.Px2.p2.2.m2.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS0.Px2.p2.2.m2.1b"><apply id="S3.SS0.SSS0.Px2.p2.2.m2.1.1.cmml" xref="S3.SS0.SSS0.Px2.p2.2.m2.1.1"><times id="S3.SS0.SSS0.Px2.p2.2.m2.1.1.2.cmml" xref="S3.SS0.SSS0.Px2.p2.2.m2.1.1.2"></times><apply id="S3.SS0.SSS0.Px2.p2.2.m2.1.1.3.cmml" xref="S3.SS0.SSS0.Px2.p2.2.m2.1.1.3"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px2.p2.2.m2.1.1.3.1.cmml" xref="S3.SS0.SSS0.Px2.p2.2.m2.1.1.3">subscript</csymbol><ci id="S3.SS0.SSS0.Px2.p2.2.m2.1.1.3.2.cmml" xref="S3.SS0.SSS0.Px2.p2.2.m2.1.1.3.2">𝜋</ci><ci id="S3.SS0.SSS0.Px2.p2.2.m2.1.1.3.3.cmml" xref="S3.SS0.SSS0.Px2.p2.2.m2.1.1.3.3">𝜃</ci></apply><apply id="S3.SS0.SSS0.Px2.p2.2.m2.1.1.1.1.1.cmml" xref="S3.SS0.SSS0.Px2.p2.2.m2.1.1.1.1"><csymbol cd="latexml" id="S3.SS0.SSS0.Px2.p2.2.m2.1.1.1.1.1.1.cmml" xref="S3.SS0.SSS0.Px2.p2.2.m2.1.1.1.1.1.1">conditional</csymbol><ci id="S3.SS0.SSS0.Px2.p2.2.m2.1.1.1.1.1.2.cmml" xref="S3.SS0.SSS0.Px2.p2.2.m2.1.1.1.1.1.2">𝑅</ci><ci id="S3.SS0.SSS0.Px2.p2.2.m2.1.1.1.1.1.3.cmml" xref="S3.SS0.SSS0.Px2.p2.2.m2.1.1.1.1.1.3">𝐼</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS0.Px2.p2.2.m2.1c">\pi_{\theta}(R|I)</annotation><annotation encoding="application/x-llamapun" id="S3.SS0.SSS0.Px2.p2.2.m2.1d">italic_π start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT ( italic_R | italic_I )</annotation></semantics></math> denotes the probability of generating the response <math alttext="R" class="ltx_Math" display="inline" id="S3.SS0.SSS0.Px2.p2.3.m3.1"><semantics id="S3.SS0.SSS0.Px2.p2.3.m3.1a"><mi id="S3.SS0.SSS0.Px2.p2.3.m3.1.1" xref="S3.SS0.SSS0.Px2.p2.3.m3.1.1.cmml">R</mi><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS0.Px2.p2.3.m3.1b"><ci id="S3.SS0.SSS0.Px2.p2.3.m3.1.1.cmml" xref="S3.SS0.SSS0.Px2.p2.3.m3.1.1">𝑅</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS0.Px2.p2.3.m3.1c">R</annotation><annotation encoding="application/x-llamapun" id="S3.SS0.SSS0.Px2.p2.3.m3.1d">italic_R</annotation></semantics></math> conditional on the instruction <math alttext="I" class="ltx_Math" display="inline" id="S3.SS0.SSS0.Px2.p2.4.m4.1"><semantics id="S3.SS0.SSS0.Px2.p2.4.m4.1a"><mi id="S3.SS0.SSS0.Px2.p2.4.m4.1.1" xref="S3.SS0.SSS0.Px2.p2.4.m4.1.1.cmml">I</mi><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS0.Px2.p2.4.m4.1b"><ci id="S3.SS0.SSS0.Px2.p2.4.m4.1.1.cmml" xref="S3.SS0.SSS0.Px2.p2.4.m4.1.1">𝐼</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS0.Px2.p2.4.m4.1c">I</annotation><annotation encoding="application/x-llamapun" id="S3.SS0.SSS0.Px2.p2.4.m4.1d">italic_I</annotation></semantics></math>. We assume that we are given a reference language model <math alttext="\pi_{\texttt{ref}}" class="ltx_Math" display="inline" id="S3.SS0.SSS0.Px2.p2.5.m5.1"><semantics id="S3.SS0.SSS0.Px2.p2.5.m5.1a"><msub id="S3.SS0.SSS0.Px2.p2.5.m5.1.1" xref="S3.SS0.SSS0.Px2.p2.5.m5.1.1.cmml"><mi id="S3.SS0.SSS0.Px2.p2.5.m5.1.1.2" xref="S3.SS0.SSS0.Px2.p2.5.m5.1.1.2.cmml">π</mi><mtext class="ltx_mathvariant_monospace" id="S3.SS0.SSS0.Px2.p2.5.m5.1.1.3" xref="S3.SS0.SSS0.Px2.p2.5.m5.1.1.3a.cmml">ref</mtext></msub><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS0.Px2.p2.5.m5.1b"><apply id="S3.SS0.SSS0.Px2.p2.5.m5.1.1.cmml" xref="S3.SS0.SSS0.Px2.p2.5.m5.1.1"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px2.p2.5.m5.1.1.1.cmml" xref="S3.SS0.SSS0.Px2.p2.5.m5.1.1">subscript</csymbol><ci id="S3.SS0.SSS0.Px2.p2.5.m5.1.1.2.cmml" xref="S3.SS0.SSS0.Px2.p2.5.m5.1.1.2">𝜋</ci><ci id="S3.SS0.SSS0.Px2.p2.5.m5.1.1.3a.cmml" xref="S3.SS0.SSS0.Px2.p2.5.m5.1.1.3"><mtext class="ltx_mathvariant_monospace" id="S3.SS0.SSS0.Px2.p2.5.m5.1.1.3.cmml" mathsize="70%" xref="S3.SS0.SSS0.Px2.p2.5.m5.1.1.3">ref</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS0.Px2.p2.5.m5.1c">\pi_{\texttt{ref}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS0.SSS0.Px2.p2.5.m5.1d">italic_π start_POSTSUBSCRIPT ref end_POSTSUBSCRIPT</annotation></semantics></math>, and use it to initialize <math alttext="\pi_{\theta}" class="ltx_Math" display="inline" id="S3.SS0.SSS0.Px2.p2.6.m6.1"><semantics id="S3.SS0.SSS0.Px2.p2.6.m6.1a"><msub id="S3.SS0.SSS0.Px2.p2.6.m6.1.1" xref="S3.SS0.SSS0.Px2.p2.6.m6.1.1.cmml"><mi id="S3.SS0.SSS0.Px2.p2.6.m6.1.1.2" xref="S3.SS0.SSS0.Px2.p2.6.m6.1.1.2.cmml">π</mi><mi id="S3.SS0.SSS0.Px2.p2.6.m6.1.1.3" xref="S3.SS0.SSS0.Px2.p2.6.m6.1.1.3.cmml">θ</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS0.Px2.p2.6.m6.1b"><apply id="S3.SS0.SSS0.Px2.p2.6.m6.1.1.cmml" xref="S3.SS0.SSS0.Px2.p2.6.m6.1.1"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px2.p2.6.m6.1.1.1.cmml" xref="S3.SS0.SSS0.Px2.p2.6.m6.1.1">subscript</csymbol><ci id="S3.SS0.SSS0.Px2.p2.6.m6.1.1.2.cmml" xref="S3.SS0.SSS0.Px2.p2.6.m6.1.1.2">𝜋</ci><ci id="S3.SS0.SSS0.Px2.p2.6.m6.1.1.3.cmml" xref="S3.SS0.SSS0.Px2.p2.6.m6.1.1.3">𝜃</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS0.Px2.p2.6.m6.1c">\pi_{\theta}</annotation><annotation encoding="application/x-llamapun" id="S3.SS0.SSS0.Px2.p2.6.m6.1d">italic_π start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT</annotation></semantics></math>. Then, we directly fine-tune the language model <math alttext="\pi_{\theta}" class="ltx_Math" display="inline" id="S3.SS0.SSS0.Px2.p2.7.m7.1"><semantics id="S3.SS0.SSS0.Px2.p2.7.m7.1a"><msub id="S3.SS0.SSS0.Px2.p2.7.m7.1.1" xref="S3.SS0.SSS0.Px2.p2.7.m7.1.1.cmml"><mi id="S3.SS0.SSS0.Px2.p2.7.m7.1.1.2" xref="S3.SS0.SSS0.Px2.p2.7.m7.1.1.2.cmml">π</mi><mi id="S3.SS0.SSS0.Px2.p2.7.m7.1.1.3" xref="S3.SS0.SSS0.Px2.p2.7.m7.1.1.3.cmml">θ</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS0.Px2.p2.7.m7.1b"><apply id="S3.SS0.SSS0.Px2.p2.7.m7.1.1.cmml" xref="S3.SS0.SSS0.Px2.p2.7.m7.1.1"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px2.p2.7.m7.1.1.1.cmml" xref="S3.SS0.SSS0.Px2.p2.7.m7.1.1">subscript</csymbol><ci id="S3.SS0.SSS0.Px2.p2.7.m7.1.1.2.cmml" xref="S3.SS0.SSS0.Px2.p2.7.m7.1.1.2">𝜋</ci><ci id="S3.SS0.SSS0.Px2.p2.7.m7.1.1.3.cmml" xref="S3.SS0.SSS0.Px2.p2.7.m7.1.1.3">𝜃</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS0.Px2.p2.7.m7.1c">\pi_{\theta}</annotation><annotation encoding="application/x-llamapun" id="S3.SS0.SSS0.Px2.p2.7.m7.1d">italic_π start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT</annotation></semantics></math> on the preference dataset <math alttext="\mathcal{D}" class="ltx_Math" display="inline" id="S3.SS0.SSS0.Px2.p2.8.m8.1"><semantics id="S3.SS0.SSS0.Px2.p2.8.m8.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS0.SSS0.Px2.p2.8.m8.1.1" xref="S3.SS0.SSS0.Px2.p2.8.m8.1.1.cmml">𝒟</mi><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS0.Px2.p2.8.m8.1b"><ci id="S3.SS0.SSS0.Px2.p2.8.m8.1.1.cmml" xref="S3.SS0.SSS0.Px2.p2.8.m8.1.1">𝒟</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS0.Px2.p2.8.m8.1c">\mathcal{D}</annotation><annotation encoding="application/x-llamapun" id="S3.SS0.SSS0.Px2.p2.8.m8.1d">caligraphic_D</annotation></semantics></math> by solving the following optimization problem:</p>
</div>
<div class="ltx_para" id="S3.SS0.SSS0.Px2.p3">
<table class="ltx_equationgroup ltx_eqn_align ltx_eqn_table" id="A4.EGx1">
<tbody id="S3.Ex1"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math alttext="\displaystyle\text{argmin}_{\theta}\mathcal{L}_{\texttt{DPO}}(\mathcal{D};%
\theta):=" class="ltx_Math" display="inline" id="S3.Ex1.m1.2"><semantics id="S3.Ex1.m1.2a"><mrow id="S3.Ex1.m1.2.3" xref="S3.Ex1.m1.2.3.cmml"><mrow id="S3.Ex1.m1.2.3.2" xref="S3.Ex1.m1.2.3.2.cmml"><msub id="S3.Ex1.m1.2.3.2.2" xref="S3.Ex1.m1.2.3.2.2.cmml"><mtext id="S3.Ex1.m1.2.3.2.2.2" xref="S3.Ex1.m1.2.3.2.2.2a.cmml">argmin</mtext><mi id="S3.Ex1.m1.2.3.2.2.3" xref="S3.Ex1.m1.2.3.2.2.3.cmml">θ</mi></msub><mo id="S3.Ex1.m1.2.3.2.1" xref="S3.Ex1.m1.2.3.2.1.cmml">⁢</mo><msub id="S3.Ex1.m1.2.3.2.3" xref="S3.Ex1.m1.2.3.2.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.Ex1.m1.2.3.2.3.2" xref="S3.Ex1.m1.2.3.2.3.2.cmml">ℒ</mi><mtext class="ltx_mathvariant_monospace" id="S3.Ex1.m1.2.3.2.3.3" xref="S3.Ex1.m1.2.3.2.3.3a.cmml">DPO</mtext></msub><mo id="S3.Ex1.m1.2.3.2.1a" xref="S3.Ex1.m1.2.3.2.1.cmml">⁢</mo><mrow id="S3.Ex1.m1.2.3.2.4.2" xref="S3.Ex1.m1.2.3.2.4.1.cmml"><mo id="S3.Ex1.m1.2.3.2.4.2.1" stretchy="false" xref="S3.Ex1.m1.2.3.2.4.1.cmml">(</mo><mi class="ltx_font_mathcaligraphic" id="S3.Ex1.m1.1.1" xref="S3.Ex1.m1.1.1.cmml">𝒟</mi><mo id="S3.Ex1.m1.2.3.2.4.2.2" xref="S3.Ex1.m1.2.3.2.4.1.cmml">;</mo><mi id="S3.Ex1.m1.2.2" xref="S3.Ex1.m1.2.2.cmml">θ</mi><mo id="S3.Ex1.m1.2.3.2.4.2.3" rspace="0.278em" stretchy="false" xref="S3.Ex1.m1.2.3.2.4.1.cmml">)</mo></mrow></mrow><mo id="S3.Ex1.m1.2.3.1" rspace="0.278em" xref="S3.Ex1.m1.2.3.1.cmml">:=</mo><mi id="S3.Ex1.m1.2.3.3" xref="S3.Ex1.m1.2.3.3.cmml"></mi></mrow><annotation-xml encoding="MathML-Content" id="S3.Ex1.m1.2b"><apply id="S3.Ex1.m1.2.3.cmml" xref="S3.Ex1.m1.2.3"><csymbol cd="latexml" id="S3.Ex1.m1.2.3.1.cmml" xref="S3.Ex1.m1.2.3.1">assign</csymbol><apply id="S3.Ex1.m1.2.3.2.cmml" xref="S3.Ex1.m1.2.3.2"><times id="S3.Ex1.m1.2.3.2.1.cmml" xref="S3.Ex1.m1.2.3.2.1"></times><apply id="S3.Ex1.m1.2.3.2.2.cmml" xref="S3.Ex1.m1.2.3.2.2"><csymbol cd="ambiguous" id="S3.Ex1.m1.2.3.2.2.1.cmml" xref="S3.Ex1.m1.2.3.2.2">subscript</csymbol><ci id="S3.Ex1.m1.2.3.2.2.2a.cmml" xref="S3.Ex1.m1.2.3.2.2.2"><mtext id="S3.Ex1.m1.2.3.2.2.2.cmml" xref="S3.Ex1.m1.2.3.2.2.2">argmin</mtext></ci><ci id="S3.Ex1.m1.2.3.2.2.3.cmml" xref="S3.Ex1.m1.2.3.2.2.3">𝜃</ci></apply><apply id="S3.Ex1.m1.2.3.2.3.cmml" xref="S3.Ex1.m1.2.3.2.3"><csymbol cd="ambiguous" id="S3.Ex1.m1.2.3.2.3.1.cmml" xref="S3.Ex1.m1.2.3.2.3">subscript</csymbol><ci id="S3.Ex1.m1.2.3.2.3.2.cmml" xref="S3.Ex1.m1.2.3.2.3.2">ℒ</ci><ci id="S3.Ex1.m1.2.3.2.3.3a.cmml" xref="S3.Ex1.m1.2.3.2.3.3"><mtext class="ltx_mathvariant_monospace" id="S3.Ex1.m1.2.3.2.3.3.cmml" mathsize="70%" xref="S3.Ex1.m1.2.3.2.3.3">DPO</mtext></ci></apply><list id="S3.Ex1.m1.2.3.2.4.1.cmml" xref="S3.Ex1.m1.2.3.2.4.2"><ci id="S3.Ex1.m1.1.1.cmml" xref="S3.Ex1.m1.1.1">𝒟</ci><ci id="S3.Ex1.m1.2.2.cmml" xref="S3.Ex1.m1.2.2">𝜃</ci></list></apply><csymbol cd="latexml" id="S3.Ex1.m1.2.3.3.cmml" xref="S3.Ex1.m1.2.3.3">absent</csymbol></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.Ex1.m1.2c">\displaystyle\text{argmin}_{\theta}\mathcal{L}_{\texttt{DPO}}(\mathcal{D};%
\theta):=</annotation><annotation encoding="application/x-llamapun" id="S3.Ex1.m1.2d">argmin start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT caligraphic_L start_POSTSUBSCRIPT DPO end_POSTSUBSCRIPT ( caligraphic_D ; italic_θ ) :=</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
<tbody id="S3.Ex2"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math alttext="\displaystyle\mathbb{E}_{I,R^{+},R^{-}\sim\mathcal{D}}\left[\log\left(\sigma(%
\frac{\pi_{\theta}(R^{+}|I))}{\pi_{\texttt{ref}}(R^{+}|I)})-\sigma(\frac{\pi_{%
\theta}(R^{-}|I))}{\pi_{\texttt{ref}}(R^{-}|I)})\right)\right]." class="ltx_math_unparsed" display="inline" id="S3.Ex2.m1.7"><semantics id="S3.Ex2.m1.7a"><mrow id="S3.Ex2.m1.7.7.1"><mrow id="S3.Ex2.m1.7.7.1.1"><msub id="S3.Ex2.m1.7.7.1.1.3"><mi id="S3.Ex2.m1.7.7.1.1.3.2">𝔼</mi><mrow id="S3.Ex2.m1.3.3.3"><mrow id="S3.Ex2.m1.3.3.3.3.2"><mi id="S3.Ex2.m1.1.1.1.1">I</mi><mo id="S3.Ex2.m1.3.3.3.3.2.3">,</mo><msup id="S3.Ex2.m1.2.2.2.2.1.1"><mi id="S3.Ex2.m1.2.2.2.2.1.1.2">R</mi><mo id="S3.Ex2.m1.2.2.2.2.1.1.3">+</mo></msup><mo id="S3.Ex2.m1.3.3.3.3.2.4">,</mo><msup id="S3.Ex2.m1.3.3.3.3.2.2"><mi id="S3.Ex2.m1.3.3.3.3.2.2.2">R</mi><mo id="S3.Ex2.m1.3.3.3.3.2.2.3">−</mo></msup></mrow><mo id="S3.Ex2.m1.3.3.3.4">∼</mo><mi class="ltx_font_mathcaligraphic" id="S3.Ex2.m1.3.3.3.5">𝒟</mi></mrow></msub><mo id="S3.Ex2.m1.7.7.1.1.2">⁢</mo><mrow id="S3.Ex2.m1.7.7.1.1.1.1"><mo id="S3.Ex2.m1.7.7.1.1.1.1.2">[</mo><mrow id="S3.Ex2.m1.7.7.1.1.1.1.1.1"><mi id="S3.Ex2.m1.6.6">log</mi><mo id="S3.Ex2.m1.7.7.1.1.1.1.1.1a">⁡</mo><mrow id="S3.Ex2.m1.7.7.1.1.1.1.1.1.1"><mo id="S3.Ex2.m1.7.7.1.1.1.1.1.1.1.2">(</mo><mrow id="S3.Ex2.m1.7.7.1.1.1.1.1.1.1.1"><mrow id="S3.Ex2.m1.7.7.1.1.1.1.1.1.1.1.2"><mi id="S3.Ex2.m1.7.7.1.1.1.1.1.1.1.1.2.2">σ</mi><mo id="S3.Ex2.m1.7.7.1.1.1.1.1.1.1.1.2.1">⁢</mo><mrow id="S3.Ex2.m1.7.7.1.1.1.1.1.1.1.1.2.3.2"><mo id="S3.Ex2.m1.7.7.1.1.1.1.1.1.1.1.2.3.2.1" stretchy="false">(</mo><mstyle displaystyle="true" id="S3.Ex2.m1.4.4"><mfrac id="S3.Ex2.m1.4.4a"><mrow id="S3.Ex2.m1.4.4.3"><msub id="S3.Ex2.m1.4.4.3.1"><mi id="S3.Ex2.m1.4.4.3.1.2">π</mi><mi id="S3.Ex2.m1.4.4.3.1.3">θ</mi></msub><mrow id="S3.Ex2.m1.4.4.3.2"><mo id="S3.Ex2.m1.4.4.3.2.1" stretchy="false">(</mo><msup id="S3.Ex2.m1.4.4.3.2.2"><mi id="S3.Ex2.m1.4.4.3.2.2.2">R</mi><mo id="S3.Ex2.m1.4.4.3.2.2.3">+</mo></msup><mo fence="false" id="S3.Ex2.m1.4.4.3.2.3" rspace="0.167em" stretchy="false">|</mo><mi id="S3.Ex2.m1.4.4.3.2.4">I</mi><mo id="S3.Ex2.m1.4.4.3.2.5" stretchy="false">)</mo></mrow><mo id="S3.Ex2.m1.4.4.3.3" stretchy="false">)</mo></mrow><mrow id="S3.Ex2.m1.4.4.1"><msub id="S3.Ex2.m1.4.4.1.3"><mi id="S3.Ex2.m1.4.4.1.3.2">π</mi><mtext class="ltx_mathvariant_monospace" id="S3.Ex2.m1.4.4.1.3.3">ref</mtext></msub><mo id="S3.Ex2.m1.4.4.1.2">⁢</mo><mrow id="S3.Ex2.m1.4.4.1.1.1"><mo id="S3.Ex2.m1.4.4.1.1.1.2" stretchy="false">(</mo><mrow id="S3.Ex2.m1.4.4.1.1.1.1"><msup id="S3.Ex2.m1.4.4.1.1.1.1.2"><mi id="S3.Ex2.m1.4.4.1.1.1.1.2.2">R</mi><mo id="S3.Ex2.m1.4.4.1.1.1.1.2.3">+</mo></msup><mo fence="false" id="S3.Ex2.m1.4.4.1.1.1.1.1">|</mo><mi id="S3.Ex2.m1.4.4.1.1.1.1.3">I</mi></mrow><mo id="S3.Ex2.m1.4.4.1.1.1.3" stretchy="false">)</mo></mrow></mrow></mfrac></mstyle><mo id="S3.Ex2.m1.7.7.1.1.1.1.1.1.1.1.2.3.2.2" stretchy="false">)</mo></mrow></mrow><mo id="S3.Ex2.m1.7.7.1.1.1.1.1.1.1.1.1">−</mo><mrow id="S3.Ex2.m1.7.7.1.1.1.1.1.1.1.1.3"><mi id="S3.Ex2.m1.7.7.1.1.1.1.1.1.1.1.3.2">σ</mi><mo id="S3.Ex2.m1.7.7.1.1.1.1.1.1.1.1.3.1">⁢</mo><mrow id="S3.Ex2.m1.7.7.1.1.1.1.1.1.1.1.3.3.2"><mo id="S3.Ex2.m1.7.7.1.1.1.1.1.1.1.1.3.3.2.1" stretchy="false">(</mo><mstyle displaystyle="true" id="S3.Ex2.m1.5.5"><mfrac id="S3.Ex2.m1.5.5a"><mrow id="S3.Ex2.m1.5.5.3"><msub id="S3.Ex2.m1.5.5.3.1"><mi id="S3.Ex2.m1.5.5.3.1.2">π</mi><mi id="S3.Ex2.m1.5.5.3.1.3">θ</mi></msub><mrow id="S3.Ex2.m1.5.5.3.2"><mo id="S3.Ex2.m1.5.5.3.2.1" stretchy="false">(</mo><msup id="S3.Ex2.m1.5.5.3.2.2"><mi id="S3.Ex2.m1.5.5.3.2.2.2">R</mi><mo id="S3.Ex2.m1.5.5.3.2.2.3">−</mo></msup><mo fence="false" id="S3.Ex2.m1.5.5.3.2.3" rspace="0.167em" stretchy="false">|</mo><mi id="S3.Ex2.m1.5.5.3.2.4">I</mi><mo id="S3.Ex2.m1.5.5.3.2.5" stretchy="false">)</mo></mrow><mo id="S3.Ex2.m1.5.5.3.3" stretchy="false">)</mo></mrow><mrow id="S3.Ex2.m1.5.5.1"><msub id="S3.Ex2.m1.5.5.1.3"><mi id="S3.Ex2.m1.5.5.1.3.2">π</mi><mtext class="ltx_mathvariant_monospace" id="S3.Ex2.m1.5.5.1.3.3">ref</mtext></msub><mo id="S3.Ex2.m1.5.5.1.2">⁢</mo><mrow id="S3.Ex2.m1.5.5.1.1.1"><mo id="S3.Ex2.m1.5.5.1.1.1.2" stretchy="false">(</mo><mrow id="S3.Ex2.m1.5.5.1.1.1.1"><msup id="S3.Ex2.m1.5.5.1.1.1.1.2"><mi id="S3.Ex2.m1.5.5.1.1.1.1.2.2">R</mi><mo id="S3.Ex2.m1.5.5.1.1.1.1.2.3">−</mo></msup><mo fence="false" id="S3.Ex2.m1.5.5.1.1.1.1.1">|</mo><mi id="S3.Ex2.m1.5.5.1.1.1.1.3">I</mi></mrow><mo id="S3.Ex2.m1.5.5.1.1.1.3" stretchy="false">)</mo></mrow></mrow></mfrac></mstyle><mo id="S3.Ex2.m1.7.7.1.1.1.1.1.1.1.1.3.3.2.2" stretchy="false">)</mo></mrow></mrow></mrow><mo id="S3.Ex2.m1.7.7.1.1.1.1.1.1.1.3">)</mo></mrow></mrow><mo id="S3.Ex2.m1.7.7.1.1.1.1.3">]</mo></mrow></mrow><mo id="S3.Ex2.m1.7.7.1.2" lspace="0em">.</mo></mrow><annotation encoding="application/x-tex" id="S3.Ex2.m1.7b">\displaystyle\mathbb{E}_{I,R^{+},R^{-}\sim\mathcal{D}}\left[\log\left(\sigma(%
\frac{\pi_{\theta}(R^{+}|I))}{\pi_{\texttt{ref}}(R^{+}|I)})-\sigma(\frac{\pi_{%
\theta}(R^{-}|I))}{\pi_{\texttt{ref}}(R^{-}|I)})\right)\right].</annotation><annotation encoding="application/x-llamapun" id="S3.Ex2.m1.7c">blackboard_E start_POSTSUBSCRIPT italic_I , italic_R start_POSTSUPERSCRIPT + end_POSTSUPERSCRIPT , italic_R start_POSTSUPERSCRIPT - end_POSTSUPERSCRIPT ∼ caligraphic_D end_POSTSUBSCRIPT [ roman_log ( italic_σ ( divide start_ARG italic_π start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT ( italic_R start_POSTSUPERSCRIPT + end_POSTSUPERSCRIPT | italic_I ) ) end_ARG start_ARG italic_π start_POSTSUBSCRIPT ref end_POSTSUBSCRIPT ( italic_R start_POSTSUPERSCRIPT + end_POSTSUPERSCRIPT | italic_I ) end_ARG ) - italic_σ ( divide start_ARG italic_π start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT ( italic_R start_POSTSUPERSCRIPT - end_POSTSUPERSCRIPT | italic_I ) ) end_ARG start_ARG italic_π start_POSTSUBSCRIPT ref end_POSTSUBSCRIPT ( italic_R start_POSTSUPERSCRIPT - end_POSTSUPERSCRIPT | italic_I ) end_ARG ) ) ] .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="S3.SS0.SSS0.Px2.p4">
<p class="ltx_p" id="S3.SS0.SSS0.Px2.p4.3">Following <cite class="ltx_cite ltx_citemacro_citet">Rafailov et al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib30" title="">2023</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib29" title="">2024</a>)</cite>, the resulting LLM policy <math alttext="\pi_{\theta}" class="ltx_Math" display="inline" id="S3.SS0.SSS0.Px2.p4.1.m1.1"><semantics id="S3.SS0.SSS0.Px2.p4.1.m1.1a"><msub id="S3.SS0.SSS0.Px2.p4.1.m1.1.1" xref="S3.SS0.SSS0.Px2.p4.1.m1.1.1.cmml"><mi id="S3.SS0.SSS0.Px2.p4.1.m1.1.1.2" xref="S3.SS0.SSS0.Px2.p4.1.m1.1.1.2.cmml">π</mi><mi id="S3.SS0.SSS0.Px2.p4.1.m1.1.1.3" xref="S3.SS0.SSS0.Px2.p4.1.m1.1.1.3.cmml">θ</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS0.Px2.p4.1.m1.1b"><apply id="S3.SS0.SSS0.Px2.p4.1.m1.1.1.cmml" xref="S3.SS0.SSS0.Px2.p4.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS0.SSS0.Px2.p4.1.m1.1.1.1.cmml" xref="S3.SS0.SSS0.Px2.p4.1.m1.1.1">subscript</csymbol><ci id="S3.SS0.SSS0.Px2.p4.1.m1.1.1.2.cmml" xref="S3.SS0.SSS0.Px2.p4.1.m1.1.1.2">𝜋</ci><ci id="S3.SS0.SSS0.Px2.p4.1.m1.1.1.3.cmml" xref="S3.SS0.SSS0.Px2.p4.1.m1.1.1.3">𝜃</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS0.Px2.p4.1.m1.1c">\pi_{\theta}</annotation><annotation encoding="application/x-llamapun" id="S3.SS0.SSS0.Px2.p4.1.m1.1d">italic_π start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT</annotation></semantics></math>
can be associated with the policy which maximizes the reward model learned from
<math alttext="\mathcal{D}" class="ltx_Math" display="inline" id="S3.SS0.SSS0.Px2.p4.2.m2.1"><semantics id="S3.SS0.SSS0.Px2.p4.2.m2.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS0.SSS0.Px2.p4.2.m2.1.1" xref="S3.SS0.SSS0.Px2.p4.2.m2.1.1.cmml">𝒟</mi><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS0.Px2.p4.2.m2.1b"><ci id="S3.SS0.SSS0.Px2.p4.2.m2.1.1.cmml" xref="S3.SS0.SSS0.Px2.p4.2.m2.1.1">𝒟</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS0.Px2.p4.2.m2.1c">\mathcal{D}</annotation><annotation encoding="application/x-llamapun" id="S3.SS0.SSS0.Px2.p4.2.m2.1d">caligraphic_D</annotation></semantics></math>. Due to our construction of <math alttext="\mathcal{D}" class="ltx_Math" display="inline" id="S3.SS0.SSS0.Px2.p4.3.m3.1"><semantics id="S3.SS0.SSS0.Px2.p4.3.m3.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS0.SSS0.Px2.p4.3.m3.1.1" xref="S3.SS0.SSS0.Px2.p4.3.m3.1.1.cmml">𝒟</mi><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS0.Px2.p4.3.m3.1b"><ci id="S3.SS0.SSS0.Px2.p4.3.m3.1.1.cmml" xref="S3.SS0.SSS0.Px2.p4.3.m3.1.1">𝒟</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS0.Px2.p4.3.m3.1c">\mathcal{D}</annotation><annotation encoding="application/x-llamapun" id="S3.SS0.SSS0.Px2.p4.3.m3.1d">caligraphic_D</annotation></semantics></math>, the reward model would
assign higher rewards on responses which meticulously follow complex instructions.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S4">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span>Fine-Grained Evolution Taxonomy</h2>
<div class="ltx_para" id="S4.p1">
<p class="ltx_p" id="S4.p1.1">In order to ensure the evolutionary process generates diverse variations of instructions,
we define a fine-grained hierarchical taxonomy of evolution operations.
Each evolution
operation samples a leaf node from this taxonomy to determine the type of operation
and the corresponding prompt template. The top level of the taxonomy consists of five categories:</p>
<ul class="ltx_itemize" id="S4.I1">
<li class="ltx_item" id="S4.I1.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S4.I1.i1.p1">
<p class="ltx_p" id="S4.I1.i1.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I1.i1.p1.1.1">Content</span>: Add a condition that changes the scope or the specificity of the response.</p>
</div>
</li>
<li class="ltx_item" id="S4.I1.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S4.I1.i2.p1">
<p class="ltx_p" id="S4.I1.i2.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I1.i2.p1.1.1">Style</span>: Control the tone, sentiment, or formality of the response.</p>
</div>
</li>
<li class="ltx_item" id="S4.I1.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S4.I1.i3.p1">
<p class="ltx_p" id="S4.I1.i3.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I1.i3.p1.1.1">Format</span>: Impose a formatting or linguistic requirement.</p>
</div>
</li>
<li class="ltx_item" id="S4.I1.i4" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S4.I1.i4.p1">
<p class="ltx_p" id="S4.I1.i4.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I1.i4.p1.1.1">Reasoning</span>: Add a constraint that requires additional steps of logical or
numerical reasoning.</p>
</div>
</li>
<li class="ltx_item" id="S4.I1.i5" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S4.I1.i5.p1">
<p class="ltx_p" id="S4.I1.i5.p1.1"><span class="ltx_text ltx_font_bold" id="S4.I1.i5.p1.1.1">Breadth</span>: Come up with a new instruction that matches the domain, length, and complexity of the original instruction.</p>
</div>
</li>
</ul>
</div>
<div class="ltx_para" id="S4.p2">
<p class="ltx_p" id="S4.p2.1">Then, for each of the top-level category, we define around five fine-grained evolution types. See Table <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#A2.T6" title="Table 6 ‣ B.1 Training Details ‣ Appendix B Additional Details ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_tag">6</span></a> for the full taxonomy of evolution operations.
While Evol-Instruct <cite class="ltx_cite ltx_citemacro_citep">(Xu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib45" title="">2023</a>)</cite> defines only eleven high-level operation types,
and Confier <cite class="ltx_cite ltx_citemacro_citep">(Sun et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib36" title="">2024</a>)</cite> provides about eleven operation types in in-context examples, our taxonomy defines more fine-grained and hierarchically organized 22 operation types. In Section <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#S5" title="5 Experiments ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_tag">5</span></a>, we find this taxonomy generates
higher-quality preference data for ECD.</p>
</div>
<div class="ltx_para" id="S4.p3">
<p class="ltx_p" id="S4.p3.1">For illustration, consider the following example of an evolution step:</p>
<ol class="ltx_enumerate" id="S4.I2">
<li class="ltx_item" id="S4.I2.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span>
<div class="ltx_para" id="S4.I2.i1.p1">
<p class="ltx_p" id="S4.I2.i1.p1.1">The process starts from a seed instruction “Write an application letter to my college for immigration certificate.”.</p>
</div>
</li>
<li class="ltx_item" id="S4.I2.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span>
<div class="ltx_para" id="S4.I2.i2.p1">
<p class="ltx_p" id="S4.I2.i2.p1.1"><em class="ltx_emph ltx_font_italic" id="S4.I2.i2.p1.1.1">‘Format’</em> is randomly chosen from the top level.</p>
</div>
</li>
<li class="ltx_item" id="S4.I2.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">3.</span>
<div class="ltx_para" id="S4.I2.i3.p1">
<p class="ltx_p" id="S4.I2.i3.p1.1">Within the <em class="ltx_emph ltx_font_italic" id="S4.I2.i3.p1.1.1">‘Format’</em> category, <em class="ltx_emph ltx_font_italic" id="S4.I2.i3.p1.1.2">‘Hierarchical: Introduce a hierarchical structure which requires an understanding of a hierarchy of tasks and follow it’</em> is randomly chosen.</p>
</div>
</li>
<li class="ltx_item" id="S4.I2.i4" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">4.</span>
<div class="ltx_para" id="S4.I2.i4.p1">
<p class="ltx_p" id="S4.I2.i4.p1.1">LLM is prompted with the prompt corresponding to <em class="ltx_emph ltx_font_italic" id="S4.I2.i4.p1.1.1">‘Hierarchical’</em> type to evolved the original instruction into: “Write an application letter to my college for immigration certificate. The letter should have the following format: -Date, -Inside address, -Salutation, …”.</p>
</div>
</li>
</ol>
<p class="ltx_p" id="S4.p3.2">See Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#S3.F2" title="Figure 2 ‣ 3 Evolutionary Contrastive Distillation ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_tag">2</span></a> for a graphical illustration.</p>
</div>
</section>
<section class="ltx_section" id="S5">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">5 </span>Experiments</h2>
<section class="ltx_subsection" id="S5.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.1 </span>Models and Datasets</h3>
<div class="ltx_para" id="S5.SS1.p1">
<p class="ltx_p" id="S5.SS1.p1.1">We conduct our experiments on the popular base model Mistral-7B-v0.1 <cite class="ltx_cite ltx_citemacro_citep">(Jiang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib19" title="">2023a</a>)</cite>. We train our own Instruction Fine-tuned (IFT) model based on the Conifer-7B’s SFT recipe <cite class="ltx_cite ltx_citemacro_citep">(Sun et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib36" title="">2024</a>)</cite>, the SOTA IFT 7B model, mixing in 53k samples from ShareGPT with the Conifer dataset.<span class="ltx_note ltx_role_footnote" id="footnote2"><sup class="ltx_note_mark">2</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">2</sup><span class="ltx_tag ltx_tag_note">2</span>We cannot use the exact same 53k samples from ShareGPT used in the Conifer paper, as this dataset was not made public. We randomly sampled 53k datapoints from <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://huggingface.co/datasets/anon8231489123/ShareGPT_Vicuna_unfiltered." title="">https://huggingface.co/datasets/anon8231489123/ShareGPT_Vicuna_unfiltered.</a> to best mimic it.</span></span></span> We call the resulting IFT dataset Conifer-Mix and the resulting IFT model, Conifer-7B-SFT.<span class="ltx_note ltx_role_footnote" id="footnote3"><sup class="ltx_note_mark">3</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">3</sup><span class="ltx_tag ltx_tag_note">3</span>Since model parameters from <cite class="ltx_cite ltx_citemacro_citet">Sun et al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib36" title="">2024</a>)</cite> were not publicly released, we reproduced the recipe according to the paper to the best of our ability.</span></span></span> Conifer-7B-SFT forms the backbone on which we perform PFT experiments using DPO. For details on training, see Appendix <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#A2" title="Appendix B Additional Details ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_tag">B</span></a>.</p>
</div>
<div class="ltx_para" id="S5.SS1.p2">
<p class="ltx_p" id="S5.SS1.p2.1">To test the robustness of our approach, we generate 3 separate ECD datasets: (i) <span class="ltx_text ltx_font_bold" id="S5.SS1.p2.1.1">ECD-FineGrained</span>: 30k preference pairs from Fine-Grained Evolutionary Process discussed in Section <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#S4" title="4 Fine-Grained Evolution Taxonomy ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_tag">4</span></a>,<span class="ltx_note ltx_role_footnote" id="footnote4"><sup class="ltx_note_mark">4</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">4</sup><span class="ltx_tag ltx_tag_note">4</span>We execute this strategy for four rounds of evolution using Claude 2, generating a total of 104,499 preference data from ShareGPT instructions. Then we subsampled 30k.</span></span></span> (ii) <span class="ltx_text ltx_font_bold" id="S5.SS1.p2.1.2">ECD-Conifer</span>: ECD data based on the evolutionary process from Conifer <cite class="ltx_cite ltx_citemacro_citep">(Sun et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib36" title="">2024</a>)</cite><span class="ltx_note ltx_role_footnote" id="footnote5"><sup class="ltx_note_mark">5</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">5</sup><span class="ltx_tag ltx_tag_note">5</span>We removed evolutions with ”process feedback”-type, because it does not generate hard negatives needed for ECD.</span></span></span>, and (iii) <span class="ltx_text ltx_font_bold" id="S5.SS1.p2.1.3">ECD-FineGrained-Conifer</span>: a concatenation of ECD-FineGrained and ECD-Conifer. We add UltraFeedback <cite class="ltx_cite ltx_citemacro_citep">(Cui et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib8" title="">2023</a>)</cite> to each of these to improve conversational quality<span class="ltx_note ltx_role_footnote" id="footnote6"><sup class="ltx_note_mark">6</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">6</sup><span class="ltx_tag ltx_tag_note">6</span>We use <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://huggingface.co/datasets/HuggingFaceH4/ultrafeedback_binarized?row=1" title="">https://huggingface.co/datasets/HuggingFaceH4/ultrafeedback_binarized?row=1</a> and remove preference pairs with equal GPT-4 scores.</span></span></span>; see the Appendix <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#A2.SS2" title="B.2 Ablation Study on Removing UltraFeedback from Data Mixture ‣ Appendix B Additional Details ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_tag">B.2</span></a> for the ablation on its impact.</p>
</div>
<figure class="ltx_table" id="S5.T1">
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="S5.T1.7" style="width:433.6pt;height:130.5pt;vertical-align:-0.6pt;"><span class="ltx_transformed_inner" style="transform:translate(-173.7pt,52.0pt) scale(0.555139276221198,0.555139276221198) ;">
<table class="ltx_tabular ltx_align_middle" id="S5.T1.7.7">
<tr class="ltx_tr" id="S5.T1.7.7.8">
<td class="ltx_td ltx_border_r" id="S5.T1.7.7.8.1" rowspan="2"></td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.8.2" rowspan="2"><span class="ltx_text ltx_font_bold" id="S5.T1.7.7.8.2.1">Base Model</span></td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.8.3" rowspan="2"><span class="ltx_text ltx_font_bold" id="S5.T1.7.7.8.3.1">IFT Data</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T1.7.7.8.4" rowspan="2"><span class="ltx_text ltx_font_bold" id="S5.T1.7.7.8.4.1">Preference Data</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" colspan="4" id="S5.T1.7.7.8.5"><span class="ltx_text ltx_font_bold" id="S5.T1.7.7.8.5.1">IFEval</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" colspan="2" id="S5.T1.7.7.8.6"><span class="ltx_text ltx_font_bold" id="S5.T1.7.7.8.6.1">FollowBench</span></td>
<td class="ltx_td ltx_align_center" colspan="3" id="S5.T1.7.7.8.7"><span class="ltx_text ltx_font_bold" id="S5.T1.7.7.8.7.1">InfoBench</span></td>
</tr>
<tr class="ltx_tr" id="S5.T1.7.7.9">
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T1.7.7.9.1"><span class="ltx_text ltx_font_bold" id="S5.T1.7.7.9.1.1">strict pr</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T1.7.7.9.2"><span class="ltx_text ltx_font_bold" id="S5.T1.7.7.9.2.1">strict in</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T1.7.7.9.3"><span class="ltx_text ltx_font_bold" id="S5.T1.7.7.9.3.1">loose pr</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T1.7.7.9.4"><span class="ltx_text ltx_font_bold" id="S5.T1.7.7.9.4.1">loose in</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T1.7.7.9.5"><span class="ltx_text ltx_font_bold" id="S5.T1.7.7.9.5.1">HSR</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T1.7.7.9.6"><span class="ltx_text ltx_font_bold" id="S5.T1.7.7.9.6.1">SSR</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T1.7.7.9.7"><span class="ltx_text ltx_font_bold" id="S5.T1.7.7.9.7.1">Easy</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T1.7.7.9.8"><span class="ltx_text ltx_font_bold" id="S5.T1.7.7.9.8.1">Hard</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T1.7.7.9.9"><span class="ltx_text ltx_font_bold" id="S5.T1.7.7.9.9.1">Overall</span></td>
</tr>
<tr class="ltx_tr" id="S5.T1.1.1.1">
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="S5.T1.1.1.1.1"><span class="ltx_text ltx_font_bold" id="S5.T1.1.1.1.1.1">LLaMa-2-70B-Chat<sup class="ltx_sup" id="S5.T1.1.1.1.1.1.1"><span class="ltx_text ltx_font_medium" id="S5.T1.1.1.1.1.1.1.1">†</span></sup></span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T1.1.1.1.2">LLaMa-2</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T1.1.1.1.3">-</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T1.1.1.1.4">-</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T1.1.1.1.5">-</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T1.1.1.1.6">-</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T1.1.1.1.7"><span class="ltx_text ltx_font_bold" id="S5.T1.1.1.1.7.1">-</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T1.1.1.1.8"><span class="ltx_text ltx_font_bold" id="S5.T1.1.1.1.8.1">-</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T1.1.1.1.9">47.5%</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T1.1.1.1.10">55.9%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T1.1.1.1.11">89.6%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T1.1.1.1.12">82.1%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T1.1.1.1.13">84.4%</td>
</tr>
<tr class="ltx_tr" id="S5.T1.2.2.2">
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="S5.T1.2.2.2.1"><span class="ltx_text ltx_font_bold" id="S5.T1.2.2.2.1.1">Vicuna-13B-v1.5<sup class="ltx_sup" id="S5.T1.2.2.2.1.1.1"><span class="ltx_text ltx_font_medium" id="S5.T1.2.2.2.1.1.1.1">†</span></sup></span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T1.2.2.2.2">LLaMa-2</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T1.2.2.2.3">ShareGPT</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T1.2.2.2.4">-</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T1.2.2.2.5">43.1%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T1.2.2.2.6">53.6%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T1.2.2.2.7">46.6%</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T1.2.2.2.8">58.0%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T1.2.2.2.9">50.4%</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T1.2.2.2.10">59.5%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T1.2.2.2.11">85.7%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T1.2.2.2.12">73.7%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T1.2.2.2.13">77.3%</td>
</tr>
<tr class="ltx_tr" id="S5.T1.3.3.3">
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="S5.T1.3.3.3.1"><span class="ltx_text ltx_font_bold" id="S5.T1.3.3.3.1.1">Mistral-7B-Evol-Instruct<sup class="ltx_sup" id="S5.T1.3.3.3.1.1.1"><span class="ltx_text ltx_font_medium" id="S5.T1.3.3.3.1.1.1.1">†</span></sup></span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T1.3.3.3.2">Mistral-7B</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T1.3.3.3.3">Evol-Instruct</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T1.3.3.3.4">-</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T1.3.3.3.5">41.4%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T1.3.3.3.6">51.3%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T1.3.3.3.7">44.0%</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T1.3.3.3.8">54.4%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T1.3.3.3.9">40.7%</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T1.3.3.3.10">52.7%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T1.3.3.3.11">81.0%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T1.3.3.3.12">73.2%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T1.3.3.3.13">75.6%</td>
</tr>
<tr class="ltx_tr" id="S5.T1.7.7.10">
<td class="ltx_td ltx_align_left ltx_border_r" id="S5.T1.7.7.10.1"><span class="ltx_text ltx_font_bold" id="S5.T1.7.7.10.1.1">Conifer-7B-SFT</span></td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.10.2">Mistral-7B</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.10.3">Conifer-Mix</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T1.7.7.10.4">-</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.10.5">45.1%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.10.6">58.0%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.10.7">48.6%</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T1.7.7.10.8">61.2%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.10.9">49.7%</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T1.7.7.10.10">60.4%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.10.11">85.9%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.10.12">80.6%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.10.13">82.2%</td>
</tr>
<tr class="ltx_tr" id="S5.T1.4.4.4">
<td class="ltx_td ltx_align_left ltx_border_r" id="S5.T1.4.4.4.1"><span class="ltx_text ltx_font_bold" id="S5.T1.4.4.4.1.1">Mistral-7B-ShareGPT-DPO<sup class="ltx_sup" id="S5.T1.4.4.4.1.1.1"><span class="ltx_text ltx_font_medium" id="S5.T1.4.4.4.1.1.1.1">†</span></sup></span></td>
<td class="ltx_td ltx_align_center" id="S5.T1.4.4.4.2">Mistral-7B</td>
<td class="ltx_td ltx_align_center" id="S5.T1.4.4.4.3">ShareGPT</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T1.4.4.4.4">UltraFeedback</td>
<td class="ltx_td ltx_align_center" id="S5.T1.4.4.4.5">43.8%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.4.4.4.6">55.8%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.4.4.4.7">48.2%</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T1.4.4.4.8">59.7%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.4.4.4.9">47.7%</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T1.4.4.4.10">55.9%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.4.4.4.11">86.8%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.4.4.4.12">79.9%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.4.4.4.13">82.0%</td>
</tr>
<tr class="ltx_tr" id="S5.T1.5.5.5">
<td class="ltx_td ltx_align_left ltx_border_r" id="S5.T1.5.5.5.1"><span class="ltx_text ltx_font_bold" id="S5.T1.5.5.5.1.1">Deita-7B-V1.0<sup class="ltx_sup" id="S5.T1.5.5.5.1.1.1"><span class="ltx_text ltx_font_medium" id="S5.T1.5.5.5.1.1.1.1">†</span></sup></span></td>
<td class="ltx_td ltx_align_center" id="S5.T1.5.5.5.2">Mistral-7B</td>
<td class="ltx_td ltx_align_center" id="S5.T1.5.5.5.3">Deita-Mix</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T1.5.5.5.4">UltraFeedback</td>
<td class="ltx_td ltx_align_center" id="S5.T1.5.5.5.5">44.6%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.5.5.5.6">56.6%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.5.5.5.7">51.9%</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T1.5.5.5.8">63.7%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.5.5.5.9">45.7%</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T1.5.5.5.10">54.3%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.5.5.5.11">86.2%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.5.5.5.12">78.6%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.5.5.5.13">80.9%</td>
</tr>
<tr class="ltx_tr" id="S5.T1.7.7.7">
<td class="ltx_td ltx_align_left ltx_border_r" id="S5.T1.6.6.6.1"><span class="ltx_text ltx_font_bold" id="S5.T1.6.6.6.1.1">Conifer-7B-DPO<sup class="ltx_sup" id="S5.T1.6.6.6.1.1.1"><span class="ltx_text ltx_font_medium" id="S5.T1.6.6.6.1.1.1.1">†</span></sup></span></td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.7.3">Mistral-7B</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.7.2">Conifer-Mix<sup class="ltx_sup" id="S5.T1.7.7.7.2.1">⋆</sup>
</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T1.7.7.7.4">UltraFeedback</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.7.5">48.1%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.7.6">59.1%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.7.7">52.3%</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T1.7.7.7.8">63.3%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.7.9">50.0%</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T1.7.7.7.10">56.2%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.7.11"><span class="ltx_text ltx_font_bold" id="S5.T1.7.7.7.11.1">87.5%</span></td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.7.12">80.0%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.7.13">82.3%</td>
</tr>
<tr class="ltx_tr" id="S5.T1.7.7.11">
<td class="ltx_td ltx_align_left ltx_border_r" id="S5.T1.7.7.11.1">-</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.11.2">Mistral-7B</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.11.3">Conifer-Mix</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T1.7.7.11.4">UltraFeedback</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.11.5">44.5%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.11.6">56.5%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.11.7">52.5%</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T1.7.7.11.8">64.3%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.11.9">58.7%</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T1.7.7.11.10">65.9%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.11.11">86.2%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.11.12">82.4%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.11.13">83.6%</td>
</tr>
<tr class="ltx_tr" id="S5.T1.7.7.12">
<td class="ltx_td ltx_align_left ltx_border_r" id="S5.T1.7.7.12.1"><span class="ltx_text ltx_font_bold" id="S5.T1.7.7.12.1.1">ECD</span></td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.12.2">Mistral-7B</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.12.3">Conifer-Mix</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T1.7.7.12.4">ECD-Conifer</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.12.5">47.9%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.12.6">59.7%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.12.7">54.9%</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T1.7.7.12.8">66.2%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.12.9">57.4%</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T1.7.7.12.10">65.4%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.12.11">86.5%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.12.12">82.4%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.12.13">83.7%</td>
</tr>
<tr class="ltx_tr" id="S5.T1.7.7.13">
<td class="ltx_td ltx_align_left ltx_border_r" id="S5.T1.7.7.13.1"><span class="ltx_text ltx_font_bold" id="S5.T1.7.7.13.1.1">ECD</span></td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.13.2">Mistral-7B</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.13.3">Conifer-Mix</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T1.7.7.13.4">ECD-FineGrained</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.13.5"><span class="ltx_text ltx_font_bold" id="S5.T1.7.7.13.5.1">52.9%</span></td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.13.6">63.5%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.13.7"><span class="ltx_text ltx_font_bold" id="S5.T1.7.7.13.7.1">59.3%</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T1.7.7.13.8"><span class="ltx_text ltx_font_bold" id="S5.T1.7.7.13.8.1">69.8%</span></td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.13.9"><span class="ltx_text ltx_font_bold" id="S5.T1.7.7.13.9.1">63.4%</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T1.7.7.13.10"><span class="ltx_text ltx_font_bold" id="S5.T1.7.7.13.10.1">70.8%</span></td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.13.11">84.3%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.13.12">82.0%</td>
<td class="ltx_td ltx_align_center" id="S5.T1.7.7.13.13">82.7%</td>
</tr>
<tr class="ltx_tr" id="S5.T1.7.7.14">
<td class="ltx_td ltx_align_left ltx_border_b ltx_border_r" id="S5.T1.7.7.14.1"><span class="ltx_text ltx_font_bold" id="S5.T1.7.7.14.1.1">ECD</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T1.7.7.14.2">Mistral-7B</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T1.7.7.14.3">Conifer-Mix</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r" id="S5.T1.7.7.14.4">ECD-FineGrained-Conifer</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T1.7.7.14.5">52.3%</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T1.7.7.14.6"><span class="ltx_text ltx_font_bold" id="S5.T1.7.7.14.6.1">63.8%</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T1.7.7.14.7">58.8%</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r" id="S5.T1.7.7.14.8">68.9%</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T1.7.7.14.9">58.6%</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r" id="S5.T1.7.7.14.10">65.4%</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T1.7.7.14.11">85.5%</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T1.7.7.14.12"><span class="ltx_text ltx_font_bold" id="S5.T1.7.7.14.12.1">85.2%</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T1.7.7.14.13"><span class="ltx_text ltx_font_bold" id="S5.T1.7.7.14.13.1">85.3%</span></td>
</tr>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 1: </span>Main results on Instruction Following benchmarks: IFEval, FollowBench, and InFoBench. Bold-face indicates the best results among the 7B models. <math alttext="\dagger" class="ltx_Math" display="inline" id="S5.T1.10.m1.1"><semantics id="S5.T1.10.m1.1b"><mo id="S5.T1.10.m1.1.1" xref="S5.T1.10.m1.1.1.cmml">†</mo><annotation-xml encoding="MathML-Content" id="S5.T1.10.m1.1c"><ci id="S5.T1.10.m1.1.1.cmml" xref="S5.T1.10.m1.1.1">†</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.T1.10.m1.1d">\dagger</annotation><annotation encoding="application/x-llamapun" id="S5.T1.10.m1.1e">†</annotation></semantics></math> indicates that the results are from the original source. <math alttext="\star" class="ltx_Math" display="inline" id="S5.T1.11.m2.1"><semantics id="S5.T1.11.m2.1b"><mo id="S5.T1.11.m2.1.1" xref="S5.T1.11.m2.1.1.cmml">⋆</mo><annotation-xml encoding="MathML-Content" id="S5.T1.11.m2.1c"><ci id="S5.T1.11.m2.1.1.cmml" xref="S5.T1.11.m2.1.1">⋆</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.T1.11.m2.1d">\star</annotation><annotation encoding="application/x-llamapun" id="S5.T1.11.m2.1e">⋆</annotation></semantics></math> denotes the mixture of the Conifer dataset with ShareGPT from the original paper <cite class="ltx_cite ltx_citemacro_citep">(Sun et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib36" title="">2024</a>)</cite>. Note that “in" abbreviates “instruction" and “pr" abreviates “prompt" in the above table, so for example “loose in" abbreviates “loose instruction accuracy". These abbreviations hold for subsequent tables as well.</figcaption>
</figure>
<figure class="ltx_table" id="S5.T2">
<table class="ltx_tabular ltx_centering ltx_align_middle" id="S5.T2.6">
<tr class="ltx_tr" id="S5.T2.6.7">
<td class="ltx_td ltx_align_left ltx_border_r" id="S5.T2.6.7.1" rowspan="2"><span class="ltx_text ltx_font_bold" id="S5.T2.6.7.1.1">Model</span></td>
<td class="ltx_td ltx_align_center" id="S5.T2.6.7.2" rowspan="2"><span class="ltx_text ltx_font_bold" id="S5.T2.6.7.2.1">Base Model</span></td>
<td class="ltx_td ltx_align_center" id="S5.T2.6.7.3" rowspan="2"><span class="ltx_text ltx_font_bold" id="S5.T2.6.7.3.1">IFT Data</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T2.6.7.4" rowspan="2"><span class="ltx_text ltx_font_bold" id="S5.T2.6.7.4.1">Preference Data</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T2.6.7.5" rowspan="2"><span class="ltx_text ltx_font_bold" id="S5.T2.6.7.5.1">MT-Bench Score</span></td>
<td class="ltx_td ltx_align_center" colspan="2" id="S5.T2.6.7.6"><span class="ltx_text ltx_font_bold" id="S5.T2.6.7.6.1">AlpacaEval</span></td>
</tr>
<tr class="ltx_tr" id="S5.T2.6.8">
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T2.6.8.1"><span class="ltx_text ltx_font_bold" id="S5.T2.6.8.1.1">LC Win-Rate</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T2.6.8.2"><span class="ltx_text ltx_font_bold" id="S5.T2.6.8.2.1">Average Length</span></td>
</tr>
<tr class="ltx_tr" id="S5.T2.1.1">
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="S5.T2.1.1.1"><span class="ltx_text ltx_font_bold" id="S5.T2.1.1.1.1">Mistral-7B-Evol-Instruct<sup class="ltx_sup" id="S5.T2.1.1.1.1.1"><span class="ltx_text ltx_font_medium" id="S5.T2.1.1.1.1.1.1">†</span></sup></span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T2.1.1.2">Mistral-7B</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T2.1.1.3">Evol-Instruct</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T2.1.1.4">-</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T2.1.1.5">6.51</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T2.1.1.6">9.4%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T2.1.1.7">982</td>
</tr>
<tr class="ltx_tr" id="S5.T2.6.9">
<td class="ltx_td ltx_align_left ltx_border_r" id="S5.T2.6.9.1"><span class="ltx_text ltx_font_bold" id="S5.T2.6.9.1.1">Conifer-7B-SFT</span></td>
<td class="ltx_td ltx_align_center" id="S5.T2.6.9.2">Mistral-7B</td>
<td class="ltx_td ltx_align_center" id="S5.T2.6.9.3">Conifer-Mix</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T2.6.9.4">-</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T2.6.9.5">6.74</td>
<td class="ltx_td ltx_align_center" id="S5.T2.6.9.6">10.0%</td>
<td class="ltx_td ltx_align_center" id="S5.T2.6.9.7">1002</td>
</tr>
<tr class="ltx_tr" id="S5.T2.2.2">
<td class="ltx_td ltx_align_left ltx_border_r" id="S5.T2.2.2.1"><span class="ltx_text ltx_font_bold" id="S5.T2.2.2.1.1">Deita-7B-v1.0<sup class="ltx_sup" id="S5.T2.2.2.1.1.1"><span class="ltx_text ltx_font_medium" id="S5.T2.2.2.1.1.1.1">†</span></sup></span></td>
<td class="ltx_td ltx_align_center" id="S5.T2.2.2.2">Mistral-7B</td>
<td class="ltx_td ltx_align_center" id="S5.T2.2.2.3">Deita-Mix</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T2.2.2.4">UltraFeedback</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T2.2.2.5"><span class="ltx_text ltx_font_bold" id="S5.T2.2.2.5.1">7.55</span></td>
<td class="ltx_td ltx_align_center" id="S5.T2.2.2.6">16.1%</td>
<td class="ltx_td ltx_align_center" id="S5.T2.2.2.7">1417</td>
</tr>
<tr class="ltx_tr" id="S5.T2.3.3">
<td class="ltx_td ltx_align_left ltx_border_r" id="S5.T2.3.3.1"><span class="ltx_text ltx_font_bold" id="S5.T2.3.3.1.1">Mistral-7B-ShareGPT-DPO<sup class="ltx_sup" id="S5.T2.3.3.1.1.1"><span class="ltx_text ltx_font_medium" id="S5.T2.3.3.1.1.1.1">†</span></sup></span></td>
<td class="ltx_td ltx_align_center" id="S5.T2.3.3.2">Mistral-7B</td>
<td class="ltx_td ltx_align_center" id="S5.T2.3.3.3">ShareGPT</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T2.3.3.4">UltraFeedback</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T2.3.3.5">7.1</td>
<td class="ltx_td ltx_align_center" id="S5.T2.3.3.6">15.1%</td>
<td class="ltx_td ltx_align_center" id="S5.T2.3.3.7">1276</td>
</tr>
<tr class="ltx_tr" id="S5.T2.5.5">
<td class="ltx_td ltx_align_left ltx_border_r" id="S5.T2.4.4.1"><span class="ltx_text ltx_font_bold" id="S5.T2.4.4.1.1">Conifer-DPO-7B<sup class="ltx_sup" id="S5.T2.4.4.1.1.1"><span class="ltx_text ltx_font_medium" id="S5.T2.4.4.1.1.1.1">†</span></sup></span></td>
<td class="ltx_td ltx_align_center" id="S5.T2.5.5.3">Mistral-7B</td>
<td class="ltx_td ltx_align_center" id="S5.T2.5.5.2">Conifer-Mix<sup class="ltx_sup" id="S5.T2.5.5.2.1">⋆</sup>
</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T2.5.5.4">UltraFeedback</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T2.5.5.5">7.25</td>
<td class="ltx_td ltx_align_center" id="S5.T2.5.5.6">17.1%</td>
<td class="ltx_td ltx_align_center" id="S5.T2.5.5.7">1253</td>
</tr>
<tr class="ltx_tr" id="S5.T2.6.6">
<td class="ltx_td ltx_align_left ltx_border_r" id="S5.T2.6.6.1"><span class="ltx_text ltx_font_bold" id="S5.T2.6.6.1.1">Zephyr-7B-beta<sup class="ltx_sup" id="S5.T2.6.6.1.1.1"><span class="ltx_text ltx_font_medium" id="S5.T2.6.6.1.1.1.1">†</span></sup></span></td>
<td class="ltx_td ltx_align_center" id="S5.T2.6.6.2">Mistral-7B</td>
<td class="ltx_td ltx_align_center" id="S5.T2.6.6.3">UltraChat</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T2.6.6.4">UltraFeedback</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T2.6.6.5">7.34</td>
<td class="ltx_td ltx_align_center" id="S5.T2.6.6.6">13.2%</td>
<td class="ltx_td ltx_align_center" id="S5.T2.6.6.7">1444</td>
</tr>
<tr class="ltx_tr" id="S5.T2.6.10">
<td class="ltx_td ltx_align_left ltx_border_r" id="S5.T2.6.10.1">-</td>
<td class="ltx_td ltx_align_center" id="S5.T2.6.10.2">Mistral-7B</td>
<td class="ltx_td ltx_align_center" id="S5.T2.6.10.3">Conifer-Mix</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T2.6.10.4">UltraFeedback</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T2.6.10.5">7.41</td>
<td class="ltx_td ltx_align_center" id="S5.T2.6.10.6">23.3%</td>
<td class="ltx_td ltx_align_center" id="S5.T2.6.10.7">1528</td>
</tr>
<tr class="ltx_tr" id="S5.T2.6.11">
<td class="ltx_td ltx_align_left ltx_border_r" id="S5.T2.6.11.1"><span class="ltx_text ltx_font_bold" id="S5.T2.6.11.1.1">ECD</span></td>
<td class="ltx_td ltx_align_center" id="S5.T2.6.11.2">Mistral-7B</td>
<td class="ltx_td ltx_align_center" id="S5.T2.6.11.3">Conifer-Mix</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T2.6.11.4">ECD-Conifer</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T2.6.11.5">7.49</td>
<td class="ltx_td ltx_align_center" id="S5.T2.6.11.6"><span class="ltx_text ltx_font_bold" id="S5.T2.6.11.6.1">25.2%</span></td>
<td class="ltx_td ltx_align_center" id="S5.T2.6.11.7">1424</td>
</tr>
<tr class="ltx_tr" id="S5.T2.6.12">
<td class="ltx_td ltx_align_left ltx_border_r" id="S5.T2.6.12.1"><span class="ltx_text ltx_font_bold" id="S5.T2.6.12.1.1">ECD</span></td>
<td class="ltx_td ltx_align_center" id="S5.T2.6.12.2">Mistral-7B</td>
<td class="ltx_td ltx_align_center" id="S5.T2.6.12.3">Conifer-Mix</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T2.6.12.4">ECD-FineGrained</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T2.6.12.5">7.35</td>
<td class="ltx_td ltx_align_center" id="S5.T2.6.12.6">22.0%</td>
<td class="ltx_td ltx_align_center" id="S5.T2.6.12.7">1327</td>
</tr>
<tr class="ltx_tr" id="S5.T2.6.13">
<td class="ltx_td ltx_align_left ltx_border_b ltx_border_r" id="S5.T2.6.13.1"><span class="ltx_text ltx_font_bold" id="S5.T2.6.13.1.1">ECD</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T2.6.13.2">Mistral-7B</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T2.6.13.3">Conifer-Mix</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r" id="S5.T2.6.13.4">ECD-FineGrained-Conifer</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r" id="S5.T2.6.13.5">7.47</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T2.6.13.6">20.6%</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T2.6.13.7">1427</td>
</tr>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 2: </span>Main results on conversational quality benchmarks: MT-Bench and AlpacaEval. <math alttext="\dagger" class="ltx_Math" display="inline" id="S5.T2.10.m1.1"><semantics id="S5.T2.10.m1.1b"><mo id="S5.T2.10.m1.1.1" xref="S5.T2.10.m1.1.1.cmml">†</mo><annotation-xml encoding="MathML-Content" id="S5.T2.10.m1.1c"><ci id="S5.T2.10.m1.1.1.cmml" xref="S5.T2.10.m1.1.1">†</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.T2.10.m1.1d">\dagger</annotation><annotation encoding="application/x-llamapun" id="S5.T2.10.m1.1e">†</annotation></semantics></math> indicates that the results are from the original paper. <math alttext="\star" class="ltx_Math" display="inline" id="S5.T2.11.m2.1"><semantics id="S5.T2.11.m2.1b"><mo id="S5.T2.11.m2.1.1" xref="S5.T2.11.m2.1.1.cmml">⋆</mo><annotation-xml encoding="MathML-Content" id="S5.T2.11.m2.1c"><ci id="S5.T2.11.m2.1.1.cmml" xref="S5.T2.11.m2.1.1">⋆</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.T2.11.m2.1d">\star</annotation><annotation encoding="application/x-llamapun" id="S5.T2.11.m2.1e">⋆</annotation></semantics></math> denotes the mixture of the Conifer dataset with ShareGPT from the original source. <math alttext="\star" class="ltx_Math" display="inline" id="S5.T2.12.m3.1"><semantics id="S5.T2.12.m3.1b"><mo id="S5.T2.12.m3.1.1" xref="S5.T2.12.m3.1.1.cmml">⋆</mo><annotation-xml encoding="MathML-Content" id="S5.T2.12.m3.1c"><ci id="S5.T2.12.m3.1.1.cmml" xref="S5.T2.12.m3.1.1">⋆</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.T2.12.m3.1d">\star</annotation><annotation encoding="application/x-llamapun" id="S5.T2.12.m3.1e">⋆</annotation></semantics></math> denotes the mixture of the Conifer dataset with ShareGPT from the original paper <cite class="ltx_cite ltx_citemacro_citep">(Sun et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib36" title="">2024</a>)</cite>.</figcaption>
</figure>
</section>
<section class="ltx_subsection" id="S5.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.2 </span>Evaluation</h3>
<div class="ltx_para" id="S5.SS2.p1">
<p class="ltx_p" id="S5.SS2.p1.1">Our primary goal is to improve the complex instruction-following capability of LLMs, which we measure with the following three benchmarks:</p>
<ul class="ltx_itemize" id="S5.I1">
<li class="ltx_item" id="S5.I1.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S5.I1.i1.p1">
<p class="ltx_p" id="S5.I1.i1.p1.1"><span class="ltx_text ltx_font_bold" id="S5.I1.i1.p1.1.1">IFEval</span> is a popular benchmark for instruction-following that measures the ability of LLMs to follow programatically checkable instructions such as “give a response that is more than 400 words" <cite class="ltx_cite ltx_citemacro_citep">(Zhou et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib50" title="">2023</a>)</cite>. It uses metrics such as prompt-level accuracy and instruction-level accuracy with a strict version that interprets the requirements very precisely while a loose version gives some leeway.</p>
</div>
</li>
<li class="ltx_item" id="S5.I1.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S5.I1.i2.p1">
<p class="ltx_p" id="S5.I1.i2.p1.1"><span class="ltx_text ltx_font_bold" id="S5.I1.i2.p1.1.1">FollowBench</span> is another instruction-following benchmark that uses GPT-4 to measure the ability of a model to follow fine-grained constraints across 5 different difficulties and types (Format, Content, Style, Situation, and Example) <cite class="ltx_cite ltx_citemacro_citep">(Jiang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib20" title="">2023b</a>)</cite>. This benchmark employs two metrics: hard satisfaction rate (HSR) and soft satisfaction rate (SSR). HSR quantifies the average frequency at which all the requirements or constraints are completely met. On the other hand, SSR calculates the average degree to which individual constraints are satisfied across all the given instructions.</p>
</div>
</li>
<li class="ltx_item" id="S5.I1.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S5.I1.i3.p1">
<p class="ltx_p" id="S5.I1.i3.p1.1"><span class="ltx_text ltx_font_bold" id="S5.I1.i3.p1.1.1">InfoBench</span> evaluates the instruction-following of LLMs by breaking down instructions into a set of fine-grained criteria and asks GPT-4 to evaluate the extent to which a model meets the criteria <cite class="ltx_cite ltx_citemacro_citep">(Qin et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib27" title="">2024</a>)</cite>.</p>
</div>
</li>
</ul>
<p class="ltx_p" id="S5.SS2.p1.2">Since conversational quality is also important in LLM applications, we also evaluate on the following benchmarks:</p>
<ul class="ltx_itemize" id="S5.I2">
<li class="ltx_item" id="S5.I2.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S5.I2.i1.p1">
<p class="ltx_p" id="S5.I2.i1.p1.1"><span class="ltx_text ltx_font_bold" id="S5.I2.i1.p1.1.1">MTBench</span> is a multi-turn benchmark that measures the conversational quality of a model. It uses GPT-4 to rate the quality of a model’s answers across two turns on a scale of 1-10 <cite class="ltx_cite ltx_citemacro_citep">(Zheng et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib49" title="">2023</a>)</cite>.</p>
</div>
</li>
<li class="ltx_item" id="S5.I2.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S5.I2.i2.p1">
<p class="ltx_p" id="S5.I2.i2.p1.1"><span class="ltx_text ltx_font_bold" id="S5.I2.i2.p1.1.1">AlpacaEval</span> is a single-turn benchmark that measures helpfulness. It uses GPT-4-Turbo to compute the win-rate against a reference model. We use the default reference model, GPT-4-Turbo, and the Length-Controlled win-rate, which has a correlation of 0.98 with ChatBot Arena <cite class="ltx_cite ltx_citemacro_citep">(Dubois et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib13" title="">2024b</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib12" title="">a</a>)</cite>.</p>
</div>
</li>
</ul>
</div>
<div class="ltx_para" id="S5.SS2.p2">
<p class="ltx_p" id="S5.SS2.p2.1">We benchmark our ECD models against large open-source scale models such as LLaMa-2-70B-Chat <cite class="ltx_cite ltx_citemacro_citep">(Touvron et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib40" title="">2023</a>)</cite> and Vicuna-13B-v1.5 <cite class="ltx_cite ltx_citemacro_citep">(Team, <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib39" title="">2023</a>)</cite>, and strong 7B models like Conifer-DPO-7B <cite class="ltx_cite ltx_citemacro_citep">(Sun et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib36" title="">2024</a>)</cite>, Deita-7B-v1.0 <cite class="ltx_cite ltx_citemacro_citep">(Liu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib22" title="">2023</a>)</cite>, Mistral-7B-Evol-Instruct <cite class="ltx_cite ltx_citemacro_citep">(Xu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib45" title="">2023</a>)</cite>, Mistral-7B-ShareGPT-DPO <cite class="ltx_cite ltx_citemacro_citep">(Sun et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib36" title="">2024</a>)</cite>, and Zephyr-7B-beta <cite class="ltx_cite ltx_citemacro_citep">(Tunstall et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib41" title="">2023</a>)</cite>.<span class="ltx_note ltx_role_footnote" id="footnote7"><sup class="ltx_note_mark">7</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">7</sup><span class="ltx_tag ltx_tag_note">7</span>For the models Mistral-7B-Evol-Instruct and Mistral-7B-ShareGPT-DPO, we report the evaluation numbers given in <cite class="ltx_cite ltx_citemacro_cite">Sun et al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib36" title="">2024</a>)</cite>.</span></span></span></p>
</div>
</section>
<section class="ltx_subsection" id="S5.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.3 </span>Results</h3>
<div class="ltx_para" id="S5.SS3.p1">
<p class="ltx_p" id="S5.SS3.p1.1">Our ECD models achieve SOTA performance at the 7B scale for complex instruction-following. For example, consider our ECD model trained on ECD-FineGrained-Conifer. Table <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#S5.T1" title="Table 1 ‣ 5.1 Models and Datasets ‣ 5 Experiments ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_tag">1</span></a> shows that it outperforms Conifer-7B-DPO, the latest 7B SOTA in instruction-following, on each metric in IFEval by a substantial margin, improving loose prompt accuracy from 52.3% to 59.3% and loose instruction accuracy from 63.3% to 69.8%, and achieves similar improvements on FollowBench and InfoBench. Similarly, the ECD on ECD-Finegrained-Conifer improves over its initialization Conifer-7B-SFT, improving for example on loose prompt accuracy by over 10pp and even shows competitive performance with LLaMa-2-70B-Chat. ECD-FineGrained-Conifer achieves particularly strong performance on InfoBench Hard, indicating the strength of ECD in improving instruction-following for particularly difficult instructions. While here we discuss specifically ECD-FineGrained-Conifer, these trends uphold across our three ECD data mixtures, ECD-FineGrained, ECD-Conifer, and ECD-FineGrained-Conifer, indicating the robustness of our approach.</p>
</div>
<div class="ltx_para" id="S5.SS3.p2">
<p class="ltx_p" id="S5.SS3.p2.1">Our ECD models also achieve strong performance on the conversational quality benchmarks: MT-Bench and AlpacaEval. For example, consider ECD-Conifer. It achieves an MT-Bench score of 7.49 and and a length-controlled AlpacaEval score of 25.2%. These are large improvements in comparison to the initialized IFT model Conifer-7B-SFT and the prior SOTA in instruction-following 7B models, Conifer-7B-DPO.
As this trend holds across all three ECD models, our data mixture recipe consistently produces SOTA 7B models for complex instruction-following while maintaining strong conversational quality.</p>
</div>
<figure class="ltx_table" id="S5.T3">
<table class="ltx_tabular ltx_centering ltx_align_middle" id="S5.T3.1">
<tr class="ltx_tr" id="S5.T3.1.1">
<td class="ltx_td ltx_align_center" id="S5.T3.1.1.1" rowspan="2"><span class="ltx_text ltx_font_bold" id="S5.T3.1.1.1.1">Base Model</span></td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.1.2" rowspan="2"><span class="ltx_text ltx_font_bold" id="S5.T3.1.1.2.1">IFT Data</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T3.1.1.3" rowspan="2"><span class="ltx_text ltx_font_bold" id="S5.T3.1.1.3.1">Preference Data</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" colspan="4" id="S5.T3.1.1.4"><span class="ltx_text ltx_font_bold" id="S5.T3.1.1.4.1">IFEval</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" colspan="2" id="S5.T3.1.1.5"><span class="ltx_text ltx_font_bold" id="S5.T3.1.1.5.1">FollowBench</span></td>
<td class="ltx_td ltx_align_center" colspan="3" id="S5.T3.1.1.6"><span class="ltx_text ltx_font_bold" id="S5.T3.1.1.6.1">InfoBench</span></td>
</tr>
<tr class="ltx_tr" id="S5.T3.1.2">
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.1.2.1"><span class="ltx_text ltx_font_bold" id="S5.T3.1.2.1.1">strict pr</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.1.2.2"><span class="ltx_text ltx_font_bold" id="S5.T3.1.2.2.1">strict in</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.1.2.3"><span class="ltx_text ltx_font_bold" id="S5.T3.1.2.3.1">loose pr</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T3.1.2.4"><span class="ltx_text ltx_font_bold" id="S5.T3.1.2.4.1">loose in</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.1.2.5"><span class="ltx_text ltx_font_bold" id="S5.T3.1.2.5.1">HSR</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T3.1.2.6"><span class="ltx_text ltx_font_bold" id="S5.T3.1.2.6.1">SSR</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.1.2.7"><span class="ltx_text ltx_font_bold" id="S5.T3.1.2.7.1">Easy</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.1.2.8"><span class="ltx_text ltx_font_bold" id="S5.T3.1.2.8.1">Hard</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.1.2.9"><span class="ltx_text ltx_font_bold" id="S5.T3.1.2.9.1">Overall</span></td>
</tr>
<tr class="ltx_tr" id="S5.T3.1.3">
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.1.3.1">Mistral-7B</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.1.3.2">Conifer-Mix</td>
<td class="ltx_td ltx_border_r ltx_border_t" id="S5.T3.1.3.3"></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.1.3.4">45.1%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.1.3.5">58.0%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.1.3.6">48.6%</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T3.1.3.7">61.2%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.1.3.8">49.7%</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T3.1.3.9">60.4%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.1.3.10">85.9%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.1.3.11">80.6%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.1.3.12">82.2%</td>
</tr>
<tr class="ltx_tr" id="S5.T3.1.4">
<td class="ltx_td ltx_align_center" id="S5.T3.1.4.1">Mistral-7B</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.4.2">Conifer-Mix</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T3.1.4.3">ECD-FineGrained-Pure</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.4.4">58.4%</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.4.5">67.5%</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.4.6">62.7%</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T3.1.4.7">71.8%</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.4.8">57.0%</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T3.1.4.9">65.2%</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.4.10">84.3%</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.4.11">79.2%</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.4.12">80.8%</td>
</tr>
<tr class="ltx_tr" id="S5.T3.1.5">
<td class="ltx_td ltx_align_center" id="S5.T3.1.5.1">Mistral-7B</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.5.2">Conifer-Mix</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T3.1.5.3">ECD-Conifer-Pure</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.5.4">53.0%</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.5.5">64.3%</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.5.6">57.7%</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T3.1.5.7">69.1%</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.5.8"><span class="ltx_text ltx_font_bold" id="S5.T3.1.5.8.1">57.8%</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T3.1.5.9">64.4%</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.5.10"><span class="ltx_text ltx_font_bold" id="S5.T3.1.5.10.1">88.4%</span></td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.5.11"><span class="ltx_text ltx_font_bold" id="S5.T3.1.5.11.1">83.8%</span></td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.5.12"><span class="ltx_text ltx_font_bold" id="S5.T3.1.5.12.1">85.2%</span></td>
</tr>
<tr class="ltx_tr" id="S5.T3.1.6">
<td class="ltx_td ltx_align_center" id="S5.T3.1.6.1">Mistral-7B</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.6.2">Conifer-Mix</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T3.1.6.3">ECD-FineGrained-Conifer-Pure</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.6.4"><span class="ltx_text ltx_font_bold" id="S5.T3.1.6.4.1">63.8%</span></td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.6.5"><span class="ltx_text ltx_font_bold" id="S5.T3.1.6.5.1">72.5%</span></td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.6.6"><span class="ltx_text ltx_font_bold" id="S5.T3.1.6.6.1">67.5%</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T3.1.6.7"><span class="ltx_text ltx_font_bold" id="S5.T3.1.6.7.1">76.1%</span></td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.6.8">57.5%</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T3.1.6.9"><span class="ltx_text ltx_font_bold" id="S5.T3.1.6.9.1">65.9%</span></td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.6.10">86.2%</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.6.11">80.7%</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.6.12">82.4%</td>
</tr>
<tr class="ltx_tr" id="S5.T3.1.7">
<td class="ltx_td ltx_align_center" id="S5.T3.1.7.1">Mistral-7B</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.7.2">Conifer-Mix</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T3.1.7.3">ShareGPT-RLAIF</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.7.4">35.9%</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.7.5">48.4%</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.7.6">47.0%</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T3.1.7.7">59.0%</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.7.8">56.0%</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T3.1.7.9">65.4%</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.7.10">85.2%</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.7.11">79.3%</td>
<td class="ltx_td ltx_align_center" id="S5.T3.1.7.12">81.1%</td>
</tr>
<tr class="ltx_tr" id="S5.T3.1.8">
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T3.1.8.1">Mistral-7B</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T3.1.8.2">Conifer-Mix</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r" id="S5.T3.1.8.3">ShareGPT-RLCD</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T3.1.8.4">45.3%</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T3.1.8.5">56.7%</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T3.1.8.6">49.5%</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r" id="S5.T3.1.8.7">60.1%</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T3.1.8.8">50.7%</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r" id="S5.T3.1.8.9">62.2%</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T3.1.8.10">85.2%</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T3.1.8.11">79.6%</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T3.1.8.12">81.3%</td>
</tr>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 3: </span>Main table on Instruction Following benchmarks comparing ECD, RLCD, and RLAIF.</figcaption>
</figure>
<figure class="ltx_table" id="S5.T4">
<table class="ltx_tabular ltx_centering ltx_align_middle" id="S5.T4.1">
<tr class="ltx_tr" id="S5.T4.1.1">
<td class="ltx_td ltx_align_center" id="S5.T4.1.1.1" rowspan="2"><span class="ltx_text ltx_font_bold" id="S5.T4.1.1.1.1">Base Model</span></td>
<td class="ltx_td ltx_align_center" id="S5.T4.1.1.2" rowspan="2"><span class="ltx_text ltx_font_bold" id="S5.T4.1.1.2.1">IFT Data</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T4.1.1.3" rowspan="2"><span class="ltx_text ltx_font_bold" id="S5.T4.1.1.3.1">Preference Data</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T4.1.1.4" rowspan="2"><span class="ltx_text ltx_font_bold" id="S5.T4.1.1.4.1">MT-Bench Score</span></td>
<td class="ltx_td ltx_align_center" colspan="2" id="S5.T4.1.1.5"><span class="ltx_text ltx_font_bold" id="S5.T4.1.1.5.1">AlpacaEval</span></td>
</tr>
<tr class="ltx_tr" id="S5.T4.1.2">
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T4.1.2.1"><span class="ltx_text ltx_font_bold" id="S5.T4.1.2.1.1">LC Win-Rate</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T4.1.2.2"><span class="ltx_text ltx_font_bold" id="S5.T4.1.2.2.1">Average Length</span></td>
</tr>
<tr class="ltx_tr" id="S5.T4.1.3">
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T4.1.3.1">Mistral-7B</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T4.1.3.2">Conifer-Mix</td>
<td class="ltx_td ltx_border_r ltx_border_t" id="S5.T4.1.3.3"></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T4.1.3.4">6.74</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T4.1.3.5">10.0%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T4.1.3.6">1002</td>
</tr>
<tr class="ltx_tr" id="S5.T4.1.4">
<td class="ltx_td ltx_align_center" id="S5.T4.1.4.1">Mistral-7B</td>
<td class="ltx_td ltx_align_center" id="S5.T4.1.4.2">Conifer-Mix</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T4.1.4.3">ECD-FineGrained-Pure</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T4.1.4.4">6.61</td>
<td class="ltx_td ltx_align_center" id="S5.T4.1.4.5">10.4%</td>
<td class="ltx_td ltx_align_center" id="S5.T4.1.4.6">875</td>
</tr>
<tr class="ltx_tr" id="S5.T4.1.5">
<td class="ltx_td ltx_align_center" id="S5.T4.1.5.1">Mistral-7B</td>
<td class="ltx_td ltx_align_center" id="S5.T4.1.5.2">Conifer-Mix</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T4.1.5.3">ECD-Conifer-Pure</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T4.1.5.4">6.24</td>
<td class="ltx_td ltx_align_center" id="S5.T4.1.5.5"><span class="ltx_text ltx_font_bold" id="S5.T4.1.5.5.1">14.5%</span></td>
<td class="ltx_td ltx_align_center" id="S5.T4.1.5.6">973</td>
</tr>
<tr class="ltx_tr" id="S5.T4.1.6">
<td class="ltx_td ltx_align_center" id="S5.T4.1.6.1">Mistral-7B</td>
<td class="ltx_td ltx_align_center" id="S5.T4.1.6.2">Conifer-Mix</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T4.1.6.3">ECD-FineGrained-Conifer-Pure</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T4.1.6.4">6.61</td>
<td class="ltx_td ltx_align_center" id="S5.T4.1.6.5">10.4%</td>
<td class="ltx_td ltx_align_center" id="S5.T4.1.6.6">834</td>
</tr>
<tr class="ltx_tr" id="S5.T4.1.7">
<td class="ltx_td ltx_align_center" id="S5.T4.1.7.1">Mistral-7B</td>
<td class="ltx_td ltx_align_center" id="S5.T4.1.7.2">Conifer-Mix</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T4.1.7.3">ShareGPT-RLAIF</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T4.1.7.4"><span class="ltx_text ltx_font_bold" id="S5.T4.1.7.4.1">6.87</span></td>
<td class="ltx_td ltx_align_center" id="S5.T4.1.7.5">10.2%</td>
<td class="ltx_td ltx_align_center" id="S5.T4.1.7.6">1300</td>
</tr>
<tr class="ltx_tr" id="S5.T4.1.8">
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T4.1.8.1">Mistral-7B</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T4.1.8.2">Conifer-Mix</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r" id="S5.T4.1.8.3">ShareGPT-RLCD</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r" id="S5.T4.1.8.4">6.81</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T4.1.8.5">10.4%</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T4.1.8.6">1075</td>
</tr>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 4: </span>Main table on conversational quality benchmarks comparing ECD, RLCD, and RLAIF.</figcaption>
</figure>
<figure class="ltx_table" id="S5.T5">
<table class="ltx_tabular ltx_centering ltx_align_middle" id="S5.T5.1">
<tr class="ltx_tr" id="S5.T5.1.1">
<td class="ltx_td ltx_align_left" id="S5.T5.1.1.1" rowspan="2"><span class="ltx_text ltx_font_bold" id="S5.T5.1.1.1.1">Model</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T5.1.1.2" rowspan="2"><span class="ltx_text ltx_font_bold" id="S5.T5.1.1.2.1">Final Stage</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" colspan="4" id="S5.T5.1.1.3"><span class="ltx_text ltx_font_bold" id="S5.T5.1.1.3.1">IFEval</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" colspan="2" id="S5.T5.1.1.4"><span class="ltx_text ltx_font_bold" id="S5.T5.1.1.4.1">FollowBench</span></td>
<td class="ltx_td ltx_align_center" colspan="3" id="S5.T5.1.1.5"><span class="ltx_text ltx_font_bold" id="S5.T5.1.1.5.1">InfoBench</span></td>
</tr>
<tr class="ltx_tr" id="S5.T5.1.2">
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T5.1.2.1"><span class="ltx_text ltx_font_bold" id="S5.T5.1.2.1.1">strict pr</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T5.1.2.2"><span class="ltx_text ltx_font_bold" id="S5.T5.1.2.2.1">strict in</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T5.1.2.3"><span class="ltx_text ltx_font_bold" id="S5.T5.1.2.3.1">loose pr</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T5.1.2.4"><span class="ltx_text ltx_font_bold" id="S5.T5.1.2.4.1">loose in</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T5.1.2.5"><span class="ltx_text ltx_font_bold" id="S5.T5.1.2.5.1">HSR</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T5.1.2.6"><span class="ltx_text ltx_font_bold" id="S5.T5.1.2.6.1">SSR</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T5.1.2.7"><span class="ltx_text ltx_font_bold" id="S5.T5.1.2.7.1">Easy</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T5.1.2.8"><span class="ltx_text ltx_font_bold" id="S5.T5.1.2.8.1">Hard</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T5.1.2.9"><span class="ltx_text ltx_font_bold" id="S5.T5.1.2.9.1">Overall</span></td>
</tr>
<tr class="ltx_tr" id="S5.T5.1.3">
<td class="ltx_td ltx_align_left ltx_border_t" id="S5.T5.1.3.1"><span class="ltx_text ltx_font_bold" id="S5.T5.1.3.1.1">Conifer-7B-SFT</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T5.1.3.2">SFT</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T5.1.3.3">45.1%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T5.1.3.4">58.0%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T5.1.3.5">48.6%</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T5.1.3.6">61.2%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T5.1.3.7">49.7%</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T5.1.3.8">60.4%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T5.1.3.9"><span class="ltx_text ltx_font_bold" id="S5.T5.1.3.9.1">85.9%</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T5.1.3.10">80.6%</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S5.T5.1.3.11">82.2%</td>
</tr>
<tr class="ltx_tr" id="S5.T5.1.4">
<td class="ltx_td ltx_align_left" id="S5.T5.1.4.1"><span class="ltx_text ltx_font_bold" id="S5.T5.1.4.1.1">ECD-FineGrained-SFT</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T5.1.4.2">SFT</td>
<td class="ltx_td ltx_align_center" id="S5.T5.1.4.3">44.5%</td>
<td class="ltx_td ltx_align_center" id="S5.T5.1.4.4">56.2%</td>
<td class="ltx_td ltx_align_center" id="S5.T5.1.4.5">49.0%</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T5.1.4.6">60.0%</td>
<td class="ltx_td ltx_align_center" id="S5.T5.1.4.7">42.0%</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S5.T5.1.4.8">57.2%</td>
<td class="ltx_td ltx_align_center" id="S5.T5.1.4.9">80.7%</td>
<td class="ltx_td ltx_align_center" id="S5.T5.1.4.10">74.2%</td>
<td class="ltx_td ltx_align_right" id="S5.T5.1.4.11">76.2%</td>
</tr>
<tr class="ltx_tr" id="S5.T5.1.5">
<td class="ltx_td ltx_align_left ltx_border_b" id="S5.T5.1.5.1"><span class="ltx_text ltx_font_bold" id="S5.T5.1.5.1.1">ECD-FineGrained</span></td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r" id="S5.T5.1.5.2">DPO</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T5.1.5.3"><span class="ltx_text ltx_font_bold" id="S5.T5.1.5.3.1">52.9%</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T5.1.5.4"><span class="ltx_text ltx_font_bold" id="S5.T5.1.5.4.1">63.5%</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T5.1.5.5"><span class="ltx_text ltx_font_bold" id="S5.T5.1.5.5.1">59.3%</span></td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r" id="S5.T5.1.5.6"><span class="ltx_text ltx_font_bold" id="S5.T5.1.5.6.1">69.8%</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T5.1.5.7"><span class="ltx_text ltx_font_bold" id="S5.T5.1.5.7.1">58.6%</span></td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r" id="S5.T5.1.5.8"><span class="ltx_text ltx_font_bold" id="S5.T5.1.5.8.1">70.8%</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T5.1.5.9">84.3%</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T5.1.5.10"><span class="ltx_text ltx_font_bold" id="S5.T5.1.5.10.1">82.0%</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S5.T5.1.5.11"><span class="ltx_text ltx_font_bold" id="S5.T5.1.5.11.1">82.7%</span></td>
</tr>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 5: </span>Main table on Instruction Following benchmarks, IFEval and FollowBench, comparing DPO and SFT.</figcaption>
</figure>
<div class="ltx_para" id="S5.SS3.p3">
<p class="ltx_p" id="S5.SS3.p3.1"><span class="ltx_text ltx_font_bold" id="S5.SS3.p3.1.1">Among ECD, RLAIF, and RLCD, which is the most effective technique for improving complex instruction-following?</span> We also investigated how ECD compares against RLAIF and RLCD for improving instruction-following. To this end, we generated RLAIF and RLCD data<span class="ltx_note ltx_role_footnote" id="footnote8"><sup class="ltx_note_mark">8</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">8</sup><span class="ltx_tag ltx_tag_note">8</span>We used Claude 2 to be consistent with ECD-FineGrained.</span></span></span> on top of ShareGPT prompts and refer to these as ShareGPT-RLAIF and ShareGPT-RLCD, respectively. Prompts used in the generation can be found in the Appendix <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#A3" title="Appendix C Prompts Used ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_tag">C</span></a>.</p>
</div>
<div class="ltx_para" id="S5.SS3.p4">
<p class="ltx_p" id="S5.SS3.p4.1">In order to perform a clean ablation, we used three further data mixtures which do not mix UltraFeedback in: (i) ECD-FineGrained-Pure, all 104,499 preference pairs from the ECD version of the FineGrained synthetic data generation approach, (ii) ECD-Conifer-Pure, the ECD version of the Conifer dataset, and (iii) ECD-FineGrained-Conifer-Pure, a concatenation of ECD-FineGrained and ECD-Conifer-Pure. Since ShareGPT-RLAIF, ShareGPT-RLCD, and ECD-FineGrained-Pure all use the same ShareGPT instructions as seeds and Claude 2 as the teacher LLM, we can directly compare the performance of the models trained on these three data mixtures to assess the effectiveness of ECD, RLAIF, and RLCD.
</p>
</div>
<div class="ltx_para" id="S5.SS3.p5">
<p class="ltx_p" id="S5.SS3.p5.1">While ECD methods show a robust ability to improve instruction-following, RLAIF and RLCD show uneven performance. Table <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#S5.T3" title="Table 3 ‣ 5.3 Results ‣ 5 Experiments ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_tag">3</span></a> shows that ECD improves over the IFT initialization on the instruction-following benchmarks. For example, the ECD-FineGrained-Pure mixture achieves a loose prompt accuracy of 62.7% and the ECD-FineGrained-Conifer-Pure mixture achieves a loose prompt accuracy of 67.5% in comparison to 48.6% for its initialization Conifer-7B-SFT. On the other hand, RLAIF and RLCD show no improvement on IFEval and InfoBench while RLAIF only shows some marginal improvement over its initialization Conifer-7B-SFT on FollowBench.</p>
</div>
<div class="ltx_para" id="S5.SS3.p6">
<p class="ltx_p" id="S5.SS3.p6.1">On the other hand, for conversational quality, we observe in Table <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#S5.T4" title="Table 4 ‣ 5.3 Results ‣ 5 Experiments ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_tag">4</span></a> that ECD by itself yields mostly no improvement, while RLCD and RLAIF show slight improvements. This finding highlights that the present instantiation of ECD is primarily a method for improving instruction-following.</p>
</div>
<div class="ltx_para" id="S5.SS3.p7">
<p class="ltx_p" id="S5.SS3.p7.1"><span class="ltx_text ltx_font_bold" id="S5.SS3.p7.1.1">What is the impact of using SFT instead of DPO?</span> We investigated the importance of DPO for the instruction-following ability of our models. In particular, we performed an epoch of SFT instead of DPO on positive respones from ECD-FineGrained, denoted ECD-FineGrained-SFT. Table <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#S5.T5" title="Table 5 ‣ 5.3 Results ‣ 5 Experiments ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_tag">5</span></a> shows that SFT on ECD-FineGrained underperforms its initialization Conifer-7B-SFT, while DPO on the same data makes strong improvements. This indicates PFT with contrastive learning is a more effective method for improving complex instruction-following, compared to SFT.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S6">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">6 </span>Conclusion</h2>
<div class="ltx_para" id="S6.p1">
<p class="ltx_p" id="S6.p1.1">In this paper, we proposed a novel approach to generate high-quality synthetic preference data for complex instruction-following, Evolutionary Contrastive Distillation. Using this approach, we trained models at the 7B scale that achieved state-of-the-art performance in instruction-following as measured by benchmarks such as IFEval, FollowBench, and InfoBench and achieved competitive performance on conversational quality benchmarks like AlpacaEval and MT-Bench. For example, one of our checkpoints improves over the prior SOTA, Conifer-7B-DPO, at the 7B scale on IFEval loose prompt accuracy by 7pp while also achieving a score of 7.35 on MT-Bench and a length-controlled win-rate against GPT-4-turbo of 22%.</p>
</div>
<div class="ltx_para" id="S6.p2">
<p class="ltx_p" id="S6.p2.1">Due to the generality of our approach, we believe that there are opportunities to apply it to many other domains beyond complex instruction-following. Indeed, recent research has already produced evolved IFT data for mathematics and coding <cite class="ltx_cite ltx_citemacro_citep">(Luo et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib23" title="">2023a</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib24" title="">b</a>)</cite> with impressive results and our approach offers a way to convert these datasets into preference data so that models can learn from both positive and negative feedback. As part of our future work, we plan to explore these other domains.</p>
</div>
</section>
<section class="ltx_section" id="S7">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">7 </span>Limitations</h2>
<div class="ltx_para" id="S7.p1">
<p class="ltx_p" id="S7.p1.1">In this work, we focused on improving complex instruction-following capability.
However, we envision that ECD can also be useful at improving other LLM capabilities,
such as tool usage <cite class="ltx_cite ltx_citemacro_citep">(Schick et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib32" title="">2023</a>)</cite>, reasoning <cite class="ltx_cite ltx_citemacro_citep">(Talmor et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib38" title="">2018</a>)</cite>, math <cite class="ltx_cite ltx_citemacro_citep">(Cobbe et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib7" title="">2021</a>)</cite>, etc.
Broadening the definition of our evolutionary process to target a broader set of
capabilities is left as a future work.</p>
</div>
<div class="ltx_para" id="S7.p2">
<p class="ltx_p" id="S7.p2.1">Also, in this work, we focused on having a dependency on a teacher LLM to evolve instructions and generate responses.
Therefore, the resulting model is likely to inherit various types of bias the teacher LLM has.
However, it is conceivable the teacher model in ECD could be replaced with the student
model itself. Such self-improvement <cite class="ltx_cite ltx_citemacro_citep">(Yuan et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib48" title="">2024</a>)</cite> will remove dependency
on teacher models, and open up an opportunity to surpass them. Future work is required to determine whether it is possible to remove the dependency on a strong teacher LLM.</p>
</div>
</section>
<section class="ltx_section" id="S8">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">8 </span>Ethical Considerations</h2>
<div class="ltx_para" id="S8.p1">
<p class="ltx_p" id="S8.p1.1">The focus of our work is on improving the complex instruction-following capability of LLMs, a fundamental capability.
The ability to faithfully execute instructions from humans will
reduce the risk of LLMs undertaking unintended actions, promoting safer uses of LLMs.
On the flip side, this can increase the risk of malicious actors
using LLMs towards pernicious ends. A fruitful direction for future research is to continue using alignment to improve complex instruction-following while enhancing the model’s capability to refrain from executing harmful tasks.</p>
</div>
</section>
<section class="ltx_bibliography" id="bib">
<h2 class="ltx_title ltx_title_bibliography">References</h2>
<ul class="ltx_biblist">
<li class="ltx_bibitem" id="bib.bib1">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Azar et al. (2023)</span>
<span class="ltx_bibblock">
Mohammad Gheshlaghi Azar, Mark Rowland, Bilal Piot, Daniel Guo, Daniele
Calandriello, Michal Valko, and Rémi Munos. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2310.12036" title="">A general theoretical
paradigm to understand learning from human preferences</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib1.1.1">Preprint</em>, arXiv:2310.12036.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib2">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Bai et al. (2022a)</span>
<span class="ltx_bibblock">
Yuntao Bai, Andy Jones, Kamal Ndousse, Amanda Askell, Anna Chen, Nova DasSarma,
Dawn Drain, Stanislav Fort, Deep Ganguli, Tom Henighan, et al.
2022a.

</span>
<span class="ltx_bibblock">Training a helpful and harmless assistant with reinforcement learning
from human feedback.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib2.1.1">arXiv preprint arXiv:2204.05862</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib3">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Bai et al. (2022b)</span>
<span class="ltx_bibblock">
Yuntao Bai, Saurav Kadavath, Sandipan Kundu, Amanda Askell, Jackson Kernion,
Andy Jones, Anna Chen, Anna Goldie, Azalia Mirhoseini, Cameron McKinnon,
et al. 2022b.

</span>
<span class="ltx_bibblock">Constitutional ai: Harmlessness from ai feedback.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib3.1.1">arXiv preprint arXiv:2212.08073</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib4">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Chi et al. (2020)</span>
<span class="ltx_bibblock">
Zewen Chi, Li Dong, Furu Wei, Nan Yang, Saksham Singhal, Wenhui Wang, Xia Song,
Xian-Ling Mao, Heyan Huang, and Ming Zhou. 2020.

</span>
<span class="ltx_bibblock">Infoxlm: An information-theoretic framework for cross-lingual
language model pre-training.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib4.1.1">arXiv preprint arXiv:2007.07834</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib5">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Chopra et al. (2005)</span>
<span class="ltx_bibblock">
Sumit Chopra, Raia Hadsell, and Yann LeCun. 2005.

</span>
<span class="ltx_bibblock">Learning a similarity metric discriminatively, with application to
face verification.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib5.1.1">2005 IEEE computer society conference on computer vision and
pattern recognition (CVPR’05)</em>, volume 1, pages 539–546. IEEE.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib6">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Christiano et al. (2017)</span>
<span class="ltx_bibblock">
Paul F Christiano, Jan Leike, Tom Brown, Miljan Martic, Shane Legg, and Dario
Amodei. 2017.

</span>
<span class="ltx_bibblock">Deep reinforcement learning from human preferences.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib6.1.1">Advances in neural information processing systems</em>, 30.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib7">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Cobbe et al. (2021)</span>
<span class="ltx_bibblock">
Karl Cobbe, Vineet Kosaraju, Mohammad Bavarian, Mark Chen, Heewoo Jun, Lukasz
Kaiser, Matthias Plappert, Jerry Tworek, Jacob Hilton, Reiichiro Nakano,
Christopher Hesse, and John Schulman. 2021.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2110.14168" title="">Training verifiers to solve
math word problems</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib7.1.1">Preprint</em>, arXiv:2110.14168.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib8">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Cui et al. (2023)</span>
<span class="ltx_bibblock">
Ganqu Cui, Lifan Yuan, Ning Ding, Guanming Yao, Wei Zhu, Yuan Ni, Guotong Xie,
Zhiyuan Liu, and Maosong Sun. 2023.

</span>
<span class="ltx_bibblock">Ultrafeedback: Boosting language models with high-quality feedback.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib8.1.1">arXiv preprint arXiv:2310.01377</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib9">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Developers (2024a)</span>
<span class="ltx_bibblock">
LangChain Developers. 2024a.

</span>
<span class="ltx_bibblock">Langchain.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_url ltx_font_typewriter" href="https://github.com/langchain-ai/langchain" title="">https://github.com/langchain-ai/langchain</a>.

</span>
<span class="ltx_bibblock">Accessed: 2024-05-28.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib10">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Developers (2024b)</span>
<span class="ltx_bibblock">
LlamaIndex Developers. 2024b.

</span>
<span class="ltx_bibblock">Llamaindex.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_url ltx_font_typewriter" href="https://docs.llamaindex.ai/en/stable/#community" title="">https://docs.llamaindex.ai/en/stable/#community</a>.

</span>
<span class="ltx_bibblock">Accessed: 2024-05-28.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib11">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ding et al. (2023)</span>
<span class="ltx_bibblock">
Ning Ding, Yulin Chen, Bokai Xu, Yujia Qin, Zhi Zheng, Shengding Hu, Zhiyuan
Liu, Maosong Sun, and Bowen Zhou. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2305.14233" title="">Enhancing chat language
models by scaling high-quality instructional conversations</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib11.1.1">Preprint</em>, arXiv:2305.14233.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib12">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Dubois et al. (2024a)</span>
<span class="ltx_bibblock">
Yann Dubois, Balázs Galambosi, Percy Liang, and Tatsunori B Hashimoto.
2024a.

</span>
<span class="ltx_bibblock">Length-controlled alpacaeval: A simple way to debias automatic
evaluators.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib12.1.1">arXiv preprint arXiv:2404.04475</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib13">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Dubois et al. (2024b)</span>
<span class="ltx_bibblock">
Yann Dubois, Chen Xuechen Li, Rohan Taori, Tianyi Zhang, Ishaan Gulrajani,
Jimmy Ba, Carlos Guestrin, Percy S Liang, and Tatsunori B Hashimoto.
2024b.

</span>
<span class="ltx_bibblock">Alpacafarm: A simulation framework for methods that learn from human
feedback.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib13.1.1">Advances in Neural Information Processing Systems</em>, 36.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib14">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ethayarajh et al. (2024)</span>
<span class="ltx_bibblock">
Kawin Ethayarajh, Winnie Xu, Niklas Muennighoff, Dan Jurafsky, and Douwe Kiela.
2024.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2402.01306" title="">Kto: Model alignment as
prospect theoretic optimization</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib14.1.1">Preprint</em>, arXiv:2402.01306.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib15">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Hadsell et al. (2006)</span>
<span class="ltx_bibblock">
Raia Hadsell, Sumit Chopra, and Yann LeCun. 2006.

</span>
<span class="ltx_bibblock">Dimensionality reduction by learning an invariant mapping.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib15.1.1">2006 IEEE computer society conference on computer vision and
pattern recognition (CVPR’06)</em>, volume 2, pages 1735–1742. IEEE.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib16">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">He et al. (2020)</span>
<span class="ltx_bibblock">
Kaiming He, Haoqi Fan, Yuxin Wu, Saining Xie, and Ross Girshick. 2020.

</span>
<span class="ltx_bibblock">Momentum contrast for unsupervised visual representation learning.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib16.1.1">Proceedings of the IEEE/CVF conference on computer vision
and pattern recognition</em>, pages 9729–9738.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib17">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Hong et al. (2024)</span>
<span class="ltx_bibblock">
Jiwoo Hong, Noah Lee, and James Thorne. 2024.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2403.07691" title="">Orpo: Monolithic preference
optimization without reference model</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib17.1.1">Preprint</em>, arXiv:2403.07691.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib18">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ivison et al. (2023)</span>
<span class="ltx_bibblock">
Hamish Ivison, Yizhong Wang, Valentina Pyatkin, Nathan Lambert, Matthew Peters,
Pradeep Dasigi, Joel Jang, David Wadden, Noah A Smith, Iz Beltagy, et al.
2023.

</span>
<span class="ltx_bibblock">Camels in a changing climate: Enhancing lm adaptation with tulu 2.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib18.1.1">arXiv preprint arXiv:2311.10702</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib19">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Jiang et al. (2023a)</span>
<span class="ltx_bibblock">
Albert Q. Jiang, Alexandre Sablayrolles, Arthur Mensch, Chris Bamford,
Devendra Singh Chaplot, Diego de las Casas, Florian Bressand, Gianna Lengyel,
Guillaume Lample, Lucile Saulnier, Lélio Renard Lavaud, Marie-Anne Lachaux,
Pierre Stock, Teven Le Scao, Thibaut Lavril, Thomas Wang, Timothée Lacroix,
and William El Sayed. 2023a.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2310.06825" title="">Mistral 7b</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib19.1.1">Preprint</em>, arXiv:2310.06825.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib20">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Jiang et al. (2023b)</span>
<span class="ltx_bibblock">
Yuxin Jiang, Yufei Wang, Xingshan Zeng, Wanjun Zhong, Liangyou Li, Fei Mi,
Lifeng Shang, Xin Jiang, Qun Liu, and Wei Wang. 2023b.

</span>
<span class="ltx_bibblock">Followbench: A multi-level fine-grained constraints following
benchmark for large language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib20.1.1">arXiv preprint arXiv:2310.20410</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib21">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lee et al. (2023)</span>
<span class="ltx_bibblock">
Harrison Lee, Samrat Phatale, Hassan Mansoor, Kellie Lu, Thomas Mesnard, Colton
Bishop, Victor Carbune, and Abhinav Rastogi. 2023.

</span>
<span class="ltx_bibblock">Rlaif: Scaling reinforcement learning from human feedback with ai
feedback.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib21.1.1">arXiv preprint arXiv:2309.00267</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib22">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Liu et al. (2023)</span>
<span class="ltx_bibblock">
Wei Liu, Weihao Zeng, Keqing He, Yong Jiang, and Junxian He. 2023.

</span>
<span class="ltx_bibblock">What makes good data for alignment? a comprehensive study of
automatic data selection in instruction tuning.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib22.1.1">arXiv preprint arXiv:2312.15685</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib23">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Luo et al. (2023a)</span>
<span class="ltx_bibblock">
Haipeng Luo, Qingfeng Sun, Can Xu, Pu Zhao, Jianguang Lou, Chongyang Tao, Xiubo
Geng, Qingwei Lin, Shifeng Chen, and Dongmei Zhang. 2023a.

</span>
<span class="ltx_bibblock">Wizardmath: Empowering mathematical reasoning for large language
models via reinforced evol-instruct.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib23.1.1">arXiv preprint arXiv:2308.09583</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib24">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Luo et al. (2023b)</span>
<span class="ltx_bibblock">
Ziyang Luo, Can Xu, Pu Zhao, Qingfeng Sun, Xiubo Geng, Wenxiang Hu, Chongyang
Tao, Jing Ma, Qingwei Lin, and Daxin Jiang. 2023b.

</span>
<span class="ltx_bibblock">Wizardcoder: Empowering code large language models with
evol-instruct.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib24.1.1">arXiv preprint arXiv:2306.08568</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib25">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Meng et al. (2024)</span>
<span class="ltx_bibblock">
Yu Meng, Mengzhou Xia, and Danqi Chen. 2024.

</span>
<span class="ltx_bibblock">Simpo: Simple preference optimization with a reference-free reward.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib25.1.1">arXiv preprint arXiv:2405.14734</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib26">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ouyang et al. (2022)</span>
<span class="ltx_bibblock">
Long Ouyang, Jeff Wu, Xu Jiang, Diogo Almeida, Carroll L. Wainwright, Pamela
Mishkin, Chong Zhang, Sandhini Agarwal, Katarina Slama, Alex Ray, John
Schulman, Jacob Hilton, Fraser Kelton, Luke Miller, Maddie Simens, Amanda
Askell, Peter Welinder, Paul Christiano, Jan Leike, and Ryan Lowe. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2203.02155" title="">Training language models to
follow instructions with human feedback</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib26.1.1">Preprint</em>, arXiv:2203.02155.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib27">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Qin et al. (2024)</span>
<span class="ltx_bibblock">
Yiwei Qin, Kaiqiang Song, Yebowen Hu, Wenlin Yao, Sangwoo Cho, Xiaoyang Wang,
Xuansheng Wu, Fei Liu, Pengfei Liu, and Dong Yu. 2024.

</span>
<span class="ltx_bibblock">Infobench: Evaluating instruction following ability in large language
models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib27.1.1">arXiv preprint arXiv:2401.03601</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib28">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Radford et al. (2021)</span>
<span class="ltx_bibblock">
Alec Radford, Jong Wook Kim, Chris Hallacy, Aditya Ramesh, Gabriel Goh,
Sandhini Agarwal, Girish Sastry, Amanda Askell, Pamela Mishkin, Jack Clark,
Gretchen Krueger, and Ilya Sutskever. 2021.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2103.00020" title="">Learning transferable
visual models from natural language supervision</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib28.1.1">Preprint</em>, arXiv:2103.00020.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib29">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Rafailov et al. (2024)</span>
<span class="ltx_bibblock">
Rafael Rafailov, Joey Hejna, Ryan Park, and Chelsea Finn. 2024.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2404.12358" title="">From <math alttext="r" class="ltx_Math" display="inline" id="bib.bib29.1.1.m1.1"><semantics id="bib.bib29.1.1.m1.1a"><mi id="bib.bib29.1.1.m1.1.1" xref="bib.bib29.1.1.m1.1.1.cmml">r</mi><annotation-xml encoding="MathML-Content" id="bib.bib29.1.1.m1.1b"><ci id="bib.bib29.1.1.m1.1.1.cmml" xref="bib.bib29.1.1.m1.1.1">𝑟</ci></annotation-xml><annotation encoding="application/x-tex" id="bib.bib29.1.1.m1.1c">r</annotation><annotation encoding="application/x-llamapun" id="bib.bib29.1.1.m1.1d">italic_r</annotation></semantics></math> to <math alttext="q^{*}" class="ltx_Math" display="inline" id="bib.bib29.2.2.m2.1"><semantics id="bib.bib29.2.2.m2.1a"><msup id="bib.bib29.2.2.m2.1.1" xref="bib.bib29.2.2.m2.1.1.cmml"><mi id="bib.bib29.2.2.m2.1.1.2" xref="bib.bib29.2.2.m2.1.1.2.cmml">q</mi><mo id="bib.bib29.2.2.m2.1.1.3" xref="bib.bib29.2.2.m2.1.1.3.cmml">∗</mo></msup><annotation-xml encoding="MathML-Content" id="bib.bib29.2.2.m2.1b"><apply id="bib.bib29.2.2.m2.1.1.cmml" xref="bib.bib29.2.2.m2.1.1"><csymbol cd="ambiguous" id="bib.bib29.2.2.m2.1.1.1.cmml" xref="bib.bib29.2.2.m2.1.1">superscript</csymbol><ci id="bib.bib29.2.2.m2.1.1.2.cmml" xref="bib.bib29.2.2.m2.1.1.2">𝑞</ci><times id="bib.bib29.2.2.m2.1.1.3.cmml" xref="bib.bib29.2.2.m2.1.1.3"></times></apply></annotation-xml><annotation encoding="application/x-tex" id="bib.bib29.2.2.m2.1c">q^{*}</annotation><annotation encoding="application/x-llamapun" id="bib.bib29.2.2.m2.1d">italic_q start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT</annotation></semantics></math>: Your
language model is secretly a q-function</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib29.3.1">Preprint</em>, arXiv:2404.12358.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib30">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Rafailov et al. (2023)</span>
<span class="ltx_bibblock">
Rafael Rafailov, Archit Sharma, Eric Mitchell, Stefano Ermon, Christopher D.
Manning, and Chelsea Finn. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2305.18290" title="">Direct preference
optimization: Your language model is secretly a reward model</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib30.1.1">Preprint</em>, arXiv:2305.18290.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib31">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Robinson et al. (2020)</span>
<span class="ltx_bibblock">
Joshua Robinson, Ching-Yao Chuang, Suvrit Sra, and Stefanie Jegelka. 2020.

</span>
<span class="ltx_bibblock">Contrastive learning with hard negative samples.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib31.1.1">arXiv preprint arXiv:2010.04592</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib32">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Schick et al. (2023)</span>
<span class="ltx_bibblock">
Timo Schick, Jane Dwivedi-Yu, Roberto Dessì, Roberta Raileanu, Maria Lomeli,
Luke Zettlemoyer, Nicola Cancedda, and Thomas Scialom. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2302.04761" title="">Toolformer: Language models
can teach themselves to use tools</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib32.1.1">Preprint</em>, arXiv:2302.04761.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib33">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Schroff et al. (2015)</span>
<span class="ltx_bibblock">
Florian Schroff, Dmitry Kalenichenko, and James Philbin. 2015.

</span>
<span class="ltx_bibblock">Facenet: A unified embedding for face recognition and clustering.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib33.1.1">Proceedings of the IEEE conference on computer vision and
pattern recognition</em>, pages 815–823.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib34">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Sharma et al. (2024)</span>
<span class="ltx_bibblock">
Archit Sharma, Sedrick Keh, Eric Mitchell, Chelsea Finn, Kushal Arora, and
Thomas Kollar. 2024.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2402.12366" title="">A critical evaluation of ai
feedback for aligning large language models</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib34.1.1">Preprint</em>, arXiv:2402.12366.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib35">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Stiennon et al. (2020)</span>
<span class="ltx_bibblock">
Nisan Stiennon, Long Ouyang, Jeffrey Wu, Daniel Ziegler, Ryan Lowe, Chelsea
Voss, Alec Radford, Dario Amodei, and Paul F Christiano. 2020.

</span>
<span class="ltx_bibblock">Learning to summarize with human feedback.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib35.1.1">Advances in Neural Information Processing Systems</em>,
33:3008–3021.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib36">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Sun et al. (2024)</span>
<span class="ltx_bibblock">
Haoran Sun, Lixin Liu, Junjie Li, Fengyu Wang, Baohua Dong, Ran Lin, and Ruohui
Huang. 2024.

</span>
<span class="ltx_bibblock">Conifer: Improving complex constrained instruction-following ability
of large language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib36.1.1">arXiv preprint arXiv:2404.02823</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib37">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Tajwar et al. (2024)</span>
<span class="ltx_bibblock">
Fahim Tajwar, Anikait Singh, Archit Sharma, Rafael Rafailov, Jeff Schneider,
Tengyang Xie, Stefano Ermon, Chelsea Finn, and Aviral Kumar. 2024.

</span>
<span class="ltx_bibblock">Preference fine-tuning of llms should leverage suboptimal, on-policy
data.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib37.1.1">arXiv preprint arXiv:2404.14367</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib38">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Talmor et al. (2018)</span>
<span class="ltx_bibblock">
Alon Talmor, Jonathan Herzig, Nicholas Lourie, and Jonathan Berant. 2018.

</span>
<span class="ltx_bibblock">Commonsenseqa: A question answering challenge targeting commonsense
knowledge.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib38.1.1">arXiv preprint arXiv:1811.00937</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib39">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Team (2023)</span>
<span class="ltx_bibblock">
The Vicuna Team. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://lmsys.org/blog/2023-03-30-vicuna/" title="">Vicuna: An
open-source chatbot impressing gpt-4 with 90%* chatgpt quality</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib40">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Touvron et al. (2023)</span>
<span class="ltx_bibblock">
Hugo Touvron, Louis Martin, Kevin Stone, Peter Albert, Amjad Almahairi, Yasmine
Babaei, Nikolay Bashlykov, Soumya Batra, Prajjwal Bhargava, Shruti Bhosale,
et al. 2023.

</span>
<span class="ltx_bibblock">Llama 2: Open foundation and fine-tuned chat models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib40.1.1">arXiv preprint arXiv:2307.09288</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib41">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Tunstall et al. (2023)</span>
<span class="ltx_bibblock">
Lewis Tunstall, Edward Beeching, Nathan Lambert, Nazneen Rajani, Kashif Rasul,
Younes Belkada, Shengyi Huang, Leandro von Werra, Clémentine Fourrier,
Nathan Habib, et al. 2023.

</span>
<span class="ltx_bibblock">Zephyr: Direct distillation of lm alignment.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib41.1.1">arXiv preprint arXiv:2310.16944</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib42">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang et al. (2023)</span>
<span class="ltx_bibblock">
Yizhong Wang, Yeganeh Kordi, Swaroop Mishra, Alisa Liu, Noah A. Smith, Daniel
Khashabi, and Hannaneh Hajishirzi. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2212.10560" title="">Self-instruct: Aligning
language models with self-generated instructions</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib42.1.1">Preprint</em>, arXiv:2212.10560.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib43">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wu et al. (2018)</span>
<span class="ltx_bibblock">
Chao-Yuan Wu, R. Manmatha, Alexander J. Smola, and Philipp Krähenbühl. 2018.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/1706.07567" title="">Sampling matters in deep
embedding learning</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib43.1.1">Preprint</em>, arXiv:1706.07567.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib44">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Xiong et al. (2021)</span>
<span class="ltx_bibblock">
Lee Xiong, Chenyan Xiong, Ye Li, Kwok-Fung Tang, Jialin Liu, Paul N. Bennett,
Junaid Ahmed, and Arnold Overwijk. 2021.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://openreview.net/forum?id=zeFrfgyZln" title="">Approximate
nearest neighbor negative contrastive learning for dense text retrieval</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib44.1.1">International Conference on Learning Representations</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib45">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Xu et al. (2023)</span>
<span class="ltx_bibblock">
Can Xu, Qingfeng Sun, Kai Zheng, Xiubo Geng, Pu Zhao, Jiazhan Feng, Chongyang
Tao, and Daxin Jiang. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2304.12244" title="">Wizardlm: Empowering large
language models to follow complex instructions</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib45.1.1">Preprint</em>, arXiv:2304.12244.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib46">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yan et al. (2024)</span>
<span class="ltx_bibblock">
Tianyi Yan, Fei Wang, James Y. Huang, Wenxuan Zhou, Fan Yin, Aram Galstyan,
Wenpeng Yin, and Muhao Chen. 2024.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2402.11138" title="">Contrastive instruction
tuning</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib46.1.1">Preprint</em>, arXiv:2402.11138.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib47">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yang et al. (2023)</span>
<span class="ltx_bibblock">
Kevin Yang, Dan Klein, Asli Celikyilmaz, Nanyun Peng, and Yuandong Tian. 2023.

</span>
<span class="ltx_bibblock">Rlcd: Reinforcement learning from contrast distillation for language
model alignment.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib47.1.1">arXiv preprint arXiv:2307.12950</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib48">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yuan et al. (2024)</span>
<span class="ltx_bibblock">
Weizhe Yuan, Richard Yuanzhe Pang, Kyunghyun Cho, Xian Li, Sainbayar
Sukhbaatar, Jing Xu, and Jason Weston. 2024.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2401.10020" title="">Self-rewarding language
models</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib48.1.1">Preprint</em>, arXiv:2401.10020.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib49">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zheng et al. (2023)</span>
<span class="ltx_bibblock">
Lianmin Zheng, Wei-Lin Chiang, Ying Sheng, Siyuan Zhuang, Zhanghao Wu, Yonghao
Zhuang, Zi Lin, Zhuohan Li, Dacheng Li, Eric P. Xing, Hao Zhang, Joseph E.
Gonzalez, and Ion Stoica. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2306.05685" title="">Judging llm-as-a-judge with
mt-bench and chatbot arena</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib49.1.1">Preprint</em>, arXiv:2306.05685.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib50">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhou et al. (2023)</span>
<span class="ltx_bibblock">
Jeffrey Zhou, Tianjian Lu, Swaroop Mishra, Siddhartha Brahma, Sujoy Basu,
Yi Luan, Denny Zhou, and Le Hou. 2023.

</span>
<span class="ltx_bibblock">Instruction-following evaluation for large language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib50.1.1">arXiv preprint arXiv:2311.07911</em>.

</span>
</li>
</ul>
</section>
<div class="ltx_pagination ltx_role_newpage"></div>
<div class="ltx_para" id="p2">
<p class="ltx_p" id="p2.1"><span class="ltx_text" id="p2.1.1"></span></p>
</div>
<section class="ltx_appendix" id="A1">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix A </span>Evolution Details</h2>
<section class="ltx_subsection" id="A1.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.1 </span>Full Taxonomy</h3>
<div class="ltx_para" id="A1.SS1.p1">
<p class="ltx_p" id="A1.SS1.p1.1">See Table <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#A2.T6" title="Table 6 ‣ B.1 Training Details ‣ Appendix B Additional Details ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_tag">6</span></a> for the full taxonomy of evolution operations. We also show the prompts for fine-grained evolution in Section <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#A3.SS1" title="C.1 Prompt for Fine-grained Evolution ‣ Appendix C Prompts Used ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_tag">C.1</span></a>. Most of the evolution operations are designed to introduce gradual, nuanced changes to the original instruction. Examples of these evolutions can be found in Table <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#A2.T7" title="Table 7 ‣ B.1 Training Details ‣ Appendix B Additional Details ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_tag">7</span></a>. Additionally, since the proposed method leverages DPO, it remains robust to occasional poor examples in the negative responses. For such "easy" negative responses, where the margin between positive and negative responses is large, the gradient magnitude will be small. This highlights another advantage of Preference Fine-Tuning over Supervised Fine-Tuning.</p>
</div>
</section>
<section class="ltx_subsection" id="A1.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.2 </span>Evolution Elimination</h3>
<div class="ltx_para" id="A1.SS2.p1">
<p class="ltx_p" id="A1.SS2.p1.1">We utilized an evolution eliminator employing heuristic methods such as instruction length variation and deduplication to determine if the evolved instructions and answers are both valid. If unsuccessful, halt the process; otherwise, proceed to the next round of evolution. This precaution is necessary because LLMs like Claude2 may also produce errors, such as omitting code snippets/tables from the original instruction, or generating duplicate instructions.</p>
</div>
</section>
</section>
<section class="ltx_appendix" id="A2">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix B </span>Additional Details</h2>
<section class="ltx_subsection" id="A2.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">B.1 </span>Training Details</h3>
<div class="ltx_para" id="A2.SS1.p1">
<p class="ltx_p" id="A2.SS1.p1.4">We leverage the widely adopted ’The Alignment Handbook’ <cite class="ltx_cite ltx_citemacro_citep">(Tunstall et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib41" title="">2023</a>)</cite> repository, released by HuggingFaceH4, for fine-tuning. For all our experiments, we use a machine with 8 NVIDIA A100 80GB GPUs. For SFT, we train for 4 epochs with a learning rate of <math alttext="2e{-5}" class="ltx_Math" display="inline" id="A2.SS1.p1.1.m1.1"><semantics id="A2.SS1.p1.1.m1.1a"><mrow id="A2.SS1.p1.1.m1.1.1" xref="A2.SS1.p1.1.m1.1.1.cmml"><mrow id="A2.SS1.p1.1.m1.1.1.2" xref="A2.SS1.p1.1.m1.1.1.2.cmml"><mn id="A2.SS1.p1.1.m1.1.1.2.2" xref="A2.SS1.p1.1.m1.1.1.2.2.cmml">2</mn><mo id="A2.SS1.p1.1.m1.1.1.2.1" xref="A2.SS1.p1.1.m1.1.1.2.1.cmml">⁢</mo><mi id="A2.SS1.p1.1.m1.1.1.2.3" xref="A2.SS1.p1.1.m1.1.1.2.3.cmml">e</mi></mrow><mo id="A2.SS1.p1.1.m1.1.1.1" xref="A2.SS1.p1.1.m1.1.1.1.cmml">−</mo><mn id="A2.SS1.p1.1.m1.1.1.3" xref="A2.SS1.p1.1.m1.1.1.3.cmml">5</mn></mrow><annotation-xml encoding="MathML-Content" id="A2.SS1.p1.1.m1.1b"><apply id="A2.SS1.p1.1.m1.1.1.cmml" xref="A2.SS1.p1.1.m1.1.1"><minus id="A2.SS1.p1.1.m1.1.1.1.cmml" xref="A2.SS1.p1.1.m1.1.1.1"></minus><apply id="A2.SS1.p1.1.m1.1.1.2.cmml" xref="A2.SS1.p1.1.m1.1.1.2"><times id="A2.SS1.p1.1.m1.1.1.2.1.cmml" xref="A2.SS1.p1.1.m1.1.1.2.1"></times><cn id="A2.SS1.p1.1.m1.1.1.2.2.cmml" type="integer" xref="A2.SS1.p1.1.m1.1.1.2.2">2</cn><ci id="A2.SS1.p1.1.m1.1.1.2.3.cmml" xref="A2.SS1.p1.1.m1.1.1.2.3">𝑒</ci></apply><cn id="A2.SS1.p1.1.m1.1.1.3.cmml" type="integer" xref="A2.SS1.p1.1.m1.1.1.3">5</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.SS1.p1.1.m1.1c">2e{-5}</annotation><annotation encoding="application/x-llamapun" id="A2.SS1.p1.1.m1.1d">2 italic_e - 5</annotation></semantics></math> and warm-up ratio of <math alttext="0.1" class="ltx_Math" display="inline" id="A2.SS1.p1.2.m2.1"><semantics id="A2.SS1.p1.2.m2.1a"><mn id="A2.SS1.p1.2.m2.1.1" xref="A2.SS1.p1.2.m2.1.1.cmml">0.1</mn><annotation-xml encoding="MathML-Content" id="A2.SS1.p1.2.m2.1b"><cn id="A2.SS1.p1.2.m2.1.1.cmml" type="float" xref="A2.SS1.p1.2.m2.1.1">0.1</cn></annotation-xml><annotation encoding="application/x-tex" id="A2.SS1.p1.2.m2.1c">0.1</annotation><annotation encoding="application/x-llamapun" id="A2.SS1.p1.2.m2.1d">0.1</annotation></semantics></math> with per device batch size 16 and gradient accumulation steps 4. For DPO training, we train for 1 epoch a per device batch size of 8 and a gradient accumulation of 2. We use a learning rate of <math alttext="5e{-7}" class="ltx_Math" display="inline" id="A2.SS1.p1.3.m3.1"><semantics id="A2.SS1.p1.3.m3.1a"><mrow id="A2.SS1.p1.3.m3.1.1" xref="A2.SS1.p1.3.m3.1.1.cmml"><mrow id="A2.SS1.p1.3.m3.1.1.2" xref="A2.SS1.p1.3.m3.1.1.2.cmml"><mn id="A2.SS1.p1.3.m3.1.1.2.2" xref="A2.SS1.p1.3.m3.1.1.2.2.cmml">5</mn><mo id="A2.SS1.p1.3.m3.1.1.2.1" xref="A2.SS1.p1.3.m3.1.1.2.1.cmml">⁢</mo><mi id="A2.SS1.p1.3.m3.1.1.2.3" xref="A2.SS1.p1.3.m3.1.1.2.3.cmml">e</mi></mrow><mo id="A2.SS1.p1.3.m3.1.1.1" xref="A2.SS1.p1.3.m3.1.1.1.cmml">−</mo><mn id="A2.SS1.p1.3.m3.1.1.3" xref="A2.SS1.p1.3.m3.1.1.3.cmml">7</mn></mrow><annotation-xml encoding="MathML-Content" id="A2.SS1.p1.3.m3.1b"><apply id="A2.SS1.p1.3.m3.1.1.cmml" xref="A2.SS1.p1.3.m3.1.1"><minus id="A2.SS1.p1.3.m3.1.1.1.cmml" xref="A2.SS1.p1.3.m3.1.1.1"></minus><apply id="A2.SS1.p1.3.m3.1.1.2.cmml" xref="A2.SS1.p1.3.m3.1.1.2"><times id="A2.SS1.p1.3.m3.1.1.2.1.cmml" xref="A2.SS1.p1.3.m3.1.1.2.1"></times><cn id="A2.SS1.p1.3.m3.1.1.2.2.cmml" type="integer" xref="A2.SS1.p1.3.m3.1.1.2.2">5</cn><ci id="A2.SS1.p1.3.m3.1.1.2.3.cmml" xref="A2.SS1.p1.3.m3.1.1.2.3">𝑒</ci></apply><cn id="A2.SS1.p1.3.m3.1.1.3.cmml" type="integer" xref="A2.SS1.p1.3.m3.1.1.3">7</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.SS1.p1.3.m3.1c">5e{-7}</annotation><annotation encoding="application/x-llamapun" id="A2.SS1.p1.3.m3.1d">5 italic_e - 7</annotation></semantics></math> and a warm-up ratio of <math alttext="0.1" class="ltx_Math" display="inline" id="A2.SS1.p1.4.m4.1"><semantics id="A2.SS1.p1.4.m4.1a"><mn id="A2.SS1.p1.4.m4.1.1" xref="A2.SS1.p1.4.m4.1.1.cmml">0.1</mn><annotation-xml encoding="MathML-Content" id="A2.SS1.p1.4.m4.1b"><cn id="A2.SS1.p1.4.m4.1.1.cmml" type="float" xref="A2.SS1.p1.4.m4.1.1">0.1</cn></annotation-xml><annotation encoding="application/x-tex" id="A2.SS1.p1.4.m4.1c">0.1</annotation><annotation encoding="application/x-llamapun" id="A2.SS1.p1.4.m4.1d">0.1</annotation></semantics></math>.</p>
</div>
<figure class="ltx_table" id="A2.T6">
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="A2.T6.1" style="width:433.6pt;height:375.2pt;vertical-align:-0.8pt;"><span class="ltx_transformed_inner" style="transform:translate(-39.8pt,34.4pt) scale(0.844758679722337,0.844758679722337) ;">
<table class="ltx_tabular ltx_align_middle" id="A2.T6.1.1">
<tr class="ltx_tr" id="A2.T6.1.1.1">
<td class="ltx_td ltx_align_center ltx_border_r" id="A2.T6.1.1.1.1"><span class="ltx_text ltx_font_bold" id="A2.T6.1.1.1.1.1">Category</span></td>
<td class="ltx_td ltx_align_center" id="A2.T6.1.1.1.2"><span class="ltx_text ltx_font_bold" id="A2.T6.1.1.1.2.1">Fine-grained type</span></td>
</tr>
<tr class="ltx_tr" id="A2.T6.1.1.2">
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="A2.T6.1.1.2.1" rowspan="6"><span class="ltx_text ltx_font_bold" id="A2.T6.1.1.2.1.1">Content</span></td>
<td class="ltx_td ltx_align_left ltx_border_t" id="A2.T6.1.1.2.2">Add a Subtask or Another Related Question.</td>
</tr>
<tr class="ltx_tr" id="A2.T6.1.1.3">
<td class="ltx_td ltx_align_left" id="A2.T6.1.1.3.1">Set a Higher standard: Raise the bar for what’s considered acceptable or successful.</td>
</tr>
<tr class="ltx_tr" id="A2.T6.1.1.4">
<td class="ltx_td ltx_align_left" id="A2.T6.1.1.4.1">Set a Higher Standard: Raise the bar for what’s considered acceptable or successful.</td>
</tr>
<tr class="ltx_tr" id="A2.T6.1.1.5">
<td class="ltx_td ltx_align_left" id="A2.T6.1.1.5.1">Limit resources: Restrict the number or type of resources that can be used</td>
</tr>
<tr class="ltx_tr" id="A2.T6.1.1.6">
<td class="ltx_td ltx_align_left" id="A2.T6.1.1.6.1">Add a criterion: Mandate a new feature to be included.</td>
</tr>
<tr class="ltx_tr" id="A2.T6.1.1.7">
<td class="ltx_td ltx_align_left" id="A2.T6.1.1.7.1">Sequencing: Dictate the order in which steps or actions should be taken.</td>
</tr>
<tr class="ltx_tr" id="A2.T6.1.1.8">
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="A2.T6.1.1.8.1" rowspan="5"><span class="ltx_text ltx_font_bold" id="A2.T6.1.1.8.1.1">Style</span></td>
<td class="ltx_td ltx_align_left ltx_border_t" id="A2.T6.1.1.8.2">Tone and Emotion: Specify the desired emotional tone for the response.</td>
</tr>
<tr class="ltx_tr" id="A2.T6.1.1.9">
<td class="ltx_td ltx_align_left" id="A2.T6.1.1.9.1">Ask to mimic a specific author’s writing style.</td>
</tr>
<tr class="ltx_tr" id="A2.T6.1.1.10">
<td class="ltx_td ltx_align_left" id="A2.T6.1.1.10.1">Contradiction: Ask to provide a response that contradicts the previous statement or take a stance opposite to its prior response.</td>
</tr>
<tr class="ltx_tr" id="A2.T6.1.1.11">
<td class="ltx_td ltx_align_left" id="A2.T6.1.1.11.1">Ambiguity: Create responses with intentional ambiguity or double meanings.</td>
</tr>
<tr class="ltx_tr" id="A2.T6.1.1.12">
<td class="ltx_td ltx_align_left" id="A2.T6.1.1.12.1">Humor or Satire: Request to be humorous or satirical, generating jokes or witty remarks.</td>
</tr>
<tr class="ltx_tr" id="A2.T6.1.1.13">
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="A2.T6.1.1.13.1" rowspan="7"><span class="ltx_text ltx_font_bold" id="A2.T6.1.1.13.1.1">Format</span></td>
<td class="ltx_td ltx_align_left ltx_border_t" id="A2.T6.1.1.13.2">Length: Imposing constraints on the length of individual words, sentences, or paragraphs.</td>
</tr>
<tr class="ltx_tr" id="A2.T6.1.1.14">
<td class="ltx_td ltx_align_left" id="A2.T6.1.1.14.1">Hierarchical: Introduce a hierarchical structure which requires an understanding of a hierarchy of tasks and follow it.</td>
</tr>
<tr class="ltx_tr" id="A2.T6.1.1.15">
<td class="ltx_td ltx_align_left" id="A2.T6.1.1.15.1">Special output format: Use data formats like table, json, HTML, LaTeX, etc.</td>
</tr>
<tr class="ltx_tr" id="A2.T6.1.1.16">
<td class="ltx_td ltx_align_left" id="A2.T6.1.1.16.1">Morphological constraints: Use or avoid specific morphemes.</td>
</tr>
<tr class="ltx_tr" id="A2.T6.1.1.17">
<td class="ltx_td ltx_align_left" id="A2.T6.1.1.17.1">Multi-lingual Constraints: Respond in multiple languages or switch between languages.</td>
</tr>
<tr class="ltx_tr" id="A2.T6.1.1.18">
<td class="ltx_td ltx_align_left" id="A2.T6.1.1.18.1">Incorporate literary devices: Introduce specification(s) of metaphor, simile, alliteration, irony, symbolism, foreshadowing, etc..</td>
</tr>
<tr class="ltx_tr" id="A2.T6.1.1.19">
<td class="ltx_td ltx_align_left" id="A2.T6.1.1.19.1">Grammatical structure: Strictly follow a particular grammatical structure.</td>
</tr>
<tr class="ltx_tr" id="A2.T6.1.1.20">
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="A2.T6.1.1.20.1" rowspan="3"><span class="ltx_text ltx_font_bold" id="A2.T6.1.1.20.1.1">Reasoning</span></td>
<td class="ltx_td ltx_align_left ltx_border_t" id="A2.T6.1.1.20.2">Explicitly request multiple-step or chain-of-thought reasoning.</td>
</tr>
<tr class="ltx_tr" id="A2.T6.1.1.21">
<td class="ltx_td ltx_align_left" id="A2.T6.1.1.21.1">Add some numeric reasoning steps.</td>
</tr>
<tr class="ltx_tr" id="A2.T6.1.1.22">
<td class="ltx_td ltx_align_left" id="A2.T6.1.1.22.1">Add some commonsense reasoning steps.</td>
</tr>
<tr class="ltx_tr" id="A2.T6.1.1.23">
<td class="ltx_td ltx_align_left ltx_border_b ltx_border_r ltx_border_t" id="A2.T6.1.1.23.1"><span class="ltx_text ltx_font_bold" id="A2.T6.1.1.23.1.1">Breadth</span></td>
<td class="ltx_td ltx_align_left ltx_border_b ltx_border_t" id="A2.T6.1.1.23.2">Come up with a new instruction that matches the domain, length, and complexity of the original instruction</td>
</tr>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 6: </span>Full Taxonomy of Evolution Operations</figcaption>
</figure>
<figure class="ltx_table" id="A2.T7">
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="A2.T7.1" style="width:650.4pt;height:703.9pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(137.6pt,-148.9pt) scale(1.73371012456912,1.73371012456912) ;">
<table class="ltx_tabular ltx_align_middle" id="A2.T7.1.1">
<tr class="ltx_tr" id="A2.T7.1.1.1">
<td class="ltx_td ltx_align_left ltx_border_r" id="A2.T7.1.1.1.1"><span class="ltx_text ltx_font_bold" id="A2.T7.1.1.1.1.1">Category</span></td>
<td class="ltx_td ltx_align_center ltx_align_top ltx_border_r" id="A2.T7.1.1.1.2"><span class="ltx_text ltx_font_bold" id="A2.T7.1.1.1.2.1">Original</span></td>
<td class="ltx_td ltx_align_center ltx_align_top" id="A2.T7.1.1.1.3"><span class="ltx_text ltx_font_bold" id="A2.T7.1.1.1.3.1">Evolve (iter+1)</span></td>
</tr>
<tr class="ltx_tr" id="A2.T7.1.1.2">
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="A2.T7.1.1.2.1"><span class="ltx_text ltx_font_bold" id="A2.T7.1.1.2.1.1">Content</span></td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_r ltx_border_t" id="A2.T7.1.1.2.2">
<span class="ltx_inline-block ltx_align_top" id="A2.T7.1.1.2.2.1">
<span class="ltx_p" id="A2.T7.1.1.2.2.1.1" style="width:142.3pt;">Recommend 5 books to me.</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A2.T7.1.1.2.3">
<span class="ltx_inline-block ltx_align_top" id="A2.T7.1.1.2.3.1">
<span class="ltx_p" id="A2.T7.1.1.2.3.1.1" style="width:142.3pt;">Recommend 5 <span class="ltx_text ltx_font_bold" id="A2.T7.1.1.2.3.1.1.1">historic</span> books to me.</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="A2.T7.1.1.3">
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="A2.T7.1.1.3.1"><span class="ltx_text ltx_font_bold" id="A2.T7.1.1.3.1.1">Style</span></td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_r ltx_border_t" id="A2.T7.1.1.3.2">
<span class="ltx_inline-block ltx_align_top" id="A2.T7.1.1.3.2.1">
<span class="ltx_p" id="A2.T7.1.1.3.2.1.1" style="width:142.3pt;">Some days ago I run for the first time 21 kilometers. It was the longest I ever run. I’m very happy about it and I’ve been meaning to write some reflexitions about it. Can you help me?</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A2.T7.1.1.3.3">
<span class="ltx_inline-block ltx_align_top" id="A2.T7.1.1.3.3.1">
<span class="ltx_p" id="A2.T7.1.1.3.3.1.1" style="width:142.3pt;">Some days ago I run for the first time 21 kilometers. It was the longest I ever run. I’m very happy about it and I’ve been meaning to write some reflexitions about it. Can you help me <span class="ltx_text ltx_font_bold" id="A2.T7.1.1.3.3.1.1.1">reflect on this achievement in an inspiring tone that might motivate others to challenge themselves physically as well?</span></span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="A2.T7.1.1.4">
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="A2.T7.1.1.4.1"><span class="ltx_text ltx_font_bold" id="A2.T7.1.1.4.1.1">Format</span></td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_r ltx_border_t" id="A2.T7.1.1.4.2">
<span class="ltx_inline-block ltx_align_top" id="A2.T7.1.1.4.2.1">
<span class="ltx_p" id="A2.T7.1.1.4.2.1.1" style="width:142.3pt;">why are vitamins named Vitamin A, B, etc?</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A2.T7.1.1.4.3">
<span class="ltx_inline-block ltx_align_top" id="A2.T7.1.1.4.3.1">
<span class="ltx_p" id="A2.T7.1.1.4.3.1.1" style="width:142.3pt;">why are vitamins named Vitamin A, B, etc? <span class="ltx_text ltx_font_bold" id="A2.T7.1.1.4.3.1.1.1">Please respond in a concise paragraph format with a length limit of 3-5 sentences.</span></span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="A2.T7.1.1.5">
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="A2.T7.1.1.5.1"><span class="ltx_text ltx_font_bold" id="A2.T7.1.1.5.1.1">Reasoning</span></td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_r ltx_border_t" id="A2.T7.1.1.5.2">
<span class="ltx_inline-block ltx_align_top" id="A2.T7.1.1.5.2.1">
<span class="ltx_p" id="A2.T7.1.1.5.2.1.1" style="width:142.3pt;">make a table of all us presidents since 1924. add columns for wifes height, main campaign issue, number of children, and whether or not they met with the dalai lama</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A2.T7.1.1.5.3">
<span class="ltx_inline-block ltx_align_top" id="A2.T7.1.1.5.3.1">
<span class="ltx_p" id="A2.T7.1.1.5.3.1.1" style="width:142.3pt;">make a table of all us presidents since 1924. add columns for wifes height, main campaign issue, number of children, and whether or not they met with the dalai lama. <span class="ltx_text ltx_font_bold" id="A2.T7.1.1.5.3.1.1.1">Also add a column for the president’s age at inauguration and calculate their age by subtracting their birth year from the inauguration year.</span></span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="A2.T7.1.1.6">
<td class="ltx_td ltx_align_left ltx_border_b ltx_border_r ltx_border_t" id="A2.T7.1.1.6.1"><span class="ltx_text ltx_font_bold" id="A2.T7.1.1.6.1.1">Breadth</span></td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_b ltx_border_r ltx_border_t" id="A2.T7.1.1.6.2">
<span class="ltx_inline-block ltx_align_top" id="A2.T7.1.1.6.2.1">
<span class="ltx_p" id="A2.T7.1.1.6.2.1.1" style="width:142.3pt;">can you give me an example of different consolidation methods of an organizational LCA?</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_b ltx_border_t" id="A2.T7.1.1.6.3">
<span class="ltx_inline-block ltx_align_top" id="A2.T7.1.1.6.3.1">
<span class="ltx_p" id="A2.T7.1.1.6.3.1.1" style="width:142.3pt;"><span class="ltx_text ltx_font_bold" id="A2.T7.1.1.6.3.1.1.1">Could you provide an example of the different methods a multinational corporation might use to consolidate the financial statements of its various subsidiaries located around the world?</span></span>
</span>
</td>
</tr>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 7: </span>Examples of finegrained evolutions.</figcaption>
</figure>
</section>
<section class="ltx_subsection" id="A2.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">B.2 </span>Ablation Study on Removing UltraFeedback from Data Mixture</h3>
<div class="ltx_para" id="A2.SS2.p1">
<p class="ltx_p" id="A2.SS2.p1.1">In this section, we conduct an ablation study on removing UltraFeedback from the ECD-Conifer data mixture. Again, we use the Conifer-7B-SFT model as the IFT initialization. We compare two checkpoints ECD-Conifer and ECD-Conifer-Pure. Whereas ECD-Conifer consists of both the ECD version of Conifer and Ultrafeedback to optimize both instruction-following and conversational quality, ECD-Conifer-Pure only removes UltraFeedback. Table <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#A2.T8" title="Table 8 ‣ B.2 Ablation Study on Removing UltraFeedback from Data Mixture ‣ Appendix B Additional Details ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_tag">8</span></a> depicts the results for instruction-following and Table <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#A2.T9" title="Table 9 ‣ B.2 Ablation Study on Removing UltraFeedback from Data Mixture ‣ Appendix B Additional Details ‣ Evolutionary Contrastive Distillation for Language Model Alignment"><span class="ltx_text ltx_ref_tag">9</span></a> depicts the results on conversational quality. On instruction-following, we see that ECD-Conifer-Pure tends to outperform ECD-Conifer, with particularly strong performance on IFEval. For example, it improves the strict prompt accuracy by 5.1%. On the other hand, for conversational quality, ECD-Conifer improves on ECD-Conifer-Pure with a much improve MT-Bench score and LC Win-Rate, indicating the usefulness of UltraFeedback for conversational quality.</p>
</div>
<figure class="ltx_table" id="A2.T8">
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="A2.T8.1" style="width:433.6pt;height:51.7pt;vertical-align:-0.7pt;"><span class="ltx_transformed_inner" style="transform:translate(-89.3pt,10.5pt) scale(0.708206854561892,0.708206854561892) ;">
<table class="ltx_tabular ltx_align_middle" id="A2.T8.1.1">
<tr class="ltx_tr" id="A2.T8.1.1.1">
<td class="ltx_td ltx_align_center" id="A2.T8.1.1.1.1"><span class="ltx_text ltx_font_bold" id="A2.T8.1.1.1.1.1">Base Model</span></td>
<td class="ltx_td ltx_align_center" id="A2.T8.1.1.1.2"><span class="ltx_text ltx_font_bold" id="A2.T8.1.1.1.2.1">IFT Data</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="A2.T8.1.1.1.3"><span class="ltx_text ltx_font_bold" id="A2.T8.1.1.1.3.1">Preference Data</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" colspan="4" id="A2.T8.1.1.1.4"><span class="ltx_text ltx_font_bold" id="A2.T8.1.1.1.4.1">IFEval</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" colspan="2" id="A2.T8.1.1.1.5"><span class="ltx_text ltx_font_bold" id="A2.T8.1.1.1.5.1">FollowBench</span></td>
<td class="ltx_td ltx_align_center" colspan="3" id="A2.T8.1.1.1.6"><span class="ltx_text ltx_font_bold" id="A2.T8.1.1.1.6.1">InfoBench</span></td>
</tr>
<tr class="ltx_tr" id="A2.T8.1.1.2">
<td class="ltx_td ltx_border_t" id="A2.T8.1.1.2.1"></td>
<td class="ltx_td ltx_border_t" id="A2.T8.1.1.2.2"></td>
<td class="ltx_td ltx_border_r ltx_border_t" id="A2.T8.1.1.2.3"></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A2.T8.1.1.2.4"><span class="ltx_text ltx_font_bold" id="A2.T8.1.1.2.4.1">strict pr</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A2.T8.1.1.2.5"><span class="ltx_text ltx_font_bold" id="A2.T8.1.1.2.5.1">strict in</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A2.T8.1.1.2.6"><span class="ltx_text ltx_font_bold" id="A2.T8.1.1.2.6.1">loose pr</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="A2.T8.1.1.2.7"><span class="ltx_text ltx_font_bold" id="A2.T8.1.1.2.7.1">loose in</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A2.T8.1.1.2.8"><span class="ltx_text ltx_font_bold" id="A2.T8.1.1.2.8.1">HSR</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="A2.T8.1.1.2.9"><span class="ltx_text ltx_font_bold" id="A2.T8.1.1.2.9.1">SSR</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A2.T8.1.1.2.10"><span class="ltx_text ltx_font_bold" id="A2.T8.1.1.2.10.1">Easy</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A2.T8.1.1.2.11"><span class="ltx_text ltx_font_bold" id="A2.T8.1.1.2.11.1">Hard</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A2.T8.1.1.2.12"><span class="ltx_text ltx_font_bold" id="A2.T8.1.1.2.12.1">Overall</span></td>
</tr>
<tr class="ltx_tr" id="A2.T8.1.1.3">
<td class="ltx_td ltx_align_center" id="A2.T8.1.1.3.1">Mistral-7B</td>
<td class="ltx_td ltx_align_center" id="A2.T8.1.1.3.2">Conifer-Mix</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="A2.T8.1.1.3.3">ECD-Conifer</td>
<td class="ltx_td ltx_align_center" id="A2.T8.1.1.3.4">47.9%</td>
<td class="ltx_td ltx_align_center" id="A2.T8.1.1.3.5">59.7%</td>
<td class="ltx_td ltx_align_center" id="A2.T8.1.1.3.6">54.9%</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="A2.T8.1.1.3.7">66.2%</td>
<td class="ltx_td ltx_align_center" id="A2.T8.1.1.3.8">57.4%</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="A2.T8.1.1.3.9"><span class="ltx_text ltx_font_bold" id="A2.T8.1.1.3.9.1">65.4%</span></td>
<td class="ltx_td ltx_align_center" id="A2.T8.1.1.3.10">86.5%</td>
<td class="ltx_td ltx_align_center" id="A2.T8.1.1.3.11">82.4%</td>
<td class="ltx_td ltx_align_center" id="A2.T8.1.1.3.12">83.7%</td>
</tr>
<tr class="ltx_tr" id="A2.T8.1.1.4">
<td class="ltx_td ltx_align_center" id="A2.T8.1.1.4.1">Mistral-7B</td>
<td class="ltx_td ltx_align_center" id="A2.T8.1.1.4.2">Conifer-Mix</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="A2.T8.1.1.4.3">ECD-Conifer-Pure</td>
<td class="ltx_td ltx_align_center" id="A2.T8.1.1.4.4"><span class="ltx_text ltx_font_bold" id="A2.T8.1.1.4.4.1">53.0%</span></td>
<td class="ltx_td ltx_align_center" id="A2.T8.1.1.4.5"><span class="ltx_text ltx_font_bold" id="A2.T8.1.1.4.5.1">64.3%</span></td>
<td class="ltx_td ltx_align_center" id="A2.T8.1.1.4.6"><span class="ltx_text ltx_font_bold" id="A2.T8.1.1.4.6.1">57.7%</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="A2.T8.1.1.4.7"><span class="ltx_text ltx_font_bold" id="A2.T8.1.1.4.7.1">69.1%</span></td>
<td class="ltx_td ltx_align_center" id="A2.T8.1.1.4.8"><span class="ltx_text ltx_font_bold" id="A2.T8.1.1.4.8.1">57.8%</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="A2.T8.1.1.4.9">64.4%</td>
<td class="ltx_td ltx_align_center" id="A2.T8.1.1.4.10"><span class="ltx_text ltx_font_bold" id="A2.T8.1.1.4.10.1">88.4%</span></td>
<td class="ltx_td ltx_align_center" id="A2.T8.1.1.4.11"><span class="ltx_text ltx_font_bold" id="A2.T8.1.1.4.11.1">83.8%</span></td>
<td class="ltx_td ltx_align_center" id="A2.T8.1.1.4.12"><span class="ltx_text ltx_font_bold" id="A2.T8.1.1.4.12.1">85.2%</span></td>
</tr>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 8: </span>Instruction-Following Benchmarks for ablation of removing UltraFeedback from ECD-Conifer-Pure.</figcaption>
</figure>
<figure class="ltx_table" id="A2.T9">
<table class="ltx_tabular ltx_centering ltx_align_middle" id="A2.T9.1">
<tr class="ltx_tr" id="A2.T9.1.1">
<td class="ltx_td" id="A2.T9.1.1.1"></td>
<td class="ltx_td" id="A2.T9.1.1.2"></td>
<td class="ltx_td ltx_border_r" id="A2.T9.1.1.3"></td>
<td class="ltx_td ltx_border_r" id="A2.T9.1.1.4"></td>
<td class="ltx_td ltx_align_center" colspan="2" id="A2.T9.1.1.5"><span class="ltx_text ltx_font_bold" id="A2.T9.1.1.5.1">AlpacaEval</span></td>
</tr>
<tr class="ltx_tr" id="A2.T9.1.2">
<td class="ltx_td ltx_align_center ltx_border_t" id="A2.T9.1.2.1"><span class="ltx_text ltx_font_bold" id="A2.T9.1.2.1.1">Base Model</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A2.T9.1.2.2"><span class="ltx_text ltx_font_bold" id="A2.T9.1.2.2.1">IFT Data</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="A2.T9.1.2.3"><span class="ltx_text ltx_font_bold" id="A2.T9.1.2.3.1">Preference Data</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="A2.T9.1.2.4"><span class="ltx_text ltx_font_bold" id="A2.T9.1.2.4.1">MT-Bench Score</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A2.T9.1.2.5"><span class="ltx_text ltx_font_bold" id="A2.T9.1.2.5.1">LC Win-Rate</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A2.T9.1.2.6"><span class="ltx_text ltx_font_bold" id="A2.T9.1.2.6.1">Average Length</span></td>
</tr>
<tr class="ltx_tr" id="A2.T9.1.3">
<td class="ltx_td ltx_align_center" id="A2.T9.1.3.1">Mistral-7B</td>
<td class="ltx_td ltx_align_center" id="A2.T9.1.3.2">Conifer-Mix</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="A2.T9.1.3.3">ECD-Conifer</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="A2.T9.1.3.4"><span class="ltx_text ltx_font_bold" id="A2.T9.1.3.4.1">7.49</span></td>
<td class="ltx_td ltx_align_center" id="A2.T9.1.3.5"><span class="ltx_text ltx_font_bold" id="A2.T9.1.3.5.1">25.21%</span></td>
<td class="ltx_td ltx_align_center" id="A2.T9.1.3.6">1424</td>
</tr>
<tr class="ltx_tr" id="A2.T9.1.4">
<td class="ltx_td ltx_align_center" id="A2.T9.1.4.1">Mistral-7B</td>
<td class="ltx_td ltx_align_center" id="A2.T9.1.4.2">Conifer-Mix</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="A2.T9.1.4.3">ECD-Conifer-Pure</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="A2.T9.1.4.4">6.2375</td>
<td class="ltx_td ltx_align_center" id="A2.T9.1.4.5">14.51%</td>
<td class="ltx_td ltx_align_center" id="A2.T9.1.4.6">973</td>
</tr>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 9: </span>Response Quality Benchmarks for ablation of removing UltraFeedback from ECD-Conifer-Pure.F.</figcaption>
</figure>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
</section>
<section class="ltx_appendix" id="A3">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix C </span>Prompts Used</h2>
<section class="ltx_subsection" id="A3.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">C.1 </span>Prompt for Fine-grained Evolution</h3>
<section class="ltx_subsubsection" id="A3.SS1.SSS1">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">C.1.1 </span>Content Evolution</h4>
<div class="ltx_para" id="A3.SS1.SSS1.p1">
<pre class="ltx_verbatim ltx_font_typewriter" id="A3.SS1.SSS1.p1.1">
You are an Instruction Rewriting Expert. You need to rewrite #Given Instruction# based on
#Rewriting Requirement#, in order to obtain a #Rewritten Instruction#.
Basically, #Rewritten Instruction# should adhere to the following guidelines:
1. #Rewritten Instruction# must be reasonable and must be understood and responded by humans.
2. You should try your best not to make the #Rewritten Instruction# become verbose,
#Rewritten Instruction# can only add 10 to 20 words into #Given Instruction#.

#Given Instruction#
{given_instruction}

#Rewriting Requirement#
Please add one proper content constraint to the #Given Instruction#.
The content constraints include but are not limited to:
1. Add a Subtask or Another Related Question.
2. Narrow Down the Topic: Instead of a general theme or topic, provide a more specific subset.
3. Set a Higher Standard: Raise the bar for what’s considered acceptable or successful.
4. Limit Resources: Restrict the number or type of resources someone can use.
5. Introduce Specific Criteria: Mandate particular components or features that must be included.
6. Specifying Sequence: Dictate the order in which certain steps or actions should be taken.

Please start with the sentence "Here is the new instruction:" in #Rewritten Instruction#.
Please don’t add anything related to the #Rewriting Requirement# in the #Rewritten Instruction#.
If #Given Instruction# contains no-text parts such as table and code examples
, #Rewritten Instruction# should also keep them.

#Rewritten Instruction#
</pre>
</div>
</section>
<section class="ltx_subsubsection" id="A3.SS1.SSS2">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">C.1.2 </span>Format Evolution</h4>
<div class="ltx_para" id="A3.SS1.SSS2.p1">
<pre class="ltx_verbatim ltx_font_typewriter" id="A3.SS1.SSS2.p1.1">
You are an Instruction Rewriting Expert. You need to rewrite #Given Instruction#
based on #Rewriting Requirement#, in order to obtain a #Rewritten Instruction#.
Basically, #Rewritten Instruction# should adhere to the following guidelines:
1. #Rewritten Instruction# must be reasonable and must be understood and responded by humans.
2. You should try your best not to make the #Rewritten Instruction# become verbose,
#Rewritten Instruction# can only add 10 to 20 words into #Given Instruction#.

#Given Instruction#
{given_instruction}

#Rewriting Requirement#
Please add one proper format constraint that #Given Instruction#
does not have. The format constraints include but are not limited to:
1. Length: Imposing constraints on the length of individual words, sentences, or paragraphs.
2. Hierarchical Instructions: Providing instructions that have a hierarchical structure, where the AI
needs to understand and follow a hierarchy of tasks to construct a response.
3. Special Output Format: Asking the AI to respond by using data format like table, json, HTML, LaTeX, etc.
4. Morphological Constraints: Asking the AI to avoid or use specific morphemes.
5. Multi-lingual Constraints: Asking the AI to respond
in multiple languages or switch between languages according to complex patterns.
6. Incorporation of Specific Literary Devices:
Requiring the inclusion of specific, and perhaps numerous, literary devices.
7. Following a Specific Grammatical Structure:
Requiring the AI to create responses that strictly follow a particular grammatical structure.

Please start with the sentence "Here is the new instruction:" in #Rewritten Instruction#.
Please don’t add anything related to the #Rewriting Requirement# in the #Rewritten Instruction#.
If #Given Instruction# contains no-text parts such as table and code examples
, #Rewritten Instruction# should also keep them.

#Rewritten Instruction#
</pre>
</div>
</section>
<section class="ltx_subsubsection" id="A3.SS1.SSS3">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">C.1.3 </span>Style Evolution</h4>
<div class="ltx_para" id="A3.SS1.SSS3.p1">
<pre class="ltx_verbatim ltx_font_typewriter" id="A3.SS1.SSS3.p1.1">
You are an Instruction Rewriting Expert. You need to rewrite #Given Instruction# based on
#Rewriting Requirement#, in order to obtain a #Rewritten Instruction#.
Basically, #Rewritten Instruction# should adhere to the following guidelines:
1. #Rewritten Instruction# must be reasonable and must be understood and responded by humans.
2. You should try your best not to make the #Rewritten Instruction# become verbose,
#Rewritten Instruction# can only add 10 to 20 words into #Given Instruction#.

#Given Instruction#
{given_instruction}

#Rewriting Requirement#
Please add one proper style constraint that #Given Instruction#
does not have. The style constraints include but are not limited to:
1. Tone and Emotion: Specify the desired emotional tone for the response.
2. Writing Style: Ask the AI to mimic a specific author’s writing style.
3. Contradiction: Ask the AI to provide a response that contradicts the previous
statement or take a stance opposite to its prior response.
4. Ambiguity: Instruct the AI to create responses with intentional ambiguity or double meanings.
5. Humor or Satire: Request that the response be humorous
or satirical, requiring the AI to generate jokes or witty remarks.

Please start with the sentence "Here is the new instruction:" in #Rewritten Instruction#.
Please don’t add anything related to the #Rewriting Requirement# in the #Rewritten Instruction#.
If #Given Instruction# contains no-text parts such as table and code examples
, #Rewritten Instruction# should also keep them.

#Rewritten Instruction#
</pre>
</div>
</section>
<section class="ltx_subsubsection" id="A3.SS1.SSS4">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">C.1.4 </span>Breadth Evolution</h4>
<div class="ltx_para" id="A3.SS1.SSS4.p1">
<pre class="ltx_verbatim ltx_font_typewriter" id="A3.SS1.SSS4.p1.1">
You are an Instruction Creator Expert. You need to draw inspiration from the #Given Instruction#
to create a brand new #Created Instruction# based on #Creation Requirement#.

#Given Instruction#
{given_instruction}

#Creation Requirement#
1. #Created Instruction# must be reasonable and must be understood and responded by humans.
2. #Created Instruction# should belong to the same domain as the #Given Instruction#
but be even more rare.
3. The LENGTH and complexity of the #Created Instruction# should be similar to that of the
#Given Instruction#.
4. ’#Given Instruction#’, ’#Created Instruction#’, ’given instruction’ and ’created instruction’ are not
allowed to appear in #Created Instruction#
5. #Created Instruction# must be self-contained.

Please start with the sentence "Here is the new instruction:" in #Created Instruction#.\n
Please don’t add anything related to the #Creation Requirement# in the #Created Instruction#.

#Created Instruction#
</pre>
</div>
</section>
<section class="ltx_subsubsection" id="A3.SS1.SSS5">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">C.1.5 </span>Reasoning Evolution</h4>
<div class="ltx_para" id="A3.SS1.SSS5.p1">
<pre class="ltx_verbatim ltx_font_typewriter" id="A3.SS1.SSS5.p1.1">
You are an Instruction Rewriting Expert. You need to rewrite #Given Instruction# based on
#Rewriting Requirement#, in order to obtain a #Rewritten Instruction#. Basically,
#Rewritten Instruction# should adhere to the following guidelines:
1. #Rewritten Instruction# must be reasonable and must be understood and responded by humans.
2. You should try your best not to make the #Rewritten Instruction# become verbose,
#Rewritten Instruction# can only add 10 to 20 words into #Given Instruction#.

#Given Instruction#
{given_instruction}

#Rewriting Requirement#
Please add one proper reasoning constraint that #Given Instruction# does not have. The reasoning
constraints include but are not limited to:
1. Explicitly request multiple-step or chain-of-thought reasoning.
2. Add some numeric reasoning steps.
3. Add some commonsense reasoning steps.

Please start with the sentence "Here is the new instruction:" in #Rewritten Instruction#.
Please don’t add anything related to the #Rewriting Requirement# in the #Rewritten Instruction#.
If #Given Instruction# contains no-text parts such as table and code examples
, #Rewritten Instruction# should also keep them.

#Rewritten Instruction#
</pre>
</div>
</section>
</section>
<section class="ltx_subsection" id="A3.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">C.2 </span>Prompt for RLAIF</h3>
<div class="ltx_para" id="A3.SS2.p1">
<p class="ltx_p" id="A3.SS2.p1.1">We adopted the RLAIF prompt used from <cite class="ltx_cite ltx_citemacro_citep">(Yang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib47" title="">2023</a>)</cite>:</p>
</div>
<div class="ltx_para" id="A3.SS2.p2">
<pre class="ltx_verbatim ltx_font_typewriter" id="A3.SS2.p2.1">
Consider the following conversation between a human and an assistant:

$instruction

Please choose the response that is more helpful.

Options:

(A) $answer1
(B) $answer2

The answer is: (
</pre>
</div>
</section>
<section class="ltx_subsection" id="A3.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">C.3 </span>Prompts for RLCD</h3>
<div class="ltx_para" id="A3.SS3.p1">
<p class="ltx_p" id="A3.SS3.p1.1">We adopted the RLCD prompt used from <cite class="ltx_cite ltx_citemacro_citep">(Yang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07513v1#bib.bib47" title="">2023</a>)</cite> for helpful template:</p>
<pre class="ltx_verbatim ltx_font_typewriter" id="A3.SS3.p1.2">
Human: $instruction

Assistant: (giving a helpful response)
</pre>
<p class="ltx_p" id="A3.SS3.p1.3">As well as unhelpful template:</p>
<pre class="ltx_verbatim ltx_font_typewriter" id="A3.SS3.p1.4">
Human: $instruction

Assistant: (giving an unhelpful response)
</pre>
</div>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
</section>
<section class="ltx_appendix" id="A4">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix D </span>Licences and Terms of Service Compliance</h2>
<div class="ltx_para" id="A4.p1">
<p class="ltx_p" id="A4.p1.1">Below, we give all the artifacts that we used and their respective licenses:</p>
</div>
<div class="ltx_para" id="A4.p2">
<ul class="ltx_itemize" id="A4.I1">
<li class="ltx_item" id="A4.I1.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="A4.I1.i1.p1">
<p class="ltx_p" id="A4.I1.i1.p1.1">Alignment Handbook: Apache-2.0</p>
</div>
</li>
<li class="ltx_item" id="A4.I1.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="A4.I1.i2.p1">
<p class="ltx_p" id="A4.I1.i2.p1.1">Mistral 7B: Apache-2.0</p>
</div>
</li>
<li class="ltx_item" id="A4.I1.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="A4.I1.i3.p1">
<p class="ltx_p" id="A4.I1.i3.p1.1">IFEval: Eclipse Public License - v 2.0</p>
</div>
</li>
<li class="ltx_item" id="A4.I1.i4" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="A4.I1.i4.p1">
<p class="ltx_p" id="A4.I1.i4.p1.1">FollowBench: Apache 2.0</p>
</div>
</li>
<li class="ltx_item" id="A4.I1.i5" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="A4.I1.i5.p1">
<p class="ltx_p" id="A4.I1.i5.p1.1">InfoBench: MIT License</p>
</div>
</li>
<li class="ltx_item" id="A4.I1.i6" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="A4.I1.i6.p1">
<p class="ltx_p" id="A4.I1.i6.p1.1">AlpacaEval: Apache 2.0</p>
</div>
</li>
<li class="ltx_item" id="A4.I1.i7" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="A4.I1.i7.p1">
<p class="ltx_p" id="A4.I1.i7.p1.1">MT-Bench: Apache 2.0</p>
</div>
</li>
<li class="ltx_item" id="A4.I1.i8" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="A4.I1.i8.p1">
<p class="ltx_p" id="A4.I1.i8.p1.1">GPT-4 outputs: since we use this for research, we are in compliance with the GPT-4 terms of service.</p>
</div>
</li>
<li class="ltx_item" id="A4.I1.i9" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="A4.I1.i9.p1">
<p class="ltx_p" id="A4.I1.i9.p1.1">Claude outputs: since we use this for research, we are in compliance with the Claude terms of service.</p>
</div>
</li>
</ul>
</div>
</section>
</article>
</div>
<footer class="ltx_page_footer">
<div class="ltx_page_logo">Generated  on Thu Oct 10 00:58:31 2024 by <a class="ltx_LaTeXML_logo" href="http://dlmf.nist.gov/LaTeXML/"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img alt="Mascot Sammy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg=="/></a>
</div></footer>
</div>
</body>
</html>
