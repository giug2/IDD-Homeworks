<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>[2105.09369] User-Level Label Leakage from Gradients in Federated Learning</title><meta property="og:description" content="Federated learning enables multiple users to build a joint model by sharing their model updates (gradients), while their raw data remains local on their devices.
In contrast to the common belief that this provides priv…">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="User-Level Label Leakage from Gradients in Federated Learning">
<meta name="twitter:image:src" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta name="twitter:image:alt" content="ar5iv logo">
<meta property="og:title" content="User-Level Label Leakage from Gradients in Federated Learning">
<meta property="og:site_name" content="ar5iv">
<meta property="og:image" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta property="og:type" content="article">
<meta property="og:url" content="https://ar5iv.labs.arxiv.org/html/2105.09369">

<!--Generated on Fri Mar  8 00:44:38 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="keywords" lang="en" content="Label leakage Federated learning Gradient attack Privacy attack.">

<script>
  function detectColorScheme(){
    var theme="light";
    var current_theme = localStorage.getItem("ar5iv_theme");
    if(current_theme){
      if(current_theme == "dark"){
        theme = "dark";
      } }
    else if(!window.matchMedia) { return false; }
    else if(window.matchMedia("(prefers-color-scheme: dark)").matches) {
      theme = "dark"; }
    if (theme=="dark") {
      document.documentElement.setAttribute("data-theme", "dark");
    } else {
      document.documentElement.setAttribute("data-theme", "light"); } }

  detectColorScheme();

  function toggleColorScheme(){
    var current_theme = localStorage.getItem("ar5iv_theme");
    if (current_theme) {
      if (current_theme == "light") {
        localStorage.setItem("ar5iv_theme", "dark"); }
      else {
        localStorage.setItem("ar5iv_theme", "light"); } }
    else {
        localStorage.setItem("ar5iv_theme", "dark"); }
    detectColorScheme(); }
</script>
<link media="all" rel="stylesheet" href="/assets/ar5iv-fonts.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv-site.0.2.2.css">
</head>
<body>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line"><span id="id1" class="ltx_note ltx_role_institutetext"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_note_type">institutetext: </span>Technical University of Darmstadt, Germany 
<br class="ltx_break"><span id="id1.1" class="ltx_note ltx_role_email"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_note_type">email: </span><em id="id1.1.1" class="ltx_emph ltx_font_italic">firstname.lastname</em>@tu-darmstadt.de 
<br class="ltx_break"><sup id="id1.1.2" class="ltx_sup">∗</sup><em id="id1.1.3" class="ltx_emph ltx_font_italic">firstname.lastname</em>@stud.tu-darmstadt.de</span></span></span> </span></span></span>
<h1 class="ltx_title ltx_title_document">User-Level Label Leakage from Gradients in Federated Learning
</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">
Aidmar Wainakh
</span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Fabrizio Ventola
</span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Till Müßig<sup id="id4.2.id1" class="ltx_sup">∗</sup>
</span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Jens Keim<sup id="id5.2.id1" class="ltx_sup">∗</sup>
</span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Carlos Garcia Cordero
</span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Ephraim Zimmer
</span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Tim Grube
</span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Kristian Kersting
</span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Max Mühlhäuser
</span></span>
</div>

<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p id="id6.id1" class="ltx_p">Federated learning enables multiple users to build a joint model by sharing their model updates (gradients), while their raw data remains local on their devices.
In contrast to the common belief that this provides privacy benefits,
we here add to the very recent results on privacy risks when sharing gradients.
Specifically, we investigate Label Leakage from Gradients (LLG), a novel attack to extract the labels of the users’ training data from their shared gradients.
The attack exploits the direction and magnitude of gradients to determine the presence or absence of any label.
LLG is simple yet effective, capable of leaking potential sensitive information represented by labels, and scales well to arbitrary batch sizes and multiple classes.
We mathematically and empirically demonstrate the validity of the attack under different settings.
Moreover, empirical results show that LLG successfully extracts labels with high accuracy at the early stages of model training.
We also discuss different defense mechanisms against such leakage.
Our findings suggest that gradient compression is a practical technique to mitigate the attack.</p>
</div>
<div class="ltx_keywords">
<h6 class="ltx_title ltx_title_keywords">Keywords: </h6>Label leakage Federated learning Gradient attack Privacy attack.
</div>
<section id="S1" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>Introduction</h2>

<div id="S1.p1" class="ltx_para">
<p id="S1.p1.1" class="ltx_p">In an increasingly interconnected world, the abundance of data and user information has brought <span title="" class="ltx_glossaryref">Machine Learning (ML)</span> techniques into daily life and many services.
Arguably, the most common <span title="" class="ltx_glossaryref">ML</span> approaches work in a centralized fashion,
typically requiring large amounts of user data to be collected and processed by central service providers.
This data can be of sensitive nature, raising concerns about the handling of data in accordance with user expectations and privacy regulations (e.g., the European General Data Protection Regulation, GDPR).</p>
</div>
<div id="S1.p2" class="ltx_para">
<p id="S1.p2.1" class="ltx_p"><span title="" class="ltx_glossaryref">Federated Learning (FL)</span> is an emerging <span title="" class="ltx_glossaryref">ML</span> setting that allegedly enables service providers <em id="S1.p2.1.1" class="ltx_emph ltx_font_italic">and</em> users to utilize the power of <span title="" class="ltx_glossaryref">ML</span> without exposing the user’s personal information.
The general principle of <span title="" class="ltx_glossaryref">FL</span> consists of cooperating to train an <span title="" class="ltx_glossaryref">ML</span> model in a distributed way. Users are given a model, which they can locally train with their sensitive data.
Afterwards, users only share the model gradients of their training endeavors with a central server. The users’ gradients are aggregated to establish the joint model <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib27" title="" class="ltx_ref">27</a>]</cite>.
This general principle is currently believed to reduce the impact on users’ privacy compared to the classical centralized <span title="" class="ltx_glossaryref">ML</span> setting, since personal information does not leave the user, and sharing learning gradients does not supposedly reveal information about the user <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib41" title="" class="ltx_ref">41</a>]</cite>.</p>
</div>
<div id="S1.p3" class="ltx_para">
<p id="S1.p3.1" class="ltx_p">However, a considerable number of recent works have shown that gradients can be exploited to reconstruct the users’ training data in <span title="" class="ltx_glossaryref">FL</span> <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib3" title="" class="ltx_ref">3</a>, <a href="#bib.bib35" title="" class="ltx_ref">35</a>, <a href="#bib.bib12" title="" class="ltx_ref">12</a>, <a href="#bib.bib40" title="" class="ltx_ref">40</a>]</cite>;
while protecting the users’ ground-truth labels from possible leakage has received only limited attention <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib41" title="" class="ltx_ref">41</a>, <a href="#bib.bib38" title="" class="ltx_ref">38</a>, <a href="#bib.bib21" title="" class="ltx_ref">21</a>]</cite>, mainly focusing on gradients generated from a small number of data samples (small batches) or binary classification tasks.
Label leakage, however, is a considerable risk for <span title="" class="ltx_glossaryref">FL</span>.
Both, <span title="" class="ltx_glossaryref">FL</span> as well as the more superordinate setting of distributed <span title="" class="ltx_glossaryref">ML</span> are used in many applications where labels can contain highly sensitive information.
For example, in the medical sector, hospitals employ distributed learning to collaboratively build <span title="" class="ltx_glossaryref">ML</span> models for disease diagnosis and prediction <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib17" title="" class="ltx_ref">17</a>, <a href="#bib.bib11" title="" class="ltx_ref">11</a>]</cite>.
In some cases, the medical data is collected directly from the patients’ personal devices <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib8" title="" class="ltx_ref">8</a>]</cite>, e.g., mobile phones <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib9" title="" class="ltx_ref">9</a>]</cite>, where an application of <span title="" class="ltx_glossaryref">FL</span> could introduce many potential benefits.  Building models in this and many other settings, while maintaining the users’ privacy, would be crucial.
Leaking the labels of the users’ data might disclose their diseases, which is a severe violation of privacy.
It is essential to highlight this issue and explore to what extent gradients can leak information about labels.
For this purpose, developing privacy attacks that exploit gradients is of high importance in order to foster research and development on the mitigation of respective privacy risks. </p>
</div>
<div id="S1.p4" class="ltx_para">
<p id="S1.p4.1" class="ltx_p">Triggered by this, we investigate <span title="" class="ltx_glossaryref">Label Leakage from Gradients (LLG)</span>, a novel attack to extract ground-truth labels from shared gradients trained with mini-batch <span title="" class="ltx_glossaryref">stochastic gradient descent (SGD)</span> for multi-class classification.
<span title="" class="ltx_glossaryref">LLG</span> is based on a combination of mathematical proofs and heuristics derived empirically. 
The attack exploits two properties that the gradients of the last layer of a neural network have:
(<span id="S1.p4.1.1" class="ltx_text ltx_font_bold">P1</span>) The direction of these gradients indicates whether a label is part of the training batch.
(<span id="S1.p4.1.2" class="ltx_text ltx_font_bold">P2</span>) The gradient magnitude can hint towards the number of occurrences of a label in the batch.
Here, we formalize these properties, provide their mathematical proofs, study an extended  threat model, and conduct an extensive evaluation, as follows.</p>
<ul id="S1.I1" class="ltx_itemize">
<li id="S1.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i1.p1" class="ltx_para">
<p id="S1.I1.i1.p1.1" class="ltx_p">We consider four benchmark datasets, namely, MNIST, SVHN, CIFAR-100, and CelebA .
Results show that <span title="" class="ltx_glossaryref">LLG</span> achieves high success rate despite the datasets having different classification targets and complexity levels.</p>
</div>
</li>
<li id="S1.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i2.p1" class="ltx_para">
<p id="S1.I1.i2.p1.1" class="ltx_p">We consider two <span title="" class="ltx_glossaryref">FL</span> algorithms, namely, FedSGD and FedAvg <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib27" title="" class="ltx_ref">27</a>]</cite>.
Results show that for untrained models <span title="" class="ltx_glossaryref">LLG</span> is more effective under FedSGD, yet poses a serious threat to expose labels under FedAvg as well.</p>
</div>
</li>
<li id="S1.I1.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i3.p1" class="ltx_para">
<p id="S1.I1.i3.p1.1" class="ltx_p">We study <span title="" class="ltx_glossaryref">LLG</span> considering different capabilities of the adversary.
Experiments demonstrate that an adversary with an auxiliary dataset, which is similar to the training dataset, can adequately extract labels with an accuracy of <math id="S1.I1.i3.p1.1.m1.1" class="ltx_Math" alttext="&gt;98\%" display="inline"><semantics id="S1.I1.i3.p1.1.m1.1a"><mrow id="S1.I1.i3.p1.1.m1.1.1" xref="S1.I1.i3.p1.1.m1.1.1.cmml"><mi id="S1.I1.i3.p1.1.m1.1.1.2" xref="S1.I1.i3.p1.1.m1.1.1.2.cmml"></mi><mo id="S1.I1.i3.p1.1.m1.1.1.1" xref="S1.I1.i3.p1.1.m1.1.1.1.cmml">&gt;</mo><mrow id="S1.I1.i3.p1.1.m1.1.1.3" xref="S1.I1.i3.p1.1.m1.1.1.3.cmml"><mn id="S1.I1.i3.p1.1.m1.1.1.3.2" xref="S1.I1.i3.p1.1.m1.1.1.3.2.cmml">98</mn><mo id="S1.I1.i3.p1.1.m1.1.1.3.1" xref="S1.I1.i3.p1.1.m1.1.1.3.1.cmml">%</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S1.I1.i3.p1.1.m1.1b"><apply id="S1.I1.i3.p1.1.m1.1.1.cmml" xref="S1.I1.i3.p1.1.m1.1.1"><gt id="S1.I1.i3.p1.1.m1.1.1.1.cmml" xref="S1.I1.i3.p1.1.m1.1.1.1"></gt><csymbol cd="latexml" id="S1.I1.i3.p1.1.m1.1.1.2.cmml" xref="S1.I1.i3.p1.1.m1.1.1.2">absent</csymbol><apply id="S1.I1.i3.p1.1.m1.1.1.3.cmml" xref="S1.I1.i3.p1.1.m1.1.1.3"><csymbol cd="latexml" id="S1.I1.i3.p1.1.m1.1.1.3.1.cmml" xref="S1.I1.i3.p1.1.m1.1.1.3.1">percent</csymbol><cn type="integer" id="S1.I1.i3.p1.1.m1.1.1.3.2.cmml" xref="S1.I1.i3.p1.1.m1.1.1.3.2">98</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.I1.i3.p1.1.m1.1c">&gt;98\%</annotation></semantics></math> at the early stage of the model training under the FedSGD algorithm .</p>
</div>
</li>
<li id="S1.I1.i4" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i4.p1" class="ltx_para">
<p id="S1.I1.i4.p1.1" class="ltx_p">We show that the simple LLG attack can outperform one of the state-of-the-art optimization-based attacks, <span title="" class="ltx_glossaryref">Deep Leakage from Gradients (DLG)</span> <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib41" title="" class="ltx_ref">41</a>]</cite>, under several settings.
Furthermore, <span title="" class="ltx_glossaryref">LLG</span> is orders of magnitude faster than <span title="" class="ltx_glossaryref">DLG</span>.</p>
</div>
</li>
<li id="S1.I1.i5" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i5.p1" class="ltx_para">
<p id="S1.I1.i5.p1.1" class="ltx_p">We also investigate the effectiveness of the attack on various model architectures including simple <span title="" class="ltx_glossaryref">Convolutional Neural Network (CNN)</span>, LeNet <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib20" title="" class="ltx_ref">20</a>]</cite>, and ResNet20 <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib16" title="" class="ltx_ref">16</a>]</cite>.
Results suggest that <span title="" class="ltx_glossaryref">LLG</span> is not highly sensitive to the complexity of the model architecture.</p>
</div>
</li>
<li id="S1.I1.i6" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i6.p1" class="ltx_para">
<p id="S1.I1.i6.p1.1" class="ltx_p">We illustrate the influence of the model convergence status on <span title="" class="ltx_glossaryref">LLG</span>.
Findings reveal that <span title="" class="ltx_glossaryref">LLG</span> can perform best at the early stages of training and still demonstrates information leakage in well-trained models.</p>
</div>
</li>
<li id="S1.I1.i7" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i7.p1" class="ltx_para">
<p id="S1.I1.i7.p1.1" class="ltx_p">Finally, we test <span title="" class="ltx_glossaryref">LLG</span> against two defense mechanisms: noisy gradients and gradient compression (pruning).
Results show that gradient compression with <math id="S1.I1.i7.p1.1.m1.1" class="ltx_Math" alttext="\geq 80\%" display="inline"><semantics id="S1.I1.i7.p1.1.m1.1a"><mrow id="S1.I1.i7.p1.1.m1.1.1" xref="S1.I1.i7.p1.1.m1.1.1.cmml"><mi id="S1.I1.i7.p1.1.m1.1.1.2" xref="S1.I1.i7.p1.1.m1.1.1.2.cmml"></mi><mo id="S1.I1.i7.p1.1.m1.1.1.1" xref="S1.I1.i7.p1.1.m1.1.1.1.cmml">≥</mo><mrow id="S1.I1.i7.p1.1.m1.1.1.3" xref="S1.I1.i7.p1.1.m1.1.1.3.cmml"><mn id="S1.I1.i7.p1.1.m1.1.1.3.2" xref="S1.I1.i7.p1.1.m1.1.1.3.2.cmml">80</mn><mo id="S1.I1.i7.p1.1.m1.1.1.3.1" xref="S1.I1.i7.p1.1.m1.1.1.3.1.cmml">%</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S1.I1.i7.p1.1.m1.1b"><apply id="S1.I1.i7.p1.1.m1.1.1.cmml" xref="S1.I1.i7.p1.1.m1.1.1"><geq id="S1.I1.i7.p1.1.m1.1.1.1.cmml" xref="S1.I1.i7.p1.1.m1.1.1.1"></geq><csymbol cd="latexml" id="S1.I1.i7.p1.1.m1.1.1.2.cmml" xref="S1.I1.i7.p1.1.m1.1.1.2">absent</csymbol><apply id="S1.I1.i7.p1.1.m1.1.1.3.cmml" xref="S1.I1.i7.p1.1.m1.1.1.3"><csymbol cd="latexml" id="S1.I1.i7.p1.1.m1.1.1.3.1.cmml" xref="S1.I1.i7.p1.1.m1.1.1.3.1">percent</csymbol><cn type="integer" id="S1.I1.i7.p1.1.m1.1.1.3.2.cmml" xref="S1.I1.i7.p1.1.m1.1.1.3.2">80</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.I1.i7.p1.1.m1.1c">\geq 80\%</annotation></semantics></math> compression ratio can render the attack ineffective.</p>
</div>
</li>
</ul>
</div>
<div id="S1.p5" class="ltx_para">
<p id="S1.p5.1" class="ltx_p">In this work, we focus on the <span title="" class="ltx_glossaryref">FL</span> and distributed <span title="" class="ltx_glossaryref">ML</span> settings because the surface of the attacks against gradients is much wider compared with the centralized training approach.
However, <span title="" class="ltx_glossaryref">LLG</span> can be applied in other scenarios where the gradients of a target user  are accessible by an adversary.</p>
</div>
<div id="S1.p6" class="ltx_para">
<p id="S1.p6.1" class="ltx_p">We proceed as follows. We start off by reviewing the background and our problem setting in Section <a href="#S2" title="2 Background ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a>. Next, in Section <a href="#S3" title="3 Related work ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a>, we present related work on information leakage from gradients.
We elaborate on our findings regarding gradients properties in Section <a href="#S4" title="4 Gradient analysis ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4</span></a>.
The attack is then explained in Section <a href="#S5" title="5 Label extraction ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5</span></a>.
Before concluding, we present the results of our evaluation in Section <a href="#S6" title="6 Empirical evaluation ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6</span></a>.</p>
</div>
</section>
<section id="S2" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>Background</h2>

<div id="S2.p1" class="ltx_para">
<p id="S2.p1.1" class="ltx_p">In this section, we present the fundamentals of neural networks and <span title="" class="ltx_glossaryref">FL</span>.
Then, we describe our problem setting and the threat model.</p>
</div>
<figure id="S2.F1" class="ltx_figure"><img src="/html/2105.09369/assets/images/threat_overview.png" id="S2.F1.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="359" height="203" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S2.F1.2.1.1" class="ltx_text" style="font-size:90%;">Figure 1</span>: </span><span id="S2.F1.3.2" class="ltx_text" style="font-size:90%;">Federated learning overview with three potential adversary access points (in red). Gradients
are generated by individual users and shared with a central server. An adversary with access to these gradients can exploit them to estimate the presence and frequency of labels, which can be, e.g., a result of a medical imaging technique for disease prediction.</span></figcaption>
</figure>
<section id="S2.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.1 </span>Neural networks</h3>

<div id="S2.SS1.p1" class="ltx_para">
<p id="S2.SS1.p1.9" class="ltx_p"><span title="" class="ltx_glossaryref">Neural Networks (NNs)</span> are a subset of <span title="" class="ltx_glossaryref">ML</span> algorithms;
an <span title="" class="ltx_glossaryref">NN</span> is comprised of layers of nodes (neurons) including an input layer, one or more hidden layers, and an output layer.
The neurons are connected by links associated with weights <math id="S2.SS1.p1.1.m1.1" class="ltx_Math" alttext="\bm{W}" display="inline"><semantics id="S2.SS1.p1.1.m1.1a"><mi id="S2.SS1.p1.1.m1.1.1" xref="S2.SS1.p1.1.m1.1.1.cmml">𝑾</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.1.m1.1b"><ci id="S2.SS1.p1.1.m1.1.1.cmml" xref="S2.SS1.p1.1.m1.1.1">𝑾</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.1.m1.1c">\bm{W}</annotation></semantics></math>.
The <span title="" class="ltx_glossaryref">NN</span> model can be used for a variety of tasks, e.g., regression analysis, classification, and clustering.
In the case of classification, for example, the task of the model <math id="S2.SS1.p1.2.m2.1" class="ltx_Math" alttext="\hat{f}" display="inline"><semantics id="S2.SS1.p1.2.m2.1a"><mover accent="true" id="S2.SS1.p1.2.m2.1.1" xref="S2.SS1.p1.2.m2.1.1.cmml"><mi id="S2.SS1.p1.2.m2.1.1.2" xref="S2.SS1.p1.2.m2.1.1.2.cmml">f</mi><mo id="S2.SS1.p1.2.m2.1.1.1" xref="S2.SS1.p1.2.m2.1.1.1.cmml">^</mo></mover><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.2.m2.1b"><apply id="S2.SS1.p1.2.m2.1.1.cmml" xref="S2.SS1.p1.2.m2.1.1"><ci id="S2.SS1.p1.2.m2.1.1.1.cmml" xref="S2.SS1.p1.2.m2.1.1.1">^</ci><ci id="S2.SS1.p1.2.m2.1.1.2.cmml" xref="S2.SS1.p1.2.m2.1.1.2">𝑓</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.2.m2.1c">\hat{f}</annotation></semantics></math> is to approximate the function <math id="S2.SS1.p1.3.m3.1" class="ltx_Math" alttext="f(\bm{x})=y" display="inline"><semantics id="S2.SS1.p1.3.m3.1a"><mrow id="S2.SS1.p1.3.m3.1.2" xref="S2.SS1.p1.3.m3.1.2.cmml"><mrow id="S2.SS1.p1.3.m3.1.2.2" xref="S2.SS1.p1.3.m3.1.2.2.cmml"><mi id="S2.SS1.p1.3.m3.1.2.2.2" xref="S2.SS1.p1.3.m3.1.2.2.2.cmml">f</mi><mo lspace="0em" rspace="0em" id="S2.SS1.p1.3.m3.1.2.2.1" xref="S2.SS1.p1.3.m3.1.2.2.1.cmml">​</mo><mrow id="S2.SS1.p1.3.m3.1.2.2.3.2" xref="S2.SS1.p1.3.m3.1.2.2.cmml"><mo stretchy="false" id="S2.SS1.p1.3.m3.1.2.2.3.2.1" xref="S2.SS1.p1.3.m3.1.2.2.cmml">(</mo><mi id="S2.SS1.p1.3.m3.1.1" xref="S2.SS1.p1.3.m3.1.1.cmml">𝒙</mi><mo stretchy="false" id="S2.SS1.p1.3.m3.1.2.2.3.2.2" xref="S2.SS1.p1.3.m3.1.2.2.cmml">)</mo></mrow></mrow><mo id="S2.SS1.p1.3.m3.1.2.1" xref="S2.SS1.p1.3.m3.1.2.1.cmml">=</mo><mi id="S2.SS1.p1.3.m3.1.2.3" xref="S2.SS1.p1.3.m3.1.2.3.cmml">y</mi></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.3.m3.1b"><apply id="S2.SS1.p1.3.m3.1.2.cmml" xref="S2.SS1.p1.3.m3.1.2"><eq id="S2.SS1.p1.3.m3.1.2.1.cmml" xref="S2.SS1.p1.3.m3.1.2.1"></eq><apply id="S2.SS1.p1.3.m3.1.2.2.cmml" xref="S2.SS1.p1.3.m3.1.2.2"><times id="S2.SS1.p1.3.m3.1.2.2.1.cmml" xref="S2.SS1.p1.3.m3.1.2.2.1"></times><ci id="S2.SS1.p1.3.m3.1.2.2.2.cmml" xref="S2.SS1.p1.3.m3.1.2.2.2">𝑓</ci><ci id="S2.SS1.p1.3.m3.1.1.cmml" xref="S2.SS1.p1.3.m3.1.1">𝒙</ci></apply><ci id="S2.SS1.p1.3.m3.1.2.3.cmml" xref="S2.SS1.p1.3.m3.1.2.3">𝑦</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.3.m3.1c">f(\bm{x})=y</annotation></semantics></math> where <math id="S2.SS1.p1.4.m4.1" class="ltx_Math" alttext="y" display="inline"><semantics id="S2.SS1.p1.4.m4.1a"><mi id="S2.SS1.p1.4.m4.1.1" xref="S2.SS1.p1.4.m4.1.1.cmml">y</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.4.m4.1b"><ci id="S2.SS1.p1.4.m4.1.1.cmml" xref="S2.SS1.p1.4.m4.1.1">𝑦</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.4.m4.1c">y</annotation></semantics></math> is the class label of a multidimensional data sample <math id="S2.SS1.p1.5.m5.1" class="ltx_Math" alttext="\bm{x}" display="inline"><semantics id="S2.SS1.p1.5.m5.1a"><mi id="S2.SS1.p1.5.m5.1.1" xref="S2.SS1.p1.5.m5.1.1.cmml">𝒙</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.5.m5.1b"><ci id="S2.SS1.p1.5.m5.1.1.cmml" xref="S2.SS1.p1.5.m5.1.1">𝒙</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.5.m5.1c">\bm{x}</annotation></semantics></math>, e.g., an image—matrix of pixels.
To fulfill this task, the model is trained by optimizing the weights <math id="S2.SS1.p1.6.m6.1" class="ltx_Math" alttext="\bm{W}" display="inline"><semantics id="S2.SS1.p1.6.m6.1a"><mi id="S2.SS1.p1.6.m6.1.1" xref="S2.SS1.p1.6.m6.1.1.cmml">𝑾</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.6.m6.1b"><ci id="S2.SS1.p1.6.m6.1.1.cmml" xref="S2.SS1.p1.6.m6.1.1">𝑾</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.6.m6.1c">\bm{W}</annotation></semantics></math> using a loss function <math id="S2.SS1.p1.7.m7.1" class="ltx_Math" alttext="l" display="inline"><semantics id="S2.SS1.p1.7.m7.1a"><mi id="S2.SS1.p1.7.m7.1.1" xref="S2.SS1.p1.7.m7.1.1.cmml">l</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.7.m7.1b"><ci id="S2.SS1.p1.7.m7.1.1.cmml" xref="S2.SS1.p1.7.m7.1.1">𝑙</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.7.m7.1c">l</annotation></semantics></math> and training data consisting of input data <math id="S2.SS1.p1.8.m8.2" class="ltx_Math" alttext="\bm{x}_{i}:i\in[1,N]" display="inline"><semantics id="S2.SS1.p1.8.m8.2a"><mrow id="S2.SS1.p1.8.m8.2.3" xref="S2.SS1.p1.8.m8.2.3.cmml"><msub id="S2.SS1.p1.8.m8.2.3.2" xref="S2.SS1.p1.8.m8.2.3.2.cmml"><mi id="S2.SS1.p1.8.m8.2.3.2.2" xref="S2.SS1.p1.8.m8.2.3.2.2.cmml">𝒙</mi><mi id="S2.SS1.p1.8.m8.2.3.2.3" xref="S2.SS1.p1.8.m8.2.3.2.3.cmml">i</mi></msub><mo lspace="0.278em" rspace="0.278em" id="S2.SS1.p1.8.m8.2.3.1" xref="S2.SS1.p1.8.m8.2.3.1.cmml">:</mo><mrow id="S2.SS1.p1.8.m8.2.3.3" xref="S2.SS1.p1.8.m8.2.3.3.cmml"><mi id="S2.SS1.p1.8.m8.2.3.3.2" xref="S2.SS1.p1.8.m8.2.3.3.2.cmml">i</mi><mo id="S2.SS1.p1.8.m8.2.3.3.1" xref="S2.SS1.p1.8.m8.2.3.3.1.cmml">∈</mo><mrow id="S2.SS1.p1.8.m8.2.3.3.3.2" xref="S2.SS1.p1.8.m8.2.3.3.3.1.cmml"><mo stretchy="false" id="S2.SS1.p1.8.m8.2.3.3.3.2.1" xref="S2.SS1.p1.8.m8.2.3.3.3.1.cmml">[</mo><mn id="S2.SS1.p1.8.m8.1.1" xref="S2.SS1.p1.8.m8.1.1.cmml">1</mn><mo id="S2.SS1.p1.8.m8.2.3.3.3.2.2" xref="S2.SS1.p1.8.m8.2.3.3.3.1.cmml">,</mo><mi id="S2.SS1.p1.8.m8.2.2" xref="S2.SS1.p1.8.m8.2.2.cmml">N</mi><mo stretchy="false" id="S2.SS1.p1.8.m8.2.3.3.3.2.3" xref="S2.SS1.p1.8.m8.2.3.3.3.1.cmml">]</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.8.m8.2b"><apply id="S2.SS1.p1.8.m8.2.3.cmml" xref="S2.SS1.p1.8.m8.2.3"><ci id="S2.SS1.p1.8.m8.2.3.1.cmml" xref="S2.SS1.p1.8.m8.2.3.1">:</ci><apply id="S2.SS1.p1.8.m8.2.3.2.cmml" xref="S2.SS1.p1.8.m8.2.3.2"><csymbol cd="ambiguous" id="S2.SS1.p1.8.m8.2.3.2.1.cmml" xref="S2.SS1.p1.8.m8.2.3.2">subscript</csymbol><ci id="S2.SS1.p1.8.m8.2.3.2.2.cmml" xref="S2.SS1.p1.8.m8.2.3.2.2">𝒙</ci><ci id="S2.SS1.p1.8.m8.2.3.2.3.cmml" xref="S2.SS1.p1.8.m8.2.3.2.3">𝑖</ci></apply><apply id="S2.SS1.p1.8.m8.2.3.3.cmml" xref="S2.SS1.p1.8.m8.2.3.3"><in id="S2.SS1.p1.8.m8.2.3.3.1.cmml" xref="S2.SS1.p1.8.m8.2.3.3.1"></in><ci id="S2.SS1.p1.8.m8.2.3.3.2.cmml" xref="S2.SS1.p1.8.m8.2.3.3.2">𝑖</ci><interval closure="closed" id="S2.SS1.p1.8.m8.2.3.3.3.1.cmml" xref="S2.SS1.p1.8.m8.2.3.3.3.2"><cn type="integer" id="S2.SS1.p1.8.m8.1.1.cmml" xref="S2.SS1.p1.8.m8.1.1">1</cn><ci id="S2.SS1.p1.8.m8.2.2.cmml" xref="S2.SS1.p1.8.m8.2.2">𝑁</ci></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.8.m8.2c">\bm{x}_{i}:i\in[1,N]</annotation></semantics></math> and corresponding labels <math id="S2.SS1.p1.9.m9.1" class="ltx_Math" alttext="y_{i}" display="inline"><semantics id="S2.SS1.p1.9.m9.1a"><msub id="S2.SS1.p1.9.m9.1.1" xref="S2.SS1.p1.9.m9.1.1.cmml"><mi id="S2.SS1.p1.9.m9.1.1.2" xref="S2.SS1.p1.9.m9.1.1.2.cmml">y</mi><mi id="S2.SS1.p1.9.m9.1.1.3" xref="S2.SS1.p1.9.m9.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.9.m9.1b"><apply id="S2.SS1.p1.9.m9.1.1.cmml" xref="S2.SS1.p1.9.m9.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.9.m9.1.1.1.cmml" xref="S2.SS1.p1.9.m9.1.1">subscript</csymbol><ci id="S2.SS1.p1.9.m9.1.1.2.cmml" xref="S2.SS1.p1.9.m9.1.1.2">𝑦</ci><ci id="S2.SS1.p1.9.m9.1.1.3.cmml" xref="S2.SS1.p1.9.m9.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.9.m9.1c">y_{i}</annotation></semantics></math> in order to solve <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib12" title="" class="ltx_ref">12</a>]</cite></p>
<table id="S2.E1" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S2.E1.m1.1" class="ltx_Math" alttext="\min_{\bm{W}}\sum_{i=1}^{N}l_{\bm{W}}(\bm{x}_{i},y_{i})." display="block"><semantics id="S2.E1.m1.1a"><mrow id="S2.E1.m1.1.1.1" xref="S2.E1.m1.1.1.1.1.cmml"><mrow id="S2.E1.m1.1.1.1.1" xref="S2.E1.m1.1.1.1.1.cmml"><munder id="S2.E1.m1.1.1.1.1.4" xref="S2.E1.m1.1.1.1.1.4.cmml"><mi id="S2.E1.m1.1.1.1.1.4.2" xref="S2.E1.m1.1.1.1.1.4.2.cmml">min</mi><mi id="S2.E1.m1.1.1.1.1.4.3" xref="S2.E1.m1.1.1.1.1.4.3.cmml">𝑾</mi></munder><mo lspace="0em" rspace="0em" id="S2.E1.m1.1.1.1.1.3" xref="S2.E1.m1.1.1.1.1.3.cmml">​</mo><mrow id="S2.E1.m1.1.1.1.1.2" xref="S2.E1.m1.1.1.1.1.2.cmml"><munderover id="S2.E1.m1.1.1.1.1.2.3" xref="S2.E1.m1.1.1.1.1.2.3.cmml"><mo movablelimits="false" id="S2.E1.m1.1.1.1.1.2.3.2.2" xref="S2.E1.m1.1.1.1.1.2.3.2.2.cmml">∑</mo><mrow id="S2.E1.m1.1.1.1.1.2.3.2.3" xref="S2.E1.m1.1.1.1.1.2.3.2.3.cmml"><mi id="S2.E1.m1.1.1.1.1.2.3.2.3.2" xref="S2.E1.m1.1.1.1.1.2.3.2.3.2.cmml">i</mi><mo id="S2.E1.m1.1.1.1.1.2.3.2.3.1" xref="S2.E1.m1.1.1.1.1.2.3.2.3.1.cmml">=</mo><mn id="S2.E1.m1.1.1.1.1.2.3.2.3.3" xref="S2.E1.m1.1.1.1.1.2.3.2.3.3.cmml">1</mn></mrow><mi id="S2.E1.m1.1.1.1.1.2.3.3" xref="S2.E1.m1.1.1.1.1.2.3.3.cmml">N</mi></munderover><mrow id="S2.E1.m1.1.1.1.1.2.2" xref="S2.E1.m1.1.1.1.1.2.2.cmml"><msub id="S2.E1.m1.1.1.1.1.2.2.4" xref="S2.E1.m1.1.1.1.1.2.2.4.cmml"><mi id="S2.E1.m1.1.1.1.1.2.2.4.2" xref="S2.E1.m1.1.1.1.1.2.2.4.2.cmml">l</mi><mi id="S2.E1.m1.1.1.1.1.2.2.4.3" xref="S2.E1.m1.1.1.1.1.2.2.4.3.cmml">𝑾</mi></msub><mo lspace="0em" rspace="0em" id="S2.E1.m1.1.1.1.1.2.2.3" xref="S2.E1.m1.1.1.1.1.2.2.3.cmml">​</mo><mrow id="S2.E1.m1.1.1.1.1.2.2.2.2" xref="S2.E1.m1.1.1.1.1.2.2.2.3.cmml"><mo stretchy="false" id="S2.E1.m1.1.1.1.1.2.2.2.2.3" xref="S2.E1.m1.1.1.1.1.2.2.2.3.cmml">(</mo><msub id="S2.E1.m1.1.1.1.1.1.1.1.1.1" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.cmml"><mi id="S2.E1.m1.1.1.1.1.1.1.1.1.1.2" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.2.cmml">𝒙</mi><mi id="S2.E1.m1.1.1.1.1.1.1.1.1.1.3" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S2.E1.m1.1.1.1.1.2.2.2.2.4" xref="S2.E1.m1.1.1.1.1.2.2.2.3.cmml">,</mo><msub id="S2.E1.m1.1.1.1.1.2.2.2.2.2" xref="S2.E1.m1.1.1.1.1.2.2.2.2.2.cmml"><mi id="S2.E1.m1.1.1.1.1.2.2.2.2.2.2" xref="S2.E1.m1.1.1.1.1.2.2.2.2.2.2.cmml">y</mi><mi id="S2.E1.m1.1.1.1.1.2.2.2.2.2.3" xref="S2.E1.m1.1.1.1.1.2.2.2.2.2.3.cmml">i</mi></msub><mo stretchy="false" id="S2.E1.m1.1.1.1.1.2.2.2.2.5" xref="S2.E1.m1.1.1.1.1.2.2.2.3.cmml">)</mo></mrow></mrow></mrow></mrow><mo lspace="0em" id="S2.E1.m1.1.1.1.2" xref="S2.E1.m1.1.1.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.E1.m1.1b"><apply id="S2.E1.m1.1.1.1.1.cmml" xref="S2.E1.m1.1.1.1"><times id="S2.E1.m1.1.1.1.1.3.cmml" xref="S2.E1.m1.1.1.1.1.3"></times><apply id="S2.E1.m1.1.1.1.1.4.cmml" xref="S2.E1.m1.1.1.1.1.4"><csymbol cd="ambiguous" id="S2.E1.m1.1.1.1.1.4.1.cmml" xref="S2.E1.m1.1.1.1.1.4">subscript</csymbol><min id="S2.E1.m1.1.1.1.1.4.2.cmml" xref="S2.E1.m1.1.1.1.1.4.2"></min><ci id="S2.E1.m1.1.1.1.1.4.3.cmml" xref="S2.E1.m1.1.1.1.1.4.3">𝑾</ci></apply><apply id="S2.E1.m1.1.1.1.1.2.cmml" xref="S2.E1.m1.1.1.1.1.2"><apply id="S2.E1.m1.1.1.1.1.2.3.cmml" xref="S2.E1.m1.1.1.1.1.2.3"><csymbol cd="ambiguous" id="S2.E1.m1.1.1.1.1.2.3.1.cmml" xref="S2.E1.m1.1.1.1.1.2.3">superscript</csymbol><apply id="S2.E1.m1.1.1.1.1.2.3.2.cmml" xref="S2.E1.m1.1.1.1.1.2.3"><csymbol cd="ambiguous" id="S2.E1.m1.1.1.1.1.2.3.2.1.cmml" xref="S2.E1.m1.1.1.1.1.2.3">subscript</csymbol><sum id="S2.E1.m1.1.1.1.1.2.3.2.2.cmml" xref="S2.E1.m1.1.1.1.1.2.3.2.2"></sum><apply id="S2.E1.m1.1.1.1.1.2.3.2.3.cmml" xref="S2.E1.m1.1.1.1.1.2.3.2.3"><eq id="S2.E1.m1.1.1.1.1.2.3.2.3.1.cmml" xref="S2.E1.m1.1.1.1.1.2.3.2.3.1"></eq><ci id="S2.E1.m1.1.1.1.1.2.3.2.3.2.cmml" xref="S2.E1.m1.1.1.1.1.2.3.2.3.2">𝑖</ci><cn type="integer" id="S2.E1.m1.1.1.1.1.2.3.2.3.3.cmml" xref="S2.E1.m1.1.1.1.1.2.3.2.3.3">1</cn></apply></apply><ci id="S2.E1.m1.1.1.1.1.2.3.3.cmml" xref="S2.E1.m1.1.1.1.1.2.3.3">𝑁</ci></apply><apply id="S2.E1.m1.1.1.1.1.2.2.cmml" xref="S2.E1.m1.1.1.1.1.2.2"><times id="S2.E1.m1.1.1.1.1.2.2.3.cmml" xref="S2.E1.m1.1.1.1.1.2.2.3"></times><apply id="S2.E1.m1.1.1.1.1.2.2.4.cmml" xref="S2.E1.m1.1.1.1.1.2.2.4"><csymbol cd="ambiguous" id="S2.E1.m1.1.1.1.1.2.2.4.1.cmml" xref="S2.E1.m1.1.1.1.1.2.2.4">subscript</csymbol><ci id="S2.E1.m1.1.1.1.1.2.2.4.2.cmml" xref="S2.E1.m1.1.1.1.1.2.2.4.2">𝑙</ci><ci id="S2.E1.m1.1.1.1.1.2.2.4.3.cmml" xref="S2.E1.m1.1.1.1.1.2.2.4.3">𝑾</ci></apply><interval closure="open" id="S2.E1.m1.1.1.1.1.2.2.2.3.cmml" xref="S2.E1.m1.1.1.1.1.2.2.2.2"><apply id="S2.E1.m1.1.1.1.1.1.1.1.1.1.cmml" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S2.E1.m1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.2">𝒙</ci><ci id="S2.E1.m1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.3">𝑖</ci></apply><apply id="S2.E1.m1.1.1.1.1.2.2.2.2.2.cmml" xref="S2.E1.m1.1.1.1.1.2.2.2.2.2"><csymbol cd="ambiguous" id="S2.E1.m1.1.1.1.1.2.2.2.2.2.1.cmml" xref="S2.E1.m1.1.1.1.1.2.2.2.2.2">subscript</csymbol><ci id="S2.E1.m1.1.1.1.1.2.2.2.2.2.2.cmml" xref="S2.E1.m1.1.1.1.1.2.2.2.2.2.2">𝑦</ci><ci id="S2.E1.m1.1.1.1.1.2.2.2.2.2.3.cmml" xref="S2.E1.m1.1.1.1.1.2.2.2.2.2.3">𝑖</ci></apply></interval></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E1.m1.1c">\min_{\bm{W}}\sum_{i=1}^{N}l_{\bm{W}}(\bm{x}_{i},y_{i}).</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(1)</span></td>
</tr></tbody>
</table>
</div>
<div id="S2.SS1.p2" class="ltx_para">
<p id="S2.SS1.p2.3" class="ltx_p">Minimizing the loss function can be achieved by applying one of the optimization algorithms.
Gradient descent is one of the basic optimization algorithms for finding a local minimum of a differentiable function.
This algorithm is based on gradients <math id="S2.SS1.p2.1.m1.1" class="ltx_Math" alttext="\nabla\bm{W}" display="inline"><semantics id="S2.SS1.p2.1.m1.1a"><mrow id="S2.SS1.p2.1.m1.1.1" xref="S2.SS1.p2.1.m1.1.1.cmml"><mo rspace="0.167em" id="S2.SS1.p2.1.m1.1.1.1" xref="S2.SS1.p2.1.m1.1.1.1.cmml">∇</mo><mi id="S2.SS1.p2.1.m1.1.1.2" xref="S2.SS1.p2.1.m1.1.1.2.cmml">𝑾</mi></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.1.m1.1b"><apply id="S2.SS1.p2.1.m1.1.1.cmml" xref="S2.SS1.p2.1.m1.1.1"><ci id="S2.SS1.p2.1.m1.1.1.1.cmml" xref="S2.SS1.p2.1.m1.1.1.1">∇</ci><ci id="S2.SS1.p2.1.m1.1.1.2.cmml" xref="S2.SS1.p2.1.m1.1.1.2">𝑾</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.1.m1.1c">\nabla\bm{W}</annotation></semantics></math>, which are the derivative of the loss function w.r.t. the model weights <math id="S2.SS1.p2.2.m2.1" class="ltx_Math" alttext="\bm{W}" display="inline"><semantics id="S2.SS1.p2.2.m2.1a"><mi id="S2.SS1.p2.2.m2.1.1" xref="S2.SS1.p2.2.m2.1.1.cmml">𝑾</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.2.m2.1b"><ci id="S2.SS1.p2.2.m2.1.1.cmml" xref="S2.SS1.p2.2.m2.1.1">𝑾</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.2.m2.1c">\bm{W}</annotation></semantics></math>.
The core idea is to update the weights through repeated steps <math id="S2.SS1.p2.3.m3.1" class="ltx_Math" alttext="t" display="inline"><semantics id="S2.SS1.p2.3.m3.1a"><mi id="S2.SS1.p2.3.m3.1.1" xref="S2.SS1.p2.3.m3.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.3.m3.1b"><ci id="S2.SS1.p2.3.m3.1.1.cmml" xref="S2.SS1.p2.3.m3.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.3.m3.1c">t</annotation></semantics></math> in the opposite direction of the gradient because this is the direction of steepest descent.</p>
<table id="S2.E2" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S2.E2.m1.2" class="ltx_Math" alttext="\bm{W}(t+1)=\bm{W}(t)-\eta\nabla\bm{W}," display="block"><semantics id="S2.E2.m1.2a"><mrow id="S2.E2.m1.2.2.1" xref="S2.E2.m1.2.2.1.1.cmml"><mrow id="S2.E2.m1.2.2.1.1" xref="S2.E2.m1.2.2.1.1.cmml"><mrow id="S2.E2.m1.2.2.1.1.1" xref="S2.E2.m1.2.2.1.1.1.cmml"><mi id="S2.E2.m1.2.2.1.1.1.3" xref="S2.E2.m1.2.2.1.1.1.3.cmml">𝑾</mi><mo lspace="0em" rspace="0em" id="S2.E2.m1.2.2.1.1.1.2" xref="S2.E2.m1.2.2.1.1.1.2.cmml">​</mo><mrow id="S2.E2.m1.2.2.1.1.1.1.1" xref="S2.E2.m1.2.2.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S2.E2.m1.2.2.1.1.1.1.1.2" xref="S2.E2.m1.2.2.1.1.1.1.1.1.cmml">(</mo><mrow id="S2.E2.m1.2.2.1.1.1.1.1.1" xref="S2.E2.m1.2.2.1.1.1.1.1.1.cmml"><mi id="S2.E2.m1.2.2.1.1.1.1.1.1.2" xref="S2.E2.m1.2.2.1.1.1.1.1.1.2.cmml">t</mi><mo id="S2.E2.m1.2.2.1.1.1.1.1.1.1" xref="S2.E2.m1.2.2.1.1.1.1.1.1.1.cmml">+</mo><mn id="S2.E2.m1.2.2.1.1.1.1.1.1.3" xref="S2.E2.m1.2.2.1.1.1.1.1.1.3.cmml">1</mn></mrow><mo stretchy="false" id="S2.E2.m1.2.2.1.1.1.1.1.3" xref="S2.E2.m1.2.2.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S2.E2.m1.2.2.1.1.2" xref="S2.E2.m1.2.2.1.1.2.cmml">=</mo><mrow id="S2.E2.m1.2.2.1.1.3" xref="S2.E2.m1.2.2.1.1.3.cmml"><mrow id="S2.E2.m1.2.2.1.1.3.2" xref="S2.E2.m1.2.2.1.1.3.2.cmml"><mi id="S2.E2.m1.2.2.1.1.3.2.2" xref="S2.E2.m1.2.2.1.1.3.2.2.cmml">𝑾</mi><mo lspace="0em" rspace="0em" id="S2.E2.m1.2.2.1.1.3.2.1" xref="S2.E2.m1.2.2.1.1.3.2.1.cmml">​</mo><mrow id="S2.E2.m1.2.2.1.1.3.2.3.2" xref="S2.E2.m1.2.2.1.1.3.2.cmml"><mo stretchy="false" id="S2.E2.m1.2.2.1.1.3.2.3.2.1" xref="S2.E2.m1.2.2.1.1.3.2.cmml">(</mo><mi id="S2.E2.m1.1.1" xref="S2.E2.m1.1.1.cmml">t</mi><mo stretchy="false" id="S2.E2.m1.2.2.1.1.3.2.3.2.2" xref="S2.E2.m1.2.2.1.1.3.2.cmml">)</mo></mrow></mrow><mo id="S2.E2.m1.2.2.1.1.3.1" xref="S2.E2.m1.2.2.1.1.3.1.cmml">−</mo><mrow id="S2.E2.m1.2.2.1.1.3.3" xref="S2.E2.m1.2.2.1.1.3.3.cmml"><mi id="S2.E2.m1.2.2.1.1.3.3.2" xref="S2.E2.m1.2.2.1.1.3.3.2.cmml">η</mi><mo lspace="0.167em" rspace="0em" id="S2.E2.m1.2.2.1.1.3.3.1" xref="S2.E2.m1.2.2.1.1.3.3.1.cmml">​</mo><mrow id="S2.E2.m1.2.2.1.1.3.3.3" xref="S2.E2.m1.2.2.1.1.3.3.3.cmml"><mo rspace="0.167em" id="S2.E2.m1.2.2.1.1.3.3.3.1" xref="S2.E2.m1.2.2.1.1.3.3.3.1.cmml">∇</mo><mi id="S2.E2.m1.2.2.1.1.3.3.3.2" xref="S2.E2.m1.2.2.1.1.3.3.3.2.cmml">𝑾</mi></mrow></mrow></mrow></mrow><mo id="S2.E2.m1.2.2.1.2" xref="S2.E2.m1.2.2.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.E2.m1.2b"><apply id="S2.E2.m1.2.2.1.1.cmml" xref="S2.E2.m1.2.2.1"><eq id="S2.E2.m1.2.2.1.1.2.cmml" xref="S2.E2.m1.2.2.1.1.2"></eq><apply id="S2.E2.m1.2.2.1.1.1.cmml" xref="S2.E2.m1.2.2.1.1.1"><times id="S2.E2.m1.2.2.1.1.1.2.cmml" xref="S2.E2.m1.2.2.1.1.1.2"></times><ci id="S2.E2.m1.2.2.1.1.1.3.cmml" xref="S2.E2.m1.2.2.1.1.1.3">𝑾</ci><apply id="S2.E2.m1.2.2.1.1.1.1.1.1.cmml" xref="S2.E2.m1.2.2.1.1.1.1.1"><plus id="S2.E2.m1.2.2.1.1.1.1.1.1.1.cmml" xref="S2.E2.m1.2.2.1.1.1.1.1.1.1"></plus><ci id="S2.E2.m1.2.2.1.1.1.1.1.1.2.cmml" xref="S2.E2.m1.2.2.1.1.1.1.1.1.2">𝑡</ci><cn type="integer" id="S2.E2.m1.2.2.1.1.1.1.1.1.3.cmml" xref="S2.E2.m1.2.2.1.1.1.1.1.1.3">1</cn></apply></apply><apply id="S2.E2.m1.2.2.1.1.3.cmml" xref="S2.E2.m1.2.2.1.1.3"><minus id="S2.E2.m1.2.2.1.1.3.1.cmml" xref="S2.E2.m1.2.2.1.1.3.1"></minus><apply id="S2.E2.m1.2.2.1.1.3.2.cmml" xref="S2.E2.m1.2.2.1.1.3.2"><times id="S2.E2.m1.2.2.1.1.3.2.1.cmml" xref="S2.E2.m1.2.2.1.1.3.2.1"></times><ci id="S2.E2.m1.2.2.1.1.3.2.2.cmml" xref="S2.E2.m1.2.2.1.1.3.2.2">𝑾</ci><ci id="S2.E2.m1.1.1.cmml" xref="S2.E2.m1.1.1">𝑡</ci></apply><apply id="S2.E2.m1.2.2.1.1.3.3.cmml" xref="S2.E2.m1.2.2.1.1.3.3"><times id="S2.E2.m1.2.2.1.1.3.3.1.cmml" xref="S2.E2.m1.2.2.1.1.3.3.1"></times><ci id="S2.E2.m1.2.2.1.1.3.3.2.cmml" xref="S2.E2.m1.2.2.1.1.3.3.2">𝜂</ci><apply id="S2.E2.m1.2.2.1.1.3.3.3.cmml" xref="S2.E2.m1.2.2.1.1.3.3.3"><ci id="S2.E2.m1.2.2.1.1.3.3.3.1.cmml" xref="S2.E2.m1.2.2.1.1.3.3.3.1">∇</ci><ci id="S2.E2.m1.2.2.1.1.3.3.3.2.cmml" xref="S2.E2.m1.2.2.1.1.3.3.3.2">𝑾</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E2.m1.2c">\bm{W}(t+1)=\bm{W}(t)-\eta\nabla\bm{W},</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(2)</span></td>
</tr></tbody>
</table>
<p id="S2.SS1.p2.6" class="ltx_p">where <math id="S2.SS1.p2.4.m1.1" class="ltx_Math" alttext="\eta" display="inline"><semantics id="S2.SS1.p2.4.m1.1a"><mi id="S2.SS1.p2.4.m1.1.1" xref="S2.SS1.p2.4.m1.1.1.cmml">η</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.4.m1.1b"><ci id="S2.SS1.p2.4.m1.1.1.cmml" xref="S2.SS1.p2.4.m1.1.1">𝜂</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.4.m1.1c">\eta</annotation></semantics></math> is the learning rate, which defines the step size for the model updates in the parameter space. An extension of gradient descent, called Minibatch Stochastic Gradient Descent is widely used for training <span title="" class="ltx_glossaryref">NNs</span>.
This algorithm takes a batch of data samples from the training dataset to compute gradients <math id="S2.SS1.p2.5.m2.1" class="ltx_Math" alttext="\nabla\bm{W}" display="inline"><semantics id="S2.SS1.p2.5.m2.1a"><mrow id="S2.SS1.p2.5.m2.1.1" xref="S2.SS1.p2.5.m2.1.1.cmml"><mo rspace="0.167em" id="S2.SS1.p2.5.m2.1.1.1" xref="S2.SS1.p2.5.m2.1.1.1.cmml">∇</mo><mi id="S2.SS1.p2.5.m2.1.1.2" xref="S2.SS1.p2.5.m2.1.1.2.cmml">𝑾</mi></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.5.m2.1b"><apply id="S2.SS1.p2.5.m2.1.1.cmml" xref="S2.SS1.p2.5.m2.1.1"><ci id="S2.SS1.p2.5.m2.1.1.1.cmml" xref="S2.SS1.p2.5.m2.1.1.1">∇</ci><ci id="S2.SS1.p2.5.m2.1.1.2.cmml" xref="S2.SS1.p2.5.m2.1.1.2">𝑾</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.5.m2.1c">\nabla\bm{W}</annotation></semantics></math> and, subsequently, updates the weights.
The batch size <math id="S2.SS1.p2.6.m3.1" class="ltx_Math" alttext="B" display="inline"><semantics id="S2.SS1.p2.6.m3.1a"><mi id="S2.SS1.p2.6.m3.1.1" xref="S2.SS1.p2.6.m3.1.1.cmml">B</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.6.m3.1b"><ci id="S2.SS1.p2.6.m3.1.1.cmml" xref="S2.SS1.p2.6.m3.1.1">𝐵</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.6.m3.1c">B</annotation></semantics></math> is the number of data samples given to the network for each weight update.</p>
</div>
</section>
<section id="S2.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.2 </span>Federated learning</h3>

<div id="S2.SS2.p1" class="ltx_para">
<p id="S2.SS2.p1.7" class="ltx_p"><span title="" class="ltx_glossaryref">Federated Learning (FL)</span> is a machine learning setting that enables a set of <math id="S2.SS2.p1.1.m1.1" class="ltx_Math" alttext="U" display="inline"><semantics id="S2.SS2.p1.1.m1.1a"><mi id="S2.SS2.p1.1.m1.1.1" xref="S2.SS2.p1.1.m1.1.1.cmml">U</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.1.m1.1b"><ci id="S2.SS2.p1.1.m1.1.1.cmml" xref="S2.SS2.p1.1.m1.1.1">𝑈</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.1.m1.1c">U</annotation></semantics></math> users to collaboratively train a joint model under the coordination of a central server <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib18" title="" class="ltx_ref">18</a>]</cite>.
For each round <math id="S2.SS2.p1.2.m2.1" class="ltx_Math" alttext="t" display="inline"><semantics id="S2.SS2.p1.2.m2.1a"><mi id="S2.SS2.p1.2.m2.1.1" xref="S2.SS2.p1.2.m2.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.2.m2.1b"><ci id="S2.SS2.p1.2.m2.1.1.cmml" xref="S2.SS2.p1.2.m2.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.2.m2.1c">t</annotation></semantics></math> of the global training process, a subset of users <math id="S2.SS2.p1.3.m3.1" class="ltx_Math" alttext="K_{t}\ll U" display="inline"><semantics id="S2.SS2.p1.3.m3.1a"><mrow id="S2.SS2.p1.3.m3.1.1" xref="S2.SS2.p1.3.m3.1.1.cmml"><msub id="S2.SS2.p1.3.m3.1.1.2" xref="S2.SS2.p1.3.m3.1.1.2.cmml"><mi id="S2.SS2.p1.3.m3.1.1.2.2" xref="S2.SS2.p1.3.m3.1.1.2.2.cmml">K</mi><mi id="S2.SS2.p1.3.m3.1.1.2.3" xref="S2.SS2.p1.3.m3.1.1.2.3.cmml">t</mi></msub><mo id="S2.SS2.p1.3.m3.1.1.1" xref="S2.SS2.p1.3.m3.1.1.1.cmml">≪</mo><mi id="S2.SS2.p1.3.m3.1.1.3" xref="S2.SS2.p1.3.m3.1.1.3.cmml">U</mi></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.3.m3.1b"><apply id="S2.SS2.p1.3.m3.1.1.cmml" xref="S2.SS2.p1.3.m3.1.1"><csymbol cd="latexml" id="S2.SS2.p1.3.m3.1.1.1.cmml" xref="S2.SS2.p1.3.m3.1.1.1">much-less-than</csymbol><apply id="S2.SS2.p1.3.m3.1.1.2.cmml" xref="S2.SS2.p1.3.m3.1.1.2"><csymbol cd="ambiguous" id="S2.SS2.p1.3.m3.1.1.2.1.cmml" xref="S2.SS2.p1.3.m3.1.1.2">subscript</csymbol><ci id="S2.SS2.p1.3.m3.1.1.2.2.cmml" xref="S2.SS2.p1.3.m3.1.1.2.2">𝐾</ci><ci id="S2.SS2.p1.3.m3.1.1.2.3.cmml" xref="S2.SS2.p1.3.m3.1.1.2.3">𝑡</ci></apply><ci id="S2.SS2.p1.3.m3.1.1.3.cmml" xref="S2.SS2.p1.3.m3.1.1.3">𝑈</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.3.m3.1c">K_{t}\ll U</annotation></semantics></math> is selected to train the model locally on their data.
In particular, they optimize the model weights <math id="S2.SS2.p1.4.m4.1" class="ltx_Math" alttext="\bm{W}" display="inline"><semantics id="S2.SS2.p1.4.m4.1a"><mi id="S2.SS2.p1.4.m4.1.1" xref="S2.SS2.p1.4.m4.1.1.cmml">𝑾</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.4.m4.1b"><ci id="S2.SS2.p1.4.m4.1.1.cmml" xref="S2.SS2.p1.4.m4.1.1">𝑾</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.4.m4.1c">\bm{W}</annotation></semantics></math> based on the gradients <math id="S2.SS2.p1.5.m5.1" class="ltx_Math" alttext="\nabla\bm{W}" display="inline"><semantics id="S2.SS2.p1.5.m5.1a"><mrow id="S2.SS2.p1.5.m5.1.1" xref="S2.SS2.p1.5.m5.1.1.cmml"><mo rspace="0.167em" id="S2.SS2.p1.5.m5.1.1.1" xref="S2.SS2.p1.5.m5.1.1.1.cmml">∇</mo><mi id="S2.SS2.p1.5.m5.1.1.2" xref="S2.SS2.p1.5.m5.1.1.2.cmml">𝑾</mi></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.5.m5.1b"><apply id="S2.SS2.p1.5.m5.1.1.cmml" xref="S2.SS2.p1.5.m5.1.1"><ci id="S2.SS2.p1.5.m5.1.1.1.cmml" xref="S2.SS2.p1.5.m5.1.1.1">∇</ci><ci id="S2.SS2.p1.5.m5.1.1.2.cmml" xref="S2.SS2.p1.5.m5.1.1.2">𝑾</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.5.m5.1c">\nabla\bm{W}</annotation></semantics></math>. Users can take one step of gradient descent (FedSGD <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib27" title="" class="ltx_ref">27</a>]</cite>) or multiple steps (FedAvg <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib27" title="" class="ltx_ref">27</a>]</cite>) before sharing
the gradients <math id="S2.SS2.p1.6.m6.1" class="ltx_Math" alttext="\nabla\bm{W}" display="inline"><semantics id="S2.SS2.p1.6.m6.1a"><mrow id="S2.SS2.p1.6.m6.1.1" xref="S2.SS2.p1.6.m6.1.1.cmml"><mo rspace="0.167em" id="S2.SS2.p1.6.m6.1.1.1" xref="S2.SS2.p1.6.m6.1.1.1.cmml">∇</mo><mi id="S2.SS2.p1.6.m6.1.1.2" xref="S2.SS2.p1.6.m6.1.1.2.cmml">𝑾</mi></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.6.m6.1b"><apply id="S2.SS2.p1.6.m6.1.1.cmml" xref="S2.SS2.p1.6.m6.1.1"><ci id="S2.SS2.p1.6.m6.1.1.1.cmml" xref="S2.SS2.p1.6.m6.1.1.1">∇</ci><ci id="S2.SS2.p1.6.m6.1.1.2.cmml" xref="S2.SS2.p1.6.m6.1.1.2">𝑾</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.6.m6.1c">\nabla\bm{W}</annotation></semantics></math> with the server.  The server calculates a weighted average to aggregate the gradients from the <math id="S2.SS2.p1.7.m7.1" class="ltx_Math" alttext="K_{t}" display="inline"><semantics id="S2.SS2.p1.7.m7.1a"><msub id="S2.SS2.p1.7.m7.1.1" xref="S2.SS2.p1.7.m7.1.1.cmml"><mi id="S2.SS2.p1.7.m7.1.1.2" xref="S2.SS2.p1.7.m7.1.1.2.cmml">K</mi><mi id="S2.SS2.p1.7.m7.1.1.3" xref="S2.SS2.p1.7.m7.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.7.m7.1b"><apply id="S2.SS2.p1.7.m7.1.1.cmml" xref="S2.SS2.p1.7.m7.1.1"><csymbol cd="ambiguous" id="S2.SS2.p1.7.m7.1.1.1.cmml" xref="S2.SS2.p1.7.m7.1.1">subscript</csymbol><ci id="S2.SS2.p1.7.m7.1.1.2.cmml" xref="S2.SS2.p1.7.m7.1.1.2">𝐾</ci><ci id="S2.SS2.p1.7.m7.1.1.3.cmml" xref="S2.SS2.p1.7.m7.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.7.m7.1c">K_{t}</annotation></semantics></math> users, and updates the global model</p>
<table id="S2.E3" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S2.E3.m1.2" class="ltx_Math" alttext="\bm{W}(t+1)=\bm{W}(t)-\eta\sum_{k=1}^{K_{t}}\frac{v_{k}}{v}\nabla\bm{W}^{k}\\
," display="block"><semantics id="S2.E3.m1.2a"><mrow id="S2.E3.m1.2.2.1" xref="S2.E3.m1.2.2.1.1.cmml"><mrow id="S2.E3.m1.2.2.1.1" xref="S2.E3.m1.2.2.1.1.cmml"><mrow id="S2.E3.m1.2.2.1.1.1" xref="S2.E3.m1.2.2.1.1.1.cmml"><mi id="S2.E3.m1.2.2.1.1.1.3" xref="S2.E3.m1.2.2.1.1.1.3.cmml">𝑾</mi><mo lspace="0em" rspace="0em" id="S2.E3.m1.2.2.1.1.1.2" xref="S2.E3.m1.2.2.1.1.1.2.cmml">​</mo><mrow id="S2.E3.m1.2.2.1.1.1.1.1" xref="S2.E3.m1.2.2.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S2.E3.m1.2.2.1.1.1.1.1.2" xref="S2.E3.m1.2.2.1.1.1.1.1.1.cmml">(</mo><mrow id="S2.E3.m1.2.2.1.1.1.1.1.1" xref="S2.E3.m1.2.2.1.1.1.1.1.1.cmml"><mi id="S2.E3.m1.2.2.1.1.1.1.1.1.2" xref="S2.E3.m1.2.2.1.1.1.1.1.1.2.cmml">t</mi><mo id="S2.E3.m1.2.2.1.1.1.1.1.1.1" xref="S2.E3.m1.2.2.1.1.1.1.1.1.1.cmml">+</mo><mn id="S2.E3.m1.2.2.1.1.1.1.1.1.3" xref="S2.E3.m1.2.2.1.1.1.1.1.1.3.cmml">1</mn></mrow><mo stretchy="false" id="S2.E3.m1.2.2.1.1.1.1.1.3" xref="S2.E3.m1.2.2.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S2.E3.m1.2.2.1.1.2" xref="S2.E3.m1.2.2.1.1.2.cmml">=</mo><mrow id="S2.E3.m1.2.2.1.1.3" xref="S2.E3.m1.2.2.1.1.3.cmml"><mrow id="S2.E3.m1.2.2.1.1.3.2" xref="S2.E3.m1.2.2.1.1.3.2.cmml"><mi id="S2.E3.m1.2.2.1.1.3.2.2" xref="S2.E3.m1.2.2.1.1.3.2.2.cmml">𝑾</mi><mo lspace="0em" rspace="0em" id="S2.E3.m1.2.2.1.1.3.2.1" xref="S2.E3.m1.2.2.1.1.3.2.1.cmml">​</mo><mrow id="S2.E3.m1.2.2.1.1.3.2.3.2" xref="S2.E3.m1.2.2.1.1.3.2.cmml"><mo stretchy="false" id="S2.E3.m1.2.2.1.1.3.2.3.2.1" xref="S2.E3.m1.2.2.1.1.3.2.cmml">(</mo><mi id="S2.E3.m1.1.1" xref="S2.E3.m1.1.1.cmml">t</mi><mo stretchy="false" id="S2.E3.m1.2.2.1.1.3.2.3.2.2" xref="S2.E3.m1.2.2.1.1.3.2.cmml">)</mo></mrow></mrow><mo id="S2.E3.m1.2.2.1.1.3.1" xref="S2.E3.m1.2.2.1.1.3.1.cmml">−</mo><mrow id="S2.E3.m1.2.2.1.1.3.3" xref="S2.E3.m1.2.2.1.1.3.3.cmml"><mi id="S2.E3.m1.2.2.1.1.3.3.2" xref="S2.E3.m1.2.2.1.1.3.3.2.cmml">η</mi><mo lspace="0em" rspace="0em" id="S2.E3.m1.2.2.1.1.3.3.1" xref="S2.E3.m1.2.2.1.1.3.3.1.cmml">​</mo><mrow id="S2.E3.m1.2.2.1.1.3.3.3" xref="S2.E3.m1.2.2.1.1.3.3.3.cmml"><munderover id="S2.E3.m1.2.2.1.1.3.3.3.1" xref="S2.E3.m1.2.2.1.1.3.3.3.1.cmml"><mo movablelimits="false" id="S2.E3.m1.2.2.1.1.3.3.3.1.2.2" xref="S2.E3.m1.2.2.1.1.3.3.3.1.2.2.cmml">∑</mo><mrow id="S2.E3.m1.2.2.1.1.3.3.3.1.2.3" xref="S2.E3.m1.2.2.1.1.3.3.3.1.2.3.cmml"><mi id="S2.E3.m1.2.2.1.1.3.3.3.1.2.3.2" xref="S2.E3.m1.2.2.1.1.3.3.3.1.2.3.2.cmml">k</mi><mo id="S2.E3.m1.2.2.1.1.3.3.3.1.2.3.1" xref="S2.E3.m1.2.2.1.1.3.3.3.1.2.3.1.cmml">=</mo><mn id="S2.E3.m1.2.2.1.1.3.3.3.1.2.3.3" xref="S2.E3.m1.2.2.1.1.3.3.3.1.2.3.3.cmml">1</mn></mrow><msub id="S2.E3.m1.2.2.1.1.3.3.3.1.3" xref="S2.E3.m1.2.2.1.1.3.3.3.1.3.cmml"><mi id="S2.E3.m1.2.2.1.1.3.3.3.1.3.2" xref="S2.E3.m1.2.2.1.1.3.3.3.1.3.2.cmml">K</mi><mi id="S2.E3.m1.2.2.1.1.3.3.3.1.3.3" xref="S2.E3.m1.2.2.1.1.3.3.3.1.3.3.cmml">t</mi></msub></munderover><mrow id="S2.E3.m1.2.2.1.1.3.3.3.2" xref="S2.E3.m1.2.2.1.1.3.3.3.2.cmml"><mfrac id="S2.E3.m1.2.2.1.1.3.3.3.2.2" xref="S2.E3.m1.2.2.1.1.3.3.3.2.2.cmml"><msub id="S2.E3.m1.2.2.1.1.3.3.3.2.2.2" xref="S2.E3.m1.2.2.1.1.3.3.3.2.2.2.cmml"><mi id="S2.E3.m1.2.2.1.1.3.3.3.2.2.2.2" xref="S2.E3.m1.2.2.1.1.3.3.3.2.2.2.2.cmml">v</mi><mi id="S2.E3.m1.2.2.1.1.3.3.3.2.2.2.3" xref="S2.E3.m1.2.2.1.1.3.3.3.2.2.2.3.cmml">k</mi></msub><mi id="S2.E3.m1.2.2.1.1.3.3.3.2.2.3" xref="S2.E3.m1.2.2.1.1.3.3.3.2.2.3.cmml">v</mi></mfrac><mo lspace="0.167em" rspace="0em" id="S2.E3.m1.2.2.1.1.3.3.3.2.1" xref="S2.E3.m1.2.2.1.1.3.3.3.2.1.cmml">​</mo><mrow id="S2.E3.m1.2.2.1.1.3.3.3.2.3" xref="S2.E3.m1.2.2.1.1.3.3.3.2.3.cmml"><mo rspace="0.167em" id="S2.E3.m1.2.2.1.1.3.3.3.2.3.1" xref="S2.E3.m1.2.2.1.1.3.3.3.2.3.1.cmml">∇</mo><msup id="S2.E3.m1.2.2.1.1.3.3.3.2.3.2" xref="S2.E3.m1.2.2.1.1.3.3.3.2.3.2.cmml"><mi id="S2.E3.m1.2.2.1.1.3.3.3.2.3.2.2" xref="S2.E3.m1.2.2.1.1.3.3.3.2.3.2.2.cmml">𝑾</mi><mi id="S2.E3.m1.2.2.1.1.3.3.3.2.3.2.3" xref="S2.E3.m1.2.2.1.1.3.3.3.2.3.2.3.cmml">k</mi></msup></mrow></mrow></mrow></mrow></mrow></mrow><mo id="S2.E3.m1.2.2.1.2" xref="S2.E3.m1.2.2.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.E3.m1.2b"><apply id="S2.E3.m1.2.2.1.1.cmml" xref="S2.E3.m1.2.2.1"><eq id="S2.E3.m1.2.2.1.1.2.cmml" xref="S2.E3.m1.2.2.1.1.2"></eq><apply id="S2.E3.m1.2.2.1.1.1.cmml" xref="S2.E3.m1.2.2.1.1.1"><times id="S2.E3.m1.2.2.1.1.1.2.cmml" xref="S2.E3.m1.2.2.1.1.1.2"></times><ci id="S2.E3.m1.2.2.1.1.1.3.cmml" xref="S2.E3.m1.2.2.1.1.1.3">𝑾</ci><apply id="S2.E3.m1.2.2.1.1.1.1.1.1.cmml" xref="S2.E3.m1.2.2.1.1.1.1.1"><plus id="S2.E3.m1.2.2.1.1.1.1.1.1.1.cmml" xref="S2.E3.m1.2.2.1.1.1.1.1.1.1"></plus><ci id="S2.E3.m1.2.2.1.1.1.1.1.1.2.cmml" xref="S2.E3.m1.2.2.1.1.1.1.1.1.2">𝑡</ci><cn type="integer" id="S2.E3.m1.2.2.1.1.1.1.1.1.3.cmml" xref="S2.E3.m1.2.2.1.1.1.1.1.1.3">1</cn></apply></apply><apply id="S2.E3.m1.2.2.1.1.3.cmml" xref="S2.E3.m1.2.2.1.1.3"><minus id="S2.E3.m1.2.2.1.1.3.1.cmml" xref="S2.E3.m1.2.2.1.1.3.1"></minus><apply id="S2.E3.m1.2.2.1.1.3.2.cmml" xref="S2.E3.m1.2.2.1.1.3.2"><times id="S2.E3.m1.2.2.1.1.3.2.1.cmml" xref="S2.E3.m1.2.2.1.1.3.2.1"></times><ci id="S2.E3.m1.2.2.1.1.3.2.2.cmml" xref="S2.E3.m1.2.2.1.1.3.2.2">𝑾</ci><ci id="S2.E3.m1.1.1.cmml" xref="S2.E3.m1.1.1">𝑡</ci></apply><apply id="S2.E3.m1.2.2.1.1.3.3.cmml" xref="S2.E3.m1.2.2.1.1.3.3"><times id="S2.E3.m1.2.2.1.1.3.3.1.cmml" xref="S2.E3.m1.2.2.1.1.3.3.1"></times><ci id="S2.E3.m1.2.2.1.1.3.3.2.cmml" xref="S2.E3.m1.2.2.1.1.3.3.2">𝜂</ci><apply id="S2.E3.m1.2.2.1.1.3.3.3.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3"><apply id="S2.E3.m1.2.2.1.1.3.3.3.1.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.1"><csymbol cd="ambiguous" id="S2.E3.m1.2.2.1.1.3.3.3.1.1.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.1">superscript</csymbol><apply id="S2.E3.m1.2.2.1.1.3.3.3.1.2.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.1"><csymbol cd="ambiguous" id="S2.E3.m1.2.2.1.1.3.3.3.1.2.1.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.1">subscript</csymbol><sum id="S2.E3.m1.2.2.1.1.3.3.3.1.2.2.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.1.2.2"></sum><apply id="S2.E3.m1.2.2.1.1.3.3.3.1.2.3.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.1.2.3"><eq id="S2.E3.m1.2.2.1.1.3.3.3.1.2.3.1.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.1.2.3.1"></eq><ci id="S2.E3.m1.2.2.1.1.3.3.3.1.2.3.2.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.1.2.3.2">𝑘</ci><cn type="integer" id="S2.E3.m1.2.2.1.1.3.3.3.1.2.3.3.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.1.2.3.3">1</cn></apply></apply><apply id="S2.E3.m1.2.2.1.1.3.3.3.1.3.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.1.3"><csymbol cd="ambiguous" id="S2.E3.m1.2.2.1.1.3.3.3.1.3.1.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.1.3">subscript</csymbol><ci id="S2.E3.m1.2.2.1.1.3.3.3.1.3.2.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.1.3.2">𝐾</ci><ci id="S2.E3.m1.2.2.1.1.3.3.3.1.3.3.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.1.3.3">𝑡</ci></apply></apply><apply id="S2.E3.m1.2.2.1.1.3.3.3.2.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.2"><times id="S2.E3.m1.2.2.1.1.3.3.3.2.1.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.2.1"></times><apply id="S2.E3.m1.2.2.1.1.3.3.3.2.2.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.2.2"><divide id="S2.E3.m1.2.2.1.1.3.3.3.2.2.1.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.2.2"></divide><apply id="S2.E3.m1.2.2.1.1.3.3.3.2.2.2.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.2.2.2"><csymbol cd="ambiguous" id="S2.E3.m1.2.2.1.1.3.3.3.2.2.2.1.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.2.2.2">subscript</csymbol><ci id="S2.E3.m1.2.2.1.1.3.3.3.2.2.2.2.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.2.2.2.2">𝑣</ci><ci id="S2.E3.m1.2.2.1.1.3.3.3.2.2.2.3.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.2.2.2.3">𝑘</ci></apply><ci id="S2.E3.m1.2.2.1.1.3.3.3.2.2.3.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.2.2.3">𝑣</ci></apply><apply id="S2.E3.m1.2.2.1.1.3.3.3.2.3.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.2.3"><ci id="S2.E3.m1.2.2.1.1.3.3.3.2.3.1.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.2.3.1">∇</ci><apply id="S2.E3.m1.2.2.1.1.3.3.3.2.3.2.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.2.3.2"><csymbol cd="ambiguous" id="S2.E3.m1.2.2.1.1.3.3.3.2.3.2.1.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.2.3.2">superscript</csymbol><ci id="S2.E3.m1.2.2.1.1.3.3.3.2.3.2.2.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.2.3.2.2">𝑾</ci><ci id="S2.E3.m1.2.2.1.1.3.3.3.2.3.2.3.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.2.3.2.3">𝑘</ci></apply></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E3.m1.2c">\bm{W}(t+1)=\bm{W}(t)-\eta\sum_{k=1}^{K_{t}}\frac{v_{k}}{v}\nabla\bm{W}^{k}\\
,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(3)</span></td>
</tr></tbody>
</table>
<p id="S2.SS2.p1.10" class="ltx_p">where <math id="S2.SS2.p1.8.m1.1" class="ltx_Math" alttext="v_{k}" display="inline"><semantics id="S2.SS2.p1.8.m1.1a"><msub id="S2.SS2.p1.8.m1.1.1" xref="S2.SS2.p1.8.m1.1.1.cmml"><mi id="S2.SS2.p1.8.m1.1.1.2" xref="S2.SS2.p1.8.m1.1.1.2.cmml">v</mi><mi id="S2.SS2.p1.8.m1.1.1.3" xref="S2.SS2.p1.8.m1.1.1.3.cmml">k</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.8.m1.1b"><apply id="S2.SS2.p1.8.m1.1.1.cmml" xref="S2.SS2.p1.8.m1.1.1"><csymbol cd="ambiguous" id="S2.SS2.p1.8.m1.1.1.1.cmml" xref="S2.SS2.p1.8.m1.1.1">subscript</csymbol><ci id="S2.SS2.p1.8.m1.1.1.2.cmml" xref="S2.SS2.p1.8.m1.1.1.2">𝑣</ci><ci id="S2.SS2.p1.8.m1.1.1.3.cmml" xref="S2.SS2.p1.8.m1.1.1.3">𝑘</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.8.m1.1c">v_{k}</annotation></semantics></math> is the number of data samples of user <math id="S2.SS2.p1.9.m2.1" class="ltx_Math" alttext="k" display="inline"><semantics id="S2.SS2.p1.9.m2.1a"><mi id="S2.SS2.p1.9.m2.1.1" xref="S2.SS2.p1.9.m2.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.9.m2.1b"><ci id="S2.SS2.p1.9.m2.1.1.cmml" xref="S2.SS2.p1.9.m2.1.1">𝑘</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.9.m2.1c">k</annotation></semantics></math>, and <math id="S2.SS2.p1.10.m3.1" class="ltx_Math" alttext="v" display="inline"><semantics id="S2.SS2.p1.10.m3.1a"><mi id="S2.SS2.p1.10.m3.1.1" xref="S2.SS2.p1.10.m3.1.1.cmml">v</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.10.m3.1b"><ci id="S2.SS2.p1.10.m3.1.1.cmml" xref="S2.SS2.p1.10.m3.1.1">𝑣</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.10.m3.1c">v</annotation></semantics></math> is total number of data samples. 
This process is repeated until the model potentially converges <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib27" title="" class="ltx_ref">27</a>]</cite>.
This setting mitigates a number of privacy risks that are typically associated with conventional machine learning, where all training data should be collected, then used to train a model <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib18" title="" class="ltx_ref">18</a>]</cite>.</p>
</div>
</section>
<section id="S2.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.3 </span>Problem setting</h3>

<div id="S2.SS3.p1" class="ltx_para">
<p id="S2.SS3.p1.13" class="ltx_p">We consider a federated setting where <math id="S2.SS3.p1.1.m1.1" class="ltx_Math" alttext="U" display="inline"><semantics id="S2.SS3.p1.1.m1.1a"><mi id="S2.SS3.p1.1.m1.1.1" xref="S2.SS3.p1.1.m1.1.1.cmml">U</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.1.m1.1b"><ci id="S2.SS3.p1.1.m1.1.1.cmml" xref="S2.SS3.p1.1.m1.1.1">𝑈</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.1.m1.1c">U</annotation></semantics></math> users jointly train an <span title="" class="ltx_glossaryref">NN</span> model for a supervised task using either the FedSGD or FedAvg algorithm <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib27" title="" class="ltx_ref">27</a>]</cite>.
For FedSGD, the users train the model locally for one iteration on a batch of their data samples and labels.
In FedAvg, each user trains the model for several iterations (multiple batches).
We assume the users to be honest, i.e., they train the model with real data and correct labels. 
Then, the users share the gradients resulted from the local training with the server.
We assume that the model consists of <math id="S2.SS3.p1.2.m2.1" class="ltx_Math" alttext="L" display="inline"><semantics id="S2.SS3.p1.2.m2.1a"><mi id="S2.SS3.p1.2.m2.1.1" xref="S2.SS3.p1.2.m2.1.1.cmml">L</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.2.m2.1b"><ci id="S2.SS3.p1.2.m2.1.1.cmml" xref="S2.SS3.p1.2.m2.1.1">𝐿</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.2.m2.1c">L</annotation></semantics></math> layers and is trained with cross-entropy loss <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib14" title="" class="ltx_ref">14</a>]</cite> over one-hot labels for a multi-class classification task.
For the studied attack, we focus on the gradients <math id="S2.SS3.p1.3.m3.1" class="ltx_Math" alttext="\nabla\bm{W}_{L}" display="inline"><semantics id="S2.SS3.p1.3.m3.1a"><mrow id="S2.SS3.p1.3.m3.1.1" xref="S2.SS3.p1.3.m3.1.1.cmml"><mo rspace="0.167em" id="S2.SS3.p1.3.m3.1.1.1" xref="S2.SS3.p1.3.m3.1.1.1.cmml">∇</mo><msub id="S2.SS3.p1.3.m3.1.1.2" xref="S2.SS3.p1.3.m3.1.1.2.cmml"><mi id="S2.SS3.p1.3.m3.1.1.2.2" xref="S2.SS3.p1.3.m3.1.1.2.2.cmml">𝑾</mi><mi id="S2.SS3.p1.3.m3.1.1.2.3" xref="S2.SS3.p1.3.m3.1.1.2.3.cmml">L</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.3.m3.1b"><apply id="S2.SS3.p1.3.m3.1.1.cmml" xref="S2.SS3.p1.3.m3.1.1"><ci id="S2.SS3.p1.3.m3.1.1.1.cmml" xref="S2.SS3.p1.3.m3.1.1.1">∇</ci><apply id="S2.SS3.p1.3.m3.1.1.2.cmml" xref="S2.SS3.p1.3.m3.1.1.2"><csymbol cd="ambiguous" id="S2.SS3.p1.3.m3.1.1.2.1.cmml" xref="S2.SS3.p1.3.m3.1.1.2">subscript</csymbol><ci id="S2.SS3.p1.3.m3.1.1.2.2.cmml" xref="S2.SS3.p1.3.m3.1.1.2.2">𝑾</ci><ci id="S2.SS3.p1.3.m3.1.1.2.3.cmml" xref="S2.SS3.p1.3.m3.1.1.2.3">𝐿</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.3.m3.1c">\nabla\bm{W}_{L}</annotation></semantics></math> w.r.t. the last-layer weights <math id="S2.SS3.p1.4.m4.1" class="ltx_Math" alttext="\bm{W}_{L}" display="inline"><semantics id="S2.SS3.p1.4.m4.1a"><msub id="S2.SS3.p1.4.m4.1.1" xref="S2.SS3.p1.4.m4.1.1.cmml"><mi id="S2.SS3.p1.4.m4.1.1.2" xref="S2.SS3.p1.4.m4.1.1.2.cmml">𝑾</mi><mi id="S2.SS3.p1.4.m4.1.1.3" xref="S2.SS3.p1.4.m4.1.1.3.cmml">L</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.4.m4.1b"><apply id="S2.SS3.p1.4.m4.1.1.cmml" xref="S2.SS3.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S2.SS3.p1.4.m4.1.1.1.cmml" xref="S2.SS3.p1.4.m4.1.1">subscript</csymbol><ci id="S2.SS3.p1.4.m4.1.1.2.cmml" xref="S2.SS3.p1.4.m4.1.1.2">𝑾</ci><ci id="S2.SS3.p1.4.m4.1.1.3.cmml" xref="S2.SS3.p1.4.m4.1.1.3">𝐿</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.4.m4.1c">\bm{W}_{L}</annotation></semantics></math> (between the output layer and the layer before), where <math id="S2.SS3.p1.5.m5.1" class="ltx_Math" alttext="\bm{W}_{L}\in\mathbb{R}^{n\times h}" display="inline"><semantics id="S2.SS3.p1.5.m5.1a"><mrow id="S2.SS3.p1.5.m5.1.1" xref="S2.SS3.p1.5.m5.1.1.cmml"><msub id="S2.SS3.p1.5.m5.1.1.2" xref="S2.SS3.p1.5.m5.1.1.2.cmml"><mi id="S2.SS3.p1.5.m5.1.1.2.2" xref="S2.SS3.p1.5.m5.1.1.2.2.cmml">𝑾</mi><mi id="S2.SS3.p1.5.m5.1.1.2.3" xref="S2.SS3.p1.5.m5.1.1.2.3.cmml">L</mi></msub><mo id="S2.SS3.p1.5.m5.1.1.1" xref="S2.SS3.p1.5.m5.1.1.1.cmml">∈</mo><msup id="S2.SS3.p1.5.m5.1.1.3" xref="S2.SS3.p1.5.m5.1.1.3.cmml"><mi id="S2.SS3.p1.5.m5.1.1.3.2" xref="S2.SS3.p1.5.m5.1.1.3.2.cmml">ℝ</mi><mrow id="S2.SS3.p1.5.m5.1.1.3.3" xref="S2.SS3.p1.5.m5.1.1.3.3.cmml"><mi id="S2.SS3.p1.5.m5.1.1.3.3.2" xref="S2.SS3.p1.5.m5.1.1.3.3.2.cmml">n</mi><mo lspace="0.222em" rspace="0.222em" id="S2.SS3.p1.5.m5.1.1.3.3.1" xref="S2.SS3.p1.5.m5.1.1.3.3.1.cmml">×</mo><mi id="S2.SS3.p1.5.m5.1.1.3.3.3" xref="S2.SS3.p1.5.m5.1.1.3.3.3.cmml">h</mi></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.5.m5.1b"><apply id="S2.SS3.p1.5.m5.1.1.cmml" xref="S2.SS3.p1.5.m5.1.1"><in id="S2.SS3.p1.5.m5.1.1.1.cmml" xref="S2.SS3.p1.5.m5.1.1.1"></in><apply id="S2.SS3.p1.5.m5.1.1.2.cmml" xref="S2.SS3.p1.5.m5.1.1.2"><csymbol cd="ambiguous" id="S2.SS3.p1.5.m5.1.1.2.1.cmml" xref="S2.SS3.p1.5.m5.1.1.2">subscript</csymbol><ci id="S2.SS3.p1.5.m5.1.1.2.2.cmml" xref="S2.SS3.p1.5.m5.1.1.2.2">𝑾</ci><ci id="S2.SS3.p1.5.m5.1.1.2.3.cmml" xref="S2.SS3.p1.5.m5.1.1.2.3">𝐿</ci></apply><apply id="S2.SS3.p1.5.m5.1.1.3.cmml" xref="S2.SS3.p1.5.m5.1.1.3"><csymbol cd="ambiguous" id="S2.SS3.p1.5.m5.1.1.3.1.cmml" xref="S2.SS3.p1.5.m5.1.1.3">superscript</csymbol><ci id="S2.SS3.p1.5.m5.1.1.3.2.cmml" xref="S2.SS3.p1.5.m5.1.1.3.2">ℝ</ci><apply id="S2.SS3.p1.5.m5.1.1.3.3.cmml" xref="S2.SS3.p1.5.m5.1.1.3.3"><times id="S2.SS3.p1.5.m5.1.1.3.3.1.cmml" xref="S2.SS3.p1.5.m5.1.1.3.3.1"></times><ci id="S2.SS3.p1.5.m5.1.1.3.3.2.cmml" xref="S2.SS3.p1.5.m5.1.1.3.3.2">𝑛</ci><ci id="S2.SS3.p1.5.m5.1.1.3.3.3.cmml" xref="S2.SS3.p1.5.m5.1.1.3.3.3">ℎ</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.5.m5.1c">\bm{W}_{L}\in\mathbb{R}^{n\times h}</annotation></semantics></math>: <math id="S2.SS3.p1.6.m6.1" class="ltx_Math" alttext="n" display="inline"><semantics id="S2.SS3.p1.6.m6.1a"><mi id="S2.SS3.p1.6.m6.1.1" xref="S2.SS3.p1.6.m6.1.1.cmml">n</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.6.m6.1b"><ci id="S2.SS3.p1.6.m6.1.1.cmml" xref="S2.SS3.p1.6.m6.1.1">𝑛</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.6.m6.1c">n</annotation></semantics></math> is the total number of classes and <math id="S2.SS3.p1.7.m7.1" class="ltx_Math" alttext="h" display="inline"><semantics id="S2.SS3.p1.7.m7.1a"><mi id="S2.SS3.p1.7.m7.1.1" xref="S2.SS3.p1.7.m7.1.1.cmml">h</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.7.m7.1b"><ci id="S2.SS3.p1.7.m7.1.1.cmml" xref="S2.SS3.p1.7.m7.1.1">ℎ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.7.m7.1c">h</annotation></semantics></math> is the number of neurons in layer <math id="S2.SS3.p1.8.m8.1" class="ltx_Math" alttext="L-1" display="inline"><semantics id="S2.SS3.p1.8.m8.1a"><mrow id="S2.SS3.p1.8.m8.1.1" xref="S2.SS3.p1.8.m8.1.1.cmml"><mi id="S2.SS3.p1.8.m8.1.1.2" xref="S2.SS3.p1.8.m8.1.1.2.cmml">L</mi><mo id="S2.SS3.p1.8.m8.1.1.1" xref="S2.SS3.p1.8.m8.1.1.1.cmml">−</mo><mn id="S2.SS3.p1.8.m8.1.1.3" xref="S2.SS3.p1.8.m8.1.1.3.cmml">1</mn></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.8.m8.1b"><apply id="S2.SS3.p1.8.m8.1.1.cmml" xref="S2.SS3.p1.8.m8.1.1"><minus id="S2.SS3.p1.8.m8.1.1.1.cmml" xref="S2.SS3.p1.8.m8.1.1.1"></minus><ci id="S2.SS3.p1.8.m8.1.1.2.cmml" xref="S2.SS3.p1.8.m8.1.1.2">𝐿</ci><cn type="integer" id="S2.SS3.p1.8.m8.1.1.3.cmml" xref="S2.SS3.p1.8.m8.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.8.m8.1c">L-1</annotation></semantics></math>. 
The gradient vector <math id="S2.SS3.p1.9.m9.1" class="ltx_Math" alttext="\nabla\bm{W}^{i}_{L}" display="inline"><semantics id="S2.SS3.p1.9.m9.1a"><mrow id="S2.SS3.p1.9.m9.1.1" xref="S2.SS3.p1.9.m9.1.1.cmml"><mo rspace="0.167em" id="S2.SS3.p1.9.m9.1.1.1" xref="S2.SS3.p1.9.m9.1.1.1.cmml">∇</mo><msubsup id="S2.SS3.p1.9.m9.1.1.2" xref="S2.SS3.p1.9.m9.1.1.2.cmml"><mi id="S2.SS3.p1.9.m9.1.1.2.2.2" xref="S2.SS3.p1.9.m9.1.1.2.2.2.cmml">𝑾</mi><mi id="S2.SS3.p1.9.m9.1.1.2.3" xref="S2.SS3.p1.9.m9.1.1.2.3.cmml">L</mi><mi id="S2.SS3.p1.9.m9.1.1.2.2.3" xref="S2.SS3.p1.9.m9.1.1.2.2.3.cmml">i</mi></msubsup></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.9.m9.1b"><apply id="S2.SS3.p1.9.m9.1.1.cmml" xref="S2.SS3.p1.9.m9.1.1"><ci id="S2.SS3.p1.9.m9.1.1.1.cmml" xref="S2.SS3.p1.9.m9.1.1.1">∇</ci><apply id="S2.SS3.p1.9.m9.1.1.2.cmml" xref="S2.SS3.p1.9.m9.1.1.2"><csymbol cd="ambiguous" id="S2.SS3.p1.9.m9.1.1.2.1.cmml" xref="S2.SS3.p1.9.m9.1.1.2">subscript</csymbol><apply id="S2.SS3.p1.9.m9.1.1.2.2.cmml" xref="S2.SS3.p1.9.m9.1.1.2"><csymbol cd="ambiguous" id="S2.SS3.p1.9.m9.1.1.2.2.1.cmml" xref="S2.SS3.p1.9.m9.1.1.2">superscript</csymbol><ci id="S2.SS3.p1.9.m9.1.1.2.2.2.cmml" xref="S2.SS3.p1.9.m9.1.1.2.2.2">𝑾</ci><ci id="S2.SS3.p1.9.m9.1.1.2.2.3.cmml" xref="S2.SS3.p1.9.m9.1.1.2.2.3">𝑖</ci></apply><ci id="S2.SS3.p1.9.m9.1.1.2.3.cmml" xref="S2.SS3.p1.9.m9.1.1.2.3">𝐿</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.9.m9.1c">\nabla\bm{W}^{i}_{L}</annotation></semantics></math> represents gradients connected to label <math id="S2.SS3.p1.10.m10.1" class="ltx_Math" alttext="i" display="inline"><semantics id="S2.SS3.p1.10.m10.1a"><mi id="S2.SS3.p1.10.m10.1.1" xref="S2.SS3.p1.10.m10.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.10.m10.1b"><ci id="S2.SS3.p1.10.m10.1.1.cmml" xref="S2.SS3.p1.10.m10.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.10.m10.1c">i</annotation></semantics></math> on the output layer.
We note <math id="S2.SS3.p1.11.m11.1" class="ltx_Math" alttext="g_{i}" display="inline"><semantics id="S2.SS3.p1.11.m11.1a"><msub id="S2.SS3.p1.11.m11.1.1" xref="S2.SS3.p1.11.m11.1.1.cmml"><mi id="S2.SS3.p1.11.m11.1.1.2" xref="S2.SS3.p1.11.m11.1.1.2.cmml">g</mi><mi id="S2.SS3.p1.11.m11.1.1.3" xref="S2.SS3.p1.11.m11.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.11.m11.1b"><apply id="S2.SS3.p1.11.m11.1.1.cmml" xref="S2.SS3.p1.11.m11.1.1"><csymbol cd="ambiguous" id="S2.SS3.p1.11.m11.1.1.1.cmml" xref="S2.SS3.p1.11.m11.1.1">subscript</csymbol><ci id="S2.SS3.p1.11.m11.1.1.2.cmml" xref="S2.SS3.p1.11.m11.1.1.2">𝑔</ci><ci id="S2.SS3.p1.11.m11.1.1.3.cmml" xref="S2.SS3.p1.11.m11.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.11.m11.1c">g_{i}</annotation></semantics></math> to refer to the sum of <math id="S2.SS3.p1.12.m12.1" class="ltx_Math" alttext="\nabla\bm{W}^{i}_{L}" display="inline"><semantics id="S2.SS3.p1.12.m12.1a"><mrow id="S2.SS3.p1.12.m12.1.1" xref="S2.SS3.p1.12.m12.1.1.cmml"><mo rspace="0.167em" id="S2.SS3.p1.12.m12.1.1.1" xref="S2.SS3.p1.12.m12.1.1.1.cmml">∇</mo><msubsup id="S2.SS3.p1.12.m12.1.1.2" xref="S2.SS3.p1.12.m12.1.1.2.cmml"><mi id="S2.SS3.p1.12.m12.1.1.2.2.2" xref="S2.SS3.p1.12.m12.1.1.2.2.2.cmml">𝑾</mi><mi id="S2.SS3.p1.12.m12.1.1.2.3" xref="S2.SS3.p1.12.m12.1.1.2.3.cmml">L</mi><mi id="S2.SS3.p1.12.m12.1.1.2.2.3" xref="S2.SS3.p1.12.m12.1.1.2.2.3.cmml">i</mi></msubsup></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.12.m12.1b"><apply id="S2.SS3.p1.12.m12.1.1.cmml" xref="S2.SS3.p1.12.m12.1.1"><ci id="S2.SS3.p1.12.m12.1.1.1.cmml" xref="S2.SS3.p1.12.m12.1.1.1">∇</ci><apply id="S2.SS3.p1.12.m12.1.1.2.cmml" xref="S2.SS3.p1.12.m12.1.1.2"><csymbol cd="ambiguous" id="S2.SS3.p1.12.m12.1.1.2.1.cmml" xref="S2.SS3.p1.12.m12.1.1.2">subscript</csymbol><apply id="S2.SS3.p1.12.m12.1.1.2.2.cmml" xref="S2.SS3.p1.12.m12.1.1.2"><csymbol cd="ambiguous" id="S2.SS3.p1.12.m12.1.1.2.2.1.cmml" xref="S2.SS3.p1.12.m12.1.1.2">superscript</csymbol><ci id="S2.SS3.p1.12.m12.1.1.2.2.2.cmml" xref="S2.SS3.p1.12.m12.1.1.2.2.2">𝑾</ci><ci id="S2.SS3.p1.12.m12.1.1.2.2.3.cmml" xref="S2.SS3.p1.12.m12.1.1.2.2.3">𝑖</ci></apply><ci id="S2.SS3.p1.12.m12.1.1.2.3.cmml" xref="S2.SS3.p1.12.m12.1.1.2.3">𝐿</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.12.m12.1c">\nabla\bm{W}^{i}_{L}</annotation></semantics></math> elements:
<math id="S2.SS3.p1.13.m13.1" class="ltx_Math" alttext="g_{i}=\mathds{1}^{T}\cdot\nabla\bm{W}^{i}_{L}" display="inline"><semantics id="S2.SS3.p1.13.m13.1a"><mrow id="S2.SS3.p1.13.m13.1.1" xref="S2.SS3.p1.13.m13.1.1.cmml"><msub id="S2.SS3.p1.13.m13.1.1.2" xref="S2.SS3.p1.13.m13.1.1.2.cmml"><mi id="S2.SS3.p1.13.m13.1.1.2.2" xref="S2.SS3.p1.13.m13.1.1.2.2.cmml">g</mi><mi id="S2.SS3.p1.13.m13.1.1.2.3" xref="S2.SS3.p1.13.m13.1.1.2.3.cmml">i</mi></msub><mo id="S2.SS3.p1.13.m13.1.1.1" xref="S2.SS3.p1.13.m13.1.1.1.cmml">=</mo><mrow id="S2.SS3.p1.13.m13.1.1.3" xref="S2.SS3.p1.13.m13.1.1.3.cmml"><msup id="S2.SS3.p1.13.m13.1.1.3.2" xref="S2.SS3.p1.13.m13.1.1.3.2.cmml"><mn id="S2.SS3.p1.13.m13.1.1.3.2.2" xref="S2.SS3.p1.13.m13.1.1.3.2.2.cmml">𝟙</mn><mi id="S2.SS3.p1.13.m13.1.1.3.2.3" xref="S2.SS3.p1.13.m13.1.1.3.2.3.cmml">T</mi></msup><mo lspace="0.222em" rspace="0.222em" id="S2.SS3.p1.13.m13.1.1.3.1" xref="S2.SS3.p1.13.m13.1.1.3.1.cmml">⋅</mo><mrow id="S2.SS3.p1.13.m13.1.1.3.3" xref="S2.SS3.p1.13.m13.1.1.3.3.cmml"><mo rspace="0.167em" id="S2.SS3.p1.13.m13.1.1.3.3.1" xref="S2.SS3.p1.13.m13.1.1.3.3.1.cmml">∇</mo><msubsup id="S2.SS3.p1.13.m13.1.1.3.3.2" xref="S2.SS3.p1.13.m13.1.1.3.3.2.cmml"><mi id="S2.SS3.p1.13.m13.1.1.3.3.2.2.2" xref="S2.SS3.p1.13.m13.1.1.3.3.2.2.2.cmml">𝑾</mi><mi id="S2.SS3.p1.13.m13.1.1.3.3.2.3" xref="S2.SS3.p1.13.m13.1.1.3.3.2.3.cmml">L</mi><mi id="S2.SS3.p1.13.m13.1.1.3.3.2.2.3" xref="S2.SS3.p1.13.m13.1.1.3.3.2.2.3.cmml">i</mi></msubsup></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.13.m13.1b"><apply id="S2.SS3.p1.13.m13.1.1.cmml" xref="S2.SS3.p1.13.m13.1.1"><eq id="S2.SS3.p1.13.m13.1.1.1.cmml" xref="S2.SS3.p1.13.m13.1.1.1"></eq><apply id="S2.SS3.p1.13.m13.1.1.2.cmml" xref="S2.SS3.p1.13.m13.1.1.2"><csymbol cd="ambiguous" id="S2.SS3.p1.13.m13.1.1.2.1.cmml" xref="S2.SS3.p1.13.m13.1.1.2">subscript</csymbol><ci id="S2.SS3.p1.13.m13.1.1.2.2.cmml" xref="S2.SS3.p1.13.m13.1.1.2.2">𝑔</ci><ci id="S2.SS3.p1.13.m13.1.1.2.3.cmml" xref="S2.SS3.p1.13.m13.1.1.2.3">𝑖</ci></apply><apply id="S2.SS3.p1.13.m13.1.1.3.cmml" xref="S2.SS3.p1.13.m13.1.1.3"><ci id="S2.SS3.p1.13.m13.1.1.3.1.cmml" xref="S2.SS3.p1.13.m13.1.1.3.1">⋅</ci><apply id="S2.SS3.p1.13.m13.1.1.3.2.cmml" xref="S2.SS3.p1.13.m13.1.1.3.2"><csymbol cd="ambiguous" id="S2.SS3.p1.13.m13.1.1.3.2.1.cmml" xref="S2.SS3.p1.13.m13.1.1.3.2">superscript</csymbol><cn type="integer" id="S2.SS3.p1.13.m13.1.1.3.2.2.cmml" xref="S2.SS3.p1.13.m13.1.1.3.2.2">1</cn><ci id="S2.SS3.p1.13.m13.1.1.3.2.3.cmml" xref="S2.SS3.p1.13.m13.1.1.3.2.3">𝑇</ci></apply><apply id="S2.SS3.p1.13.m13.1.1.3.3.cmml" xref="S2.SS3.p1.13.m13.1.1.3.3"><ci id="S2.SS3.p1.13.m13.1.1.3.3.1.cmml" xref="S2.SS3.p1.13.m13.1.1.3.3.1">∇</ci><apply id="S2.SS3.p1.13.m13.1.1.3.3.2.cmml" xref="S2.SS3.p1.13.m13.1.1.3.3.2"><csymbol cd="ambiguous" id="S2.SS3.p1.13.m13.1.1.3.3.2.1.cmml" xref="S2.SS3.p1.13.m13.1.1.3.3.2">subscript</csymbol><apply id="S2.SS3.p1.13.m13.1.1.3.3.2.2.cmml" xref="S2.SS3.p1.13.m13.1.1.3.3.2"><csymbol cd="ambiguous" id="S2.SS3.p1.13.m13.1.1.3.3.2.2.1.cmml" xref="S2.SS3.p1.13.m13.1.1.3.3.2">superscript</csymbol><ci id="S2.SS3.p1.13.m13.1.1.3.3.2.2.2.cmml" xref="S2.SS3.p1.13.m13.1.1.3.3.2.2.2">𝑾</ci><ci id="S2.SS3.p1.13.m13.1.1.3.3.2.2.3.cmml" xref="S2.SS3.p1.13.m13.1.1.3.3.2.2.3">𝑖</ci></apply><ci id="S2.SS3.p1.13.m13.1.1.3.3.2.3.cmml" xref="S2.SS3.p1.13.m13.1.1.3.3.2.3">𝐿</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.13.m13.1c">g_{i}=\mathds{1}^{T}\cdot\nabla\bm{W}^{i}_{L}</annotation></semantics></math> .</p>
</div>
</section>
<section id="S2.SS4" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.4 </span>Threat model</h3>

<div id="S2.SS4.p1" class="ltx_para">
<p id="S2.SS4.p1.1" class="ltx_p">We assume that an adversary applies the attack against the shared gradients of one target user. 

The adversary analyzes the gradients to infer
the number of label occurrences in the user’s input data.
In FedSGD, this concerns one batch, while in FedAvg, the data consists of multiple batches.  Thus, the more information is carried by the gradients on the labels, the higher is the privacy risk.
At the same time, the shared gradients need to reflect the training data of the users to optimize the joint model, i.e., to achieve the learning objective.
As a result, the learning objective and the depicted privacy risk are mutually related to the information carried by the gradients.
Even though it might seem as a paradox, our work is an attempt to focus on and mitigate the privacy risk imposed by gradient sharing without jeopardizing the learning objective of <span title="" class="ltx_glossaryref">FL</span> and the model accuracy. 
Next, we define our threat model w.r.t. three aspects: adversary access point, mode, and observation.</p>
<dl id="S2.I1" class="ltx_description">
<dt id="S2.I1.ix1" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span id="S2.I1.ix1.1.1.1" class="ltx_text ltx_font_bold">Access point.</span></span></dt>
<dd class="ltx_item">
<div id="S2.I1.ix1.p1" class="ltx_para">
<p id="S2.I1.ix1.p1.1" class="ltx_p">The distributed nature of <span title="" class="ltx_glossaryref">FL</span> increases the attack surface as shown in Figure <a href="#S2.F1" title="Figure 1 ‣ 2 Background ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>.
An adversary might be able to access the gradients by compromising the user’s device as the gradients are calculated on the user side before sharing with the server.
We assume that the user’s device can be compromised partially, such that the adversary has no access to the training data or labels <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib36" title="" class="ltx_ref">36</a>]</cite>.
Such scenario can apply, for example, to several online <span title="" class="ltx_glossaryref">ML</span> applications, where the training data is not stored but used for training on-the-fly.
In these cases, compromising a device during or after the training phase would not grant the adversary full access to the training data, while still providing access to the model and possibly the gradients.
Other scenarios might exploit a vulnerability in the implementation of the network protocols/interface, such that an adversary accesses only the I/O data. 
The server also can access the gradients of an individual user, in case no secure aggregation <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib6" title="" class="ltx_ref">6</a>]</cite> or other protection techniques are used.
In addition, if the connection between the server and the users is not secure, the gradients might be intercepted by an external eavesdropper.</p>
</div>
</dd>
<dt id="S2.I1.ix2" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span id="S2.I1.ix2.1.1.1" class="ltx_text ltx_font_bold">Mode.</span></span></dt>
<dd class="ltx_item">
<div id="S2.I1.ix2.p1" class="ltx_para">
<p id="S2.I1.ix2.p1.1" class="ltx_p">We assume the adversary to act in a passive mode.
The adversary may analyze the gradients to infer information about the users, but without hindering or deviating from the regular training protocol.
This adversary mode is widely common in privacy attacks <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib30" title="" class="ltx_ref">30</a>, <a href="#bib.bib37" title="" class="ltx_ref">37</a>, <a href="#bib.bib26" title="" class="ltx_ref">26</a>, <a href="#bib.bib41" title="" class="ltx_ref">41</a>]</cite>, where the focus is on disclosing information rather than disturbing the system.</p>
</div>
</dd>
<dt id="S2.I1.ix3" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span id="S2.I1.ix3.1.1.1" class="ltx_text ltx_font_bold">Observation.</span></span></dt>
<dd class="ltx_item">
<div id="S2.I1.ix3.p1" class="ltx_para">
<p id="S2.I1.ix3.p1.1" class="ltx_p">The adversary might be capable to observe different amounts of information to launch their attack.
We consider three possibilities.</p>
</div>
<div id="S2.I1.ix3.p2" class="ltx_para">
<ol id="S2.I1.ix3.I1" class="ltx_enumerate">
<li id="S2.I1.ix3.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span id="S2.I1.ix3.I1.i1.1.1.1" class="ltx_text ltx_font_bold">1.</span></span> 
<div id="S2.I1.ix3.I1.i1.p1" class="ltx_para">
<p id="S2.I1.ix3.I1.i1.p1.1" class="ltx_p">Shared gradients: the adversary has access only to the shared gradients.
This can apply for an external eavesdropper or an adversary with limited access to the user’s device.</p>
</div>
</li>
<li id="S2.I1.ix3.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span id="S2.I1.ix3.I1.i2.1.1.1" class="ltx_text ltx_font_bold">2.</span></span> 
<div id="S2.I1.ix3.I1.i2.p1" class="ltx_para">
<p id="S2.I1.ix3.I1.i2.p1.1" class="ltx_p">White-box model: in addition to the gradients, the adversary is aware of the model architecture and parameters.
In the case of a curious server or compromised user, the adversary might have this kind of information.</p>
</div>
</li>
<li id="S2.I1.ix3.I1.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span id="S2.I1.ix3.I1.i3.1.1.1" class="ltx_text ltx_font_bold">3.</span></span> 
<div id="S2.I1.ix3.I1.i3.p1" class="ltx_para">
<p id="S2.I1.ix3.I1.i3.p1.1" class="ltx_p">Auxiliary knowledge: the adversary has access to all the aforementioned information and additionally to an auxiliary dataset.
This dataset contains data samples of the same classes as the original training dataset.
This is a common scenario in real-world cases, given that <span title="" class="ltx_glossaryref">NNs</span> need a considerable amount of labeled data for training to perform accurately.
Labeled data is usually expensive and a typical adopted strategy is to train the model on the publicly available datasets and, eventually, fine-tuning the model on ad-hoc data.
Therefore, it is often easy to have access to a big part of the training data.</p>
</div>
</li>
</ol>
</div>
</dd>
</dl>
</div>
</section>
</section>
<section id="S3" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span>Related work</h2>

<div id="S3.p1" class="ltx_para">
<p id="S3.p1.1" class="ltx_p">Although the training data is not disclosed to other parties in <span title="" class="ltx_glossaryref">FL</span>, several works in the literature showed that the data and ground-truth labels can be reconstructed by exploiting the shared gradients.
Next, we present existing

<span id="S3.I1" class="ltx_inline-enumerate">
<span id="S3.I1.i1" class="ltx_inline-item"><span class="ltx_tag ltx_tag_inline-item">(1)</span> <span id="S3.I1.i1.1" class="ltx_text">data reconstruction attacks and
</span></span>
<span id="S3.I1.i2" class="ltx_inline-item"><span class="ltx_tag ltx_tag_inline-item">(2)</span> <span id="S3.I1.i2.1" class="ltx_text">label extraction attacks.
</span></span>
</span></p>
</div>
<section id="S3.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.1 </span>Data reconstruction</h3>

<div id="S3.SS1.p1" class="ltx_para">
<p id="S3.SS1.p1.1" class="ltx_p">Aono et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib2" title="" class="ltx_ref">2</a>, <a href="#bib.bib3" title="" class="ltx_ref">3</a>]</cite> are the first to discuss reconstructing data from gradients and illustrate its feasibility
on a simple <span title="" class="ltx_glossaryref">NN</span> with a training batch of one sample.
The authors closely examined the mathematical definition of the gradients shared with the central server as proposed in <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib32" title="" class="ltx_ref">32</a>]</cite>.
With the help of four examples, they showed how the relationship between the input data, which is unknown to the server, and the gradients can be exploited in order to leak at least some information about the unknown input. Wang et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib35" title="" class="ltx_ref">35</a>]</cite> moved on to generative attacks, leveraging a <span title="" class="ltx_glossaryref">Generative Adversarial Network (GAN)</span> to reconstruct the input data in a <span title="" class="ltx_glossaryref">CNN</span>.
Instead of training the discriminator of the <span title="" class="ltx_glossaryref">GAN</span> on the server side with real user data, the authors observed, that locally training a shared model on each user like in the <span title="" class="ltx_glossaryref">FL</span> setting is equivalent.
Thus, obtaining the user updates effectively yields updates to the discriminator for each user.
The generator of the GAN then is trained on the server side to generate samples indistinguishable from real user samples, which approaches the private training data.</p>
</div>
<div id="S3.SS1.p2" class="ltx_para">
<p id="S3.SS1.p2.1" class="ltx_p">In contrast, Zhu et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib41" title="" class="ltx_ref">41</a>]</cite> introduced an optimization-based attack;
the attacker generates dummy input data and output labels, then optimizes them using L-BFGS <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib24" title="" class="ltx_ref">24</a>]</cite> to generate dummy gradients that match the shared ones.
By that, the dummy data and labels converge to the real data and labels used by the participants in the training process.
Instead of using the euclidean distance as a cost function and L-BFGS,
Geiping et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib12" title="" class="ltx_ref">12</a>]</cite> proposed using cosine similarity and the Adam optimization algorithm.
They demonstrated that their attack is effective on trained and untrained models, also on deep networks and shallow ones.
Furthermore, they proved that the input to any fully-connected layer can be reconstructed regardless of the remaining network architecture.
Wei et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib36" title="" class="ltx_ref">36</a>]</cite> provided a framework for evaluating the reconstruction attacks and discussed the impact of multiple factors (e.g., activation and loss functions, optimizer, batch size) on the cost and effectiveness of these attacks. 
Qian et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib31" title="" class="ltx_ref">31</a>]</cite> theoretically analyzed the limits of <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib41" title="" class="ltx_ref">41</a>]</cite> considering fully-connected <span title="" class="ltx_glossaryref">NNs</span> and vanilla <span title="" class="ltx_glossaryref">CNNs</span>.
They also proposed a new initialization mechanism to speed up the attack convergence.
Unlike previous approaches, Enthoven et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib10" title="" class="ltx_ref">10</a>]</cite> introduced an analytical attack that exploits fully-connected layers to reconstruct the input data on the server side, and they extend this exploitation to <span title="" class="ltx_glossaryref">CNNs</span>.
Recently, Zhu et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib40" title="" class="ltx_ref">40</a>]</cite> proposed a recursive closed-form attack.
They demonstrated that one can reconstruct data from gradients by recursively solving a sequence of systems of linear equations.
Overall, all the aforementioned attacks, except for <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib41" title="" class="ltx_ref">41</a>]</cite>, only focus on reconstructing the input training data while overlooking the leakage of data labels, which can be of high sensitivity.
In our research, inspired by the mathematical foundations used in these attacks, we shed more light on the potential vulnerability of label leakage in <span title="" class="ltx_glossaryref">FL</span> and distributed learning.</p>
</div>
</section>
<section id="S3.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.2 </span>Label extraction</h3>

<div id="S3.SS2.p1" class="ltx_para">
<p id="S3.SS2.p1.1" class="ltx_p">While the data reconstruction attacks attracted considerable attention in the research community, a very limited number of approaches were proposed to extract the ground-truth labels from gradients.</p>
</div>
<div id="S3.SS2.p2" class="ltx_para">
<p id="S3.SS2.p2.1" class="ltx_p">In the work of Zhu et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib41" title="" class="ltx_ref">41</a>]</cite>, the ground-truth labels are extracted as part of their optimization approach.
However, the approach requires a learning phase where the model is sensitive to the weight initialization and needs attentive hyperparamter selection.
Yet, it can be hard to converge in some cases.
Moreover, it was found to extract wrong labels frequently <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib38" title="" class="ltx_ref">38</a>]</cite> and it is effective only for gradients aggregated from a batch size <math id="S3.SS2.p2.1.m1.1" class="ltx_Math" alttext="\leq 8" display="inline"><semantics id="S3.SS2.p2.1.m1.1a"><mrow id="S3.SS2.p2.1.m1.1.1" xref="S3.SS2.p2.1.m1.1.1.cmml"><mi id="S3.SS2.p2.1.m1.1.1.2" xref="S3.SS2.p2.1.m1.1.1.2.cmml"></mi><mo id="S3.SS2.p2.1.m1.1.1.1" xref="S3.SS2.p2.1.m1.1.1.1.cmml">≤</mo><mn id="S3.SS2.p2.1.m1.1.1.3" xref="S3.SS2.p2.1.m1.1.1.3.cmml">8</mn></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.1.m1.1b"><apply id="S3.SS2.p2.1.m1.1.1.cmml" xref="S3.SS2.p2.1.m1.1.1"><leq id="S3.SS2.p2.1.m1.1.1.1.cmml" xref="S3.SS2.p2.1.m1.1.1.1"></leq><csymbol cd="latexml" id="S3.SS2.p2.1.m1.1.1.2.cmml" xref="S3.SS2.p2.1.m1.1.1.2">absent</csymbol><cn type="integer" id="S3.SS2.p2.1.m1.1.1.3.cmml" xref="S3.SS2.p2.1.m1.1.1.3">8</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.1.m1.1c">\leq 8</annotation></semantics></math> <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib28" title="" class="ltx_ref">28</a>]</cite>.
Actually, Zhao et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib38" title="" class="ltx_ref">38</a>]</cite> proposed a more reliable analytical approach to extract the ground-truth labels by exploiting the direction of the gradients.
The authors demonstrated that the gradients of classification (cross-entropy loss) w.r.t. the last layer weights have negative values for the correct labels.
Thus, detecting the negative gradients is sufficient to extract correct labels.
However, their approach is limited to one-sample batch, which is uncommon in real-world applications of <span title="" class="ltx_glossaryref">FL</span>, where users typically have multiple data samples and train the model on these samples (a bunch of them at least) before sharing the gradients with the server.
Wainakh et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib34" title="" class="ltx_ref">34</a>]</cite>, in a short paper (4 pages), introduced a basic idea to extend the attack of <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib38" title="" class="ltx_ref">38</a>]</cite> for bigger batches, however, their work lacks formalization and thorough evaluation to substantially support the validity of the approach. 
Li et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib21" title="" class="ltx_ref">21</a>]</cite> proposed also an analytical approach based on the observation that the gradient norms of a particular class are generally larger than the others.
However, their approach is tailored for vertical split learning rather than <span title="" class="ltx_glossaryref">FL</span>, and it is valid only for a binary classification task.</p>
</div>
<div id="S3.SS2.p3" class="ltx_para">
<p id="S3.SS2.p3.1" class="ltx_p">Overall, the existing approaches are not well generalized to arbitrary batch sizes nor number of classes.
Moreover, the influence of different model architectures on these approaches is yet to be investigated.
In our work, we take into account these issues by evaluating the <span title="" class="ltx_glossaryref">LLG</span> attack on a variety of batch sizes and datasets with various numbers of classes, and we involve several model architectures.</p>
</div>
</section>
</section>
<section id="S4" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span>Gradient analysis</h2>

<div id="S4.p1" class="ltx_para">
<p id="S4.p1.1" class="ltx_p">In gradient descent optimization, the values of the gradient determine how the parameters of a model need to be adjusted to minimize the loss function.
Through an empirical analysis, we carefully derive two properties for the sign and magnitude of the gradients that indicate the ground-truth labels.
In this section, we formalize these properties, next, in Section <a href="#S5" title="5 Label extraction ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5</span></a>, we use them as a base to launch the  attack.</p>
</div>
<figure id="S4.F2" class="ltx_figure"><img src="/html/2105.09369/assets/x1.png" id="S4.F2.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="185" height="112" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S4.F2.6.3.1" class="ltx_text" style="font-size:90%;">Figure 2</span>: </span><span id="S4.F2.4.2" class="ltx_text" style="font-size:90%;">Graphical representation of a basic NN model and the gradients <math id="S4.F2.3.1.m1.1" class="ltx_Math" alttext="\nabla\bm{W}^{i}_{L}" display="inline"><semantics id="S4.F2.3.1.m1.1b"><mrow id="S4.F2.3.1.m1.1.1" xref="S4.F2.3.1.m1.1.1.cmml"><mo rspace="0.167em" id="S4.F2.3.1.m1.1.1.1" xref="S4.F2.3.1.m1.1.1.1.cmml">∇</mo><msubsup id="S4.F2.3.1.m1.1.1.2" xref="S4.F2.3.1.m1.1.1.2.cmml"><mi id="S4.F2.3.1.m1.1.1.2.2.2" xref="S4.F2.3.1.m1.1.1.2.2.2.cmml">𝑾</mi><mi id="S4.F2.3.1.m1.1.1.2.3" xref="S4.F2.3.1.m1.1.1.2.3.cmml">L</mi><mi id="S4.F2.3.1.m1.1.1.2.2.3" xref="S4.F2.3.1.m1.1.1.2.2.3.cmml">i</mi></msubsup></mrow><annotation-xml encoding="MathML-Content" id="S4.F2.3.1.m1.1c"><apply id="S4.F2.3.1.m1.1.1.cmml" xref="S4.F2.3.1.m1.1.1"><ci id="S4.F2.3.1.m1.1.1.1.cmml" xref="S4.F2.3.1.m1.1.1.1">∇</ci><apply id="S4.F2.3.1.m1.1.1.2.cmml" xref="S4.F2.3.1.m1.1.1.2"><csymbol cd="ambiguous" id="S4.F2.3.1.m1.1.1.2.1.cmml" xref="S4.F2.3.1.m1.1.1.2">subscript</csymbol><apply id="S4.F2.3.1.m1.1.1.2.2.cmml" xref="S4.F2.3.1.m1.1.1.2"><csymbol cd="ambiguous" id="S4.F2.3.1.m1.1.1.2.2.1.cmml" xref="S4.F2.3.1.m1.1.1.2">superscript</csymbol><ci id="S4.F2.3.1.m1.1.1.2.2.2.cmml" xref="S4.F2.3.1.m1.1.1.2.2.2">𝑾</ci><ci id="S4.F2.3.1.m1.1.1.2.2.3.cmml" xref="S4.F2.3.1.m1.1.1.2.2.3">𝑖</ci></apply><ci id="S4.F2.3.1.m1.1.1.2.3.cmml" xref="S4.F2.3.1.m1.1.1.2.3">𝐿</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.F2.3.1.m1.1d">\nabla\bm{W}^{i}_{L}</annotation></semantics></math> of the last layer <math id="S4.F2.4.2.m2.1" class="ltx_Math" alttext="L" display="inline"><semantics id="S4.F2.4.2.m2.1b"><mi id="S4.F2.4.2.m2.1.1" xref="S4.F2.4.2.m2.1.1.cmml">L</mi><annotation-xml encoding="MathML-Content" id="S4.F2.4.2.m2.1c"><ci id="S4.F2.4.2.m2.1.1.cmml" xref="S4.F2.4.2.m2.1.1">𝐿</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.F2.4.2.m2.1d">L</annotation></semantics></math>. For simplicity, the input layer is represented by a single neuron.</span></figcaption>
</figure>
<div id="S4.p2" class="ltx_para">
<dl id="S4.I1" class="ltx_description">
<dt id="S4.I1.ix1" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span id="S4.I1.ix1.1.1.1" class="ltx_text ltx_font_bold">Property 1.</span></span></dt>
<dd class="ltx_item">
<div id="S4.I1.ix1.p1" class="ltx_para">
<p id="S4.I1.ix1.p1.4" class="ltx_p"><span id="S4.I1.ix1.p1.4.4" class="ltx_text ltx_font_italic">For label <math id="S4.I1.ix1.p1.1.1.m1.1" class="ltx_Math" alttext="i" display="inline"><semantics id="S4.I1.ix1.p1.1.1.m1.1a"><mi id="S4.I1.ix1.p1.1.1.m1.1.1" xref="S4.I1.ix1.p1.1.1.m1.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S4.I1.ix1.p1.1.1.m1.1b"><ci id="S4.I1.ix1.p1.1.1.m1.1.1.cmml" xref="S4.I1.ix1.p1.1.1.m1.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.I1.ix1.p1.1.1.m1.1c">i</annotation></semantics></math> and last layer <math id="S4.I1.ix1.p1.2.2.m2.1" class="ltx_Math" alttext="L" display="inline"><semantics id="S4.I1.ix1.p1.2.2.m2.1a"><mi id="S4.I1.ix1.p1.2.2.m2.1.1" xref="S4.I1.ix1.p1.2.2.m2.1.1.cmml">L</mi><annotation-xml encoding="MathML-Content" id="S4.I1.ix1.p1.2.2.m2.1b"><ci id="S4.I1.ix1.p1.2.2.m2.1.1.cmml" xref="S4.I1.ix1.p1.2.2.m2.1.1">𝐿</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.I1.ix1.p1.2.2.m2.1c">L</annotation></semantics></math> in an <span title="" class="ltx_glossaryref">NN</span> model with a non-negative activation function, when <math id="S4.I1.ix1.p1.3.3.m3.1" class="ltx_Math" alttext="\nabla\bm{W}^{i}_{L}&lt;0" display="inline"><semantics id="S4.I1.ix1.p1.3.3.m3.1a"><mrow id="S4.I1.ix1.p1.3.3.m3.1.1" xref="S4.I1.ix1.p1.3.3.m3.1.1.cmml"><mrow id="S4.I1.ix1.p1.3.3.m3.1.1.2" xref="S4.I1.ix1.p1.3.3.m3.1.1.2.cmml"><mo rspace="0.167em" id="S4.I1.ix1.p1.3.3.m3.1.1.2.1" xref="S4.I1.ix1.p1.3.3.m3.1.1.2.1.cmml">∇</mo><msubsup id="S4.I1.ix1.p1.3.3.m3.1.1.2.2" xref="S4.I1.ix1.p1.3.3.m3.1.1.2.2.cmml"><mi id="S4.I1.ix1.p1.3.3.m3.1.1.2.2.2.2" xref="S4.I1.ix1.p1.3.3.m3.1.1.2.2.2.2.cmml">𝐖</mi><mi id="S4.I1.ix1.p1.3.3.m3.1.1.2.2.3" xref="S4.I1.ix1.p1.3.3.m3.1.1.2.2.3.cmml">L</mi><mi id="S4.I1.ix1.p1.3.3.m3.1.1.2.2.2.3" xref="S4.I1.ix1.p1.3.3.m3.1.1.2.2.2.3.cmml">i</mi></msubsup></mrow><mo id="S4.I1.ix1.p1.3.3.m3.1.1.1" xref="S4.I1.ix1.p1.3.3.m3.1.1.1.cmml">&lt;</mo><mn id="S4.I1.ix1.p1.3.3.m3.1.1.3" xref="S4.I1.ix1.p1.3.3.m3.1.1.3.cmml">0</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.I1.ix1.p1.3.3.m3.1b"><apply id="S4.I1.ix1.p1.3.3.m3.1.1.cmml" xref="S4.I1.ix1.p1.3.3.m3.1.1"><lt id="S4.I1.ix1.p1.3.3.m3.1.1.1.cmml" xref="S4.I1.ix1.p1.3.3.m3.1.1.1"></lt><apply id="S4.I1.ix1.p1.3.3.m3.1.1.2.cmml" xref="S4.I1.ix1.p1.3.3.m3.1.1.2"><ci id="S4.I1.ix1.p1.3.3.m3.1.1.2.1.cmml" xref="S4.I1.ix1.p1.3.3.m3.1.1.2.1">∇</ci><apply id="S4.I1.ix1.p1.3.3.m3.1.1.2.2.cmml" xref="S4.I1.ix1.p1.3.3.m3.1.1.2.2"><csymbol cd="ambiguous" id="S4.I1.ix1.p1.3.3.m3.1.1.2.2.1.cmml" xref="S4.I1.ix1.p1.3.3.m3.1.1.2.2">subscript</csymbol><apply id="S4.I1.ix1.p1.3.3.m3.1.1.2.2.2.cmml" xref="S4.I1.ix1.p1.3.3.m3.1.1.2.2"><csymbol cd="ambiguous" id="S4.I1.ix1.p1.3.3.m3.1.1.2.2.2.1.cmml" xref="S4.I1.ix1.p1.3.3.m3.1.1.2.2">superscript</csymbol><ci id="S4.I1.ix1.p1.3.3.m3.1.1.2.2.2.2.cmml" xref="S4.I1.ix1.p1.3.3.m3.1.1.2.2.2.2">𝐖</ci><ci id="S4.I1.ix1.p1.3.3.m3.1.1.2.2.2.3.cmml" xref="S4.I1.ix1.p1.3.3.m3.1.1.2.2.2.3">𝑖</ci></apply><ci id="S4.I1.ix1.p1.3.3.m3.1.1.2.2.3.cmml" xref="S4.I1.ix1.p1.3.3.m3.1.1.2.2.3">𝐿</ci></apply></apply><cn type="integer" id="S4.I1.ix1.p1.3.3.m3.1.1.3.cmml" xref="S4.I1.ix1.p1.3.3.m3.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.I1.ix1.p1.3.3.m3.1c">\nabla\bm{W}^{i}_{L}&lt;0</annotation></semantics></math>, label <math id="S4.I1.ix1.p1.4.4.m4.1" class="ltx_Math" alttext="i" display="inline"><semantics id="S4.I1.ix1.p1.4.4.m4.1a"><mi id="S4.I1.ix1.p1.4.4.m4.1.1" xref="S4.I1.ix1.p1.4.4.m4.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S4.I1.ix1.p1.4.4.m4.1b"><ci id="S4.I1.ix1.p1.4.4.m4.1.1.cmml" xref="S4.I1.ix1.p1.4.4.m4.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.I1.ix1.p1.4.4.m4.1c">i</annotation></semantics></math> is present in the training batch on which gradient descent was applied<span id="footnote1" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_tag ltx_tag_note"><span id="footnote1.1.1.1" class="ltx_text ltx_font_upright">1</span></span><span id="footnote1.4" class="ltx_text ltx_font_upright">This property is a generalization of the main observation in </span><cite class="ltx_cite ltx_citemacro_cite"><span id="footnote1.5.1" class="ltx_text ltx_font_upright">[</span><a href="#bib.bib38" title="" class="ltx_ref">38</a><span id="footnote1.6.2" class="ltx_text ltx_font_upright">]</span></cite><span id="footnote1.7" class="ltx_text ltx_font_upright"> to batches with arbitrary sizes. </span></span></span></span></span>.</p>
</div>
</dd>
</dl>
</div>
<div id="Thmproofx1" class="ltx_theorem ltx_theorem_proof">
<h6 class="ltx_title ltx_font_italic ltx_title_theorem"><span class="ltx_tag ltx_tag_theorem">Proof</span></h6>
<div id="Thmproofx1.p1" class="ltx_para">
<p id="Thmproofx1.p1.1" class="ltx_p">We consider an <span title="" class="ltx_glossaryref">NN</span> model for a classification task.
The model is trained using the cross-entropy loss over labels encoded with a one-hot encoding.
This loss function <math id="Thmproofx1.p1.1.m1.1" class="ltx_Math" alttext="l" display="inline"><semantics id="Thmproofx1.p1.1.m1.1a"><mi id="Thmproofx1.p1.1.m1.1.1" xref="Thmproofx1.p1.1.m1.1.1.cmml">l</mi><annotation-xml encoding="MathML-Content" id="Thmproofx1.p1.1.m1.1b"><ci id="Thmproofx1.p1.1.m1.1.1.cmml" xref="Thmproofx1.p1.1.m1.1.1">𝑙</ci></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p1.1.m1.1c">l</annotation></semantics></math> is defined as</p>
<table id="Sx2.EGx1" class="ltx_equationgroup ltx_eqn_gather ltx_eqn_table">

<tbody id="S4.E4"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S4.E4.m1.3" class="ltx_Math" alttext="\displaystyle l(\bm{x},c)=-\ln\frac{e^{y_{c}}}{\sum\nolimits_{j}e^{y_{j}}}\,," display="block"><semantics id="S4.E4.m1.3a"><mrow id="S4.E4.m1.3.3.1" xref="S4.E4.m1.3.3.1.1.cmml"><mrow id="S4.E4.m1.3.3.1.1" xref="S4.E4.m1.3.3.1.1.cmml"><mrow id="S4.E4.m1.3.3.1.1.2" xref="S4.E4.m1.3.3.1.1.2.cmml"><mi id="S4.E4.m1.3.3.1.1.2.2" xref="S4.E4.m1.3.3.1.1.2.2.cmml">l</mi><mo lspace="0em" rspace="0em" id="S4.E4.m1.3.3.1.1.2.1" xref="S4.E4.m1.3.3.1.1.2.1.cmml">​</mo><mrow id="S4.E4.m1.3.3.1.1.2.3.2" xref="S4.E4.m1.3.3.1.1.2.3.1.cmml"><mo stretchy="false" id="S4.E4.m1.3.3.1.1.2.3.2.1" xref="S4.E4.m1.3.3.1.1.2.3.1.cmml">(</mo><mi id="S4.E4.m1.1.1" xref="S4.E4.m1.1.1.cmml">𝒙</mi><mo id="S4.E4.m1.3.3.1.1.2.3.2.2" xref="S4.E4.m1.3.3.1.1.2.3.1.cmml">,</mo><mi id="S4.E4.m1.2.2" xref="S4.E4.m1.2.2.cmml">c</mi><mo stretchy="false" id="S4.E4.m1.3.3.1.1.2.3.2.3" xref="S4.E4.m1.3.3.1.1.2.3.1.cmml">)</mo></mrow></mrow><mo id="S4.E4.m1.3.3.1.1.1" xref="S4.E4.m1.3.3.1.1.1.cmml">=</mo><mrow id="S4.E4.m1.3.3.1.1.3" xref="S4.E4.m1.3.3.1.1.3.cmml"><mo rspace="0.167em" id="S4.E4.m1.3.3.1.1.3a" xref="S4.E4.m1.3.3.1.1.3.cmml">−</mo><mrow id="S4.E4.m1.3.3.1.1.3.2" xref="S4.E4.m1.3.3.1.1.3.2.cmml"><mi id="S4.E4.m1.3.3.1.1.3.2.1" xref="S4.E4.m1.3.3.1.1.3.2.1.cmml">ln</mi><mo lspace="0.167em" id="S4.E4.m1.3.3.1.1.3.2a" xref="S4.E4.m1.3.3.1.1.3.2.cmml">⁡</mo><mfrac id="S4.E4.m1.3.3.1.1.3.2.2" xref="S4.E4.m1.3.3.1.1.3.2.2.cmml"><msup id="S4.E4.m1.3.3.1.1.3.2.2.2" xref="S4.E4.m1.3.3.1.1.3.2.2.2.cmml"><mi id="S4.E4.m1.3.3.1.1.3.2.2.2.2" xref="S4.E4.m1.3.3.1.1.3.2.2.2.2.cmml">e</mi><msub id="S4.E4.m1.3.3.1.1.3.2.2.2.3" xref="S4.E4.m1.3.3.1.1.3.2.2.2.3.cmml"><mi id="S4.E4.m1.3.3.1.1.3.2.2.2.3.2" xref="S4.E4.m1.3.3.1.1.3.2.2.2.3.2.cmml">y</mi><mi id="S4.E4.m1.3.3.1.1.3.2.2.2.3.3" xref="S4.E4.m1.3.3.1.1.3.2.2.2.3.3.cmml">c</mi></msub></msup><mrow id="S4.E4.m1.3.3.1.1.3.2.2.3" xref="S4.E4.m1.3.3.1.1.3.2.2.3.cmml"><msub id="S4.E4.m1.3.3.1.1.3.2.2.3.1" xref="S4.E4.m1.3.3.1.1.3.2.2.3.1.cmml"><mo id="S4.E4.m1.3.3.1.1.3.2.2.3.1.2" xref="S4.E4.m1.3.3.1.1.3.2.2.3.1.2.cmml">∑</mo><mi id="S4.E4.m1.3.3.1.1.3.2.2.3.1.3" xref="S4.E4.m1.3.3.1.1.3.2.2.3.1.3.cmml">j</mi></msub><msup id="S4.E4.m1.3.3.1.1.3.2.2.3.2" xref="S4.E4.m1.3.3.1.1.3.2.2.3.2.cmml"><mi id="S4.E4.m1.3.3.1.1.3.2.2.3.2.2" xref="S4.E4.m1.3.3.1.1.3.2.2.3.2.2.cmml">e</mi><msub id="S4.E4.m1.3.3.1.1.3.2.2.3.2.3" xref="S4.E4.m1.3.3.1.1.3.2.2.3.2.3.cmml"><mi id="S4.E4.m1.3.3.1.1.3.2.2.3.2.3.2" xref="S4.E4.m1.3.3.1.1.3.2.2.3.2.3.2.cmml">y</mi><mi id="S4.E4.m1.3.3.1.1.3.2.2.3.2.3.3" xref="S4.E4.m1.3.3.1.1.3.2.2.3.2.3.3.cmml">j</mi></msub></msup></mrow></mfrac></mrow></mrow></mrow><mo lspace="0.170em" id="S4.E4.m1.3.3.1.2" xref="S4.E4.m1.3.3.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.E4.m1.3b"><apply id="S4.E4.m1.3.3.1.1.cmml" xref="S4.E4.m1.3.3.1"><eq id="S4.E4.m1.3.3.1.1.1.cmml" xref="S4.E4.m1.3.3.1.1.1"></eq><apply id="S4.E4.m1.3.3.1.1.2.cmml" xref="S4.E4.m1.3.3.1.1.2"><times id="S4.E4.m1.3.3.1.1.2.1.cmml" xref="S4.E4.m1.3.3.1.1.2.1"></times><ci id="S4.E4.m1.3.3.1.1.2.2.cmml" xref="S4.E4.m1.3.3.1.1.2.2">𝑙</ci><interval closure="open" id="S4.E4.m1.3.3.1.1.2.3.1.cmml" xref="S4.E4.m1.3.3.1.1.2.3.2"><ci id="S4.E4.m1.1.1.cmml" xref="S4.E4.m1.1.1">𝒙</ci><ci id="S4.E4.m1.2.2.cmml" xref="S4.E4.m1.2.2">𝑐</ci></interval></apply><apply id="S4.E4.m1.3.3.1.1.3.cmml" xref="S4.E4.m1.3.3.1.1.3"><minus id="S4.E4.m1.3.3.1.1.3.1.cmml" xref="S4.E4.m1.3.3.1.1.3"></minus><apply id="S4.E4.m1.3.3.1.1.3.2.cmml" xref="S4.E4.m1.3.3.1.1.3.2"><ln id="S4.E4.m1.3.3.1.1.3.2.1.cmml" xref="S4.E4.m1.3.3.1.1.3.2.1"></ln><apply id="S4.E4.m1.3.3.1.1.3.2.2.cmml" xref="S4.E4.m1.3.3.1.1.3.2.2"><divide id="S4.E4.m1.3.3.1.1.3.2.2.1.cmml" xref="S4.E4.m1.3.3.1.1.3.2.2"></divide><apply id="S4.E4.m1.3.3.1.1.3.2.2.2.cmml" xref="S4.E4.m1.3.3.1.1.3.2.2.2"><csymbol cd="ambiguous" id="S4.E4.m1.3.3.1.1.3.2.2.2.1.cmml" xref="S4.E4.m1.3.3.1.1.3.2.2.2">superscript</csymbol><ci id="S4.E4.m1.3.3.1.1.3.2.2.2.2.cmml" xref="S4.E4.m1.3.3.1.1.3.2.2.2.2">𝑒</ci><apply id="S4.E4.m1.3.3.1.1.3.2.2.2.3.cmml" xref="S4.E4.m1.3.3.1.1.3.2.2.2.3"><csymbol cd="ambiguous" id="S4.E4.m1.3.3.1.1.3.2.2.2.3.1.cmml" xref="S4.E4.m1.3.3.1.1.3.2.2.2.3">subscript</csymbol><ci id="S4.E4.m1.3.3.1.1.3.2.2.2.3.2.cmml" xref="S4.E4.m1.3.3.1.1.3.2.2.2.3.2">𝑦</ci><ci id="S4.E4.m1.3.3.1.1.3.2.2.2.3.3.cmml" xref="S4.E4.m1.3.3.1.1.3.2.2.2.3.3">𝑐</ci></apply></apply><apply id="S4.E4.m1.3.3.1.1.3.2.2.3.cmml" xref="S4.E4.m1.3.3.1.1.3.2.2.3"><apply id="S4.E4.m1.3.3.1.1.3.2.2.3.1.cmml" xref="S4.E4.m1.3.3.1.1.3.2.2.3.1"><csymbol cd="ambiguous" id="S4.E4.m1.3.3.1.1.3.2.2.3.1.1.cmml" xref="S4.E4.m1.3.3.1.1.3.2.2.3.1">subscript</csymbol><sum id="S4.E4.m1.3.3.1.1.3.2.2.3.1.2.cmml" xref="S4.E4.m1.3.3.1.1.3.2.2.3.1.2"></sum><ci id="S4.E4.m1.3.3.1.1.3.2.2.3.1.3.cmml" xref="S4.E4.m1.3.3.1.1.3.2.2.3.1.3">𝑗</ci></apply><apply id="S4.E4.m1.3.3.1.1.3.2.2.3.2.cmml" xref="S4.E4.m1.3.3.1.1.3.2.2.3.2"><csymbol cd="ambiguous" id="S4.E4.m1.3.3.1.1.3.2.2.3.2.1.cmml" xref="S4.E4.m1.3.3.1.1.3.2.2.3.2">superscript</csymbol><ci id="S4.E4.m1.3.3.1.1.3.2.2.3.2.2.cmml" xref="S4.E4.m1.3.3.1.1.3.2.2.3.2.2">𝑒</ci><apply id="S4.E4.m1.3.3.1.1.3.2.2.3.2.3.cmml" xref="S4.E4.m1.3.3.1.1.3.2.2.3.2.3"><csymbol cd="ambiguous" id="S4.E4.m1.3.3.1.1.3.2.2.3.2.3.1.cmml" xref="S4.E4.m1.3.3.1.1.3.2.2.3.2.3">subscript</csymbol><ci id="S4.E4.m1.3.3.1.1.3.2.2.3.2.3.2.cmml" xref="S4.E4.m1.3.3.1.1.3.2.2.3.2.3.2">𝑦</ci><ci id="S4.E4.m1.3.3.1.1.3.2.2.3.2.3.3.cmml" xref="S4.E4.m1.3.3.1.1.3.2.2.3.2.3.3">𝑗</ci></apply></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.E4.m1.3c">\displaystyle l(\bm{x},c)=-\ln\frac{e^{y_{c}}}{\sum\nolimits_{j}e^{y_{j}}}\,,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(4)</span></td>
</tr></tbody>
</table>
<p id="Thmproofx1.p1.9" class="ltx_p">where <math id="Thmproofx1.p1.2.m1.1" class="ltx_Math" alttext="\bm{x}" display="inline"><semantics id="Thmproofx1.p1.2.m1.1a"><mi id="Thmproofx1.p1.2.m1.1.1" xref="Thmproofx1.p1.2.m1.1.1.cmml">𝒙</mi><annotation-xml encoding="MathML-Content" id="Thmproofx1.p1.2.m1.1b"><ci id="Thmproofx1.p1.2.m1.1.1.cmml" xref="Thmproofx1.p1.2.m1.1.1">𝒙</ci></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p1.2.m1.1c">\bm{x}</annotation></semantics></math> is a multidimensional input instance and <math id="Thmproofx1.p1.3.m2.1" class="ltx_Math" alttext="c" display="inline"><semantics id="Thmproofx1.p1.3.m2.1a"><mi id="Thmproofx1.p1.3.m2.1.1" xref="Thmproofx1.p1.3.m2.1.1.cmml">c</mi><annotation-xml encoding="MathML-Content" id="Thmproofx1.p1.3.m2.1b"><ci id="Thmproofx1.p1.3.m2.1.1.cmml" xref="Thmproofx1.p1.3.m2.1.1">𝑐</ci></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p1.3.m2.1c">c</annotation></semantics></math> represents the ground-truth label of <math id="Thmproofx1.p1.4.m3.1" class="ltx_Math" alttext="\bm{x}" display="inline"><semantics id="Thmproofx1.p1.4.m3.1a"><mi id="Thmproofx1.p1.4.m3.1.1" xref="Thmproofx1.p1.4.m3.1.1.cmml">𝒙</mi><annotation-xml encoding="MathML-Content" id="Thmproofx1.p1.4.m3.1b"><ci id="Thmproofx1.p1.4.m3.1.1.cmml" xref="Thmproofx1.p1.4.m3.1.1">𝒙</ci></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p1.4.m3.1c">\bm{x}</annotation></semantics></math>.
While, <math id="Thmproofx1.p1.5.m4.4" class="ltx_Math" alttext="{\bm{y}=[y_{1},y_{2},...,y_{n}]}" display="inline"><semantics id="Thmproofx1.p1.5.m4.4a"><mrow id="Thmproofx1.p1.5.m4.4.4" xref="Thmproofx1.p1.5.m4.4.4.cmml"><mi id="Thmproofx1.p1.5.m4.4.4.5" xref="Thmproofx1.p1.5.m4.4.4.5.cmml">𝒚</mi><mo id="Thmproofx1.p1.5.m4.4.4.4" xref="Thmproofx1.p1.5.m4.4.4.4.cmml">=</mo><mrow id="Thmproofx1.p1.5.m4.4.4.3.3" xref="Thmproofx1.p1.5.m4.4.4.3.4.cmml"><mo stretchy="false" id="Thmproofx1.p1.5.m4.4.4.3.3.4" xref="Thmproofx1.p1.5.m4.4.4.3.4.cmml">[</mo><msub id="Thmproofx1.p1.5.m4.2.2.1.1.1" xref="Thmproofx1.p1.5.m4.2.2.1.1.1.cmml"><mi id="Thmproofx1.p1.5.m4.2.2.1.1.1.2" xref="Thmproofx1.p1.5.m4.2.2.1.1.1.2.cmml">y</mi><mn id="Thmproofx1.p1.5.m4.2.2.1.1.1.3" xref="Thmproofx1.p1.5.m4.2.2.1.1.1.3.cmml">1</mn></msub><mo id="Thmproofx1.p1.5.m4.4.4.3.3.5" xref="Thmproofx1.p1.5.m4.4.4.3.4.cmml">,</mo><msub id="Thmproofx1.p1.5.m4.3.3.2.2.2" xref="Thmproofx1.p1.5.m4.3.3.2.2.2.cmml"><mi id="Thmproofx1.p1.5.m4.3.3.2.2.2.2" xref="Thmproofx1.p1.5.m4.3.3.2.2.2.2.cmml">y</mi><mn id="Thmproofx1.p1.5.m4.3.3.2.2.2.3" xref="Thmproofx1.p1.5.m4.3.3.2.2.2.3.cmml">2</mn></msub><mo id="Thmproofx1.p1.5.m4.4.4.3.3.6" xref="Thmproofx1.p1.5.m4.4.4.3.4.cmml">,</mo><mi mathvariant="normal" id="Thmproofx1.p1.5.m4.1.1" xref="Thmproofx1.p1.5.m4.1.1.cmml">…</mi><mo id="Thmproofx1.p1.5.m4.4.4.3.3.7" xref="Thmproofx1.p1.5.m4.4.4.3.4.cmml">,</mo><msub id="Thmproofx1.p1.5.m4.4.4.3.3.3" xref="Thmproofx1.p1.5.m4.4.4.3.3.3.cmml"><mi id="Thmproofx1.p1.5.m4.4.4.3.3.3.2" xref="Thmproofx1.p1.5.m4.4.4.3.3.3.2.cmml">y</mi><mi id="Thmproofx1.p1.5.m4.4.4.3.3.3.3" xref="Thmproofx1.p1.5.m4.4.4.3.3.3.3.cmml">n</mi></msub><mo stretchy="false" id="Thmproofx1.p1.5.m4.4.4.3.3.8" xref="Thmproofx1.p1.5.m4.4.4.3.4.cmml">]</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="Thmproofx1.p1.5.m4.4b"><apply id="Thmproofx1.p1.5.m4.4.4.cmml" xref="Thmproofx1.p1.5.m4.4.4"><eq id="Thmproofx1.p1.5.m4.4.4.4.cmml" xref="Thmproofx1.p1.5.m4.4.4.4"></eq><ci id="Thmproofx1.p1.5.m4.4.4.5.cmml" xref="Thmproofx1.p1.5.m4.4.4.5">𝒚</ci><list id="Thmproofx1.p1.5.m4.4.4.3.4.cmml" xref="Thmproofx1.p1.5.m4.4.4.3.3"><apply id="Thmproofx1.p1.5.m4.2.2.1.1.1.cmml" xref="Thmproofx1.p1.5.m4.2.2.1.1.1"><csymbol cd="ambiguous" id="Thmproofx1.p1.5.m4.2.2.1.1.1.1.cmml" xref="Thmproofx1.p1.5.m4.2.2.1.1.1">subscript</csymbol><ci id="Thmproofx1.p1.5.m4.2.2.1.1.1.2.cmml" xref="Thmproofx1.p1.5.m4.2.2.1.1.1.2">𝑦</ci><cn type="integer" id="Thmproofx1.p1.5.m4.2.2.1.1.1.3.cmml" xref="Thmproofx1.p1.5.m4.2.2.1.1.1.3">1</cn></apply><apply id="Thmproofx1.p1.5.m4.3.3.2.2.2.cmml" xref="Thmproofx1.p1.5.m4.3.3.2.2.2"><csymbol cd="ambiguous" id="Thmproofx1.p1.5.m4.3.3.2.2.2.1.cmml" xref="Thmproofx1.p1.5.m4.3.3.2.2.2">subscript</csymbol><ci id="Thmproofx1.p1.5.m4.3.3.2.2.2.2.cmml" xref="Thmproofx1.p1.5.m4.3.3.2.2.2.2">𝑦</ci><cn type="integer" id="Thmproofx1.p1.5.m4.3.3.2.2.2.3.cmml" xref="Thmproofx1.p1.5.m4.3.3.2.2.2.3">2</cn></apply><ci id="Thmproofx1.p1.5.m4.1.1.cmml" xref="Thmproofx1.p1.5.m4.1.1">…</ci><apply id="Thmproofx1.p1.5.m4.4.4.3.3.3.cmml" xref="Thmproofx1.p1.5.m4.4.4.3.3.3"><csymbol cd="ambiguous" id="Thmproofx1.p1.5.m4.4.4.3.3.3.1.cmml" xref="Thmproofx1.p1.5.m4.4.4.3.3.3">subscript</csymbol><ci id="Thmproofx1.p1.5.m4.4.4.3.3.3.2.cmml" xref="Thmproofx1.p1.5.m4.4.4.3.3.3.2">𝑦</ci><ci id="Thmproofx1.p1.5.m4.4.4.3.3.3.3.cmml" xref="Thmproofx1.p1.5.m4.4.4.3.3.3.3">𝑛</ci></apply></list></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p1.5.m4.4c">{\bm{y}=[y_{1},y_{2},...,y_{n}]}</annotation></semantics></math> is the output vector of the model where each <math id="Thmproofx1.p1.6.m5.1" class="ltx_Math" alttext="y_{i}\in\bm{y}" display="inline"><semantics id="Thmproofx1.p1.6.m5.1a"><mrow id="Thmproofx1.p1.6.m5.1.1" xref="Thmproofx1.p1.6.m5.1.1.cmml"><msub id="Thmproofx1.p1.6.m5.1.1.2" xref="Thmproofx1.p1.6.m5.1.1.2.cmml"><mi id="Thmproofx1.p1.6.m5.1.1.2.2" xref="Thmproofx1.p1.6.m5.1.1.2.2.cmml">y</mi><mi id="Thmproofx1.p1.6.m5.1.1.2.3" xref="Thmproofx1.p1.6.m5.1.1.2.3.cmml">i</mi></msub><mo id="Thmproofx1.p1.6.m5.1.1.1" xref="Thmproofx1.p1.6.m5.1.1.1.cmml">∈</mo><mi id="Thmproofx1.p1.6.m5.1.1.3" xref="Thmproofx1.p1.6.m5.1.1.3.cmml">𝒚</mi></mrow><annotation-xml encoding="MathML-Content" id="Thmproofx1.p1.6.m5.1b"><apply id="Thmproofx1.p1.6.m5.1.1.cmml" xref="Thmproofx1.p1.6.m5.1.1"><in id="Thmproofx1.p1.6.m5.1.1.1.cmml" xref="Thmproofx1.p1.6.m5.1.1.1"></in><apply id="Thmproofx1.p1.6.m5.1.1.2.cmml" xref="Thmproofx1.p1.6.m5.1.1.2"><csymbol cd="ambiguous" id="Thmproofx1.p1.6.m5.1.1.2.1.cmml" xref="Thmproofx1.p1.6.m5.1.1.2">subscript</csymbol><ci id="Thmproofx1.p1.6.m5.1.1.2.2.cmml" xref="Thmproofx1.p1.6.m5.1.1.2.2">𝑦</ci><ci id="Thmproofx1.p1.6.m5.1.1.2.3.cmml" xref="Thmproofx1.p1.6.m5.1.1.2.3">𝑖</ci></apply><ci id="Thmproofx1.p1.6.m5.1.1.3.cmml" xref="Thmproofx1.p1.6.m5.1.1.3">𝒚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p1.6.m5.1c">y_{i}\in\bm{y}</annotation></semantics></math> is the score predicted for the <math id="Thmproofx1.p1.7.m6.1" class="ltx_Math" alttext="i^{th}" display="inline"><semantics id="Thmproofx1.p1.7.m6.1a"><msup id="Thmproofx1.p1.7.m6.1.1" xref="Thmproofx1.p1.7.m6.1.1.cmml"><mi id="Thmproofx1.p1.7.m6.1.1.2" xref="Thmproofx1.p1.7.m6.1.1.2.cmml">i</mi><mrow id="Thmproofx1.p1.7.m6.1.1.3" xref="Thmproofx1.p1.7.m6.1.1.3.cmml"><mi id="Thmproofx1.p1.7.m6.1.1.3.2" xref="Thmproofx1.p1.7.m6.1.1.3.2.cmml">t</mi><mo lspace="0em" rspace="0em" id="Thmproofx1.p1.7.m6.1.1.3.1" xref="Thmproofx1.p1.7.m6.1.1.3.1.cmml">​</mo><mi id="Thmproofx1.p1.7.m6.1.1.3.3" xref="Thmproofx1.p1.7.m6.1.1.3.3.cmml">h</mi></mrow></msup><annotation-xml encoding="MathML-Content" id="Thmproofx1.p1.7.m6.1b"><apply id="Thmproofx1.p1.7.m6.1.1.cmml" xref="Thmproofx1.p1.7.m6.1.1"><csymbol cd="ambiguous" id="Thmproofx1.p1.7.m6.1.1.1.cmml" xref="Thmproofx1.p1.7.m6.1.1">superscript</csymbol><ci id="Thmproofx1.p1.7.m6.1.1.2.cmml" xref="Thmproofx1.p1.7.m6.1.1.2">𝑖</ci><apply id="Thmproofx1.p1.7.m6.1.1.3.cmml" xref="Thmproofx1.p1.7.m6.1.1.3"><times id="Thmproofx1.p1.7.m6.1.1.3.1.cmml" xref="Thmproofx1.p1.7.m6.1.1.3.1"></times><ci id="Thmproofx1.p1.7.m6.1.1.3.2.cmml" xref="Thmproofx1.p1.7.m6.1.1.3.2">𝑡</ci><ci id="Thmproofx1.p1.7.m6.1.1.3.3.cmml" xref="Thmproofx1.p1.7.m6.1.1.3.3">ℎ</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p1.7.m6.1c">i^{th}</annotation></semantics></math> class, <math id="Thmproofx1.p1.8.m7.1" class="ltx_Math" alttext="y_{c}" display="inline"><semantics id="Thmproofx1.p1.8.m7.1a"><msub id="Thmproofx1.p1.8.m7.1.1" xref="Thmproofx1.p1.8.m7.1.1.cmml"><mi id="Thmproofx1.p1.8.m7.1.1.2" xref="Thmproofx1.p1.8.m7.1.1.2.cmml">y</mi><mi id="Thmproofx1.p1.8.m7.1.1.3" xref="Thmproofx1.p1.8.m7.1.1.3.cmml">c</mi></msub><annotation-xml encoding="MathML-Content" id="Thmproofx1.p1.8.m7.1b"><apply id="Thmproofx1.p1.8.m7.1.1.cmml" xref="Thmproofx1.p1.8.m7.1.1"><csymbol cd="ambiguous" id="Thmproofx1.p1.8.m7.1.1.1.cmml" xref="Thmproofx1.p1.8.m7.1.1">subscript</csymbol><ci id="Thmproofx1.p1.8.m7.1.1.2.cmml" xref="Thmproofx1.p1.8.m7.1.1.2">𝑦</ci><ci id="Thmproofx1.p1.8.m7.1.1.3.cmml" xref="Thmproofx1.p1.8.m7.1.1.3">𝑐</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p1.8.m7.1c">y_{c}</annotation></semantics></math> is the score assigned to the ground-truth label, and <math id="Thmproofx1.p1.9.m8.1" class="ltx_Math" alttext="n" display="inline"><semantics id="Thmproofx1.p1.9.m8.1a"><mi id="Thmproofx1.p1.9.m8.1.1" xref="Thmproofx1.p1.9.m8.1.1.cmml">n</mi><annotation-xml encoding="MathML-Content" id="Thmproofx1.p1.9.m8.1b"><ci id="Thmproofx1.p1.9.m8.1.1.cmml" xref="Thmproofx1.p1.9.m8.1.1">𝑛</ci></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p1.9.m8.1c">n</annotation></semantics></math> is the total number of classes.
A graphical representation of a simple NN model and its gradients of the last layer is depicted in Figure <a href="#S4.F2" title="Figure 2 ‣ 4 Gradient analysis ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a>.</p>
</div>
<div id="Thmproofx1.p2" class="ltx_para">
<p id="Thmproofx1.p2.7" class="ltx_p">Given a batch size <math id="Thmproofx1.p2.1.m1.1" class="ltx_Math" alttext="B" display="inline"><semantics id="Thmproofx1.p2.1.m1.1a"><mi id="Thmproofx1.p2.1.m1.1.1" xref="Thmproofx1.p2.1.m1.1.1.cmml">B</mi><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.1.m1.1b"><ci id="Thmproofx1.p2.1.m1.1.1.cmml" xref="Thmproofx1.p2.1.m1.1.1">𝐵</ci></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.1.m1.1c">B</annotation></semantics></math>, we have a set <math id="Thmproofx1.p2.2.m2.1" class="ltx_Math" alttext="\bm{X}" display="inline"><semantics id="Thmproofx1.p2.2.m2.1a"><mi id="Thmproofx1.p2.2.m2.1.1" xref="Thmproofx1.p2.2.m2.1.1.cmml">𝑿</mi><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.2.m2.1b"><ci id="Thmproofx1.p2.2.m2.1.1.cmml" xref="Thmproofx1.p2.2.m2.1.1">𝑿</ci></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.2.m2.1c">\bm{X}</annotation></semantics></math> of <math id="Thmproofx1.p2.3.m3.1" class="ltx_Math" alttext="B" display="inline"><semantics id="Thmproofx1.p2.3.m3.1a"><mi id="Thmproofx1.p2.3.m3.1.1" xref="Thmproofx1.p2.3.m3.1.1.cmml">B</mi><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.3.m3.1b"><ci id="Thmproofx1.p2.3.m3.1.1.cmml" xref="Thmproofx1.p2.3.m3.1.1">𝐵</ci></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.3.m3.1c">B</annotation></semantics></math> samples and the set of their labels <math id="Thmproofx1.p2.4.m4.1" class="ltx_Math" alttext="C" display="inline"><semantics id="Thmproofx1.p2.4.m4.1a"><mi id="Thmproofx1.p2.4.m4.1.1" xref="Thmproofx1.p2.4.m4.1.1.cmml">C</mi><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.4.m4.1b"><ci id="Thmproofx1.p2.4.m4.1.1.cmml" xref="Thmproofx1.p2.4.m4.1.1">𝐶</ci></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.4.m4.1c">C</annotation></semantics></math>.
Thus, we can define a training batch as a set composed of the pairs <math id="Thmproofx1.p2.5.m5.3" class="ltx_Math" alttext="\{(\bm{x}_{1},c_{1}),\ldots,(\bm{x}_{B},c_{B})\}" display="inline"><semantics id="Thmproofx1.p2.5.m5.3a"><mrow id="Thmproofx1.p2.5.m5.3.3.2" xref="Thmproofx1.p2.5.m5.3.3.3.cmml"><mo stretchy="false" id="Thmproofx1.p2.5.m5.3.3.2.3" xref="Thmproofx1.p2.5.m5.3.3.3.cmml">{</mo><mrow id="Thmproofx1.p2.5.m5.2.2.1.1.2" xref="Thmproofx1.p2.5.m5.2.2.1.1.3.cmml"><mo stretchy="false" id="Thmproofx1.p2.5.m5.2.2.1.1.2.3" xref="Thmproofx1.p2.5.m5.2.2.1.1.3.cmml">(</mo><msub id="Thmproofx1.p2.5.m5.2.2.1.1.1.1" xref="Thmproofx1.p2.5.m5.2.2.1.1.1.1.cmml"><mi id="Thmproofx1.p2.5.m5.2.2.1.1.1.1.2" xref="Thmproofx1.p2.5.m5.2.2.1.1.1.1.2.cmml">𝒙</mi><mn id="Thmproofx1.p2.5.m5.2.2.1.1.1.1.3" xref="Thmproofx1.p2.5.m5.2.2.1.1.1.1.3.cmml">1</mn></msub><mo id="Thmproofx1.p2.5.m5.2.2.1.1.2.4" xref="Thmproofx1.p2.5.m5.2.2.1.1.3.cmml">,</mo><msub id="Thmproofx1.p2.5.m5.2.2.1.1.2.2" xref="Thmproofx1.p2.5.m5.2.2.1.1.2.2.cmml"><mi id="Thmproofx1.p2.5.m5.2.2.1.1.2.2.2" xref="Thmproofx1.p2.5.m5.2.2.1.1.2.2.2.cmml">c</mi><mn id="Thmproofx1.p2.5.m5.2.2.1.1.2.2.3" xref="Thmproofx1.p2.5.m5.2.2.1.1.2.2.3.cmml">1</mn></msub><mo stretchy="false" id="Thmproofx1.p2.5.m5.2.2.1.1.2.5" xref="Thmproofx1.p2.5.m5.2.2.1.1.3.cmml">)</mo></mrow><mo id="Thmproofx1.p2.5.m5.3.3.2.4" xref="Thmproofx1.p2.5.m5.3.3.3.cmml">,</mo><mi mathvariant="normal" id="Thmproofx1.p2.5.m5.1.1" xref="Thmproofx1.p2.5.m5.1.1.cmml">…</mi><mo id="Thmproofx1.p2.5.m5.3.3.2.5" xref="Thmproofx1.p2.5.m5.3.3.3.cmml">,</mo><mrow id="Thmproofx1.p2.5.m5.3.3.2.2.2" xref="Thmproofx1.p2.5.m5.3.3.2.2.3.cmml"><mo stretchy="false" id="Thmproofx1.p2.5.m5.3.3.2.2.2.3" xref="Thmproofx1.p2.5.m5.3.3.2.2.3.cmml">(</mo><msub id="Thmproofx1.p2.5.m5.3.3.2.2.1.1" xref="Thmproofx1.p2.5.m5.3.3.2.2.1.1.cmml"><mi id="Thmproofx1.p2.5.m5.3.3.2.2.1.1.2" xref="Thmproofx1.p2.5.m5.3.3.2.2.1.1.2.cmml">𝒙</mi><mi id="Thmproofx1.p2.5.m5.3.3.2.2.1.1.3" xref="Thmproofx1.p2.5.m5.3.3.2.2.1.1.3.cmml">B</mi></msub><mo id="Thmproofx1.p2.5.m5.3.3.2.2.2.4" xref="Thmproofx1.p2.5.m5.3.3.2.2.3.cmml">,</mo><msub id="Thmproofx1.p2.5.m5.3.3.2.2.2.2" xref="Thmproofx1.p2.5.m5.3.3.2.2.2.2.cmml"><mi id="Thmproofx1.p2.5.m5.3.3.2.2.2.2.2" xref="Thmproofx1.p2.5.m5.3.3.2.2.2.2.2.cmml">c</mi><mi id="Thmproofx1.p2.5.m5.3.3.2.2.2.2.3" xref="Thmproofx1.p2.5.m5.3.3.2.2.2.2.3.cmml">B</mi></msub><mo stretchy="false" id="Thmproofx1.p2.5.m5.3.3.2.2.2.5" xref="Thmproofx1.p2.5.m5.3.3.2.2.3.cmml">)</mo></mrow><mo stretchy="false" id="Thmproofx1.p2.5.m5.3.3.2.6" xref="Thmproofx1.p2.5.m5.3.3.3.cmml">}</mo></mrow><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.5.m5.3b"><set id="Thmproofx1.p2.5.m5.3.3.3.cmml" xref="Thmproofx1.p2.5.m5.3.3.2"><interval closure="open" id="Thmproofx1.p2.5.m5.2.2.1.1.3.cmml" xref="Thmproofx1.p2.5.m5.2.2.1.1.2"><apply id="Thmproofx1.p2.5.m5.2.2.1.1.1.1.cmml" xref="Thmproofx1.p2.5.m5.2.2.1.1.1.1"><csymbol cd="ambiguous" id="Thmproofx1.p2.5.m5.2.2.1.1.1.1.1.cmml" xref="Thmproofx1.p2.5.m5.2.2.1.1.1.1">subscript</csymbol><ci id="Thmproofx1.p2.5.m5.2.2.1.1.1.1.2.cmml" xref="Thmproofx1.p2.5.m5.2.2.1.1.1.1.2">𝒙</ci><cn type="integer" id="Thmproofx1.p2.5.m5.2.2.1.1.1.1.3.cmml" xref="Thmproofx1.p2.5.m5.2.2.1.1.1.1.3">1</cn></apply><apply id="Thmproofx1.p2.5.m5.2.2.1.1.2.2.cmml" xref="Thmproofx1.p2.5.m5.2.2.1.1.2.2"><csymbol cd="ambiguous" id="Thmproofx1.p2.5.m5.2.2.1.1.2.2.1.cmml" xref="Thmproofx1.p2.5.m5.2.2.1.1.2.2">subscript</csymbol><ci id="Thmproofx1.p2.5.m5.2.2.1.1.2.2.2.cmml" xref="Thmproofx1.p2.5.m5.2.2.1.1.2.2.2">𝑐</ci><cn type="integer" id="Thmproofx1.p2.5.m5.2.2.1.1.2.2.3.cmml" xref="Thmproofx1.p2.5.m5.2.2.1.1.2.2.3">1</cn></apply></interval><ci id="Thmproofx1.p2.5.m5.1.1.cmml" xref="Thmproofx1.p2.5.m5.1.1">…</ci><interval closure="open" id="Thmproofx1.p2.5.m5.3.3.2.2.3.cmml" xref="Thmproofx1.p2.5.m5.3.3.2.2.2"><apply id="Thmproofx1.p2.5.m5.3.3.2.2.1.1.cmml" xref="Thmproofx1.p2.5.m5.3.3.2.2.1.1"><csymbol cd="ambiguous" id="Thmproofx1.p2.5.m5.3.3.2.2.1.1.1.cmml" xref="Thmproofx1.p2.5.m5.3.3.2.2.1.1">subscript</csymbol><ci id="Thmproofx1.p2.5.m5.3.3.2.2.1.1.2.cmml" xref="Thmproofx1.p2.5.m5.3.3.2.2.1.1.2">𝒙</ci><ci id="Thmproofx1.p2.5.m5.3.3.2.2.1.1.3.cmml" xref="Thmproofx1.p2.5.m5.3.3.2.2.1.1.3">𝐵</ci></apply><apply id="Thmproofx1.p2.5.m5.3.3.2.2.2.2.cmml" xref="Thmproofx1.p2.5.m5.3.3.2.2.2.2"><csymbol cd="ambiguous" id="Thmproofx1.p2.5.m5.3.3.2.2.2.2.1.cmml" xref="Thmproofx1.p2.5.m5.3.3.2.2.2.2">subscript</csymbol><ci id="Thmproofx1.p2.5.m5.3.3.2.2.2.2.2.cmml" xref="Thmproofx1.p2.5.m5.3.3.2.2.2.2.2">𝑐</ci><ci id="Thmproofx1.p2.5.m5.3.3.2.2.2.2.3.cmml" xref="Thmproofx1.p2.5.m5.3.3.2.2.2.2.3">𝐵</ci></apply></interval></set></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.5.m5.3c">\{(\bm{x}_{1},c_{1}),\ldots,(\bm{x}_{B},c_{B})\}</annotation></semantics></math>.
Therefore, we can redefine the loss function as
the loss <math id="Thmproofx1.p2.6.m6.2" class="ltx_Math" alttext="l(\bm{x},c)" display="inline"><semantics id="Thmproofx1.p2.6.m6.2a"><mrow id="Thmproofx1.p2.6.m6.2.3" xref="Thmproofx1.p2.6.m6.2.3.cmml"><mi id="Thmproofx1.p2.6.m6.2.3.2" xref="Thmproofx1.p2.6.m6.2.3.2.cmml">l</mi><mo lspace="0em" rspace="0em" id="Thmproofx1.p2.6.m6.2.3.1" xref="Thmproofx1.p2.6.m6.2.3.1.cmml">​</mo><mrow id="Thmproofx1.p2.6.m6.2.3.3.2" xref="Thmproofx1.p2.6.m6.2.3.3.1.cmml"><mo stretchy="false" id="Thmproofx1.p2.6.m6.2.3.3.2.1" xref="Thmproofx1.p2.6.m6.2.3.3.1.cmml">(</mo><mi id="Thmproofx1.p2.6.m6.1.1" xref="Thmproofx1.p2.6.m6.1.1.cmml">𝒙</mi><mo id="Thmproofx1.p2.6.m6.2.3.3.2.2" xref="Thmproofx1.p2.6.m6.2.3.3.1.cmml">,</mo><mi id="Thmproofx1.p2.6.m6.2.2" xref="Thmproofx1.p2.6.m6.2.2.cmml">c</mi><mo stretchy="false" id="Thmproofx1.p2.6.m6.2.3.3.2.3" xref="Thmproofx1.p2.6.m6.2.3.3.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.6.m6.2b"><apply id="Thmproofx1.p2.6.m6.2.3.cmml" xref="Thmproofx1.p2.6.m6.2.3"><times id="Thmproofx1.p2.6.m6.2.3.1.cmml" xref="Thmproofx1.p2.6.m6.2.3.1"></times><ci id="Thmproofx1.p2.6.m6.2.3.2.cmml" xref="Thmproofx1.p2.6.m6.2.3.2">𝑙</ci><interval closure="open" id="Thmproofx1.p2.6.m6.2.3.3.1.cmml" xref="Thmproofx1.p2.6.m6.2.3.3.2"><ci id="Thmproofx1.p2.6.m6.1.1.cmml" xref="Thmproofx1.p2.6.m6.1.1">𝒙</ci><ci id="Thmproofx1.p2.6.m6.2.2.cmml" xref="Thmproofx1.p2.6.m6.2.2">𝑐</ci></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.6.m6.2c">l(\bm{x},c)</annotation></semantics></math> of Eq. (<a href="#S4.E4" title="In Proof ‣ 4 Gradient analysis ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4</span></a>) averaged over a batch of <math id="Thmproofx1.p2.7.m7.1" class="ltx_Math" alttext="B" display="inline"><semantics id="Thmproofx1.p2.7.m7.1a"><mi id="Thmproofx1.p2.7.m7.1.1" xref="Thmproofx1.p2.7.m7.1.1.cmml">B</mi><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.7.m7.1b"><ci id="Thmproofx1.p2.7.m7.1.1.cmml" xref="Thmproofx1.p2.7.m7.1.1">𝐵</ci></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.7.m7.1c">B</annotation></semantics></math> labeled samples</p>
<table id="Sx2.EGx2" class="ltx_equationgroup ltx_eqn_gather ltx_eqn_table">

<tbody id="S4.E5"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S4.E5.m1.5" class="ltx_Math" alttext="\displaystyle l(\bm{X},C)=-\frac{1}{B}\sum_{k=1}^{B}\ln\frac{e^{y_{c(k)}}}{\sum\nolimits_{j}e^{y_{j(k)}}}\,," display="block"><semantics id="S4.E5.m1.5a"><mrow id="S4.E5.m1.5.5.1" xref="S4.E5.m1.5.5.1.1.cmml"><mrow id="S4.E5.m1.5.5.1.1" xref="S4.E5.m1.5.5.1.1.cmml"><mrow id="S4.E5.m1.5.5.1.1.2" xref="S4.E5.m1.5.5.1.1.2.cmml"><mi id="S4.E5.m1.5.5.1.1.2.2" xref="S4.E5.m1.5.5.1.1.2.2.cmml">l</mi><mo lspace="0em" rspace="0em" id="S4.E5.m1.5.5.1.1.2.1" xref="S4.E5.m1.5.5.1.1.2.1.cmml">​</mo><mrow id="S4.E5.m1.5.5.1.1.2.3.2" xref="S4.E5.m1.5.5.1.1.2.3.1.cmml"><mo stretchy="false" id="S4.E5.m1.5.5.1.1.2.3.2.1" xref="S4.E5.m1.5.5.1.1.2.3.1.cmml">(</mo><mi id="S4.E5.m1.3.3" xref="S4.E5.m1.3.3.cmml">𝑿</mi><mo id="S4.E5.m1.5.5.1.1.2.3.2.2" xref="S4.E5.m1.5.5.1.1.2.3.1.cmml">,</mo><mi id="S4.E5.m1.4.4" xref="S4.E5.m1.4.4.cmml">C</mi><mo stretchy="false" id="S4.E5.m1.5.5.1.1.2.3.2.3" xref="S4.E5.m1.5.5.1.1.2.3.1.cmml">)</mo></mrow></mrow><mo id="S4.E5.m1.5.5.1.1.1" xref="S4.E5.m1.5.5.1.1.1.cmml">=</mo><mrow id="S4.E5.m1.5.5.1.1.3" xref="S4.E5.m1.5.5.1.1.3.cmml"><mo id="S4.E5.m1.5.5.1.1.3a" xref="S4.E5.m1.5.5.1.1.3.cmml">−</mo><mrow id="S4.E5.m1.5.5.1.1.3.2" xref="S4.E5.m1.5.5.1.1.3.2.cmml"><mfrac id="S4.E5.m1.5.5.1.1.3.2.2" xref="S4.E5.m1.5.5.1.1.3.2.2.cmml"><mn id="S4.E5.m1.5.5.1.1.3.2.2.2" xref="S4.E5.m1.5.5.1.1.3.2.2.2.cmml">1</mn><mi id="S4.E5.m1.5.5.1.1.3.2.2.3" xref="S4.E5.m1.5.5.1.1.3.2.2.3.cmml">B</mi></mfrac><mo lspace="0em" rspace="0em" id="S4.E5.m1.5.5.1.1.3.2.1" xref="S4.E5.m1.5.5.1.1.3.2.1.cmml">​</mo><mrow id="S4.E5.m1.5.5.1.1.3.2.3" xref="S4.E5.m1.5.5.1.1.3.2.3.cmml"><munderover id="S4.E5.m1.5.5.1.1.3.2.3.1" xref="S4.E5.m1.5.5.1.1.3.2.3.1.cmml"><mo movablelimits="false" id="S4.E5.m1.5.5.1.1.3.2.3.1.2.2" xref="S4.E5.m1.5.5.1.1.3.2.3.1.2.2.cmml">∑</mo><mrow id="S4.E5.m1.5.5.1.1.3.2.3.1.2.3" xref="S4.E5.m1.5.5.1.1.3.2.3.1.2.3.cmml"><mi id="S4.E5.m1.5.5.1.1.3.2.3.1.2.3.2" xref="S4.E5.m1.5.5.1.1.3.2.3.1.2.3.2.cmml">k</mi><mo id="S4.E5.m1.5.5.1.1.3.2.3.1.2.3.1" xref="S4.E5.m1.5.5.1.1.3.2.3.1.2.3.1.cmml">=</mo><mn id="S4.E5.m1.5.5.1.1.3.2.3.1.2.3.3" xref="S4.E5.m1.5.5.1.1.3.2.3.1.2.3.3.cmml">1</mn></mrow><mi id="S4.E5.m1.5.5.1.1.3.2.3.1.3" xref="S4.E5.m1.5.5.1.1.3.2.3.1.3.cmml">B</mi></munderover><mrow id="S4.E5.m1.5.5.1.1.3.2.3.2" xref="S4.E5.m1.5.5.1.1.3.2.3.2.cmml"><mi id="S4.E5.m1.5.5.1.1.3.2.3.2.1" xref="S4.E5.m1.5.5.1.1.3.2.3.2.1.cmml">ln</mi><mo lspace="0.167em" id="S4.E5.m1.5.5.1.1.3.2.3.2a" xref="S4.E5.m1.5.5.1.1.3.2.3.2.cmml">⁡</mo><mfrac id="S4.E5.m1.2.2" xref="S4.E5.m1.2.2.cmml"><msup id="S4.E5.m1.1.1.1" xref="S4.E5.m1.1.1.1.cmml"><mi id="S4.E5.m1.1.1.1.3" xref="S4.E5.m1.1.1.1.3.cmml">e</mi><msub id="S4.E5.m1.1.1.1.1.1" xref="S4.E5.m1.1.1.1.1.1.cmml"><mi id="S4.E5.m1.1.1.1.1.1.3" xref="S4.E5.m1.1.1.1.1.1.3.cmml">y</mi><mrow id="S4.E5.m1.1.1.1.1.1.1.1" xref="S4.E5.m1.1.1.1.1.1.1.1.cmml"><mi id="S4.E5.m1.1.1.1.1.1.1.1.3" xref="S4.E5.m1.1.1.1.1.1.1.1.3.cmml">c</mi><mo lspace="0em" rspace="0em" id="S4.E5.m1.1.1.1.1.1.1.1.2" xref="S4.E5.m1.1.1.1.1.1.1.1.2.cmml">​</mo><mrow id="S4.E5.m1.1.1.1.1.1.1.1.4.2" xref="S4.E5.m1.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S4.E5.m1.1.1.1.1.1.1.1.4.2.1" xref="S4.E5.m1.1.1.1.1.1.1.1.cmml">(</mo><mi id="S4.E5.m1.1.1.1.1.1.1.1.1" xref="S4.E5.m1.1.1.1.1.1.1.1.1.cmml">k</mi><mo stretchy="false" id="S4.E5.m1.1.1.1.1.1.1.1.4.2.2" xref="S4.E5.m1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></msub></msup><mrow id="S4.E5.m1.2.2.2" xref="S4.E5.m1.2.2.2.cmml"><msub id="S4.E5.m1.2.2.2.2" xref="S4.E5.m1.2.2.2.2.cmml"><mo id="S4.E5.m1.2.2.2.2.2" xref="S4.E5.m1.2.2.2.2.2.cmml">∑</mo><mi id="S4.E5.m1.2.2.2.2.3" xref="S4.E5.m1.2.2.2.2.3.cmml">j</mi></msub><msup id="S4.E5.m1.2.2.2.3" xref="S4.E5.m1.2.2.2.3.cmml"><mi id="S4.E5.m1.2.2.2.3.2" xref="S4.E5.m1.2.2.2.3.2.cmml">e</mi><msub id="S4.E5.m1.2.2.2.1.1" xref="S4.E5.m1.2.2.2.1.1.cmml"><mi id="S4.E5.m1.2.2.2.1.1.3" xref="S4.E5.m1.2.2.2.1.1.3.cmml">y</mi><mrow id="S4.E5.m1.2.2.2.1.1.1.1" xref="S4.E5.m1.2.2.2.1.1.1.1.cmml"><mi id="S4.E5.m1.2.2.2.1.1.1.1.3" xref="S4.E5.m1.2.2.2.1.1.1.1.3.cmml">j</mi><mo lspace="0em" rspace="0em" id="S4.E5.m1.2.2.2.1.1.1.1.2" xref="S4.E5.m1.2.2.2.1.1.1.1.2.cmml">​</mo><mrow id="S4.E5.m1.2.2.2.1.1.1.1.4.2" xref="S4.E5.m1.2.2.2.1.1.1.1.cmml"><mo stretchy="false" id="S4.E5.m1.2.2.2.1.1.1.1.4.2.1" xref="S4.E5.m1.2.2.2.1.1.1.1.cmml">(</mo><mi id="S4.E5.m1.2.2.2.1.1.1.1.1" xref="S4.E5.m1.2.2.2.1.1.1.1.1.cmml">k</mi><mo stretchy="false" id="S4.E5.m1.2.2.2.1.1.1.1.4.2.2" xref="S4.E5.m1.2.2.2.1.1.1.1.cmml">)</mo></mrow></mrow></msub></msup></mrow></mfrac></mrow></mrow></mrow></mrow></mrow><mo lspace="0.170em" id="S4.E5.m1.5.5.1.2" xref="S4.E5.m1.5.5.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.E5.m1.5b"><apply id="S4.E5.m1.5.5.1.1.cmml" xref="S4.E5.m1.5.5.1"><eq id="S4.E5.m1.5.5.1.1.1.cmml" xref="S4.E5.m1.5.5.1.1.1"></eq><apply id="S4.E5.m1.5.5.1.1.2.cmml" xref="S4.E5.m1.5.5.1.1.2"><times id="S4.E5.m1.5.5.1.1.2.1.cmml" xref="S4.E5.m1.5.5.1.1.2.1"></times><ci id="S4.E5.m1.5.5.1.1.2.2.cmml" xref="S4.E5.m1.5.5.1.1.2.2">𝑙</ci><interval closure="open" id="S4.E5.m1.5.5.1.1.2.3.1.cmml" xref="S4.E5.m1.5.5.1.1.2.3.2"><ci id="S4.E5.m1.3.3.cmml" xref="S4.E5.m1.3.3">𝑿</ci><ci id="S4.E5.m1.4.4.cmml" xref="S4.E5.m1.4.4">𝐶</ci></interval></apply><apply id="S4.E5.m1.5.5.1.1.3.cmml" xref="S4.E5.m1.5.5.1.1.3"><minus id="S4.E5.m1.5.5.1.1.3.1.cmml" xref="S4.E5.m1.5.5.1.1.3"></minus><apply id="S4.E5.m1.5.5.1.1.3.2.cmml" xref="S4.E5.m1.5.5.1.1.3.2"><times id="S4.E5.m1.5.5.1.1.3.2.1.cmml" xref="S4.E5.m1.5.5.1.1.3.2.1"></times><apply id="S4.E5.m1.5.5.1.1.3.2.2.cmml" xref="S4.E5.m1.5.5.1.1.3.2.2"><divide id="S4.E5.m1.5.5.1.1.3.2.2.1.cmml" xref="S4.E5.m1.5.5.1.1.3.2.2"></divide><cn type="integer" id="S4.E5.m1.5.5.1.1.3.2.2.2.cmml" xref="S4.E5.m1.5.5.1.1.3.2.2.2">1</cn><ci id="S4.E5.m1.5.5.1.1.3.2.2.3.cmml" xref="S4.E5.m1.5.5.1.1.3.2.2.3">𝐵</ci></apply><apply id="S4.E5.m1.5.5.1.1.3.2.3.cmml" xref="S4.E5.m1.5.5.1.1.3.2.3"><apply id="S4.E5.m1.5.5.1.1.3.2.3.1.cmml" xref="S4.E5.m1.5.5.1.1.3.2.3.1"><csymbol cd="ambiguous" id="S4.E5.m1.5.5.1.1.3.2.3.1.1.cmml" xref="S4.E5.m1.5.5.1.1.3.2.3.1">superscript</csymbol><apply id="S4.E5.m1.5.5.1.1.3.2.3.1.2.cmml" xref="S4.E5.m1.5.5.1.1.3.2.3.1"><csymbol cd="ambiguous" id="S4.E5.m1.5.5.1.1.3.2.3.1.2.1.cmml" xref="S4.E5.m1.5.5.1.1.3.2.3.1">subscript</csymbol><sum id="S4.E5.m1.5.5.1.1.3.2.3.1.2.2.cmml" xref="S4.E5.m1.5.5.1.1.3.2.3.1.2.2"></sum><apply id="S4.E5.m1.5.5.1.1.3.2.3.1.2.3.cmml" xref="S4.E5.m1.5.5.1.1.3.2.3.1.2.3"><eq id="S4.E5.m1.5.5.1.1.3.2.3.1.2.3.1.cmml" xref="S4.E5.m1.5.5.1.1.3.2.3.1.2.3.1"></eq><ci id="S4.E5.m1.5.5.1.1.3.2.3.1.2.3.2.cmml" xref="S4.E5.m1.5.5.1.1.3.2.3.1.2.3.2">𝑘</ci><cn type="integer" id="S4.E5.m1.5.5.1.1.3.2.3.1.2.3.3.cmml" xref="S4.E5.m1.5.5.1.1.3.2.3.1.2.3.3">1</cn></apply></apply><ci id="S4.E5.m1.5.5.1.1.3.2.3.1.3.cmml" xref="S4.E5.m1.5.5.1.1.3.2.3.1.3">𝐵</ci></apply><apply id="S4.E5.m1.5.5.1.1.3.2.3.2.cmml" xref="S4.E5.m1.5.5.1.1.3.2.3.2"><ln id="S4.E5.m1.5.5.1.1.3.2.3.2.1.cmml" xref="S4.E5.m1.5.5.1.1.3.2.3.2.1"></ln><apply id="S4.E5.m1.2.2.cmml" xref="S4.E5.m1.2.2"><divide id="S4.E5.m1.2.2.3.cmml" xref="S4.E5.m1.2.2"></divide><apply id="S4.E5.m1.1.1.1.cmml" xref="S4.E5.m1.1.1.1"><csymbol cd="ambiguous" id="S4.E5.m1.1.1.1.2.cmml" xref="S4.E5.m1.1.1.1">superscript</csymbol><ci id="S4.E5.m1.1.1.1.3.cmml" xref="S4.E5.m1.1.1.1.3">𝑒</ci><apply id="S4.E5.m1.1.1.1.1.1.cmml" xref="S4.E5.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="S4.E5.m1.1.1.1.1.1.2.cmml" xref="S4.E5.m1.1.1.1.1.1">subscript</csymbol><ci id="S4.E5.m1.1.1.1.1.1.3.cmml" xref="S4.E5.m1.1.1.1.1.1.3">𝑦</ci><apply id="S4.E5.m1.1.1.1.1.1.1.1.cmml" xref="S4.E5.m1.1.1.1.1.1.1.1"><times id="S4.E5.m1.1.1.1.1.1.1.1.2.cmml" xref="S4.E5.m1.1.1.1.1.1.1.1.2"></times><ci id="S4.E5.m1.1.1.1.1.1.1.1.3.cmml" xref="S4.E5.m1.1.1.1.1.1.1.1.3">𝑐</ci><ci id="S4.E5.m1.1.1.1.1.1.1.1.1.cmml" xref="S4.E5.m1.1.1.1.1.1.1.1.1">𝑘</ci></apply></apply></apply><apply id="S4.E5.m1.2.2.2.cmml" xref="S4.E5.m1.2.2.2"><apply id="S4.E5.m1.2.2.2.2.cmml" xref="S4.E5.m1.2.2.2.2"><csymbol cd="ambiguous" id="S4.E5.m1.2.2.2.2.1.cmml" xref="S4.E5.m1.2.2.2.2">subscript</csymbol><sum id="S4.E5.m1.2.2.2.2.2.cmml" xref="S4.E5.m1.2.2.2.2.2"></sum><ci id="S4.E5.m1.2.2.2.2.3.cmml" xref="S4.E5.m1.2.2.2.2.3">𝑗</ci></apply><apply id="S4.E5.m1.2.2.2.3.cmml" xref="S4.E5.m1.2.2.2.3"><csymbol cd="ambiguous" id="S4.E5.m1.2.2.2.3.1.cmml" xref="S4.E5.m1.2.2.2.3">superscript</csymbol><ci id="S4.E5.m1.2.2.2.3.2.cmml" xref="S4.E5.m1.2.2.2.3.2">𝑒</ci><apply id="S4.E5.m1.2.2.2.1.1.cmml" xref="S4.E5.m1.2.2.2.1.1"><csymbol cd="ambiguous" id="S4.E5.m1.2.2.2.1.1.2.cmml" xref="S4.E5.m1.2.2.2.1.1">subscript</csymbol><ci id="S4.E5.m1.2.2.2.1.1.3.cmml" xref="S4.E5.m1.2.2.2.1.1.3">𝑦</ci><apply id="S4.E5.m1.2.2.2.1.1.1.1.cmml" xref="S4.E5.m1.2.2.2.1.1.1.1"><times id="S4.E5.m1.2.2.2.1.1.1.1.2.cmml" xref="S4.E5.m1.2.2.2.1.1.1.1.2"></times><ci id="S4.E5.m1.2.2.2.1.1.1.1.3.cmml" xref="S4.E5.m1.2.2.2.1.1.1.1.3">𝑗</ci><ci id="S4.E5.m1.2.2.2.1.1.1.1.1.cmml" xref="S4.E5.m1.2.2.2.1.1.1.1.1">𝑘</ci></apply></apply></apply></apply></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.E5.m1.5c">\displaystyle l(\bm{X},C)=-\frac{1}{B}\sum_{k=1}^{B}\ln\frac{e^{y_{c(k)}}}{\sum\nolimits_{j}e^{y_{j(k)}}}\,,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(5)</span></td>
</tr></tbody>
</table>
<p id="Thmproofx1.p2.13" class="ltx_p">where <math id="Thmproofx1.p2.8.m1.1" class="ltx_Math" alttext="c(k)" display="inline"><semantics id="Thmproofx1.p2.8.m1.1a"><mrow id="Thmproofx1.p2.8.m1.1.2" xref="Thmproofx1.p2.8.m1.1.2.cmml"><mi id="Thmproofx1.p2.8.m1.1.2.2" xref="Thmproofx1.p2.8.m1.1.2.2.cmml">c</mi><mo lspace="0em" rspace="0em" id="Thmproofx1.p2.8.m1.1.2.1" xref="Thmproofx1.p2.8.m1.1.2.1.cmml">​</mo><mrow id="Thmproofx1.p2.8.m1.1.2.3.2" xref="Thmproofx1.p2.8.m1.1.2.cmml"><mo stretchy="false" id="Thmproofx1.p2.8.m1.1.2.3.2.1" xref="Thmproofx1.p2.8.m1.1.2.cmml">(</mo><mi id="Thmproofx1.p2.8.m1.1.1" xref="Thmproofx1.p2.8.m1.1.1.cmml">k</mi><mo stretchy="false" id="Thmproofx1.p2.8.m1.1.2.3.2.2" xref="Thmproofx1.p2.8.m1.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.8.m1.1b"><apply id="Thmproofx1.p2.8.m1.1.2.cmml" xref="Thmproofx1.p2.8.m1.1.2"><times id="Thmproofx1.p2.8.m1.1.2.1.cmml" xref="Thmproofx1.p2.8.m1.1.2.1"></times><ci id="Thmproofx1.p2.8.m1.1.2.2.cmml" xref="Thmproofx1.p2.8.m1.1.2.2">𝑐</ci><ci id="Thmproofx1.p2.8.m1.1.1.cmml" xref="Thmproofx1.p2.8.m1.1.1">𝑘</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.8.m1.1c">c(k)</annotation></semantics></math> is the ground-truth label for the <math id="Thmproofx1.p2.9.m2.1" class="ltx_Math" alttext="k^{th}" display="inline"><semantics id="Thmproofx1.p2.9.m2.1a"><msup id="Thmproofx1.p2.9.m2.1.1" xref="Thmproofx1.p2.9.m2.1.1.cmml"><mi id="Thmproofx1.p2.9.m2.1.1.2" xref="Thmproofx1.p2.9.m2.1.1.2.cmml">k</mi><mrow id="Thmproofx1.p2.9.m2.1.1.3" xref="Thmproofx1.p2.9.m2.1.1.3.cmml"><mi id="Thmproofx1.p2.9.m2.1.1.3.2" xref="Thmproofx1.p2.9.m2.1.1.3.2.cmml">t</mi><mo lspace="0em" rspace="0em" id="Thmproofx1.p2.9.m2.1.1.3.1" xref="Thmproofx1.p2.9.m2.1.1.3.1.cmml">​</mo><mi id="Thmproofx1.p2.9.m2.1.1.3.3" xref="Thmproofx1.p2.9.m2.1.1.3.3.cmml">h</mi></mrow></msup><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.9.m2.1b"><apply id="Thmproofx1.p2.9.m2.1.1.cmml" xref="Thmproofx1.p2.9.m2.1.1"><csymbol cd="ambiguous" id="Thmproofx1.p2.9.m2.1.1.1.cmml" xref="Thmproofx1.p2.9.m2.1.1">superscript</csymbol><ci id="Thmproofx1.p2.9.m2.1.1.2.cmml" xref="Thmproofx1.p2.9.m2.1.1.2">𝑘</ci><apply id="Thmproofx1.p2.9.m2.1.1.3.cmml" xref="Thmproofx1.p2.9.m2.1.1.3"><times id="Thmproofx1.p2.9.m2.1.1.3.1.cmml" xref="Thmproofx1.p2.9.m2.1.1.3.1"></times><ci id="Thmproofx1.p2.9.m2.1.1.3.2.cmml" xref="Thmproofx1.p2.9.m2.1.1.3.2">𝑡</ci><ci id="Thmproofx1.p2.9.m2.1.1.3.3.cmml" xref="Thmproofx1.p2.9.m2.1.1.3.3">ℎ</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.9.m2.1c">k^{th}</annotation></semantics></math> sample in the batch, and
<math id="Thmproofx1.p2.10.m3.1" class="ltx_Math" alttext="y_{c(k)}" display="inline"><semantics id="Thmproofx1.p2.10.m3.1a"><msub id="Thmproofx1.p2.10.m3.1.2" xref="Thmproofx1.p2.10.m3.1.2.cmml"><mi id="Thmproofx1.p2.10.m3.1.2.2" xref="Thmproofx1.p2.10.m3.1.2.2.cmml">y</mi><mrow id="Thmproofx1.p2.10.m3.1.1.1" xref="Thmproofx1.p2.10.m3.1.1.1.cmml"><mi id="Thmproofx1.p2.10.m3.1.1.1.3" xref="Thmproofx1.p2.10.m3.1.1.1.3.cmml">c</mi><mo lspace="0em" rspace="0em" id="Thmproofx1.p2.10.m3.1.1.1.2" xref="Thmproofx1.p2.10.m3.1.1.1.2.cmml">​</mo><mrow id="Thmproofx1.p2.10.m3.1.1.1.4.2" xref="Thmproofx1.p2.10.m3.1.1.1.cmml"><mo stretchy="false" id="Thmproofx1.p2.10.m3.1.1.1.4.2.1" xref="Thmproofx1.p2.10.m3.1.1.1.cmml">(</mo><mi id="Thmproofx1.p2.10.m3.1.1.1.1" xref="Thmproofx1.p2.10.m3.1.1.1.1.cmml">k</mi><mo stretchy="false" id="Thmproofx1.p2.10.m3.1.1.1.4.2.2" xref="Thmproofx1.p2.10.m3.1.1.1.cmml">)</mo></mrow></mrow></msub><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.10.m3.1b"><apply id="Thmproofx1.p2.10.m3.1.2.cmml" xref="Thmproofx1.p2.10.m3.1.2"><csymbol cd="ambiguous" id="Thmproofx1.p2.10.m3.1.2.1.cmml" xref="Thmproofx1.p2.10.m3.1.2">subscript</csymbol><ci id="Thmproofx1.p2.10.m3.1.2.2.cmml" xref="Thmproofx1.p2.10.m3.1.2.2">𝑦</ci><apply id="Thmproofx1.p2.10.m3.1.1.1.cmml" xref="Thmproofx1.p2.10.m3.1.1.1"><times id="Thmproofx1.p2.10.m3.1.1.1.2.cmml" xref="Thmproofx1.p2.10.m3.1.1.1.2"></times><ci id="Thmproofx1.p2.10.m3.1.1.1.3.cmml" xref="Thmproofx1.p2.10.m3.1.1.1.3">𝑐</ci><ci id="Thmproofx1.p2.10.m3.1.1.1.1.cmml" xref="Thmproofx1.p2.10.m3.1.1.1.1">𝑘</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.10.m3.1c">y_{c(k)}</annotation></semantics></math>
is the corresponding output score when <math id="Thmproofx1.p2.11.m4.1" class="ltx_Math" alttext="\bm{x}_{k}" display="inline"><semantics id="Thmproofx1.p2.11.m4.1a"><msub id="Thmproofx1.p2.11.m4.1.1" xref="Thmproofx1.p2.11.m4.1.1.cmml"><mi id="Thmproofx1.p2.11.m4.1.1.2" xref="Thmproofx1.p2.11.m4.1.1.2.cmml">𝒙</mi><mi id="Thmproofx1.p2.11.m4.1.1.3" xref="Thmproofx1.p2.11.m4.1.1.3.cmml">k</mi></msub><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.11.m4.1b"><apply id="Thmproofx1.p2.11.m4.1.1.cmml" xref="Thmproofx1.p2.11.m4.1.1"><csymbol cd="ambiguous" id="Thmproofx1.p2.11.m4.1.1.1.cmml" xref="Thmproofx1.p2.11.m4.1.1">subscript</csymbol><ci id="Thmproofx1.p2.11.m4.1.1.2.cmml" xref="Thmproofx1.p2.11.m4.1.1.2">𝒙</ci><ci id="Thmproofx1.p2.11.m4.1.1.3.cmml" xref="Thmproofx1.p2.11.m4.1.1.3">𝑘</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.11.m4.1c">\bm{x}_{k}</annotation></semantics></math> is given as input to the model.
We note that the gradient <math id="Thmproofx1.p2.12.m5.1" class="ltx_Math" alttext="d_{i}" display="inline"><semantics id="Thmproofx1.p2.12.m5.1a"><msub id="Thmproofx1.p2.12.m5.1.1" xref="Thmproofx1.p2.12.m5.1.1.cmml"><mi id="Thmproofx1.p2.12.m5.1.1.2" xref="Thmproofx1.p2.12.m5.1.1.2.cmml">d</mi><mi id="Thmproofx1.p2.12.m5.1.1.3" xref="Thmproofx1.p2.12.m5.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.12.m5.1b"><apply id="Thmproofx1.p2.12.m5.1.1.cmml" xref="Thmproofx1.p2.12.m5.1.1"><csymbol cd="ambiguous" id="Thmproofx1.p2.12.m5.1.1.1.cmml" xref="Thmproofx1.p2.12.m5.1.1">subscript</csymbol><ci id="Thmproofx1.p2.12.m5.1.1.2.cmml" xref="Thmproofx1.p2.12.m5.1.1.2">𝑑</ci><ci id="Thmproofx1.p2.12.m5.1.1.3.cmml" xref="Thmproofx1.p2.12.m5.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.12.m5.1c">d_{i}</annotation></semantics></math> of the loss w.r.t. an output <math id="Thmproofx1.p2.13.m6.1" class="ltx_Math" alttext="y_{i}" display="inline"><semantics id="Thmproofx1.p2.13.m6.1a"><msub id="Thmproofx1.p2.13.m6.1.1" xref="Thmproofx1.p2.13.m6.1.1.cmml"><mi id="Thmproofx1.p2.13.m6.1.1.2" xref="Thmproofx1.p2.13.m6.1.1.2.cmml">y</mi><mi id="Thmproofx1.p2.13.m6.1.1.3" xref="Thmproofx1.p2.13.m6.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.13.m6.1b"><apply id="Thmproofx1.p2.13.m6.1.1.cmml" xref="Thmproofx1.p2.13.m6.1.1"><csymbol cd="ambiguous" id="Thmproofx1.p2.13.m6.1.1.1.cmml" xref="Thmproofx1.p2.13.m6.1.1">subscript</csymbol><ci id="Thmproofx1.p2.13.m6.1.1.2.cmml" xref="Thmproofx1.p2.13.m6.1.1.2">𝑦</ci><ci id="Thmproofx1.p2.13.m6.1.1.3.cmml" xref="Thmproofx1.p2.13.m6.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.13.m6.1c">y_{i}</annotation></semantics></math> is</p>
<table id="Sx2.EGx3" class="ltx_equationgroup ltx_eqn_align ltx_eqn_table">

<tbody id="S4.E6"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S4.E6.m1.1" class="ltx_Math" alttext="\displaystyle d_{i}" display="inline"><semantics id="S4.E6.m1.1a"><msub id="S4.E6.m1.1.1" xref="S4.E6.m1.1.1.cmml"><mi id="S4.E6.m1.1.1.2" xref="S4.E6.m1.1.1.2.cmml">d</mi><mi id="S4.E6.m1.1.1.3" xref="S4.E6.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S4.E6.m1.1b"><apply id="S4.E6.m1.1.1.cmml" xref="S4.E6.m1.1.1"><csymbol cd="ambiguous" id="S4.E6.m1.1.1.1.cmml" xref="S4.E6.m1.1.1">subscript</csymbol><ci id="S4.E6.m1.1.1.2.cmml" xref="S4.E6.m1.1.1.2">𝑑</ci><ci id="S4.E6.m1.1.1.3.cmml" xref="S4.E6.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.E6.m1.1c">\displaystyle d_{i}</annotation></semantics></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="S4.E6.m2.5" class="ltx_Math" alttext="\displaystyle=\frac{\partial l(\bm{X},C)}{\partial y_{i}}=-\frac{1}{B}\sum_{k=1}^{B}\left(\frac{\partial\ln e^{y_{c(k)}}}{\partial y_{i}}-\frac{\partial\ln\sum\nolimits_{j}e^{y_{j(k)}}}{\partial y_{i}}\right)" display="inline"><semantics id="S4.E6.m2.5a"><mrow id="S4.E6.m2.5.5" xref="S4.E6.m2.5.5.cmml"><mi id="S4.E6.m2.5.5.3" xref="S4.E6.m2.5.5.3.cmml"></mi><mo id="S4.E6.m2.5.5.4" xref="S4.E6.m2.5.5.4.cmml">=</mo><mstyle displaystyle="true" id="S4.E6.m2.2.2" xref="S4.E6.m2.2.2.cmml"><mfrac id="S4.E6.m2.2.2a" xref="S4.E6.m2.2.2.cmml"><mrow id="S4.E6.m2.2.2.2" xref="S4.E6.m2.2.2.2.cmml"><mo rspace="0em" id="S4.E6.m2.2.2.2.3" xref="S4.E6.m2.2.2.2.3.cmml">∂</mo><mrow id="S4.E6.m2.2.2.2.4" xref="S4.E6.m2.2.2.2.4.cmml"><mi id="S4.E6.m2.2.2.2.4.2" xref="S4.E6.m2.2.2.2.4.2.cmml">l</mi><mo lspace="0em" rspace="0em" id="S4.E6.m2.2.2.2.4.1" xref="S4.E6.m2.2.2.2.4.1.cmml">​</mo><mrow id="S4.E6.m2.2.2.2.4.3.2" xref="S4.E6.m2.2.2.2.4.3.1.cmml"><mo stretchy="false" id="S4.E6.m2.2.2.2.4.3.2.1" xref="S4.E6.m2.2.2.2.4.3.1.cmml">(</mo><mi id="S4.E6.m2.1.1.1.1" xref="S4.E6.m2.1.1.1.1.cmml">𝑿</mi><mo id="S4.E6.m2.2.2.2.4.3.2.2" xref="S4.E6.m2.2.2.2.4.3.1.cmml">,</mo><mi id="S4.E6.m2.2.2.2.2" xref="S4.E6.m2.2.2.2.2.cmml">C</mi><mo stretchy="false" id="S4.E6.m2.2.2.2.4.3.2.3" xref="S4.E6.m2.2.2.2.4.3.1.cmml">)</mo></mrow></mrow></mrow><mrow id="S4.E6.m2.2.2.4" xref="S4.E6.m2.2.2.4.cmml"><mo rspace="0em" id="S4.E6.m2.2.2.4.1" xref="S4.E6.m2.2.2.4.1.cmml">∂</mo><msub id="S4.E6.m2.2.2.4.2" xref="S4.E6.m2.2.2.4.2.cmml"><mi id="S4.E6.m2.2.2.4.2.2" xref="S4.E6.m2.2.2.4.2.2.cmml">y</mi><mi id="S4.E6.m2.2.2.4.2.3" xref="S4.E6.m2.2.2.4.2.3.cmml">i</mi></msub></mrow></mfrac></mstyle><mo id="S4.E6.m2.5.5.5" xref="S4.E6.m2.5.5.5.cmml">=</mo><mrow id="S4.E6.m2.5.5.1" xref="S4.E6.m2.5.5.1.cmml"><mo id="S4.E6.m2.5.5.1a" xref="S4.E6.m2.5.5.1.cmml">−</mo><mrow id="S4.E6.m2.5.5.1.1" xref="S4.E6.m2.5.5.1.1.cmml"><mstyle displaystyle="true" id="S4.E6.m2.5.5.1.1.3" xref="S4.E6.m2.5.5.1.1.3.cmml"><mfrac id="S4.E6.m2.5.5.1.1.3a" xref="S4.E6.m2.5.5.1.1.3.cmml"><mn id="S4.E6.m2.5.5.1.1.3.2" xref="S4.E6.m2.5.5.1.1.3.2.cmml">1</mn><mi id="S4.E6.m2.5.5.1.1.3.3" xref="S4.E6.m2.5.5.1.1.3.3.cmml">B</mi></mfrac></mstyle><mo lspace="0em" rspace="0em" id="S4.E6.m2.5.5.1.1.2" xref="S4.E6.m2.5.5.1.1.2.cmml">​</mo><mrow id="S4.E6.m2.5.5.1.1.1" xref="S4.E6.m2.5.5.1.1.1.cmml"><mstyle displaystyle="true" id="S4.E6.m2.5.5.1.1.1.2" xref="S4.E6.m2.5.5.1.1.1.2.cmml"><munderover id="S4.E6.m2.5.5.1.1.1.2a" xref="S4.E6.m2.5.5.1.1.1.2.cmml"><mo movablelimits="false" id="S4.E6.m2.5.5.1.1.1.2.2.2" xref="S4.E6.m2.5.5.1.1.1.2.2.2.cmml">∑</mo><mrow id="S4.E6.m2.5.5.1.1.1.2.2.3" xref="S4.E6.m2.5.5.1.1.1.2.2.3.cmml"><mi id="S4.E6.m2.5.5.1.1.1.2.2.3.2" xref="S4.E6.m2.5.5.1.1.1.2.2.3.2.cmml">k</mi><mo id="S4.E6.m2.5.5.1.1.1.2.2.3.1" xref="S4.E6.m2.5.5.1.1.1.2.2.3.1.cmml">=</mo><mn id="S4.E6.m2.5.5.1.1.1.2.2.3.3" xref="S4.E6.m2.5.5.1.1.1.2.2.3.3.cmml">1</mn></mrow><mi id="S4.E6.m2.5.5.1.1.1.2.3" xref="S4.E6.m2.5.5.1.1.1.2.3.cmml">B</mi></munderover></mstyle><mrow id="S4.E6.m2.5.5.1.1.1.1.1" xref="S4.E6.m2.5.5.1.1.1.1.1.1.cmml"><mo id="S4.E6.m2.5.5.1.1.1.1.1.2" xref="S4.E6.m2.5.5.1.1.1.1.1.1.cmml">(</mo><mrow id="S4.E6.m2.5.5.1.1.1.1.1.1" xref="S4.E6.m2.5.5.1.1.1.1.1.1.cmml"><mstyle displaystyle="true" id="S4.E6.m2.3.3" xref="S4.E6.m2.3.3.cmml"><mfrac id="S4.E6.m2.3.3a" xref="S4.E6.m2.3.3.cmml"><mrow id="S4.E6.m2.3.3.1" xref="S4.E6.m2.3.3.1.cmml"><mo rspace="0.167em" id="S4.E6.m2.3.3.1.2" xref="S4.E6.m2.3.3.1.2.cmml">∂</mo><mrow id="S4.E6.m2.3.3.1.3" xref="S4.E6.m2.3.3.1.3.cmml"><mi id="S4.E6.m2.3.3.1.3.1" xref="S4.E6.m2.3.3.1.3.1.cmml">ln</mi><mo lspace="0.167em" id="S4.E6.m2.3.3.1.3a" xref="S4.E6.m2.3.3.1.3.cmml">⁡</mo><msup id="S4.E6.m2.3.3.1.3.2" xref="S4.E6.m2.3.3.1.3.2.cmml"><mi id="S4.E6.m2.3.3.1.3.2.2" xref="S4.E6.m2.3.3.1.3.2.2.cmml">e</mi><msub id="S4.E6.m2.3.3.1.1.1" xref="S4.E6.m2.3.3.1.1.1.cmml"><mi id="S4.E6.m2.3.3.1.1.1.3" xref="S4.E6.m2.3.3.1.1.1.3.cmml">y</mi><mrow id="S4.E6.m2.3.3.1.1.1.1.1" xref="S4.E6.m2.3.3.1.1.1.1.1.cmml"><mi id="S4.E6.m2.3.3.1.1.1.1.1.3" xref="S4.E6.m2.3.3.1.1.1.1.1.3.cmml">c</mi><mo lspace="0em" rspace="0em" id="S4.E6.m2.3.3.1.1.1.1.1.2" xref="S4.E6.m2.3.3.1.1.1.1.1.2.cmml">​</mo><mrow id="S4.E6.m2.3.3.1.1.1.1.1.4.2" xref="S4.E6.m2.3.3.1.1.1.1.1.cmml"><mo stretchy="false" id="S4.E6.m2.3.3.1.1.1.1.1.4.2.1" xref="S4.E6.m2.3.3.1.1.1.1.1.cmml">(</mo><mi id="S4.E6.m2.3.3.1.1.1.1.1.1" xref="S4.E6.m2.3.3.1.1.1.1.1.1.cmml">k</mi><mo stretchy="false" id="S4.E6.m2.3.3.1.1.1.1.1.4.2.2" xref="S4.E6.m2.3.3.1.1.1.1.1.cmml">)</mo></mrow></mrow></msub></msup></mrow></mrow><mrow id="S4.E6.m2.3.3.3" xref="S4.E6.m2.3.3.3.cmml"><mo rspace="0em" id="S4.E6.m2.3.3.3.1" xref="S4.E6.m2.3.3.3.1.cmml">∂</mo><msub id="S4.E6.m2.3.3.3.2" xref="S4.E6.m2.3.3.3.2.cmml"><mi id="S4.E6.m2.3.3.3.2.2" xref="S4.E6.m2.3.3.3.2.2.cmml">y</mi><mi id="S4.E6.m2.3.3.3.2.3" xref="S4.E6.m2.3.3.3.2.3.cmml">i</mi></msub></mrow></mfrac></mstyle><mo id="S4.E6.m2.5.5.1.1.1.1.1.1.1" xref="S4.E6.m2.5.5.1.1.1.1.1.1.1.cmml">−</mo><mstyle displaystyle="true" id="S4.E6.m2.4.4" xref="S4.E6.m2.4.4.cmml"><mfrac id="S4.E6.m2.4.4a" xref="S4.E6.m2.4.4.cmml"><mrow id="S4.E6.m2.4.4.1" xref="S4.E6.m2.4.4.1.cmml"><mo rspace="0.167em" id="S4.E6.m2.4.4.1.2" xref="S4.E6.m2.4.4.1.2.cmml">∂</mo><mrow id="S4.E6.m2.4.4.1.3" xref="S4.E6.m2.4.4.1.3.cmml"><mi id="S4.E6.m2.4.4.1.3.2" xref="S4.E6.m2.4.4.1.3.2.cmml">ln</mi><mo lspace="0em" rspace="0em" id="S4.E6.m2.4.4.1.3.1" xref="S4.E6.m2.4.4.1.3.1.cmml">​</mo><mrow id="S4.E6.m2.4.4.1.3.3" xref="S4.E6.m2.4.4.1.3.3.cmml"><msub id="S4.E6.m2.4.4.1.3.3.1" xref="S4.E6.m2.4.4.1.3.3.1.cmml"><mo id="S4.E6.m2.4.4.1.3.3.1.2" xref="S4.E6.m2.4.4.1.3.3.1.2.cmml">∑</mo><mi id="S4.E6.m2.4.4.1.3.3.1.3" xref="S4.E6.m2.4.4.1.3.3.1.3.cmml">j</mi></msub><msup id="S4.E6.m2.4.4.1.3.3.2" xref="S4.E6.m2.4.4.1.3.3.2.cmml"><mi id="S4.E6.m2.4.4.1.3.3.2.2" xref="S4.E6.m2.4.4.1.3.3.2.2.cmml">e</mi><msub id="S4.E6.m2.4.4.1.1.1" xref="S4.E6.m2.4.4.1.1.1.cmml"><mi id="S4.E6.m2.4.4.1.1.1.3" xref="S4.E6.m2.4.4.1.1.1.3.cmml">y</mi><mrow id="S4.E6.m2.4.4.1.1.1.1.1" xref="S4.E6.m2.4.4.1.1.1.1.1.cmml"><mi id="S4.E6.m2.4.4.1.1.1.1.1.3" xref="S4.E6.m2.4.4.1.1.1.1.1.3.cmml">j</mi><mo lspace="0em" rspace="0em" id="S4.E6.m2.4.4.1.1.1.1.1.2" xref="S4.E6.m2.4.4.1.1.1.1.1.2.cmml">​</mo><mrow id="S4.E6.m2.4.4.1.1.1.1.1.4.2" xref="S4.E6.m2.4.4.1.1.1.1.1.cmml"><mo stretchy="false" id="S4.E6.m2.4.4.1.1.1.1.1.4.2.1" xref="S4.E6.m2.4.4.1.1.1.1.1.cmml">(</mo><mi id="S4.E6.m2.4.4.1.1.1.1.1.1" xref="S4.E6.m2.4.4.1.1.1.1.1.1.cmml">k</mi><mo stretchy="false" id="S4.E6.m2.4.4.1.1.1.1.1.4.2.2" xref="S4.E6.m2.4.4.1.1.1.1.1.cmml">)</mo></mrow></mrow></msub></msup></mrow></mrow></mrow><mrow id="S4.E6.m2.4.4.3" xref="S4.E6.m2.4.4.3.cmml"><mo rspace="0em" id="S4.E6.m2.4.4.3.1" xref="S4.E6.m2.4.4.3.1.cmml">∂</mo><msub id="S4.E6.m2.4.4.3.2" xref="S4.E6.m2.4.4.3.2.cmml"><mi id="S4.E6.m2.4.4.3.2.2" xref="S4.E6.m2.4.4.3.2.2.cmml">y</mi><mi id="S4.E6.m2.4.4.3.2.3" xref="S4.E6.m2.4.4.3.2.3.cmml">i</mi></msub></mrow></mfrac></mstyle></mrow><mo id="S4.E6.m2.5.5.1.1.1.1.1.3" xref="S4.E6.m2.5.5.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.E6.m2.5b"><apply id="S4.E6.m2.5.5.cmml" xref="S4.E6.m2.5.5"><and id="S4.E6.m2.5.5a.cmml" xref="S4.E6.m2.5.5"></and><apply id="S4.E6.m2.5.5b.cmml" xref="S4.E6.m2.5.5"><eq id="S4.E6.m2.5.5.4.cmml" xref="S4.E6.m2.5.5.4"></eq><csymbol cd="latexml" id="S4.E6.m2.5.5.3.cmml" xref="S4.E6.m2.5.5.3">absent</csymbol><apply id="S4.E6.m2.2.2.cmml" xref="S4.E6.m2.2.2"><divide id="S4.E6.m2.2.2.3.cmml" xref="S4.E6.m2.2.2"></divide><apply id="S4.E6.m2.2.2.2.cmml" xref="S4.E6.m2.2.2.2"><partialdiff id="S4.E6.m2.2.2.2.3.cmml" xref="S4.E6.m2.2.2.2.3"></partialdiff><apply id="S4.E6.m2.2.2.2.4.cmml" xref="S4.E6.m2.2.2.2.4"><times id="S4.E6.m2.2.2.2.4.1.cmml" xref="S4.E6.m2.2.2.2.4.1"></times><ci id="S4.E6.m2.2.2.2.4.2.cmml" xref="S4.E6.m2.2.2.2.4.2">𝑙</ci><interval closure="open" id="S4.E6.m2.2.2.2.4.3.1.cmml" xref="S4.E6.m2.2.2.2.4.3.2"><ci id="S4.E6.m2.1.1.1.1.cmml" xref="S4.E6.m2.1.1.1.1">𝑿</ci><ci id="S4.E6.m2.2.2.2.2.cmml" xref="S4.E6.m2.2.2.2.2">𝐶</ci></interval></apply></apply><apply id="S4.E6.m2.2.2.4.cmml" xref="S4.E6.m2.2.2.4"><partialdiff id="S4.E6.m2.2.2.4.1.cmml" xref="S4.E6.m2.2.2.4.1"></partialdiff><apply id="S4.E6.m2.2.2.4.2.cmml" xref="S4.E6.m2.2.2.4.2"><csymbol cd="ambiguous" id="S4.E6.m2.2.2.4.2.1.cmml" xref="S4.E6.m2.2.2.4.2">subscript</csymbol><ci id="S4.E6.m2.2.2.4.2.2.cmml" xref="S4.E6.m2.2.2.4.2.2">𝑦</ci><ci id="S4.E6.m2.2.2.4.2.3.cmml" xref="S4.E6.m2.2.2.4.2.3">𝑖</ci></apply></apply></apply></apply><apply id="S4.E6.m2.5.5c.cmml" xref="S4.E6.m2.5.5"><eq id="S4.E6.m2.5.5.5.cmml" xref="S4.E6.m2.5.5.5"></eq><share href="#S4.E6.m2.2.2.cmml" id="S4.E6.m2.5.5d.cmml" xref="S4.E6.m2.5.5"></share><apply id="S4.E6.m2.5.5.1.cmml" xref="S4.E6.m2.5.5.1"><minus id="S4.E6.m2.5.5.1.2.cmml" xref="S4.E6.m2.5.5.1"></minus><apply id="S4.E6.m2.5.5.1.1.cmml" xref="S4.E6.m2.5.5.1.1"><times id="S4.E6.m2.5.5.1.1.2.cmml" xref="S4.E6.m2.5.5.1.1.2"></times><apply id="S4.E6.m2.5.5.1.1.3.cmml" xref="S4.E6.m2.5.5.1.1.3"><divide id="S4.E6.m2.5.5.1.1.3.1.cmml" xref="S4.E6.m2.5.5.1.1.3"></divide><cn type="integer" id="S4.E6.m2.5.5.1.1.3.2.cmml" xref="S4.E6.m2.5.5.1.1.3.2">1</cn><ci id="S4.E6.m2.5.5.1.1.3.3.cmml" xref="S4.E6.m2.5.5.1.1.3.3">𝐵</ci></apply><apply id="S4.E6.m2.5.5.1.1.1.cmml" xref="S4.E6.m2.5.5.1.1.1"><apply id="S4.E6.m2.5.5.1.1.1.2.cmml" xref="S4.E6.m2.5.5.1.1.1.2"><csymbol cd="ambiguous" id="S4.E6.m2.5.5.1.1.1.2.1.cmml" xref="S4.E6.m2.5.5.1.1.1.2">superscript</csymbol><apply id="S4.E6.m2.5.5.1.1.1.2.2.cmml" xref="S4.E6.m2.5.5.1.1.1.2"><csymbol cd="ambiguous" id="S4.E6.m2.5.5.1.1.1.2.2.1.cmml" xref="S4.E6.m2.5.5.1.1.1.2">subscript</csymbol><sum id="S4.E6.m2.5.5.1.1.1.2.2.2.cmml" xref="S4.E6.m2.5.5.1.1.1.2.2.2"></sum><apply id="S4.E6.m2.5.5.1.1.1.2.2.3.cmml" xref="S4.E6.m2.5.5.1.1.1.2.2.3"><eq id="S4.E6.m2.5.5.1.1.1.2.2.3.1.cmml" xref="S4.E6.m2.5.5.1.1.1.2.2.3.1"></eq><ci id="S4.E6.m2.5.5.1.1.1.2.2.3.2.cmml" xref="S4.E6.m2.5.5.1.1.1.2.2.3.2">𝑘</ci><cn type="integer" id="S4.E6.m2.5.5.1.1.1.2.2.3.3.cmml" xref="S4.E6.m2.5.5.1.1.1.2.2.3.3">1</cn></apply></apply><ci id="S4.E6.m2.5.5.1.1.1.2.3.cmml" xref="S4.E6.m2.5.5.1.1.1.2.3">𝐵</ci></apply><apply id="S4.E6.m2.5.5.1.1.1.1.1.1.cmml" xref="S4.E6.m2.5.5.1.1.1.1.1"><minus id="S4.E6.m2.5.5.1.1.1.1.1.1.1.cmml" xref="S4.E6.m2.5.5.1.1.1.1.1.1.1"></minus><apply id="S4.E6.m2.3.3.cmml" xref="S4.E6.m2.3.3"><divide id="S4.E6.m2.3.3.2.cmml" xref="S4.E6.m2.3.3"></divide><apply id="S4.E6.m2.3.3.1.cmml" xref="S4.E6.m2.3.3.1"><partialdiff id="S4.E6.m2.3.3.1.2.cmml" xref="S4.E6.m2.3.3.1.2"></partialdiff><apply id="S4.E6.m2.3.3.1.3.cmml" xref="S4.E6.m2.3.3.1.3"><ln id="S4.E6.m2.3.3.1.3.1.cmml" xref="S4.E6.m2.3.3.1.3.1"></ln><apply id="S4.E6.m2.3.3.1.3.2.cmml" xref="S4.E6.m2.3.3.1.3.2"><csymbol cd="ambiguous" id="S4.E6.m2.3.3.1.3.2.1.cmml" xref="S4.E6.m2.3.3.1.3.2">superscript</csymbol><ci id="S4.E6.m2.3.3.1.3.2.2.cmml" xref="S4.E6.m2.3.3.1.3.2.2">𝑒</ci><apply id="S4.E6.m2.3.3.1.1.1.cmml" xref="S4.E6.m2.3.3.1.1.1"><csymbol cd="ambiguous" id="S4.E6.m2.3.3.1.1.1.2.cmml" xref="S4.E6.m2.3.3.1.1.1">subscript</csymbol><ci id="S4.E6.m2.3.3.1.1.1.3.cmml" xref="S4.E6.m2.3.3.1.1.1.3">𝑦</ci><apply id="S4.E6.m2.3.3.1.1.1.1.1.cmml" xref="S4.E6.m2.3.3.1.1.1.1.1"><times id="S4.E6.m2.3.3.1.1.1.1.1.2.cmml" xref="S4.E6.m2.3.3.1.1.1.1.1.2"></times><ci id="S4.E6.m2.3.3.1.1.1.1.1.3.cmml" xref="S4.E6.m2.3.3.1.1.1.1.1.3">𝑐</ci><ci id="S4.E6.m2.3.3.1.1.1.1.1.1.cmml" xref="S4.E6.m2.3.3.1.1.1.1.1.1">𝑘</ci></apply></apply></apply></apply></apply><apply id="S4.E6.m2.3.3.3.cmml" xref="S4.E6.m2.3.3.3"><partialdiff id="S4.E6.m2.3.3.3.1.cmml" xref="S4.E6.m2.3.3.3.1"></partialdiff><apply id="S4.E6.m2.3.3.3.2.cmml" xref="S4.E6.m2.3.3.3.2"><csymbol cd="ambiguous" id="S4.E6.m2.3.3.3.2.1.cmml" xref="S4.E6.m2.3.3.3.2">subscript</csymbol><ci id="S4.E6.m2.3.3.3.2.2.cmml" xref="S4.E6.m2.3.3.3.2.2">𝑦</ci><ci id="S4.E6.m2.3.3.3.2.3.cmml" xref="S4.E6.m2.3.3.3.2.3">𝑖</ci></apply></apply></apply><apply id="S4.E6.m2.4.4.cmml" xref="S4.E6.m2.4.4"><divide id="S4.E6.m2.4.4.2.cmml" xref="S4.E6.m2.4.4"></divide><apply id="S4.E6.m2.4.4.1.cmml" xref="S4.E6.m2.4.4.1"><partialdiff id="S4.E6.m2.4.4.1.2.cmml" xref="S4.E6.m2.4.4.1.2"></partialdiff><apply id="S4.E6.m2.4.4.1.3.cmml" xref="S4.E6.m2.4.4.1.3"><times id="S4.E6.m2.4.4.1.3.1.cmml" xref="S4.E6.m2.4.4.1.3.1"></times><ln id="S4.E6.m2.4.4.1.3.2.cmml" xref="S4.E6.m2.4.4.1.3.2"></ln><apply id="S4.E6.m2.4.4.1.3.3.cmml" xref="S4.E6.m2.4.4.1.3.3"><apply id="S4.E6.m2.4.4.1.3.3.1.cmml" xref="S4.E6.m2.4.4.1.3.3.1"><csymbol cd="ambiguous" id="S4.E6.m2.4.4.1.3.3.1.1.cmml" xref="S4.E6.m2.4.4.1.3.3.1">subscript</csymbol><sum id="S4.E6.m2.4.4.1.3.3.1.2.cmml" xref="S4.E6.m2.4.4.1.3.3.1.2"></sum><ci id="S4.E6.m2.4.4.1.3.3.1.3.cmml" xref="S4.E6.m2.4.4.1.3.3.1.3">𝑗</ci></apply><apply id="S4.E6.m2.4.4.1.3.3.2.cmml" xref="S4.E6.m2.4.4.1.3.3.2"><csymbol cd="ambiguous" id="S4.E6.m2.4.4.1.3.3.2.1.cmml" xref="S4.E6.m2.4.4.1.3.3.2">superscript</csymbol><ci id="S4.E6.m2.4.4.1.3.3.2.2.cmml" xref="S4.E6.m2.4.4.1.3.3.2.2">𝑒</ci><apply id="S4.E6.m2.4.4.1.1.1.cmml" xref="S4.E6.m2.4.4.1.1.1"><csymbol cd="ambiguous" id="S4.E6.m2.4.4.1.1.1.2.cmml" xref="S4.E6.m2.4.4.1.1.1">subscript</csymbol><ci id="S4.E6.m2.4.4.1.1.1.3.cmml" xref="S4.E6.m2.4.4.1.1.1.3">𝑦</ci><apply id="S4.E6.m2.4.4.1.1.1.1.1.cmml" xref="S4.E6.m2.4.4.1.1.1.1.1"><times id="S4.E6.m2.4.4.1.1.1.1.1.2.cmml" xref="S4.E6.m2.4.4.1.1.1.1.1.2"></times><ci id="S4.E6.m2.4.4.1.1.1.1.1.3.cmml" xref="S4.E6.m2.4.4.1.1.1.1.1.3">𝑗</ci><ci id="S4.E6.m2.4.4.1.1.1.1.1.1.cmml" xref="S4.E6.m2.4.4.1.1.1.1.1.1">𝑘</ci></apply></apply></apply></apply></apply></apply><apply id="S4.E6.m2.4.4.3.cmml" xref="S4.E6.m2.4.4.3"><partialdiff id="S4.E6.m2.4.4.3.1.cmml" xref="S4.E6.m2.4.4.3.1"></partialdiff><apply id="S4.E6.m2.4.4.3.2.cmml" xref="S4.E6.m2.4.4.3.2"><csymbol cd="ambiguous" id="S4.E6.m2.4.4.3.2.1.cmml" xref="S4.E6.m2.4.4.3.2">subscript</csymbol><ci id="S4.E6.m2.4.4.3.2.2.cmml" xref="S4.E6.m2.4.4.3.2.2">𝑦</ci><ci id="S4.E6.m2.4.4.3.2.3.cmml" xref="S4.E6.m2.4.4.3.2.3">𝑖</ci></apply></apply></apply></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.E6.m2.5c">\displaystyle=\frac{\partial l(\bm{X},C)}{\partial y_{i}}=-\frac{1}{B}\sum_{k=1}^{B}\left(\frac{\partial\ln e^{y_{c(k)}}}{\partial y_{i}}-\frac{\partial\ln\sum\nolimits_{j}e^{y_{j(k)}}}{\partial y_{i}}\right)</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(6)</span></td>
</tr></tbody>
<tbody id="S4.E7"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_eqn_cell"></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="S4.E7.m1.4" class="ltx_Math" alttext="\displaystyle=-\frac{1}{B}\sum_{k=1}^{B}\left(\mathds{1}{(i=c(k))}-\frac{e^{y_{i(k)}}}{\sum\nolimits_{j}e^{y_{j(k)}}}\right)\,," display="inline"><semantics id="S4.E7.m1.4a"><mrow id="S4.E7.m1.4.4.1" xref="S4.E7.m1.4.4.1.1.cmml"><mrow id="S4.E7.m1.4.4.1.1" xref="S4.E7.m1.4.4.1.1.cmml"><mi id="S4.E7.m1.4.4.1.1.3" xref="S4.E7.m1.4.4.1.1.3.cmml"></mi><mo id="S4.E7.m1.4.4.1.1.2" xref="S4.E7.m1.4.4.1.1.2.cmml">=</mo><mrow id="S4.E7.m1.4.4.1.1.1" xref="S4.E7.m1.4.4.1.1.1.cmml"><mo id="S4.E7.m1.4.4.1.1.1a" xref="S4.E7.m1.4.4.1.1.1.cmml">−</mo><mrow id="S4.E7.m1.4.4.1.1.1.1" xref="S4.E7.m1.4.4.1.1.1.1.cmml"><mstyle displaystyle="true" id="S4.E7.m1.4.4.1.1.1.1.3" xref="S4.E7.m1.4.4.1.1.1.1.3.cmml"><mfrac id="S4.E7.m1.4.4.1.1.1.1.3a" xref="S4.E7.m1.4.4.1.1.1.1.3.cmml"><mn id="S4.E7.m1.4.4.1.1.1.1.3.2" xref="S4.E7.m1.4.4.1.1.1.1.3.2.cmml">1</mn><mi id="S4.E7.m1.4.4.1.1.1.1.3.3" xref="S4.E7.m1.4.4.1.1.1.1.3.3.cmml">B</mi></mfrac></mstyle><mo lspace="0em" rspace="0em" id="S4.E7.m1.4.4.1.1.1.1.2" xref="S4.E7.m1.4.4.1.1.1.1.2.cmml">​</mo><mrow id="S4.E7.m1.4.4.1.1.1.1.1" xref="S4.E7.m1.4.4.1.1.1.1.1.cmml"><mstyle displaystyle="true" id="S4.E7.m1.4.4.1.1.1.1.1.2" xref="S4.E7.m1.4.4.1.1.1.1.1.2.cmml"><munderover id="S4.E7.m1.4.4.1.1.1.1.1.2a" xref="S4.E7.m1.4.4.1.1.1.1.1.2.cmml"><mo movablelimits="false" id="S4.E7.m1.4.4.1.1.1.1.1.2.2.2" xref="S4.E7.m1.4.4.1.1.1.1.1.2.2.2.cmml">∑</mo><mrow id="S4.E7.m1.4.4.1.1.1.1.1.2.2.3" xref="S4.E7.m1.4.4.1.1.1.1.1.2.2.3.cmml"><mi id="S4.E7.m1.4.4.1.1.1.1.1.2.2.3.2" xref="S4.E7.m1.4.4.1.1.1.1.1.2.2.3.2.cmml">k</mi><mo id="S4.E7.m1.4.4.1.1.1.1.1.2.2.3.1" xref="S4.E7.m1.4.4.1.1.1.1.1.2.2.3.1.cmml">=</mo><mn id="S4.E7.m1.4.4.1.1.1.1.1.2.2.3.3" xref="S4.E7.m1.4.4.1.1.1.1.1.2.2.3.3.cmml">1</mn></mrow><mi id="S4.E7.m1.4.4.1.1.1.1.1.2.3" xref="S4.E7.m1.4.4.1.1.1.1.1.2.3.cmml">B</mi></munderover></mstyle><mrow id="S4.E7.m1.4.4.1.1.1.1.1.1.1" xref="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.cmml"><mo id="S4.E7.m1.4.4.1.1.1.1.1.1.1.2" xref="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S4.E7.m1.4.4.1.1.1.1.1.1.1.1" xref="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.cmml"><mrow id="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1" xref="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.cmml"><mn id="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.3" xref="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.3.cmml">𝟙</mn><mo lspace="0em" rspace="0em" id="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.2" xref="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.2.cmml">​</mo><mrow id="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.1.1" xref="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.2" xref="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.1" xref="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.1.cmml"><mi id="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.1.2" xref="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.1.2.cmml">i</mi><mo id="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.1.1" xref="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml">=</mo><mrow id="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.1.3" xref="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml"><mi id="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.1.3.2" xref="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.1.3.2.cmml">c</mi><mo lspace="0em" rspace="0em" id="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.1.3.1" xref="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.1.3.1.cmml">​</mo><mrow id="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.1.3.3.2" xref="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml"><mo stretchy="false" id="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.1.3.3.2.1" xref="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml">(</mo><mi id="S4.E7.m1.3.3" xref="S4.E7.m1.3.3.cmml">k</mi><mo stretchy="false" id="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.1.3.3.2.2" xref="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml">)</mo></mrow></mrow></mrow><mo stretchy="false" id="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.3" xref="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.2" xref="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.2.cmml">−</mo><mstyle displaystyle="true" id="S4.E7.m1.2.2" xref="S4.E7.m1.2.2.cmml"><mfrac id="S4.E7.m1.2.2a" xref="S4.E7.m1.2.2.cmml"><msup id="S4.E7.m1.1.1.1" xref="S4.E7.m1.1.1.1.cmml"><mi id="S4.E7.m1.1.1.1.3" xref="S4.E7.m1.1.1.1.3.cmml">e</mi><msub id="S4.E7.m1.1.1.1.1.1" xref="S4.E7.m1.1.1.1.1.1.cmml"><mi id="S4.E7.m1.1.1.1.1.1.3" xref="S4.E7.m1.1.1.1.1.1.3.cmml">y</mi><mrow id="S4.E7.m1.1.1.1.1.1.1.1" xref="S4.E7.m1.1.1.1.1.1.1.1.cmml"><mi id="S4.E7.m1.1.1.1.1.1.1.1.3" xref="S4.E7.m1.1.1.1.1.1.1.1.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="S4.E7.m1.1.1.1.1.1.1.1.2" xref="S4.E7.m1.1.1.1.1.1.1.1.2.cmml">​</mo><mrow id="S4.E7.m1.1.1.1.1.1.1.1.4.2" xref="S4.E7.m1.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S4.E7.m1.1.1.1.1.1.1.1.4.2.1" xref="S4.E7.m1.1.1.1.1.1.1.1.cmml">(</mo><mi id="S4.E7.m1.1.1.1.1.1.1.1.1" xref="S4.E7.m1.1.1.1.1.1.1.1.1.cmml">k</mi><mo stretchy="false" id="S4.E7.m1.1.1.1.1.1.1.1.4.2.2" xref="S4.E7.m1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></msub></msup><mrow id="S4.E7.m1.2.2.2" xref="S4.E7.m1.2.2.2.cmml"><msub id="S4.E7.m1.2.2.2.2" xref="S4.E7.m1.2.2.2.2.cmml"><mo id="S4.E7.m1.2.2.2.2.2" xref="S4.E7.m1.2.2.2.2.2.cmml">∑</mo><mi id="S4.E7.m1.2.2.2.2.3" xref="S4.E7.m1.2.2.2.2.3.cmml">j</mi></msub><msup id="S4.E7.m1.2.2.2.3" xref="S4.E7.m1.2.2.2.3.cmml"><mi id="S4.E7.m1.2.2.2.3.2" xref="S4.E7.m1.2.2.2.3.2.cmml">e</mi><msub id="S4.E7.m1.2.2.2.1.1" xref="S4.E7.m1.2.2.2.1.1.cmml"><mi id="S4.E7.m1.2.2.2.1.1.3" xref="S4.E7.m1.2.2.2.1.1.3.cmml">y</mi><mrow id="S4.E7.m1.2.2.2.1.1.1.1" xref="S4.E7.m1.2.2.2.1.1.1.1.cmml"><mi id="S4.E7.m1.2.2.2.1.1.1.1.3" xref="S4.E7.m1.2.2.2.1.1.1.1.3.cmml">j</mi><mo lspace="0em" rspace="0em" id="S4.E7.m1.2.2.2.1.1.1.1.2" xref="S4.E7.m1.2.2.2.1.1.1.1.2.cmml">​</mo><mrow id="S4.E7.m1.2.2.2.1.1.1.1.4.2" xref="S4.E7.m1.2.2.2.1.1.1.1.cmml"><mo stretchy="false" id="S4.E7.m1.2.2.2.1.1.1.1.4.2.1" xref="S4.E7.m1.2.2.2.1.1.1.1.cmml">(</mo><mi id="S4.E7.m1.2.2.2.1.1.1.1.1" xref="S4.E7.m1.2.2.2.1.1.1.1.1.cmml">k</mi><mo stretchy="false" id="S4.E7.m1.2.2.2.1.1.1.1.4.2.2" xref="S4.E7.m1.2.2.2.1.1.1.1.cmml">)</mo></mrow></mrow></msub></msup></mrow></mfrac></mstyle></mrow><mo rspace="0.170em" id="S4.E7.m1.4.4.1.1.1.1.1.1.1.3" xref="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><mo id="S4.E7.m1.4.4.1.2" xref="S4.E7.m1.4.4.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.E7.m1.4b"><apply id="S4.E7.m1.4.4.1.1.cmml" xref="S4.E7.m1.4.4.1"><eq id="S4.E7.m1.4.4.1.1.2.cmml" xref="S4.E7.m1.4.4.1.1.2"></eq><csymbol cd="latexml" id="S4.E7.m1.4.4.1.1.3.cmml" xref="S4.E7.m1.4.4.1.1.3">absent</csymbol><apply id="S4.E7.m1.4.4.1.1.1.cmml" xref="S4.E7.m1.4.4.1.1.1"><minus id="S4.E7.m1.4.4.1.1.1.2.cmml" xref="S4.E7.m1.4.4.1.1.1"></minus><apply id="S4.E7.m1.4.4.1.1.1.1.cmml" xref="S4.E7.m1.4.4.1.1.1.1"><times id="S4.E7.m1.4.4.1.1.1.1.2.cmml" xref="S4.E7.m1.4.4.1.1.1.1.2"></times><apply id="S4.E7.m1.4.4.1.1.1.1.3.cmml" xref="S4.E7.m1.4.4.1.1.1.1.3"><divide id="S4.E7.m1.4.4.1.1.1.1.3.1.cmml" xref="S4.E7.m1.4.4.1.1.1.1.3"></divide><cn type="integer" id="S4.E7.m1.4.4.1.1.1.1.3.2.cmml" xref="S4.E7.m1.4.4.1.1.1.1.3.2">1</cn><ci id="S4.E7.m1.4.4.1.1.1.1.3.3.cmml" xref="S4.E7.m1.4.4.1.1.1.1.3.3">𝐵</ci></apply><apply id="S4.E7.m1.4.4.1.1.1.1.1.cmml" xref="S4.E7.m1.4.4.1.1.1.1.1"><apply id="S4.E7.m1.4.4.1.1.1.1.1.2.cmml" xref="S4.E7.m1.4.4.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S4.E7.m1.4.4.1.1.1.1.1.2.1.cmml" xref="S4.E7.m1.4.4.1.1.1.1.1.2">superscript</csymbol><apply id="S4.E7.m1.4.4.1.1.1.1.1.2.2.cmml" xref="S4.E7.m1.4.4.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S4.E7.m1.4.4.1.1.1.1.1.2.2.1.cmml" xref="S4.E7.m1.4.4.1.1.1.1.1.2">subscript</csymbol><sum id="S4.E7.m1.4.4.1.1.1.1.1.2.2.2.cmml" xref="S4.E7.m1.4.4.1.1.1.1.1.2.2.2"></sum><apply id="S4.E7.m1.4.4.1.1.1.1.1.2.2.3.cmml" xref="S4.E7.m1.4.4.1.1.1.1.1.2.2.3"><eq id="S4.E7.m1.4.4.1.1.1.1.1.2.2.3.1.cmml" xref="S4.E7.m1.4.4.1.1.1.1.1.2.2.3.1"></eq><ci id="S4.E7.m1.4.4.1.1.1.1.1.2.2.3.2.cmml" xref="S4.E7.m1.4.4.1.1.1.1.1.2.2.3.2">𝑘</ci><cn type="integer" id="S4.E7.m1.4.4.1.1.1.1.1.2.2.3.3.cmml" xref="S4.E7.m1.4.4.1.1.1.1.1.2.2.3.3">1</cn></apply></apply><ci id="S4.E7.m1.4.4.1.1.1.1.1.2.3.cmml" xref="S4.E7.m1.4.4.1.1.1.1.1.2.3">𝐵</ci></apply><apply id="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.cmml" xref="S4.E7.m1.4.4.1.1.1.1.1.1.1"><minus id="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.2.cmml" xref="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.2"></minus><apply id="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.cmml" xref="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1"><times id="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.2.cmml" xref="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.2"></times><cn type="integer" id="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.3.cmml" xref="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.3">1</cn><apply id="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.1.1"><eq id="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.1.1"></eq><ci id="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.1.2">𝑖</ci><apply id="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.1.3"><times id="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.1.3.1.cmml" xref="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.1.3.1"></times><ci id="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.1.3.2.cmml" xref="S4.E7.m1.4.4.1.1.1.1.1.1.1.1.1.1.1.1.3.2">𝑐</ci><ci id="S4.E7.m1.3.3.cmml" xref="S4.E7.m1.3.3">𝑘</ci></apply></apply></apply><apply id="S4.E7.m1.2.2.cmml" xref="S4.E7.m1.2.2"><divide id="S4.E7.m1.2.2.3.cmml" xref="S4.E7.m1.2.2"></divide><apply id="S4.E7.m1.1.1.1.cmml" xref="S4.E7.m1.1.1.1"><csymbol cd="ambiguous" id="S4.E7.m1.1.1.1.2.cmml" xref="S4.E7.m1.1.1.1">superscript</csymbol><ci id="S4.E7.m1.1.1.1.3.cmml" xref="S4.E7.m1.1.1.1.3">𝑒</ci><apply id="S4.E7.m1.1.1.1.1.1.cmml" xref="S4.E7.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="S4.E7.m1.1.1.1.1.1.2.cmml" xref="S4.E7.m1.1.1.1.1.1">subscript</csymbol><ci id="S4.E7.m1.1.1.1.1.1.3.cmml" xref="S4.E7.m1.1.1.1.1.1.3">𝑦</ci><apply id="S4.E7.m1.1.1.1.1.1.1.1.cmml" xref="S4.E7.m1.1.1.1.1.1.1.1"><times id="S4.E7.m1.1.1.1.1.1.1.1.2.cmml" xref="S4.E7.m1.1.1.1.1.1.1.1.2"></times><ci id="S4.E7.m1.1.1.1.1.1.1.1.3.cmml" xref="S4.E7.m1.1.1.1.1.1.1.1.3">𝑖</ci><ci id="S4.E7.m1.1.1.1.1.1.1.1.1.cmml" xref="S4.E7.m1.1.1.1.1.1.1.1.1">𝑘</ci></apply></apply></apply><apply id="S4.E7.m1.2.2.2.cmml" xref="S4.E7.m1.2.2.2"><apply id="S4.E7.m1.2.2.2.2.cmml" xref="S4.E7.m1.2.2.2.2"><csymbol cd="ambiguous" id="S4.E7.m1.2.2.2.2.1.cmml" xref="S4.E7.m1.2.2.2.2">subscript</csymbol><sum id="S4.E7.m1.2.2.2.2.2.cmml" xref="S4.E7.m1.2.2.2.2.2"></sum><ci id="S4.E7.m1.2.2.2.2.3.cmml" xref="S4.E7.m1.2.2.2.2.3">𝑗</ci></apply><apply id="S4.E7.m1.2.2.2.3.cmml" xref="S4.E7.m1.2.2.2.3"><csymbol cd="ambiguous" id="S4.E7.m1.2.2.2.3.1.cmml" xref="S4.E7.m1.2.2.2.3">superscript</csymbol><ci id="S4.E7.m1.2.2.2.3.2.cmml" xref="S4.E7.m1.2.2.2.3.2">𝑒</ci><apply id="S4.E7.m1.2.2.2.1.1.cmml" xref="S4.E7.m1.2.2.2.1.1"><csymbol cd="ambiguous" id="S4.E7.m1.2.2.2.1.1.2.cmml" xref="S4.E7.m1.2.2.2.1.1">subscript</csymbol><ci id="S4.E7.m1.2.2.2.1.1.3.cmml" xref="S4.E7.m1.2.2.2.1.1.3">𝑦</ci><apply id="S4.E7.m1.2.2.2.1.1.1.1.cmml" xref="S4.E7.m1.2.2.2.1.1.1.1"><times id="S4.E7.m1.2.2.2.1.1.1.1.2.cmml" xref="S4.E7.m1.2.2.2.1.1.1.1.2"></times><ci id="S4.E7.m1.2.2.2.1.1.1.1.3.cmml" xref="S4.E7.m1.2.2.2.1.1.1.1.3">𝑗</ci><ci id="S4.E7.m1.2.2.2.1.1.1.1.1.cmml" xref="S4.E7.m1.2.2.2.1.1.1.1.1">𝑘</ci></apply></apply></apply></apply></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.E7.m1.4c">\displaystyle=-\frac{1}{B}\sum_{k=1}^{B}\left(\mathds{1}{(i=c(k))}-\frac{e^{y_{i(k)}}}{\sum\nolimits_{j}e^{y_{j(k)}}}\right)\,,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(7)</span></td>
</tr></tbody>
</table>
<p id="Thmproofx1.p2.16" class="ltx_p">where <math id="Thmproofx1.p2.14.m1.1" class="ltx_Math" alttext="\mathds{1}{(\alpha=\beta)}=1" display="inline"><semantics id="Thmproofx1.p2.14.m1.1a"><mrow id="Thmproofx1.p2.14.m1.1.1" xref="Thmproofx1.p2.14.m1.1.1.cmml"><mrow id="Thmproofx1.p2.14.m1.1.1.1" xref="Thmproofx1.p2.14.m1.1.1.1.cmml"><mn id="Thmproofx1.p2.14.m1.1.1.1.3" xref="Thmproofx1.p2.14.m1.1.1.1.3.cmml">𝟙</mn><mo lspace="0em" rspace="0em" id="Thmproofx1.p2.14.m1.1.1.1.2" xref="Thmproofx1.p2.14.m1.1.1.1.2.cmml">​</mo><mrow id="Thmproofx1.p2.14.m1.1.1.1.1.1" xref="Thmproofx1.p2.14.m1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="Thmproofx1.p2.14.m1.1.1.1.1.1.2" xref="Thmproofx1.p2.14.m1.1.1.1.1.1.1.cmml">(</mo><mrow id="Thmproofx1.p2.14.m1.1.1.1.1.1.1" xref="Thmproofx1.p2.14.m1.1.1.1.1.1.1.cmml"><mi id="Thmproofx1.p2.14.m1.1.1.1.1.1.1.2" xref="Thmproofx1.p2.14.m1.1.1.1.1.1.1.2.cmml">α</mi><mo id="Thmproofx1.p2.14.m1.1.1.1.1.1.1.1" xref="Thmproofx1.p2.14.m1.1.1.1.1.1.1.1.cmml">=</mo><mi id="Thmproofx1.p2.14.m1.1.1.1.1.1.1.3" xref="Thmproofx1.p2.14.m1.1.1.1.1.1.1.3.cmml">β</mi></mrow><mo stretchy="false" id="Thmproofx1.p2.14.m1.1.1.1.1.1.3" xref="Thmproofx1.p2.14.m1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="Thmproofx1.p2.14.m1.1.1.2" xref="Thmproofx1.p2.14.m1.1.1.2.cmml">=</mo><mn id="Thmproofx1.p2.14.m1.1.1.3" xref="Thmproofx1.p2.14.m1.1.1.3.cmml">1</mn></mrow><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.14.m1.1b"><apply id="Thmproofx1.p2.14.m1.1.1.cmml" xref="Thmproofx1.p2.14.m1.1.1"><eq id="Thmproofx1.p2.14.m1.1.1.2.cmml" xref="Thmproofx1.p2.14.m1.1.1.2"></eq><apply id="Thmproofx1.p2.14.m1.1.1.1.cmml" xref="Thmproofx1.p2.14.m1.1.1.1"><times id="Thmproofx1.p2.14.m1.1.1.1.2.cmml" xref="Thmproofx1.p2.14.m1.1.1.1.2"></times><cn type="integer" id="Thmproofx1.p2.14.m1.1.1.1.3.cmml" xref="Thmproofx1.p2.14.m1.1.1.1.3">1</cn><apply id="Thmproofx1.p2.14.m1.1.1.1.1.1.1.cmml" xref="Thmproofx1.p2.14.m1.1.1.1.1.1"><eq id="Thmproofx1.p2.14.m1.1.1.1.1.1.1.1.cmml" xref="Thmproofx1.p2.14.m1.1.1.1.1.1.1.1"></eq><ci id="Thmproofx1.p2.14.m1.1.1.1.1.1.1.2.cmml" xref="Thmproofx1.p2.14.m1.1.1.1.1.1.1.2">𝛼</ci><ci id="Thmproofx1.p2.14.m1.1.1.1.1.1.1.3.cmml" xref="Thmproofx1.p2.14.m1.1.1.1.1.1.1.3">𝛽</ci></apply></apply><cn type="integer" id="Thmproofx1.p2.14.m1.1.1.3.cmml" xref="Thmproofx1.p2.14.m1.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.14.m1.1c">\mathds{1}{(\alpha=\beta)}=1</annotation></semantics></math> if <math id="Thmproofx1.p2.15.m2.1" class="ltx_Math" alttext="\alpha=\beta" display="inline"><semantics id="Thmproofx1.p2.15.m2.1a"><mrow id="Thmproofx1.p2.15.m2.1.1" xref="Thmproofx1.p2.15.m2.1.1.cmml"><mi id="Thmproofx1.p2.15.m2.1.1.2" xref="Thmproofx1.p2.15.m2.1.1.2.cmml">α</mi><mo id="Thmproofx1.p2.15.m2.1.1.1" xref="Thmproofx1.p2.15.m2.1.1.1.cmml">=</mo><mi id="Thmproofx1.p2.15.m2.1.1.3" xref="Thmproofx1.p2.15.m2.1.1.3.cmml">β</mi></mrow><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.15.m2.1b"><apply id="Thmproofx1.p2.15.m2.1.1.cmml" xref="Thmproofx1.p2.15.m2.1.1"><eq id="Thmproofx1.p2.15.m2.1.1.1.cmml" xref="Thmproofx1.p2.15.m2.1.1.1"></eq><ci id="Thmproofx1.p2.15.m2.1.1.2.cmml" xref="Thmproofx1.p2.15.m2.1.1.2">𝛼</ci><ci id="Thmproofx1.p2.15.m2.1.1.3.cmml" xref="Thmproofx1.p2.15.m2.1.1.3">𝛽</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.15.m2.1c">\alpha=\beta</annotation></semantics></math>, <math id="Thmproofx1.p2.16.m3.1" class="ltx_Math" alttext="\mathds{1}{(\alpha=\beta)}=0" display="inline"><semantics id="Thmproofx1.p2.16.m3.1a"><mrow id="Thmproofx1.p2.16.m3.1.1" xref="Thmproofx1.p2.16.m3.1.1.cmml"><mrow id="Thmproofx1.p2.16.m3.1.1.1" xref="Thmproofx1.p2.16.m3.1.1.1.cmml"><mn id="Thmproofx1.p2.16.m3.1.1.1.3" xref="Thmproofx1.p2.16.m3.1.1.1.3.cmml">𝟙</mn><mo lspace="0em" rspace="0em" id="Thmproofx1.p2.16.m3.1.1.1.2" xref="Thmproofx1.p2.16.m3.1.1.1.2.cmml">​</mo><mrow id="Thmproofx1.p2.16.m3.1.1.1.1.1" xref="Thmproofx1.p2.16.m3.1.1.1.1.1.1.cmml"><mo stretchy="false" id="Thmproofx1.p2.16.m3.1.1.1.1.1.2" xref="Thmproofx1.p2.16.m3.1.1.1.1.1.1.cmml">(</mo><mrow id="Thmproofx1.p2.16.m3.1.1.1.1.1.1" xref="Thmproofx1.p2.16.m3.1.1.1.1.1.1.cmml"><mi id="Thmproofx1.p2.16.m3.1.1.1.1.1.1.2" xref="Thmproofx1.p2.16.m3.1.1.1.1.1.1.2.cmml">α</mi><mo id="Thmproofx1.p2.16.m3.1.1.1.1.1.1.1" xref="Thmproofx1.p2.16.m3.1.1.1.1.1.1.1.cmml">=</mo><mi id="Thmproofx1.p2.16.m3.1.1.1.1.1.1.3" xref="Thmproofx1.p2.16.m3.1.1.1.1.1.1.3.cmml">β</mi></mrow><mo stretchy="false" id="Thmproofx1.p2.16.m3.1.1.1.1.1.3" xref="Thmproofx1.p2.16.m3.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="Thmproofx1.p2.16.m3.1.1.2" xref="Thmproofx1.p2.16.m3.1.1.2.cmml">=</mo><mn id="Thmproofx1.p2.16.m3.1.1.3" xref="Thmproofx1.p2.16.m3.1.1.3.cmml">0</mn></mrow><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.16.m3.1b"><apply id="Thmproofx1.p2.16.m3.1.1.cmml" xref="Thmproofx1.p2.16.m3.1.1"><eq id="Thmproofx1.p2.16.m3.1.1.2.cmml" xref="Thmproofx1.p2.16.m3.1.1.2"></eq><apply id="Thmproofx1.p2.16.m3.1.1.1.cmml" xref="Thmproofx1.p2.16.m3.1.1.1"><times id="Thmproofx1.p2.16.m3.1.1.1.2.cmml" xref="Thmproofx1.p2.16.m3.1.1.1.2"></times><cn type="integer" id="Thmproofx1.p2.16.m3.1.1.1.3.cmml" xref="Thmproofx1.p2.16.m3.1.1.1.3">1</cn><apply id="Thmproofx1.p2.16.m3.1.1.1.1.1.1.cmml" xref="Thmproofx1.p2.16.m3.1.1.1.1.1"><eq id="Thmproofx1.p2.16.m3.1.1.1.1.1.1.1.cmml" xref="Thmproofx1.p2.16.m3.1.1.1.1.1.1.1"></eq><ci id="Thmproofx1.p2.16.m3.1.1.1.1.1.1.2.cmml" xref="Thmproofx1.p2.16.m3.1.1.1.1.1.1.2">𝛼</ci><ci id="Thmproofx1.p2.16.m3.1.1.1.1.1.1.3.cmml" xref="Thmproofx1.p2.16.m3.1.1.1.1.1.1.3">𝛽</ci></apply></apply><cn type="integer" id="Thmproofx1.p2.16.m3.1.1.3.cmml" xref="Thmproofx1.p2.16.m3.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.16.m3.1c">\mathds{1}{(\alpha=\beta)}=0</annotation></semantics></math> otherwise.</p>
<table id="Sx2.EGx4" class="ltx_equationgroup ltx_eqn_align ltx_eqn_table">

<tbody id="S4.E8"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S4.E8.m1.1" class="ltx_Math" alttext="\displaystyle d_{i}" display="inline"><semantics id="S4.E8.m1.1a"><msub id="S4.E8.m1.1.1" xref="S4.E8.m1.1.1.cmml"><mi id="S4.E8.m1.1.1.2" xref="S4.E8.m1.1.1.2.cmml">d</mi><mi id="S4.E8.m1.1.1.3" xref="S4.E8.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S4.E8.m1.1b"><apply id="S4.E8.m1.1.1.cmml" xref="S4.E8.m1.1.1"><csymbol cd="ambiguous" id="S4.E8.m1.1.1.1.cmml" xref="S4.E8.m1.1.1">subscript</csymbol><ci id="S4.E8.m1.1.1.2.cmml" xref="S4.E8.m1.1.1.2">𝑑</ci><ci id="S4.E8.m1.1.1.3.cmml" xref="S4.E8.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.E8.m1.1c">\displaystyle d_{i}</annotation></semantics></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="S4.E8.m2.4" class="ltx_Math" alttext="\displaystyle=-\frac{1}{B}\sum_{k=1}^{B}\mathds{1}{(i=c(k))}+\frac{1}{B}\sum_{k=1}^{B}\frac{e^{y_{i(k)}}}{\sum\nolimits_{j}e^{y_{j(k)}}}" display="inline"><semantics id="S4.E8.m2.4a"><mrow id="S4.E8.m2.4.4" xref="S4.E8.m2.4.4.cmml"><mi id="S4.E8.m2.4.4.3" xref="S4.E8.m2.4.4.3.cmml"></mi><mo id="S4.E8.m2.4.4.2" xref="S4.E8.m2.4.4.2.cmml">=</mo><mrow id="S4.E8.m2.4.4.1" xref="S4.E8.m2.4.4.1.cmml"><mrow id="S4.E8.m2.4.4.1.1" xref="S4.E8.m2.4.4.1.1.cmml"><mo id="S4.E8.m2.4.4.1.1a" xref="S4.E8.m2.4.4.1.1.cmml">−</mo><mrow id="S4.E8.m2.4.4.1.1.1" xref="S4.E8.m2.4.4.1.1.1.cmml"><mstyle displaystyle="true" id="S4.E8.m2.4.4.1.1.1.3" xref="S4.E8.m2.4.4.1.1.1.3.cmml"><mfrac id="S4.E8.m2.4.4.1.1.1.3a" xref="S4.E8.m2.4.4.1.1.1.3.cmml"><mn id="S4.E8.m2.4.4.1.1.1.3.2" xref="S4.E8.m2.4.4.1.1.1.3.2.cmml">1</mn><mi id="S4.E8.m2.4.4.1.1.1.3.3" xref="S4.E8.m2.4.4.1.1.1.3.3.cmml">B</mi></mfrac></mstyle><mo lspace="0em" rspace="0em" id="S4.E8.m2.4.4.1.1.1.2" xref="S4.E8.m2.4.4.1.1.1.2.cmml">​</mo><mrow id="S4.E8.m2.4.4.1.1.1.1" xref="S4.E8.m2.4.4.1.1.1.1.cmml"><mstyle displaystyle="true" id="S4.E8.m2.4.4.1.1.1.1.2" xref="S4.E8.m2.4.4.1.1.1.1.2.cmml"><munderover id="S4.E8.m2.4.4.1.1.1.1.2a" xref="S4.E8.m2.4.4.1.1.1.1.2.cmml"><mo movablelimits="false" id="S4.E8.m2.4.4.1.1.1.1.2.2.2" xref="S4.E8.m2.4.4.1.1.1.1.2.2.2.cmml">∑</mo><mrow id="S4.E8.m2.4.4.1.1.1.1.2.2.3" xref="S4.E8.m2.4.4.1.1.1.1.2.2.3.cmml"><mi id="S4.E8.m2.4.4.1.1.1.1.2.2.3.2" xref="S4.E8.m2.4.4.1.1.1.1.2.2.3.2.cmml">k</mi><mo id="S4.E8.m2.4.4.1.1.1.1.2.2.3.1" xref="S4.E8.m2.4.4.1.1.1.1.2.2.3.1.cmml">=</mo><mn id="S4.E8.m2.4.4.1.1.1.1.2.2.3.3" xref="S4.E8.m2.4.4.1.1.1.1.2.2.3.3.cmml">1</mn></mrow><mi id="S4.E8.m2.4.4.1.1.1.1.2.3" xref="S4.E8.m2.4.4.1.1.1.1.2.3.cmml">B</mi></munderover></mstyle><mrow id="S4.E8.m2.4.4.1.1.1.1.1" xref="S4.E8.m2.4.4.1.1.1.1.1.cmml"><mn id="S4.E8.m2.4.4.1.1.1.1.1.3" xref="S4.E8.m2.4.4.1.1.1.1.1.3.cmml">𝟙</mn><mo lspace="0em" rspace="0em" id="S4.E8.m2.4.4.1.1.1.1.1.2" xref="S4.E8.m2.4.4.1.1.1.1.1.2.cmml">​</mo><mrow id="S4.E8.m2.4.4.1.1.1.1.1.1.1" xref="S4.E8.m2.4.4.1.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S4.E8.m2.4.4.1.1.1.1.1.1.1.2" xref="S4.E8.m2.4.4.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S4.E8.m2.4.4.1.1.1.1.1.1.1.1" xref="S4.E8.m2.4.4.1.1.1.1.1.1.1.1.cmml"><mi id="S4.E8.m2.4.4.1.1.1.1.1.1.1.1.2" xref="S4.E8.m2.4.4.1.1.1.1.1.1.1.1.2.cmml">i</mi><mo id="S4.E8.m2.4.4.1.1.1.1.1.1.1.1.1" xref="S4.E8.m2.4.4.1.1.1.1.1.1.1.1.1.cmml">=</mo><mrow id="S4.E8.m2.4.4.1.1.1.1.1.1.1.1.3" xref="S4.E8.m2.4.4.1.1.1.1.1.1.1.1.3.cmml"><mi id="S4.E8.m2.4.4.1.1.1.1.1.1.1.1.3.2" xref="S4.E8.m2.4.4.1.1.1.1.1.1.1.1.3.2.cmml">c</mi><mo lspace="0em" rspace="0em" id="S4.E8.m2.4.4.1.1.1.1.1.1.1.1.3.1" xref="S4.E8.m2.4.4.1.1.1.1.1.1.1.1.3.1.cmml">​</mo><mrow id="S4.E8.m2.4.4.1.1.1.1.1.1.1.1.3.3.2" xref="S4.E8.m2.4.4.1.1.1.1.1.1.1.1.3.cmml"><mo stretchy="false" id="S4.E8.m2.4.4.1.1.1.1.1.1.1.1.3.3.2.1" xref="S4.E8.m2.4.4.1.1.1.1.1.1.1.1.3.cmml">(</mo><mi id="S4.E8.m2.3.3" xref="S4.E8.m2.3.3.cmml">k</mi><mo stretchy="false" id="S4.E8.m2.4.4.1.1.1.1.1.1.1.1.3.3.2.2" xref="S4.E8.m2.4.4.1.1.1.1.1.1.1.1.3.cmml">)</mo></mrow></mrow></mrow><mo stretchy="false" id="S4.E8.m2.4.4.1.1.1.1.1.1.1.3" xref="S4.E8.m2.4.4.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><mo id="S4.E8.m2.4.4.1.2" xref="S4.E8.m2.4.4.1.2.cmml">+</mo><mrow id="S4.E8.m2.4.4.1.3" xref="S4.E8.m2.4.4.1.3.cmml"><mstyle displaystyle="true" id="S4.E8.m2.4.4.1.3.2" xref="S4.E8.m2.4.4.1.3.2.cmml"><mfrac id="S4.E8.m2.4.4.1.3.2a" xref="S4.E8.m2.4.4.1.3.2.cmml"><mn id="S4.E8.m2.4.4.1.3.2.2" xref="S4.E8.m2.4.4.1.3.2.2.cmml">1</mn><mi id="S4.E8.m2.4.4.1.3.2.3" xref="S4.E8.m2.4.4.1.3.2.3.cmml">B</mi></mfrac></mstyle><mo lspace="0em" rspace="0em" id="S4.E8.m2.4.4.1.3.1" xref="S4.E8.m2.4.4.1.3.1.cmml">​</mo><mrow id="S4.E8.m2.4.4.1.3.3" xref="S4.E8.m2.4.4.1.3.3.cmml"><mstyle displaystyle="true" id="S4.E8.m2.4.4.1.3.3.1" xref="S4.E8.m2.4.4.1.3.3.1.cmml"><munderover id="S4.E8.m2.4.4.1.3.3.1a" xref="S4.E8.m2.4.4.1.3.3.1.cmml"><mo movablelimits="false" id="S4.E8.m2.4.4.1.3.3.1.2.2" xref="S4.E8.m2.4.4.1.3.3.1.2.2.cmml">∑</mo><mrow id="S4.E8.m2.4.4.1.3.3.1.2.3" xref="S4.E8.m2.4.4.1.3.3.1.2.3.cmml"><mi id="S4.E8.m2.4.4.1.3.3.1.2.3.2" xref="S4.E8.m2.4.4.1.3.3.1.2.3.2.cmml">k</mi><mo id="S4.E8.m2.4.4.1.3.3.1.2.3.1" xref="S4.E8.m2.4.4.1.3.3.1.2.3.1.cmml">=</mo><mn id="S4.E8.m2.4.4.1.3.3.1.2.3.3" xref="S4.E8.m2.4.4.1.3.3.1.2.3.3.cmml">1</mn></mrow><mi id="S4.E8.m2.4.4.1.3.3.1.3" xref="S4.E8.m2.4.4.1.3.3.1.3.cmml">B</mi></munderover></mstyle><mstyle displaystyle="true" id="S4.E8.m2.2.2" xref="S4.E8.m2.2.2.cmml"><mfrac id="S4.E8.m2.2.2a" xref="S4.E8.m2.2.2.cmml"><msup id="S4.E8.m2.1.1.1" xref="S4.E8.m2.1.1.1.cmml"><mi id="S4.E8.m2.1.1.1.3" xref="S4.E8.m2.1.1.1.3.cmml">e</mi><msub id="S4.E8.m2.1.1.1.1.1" xref="S4.E8.m2.1.1.1.1.1.cmml"><mi id="S4.E8.m2.1.1.1.1.1.3" xref="S4.E8.m2.1.1.1.1.1.3.cmml">y</mi><mrow id="S4.E8.m2.1.1.1.1.1.1.1" xref="S4.E8.m2.1.1.1.1.1.1.1.cmml"><mi id="S4.E8.m2.1.1.1.1.1.1.1.3" xref="S4.E8.m2.1.1.1.1.1.1.1.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="S4.E8.m2.1.1.1.1.1.1.1.2" xref="S4.E8.m2.1.1.1.1.1.1.1.2.cmml">​</mo><mrow id="S4.E8.m2.1.1.1.1.1.1.1.4.2" xref="S4.E8.m2.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S4.E8.m2.1.1.1.1.1.1.1.4.2.1" xref="S4.E8.m2.1.1.1.1.1.1.1.cmml">(</mo><mi id="S4.E8.m2.1.1.1.1.1.1.1.1" xref="S4.E8.m2.1.1.1.1.1.1.1.1.cmml">k</mi><mo stretchy="false" id="S4.E8.m2.1.1.1.1.1.1.1.4.2.2" xref="S4.E8.m2.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></msub></msup><mrow id="S4.E8.m2.2.2.2" xref="S4.E8.m2.2.2.2.cmml"><msub id="S4.E8.m2.2.2.2.2" xref="S4.E8.m2.2.2.2.2.cmml"><mo id="S4.E8.m2.2.2.2.2.2" xref="S4.E8.m2.2.2.2.2.2.cmml">∑</mo><mi id="S4.E8.m2.2.2.2.2.3" xref="S4.E8.m2.2.2.2.2.3.cmml">j</mi></msub><msup id="S4.E8.m2.2.2.2.3" xref="S4.E8.m2.2.2.2.3.cmml"><mi id="S4.E8.m2.2.2.2.3.2" xref="S4.E8.m2.2.2.2.3.2.cmml">e</mi><msub id="S4.E8.m2.2.2.2.1.1" xref="S4.E8.m2.2.2.2.1.1.cmml"><mi id="S4.E8.m2.2.2.2.1.1.3" xref="S4.E8.m2.2.2.2.1.1.3.cmml">y</mi><mrow id="S4.E8.m2.2.2.2.1.1.1.1" xref="S4.E8.m2.2.2.2.1.1.1.1.cmml"><mi id="S4.E8.m2.2.2.2.1.1.1.1.3" xref="S4.E8.m2.2.2.2.1.1.1.1.3.cmml">j</mi><mo lspace="0em" rspace="0em" id="S4.E8.m2.2.2.2.1.1.1.1.2" xref="S4.E8.m2.2.2.2.1.1.1.1.2.cmml">​</mo><mrow id="S4.E8.m2.2.2.2.1.1.1.1.4.2" xref="S4.E8.m2.2.2.2.1.1.1.1.cmml"><mo stretchy="false" id="S4.E8.m2.2.2.2.1.1.1.1.4.2.1" xref="S4.E8.m2.2.2.2.1.1.1.1.cmml">(</mo><mi id="S4.E8.m2.2.2.2.1.1.1.1.1" xref="S4.E8.m2.2.2.2.1.1.1.1.1.cmml">k</mi><mo stretchy="false" id="S4.E8.m2.2.2.2.1.1.1.1.4.2.2" xref="S4.E8.m2.2.2.2.1.1.1.1.cmml">)</mo></mrow></mrow></msub></msup></mrow></mfrac></mstyle></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.E8.m2.4b"><apply id="S4.E8.m2.4.4.cmml" xref="S4.E8.m2.4.4"><eq id="S4.E8.m2.4.4.2.cmml" xref="S4.E8.m2.4.4.2"></eq><csymbol cd="latexml" id="S4.E8.m2.4.4.3.cmml" xref="S4.E8.m2.4.4.3">absent</csymbol><apply id="S4.E8.m2.4.4.1.cmml" xref="S4.E8.m2.4.4.1"><plus id="S4.E8.m2.4.4.1.2.cmml" xref="S4.E8.m2.4.4.1.2"></plus><apply id="S4.E8.m2.4.4.1.1.cmml" xref="S4.E8.m2.4.4.1.1"><minus id="S4.E8.m2.4.4.1.1.2.cmml" xref="S4.E8.m2.4.4.1.1"></minus><apply id="S4.E8.m2.4.4.1.1.1.cmml" xref="S4.E8.m2.4.4.1.1.1"><times id="S4.E8.m2.4.4.1.1.1.2.cmml" xref="S4.E8.m2.4.4.1.1.1.2"></times><apply id="S4.E8.m2.4.4.1.1.1.3.cmml" xref="S4.E8.m2.4.4.1.1.1.3"><divide id="S4.E8.m2.4.4.1.1.1.3.1.cmml" xref="S4.E8.m2.4.4.1.1.1.3"></divide><cn type="integer" id="S4.E8.m2.4.4.1.1.1.3.2.cmml" xref="S4.E8.m2.4.4.1.1.1.3.2">1</cn><ci id="S4.E8.m2.4.4.1.1.1.3.3.cmml" xref="S4.E8.m2.4.4.1.1.1.3.3">𝐵</ci></apply><apply id="S4.E8.m2.4.4.1.1.1.1.cmml" xref="S4.E8.m2.4.4.1.1.1.1"><apply id="S4.E8.m2.4.4.1.1.1.1.2.cmml" xref="S4.E8.m2.4.4.1.1.1.1.2"><csymbol cd="ambiguous" id="S4.E8.m2.4.4.1.1.1.1.2.1.cmml" xref="S4.E8.m2.4.4.1.1.1.1.2">superscript</csymbol><apply id="S4.E8.m2.4.4.1.1.1.1.2.2.cmml" xref="S4.E8.m2.4.4.1.1.1.1.2"><csymbol cd="ambiguous" id="S4.E8.m2.4.4.1.1.1.1.2.2.1.cmml" xref="S4.E8.m2.4.4.1.1.1.1.2">subscript</csymbol><sum id="S4.E8.m2.4.4.1.1.1.1.2.2.2.cmml" xref="S4.E8.m2.4.4.1.1.1.1.2.2.2"></sum><apply id="S4.E8.m2.4.4.1.1.1.1.2.2.3.cmml" xref="S4.E8.m2.4.4.1.1.1.1.2.2.3"><eq id="S4.E8.m2.4.4.1.1.1.1.2.2.3.1.cmml" xref="S4.E8.m2.4.4.1.1.1.1.2.2.3.1"></eq><ci id="S4.E8.m2.4.4.1.1.1.1.2.2.3.2.cmml" xref="S4.E8.m2.4.4.1.1.1.1.2.2.3.2">𝑘</ci><cn type="integer" id="S4.E8.m2.4.4.1.1.1.1.2.2.3.3.cmml" xref="S4.E8.m2.4.4.1.1.1.1.2.2.3.3">1</cn></apply></apply><ci id="S4.E8.m2.4.4.1.1.1.1.2.3.cmml" xref="S4.E8.m2.4.4.1.1.1.1.2.3">𝐵</ci></apply><apply id="S4.E8.m2.4.4.1.1.1.1.1.cmml" xref="S4.E8.m2.4.4.1.1.1.1.1"><times id="S4.E8.m2.4.4.1.1.1.1.1.2.cmml" xref="S4.E8.m2.4.4.1.1.1.1.1.2"></times><cn type="integer" id="S4.E8.m2.4.4.1.1.1.1.1.3.cmml" xref="S4.E8.m2.4.4.1.1.1.1.1.3">1</cn><apply id="S4.E8.m2.4.4.1.1.1.1.1.1.1.1.cmml" xref="S4.E8.m2.4.4.1.1.1.1.1.1.1"><eq id="S4.E8.m2.4.4.1.1.1.1.1.1.1.1.1.cmml" xref="S4.E8.m2.4.4.1.1.1.1.1.1.1.1.1"></eq><ci id="S4.E8.m2.4.4.1.1.1.1.1.1.1.1.2.cmml" xref="S4.E8.m2.4.4.1.1.1.1.1.1.1.1.2">𝑖</ci><apply id="S4.E8.m2.4.4.1.1.1.1.1.1.1.1.3.cmml" xref="S4.E8.m2.4.4.1.1.1.1.1.1.1.1.3"><times id="S4.E8.m2.4.4.1.1.1.1.1.1.1.1.3.1.cmml" xref="S4.E8.m2.4.4.1.1.1.1.1.1.1.1.3.1"></times><ci id="S4.E8.m2.4.4.1.1.1.1.1.1.1.1.3.2.cmml" xref="S4.E8.m2.4.4.1.1.1.1.1.1.1.1.3.2">𝑐</ci><ci id="S4.E8.m2.3.3.cmml" xref="S4.E8.m2.3.3">𝑘</ci></apply></apply></apply></apply></apply></apply><apply id="S4.E8.m2.4.4.1.3.cmml" xref="S4.E8.m2.4.4.1.3"><times id="S4.E8.m2.4.4.1.3.1.cmml" xref="S4.E8.m2.4.4.1.3.1"></times><apply id="S4.E8.m2.4.4.1.3.2.cmml" xref="S4.E8.m2.4.4.1.3.2"><divide id="S4.E8.m2.4.4.1.3.2.1.cmml" xref="S4.E8.m2.4.4.1.3.2"></divide><cn type="integer" id="S4.E8.m2.4.4.1.3.2.2.cmml" xref="S4.E8.m2.4.4.1.3.2.2">1</cn><ci id="S4.E8.m2.4.4.1.3.2.3.cmml" xref="S4.E8.m2.4.4.1.3.2.3">𝐵</ci></apply><apply id="S4.E8.m2.4.4.1.3.3.cmml" xref="S4.E8.m2.4.4.1.3.3"><apply id="S4.E8.m2.4.4.1.3.3.1.cmml" xref="S4.E8.m2.4.4.1.3.3.1"><csymbol cd="ambiguous" id="S4.E8.m2.4.4.1.3.3.1.1.cmml" xref="S4.E8.m2.4.4.1.3.3.1">superscript</csymbol><apply id="S4.E8.m2.4.4.1.3.3.1.2.cmml" xref="S4.E8.m2.4.4.1.3.3.1"><csymbol cd="ambiguous" id="S4.E8.m2.4.4.1.3.3.1.2.1.cmml" xref="S4.E8.m2.4.4.1.3.3.1">subscript</csymbol><sum id="S4.E8.m2.4.4.1.3.3.1.2.2.cmml" xref="S4.E8.m2.4.4.1.3.3.1.2.2"></sum><apply id="S4.E8.m2.4.4.1.3.3.1.2.3.cmml" xref="S4.E8.m2.4.4.1.3.3.1.2.3"><eq id="S4.E8.m2.4.4.1.3.3.1.2.3.1.cmml" xref="S4.E8.m2.4.4.1.3.3.1.2.3.1"></eq><ci id="S4.E8.m2.4.4.1.3.3.1.2.3.2.cmml" xref="S4.E8.m2.4.4.1.3.3.1.2.3.2">𝑘</ci><cn type="integer" id="S4.E8.m2.4.4.1.3.3.1.2.3.3.cmml" xref="S4.E8.m2.4.4.1.3.3.1.2.3.3">1</cn></apply></apply><ci id="S4.E8.m2.4.4.1.3.3.1.3.cmml" xref="S4.E8.m2.4.4.1.3.3.1.3">𝐵</ci></apply><apply id="S4.E8.m2.2.2.cmml" xref="S4.E8.m2.2.2"><divide id="S4.E8.m2.2.2.3.cmml" xref="S4.E8.m2.2.2"></divide><apply id="S4.E8.m2.1.1.1.cmml" xref="S4.E8.m2.1.1.1"><csymbol cd="ambiguous" id="S4.E8.m2.1.1.1.2.cmml" xref="S4.E8.m2.1.1.1">superscript</csymbol><ci id="S4.E8.m2.1.1.1.3.cmml" xref="S4.E8.m2.1.1.1.3">𝑒</ci><apply id="S4.E8.m2.1.1.1.1.1.cmml" xref="S4.E8.m2.1.1.1.1.1"><csymbol cd="ambiguous" id="S4.E8.m2.1.1.1.1.1.2.cmml" xref="S4.E8.m2.1.1.1.1.1">subscript</csymbol><ci id="S4.E8.m2.1.1.1.1.1.3.cmml" xref="S4.E8.m2.1.1.1.1.1.3">𝑦</ci><apply id="S4.E8.m2.1.1.1.1.1.1.1.cmml" xref="S4.E8.m2.1.1.1.1.1.1.1"><times id="S4.E8.m2.1.1.1.1.1.1.1.2.cmml" xref="S4.E8.m2.1.1.1.1.1.1.1.2"></times><ci id="S4.E8.m2.1.1.1.1.1.1.1.3.cmml" xref="S4.E8.m2.1.1.1.1.1.1.1.3">𝑖</ci><ci id="S4.E8.m2.1.1.1.1.1.1.1.1.cmml" xref="S4.E8.m2.1.1.1.1.1.1.1.1">𝑘</ci></apply></apply></apply><apply id="S4.E8.m2.2.2.2.cmml" xref="S4.E8.m2.2.2.2"><apply id="S4.E8.m2.2.2.2.2.cmml" xref="S4.E8.m2.2.2.2.2"><csymbol cd="ambiguous" id="S4.E8.m2.2.2.2.2.1.cmml" xref="S4.E8.m2.2.2.2.2">subscript</csymbol><sum id="S4.E8.m2.2.2.2.2.2.cmml" xref="S4.E8.m2.2.2.2.2.2"></sum><ci id="S4.E8.m2.2.2.2.2.3.cmml" xref="S4.E8.m2.2.2.2.2.3">𝑗</ci></apply><apply id="S4.E8.m2.2.2.2.3.cmml" xref="S4.E8.m2.2.2.2.3"><csymbol cd="ambiguous" id="S4.E8.m2.2.2.2.3.1.cmml" xref="S4.E8.m2.2.2.2.3">superscript</csymbol><ci id="S4.E8.m2.2.2.2.3.2.cmml" xref="S4.E8.m2.2.2.2.3.2">𝑒</ci><apply id="S4.E8.m2.2.2.2.1.1.cmml" xref="S4.E8.m2.2.2.2.1.1"><csymbol cd="ambiguous" id="S4.E8.m2.2.2.2.1.1.2.cmml" xref="S4.E8.m2.2.2.2.1.1">subscript</csymbol><ci id="S4.E8.m2.2.2.2.1.1.3.cmml" xref="S4.E8.m2.2.2.2.1.1.3">𝑦</ci><apply id="S4.E8.m2.2.2.2.1.1.1.1.cmml" xref="S4.E8.m2.2.2.2.1.1.1.1"><times id="S4.E8.m2.2.2.2.1.1.1.1.2.cmml" xref="S4.E8.m2.2.2.2.1.1.1.1.2"></times><ci id="S4.E8.m2.2.2.2.1.1.1.1.3.cmml" xref="S4.E8.m2.2.2.2.1.1.1.1.3">𝑗</ci><ci id="S4.E8.m2.2.2.2.1.1.1.1.1.cmml" xref="S4.E8.m2.2.2.2.1.1.1.1.1">𝑘</ci></apply></apply></apply></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.E8.m2.4c">\displaystyle=-\frac{1}{B}\sum_{k=1}^{B}\mathds{1}{(i=c(k))}+\frac{1}{B}\sum_{k=1}^{B}\frac{e^{y_{i(k)}}}{\sum\nolimits_{j}e^{y_{j(k)}}}</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(8)</span></td>
</tr></tbody>
<tbody id="S4.E9"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_eqn_cell"></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="S4.E9.m1.3" class="ltx_Math" alttext="\displaystyle=-\frac{\lambda_{i}}{B}+\frac{1}{B}\sum_{k=1}^{B}\frac{e^{y_{i(k)}}}{\sum\nolimits_{j}e^{y_{j(k)}}}\,," display="inline"><semantics id="S4.E9.m1.3a"><mrow id="S4.E9.m1.3.3.1" xref="S4.E9.m1.3.3.1.1.cmml"><mrow id="S4.E9.m1.3.3.1.1" xref="S4.E9.m1.3.3.1.1.cmml"><mi id="S4.E9.m1.3.3.1.1.2" xref="S4.E9.m1.3.3.1.1.2.cmml"></mi><mo id="S4.E9.m1.3.3.1.1.1" xref="S4.E9.m1.3.3.1.1.1.cmml">=</mo><mrow id="S4.E9.m1.3.3.1.1.3" xref="S4.E9.m1.3.3.1.1.3.cmml"><mrow id="S4.E9.m1.3.3.1.1.3.2" xref="S4.E9.m1.3.3.1.1.3.2.cmml"><mo id="S4.E9.m1.3.3.1.1.3.2a" xref="S4.E9.m1.3.3.1.1.3.2.cmml">−</mo><mstyle displaystyle="true" id="S4.E9.m1.3.3.1.1.3.2.2" xref="S4.E9.m1.3.3.1.1.3.2.2.cmml"><mfrac id="S4.E9.m1.3.3.1.1.3.2.2a" xref="S4.E9.m1.3.3.1.1.3.2.2.cmml"><msub id="S4.E9.m1.3.3.1.1.3.2.2.2" xref="S4.E9.m1.3.3.1.1.3.2.2.2.cmml"><mi id="S4.E9.m1.3.3.1.1.3.2.2.2.2" xref="S4.E9.m1.3.3.1.1.3.2.2.2.2.cmml">λ</mi><mi id="S4.E9.m1.3.3.1.1.3.2.2.2.3" xref="S4.E9.m1.3.3.1.1.3.2.2.2.3.cmml">i</mi></msub><mi id="S4.E9.m1.3.3.1.1.3.2.2.3" xref="S4.E9.m1.3.3.1.1.3.2.2.3.cmml">B</mi></mfrac></mstyle></mrow><mo id="S4.E9.m1.3.3.1.1.3.1" xref="S4.E9.m1.3.3.1.1.3.1.cmml">+</mo><mrow id="S4.E9.m1.3.3.1.1.3.3" xref="S4.E9.m1.3.3.1.1.3.3.cmml"><mstyle displaystyle="true" id="S4.E9.m1.3.3.1.1.3.3.2" xref="S4.E9.m1.3.3.1.1.3.3.2.cmml"><mfrac id="S4.E9.m1.3.3.1.1.3.3.2a" xref="S4.E9.m1.3.3.1.1.3.3.2.cmml"><mn id="S4.E9.m1.3.3.1.1.3.3.2.2" xref="S4.E9.m1.3.3.1.1.3.3.2.2.cmml">1</mn><mi id="S4.E9.m1.3.3.1.1.3.3.2.3" xref="S4.E9.m1.3.3.1.1.3.3.2.3.cmml">B</mi></mfrac></mstyle><mo lspace="0em" rspace="0em" id="S4.E9.m1.3.3.1.1.3.3.1" xref="S4.E9.m1.3.3.1.1.3.3.1.cmml">​</mo><mrow id="S4.E9.m1.3.3.1.1.3.3.3" xref="S4.E9.m1.3.3.1.1.3.3.3.cmml"><mstyle displaystyle="true" id="S4.E9.m1.3.3.1.1.3.3.3.1" xref="S4.E9.m1.3.3.1.1.3.3.3.1.cmml"><munderover id="S4.E9.m1.3.3.1.1.3.3.3.1a" xref="S4.E9.m1.3.3.1.1.3.3.3.1.cmml"><mo movablelimits="false" id="S4.E9.m1.3.3.1.1.3.3.3.1.2.2" xref="S4.E9.m1.3.3.1.1.3.3.3.1.2.2.cmml">∑</mo><mrow id="S4.E9.m1.3.3.1.1.3.3.3.1.2.3" xref="S4.E9.m1.3.3.1.1.3.3.3.1.2.3.cmml"><mi id="S4.E9.m1.3.3.1.1.3.3.3.1.2.3.2" xref="S4.E9.m1.3.3.1.1.3.3.3.1.2.3.2.cmml">k</mi><mo id="S4.E9.m1.3.3.1.1.3.3.3.1.2.3.1" xref="S4.E9.m1.3.3.1.1.3.3.3.1.2.3.1.cmml">=</mo><mn id="S4.E9.m1.3.3.1.1.3.3.3.1.2.3.3" xref="S4.E9.m1.3.3.1.1.3.3.3.1.2.3.3.cmml">1</mn></mrow><mi id="S4.E9.m1.3.3.1.1.3.3.3.1.3" xref="S4.E9.m1.3.3.1.1.3.3.3.1.3.cmml">B</mi></munderover></mstyle><mstyle displaystyle="true" id="S4.E9.m1.2.2" xref="S4.E9.m1.2.2.cmml"><mfrac id="S4.E9.m1.2.2a" xref="S4.E9.m1.2.2.cmml"><msup id="S4.E9.m1.1.1.1" xref="S4.E9.m1.1.1.1.cmml"><mi id="S4.E9.m1.1.1.1.3" xref="S4.E9.m1.1.1.1.3.cmml">e</mi><msub id="S4.E9.m1.1.1.1.1.1" xref="S4.E9.m1.1.1.1.1.1.cmml"><mi id="S4.E9.m1.1.1.1.1.1.3" xref="S4.E9.m1.1.1.1.1.1.3.cmml">y</mi><mrow id="S4.E9.m1.1.1.1.1.1.1.1" xref="S4.E9.m1.1.1.1.1.1.1.1.cmml"><mi id="S4.E9.m1.1.1.1.1.1.1.1.3" xref="S4.E9.m1.1.1.1.1.1.1.1.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="S4.E9.m1.1.1.1.1.1.1.1.2" xref="S4.E9.m1.1.1.1.1.1.1.1.2.cmml">​</mo><mrow id="S4.E9.m1.1.1.1.1.1.1.1.4.2" xref="S4.E9.m1.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S4.E9.m1.1.1.1.1.1.1.1.4.2.1" xref="S4.E9.m1.1.1.1.1.1.1.1.cmml">(</mo><mi id="S4.E9.m1.1.1.1.1.1.1.1.1" xref="S4.E9.m1.1.1.1.1.1.1.1.1.cmml">k</mi><mo stretchy="false" id="S4.E9.m1.1.1.1.1.1.1.1.4.2.2" xref="S4.E9.m1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></msub></msup><mrow id="S4.E9.m1.2.2.2" xref="S4.E9.m1.2.2.2.cmml"><msub id="S4.E9.m1.2.2.2.2" xref="S4.E9.m1.2.2.2.2.cmml"><mo id="S4.E9.m1.2.2.2.2.2" xref="S4.E9.m1.2.2.2.2.2.cmml">∑</mo><mi id="S4.E9.m1.2.2.2.2.3" xref="S4.E9.m1.2.2.2.2.3.cmml">j</mi></msub><msup id="S4.E9.m1.2.2.2.3" xref="S4.E9.m1.2.2.2.3.cmml"><mi id="S4.E9.m1.2.2.2.3.2" xref="S4.E9.m1.2.2.2.3.2.cmml">e</mi><msub id="S4.E9.m1.2.2.2.1.1" xref="S4.E9.m1.2.2.2.1.1.cmml"><mi id="S4.E9.m1.2.2.2.1.1.3" xref="S4.E9.m1.2.2.2.1.1.3.cmml">y</mi><mrow id="S4.E9.m1.2.2.2.1.1.1.1" xref="S4.E9.m1.2.2.2.1.1.1.1.cmml"><mi id="S4.E9.m1.2.2.2.1.1.1.1.3" xref="S4.E9.m1.2.2.2.1.1.1.1.3.cmml">j</mi><mo lspace="0em" rspace="0em" id="S4.E9.m1.2.2.2.1.1.1.1.2" xref="S4.E9.m1.2.2.2.1.1.1.1.2.cmml">​</mo><mrow id="S4.E9.m1.2.2.2.1.1.1.1.4.2" xref="S4.E9.m1.2.2.2.1.1.1.1.cmml"><mo stretchy="false" id="S4.E9.m1.2.2.2.1.1.1.1.4.2.1" xref="S4.E9.m1.2.2.2.1.1.1.1.cmml">(</mo><mi id="S4.E9.m1.2.2.2.1.1.1.1.1" xref="S4.E9.m1.2.2.2.1.1.1.1.1.cmml">k</mi><mo stretchy="false" id="S4.E9.m1.2.2.2.1.1.1.1.4.2.2" xref="S4.E9.m1.2.2.2.1.1.1.1.cmml">)</mo></mrow></mrow></msub></msup></mrow></mfrac></mstyle></mrow></mrow></mrow></mrow><mo lspace="0.170em" id="S4.E9.m1.3.3.1.2" xref="S4.E9.m1.3.3.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.E9.m1.3b"><apply id="S4.E9.m1.3.3.1.1.cmml" xref="S4.E9.m1.3.3.1"><eq id="S4.E9.m1.3.3.1.1.1.cmml" xref="S4.E9.m1.3.3.1.1.1"></eq><csymbol cd="latexml" id="S4.E9.m1.3.3.1.1.2.cmml" xref="S4.E9.m1.3.3.1.1.2">absent</csymbol><apply id="S4.E9.m1.3.3.1.1.3.cmml" xref="S4.E9.m1.3.3.1.1.3"><plus id="S4.E9.m1.3.3.1.1.3.1.cmml" xref="S4.E9.m1.3.3.1.1.3.1"></plus><apply id="S4.E9.m1.3.3.1.1.3.2.cmml" xref="S4.E9.m1.3.3.1.1.3.2"><minus id="S4.E9.m1.3.3.1.1.3.2.1.cmml" xref="S4.E9.m1.3.3.1.1.3.2"></minus><apply id="S4.E9.m1.3.3.1.1.3.2.2.cmml" xref="S4.E9.m1.3.3.1.1.3.2.2"><divide id="S4.E9.m1.3.3.1.1.3.2.2.1.cmml" xref="S4.E9.m1.3.3.1.1.3.2.2"></divide><apply id="S4.E9.m1.3.3.1.1.3.2.2.2.cmml" xref="S4.E9.m1.3.3.1.1.3.2.2.2"><csymbol cd="ambiguous" id="S4.E9.m1.3.3.1.1.3.2.2.2.1.cmml" xref="S4.E9.m1.3.3.1.1.3.2.2.2">subscript</csymbol><ci id="S4.E9.m1.3.3.1.1.3.2.2.2.2.cmml" xref="S4.E9.m1.3.3.1.1.3.2.2.2.2">𝜆</ci><ci id="S4.E9.m1.3.3.1.1.3.2.2.2.3.cmml" xref="S4.E9.m1.3.3.1.1.3.2.2.2.3">𝑖</ci></apply><ci id="S4.E9.m1.3.3.1.1.3.2.2.3.cmml" xref="S4.E9.m1.3.3.1.1.3.2.2.3">𝐵</ci></apply></apply><apply id="S4.E9.m1.3.3.1.1.3.3.cmml" xref="S4.E9.m1.3.3.1.1.3.3"><times id="S4.E9.m1.3.3.1.1.3.3.1.cmml" xref="S4.E9.m1.3.3.1.1.3.3.1"></times><apply id="S4.E9.m1.3.3.1.1.3.3.2.cmml" xref="S4.E9.m1.3.3.1.1.3.3.2"><divide id="S4.E9.m1.3.3.1.1.3.3.2.1.cmml" xref="S4.E9.m1.3.3.1.1.3.3.2"></divide><cn type="integer" id="S4.E9.m1.3.3.1.1.3.3.2.2.cmml" xref="S4.E9.m1.3.3.1.1.3.3.2.2">1</cn><ci id="S4.E9.m1.3.3.1.1.3.3.2.3.cmml" xref="S4.E9.m1.3.3.1.1.3.3.2.3">𝐵</ci></apply><apply id="S4.E9.m1.3.3.1.1.3.3.3.cmml" xref="S4.E9.m1.3.3.1.1.3.3.3"><apply id="S4.E9.m1.3.3.1.1.3.3.3.1.cmml" xref="S4.E9.m1.3.3.1.1.3.3.3.1"><csymbol cd="ambiguous" id="S4.E9.m1.3.3.1.1.3.3.3.1.1.cmml" xref="S4.E9.m1.3.3.1.1.3.3.3.1">superscript</csymbol><apply id="S4.E9.m1.3.3.1.1.3.3.3.1.2.cmml" xref="S4.E9.m1.3.3.1.1.3.3.3.1"><csymbol cd="ambiguous" id="S4.E9.m1.3.3.1.1.3.3.3.1.2.1.cmml" xref="S4.E9.m1.3.3.1.1.3.3.3.1">subscript</csymbol><sum id="S4.E9.m1.3.3.1.1.3.3.3.1.2.2.cmml" xref="S4.E9.m1.3.3.1.1.3.3.3.1.2.2"></sum><apply id="S4.E9.m1.3.3.1.1.3.3.3.1.2.3.cmml" xref="S4.E9.m1.3.3.1.1.3.3.3.1.2.3"><eq id="S4.E9.m1.3.3.1.1.3.3.3.1.2.3.1.cmml" xref="S4.E9.m1.3.3.1.1.3.3.3.1.2.3.1"></eq><ci id="S4.E9.m1.3.3.1.1.3.3.3.1.2.3.2.cmml" xref="S4.E9.m1.3.3.1.1.3.3.3.1.2.3.2">𝑘</ci><cn type="integer" id="S4.E9.m1.3.3.1.1.3.3.3.1.2.3.3.cmml" xref="S4.E9.m1.3.3.1.1.3.3.3.1.2.3.3">1</cn></apply></apply><ci id="S4.E9.m1.3.3.1.1.3.3.3.1.3.cmml" xref="S4.E9.m1.3.3.1.1.3.3.3.1.3">𝐵</ci></apply><apply id="S4.E9.m1.2.2.cmml" xref="S4.E9.m1.2.2"><divide id="S4.E9.m1.2.2.3.cmml" xref="S4.E9.m1.2.2"></divide><apply id="S4.E9.m1.1.1.1.cmml" xref="S4.E9.m1.1.1.1"><csymbol cd="ambiguous" id="S4.E9.m1.1.1.1.2.cmml" xref="S4.E9.m1.1.1.1">superscript</csymbol><ci id="S4.E9.m1.1.1.1.3.cmml" xref="S4.E9.m1.1.1.1.3">𝑒</ci><apply id="S4.E9.m1.1.1.1.1.1.cmml" xref="S4.E9.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="S4.E9.m1.1.1.1.1.1.2.cmml" xref="S4.E9.m1.1.1.1.1.1">subscript</csymbol><ci id="S4.E9.m1.1.1.1.1.1.3.cmml" xref="S4.E9.m1.1.1.1.1.1.3">𝑦</ci><apply id="S4.E9.m1.1.1.1.1.1.1.1.cmml" xref="S4.E9.m1.1.1.1.1.1.1.1"><times id="S4.E9.m1.1.1.1.1.1.1.1.2.cmml" xref="S4.E9.m1.1.1.1.1.1.1.1.2"></times><ci id="S4.E9.m1.1.1.1.1.1.1.1.3.cmml" xref="S4.E9.m1.1.1.1.1.1.1.1.3">𝑖</ci><ci id="S4.E9.m1.1.1.1.1.1.1.1.1.cmml" xref="S4.E9.m1.1.1.1.1.1.1.1.1">𝑘</ci></apply></apply></apply><apply id="S4.E9.m1.2.2.2.cmml" xref="S4.E9.m1.2.2.2"><apply id="S4.E9.m1.2.2.2.2.cmml" xref="S4.E9.m1.2.2.2.2"><csymbol cd="ambiguous" id="S4.E9.m1.2.2.2.2.1.cmml" xref="S4.E9.m1.2.2.2.2">subscript</csymbol><sum id="S4.E9.m1.2.2.2.2.2.cmml" xref="S4.E9.m1.2.2.2.2.2"></sum><ci id="S4.E9.m1.2.2.2.2.3.cmml" xref="S4.E9.m1.2.2.2.2.3">𝑗</ci></apply><apply id="S4.E9.m1.2.2.2.3.cmml" xref="S4.E9.m1.2.2.2.3"><csymbol cd="ambiguous" id="S4.E9.m1.2.2.2.3.1.cmml" xref="S4.E9.m1.2.2.2.3">superscript</csymbol><ci id="S4.E9.m1.2.2.2.3.2.cmml" xref="S4.E9.m1.2.2.2.3.2">𝑒</ci><apply id="S4.E9.m1.2.2.2.1.1.cmml" xref="S4.E9.m1.2.2.2.1.1"><csymbol cd="ambiguous" id="S4.E9.m1.2.2.2.1.1.2.cmml" xref="S4.E9.m1.2.2.2.1.1">subscript</csymbol><ci id="S4.E9.m1.2.2.2.1.1.3.cmml" xref="S4.E9.m1.2.2.2.1.1.3">𝑦</ci><apply id="S4.E9.m1.2.2.2.1.1.1.1.cmml" xref="S4.E9.m1.2.2.2.1.1.1.1"><times id="S4.E9.m1.2.2.2.1.1.1.1.2.cmml" xref="S4.E9.m1.2.2.2.1.1.1.1.2"></times><ci id="S4.E9.m1.2.2.2.1.1.1.1.3.cmml" xref="S4.E9.m1.2.2.2.1.1.1.1.3">𝑗</ci><ci id="S4.E9.m1.2.2.2.1.1.1.1.1.cmml" xref="S4.E9.m1.2.2.2.1.1.1.1.1">𝑘</ci></apply></apply></apply></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.E9.m1.3c">\displaystyle=-\frac{\lambda_{i}}{B}+\frac{1}{B}\sum_{k=1}^{B}\frac{e^{y_{i(k)}}}{\sum\nolimits_{j}e^{y_{j(k)}}}\,,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(9)</span></td>
</tr></tbody>
</table>
<p id="Thmproofx1.p2.38" class="ltx_p">where <math id="Thmproofx1.p2.17.m1.1" class="ltx_Math" alttext="\lambda_{i}" display="inline"><semantics id="Thmproofx1.p2.17.m1.1a"><msub id="Thmproofx1.p2.17.m1.1.1" xref="Thmproofx1.p2.17.m1.1.1.cmml"><mi id="Thmproofx1.p2.17.m1.1.1.2" xref="Thmproofx1.p2.17.m1.1.1.2.cmml">λ</mi><mi id="Thmproofx1.p2.17.m1.1.1.3" xref="Thmproofx1.p2.17.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.17.m1.1b"><apply id="Thmproofx1.p2.17.m1.1.1.cmml" xref="Thmproofx1.p2.17.m1.1.1"><csymbol cd="ambiguous" id="Thmproofx1.p2.17.m1.1.1.1.cmml" xref="Thmproofx1.p2.17.m1.1.1">subscript</csymbol><ci id="Thmproofx1.p2.17.m1.1.1.2.cmml" xref="Thmproofx1.p2.17.m1.1.1.2">𝜆</ci><ci id="Thmproofx1.p2.17.m1.1.1.3.cmml" xref="Thmproofx1.p2.17.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.17.m1.1c">\lambda_{i}</annotation></semantics></math> is the number of occurrences (frequency) of samples with label <math id="Thmproofx1.p2.18.m2.1" class="ltx_Math" alttext="i" display="inline"><semantics id="Thmproofx1.p2.18.m2.1a"><mi id="Thmproofx1.p2.18.m2.1.1" xref="Thmproofx1.p2.18.m2.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.18.m2.1b"><ci id="Thmproofx1.p2.18.m2.1.1.cmml" xref="Thmproofx1.p2.18.m2.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.18.m2.1c">i</annotation></semantics></math> in the training batch.
When <math id="Thmproofx1.p2.19.m3.1" class="ltx_Math" alttext="{i\notin C}" display="inline"><semantics id="Thmproofx1.p2.19.m3.1a"><mrow id="Thmproofx1.p2.19.m3.1.1" xref="Thmproofx1.p2.19.m3.1.1.cmml"><mi id="Thmproofx1.p2.19.m3.1.1.2" xref="Thmproofx1.p2.19.m3.1.1.2.cmml">i</mi><mo id="Thmproofx1.p2.19.m3.1.1.1" xref="Thmproofx1.p2.19.m3.1.1.1.cmml">∉</mo><mi id="Thmproofx1.p2.19.m3.1.1.3" xref="Thmproofx1.p2.19.m3.1.1.3.cmml">C</mi></mrow><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.19.m3.1b"><apply id="Thmproofx1.p2.19.m3.1.1.cmml" xref="Thmproofx1.p2.19.m3.1.1"><notin id="Thmproofx1.p2.19.m3.1.1.1.cmml" xref="Thmproofx1.p2.19.m3.1.1.1"></notin><ci id="Thmproofx1.p2.19.m3.1.1.2.cmml" xref="Thmproofx1.p2.19.m3.1.1.2">𝑖</ci><ci id="Thmproofx1.p2.19.m3.1.1.3.cmml" xref="Thmproofx1.p2.19.m3.1.1.3">𝐶</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.19.m3.1c">{i\notin C}</annotation></semantics></math>, <math id="Thmproofx1.p2.20.m4.1" class="ltx_Math" alttext="{\lambda_{i}=0}" display="inline"><semantics id="Thmproofx1.p2.20.m4.1a"><mrow id="Thmproofx1.p2.20.m4.1.1" xref="Thmproofx1.p2.20.m4.1.1.cmml"><msub id="Thmproofx1.p2.20.m4.1.1.2" xref="Thmproofx1.p2.20.m4.1.1.2.cmml"><mi id="Thmproofx1.p2.20.m4.1.1.2.2" xref="Thmproofx1.p2.20.m4.1.1.2.2.cmml">λ</mi><mi id="Thmproofx1.p2.20.m4.1.1.2.3" xref="Thmproofx1.p2.20.m4.1.1.2.3.cmml">i</mi></msub><mo id="Thmproofx1.p2.20.m4.1.1.1" xref="Thmproofx1.p2.20.m4.1.1.1.cmml">=</mo><mn id="Thmproofx1.p2.20.m4.1.1.3" xref="Thmproofx1.p2.20.m4.1.1.3.cmml">0</mn></mrow><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.20.m4.1b"><apply id="Thmproofx1.p2.20.m4.1.1.cmml" xref="Thmproofx1.p2.20.m4.1.1"><eq id="Thmproofx1.p2.20.m4.1.1.1.cmml" xref="Thmproofx1.p2.20.m4.1.1.1"></eq><apply id="Thmproofx1.p2.20.m4.1.1.2.cmml" xref="Thmproofx1.p2.20.m4.1.1.2"><csymbol cd="ambiguous" id="Thmproofx1.p2.20.m4.1.1.2.1.cmml" xref="Thmproofx1.p2.20.m4.1.1.2">subscript</csymbol><ci id="Thmproofx1.p2.20.m4.1.1.2.2.cmml" xref="Thmproofx1.p2.20.m4.1.1.2.2">𝜆</ci><ci id="Thmproofx1.p2.20.m4.1.1.2.3.cmml" xref="Thmproofx1.p2.20.m4.1.1.2.3">𝑖</ci></apply><cn type="integer" id="Thmproofx1.p2.20.m4.1.1.3.cmml" xref="Thmproofx1.p2.20.m4.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.20.m4.1c">{\lambda_{i}=0}</annotation></semantics></math>, and <math id="Thmproofx1.p2.21.m5.2" class="ltx_Math" alttext="{\nicefrac{{e^{y_{i}}}}{{\sum\nolimits_{j}e^{y_{j}}}}\in(0,1)}" display="inline"><semantics id="Thmproofx1.p2.21.m5.2a"><mrow id="Thmproofx1.p2.21.m5.2.3" xref="Thmproofx1.p2.21.m5.2.3.cmml"><mrow id="Thmproofx1.p2.21.m5.2.3.2" xref="Thmproofx1.p2.21.m5.2.3.2.cmml"><mpadded voffset="0.3em" id="Thmproofx1.p2.21.m5.2.3.2.2" xref="Thmproofx1.p2.21.m5.2.3.2.2.cmml"><msup id="Thmproofx1.p2.21.m5.2.3.2.2a" xref="Thmproofx1.p2.21.m5.2.3.2.2.cmml"><mi mathsize="70%" id="Thmproofx1.p2.21.m5.2.3.2.2.2" xref="Thmproofx1.p2.21.m5.2.3.2.2.2.cmml">e</mi><msub id="Thmproofx1.p2.21.m5.2.3.2.2.3" xref="Thmproofx1.p2.21.m5.2.3.2.2.3.cmml"><mi mathsize="71%" id="Thmproofx1.p2.21.m5.2.3.2.2.3.2" xref="Thmproofx1.p2.21.m5.2.3.2.2.3.2.cmml">y</mi><mi id="Thmproofx1.p2.21.m5.2.3.2.2.3.3" xref="Thmproofx1.p2.21.m5.2.3.2.2.3.3.cmml">i</mi></msub></msup></mpadded><mpadded lspace="-0.1em" width="-0.15em" id="Thmproofx1.p2.21.m5.2.3.2.1" xref="Thmproofx1.p2.21.m5.2.3.2.1.cmml"><mo stretchy="true" symmetric="true" id="Thmproofx1.p2.21.m5.2.3.2.1a" xref="Thmproofx1.p2.21.m5.2.3.2.1.cmml">/</mo></mpadded><mrow id="Thmproofx1.p2.21.m5.2.3.2.3" xref="Thmproofx1.p2.21.m5.2.3.2.3.cmml"><msub id="Thmproofx1.p2.21.m5.2.3.2.3.1" xref="Thmproofx1.p2.21.m5.2.3.2.3.1.cmml"><mo lspace="0.222em" maxsize="70%" minsize="70%" stretchy="true" id="Thmproofx1.p2.21.m5.2.3.2.3.1.2" xref="Thmproofx1.p2.21.m5.2.3.2.3.1.2.cmml">∑</mo><mi mathsize="71%" id="Thmproofx1.p2.21.m5.2.3.2.3.1.3" xref="Thmproofx1.p2.21.m5.2.3.2.3.1.3.cmml">j</mi></msub><msup id="Thmproofx1.p2.21.m5.2.3.2.3.2" xref="Thmproofx1.p2.21.m5.2.3.2.3.2.cmml"><mi mathsize="70%" id="Thmproofx1.p2.21.m5.2.3.2.3.2.2" xref="Thmproofx1.p2.21.m5.2.3.2.3.2.2.cmml">e</mi><msub id="Thmproofx1.p2.21.m5.2.3.2.3.2.3" xref="Thmproofx1.p2.21.m5.2.3.2.3.2.3.cmml"><mi mathsize="71%" id="Thmproofx1.p2.21.m5.2.3.2.3.2.3.2" xref="Thmproofx1.p2.21.m5.2.3.2.3.2.3.2.cmml">y</mi><mi id="Thmproofx1.p2.21.m5.2.3.2.3.2.3.3" xref="Thmproofx1.p2.21.m5.2.3.2.3.2.3.3.cmml">j</mi></msub></msup></mrow></mrow><mo id="Thmproofx1.p2.21.m5.2.3.1" xref="Thmproofx1.p2.21.m5.2.3.1.cmml">∈</mo><mrow id="Thmproofx1.p2.21.m5.2.3.3.2" xref="Thmproofx1.p2.21.m5.2.3.3.1.cmml"><mo stretchy="false" id="Thmproofx1.p2.21.m5.2.3.3.2.1" xref="Thmproofx1.p2.21.m5.2.3.3.1.cmml">(</mo><mn id="Thmproofx1.p2.21.m5.1.1" xref="Thmproofx1.p2.21.m5.1.1.cmml">0</mn><mo id="Thmproofx1.p2.21.m5.2.3.3.2.2" xref="Thmproofx1.p2.21.m5.2.3.3.1.cmml">,</mo><mn id="Thmproofx1.p2.21.m5.2.2" xref="Thmproofx1.p2.21.m5.2.2.cmml">1</mn><mo stretchy="false" id="Thmproofx1.p2.21.m5.2.3.3.2.3" xref="Thmproofx1.p2.21.m5.2.3.3.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.21.m5.2b"><apply id="Thmproofx1.p2.21.m5.2.3.cmml" xref="Thmproofx1.p2.21.m5.2.3"><in id="Thmproofx1.p2.21.m5.2.3.1.cmml" xref="Thmproofx1.p2.21.m5.2.3.1"></in><apply id="Thmproofx1.p2.21.m5.2.3.2.cmml" xref="Thmproofx1.p2.21.m5.2.3.2"><divide id="Thmproofx1.p2.21.m5.2.3.2.1.cmml" xref="Thmproofx1.p2.21.m5.2.3.2.1"></divide><apply id="Thmproofx1.p2.21.m5.2.3.2.2.cmml" xref="Thmproofx1.p2.21.m5.2.3.2.2"><csymbol cd="ambiguous" id="Thmproofx1.p2.21.m5.2.3.2.2.1.cmml" xref="Thmproofx1.p2.21.m5.2.3.2.2">superscript</csymbol><ci id="Thmproofx1.p2.21.m5.2.3.2.2.2.cmml" xref="Thmproofx1.p2.21.m5.2.3.2.2.2">𝑒</ci><apply id="Thmproofx1.p2.21.m5.2.3.2.2.3.cmml" xref="Thmproofx1.p2.21.m5.2.3.2.2.3"><csymbol cd="ambiguous" id="Thmproofx1.p2.21.m5.2.3.2.2.3.1.cmml" xref="Thmproofx1.p2.21.m5.2.3.2.2.3">subscript</csymbol><ci id="Thmproofx1.p2.21.m5.2.3.2.2.3.2.cmml" xref="Thmproofx1.p2.21.m5.2.3.2.2.3.2">𝑦</ci><ci id="Thmproofx1.p2.21.m5.2.3.2.2.3.3.cmml" xref="Thmproofx1.p2.21.m5.2.3.2.2.3.3">𝑖</ci></apply></apply><apply id="Thmproofx1.p2.21.m5.2.3.2.3.cmml" xref="Thmproofx1.p2.21.m5.2.3.2.3"><apply id="Thmproofx1.p2.21.m5.2.3.2.3.1.cmml" xref="Thmproofx1.p2.21.m5.2.3.2.3.1"><csymbol cd="ambiguous" id="Thmproofx1.p2.21.m5.2.3.2.3.1.1.cmml" xref="Thmproofx1.p2.21.m5.2.3.2.3.1">subscript</csymbol><sum id="Thmproofx1.p2.21.m5.2.3.2.3.1.2.cmml" xref="Thmproofx1.p2.21.m5.2.3.2.3.1.2"></sum><ci id="Thmproofx1.p2.21.m5.2.3.2.3.1.3.cmml" xref="Thmproofx1.p2.21.m5.2.3.2.3.1.3">𝑗</ci></apply><apply id="Thmproofx1.p2.21.m5.2.3.2.3.2.cmml" xref="Thmproofx1.p2.21.m5.2.3.2.3.2"><csymbol cd="ambiguous" id="Thmproofx1.p2.21.m5.2.3.2.3.2.1.cmml" xref="Thmproofx1.p2.21.m5.2.3.2.3.2">superscript</csymbol><ci id="Thmproofx1.p2.21.m5.2.3.2.3.2.2.cmml" xref="Thmproofx1.p2.21.m5.2.3.2.3.2.2">𝑒</ci><apply id="Thmproofx1.p2.21.m5.2.3.2.3.2.3.cmml" xref="Thmproofx1.p2.21.m5.2.3.2.3.2.3"><csymbol cd="ambiguous" id="Thmproofx1.p2.21.m5.2.3.2.3.2.3.1.cmml" xref="Thmproofx1.p2.21.m5.2.3.2.3.2.3">subscript</csymbol><ci id="Thmproofx1.p2.21.m5.2.3.2.3.2.3.2.cmml" xref="Thmproofx1.p2.21.m5.2.3.2.3.2.3.2">𝑦</ci><ci id="Thmproofx1.p2.21.m5.2.3.2.3.2.3.3.cmml" xref="Thmproofx1.p2.21.m5.2.3.2.3.2.3.3">𝑗</ci></apply></apply></apply></apply><interval closure="open" id="Thmproofx1.p2.21.m5.2.3.3.1.cmml" xref="Thmproofx1.p2.21.m5.2.3.3.2"><cn type="integer" id="Thmproofx1.p2.21.m5.1.1.cmml" xref="Thmproofx1.p2.21.m5.1.1">0</cn><cn type="integer" id="Thmproofx1.p2.21.m5.2.2.cmml" xref="Thmproofx1.p2.21.m5.2.2">1</cn></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.21.m5.2c">{\nicefrac{{e^{y_{i}}}}{{\sum\nolimits_{j}e^{y_{j}}}}\in(0,1)}</annotation></semantics></math>, thus, <math id="Thmproofx1.p2.22.m6.2" class="ltx_Math" alttext="{d_{i}\in(0,1)}" display="inline"><semantics id="Thmproofx1.p2.22.m6.2a"><mrow id="Thmproofx1.p2.22.m6.2.3" xref="Thmproofx1.p2.22.m6.2.3.cmml"><msub id="Thmproofx1.p2.22.m6.2.3.2" xref="Thmproofx1.p2.22.m6.2.3.2.cmml"><mi id="Thmproofx1.p2.22.m6.2.3.2.2" xref="Thmproofx1.p2.22.m6.2.3.2.2.cmml">d</mi><mi id="Thmproofx1.p2.22.m6.2.3.2.3" xref="Thmproofx1.p2.22.m6.2.3.2.3.cmml">i</mi></msub><mo id="Thmproofx1.p2.22.m6.2.3.1" xref="Thmproofx1.p2.22.m6.2.3.1.cmml">∈</mo><mrow id="Thmproofx1.p2.22.m6.2.3.3.2" xref="Thmproofx1.p2.22.m6.2.3.3.1.cmml"><mo stretchy="false" id="Thmproofx1.p2.22.m6.2.3.3.2.1" xref="Thmproofx1.p2.22.m6.2.3.3.1.cmml">(</mo><mn id="Thmproofx1.p2.22.m6.1.1" xref="Thmproofx1.p2.22.m6.1.1.cmml">0</mn><mo id="Thmproofx1.p2.22.m6.2.3.3.2.2" xref="Thmproofx1.p2.22.m6.2.3.3.1.cmml">,</mo><mn id="Thmproofx1.p2.22.m6.2.2" xref="Thmproofx1.p2.22.m6.2.2.cmml">1</mn><mo stretchy="false" id="Thmproofx1.p2.22.m6.2.3.3.2.3" xref="Thmproofx1.p2.22.m6.2.3.3.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.22.m6.2b"><apply id="Thmproofx1.p2.22.m6.2.3.cmml" xref="Thmproofx1.p2.22.m6.2.3"><in id="Thmproofx1.p2.22.m6.2.3.1.cmml" xref="Thmproofx1.p2.22.m6.2.3.1"></in><apply id="Thmproofx1.p2.22.m6.2.3.2.cmml" xref="Thmproofx1.p2.22.m6.2.3.2"><csymbol cd="ambiguous" id="Thmproofx1.p2.22.m6.2.3.2.1.cmml" xref="Thmproofx1.p2.22.m6.2.3.2">subscript</csymbol><ci id="Thmproofx1.p2.22.m6.2.3.2.2.cmml" xref="Thmproofx1.p2.22.m6.2.3.2.2">𝑑</ci><ci id="Thmproofx1.p2.22.m6.2.3.2.3.cmml" xref="Thmproofx1.p2.22.m6.2.3.2.3">𝑖</ci></apply><interval closure="open" id="Thmproofx1.p2.22.m6.2.3.3.1.cmml" xref="Thmproofx1.p2.22.m6.2.3.3.2"><cn type="integer" id="Thmproofx1.p2.22.m6.1.1.cmml" xref="Thmproofx1.p2.22.m6.1.1">0</cn><cn type="integer" id="Thmproofx1.p2.22.m6.2.2.cmml" xref="Thmproofx1.p2.22.m6.2.2">1</cn></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.22.m6.2c">{d_{i}\in(0,1)}</annotation></semantics></math>.
Instead, when <math id="Thmproofx1.p2.23.m7.1" class="ltx_Math" alttext="{i\in C}" display="inline"><semantics id="Thmproofx1.p2.23.m7.1a"><mrow id="Thmproofx1.p2.23.m7.1.1" xref="Thmproofx1.p2.23.m7.1.1.cmml"><mi id="Thmproofx1.p2.23.m7.1.1.2" xref="Thmproofx1.p2.23.m7.1.1.2.cmml">i</mi><mo id="Thmproofx1.p2.23.m7.1.1.1" xref="Thmproofx1.p2.23.m7.1.1.1.cmml">∈</mo><mi id="Thmproofx1.p2.23.m7.1.1.3" xref="Thmproofx1.p2.23.m7.1.1.3.cmml">C</mi></mrow><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.23.m7.1b"><apply id="Thmproofx1.p2.23.m7.1.1.cmml" xref="Thmproofx1.p2.23.m7.1.1"><in id="Thmproofx1.p2.23.m7.1.1.1.cmml" xref="Thmproofx1.p2.23.m7.1.1.1"></in><ci id="Thmproofx1.p2.23.m7.1.1.2.cmml" xref="Thmproofx1.p2.23.m7.1.1.2">𝑖</ci><ci id="Thmproofx1.p2.23.m7.1.1.3.cmml" xref="Thmproofx1.p2.23.m7.1.1.3">𝐶</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.23.m7.1c">{i\in C}</annotation></semantics></math>, we have <math id="Thmproofx1.p2.24.m8.1" class="ltx_Math" alttext="{-\frac{\lambda_{i}}{B}\leq d_{i}\leq 1-\frac{\lambda_{i}}{B}}" display="inline"><semantics id="Thmproofx1.p2.24.m8.1a"><mrow id="Thmproofx1.p2.24.m8.1.1" xref="Thmproofx1.p2.24.m8.1.1.cmml"><mrow id="Thmproofx1.p2.24.m8.1.1.2" xref="Thmproofx1.p2.24.m8.1.1.2.cmml"><mo id="Thmproofx1.p2.24.m8.1.1.2a" xref="Thmproofx1.p2.24.m8.1.1.2.cmml">−</mo><mfrac id="Thmproofx1.p2.24.m8.1.1.2.2" xref="Thmproofx1.p2.24.m8.1.1.2.2.cmml"><msub id="Thmproofx1.p2.24.m8.1.1.2.2.2" xref="Thmproofx1.p2.24.m8.1.1.2.2.2.cmml"><mi id="Thmproofx1.p2.24.m8.1.1.2.2.2.2" xref="Thmproofx1.p2.24.m8.1.1.2.2.2.2.cmml">λ</mi><mi id="Thmproofx1.p2.24.m8.1.1.2.2.2.3" xref="Thmproofx1.p2.24.m8.1.1.2.2.2.3.cmml">i</mi></msub><mi id="Thmproofx1.p2.24.m8.1.1.2.2.3" xref="Thmproofx1.p2.24.m8.1.1.2.2.3.cmml">B</mi></mfrac></mrow><mo id="Thmproofx1.p2.24.m8.1.1.3" xref="Thmproofx1.p2.24.m8.1.1.3.cmml">≤</mo><msub id="Thmproofx1.p2.24.m8.1.1.4" xref="Thmproofx1.p2.24.m8.1.1.4.cmml"><mi id="Thmproofx1.p2.24.m8.1.1.4.2" xref="Thmproofx1.p2.24.m8.1.1.4.2.cmml">d</mi><mi id="Thmproofx1.p2.24.m8.1.1.4.3" xref="Thmproofx1.p2.24.m8.1.1.4.3.cmml">i</mi></msub><mo id="Thmproofx1.p2.24.m8.1.1.5" xref="Thmproofx1.p2.24.m8.1.1.5.cmml">≤</mo><mrow id="Thmproofx1.p2.24.m8.1.1.6" xref="Thmproofx1.p2.24.m8.1.1.6.cmml"><mn id="Thmproofx1.p2.24.m8.1.1.6.2" xref="Thmproofx1.p2.24.m8.1.1.6.2.cmml">1</mn><mo id="Thmproofx1.p2.24.m8.1.1.6.1" xref="Thmproofx1.p2.24.m8.1.1.6.1.cmml">−</mo><mfrac id="Thmproofx1.p2.24.m8.1.1.6.3" xref="Thmproofx1.p2.24.m8.1.1.6.3.cmml"><msub id="Thmproofx1.p2.24.m8.1.1.6.3.2" xref="Thmproofx1.p2.24.m8.1.1.6.3.2.cmml"><mi id="Thmproofx1.p2.24.m8.1.1.6.3.2.2" xref="Thmproofx1.p2.24.m8.1.1.6.3.2.2.cmml">λ</mi><mi id="Thmproofx1.p2.24.m8.1.1.6.3.2.3" xref="Thmproofx1.p2.24.m8.1.1.6.3.2.3.cmml">i</mi></msub><mi id="Thmproofx1.p2.24.m8.1.1.6.3.3" xref="Thmproofx1.p2.24.m8.1.1.6.3.3.cmml">B</mi></mfrac></mrow></mrow><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.24.m8.1b"><apply id="Thmproofx1.p2.24.m8.1.1.cmml" xref="Thmproofx1.p2.24.m8.1.1"><and id="Thmproofx1.p2.24.m8.1.1a.cmml" xref="Thmproofx1.p2.24.m8.1.1"></and><apply id="Thmproofx1.p2.24.m8.1.1b.cmml" xref="Thmproofx1.p2.24.m8.1.1"><leq id="Thmproofx1.p2.24.m8.1.1.3.cmml" xref="Thmproofx1.p2.24.m8.1.1.3"></leq><apply id="Thmproofx1.p2.24.m8.1.1.2.cmml" xref="Thmproofx1.p2.24.m8.1.1.2"><minus id="Thmproofx1.p2.24.m8.1.1.2.1.cmml" xref="Thmproofx1.p2.24.m8.1.1.2"></minus><apply id="Thmproofx1.p2.24.m8.1.1.2.2.cmml" xref="Thmproofx1.p2.24.m8.1.1.2.2"><divide id="Thmproofx1.p2.24.m8.1.1.2.2.1.cmml" xref="Thmproofx1.p2.24.m8.1.1.2.2"></divide><apply id="Thmproofx1.p2.24.m8.1.1.2.2.2.cmml" xref="Thmproofx1.p2.24.m8.1.1.2.2.2"><csymbol cd="ambiguous" id="Thmproofx1.p2.24.m8.1.1.2.2.2.1.cmml" xref="Thmproofx1.p2.24.m8.1.1.2.2.2">subscript</csymbol><ci id="Thmproofx1.p2.24.m8.1.1.2.2.2.2.cmml" xref="Thmproofx1.p2.24.m8.1.1.2.2.2.2">𝜆</ci><ci id="Thmproofx1.p2.24.m8.1.1.2.2.2.3.cmml" xref="Thmproofx1.p2.24.m8.1.1.2.2.2.3">𝑖</ci></apply><ci id="Thmproofx1.p2.24.m8.1.1.2.2.3.cmml" xref="Thmproofx1.p2.24.m8.1.1.2.2.3">𝐵</ci></apply></apply><apply id="Thmproofx1.p2.24.m8.1.1.4.cmml" xref="Thmproofx1.p2.24.m8.1.1.4"><csymbol cd="ambiguous" id="Thmproofx1.p2.24.m8.1.1.4.1.cmml" xref="Thmproofx1.p2.24.m8.1.1.4">subscript</csymbol><ci id="Thmproofx1.p2.24.m8.1.1.4.2.cmml" xref="Thmproofx1.p2.24.m8.1.1.4.2">𝑑</ci><ci id="Thmproofx1.p2.24.m8.1.1.4.3.cmml" xref="Thmproofx1.p2.24.m8.1.1.4.3">𝑖</ci></apply></apply><apply id="Thmproofx1.p2.24.m8.1.1c.cmml" xref="Thmproofx1.p2.24.m8.1.1"><leq id="Thmproofx1.p2.24.m8.1.1.5.cmml" xref="Thmproofx1.p2.24.m8.1.1.5"></leq><share href="#Thmproofx1.p2.24.m8.1.1.4.cmml" id="Thmproofx1.p2.24.m8.1.1d.cmml" xref="Thmproofx1.p2.24.m8.1.1"></share><apply id="Thmproofx1.p2.24.m8.1.1.6.cmml" xref="Thmproofx1.p2.24.m8.1.1.6"><minus id="Thmproofx1.p2.24.m8.1.1.6.1.cmml" xref="Thmproofx1.p2.24.m8.1.1.6.1"></minus><cn type="integer" id="Thmproofx1.p2.24.m8.1.1.6.2.cmml" xref="Thmproofx1.p2.24.m8.1.1.6.2">1</cn><apply id="Thmproofx1.p2.24.m8.1.1.6.3.cmml" xref="Thmproofx1.p2.24.m8.1.1.6.3"><divide id="Thmproofx1.p2.24.m8.1.1.6.3.1.cmml" xref="Thmproofx1.p2.24.m8.1.1.6.3"></divide><apply id="Thmproofx1.p2.24.m8.1.1.6.3.2.cmml" xref="Thmproofx1.p2.24.m8.1.1.6.3.2"><csymbol cd="ambiguous" id="Thmproofx1.p2.24.m8.1.1.6.3.2.1.cmml" xref="Thmproofx1.p2.24.m8.1.1.6.3.2">subscript</csymbol><ci id="Thmproofx1.p2.24.m8.1.1.6.3.2.2.cmml" xref="Thmproofx1.p2.24.m8.1.1.6.3.2.2">𝜆</ci><ci id="Thmproofx1.p2.24.m8.1.1.6.3.2.3.cmml" xref="Thmproofx1.p2.24.m8.1.1.6.3.2.3">𝑖</ci></apply><ci id="Thmproofx1.p2.24.m8.1.1.6.3.3.cmml" xref="Thmproofx1.p2.24.m8.1.1.6.3.3">𝐵</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.24.m8.1c">{-\frac{\lambda_{i}}{B}\leq d_{i}\leq 1-\frac{\lambda_{i}}{B}}</annotation></semantics></math>.
Hence, if the gradient <math id="Thmproofx1.p2.25.m9.1" class="ltx_Math" alttext="d_{i}" display="inline"><semantics id="Thmproofx1.p2.25.m9.1a"><msub id="Thmproofx1.p2.25.m9.1.1" xref="Thmproofx1.p2.25.m9.1.1.cmml"><mi id="Thmproofx1.p2.25.m9.1.1.2" xref="Thmproofx1.p2.25.m9.1.1.2.cmml">d</mi><mi id="Thmproofx1.p2.25.m9.1.1.3" xref="Thmproofx1.p2.25.m9.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.25.m9.1b"><apply id="Thmproofx1.p2.25.m9.1.1.cmml" xref="Thmproofx1.p2.25.m9.1.1"><csymbol cd="ambiguous" id="Thmproofx1.p2.25.m9.1.1.1.cmml" xref="Thmproofx1.p2.25.m9.1.1">subscript</csymbol><ci id="Thmproofx1.p2.25.m9.1.1.2.cmml" xref="Thmproofx1.p2.25.m9.1.1.2">𝑑</ci><ci id="Thmproofx1.p2.25.m9.1.1.3.cmml" xref="Thmproofx1.p2.25.m9.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.25.m9.1c">d_{i}</annotation></semantics></math> is negative, we can conclude that label <math id="Thmproofx1.p2.26.m10.1" class="ltx_Math" alttext="{i\in C}" display="inline"><semantics id="Thmproofx1.p2.26.m10.1a"><mrow id="Thmproofx1.p2.26.m10.1.1" xref="Thmproofx1.p2.26.m10.1.1.cmml"><mi id="Thmproofx1.p2.26.m10.1.1.2" xref="Thmproofx1.p2.26.m10.1.1.2.cmml">i</mi><mo id="Thmproofx1.p2.26.m10.1.1.1" xref="Thmproofx1.p2.26.m10.1.1.1.cmml">∈</mo><mi id="Thmproofx1.p2.26.m10.1.1.3" xref="Thmproofx1.p2.26.m10.1.1.3.cmml">C</mi></mrow><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.26.m10.1b"><apply id="Thmproofx1.p2.26.m10.1.1.cmml" xref="Thmproofx1.p2.26.m10.1.1"><in id="Thmproofx1.p2.26.m10.1.1.1.cmml" xref="Thmproofx1.p2.26.m10.1.1.1"></in><ci id="Thmproofx1.p2.26.m10.1.1.2.cmml" xref="Thmproofx1.p2.26.m10.1.1.2">𝑖</ci><ci id="Thmproofx1.p2.26.m10.1.1.3.cmml" xref="Thmproofx1.p2.26.m10.1.1.3">𝐶</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.26.m10.1c">{i\in C}</annotation></semantics></math>.
Of course, the <math id="Thmproofx1.p2.27.m11.1" class="ltx_Math" alttext="d_{i}" display="inline"><semantics id="Thmproofx1.p2.27.m11.1a"><msub id="Thmproofx1.p2.27.m11.1.1" xref="Thmproofx1.p2.27.m11.1.1.cmml"><mi id="Thmproofx1.p2.27.m11.1.1.2" xref="Thmproofx1.p2.27.m11.1.1.2.cmml">d</mi><mi id="Thmproofx1.p2.27.m11.1.1.3" xref="Thmproofx1.p2.27.m11.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.27.m11.1b"><apply id="Thmproofx1.p2.27.m11.1.1.cmml" xref="Thmproofx1.p2.27.m11.1.1"><csymbol cd="ambiguous" id="Thmproofx1.p2.27.m11.1.1.1.cmml" xref="Thmproofx1.p2.27.m11.1.1">subscript</csymbol><ci id="Thmproofx1.p2.27.m11.1.1.2.cmml" xref="Thmproofx1.p2.27.m11.1.1.2">𝑑</ci><ci id="Thmproofx1.p2.27.m11.1.1.3.cmml" xref="Thmproofx1.p2.27.m11.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.27.m11.1c">d_{i}</annotation></semantics></math> value moves in this range accordingly to the status of the network weights optimization,
e.g. if <math id="Thmproofx1.p2.28.m12.1" class="ltx_Math" alttext="{i\in C}" display="inline"><semantics id="Thmproofx1.p2.28.m12.1a"><mrow id="Thmproofx1.p2.28.m12.1.1" xref="Thmproofx1.p2.28.m12.1.1.cmml"><mi id="Thmproofx1.p2.28.m12.1.1.2" xref="Thmproofx1.p2.28.m12.1.1.2.cmml">i</mi><mo id="Thmproofx1.p2.28.m12.1.1.1" xref="Thmproofx1.p2.28.m12.1.1.1.cmml">∈</mo><mi id="Thmproofx1.p2.28.m12.1.1.3" xref="Thmproofx1.p2.28.m12.1.1.3.cmml">C</mi></mrow><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.28.m12.1b"><apply id="Thmproofx1.p2.28.m12.1.1.cmml" xref="Thmproofx1.p2.28.m12.1.1"><in id="Thmproofx1.p2.28.m12.1.1.1.cmml" xref="Thmproofx1.p2.28.m12.1.1.1"></in><ci id="Thmproofx1.p2.28.m12.1.1.2.cmml" xref="Thmproofx1.p2.28.m12.1.1.2">𝑖</ci><ci id="Thmproofx1.p2.28.m12.1.1.3.cmml" xref="Thmproofx1.p2.28.m12.1.1.3">𝐶</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.28.m12.1c">{i\in C}</annotation></semantics></math> and the network performs poorly, then, <math id="Thmproofx1.p2.29.m13.1" class="ltx_Math" alttext="d_{i}" display="inline"><semantics id="Thmproofx1.p2.29.m13.1a"><msub id="Thmproofx1.p2.29.m13.1.1" xref="Thmproofx1.p2.29.m13.1.1.cmml"><mi id="Thmproofx1.p2.29.m13.1.1.2" xref="Thmproofx1.p2.29.m13.1.1.2.cmml">d</mi><mi id="Thmproofx1.p2.29.m13.1.1.3" xref="Thmproofx1.p2.29.m13.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.29.m13.1b"><apply id="Thmproofx1.p2.29.m13.1.1.cmml" xref="Thmproofx1.p2.29.m13.1.1"><csymbol cd="ambiguous" id="Thmproofx1.p2.29.m13.1.1.1.cmml" xref="Thmproofx1.p2.29.m13.1.1">subscript</csymbol><ci id="Thmproofx1.p2.29.m13.1.1.2.cmml" xref="Thmproofx1.p2.29.m13.1.1.2">𝑑</ci><ci id="Thmproofx1.p2.29.m13.1.1.3.cmml" xref="Thmproofx1.p2.29.m13.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.29.m13.1c">d_{i}</annotation></semantics></math> will be closer to <math id="Thmproofx1.p2.30.m14.1" class="ltx_Math" alttext="-\frac{\lambda_{i}}{B}" display="inline"><semantics id="Thmproofx1.p2.30.m14.1a"><mrow id="Thmproofx1.p2.30.m14.1.1" xref="Thmproofx1.p2.30.m14.1.1.cmml"><mo id="Thmproofx1.p2.30.m14.1.1a" xref="Thmproofx1.p2.30.m14.1.1.cmml">−</mo><mfrac id="Thmproofx1.p2.30.m14.1.1.2" xref="Thmproofx1.p2.30.m14.1.1.2.cmml"><msub id="Thmproofx1.p2.30.m14.1.1.2.2" xref="Thmproofx1.p2.30.m14.1.1.2.2.cmml"><mi id="Thmproofx1.p2.30.m14.1.1.2.2.2" xref="Thmproofx1.p2.30.m14.1.1.2.2.2.cmml">λ</mi><mi id="Thmproofx1.p2.30.m14.1.1.2.2.3" xref="Thmproofx1.p2.30.m14.1.1.2.2.3.cmml">i</mi></msub><mi id="Thmproofx1.p2.30.m14.1.1.2.3" xref="Thmproofx1.p2.30.m14.1.1.2.3.cmml">B</mi></mfrac></mrow><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.30.m14.1b"><apply id="Thmproofx1.p2.30.m14.1.1.cmml" xref="Thmproofx1.p2.30.m14.1.1"><minus id="Thmproofx1.p2.30.m14.1.1.1.cmml" xref="Thmproofx1.p2.30.m14.1.1"></minus><apply id="Thmproofx1.p2.30.m14.1.1.2.cmml" xref="Thmproofx1.p2.30.m14.1.1.2"><divide id="Thmproofx1.p2.30.m14.1.1.2.1.cmml" xref="Thmproofx1.p2.30.m14.1.1.2"></divide><apply id="Thmproofx1.p2.30.m14.1.1.2.2.cmml" xref="Thmproofx1.p2.30.m14.1.1.2.2"><csymbol cd="ambiguous" id="Thmproofx1.p2.30.m14.1.1.2.2.1.cmml" xref="Thmproofx1.p2.30.m14.1.1.2.2">subscript</csymbol><ci id="Thmproofx1.p2.30.m14.1.1.2.2.2.cmml" xref="Thmproofx1.p2.30.m14.1.1.2.2.2">𝜆</ci><ci id="Thmproofx1.p2.30.m14.1.1.2.2.3.cmml" xref="Thmproofx1.p2.30.m14.1.1.2.2.3">𝑖</ci></apply><ci id="Thmproofx1.p2.30.m14.1.1.2.3.cmml" xref="Thmproofx1.p2.30.m14.1.1.2.3">𝐵</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.30.m14.1c">-\frac{\lambda_{i}}{B}</annotation></semantics></math>.
However, the gradients <math id="Thmproofx1.p2.31.m15.1" class="ltx_Math" alttext="\bm{d}" display="inline"><semantics id="Thmproofx1.p2.31.m15.1a"><mi id="Thmproofx1.p2.31.m15.1.1" xref="Thmproofx1.p2.31.m15.1.1.cmml">𝒅</mi><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.31.m15.1b"><ci id="Thmproofx1.p2.31.m15.1.1.cmml" xref="Thmproofx1.p2.31.m15.1.1">𝒅</ci></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.31.m15.1c">\bm{d}</annotation></semantics></math> w.r.t. the outputs <math id="Thmproofx1.p2.32.m16.1" class="ltx_Math" alttext="\bm{y}" display="inline"><semantics id="Thmproofx1.p2.32.m16.1a"><mi id="Thmproofx1.p2.32.m16.1.1" xref="Thmproofx1.p2.32.m16.1.1.cmml">𝒚</mi><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.32.m16.1b"><ci id="Thmproofx1.p2.32.m16.1.1.cmml" xref="Thmproofx1.p2.32.m16.1.1">𝒚</ci></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.32.m16.1c">\bm{y}</annotation></semantics></math> are usually not calculated or shared in <span title="" class="ltx_glossaryref">FL</span>, but only <math id="Thmproofx1.p2.33.m17.1" class="ltx_Math" alttext="\nabla\bm{W}" display="inline"><semantics id="Thmproofx1.p2.33.m17.1a"><mrow id="Thmproofx1.p2.33.m17.1.1" xref="Thmproofx1.p2.33.m17.1.1.cmml"><mo rspace="0.167em" id="Thmproofx1.p2.33.m17.1.1.1" xref="Thmproofx1.p2.33.m17.1.1.1.cmml">∇</mo><mi id="Thmproofx1.p2.33.m17.1.1.2" xref="Thmproofx1.p2.33.m17.1.1.2.cmml">𝑾</mi></mrow><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.33.m17.1b"><apply id="Thmproofx1.p2.33.m17.1.1.cmml" xref="Thmproofx1.p2.33.m17.1.1"><ci id="Thmproofx1.p2.33.m17.1.1.1.cmml" xref="Thmproofx1.p2.33.m17.1.1.1">∇</ci><ci id="Thmproofx1.p2.33.m17.1.1.2.cmml" xref="Thmproofx1.p2.33.m17.1.1.2">𝑾</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.33.m17.1c">\nabla\bm{W}</annotation></semantics></math>, the gradients w.r.t. the model weights <math id="Thmproofx1.p2.34.m18.1" class="ltx_Math" alttext="\bm{W}" display="inline"><semantics id="Thmproofx1.p2.34.m18.1a"><mi id="Thmproofx1.p2.34.m18.1.1" xref="Thmproofx1.p2.34.m18.1.1.cmml">𝑾</mi><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.34.m18.1b"><ci id="Thmproofx1.p2.34.m18.1.1.cmml" xref="Thmproofx1.p2.34.m18.1.1">𝑾</ci></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.34.m18.1c">\bm{W}</annotation></semantics></math>.
We write the gradient vector <math id="Thmproofx1.p2.35.m19.1" class="ltx_Math" alttext="\nabla\bm{W}^{i}_{L}" display="inline"><semantics id="Thmproofx1.p2.35.m19.1a"><mrow id="Thmproofx1.p2.35.m19.1.1" xref="Thmproofx1.p2.35.m19.1.1.cmml"><mo rspace="0.167em" id="Thmproofx1.p2.35.m19.1.1.1" xref="Thmproofx1.p2.35.m19.1.1.1.cmml">∇</mo><msubsup id="Thmproofx1.p2.35.m19.1.1.2" xref="Thmproofx1.p2.35.m19.1.1.2.cmml"><mi id="Thmproofx1.p2.35.m19.1.1.2.2.2" xref="Thmproofx1.p2.35.m19.1.1.2.2.2.cmml">𝑾</mi><mi id="Thmproofx1.p2.35.m19.1.1.2.3" xref="Thmproofx1.p2.35.m19.1.1.2.3.cmml">L</mi><mi id="Thmproofx1.p2.35.m19.1.1.2.2.3" xref="Thmproofx1.p2.35.m19.1.1.2.2.3.cmml">i</mi></msubsup></mrow><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.35.m19.1b"><apply id="Thmproofx1.p2.35.m19.1.1.cmml" xref="Thmproofx1.p2.35.m19.1.1"><ci id="Thmproofx1.p2.35.m19.1.1.1.cmml" xref="Thmproofx1.p2.35.m19.1.1.1">∇</ci><apply id="Thmproofx1.p2.35.m19.1.1.2.cmml" xref="Thmproofx1.p2.35.m19.1.1.2"><csymbol cd="ambiguous" id="Thmproofx1.p2.35.m19.1.1.2.1.cmml" xref="Thmproofx1.p2.35.m19.1.1.2">subscript</csymbol><apply id="Thmproofx1.p2.35.m19.1.1.2.2.cmml" xref="Thmproofx1.p2.35.m19.1.1.2"><csymbol cd="ambiguous" id="Thmproofx1.p2.35.m19.1.1.2.2.1.cmml" xref="Thmproofx1.p2.35.m19.1.1.2">superscript</csymbol><ci id="Thmproofx1.p2.35.m19.1.1.2.2.2.cmml" xref="Thmproofx1.p2.35.m19.1.1.2.2.2">𝑾</ci><ci id="Thmproofx1.p2.35.m19.1.1.2.2.3.cmml" xref="Thmproofx1.p2.35.m19.1.1.2.2.3">𝑖</ci></apply><ci id="Thmproofx1.p2.35.m19.1.1.2.3.cmml" xref="Thmproofx1.p2.35.m19.1.1.2.3">𝐿</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.35.m19.1c">\nabla\bm{W}^{i}_{L}</annotation></semantics></math> w.r.t. the weights <math id="Thmproofx1.p2.36.m20.1" class="ltx_Math" alttext="\bm{W}^{i}_{L}" display="inline"><semantics id="Thmproofx1.p2.36.m20.1a"><msubsup id="Thmproofx1.p2.36.m20.1.1" xref="Thmproofx1.p2.36.m20.1.1.cmml"><mi id="Thmproofx1.p2.36.m20.1.1.2.2" xref="Thmproofx1.p2.36.m20.1.1.2.2.cmml">𝑾</mi><mi id="Thmproofx1.p2.36.m20.1.1.3" xref="Thmproofx1.p2.36.m20.1.1.3.cmml">L</mi><mi id="Thmproofx1.p2.36.m20.1.1.2.3" xref="Thmproofx1.p2.36.m20.1.1.2.3.cmml">i</mi></msubsup><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.36.m20.1b"><apply id="Thmproofx1.p2.36.m20.1.1.cmml" xref="Thmproofx1.p2.36.m20.1.1"><csymbol cd="ambiguous" id="Thmproofx1.p2.36.m20.1.1.1.cmml" xref="Thmproofx1.p2.36.m20.1.1">subscript</csymbol><apply id="Thmproofx1.p2.36.m20.1.1.2.cmml" xref="Thmproofx1.p2.36.m20.1.1"><csymbol cd="ambiguous" id="Thmproofx1.p2.36.m20.1.1.2.1.cmml" xref="Thmproofx1.p2.36.m20.1.1">superscript</csymbol><ci id="Thmproofx1.p2.36.m20.1.1.2.2.cmml" xref="Thmproofx1.p2.36.m20.1.1.2.2">𝑾</ci><ci id="Thmproofx1.p2.36.m20.1.1.2.3.cmml" xref="Thmproofx1.p2.36.m20.1.1.2.3">𝑖</ci></apply><ci id="Thmproofx1.p2.36.m20.1.1.3.cmml" xref="Thmproofx1.p2.36.m20.1.1.3">𝐿</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.36.m20.1c">\bm{W}^{i}_{L}</annotation></semantics></math> connected to the <math id="Thmproofx1.p2.37.m21.1" class="ltx_Math" alttext="i^{th}" display="inline"><semantics id="Thmproofx1.p2.37.m21.1a"><msup id="Thmproofx1.p2.37.m21.1.1" xref="Thmproofx1.p2.37.m21.1.1.cmml"><mi id="Thmproofx1.p2.37.m21.1.1.2" xref="Thmproofx1.p2.37.m21.1.1.2.cmml">i</mi><mrow id="Thmproofx1.p2.37.m21.1.1.3" xref="Thmproofx1.p2.37.m21.1.1.3.cmml"><mi id="Thmproofx1.p2.37.m21.1.1.3.2" xref="Thmproofx1.p2.37.m21.1.1.3.2.cmml">t</mi><mo lspace="0em" rspace="0em" id="Thmproofx1.p2.37.m21.1.1.3.1" xref="Thmproofx1.p2.37.m21.1.1.3.1.cmml">​</mo><mi id="Thmproofx1.p2.37.m21.1.1.3.3" xref="Thmproofx1.p2.37.m21.1.1.3.3.cmml">h</mi></mrow></msup><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.37.m21.1b"><apply id="Thmproofx1.p2.37.m21.1.1.cmml" xref="Thmproofx1.p2.37.m21.1.1"><csymbol cd="ambiguous" id="Thmproofx1.p2.37.m21.1.1.1.cmml" xref="Thmproofx1.p2.37.m21.1.1">superscript</csymbol><ci id="Thmproofx1.p2.37.m21.1.1.2.cmml" xref="Thmproofx1.p2.37.m21.1.1.2">𝑖</ci><apply id="Thmproofx1.p2.37.m21.1.1.3.cmml" xref="Thmproofx1.p2.37.m21.1.1.3"><times id="Thmproofx1.p2.37.m21.1.1.3.1.cmml" xref="Thmproofx1.p2.37.m21.1.1.3.1"></times><ci id="Thmproofx1.p2.37.m21.1.1.3.2.cmml" xref="Thmproofx1.p2.37.m21.1.1.3.2">𝑡</ci><ci id="Thmproofx1.p2.37.m21.1.1.3.3.cmml" xref="Thmproofx1.p2.37.m21.1.1.3.3">ℎ</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.37.m21.1c">i^{th}</annotation></semantics></math> output representing the <math id="Thmproofx1.p2.38.m22.1" class="ltx_Math" alttext="i^{th}" display="inline"><semantics id="Thmproofx1.p2.38.m22.1a"><msup id="Thmproofx1.p2.38.m22.1.1" xref="Thmproofx1.p2.38.m22.1.1.cmml"><mi id="Thmproofx1.p2.38.m22.1.1.2" xref="Thmproofx1.p2.38.m22.1.1.2.cmml">i</mi><mrow id="Thmproofx1.p2.38.m22.1.1.3" xref="Thmproofx1.p2.38.m22.1.1.3.cmml"><mi id="Thmproofx1.p2.38.m22.1.1.3.2" xref="Thmproofx1.p2.38.m22.1.1.3.2.cmml">t</mi><mo lspace="0em" rspace="0em" id="Thmproofx1.p2.38.m22.1.1.3.1" xref="Thmproofx1.p2.38.m22.1.1.3.1.cmml">​</mo><mi id="Thmproofx1.p2.38.m22.1.1.3.3" xref="Thmproofx1.p2.38.m22.1.1.3.3.cmml">h</mi></mrow></msup><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.38.m22.1b"><apply id="Thmproofx1.p2.38.m22.1.1.cmml" xref="Thmproofx1.p2.38.m22.1.1"><csymbol cd="ambiguous" id="Thmproofx1.p2.38.m22.1.1.1.cmml" xref="Thmproofx1.p2.38.m22.1.1">superscript</csymbol><ci id="Thmproofx1.p2.38.m22.1.1.2.cmml" xref="Thmproofx1.p2.38.m22.1.1.2">𝑖</ci><apply id="Thmproofx1.p2.38.m22.1.1.3.cmml" xref="Thmproofx1.p2.38.m22.1.1.3"><times id="Thmproofx1.p2.38.m22.1.1.3.1.cmml" xref="Thmproofx1.p2.38.m22.1.1.3.1"></times><ci id="Thmproofx1.p2.38.m22.1.1.3.2.cmml" xref="Thmproofx1.p2.38.m22.1.1.3.2">𝑡</ci><ci id="Thmproofx1.p2.38.m22.1.1.3.3.cmml" xref="Thmproofx1.p2.38.m22.1.1.3.3">ℎ</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.38.m22.1c">i^{th}</annotation></semantics></math> class confidence in the output layer as follows</p>
<table id="Sx2.EGx5" class="ltx_equationgroup ltx_eqn_align ltx_eqn_table">

<tbody id="S4.E10"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S4.E10.m1.1" class="ltx_Math" alttext="\displaystyle\nabla\bm{W}^{i}_{L}" display="inline"><semantics id="S4.E10.m1.1a"><mrow id="S4.E10.m1.1.1" xref="S4.E10.m1.1.1.cmml"><mo rspace="0.167em" id="S4.E10.m1.1.1.1" xref="S4.E10.m1.1.1.1.cmml">∇</mo><msubsup id="S4.E10.m1.1.1.2" xref="S4.E10.m1.1.1.2.cmml"><mi id="S4.E10.m1.1.1.2.2.2" xref="S4.E10.m1.1.1.2.2.2.cmml">𝑾</mi><mi id="S4.E10.m1.1.1.2.3" xref="S4.E10.m1.1.1.2.3.cmml">L</mi><mi id="S4.E10.m1.1.1.2.2.3" xref="S4.E10.m1.1.1.2.2.3.cmml">i</mi></msubsup></mrow><annotation-xml encoding="MathML-Content" id="S4.E10.m1.1b"><apply id="S4.E10.m1.1.1.cmml" xref="S4.E10.m1.1.1"><ci id="S4.E10.m1.1.1.1.cmml" xref="S4.E10.m1.1.1.1">∇</ci><apply id="S4.E10.m1.1.1.2.cmml" xref="S4.E10.m1.1.1.2"><csymbol cd="ambiguous" id="S4.E10.m1.1.1.2.1.cmml" xref="S4.E10.m1.1.1.2">subscript</csymbol><apply id="S4.E10.m1.1.1.2.2.cmml" xref="S4.E10.m1.1.1.2"><csymbol cd="ambiguous" id="S4.E10.m1.1.1.2.2.1.cmml" xref="S4.E10.m1.1.1.2">superscript</csymbol><ci id="S4.E10.m1.1.1.2.2.2.cmml" xref="S4.E10.m1.1.1.2.2.2">𝑾</ci><ci id="S4.E10.m1.1.1.2.2.3.cmml" xref="S4.E10.m1.1.1.2.2.3">𝑖</ci></apply><ci id="S4.E10.m1.1.1.2.3.cmml" xref="S4.E10.m1.1.1.2.3">𝐿</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.E10.m1.1c">\displaystyle\nabla\bm{W}^{i}_{L}</annotation></semantics></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="S4.E10.m2.4" class="ltx_Math" alttext="\displaystyle=\frac{\partial l(\bm{X},C)}{\partial\bm{W}^{i}_{L}}=\frac{\partial l(\bm{X},C)}{\partial y_{i}}\cdot\frac{\partial y_{i}}{\partial\bm{W}^{i}_{L}}" display="inline"><semantics id="S4.E10.m2.4a"><mrow id="S4.E10.m2.4.5" xref="S4.E10.m2.4.5.cmml"><mi id="S4.E10.m2.4.5.2" xref="S4.E10.m2.4.5.2.cmml"></mi><mo id="S4.E10.m2.4.5.3" xref="S4.E10.m2.4.5.3.cmml">=</mo><mstyle displaystyle="true" id="S4.E10.m2.2.2" xref="S4.E10.m2.2.2.cmml"><mfrac id="S4.E10.m2.2.2a" xref="S4.E10.m2.2.2.cmml"><mrow id="S4.E10.m2.2.2.2" xref="S4.E10.m2.2.2.2.cmml"><mo rspace="0em" id="S4.E10.m2.2.2.2.3" xref="S4.E10.m2.2.2.2.3.cmml">∂</mo><mrow id="S4.E10.m2.2.2.2.4" xref="S4.E10.m2.2.2.2.4.cmml"><mi id="S4.E10.m2.2.2.2.4.2" xref="S4.E10.m2.2.2.2.4.2.cmml">l</mi><mo lspace="0em" rspace="0em" id="S4.E10.m2.2.2.2.4.1" xref="S4.E10.m2.2.2.2.4.1.cmml">​</mo><mrow id="S4.E10.m2.2.2.2.4.3.2" xref="S4.E10.m2.2.2.2.4.3.1.cmml"><mo stretchy="false" id="S4.E10.m2.2.2.2.4.3.2.1" xref="S4.E10.m2.2.2.2.4.3.1.cmml">(</mo><mi id="S4.E10.m2.1.1.1.1" xref="S4.E10.m2.1.1.1.1.cmml">𝑿</mi><mo id="S4.E10.m2.2.2.2.4.3.2.2" xref="S4.E10.m2.2.2.2.4.3.1.cmml">,</mo><mi id="S4.E10.m2.2.2.2.2" xref="S4.E10.m2.2.2.2.2.cmml">C</mi><mo stretchy="false" id="S4.E10.m2.2.2.2.4.3.2.3" xref="S4.E10.m2.2.2.2.4.3.1.cmml">)</mo></mrow></mrow></mrow><mrow id="S4.E10.m2.2.2.4" xref="S4.E10.m2.2.2.4.cmml"><mo rspace="0em" id="S4.E10.m2.2.2.4.1" xref="S4.E10.m2.2.2.4.1.cmml">∂</mo><msubsup id="S4.E10.m2.2.2.4.2" xref="S4.E10.m2.2.2.4.2.cmml"><mi id="S4.E10.m2.2.2.4.2.2.2" xref="S4.E10.m2.2.2.4.2.2.2.cmml">𝑾</mi><mi id="S4.E10.m2.2.2.4.2.3" xref="S4.E10.m2.2.2.4.2.3.cmml">L</mi><mi id="S4.E10.m2.2.2.4.2.2.3" xref="S4.E10.m2.2.2.4.2.2.3.cmml">i</mi></msubsup></mrow></mfrac></mstyle><mo id="S4.E10.m2.4.5.4" xref="S4.E10.m2.4.5.4.cmml">=</mo><mrow id="S4.E10.m2.4.5.5" xref="S4.E10.m2.4.5.5.cmml"><mstyle displaystyle="true" id="S4.E10.m2.4.4" xref="S4.E10.m2.4.4.cmml"><mfrac id="S4.E10.m2.4.4a" xref="S4.E10.m2.4.4.cmml"><mrow id="S4.E10.m2.4.4.2" xref="S4.E10.m2.4.4.2.cmml"><mo rspace="0em" id="S4.E10.m2.4.4.2.3" xref="S4.E10.m2.4.4.2.3.cmml">∂</mo><mrow id="S4.E10.m2.4.4.2.4" xref="S4.E10.m2.4.4.2.4.cmml"><mi id="S4.E10.m2.4.4.2.4.2" xref="S4.E10.m2.4.4.2.4.2.cmml">l</mi><mo lspace="0em" rspace="0em" id="S4.E10.m2.4.4.2.4.1" xref="S4.E10.m2.4.4.2.4.1.cmml">​</mo><mrow id="S4.E10.m2.4.4.2.4.3.2" xref="S4.E10.m2.4.4.2.4.3.1.cmml"><mo stretchy="false" id="S4.E10.m2.4.4.2.4.3.2.1" xref="S4.E10.m2.4.4.2.4.3.1.cmml">(</mo><mi id="S4.E10.m2.3.3.1.1" xref="S4.E10.m2.3.3.1.1.cmml">𝑿</mi><mo id="S4.E10.m2.4.4.2.4.3.2.2" xref="S4.E10.m2.4.4.2.4.3.1.cmml">,</mo><mi id="S4.E10.m2.4.4.2.2" xref="S4.E10.m2.4.4.2.2.cmml">C</mi><mo stretchy="false" id="S4.E10.m2.4.4.2.4.3.2.3" xref="S4.E10.m2.4.4.2.4.3.1.cmml">)</mo></mrow></mrow></mrow><mrow id="S4.E10.m2.4.4.4" xref="S4.E10.m2.4.4.4.cmml"><mo rspace="0em" id="S4.E10.m2.4.4.4.1" xref="S4.E10.m2.4.4.4.1.cmml">∂</mo><msub id="S4.E10.m2.4.4.4.2" xref="S4.E10.m2.4.4.4.2.cmml"><mi id="S4.E10.m2.4.4.4.2.2" xref="S4.E10.m2.4.4.4.2.2.cmml">y</mi><mi id="S4.E10.m2.4.4.4.2.3" xref="S4.E10.m2.4.4.4.2.3.cmml">i</mi></msub></mrow></mfrac></mstyle><mo lspace="0.222em" rspace="0.222em" id="S4.E10.m2.4.5.5.1" xref="S4.E10.m2.4.5.5.1.cmml">⋅</mo><mstyle displaystyle="true" id="S4.E10.m2.4.5.5.2" xref="S4.E10.m2.4.5.5.2.cmml"><mfrac id="S4.E10.m2.4.5.5.2a" xref="S4.E10.m2.4.5.5.2.cmml"><mrow id="S4.E10.m2.4.5.5.2.2" xref="S4.E10.m2.4.5.5.2.2.cmml"><mo rspace="0em" id="S4.E10.m2.4.5.5.2.2.1" xref="S4.E10.m2.4.5.5.2.2.1.cmml">∂</mo><msub id="S4.E10.m2.4.5.5.2.2.2" xref="S4.E10.m2.4.5.5.2.2.2.cmml"><mi id="S4.E10.m2.4.5.5.2.2.2.2" xref="S4.E10.m2.4.5.5.2.2.2.2.cmml">y</mi><mi id="S4.E10.m2.4.5.5.2.2.2.3" xref="S4.E10.m2.4.5.5.2.2.2.3.cmml">i</mi></msub></mrow><mrow id="S4.E10.m2.4.5.5.2.3" xref="S4.E10.m2.4.5.5.2.3.cmml"><mo rspace="0em" id="S4.E10.m2.4.5.5.2.3.1" xref="S4.E10.m2.4.5.5.2.3.1.cmml">∂</mo><msubsup id="S4.E10.m2.4.5.5.2.3.2" xref="S4.E10.m2.4.5.5.2.3.2.cmml"><mi id="S4.E10.m2.4.5.5.2.3.2.2.2" xref="S4.E10.m2.4.5.5.2.3.2.2.2.cmml">𝑾</mi><mi id="S4.E10.m2.4.5.5.2.3.2.3" xref="S4.E10.m2.4.5.5.2.3.2.3.cmml">L</mi><mi id="S4.E10.m2.4.5.5.2.3.2.2.3" xref="S4.E10.m2.4.5.5.2.3.2.2.3.cmml">i</mi></msubsup></mrow></mfrac></mstyle></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.E10.m2.4b"><apply id="S4.E10.m2.4.5.cmml" xref="S4.E10.m2.4.5"><and id="S4.E10.m2.4.5a.cmml" xref="S4.E10.m2.4.5"></and><apply id="S4.E10.m2.4.5b.cmml" xref="S4.E10.m2.4.5"><eq id="S4.E10.m2.4.5.3.cmml" xref="S4.E10.m2.4.5.3"></eq><csymbol cd="latexml" id="S4.E10.m2.4.5.2.cmml" xref="S4.E10.m2.4.5.2">absent</csymbol><apply id="S4.E10.m2.2.2.cmml" xref="S4.E10.m2.2.2"><divide id="S4.E10.m2.2.2.3.cmml" xref="S4.E10.m2.2.2"></divide><apply id="S4.E10.m2.2.2.2.cmml" xref="S4.E10.m2.2.2.2"><partialdiff id="S4.E10.m2.2.2.2.3.cmml" xref="S4.E10.m2.2.2.2.3"></partialdiff><apply id="S4.E10.m2.2.2.2.4.cmml" xref="S4.E10.m2.2.2.2.4"><times id="S4.E10.m2.2.2.2.4.1.cmml" xref="S4.E10.m2.2.2.2.4.1"></times><ci id="S4.E10.m2.2.2.2.4.2.cmml" xref="S4.E10.m2.2.2.2.4.2">𝑙</ci><interval closure="open" id="S4.E10.m2.2.2.2.4.3.1.cmml" xref="S4.E10.m2.2.2.2.4.3.2"><ci id="S4.E10.m2.1.1.1.1.cmml" xref="S4.E10.m2.1.1.1.1">𝑿</ci><ci id="S4.E10.m2.2.2.2.2.cmml" xref="S4.E10.m2.2.2.2.2">𝐶</ci></interval></apply></apply><apply id="S4.E10.m2.2.2.4.cmml" xref="S4.E10.m2.2.2.4"><partialdiff id="S4.E10.m2.2.2.4.1.cmml" xref="S4.E10.m2.2.2.4.1"></partialdiff><apply id="S4.E10.m2.2.2.4.2.cmml" xref="S4.E10.m2.2.2.4.2"><csymbol cd="ambiguous" id="S4.E10.m2.2.2.4.2.1.cmml" xref="S4.E10.m2.2.2.4.2">subscript</csymbol><apply id="S4.E10.m2.2.2.4.2.2.cmml" xref="S4.E10.m2.2.2.4.2"><csymbol cd="ambiguous" id="S4.E10.m2.2.2.4.2.2.1.cmml" xref="S4.E10.m2.2.2.4.2">superscript</csymbol><ci id="S4.E10.m2.2.2.4.2.2.2.cmml" xref="S4.E10.m2.2.2.4.2.2.2">𝑾</ci><ci id="S4.E10.m2.2.2.4.2.2.3.cmml" xref="S4.E10.m2.2.2.4.2.2.3">𝑖</ci></apply><ci id="S4.E10.m2.2.2.4.2.3.cmml" xref="S4.E10.m2.2.2.4.2.3">𝐿</ci></apply></apply></apply></apply><apply id="S4.E10.m2.4.5c.cmml" xref="S4.E10.m2.4.5"><eq id="S4.E10.m2.4.5.4.cmml" xref="S4.E10.m2.4.5.4"></eq><share href="#S4.E10.m2.2.2.cmml" id="S4.E10.m2.4.5d.cmml" xref="S4.E10.m2.4.5"></share><apply id="S4.E10.m2.4.5.5.cmml" xref="S4.E10.m2.4.5.5"><ci id="S4.E10.m2.4.5.5.1.cmml" xref="S4.E10.m2.4.5.5.1">⋅</ci><apply id="S4.E10.m2.4.4.cmml" xref="S4.E10.m2.4.4"><divide id="S4.E10.m2.4.4.3.cmml" xref="S4.E10.m2.4.4"></divide><apply id="S4.E10.m2.4.4.2.cmml" xref="S4.E10.m2.4.4.2"><partialdiff id="S4.E10.m2.4.4.2.3.cmml" xref="S4.E10.m2.4.4.2.3"></partialdiff><apply id="S4.E10.m2.4.4.2.4.cmml" xref="S4.E10.m2.4.4.2.4"><times id="S4.E10.m2.4.4.2.4.1.cmml" xref="S4.E10.m2.4.4.2.4.1"></times><ci id="S4.E10.m2.4.4.2.4.2.cmml" xref="S4.E10.m2.4.4.2.4.2">𝑙</ci><interval closure="open" id="S4.E10.m2.4.4.2.4.3.1.cmml" xref="S4.E10.m2.4.4.2.4.3.2"><ci id="S4.E10.m2.3.3.1.1.cmml" xref="S4.E10.m2.3.3.1.1">𝑿</ci><ci id="S4.E10.m2.4.4.2.2.cmml" xref="S4.E10.m2.4.4.2.2">𝐶</ci></interval></apply></apply><apply id="S4.E10.m2.4.4.4.cmml" xref="S4.E10.m2.4.4.4"><partialdiff id="S4.E10.m2.4.4.4.1.cmml" xref="S4.E10.m2.4.4.4.1"></partialdiff><apply id="S4.E10.m2.4.4.4.2.cmml" xref="S4.E10.m2.4.4.4.2"><csymbol cd="ambiguous" id="S4.E10.m2.4.4.4.2.1.cmml" xref="S4.E10.m2.4.4.4.2">subscript</csymbol><ci id="S4.E10.m2.4.4.4.2.2.cmml" xref="S4.E10.m2.4.4.4.2.2">𝑦</ci><ci id="S4.E10.m2.4.4.4.2.3.cmml" xref="S4.E10.m2.4.4.4.2.3">𝑖</ci></apply></apply></apply><apply id="S4.E10.m2.4.5.5.2.cmml" xref="S4.E10.m2.4.5.5.2"><divide id="S4.E10.m2.4.5.5.2.1.cmml" xref="S4.E10.m2.4.5.5.2"></divide><apply id="S4.E10.m2.4.5.5.2.2.cmml" xref="S4.E10.m2.4.5.5.2.2"><partialdiff id="S4.E10.m2.4.5.5.2.2.1.cmml" xref="S4.E10.m2.4.5.5.2.2.1"></partialdiff><apply id="S4.E10.m2.4.5.5.2.2.2.cmml" xref="S4.E10.m2.4.5.5.2.2.2"><csymbol cd="ambiguous" id="S4.E10.m2.4.5.5.2.2.2.1.cmml" xref="S4.E10.m2.4.5.5.2.2.2">subscript</csymbol><ci id="S4.E10.m2.4.5.5.2.2.2.2.cmml" xref="S4.E10.m2.4.5.5.2.2.2.2">𝑦</ci><ci id="S4.E10.m2.4.5.5.2.2.2.3.cmml" xref="S4.E10.m2.4.5.5.2.2.2.3">𝑖</ci></apply></apply><apply id="S4.E10.m2.4.5.5.2.3.cmml" xref="S4.E10.m2.4.5.5.2.3"><partialdiff id="S4.E10.m2.4.5.5.2.3.1.cmml" xref="S4.E10.m2.4.5.5.2.3.1"></partialdiff><apply id="S4.E10.m2.4.5.5.2.3.2.cmml" xref="S4.E10.m2.4.5.5.2.3.2"><csymbol cd="ambiguous" id="S4.E10.m2.4.5.5.2.3.2.1.cmml" xref="S4.E10.m2.4.5.5.2.3.2">subscript</csymbol><apply id="S4.E10.m2.4.5.5.2.3.2.2.cmml" xref="S4.E10.m2.4.5.5.2.3.2"><csymbol cd="ambiguous" id="S4.E10.m2.4.5.5.2.3.2.2.1.cmml" xref="S4.E10.m2.4.5.5.2.3.2">superscript</csymbol><ci id="S4.E10.m2.4.5.5.2.3.2.2.2.cmml" xref="S4.E10.m2.4.5.5.2.3.2.2.2">𝑾</ci><ci id="S4.E10.m2.4.5.5.2.3.2.2.3.cmml" xref="S4.E10.m2.4.5.5.2.3.2.2.3">𝑖</ci></apply><ci id="S4.E10.m2.4.5.5.2.3.2.3.cmml" xref="S4.E10.m2.4.5.5.2.3.2.3">𝐿</ci></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.E10.m2.4c">\displaystyle=\frac{\partial l(\bm{X},C)}{\partial\bm{W}^{i}_{L}}=\frac{\partial l(\bm{X},C)}{\partial y_{i}}\cdot\frac{\partial y_{i}}{\partial\bm{W}^{i}_{L}}</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(10)</span></td>
</tr></tbody>
<tbody id="S4.E11"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_eqn_cell"></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="S4.E11.m1.1" class="ltx_Math" alttext="\displaystyle=d_{i}\cdot\frac{\partial({\bm{W}^{i}_{L}}^{T}\bm{a}_{L-1}+b^{i}_{L})}{\partial\bm{W}^{i}_{L}}" display="inline"><semantics id="S4.E11.m1.1a"><mrow id="S4.E11.m1.1.2" xref="S4.E11.m1.1.2.cmml"><mi id="S4.E11.m1.1.2.2" xref="S4.E11.m1.1.2.2.cmml"></mi><mo id="S4.E11.m1.1.2.1" xref="S4.E11.m1.1.2.1.cmml">=</mo><mrow id="S4.E11.m1.1.2.3" xref="S4.E11.m1.1.2.3.cmml"><msub id="S4.E11.m1.1.2.3.2" xref="S4.E11.m1.1.2.3.2.cmml"><mi id="S4.E11.m1.1.2.3.2.2" xref="S4.E11.m1.1.2.3.2.2.cmml">d</mi><mi id="S4.E11.m1.1.2.3.2.3" xref="S4.E11.m1.1.2.3.2.3.cmml">i</mi></msub><mo lspace="0.222em" rspace="0.222em" id="S4.E11.m1.1.2.3.1" xref="S4.E11.m1.1.2.3.1.cmml">⋅</mo><mstyle displaystyle="true" id="S4.E11.m1.1.1" xref="S4.E11.m1.1.1.cmml"><mfrac id="S4.E11.m1.1.1a" xref="S4.E11.m1.1.1.cmml"><mrow id="S4.E11.m1.1.1.1" xref="S4.E11.m1.1.1.1.cmml"><mo rspace="0em" id="S4.E11.m1.1.1.1.2" xref="S4.E11.m1.1.1.1.2.cmml">∂</mo><mrow id="S4.E11.m1.1.1.1.1.1" xref="S4.E11.m1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S4.E11.m1.1.1.1.1.1.2" xref="S4.E11.m1.1.1.1.1.1.1.cmml">(</mo><mrow id="S4.E11.m1.1.1.1.1.1.1" xref="S4.E11.m1.1.1.1.1.1.1.cmml"><mrow id="S4.E11.m1.1.1.1.1.1.1.2" xref="S4.E11.m1.1.1.1.1.1.1.2.cmml"><mmultiscripts id="S4.E11.m1.1.1.1.1.1.1.2.2" xref="S4.E11.m1.1.1.1.1.1.1.2.2.cmml"><mi id="S4.E11.m1.1.1.1.1.1.1.2.2.2.2.2" xref="S4.E11.m1.1.1.1.1.1.1.2.2.2.2.2.cmml">𝑾</mi><mi id="S4.E11.m1.1.1.1.1.1.1.2.2.2.3" xref="S4.E11.m1.1.1.1.1.1.1.2.2.2.3.cmml">L</mi><mi id="S4.E11.m1.1.1.1.1.1.1.2.2.2.2.3" xref="S4.E11.m1.1.1.1.1.1.1.2.2.2.2.3.cmml">i</mi><mrow id="S4.E11.m1.1.1.1.1.1.1.2.2a" xref="S4.E11.m1.1.1.1.1.1.1.2.2.cmml"></mrow><mi id="S4.E11.m1.1.1.1.1.1.1.2.2.3" xref="S4.E11.m1.1.1.1.1.1.1.2.2.3.cmml">T</mi></mmultiscripts><mo lspace="0em" rspace="0em" id="S4.E11.m1.1.1.1.1.1.1.2.1" xref="S4.E11.m1.1.1.1.1.1.1.2.1.cmml">​</mo><msub id="S4.E11.m1.1.1.1.1.1.1.2.3" xref="S4.E11.m1.1.1.1.1.1.1.2.3.cmml"><mi id="S4.E11.m1.1.1.1.1.1.1.2.3.2" xref="S4.E11.m1.1.1.1.1.1.1.2.3.2.cmml">𝒂</mi><mrow id="S4.E11.m1.1.1.1.1.1.1.2.3.3" xref="S4.E11.m1.1.1.1.1.1.1.2.3.3.cmml"><mi id="S4.E11.m1.1.1.1.1.1.1.2.3.3.2" xref="S4.E11.m1.1.1.1.1.1.1.2.3.3.2.cmml">L</mi><mo id="S4.E11.m1.1.1.1.1.1.1.2.3.3.1" xref="S4.E11.m1.1.1.1.1.1.1.2.3.3.1.cmml">−</mo><mn id="S4.E11.m1.1.1.1.1.1.1.2.3.3.3" xref="S4.E11.m1.1.1.1.1.1.1.2.3.3.3.cmml">1</mn></mrow></msub></mrow><mo id="S4.E11.m1.1.1.1.1.1.1.1" xref="S4.E11.m1.1.1.1.1.1.1.1.cmml">+</mo><msubsup id="S4.E11.m1.1.1.1.1.1.1.3" xref="S4.E11.m1.1.1.1.1.1.1.3.cmml"><mi id="S4.E11.m1.1.1.1.1.1.1.3.2.2" xref="S4.E11.m1.1.1.1.1.1.1.3.2.2.cmml">b</mi><mi id="S4.E11.m1.1.1.1.1.1.1.3.3" xref="S4.E11.m1.1.1.1.1.1.1.3.3.cmml">L</mi><mi id="S4.E11.m1.1.1.1.1.1.1.3.2.3" xref="S4.E11.m1.1.1.1.1.1.1.3.2.3.cmml">i</mi></msubsup></mrow><mo stretchy="false" id="S4.E11.m1.1.1.1.1.1.3" xref="S4.E11.m1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mrow id="S4.E11.m1.1.1.3" xref="S4.E11.m1.1.1.3.cmml"><mo rspace="0em" id="S4.E11.m1.1.1.3.1" xref="S4.E11.m1.1.1.3.1.cmml">∂</mo><msubsup id="S4.E11.m1.1.1.3.2" xref="S4.E11.m1.1.1.3.2.cmml"><mi id="S4.E11.m1.1.1.3.2.2.2" xref="S4.E11.m1.1.1.3.2.2.2.cmml">𝑾</mi><mi id="S4.E11.m1.1.1.3.2.3" xref="S4.E11.m1.1.1.3.2.3.cmml">L</mi><mi id="S4.E11.m1.1.1.3.2.2.3" xref="S4.E11.m1.1.1.3.2.2.3.cmml">i</mi></msubsup></mrow></mfrac></mstyle></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.E11.m1.1b"><apply id="S4.E11.m1.1.2.cmml" xref="S4.E11.m1.1.2"><eq id="S4.E11.m1.1.2.1.cmml" xref="S4.E11.m1.1.2.1"></eq><csymbol cd="latexml" id="S4.E11.m1.1.2.2.cmml" xref="S4.E11.m1.1.2.2">absent</csymbol><apply id="S4.E11.m1.1.2.3.cmml" xref="S4.E11.m1.1.2.3"><ci id="S4.E11.m1.1.2.3.1.cmml" xref="S4.E11.m1.1.2.3.1">⋅</ci><apply id="S4.E11.m1.1.2.3.2.cmml" xref="S4.E11.m1.1.2.3.2"><csymbol cd="ambiguous" id="S4.E11.m1.1.2.3.2.1.cmml" xref="S4.E11.m1.1.2.3.2">subscript</csymbol><ci id="S4.E11.m1.1.2.3.2.2.cmml" xref="S4.E11.m1.1.2.3.2.2">𝑑</ci><ci id="S4.E11.m1.1.2.3.2.3.cmml" xref="S4.E11.m1.1.2.3.2.3">𝑖</ci></apply><apply id="S4.E11.m1.1.1.cmml" xref="S4.E11.m1.1.1"><divide id="S4.E11.m1.1.1.2.cmml" xref="S4.E11.m1.1.1"></divide><apply id="S4.E11.m1.1.1.1.cmml" xref="S4.E11.m1.1.1.1"><partialdiff id="S4.E11.m1.1.1.1.2.cmml" xref="S4.E11.m1.1.1.1.2"></partialdiff><apply id="S4.E11.m1.1.1.1.1.1.1.cmml" xref="S4.E11.m1.1.1.1.1.1"><plus id="S4.E11.m1.1.1.1.1.1.1.1.cmml" xref="S4.E11.m1.1.1.1.1.1.1.1"></plus><apply id="S4.E11.m1.1.1.1.1.1.1.2.cmml" xref="S4.E11.m1.1.1.1.1.1.1.2"><times id="S4.E11.m1.1.1.1.1.1.1.2.1.cmml" xref="S4.E11.m1.1.1.1.1.1.1.2.1"></times><apply id="S4.E11.m1.1.1.1.1.1.1.2.2.cmml" xref="S4.E11.m1.1.1.1.1.1.1.2.2"><csymbol cd="ambiguous" id="S4.E11.m1.1.1.1.1.1.1.2.2.1.cmml" xref="S4.E11.m1.1.1.1.1.1.1.2.2">superscript</csymbol><apply id="S4.E11.m1.1.1.1.1.1.1.2.2.2.cmml" xref="S4.E11.m1.1.1.1.1.1.1.2.2"><csymbol cd="ambiguous" id="S4.E11.m1.1.1.1.1.1.1.2.2.2.1.cmml" xref="S4.E11.m1.1.1.1.1.1.1.2.2">subscript</csymbol><apply id="S4.E11.m1.1.1.1.1.1.1.2.2.2.2.cmml" xref="S4.E11.m1.1.1.1.1.1.1.2.2"><csymbol cd="ambiguous" id="S4.E11.m1.1.1.1.1.1.1.2.2.2.2.1.cmml" xref="S4.E11.m1.1.1.1.1.1.1.2.2">superscript</csymbol><ci id="S4.E11.m1.1.1.1.1.1.1.2.2.2.2.2.cmml" xref="S4.E11.m1.1.1.1.1.1.1.2.2.2.2.2">𝑾</ci><ci id="S4.E11.m1.1.1.1.1.1.1.2.2.2.2.3.cmml" xref="S4.E11.m1.1.1.1.1.1.1.2.2.2.2.3">𝑖</ci></apply><ci id="S4.E11.m1.1.1.1.1.1.1.2.2.2.3.cmml" xref="S4.E11.m1.1.1.1.1.1.1.2.2.2.3">𝐿</ci></apply><ci id="S4.E11.m1.1.1.1.1.1.1.2.2.3.cmml" xref="S4.E11.m1.1.1.1.1.1.1.2.2.3">𝑇</ci></apply><apply id="S4.E11.m1.1.1.1.1.1.1.2.3.cmml" xref="S4.E11.m1.1.1.1.1.1.1.2.3"><csymbol cd="ambiguous" id="S4.E11.m1.1.1.1.1.1.1.2.3.1.cmml" xref="S4.E11.m1.1.1.1.1.1.1.2.3">subscript</csymbol><ci id="S4.E11.m1.1.1.1.1.1.1.2.3.2.cmml" xref="S4.E11.m1.1.1.1.1.1.1.2.3.2">𝒂</ci><apply id="S4.E11.m1.1.1.1.1.1.1.2.3.3.cmml" xref="S4.E11.m1.1.1.1.1.1.1.2.3.3"><minus id="S4.E11.m1.1.1.1.1.1.1.2.3.3.1.cmml" xref="S4.E11.m1.1.1.1.1.1.1.2.3.3.1"></minus><ci id="S4.E11.m1.1.1.1.1.1.1.2.3.3.2.cmml" xref="S4.E11.m1.1.1.1.1.1.1.2.3.3.2">𝐿</ci><cn type="integer" id="S4.E11.m1.1.1.1.1.1.1.2.3.3.3.cmml" xref="S4.E11.m1.1.1.1.1.1.1.2.3.3.3">1</cn></apply></apply></apply><apply id="S4.E11.m1.1.1.1.1.1.1.3.cmml" xref="S4.E11.m1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S4.E11.m1.1.1.1.1.1.1.3.1.cmml" xref="S4.E11.m1.1.1.1.1.1.1.3">subscript</csymbol><apply id="S4.E11.m1.1.1.1.1.1.1.3.2.cmml" xref="S4.E11.m1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S4.E11.m1.1.1.1.1.1.1.3.2.1.cmml" xref="S4.E11.m1.1.1.1.1.1.1.3">superscript</csymbol><ci id="S4.E11.m1.1.1.1.1.1.1.3.2.2.cmml" xref="S4.E11.m1.1.1.1.1.1.1.3.2.2">𝑏</ci><ci id="S4.E11.m1.1.1.1.1.1.1.3.2.3.cmml" xref="S4.E11.m1.1.1.1.1.1.1.3.2.3">𝑖</ci></apply><ci id="S4.E11.m1.1.1.1.1.1.1.3.3.cmml" xref="S4.E11.m1.1.1.1.1.1.1.3.3">𝐿</ci></apply></apply></apply><apply id="S4.E11.m1.1.1.3.cmml" xref="S4.E11.m1.1.1.3"><partialdiff id="S4.E11.m1.1.1.3.1.cmml" xref="S4.E11.m1.1.1.3.1"></partialdiff><apply id="S4.E11.m1.1.1.3.2.cmml" xref="S4.E11.m1.1.1.3.2"><csymbol cd="ambiguous" id="S4.E11.m1.1.1.3.2.1.cmml" xref="S4.E11.m1.1.1.3.2">subscript</csymbol><apply id="S4.E11.m1.1.1.3.2.2.cmml" xref="S4.E11.m1.1.1.3.2"><csymbol cd="ambiguous" id="S4.E11.m1.1.1.3.2.2.1.cmml" xref="S4.E11.m1.1.1.3.2">superscript</csymbol><ci id="S4.E11.m1.1.1.3.2.2.2.cmml" xref="S4.E11.m1.1.1.3.2.2.2">𝑾</ci><ci id="S4.E11.m1.1.1.3.2.2.3.cmml" xref="S4.E11.m1.1.1.3.2.2.3">𝑖</ci></apply><ci id="S4.E11.m1.1.1.3.2.3.cmml" xref="S4.E11.m1.1.1.3.2.3">𝐿</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.E11.m1.1c">\displaystyle=d_{i}\cdot\frac{\partial({\bm{W}^{i}_{L}}^{T}\bm{a}_{L-1}+b^{i}_{L})}{\partial\bm{W}^{i}_{L}}</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(11)</span></td>
</tr></tbody>
<tbody id="S4.E12"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_eqn_cell"></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="S4.E12.m1.1" class="ltx_Math" alttext="\displaystyle=d_{i}\cdot\bm{a}_{L-1}\,," display="inline"><semantics id="S4.E12.m1.1a"><mrow id="S4.E12.m1.1.1.1" xref="S4.E12.m1.1.1.1.1.cmml"><mrow id="S4.E12.m1.1.1.1.1" xref="S4.E12.m1.1.1.1.1.cmml"><mi id="S4.E12.m1.1.1.1.1.2" xref="S4.E12.m1.1.1.1.1.2.cmml"></mi><mo id="S4.E12.m1.1.1.1.1.1" xref="S4.E12.m1.1.1.1.1.1.cmml">=</mo><mrow id="S4.E12.m1.1.1.1.1.3" xref="S4.E12.m1.1.1.1.1.3.cmml"><msub id="S4.E12.m1.1.1.1.1.3.2" xref="S4.E12.m1.1.1.1.1.3.2.cmml"><mi id="S4.E12.m1.1.1.1.1.3.2.2" xref="S4.E12.m1.1.1.1.1.3.2.2.cmml">d</mi><mi id="S4.E12.m1.1.1.1.1.3.2.3" xref="S4.E12.m1.1.1.1.1.3.2.3.cmml">i</mi></msub><mo lspace="0.222em" rspace="0.222em" id="S4.E12.m1.1.1.1.1.3.1" xref="S4.E12.m1.1.1.1.1.3.1.cmml">⋅</mo><msub id="S4.E12.m1.1.1.1.1.3.3" xref="S4.E12.m1.1.1.1.1.3.3.cmml"><mi id="S4.E12.m1.1.1.1.1.3.3.2" xref="S4.E12.m1.1.1.1.1.3.3.2.cmml">𝒂</mi><mrow id="S4.E12.m1.1.1.1.1.3.3.3" xref="S4.E12.m1.1.1.1.1.3.3.3.cmml"><mi id="S4.E12.m1.1.1.1.1.3.3.3.2" xref="S4.E12.m1.1.1.1.1.3.3.3.2.cmml">L</mi><mo id="S4.E12.m1.1.1.1.1.3.3.3.1" xref="S4.E12.m1.1.1.1.1.3.3.3.1.cmml">−</mo><mn id="S4.E12.m1.1.1.1.1.3.3.3.3" xref="S4.E12.m1.1.1.1.1.3.3.3.3.cmml">1</mn></mrow></msub></mrow></mrow><mo id="S4.E12.m1.1.1.1.2" xref="S4.E12.m1.1.1.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.E12.m1.1b"><apply id="S4.E12.m1.1.1.1.1.cmml" xref="S4.E12.m1.1.1.1"><eq id="S4.E12.m1.1.1.1.1.1.cmml" xref="S4.E12.m1.1.1.1.1.1"></eq><csymbol cd="latexml" id="S4.E12.m1.1.1.1.1.2.cmml" xref="S4.E12.m1.1.1.1.1.2">absent</csymbol><apply id="S4.E12.m1.1.1.1.1.3.cmml" xref="S4.E12.m1.1.1.1.1.3"><ci id="S4.E12.m1.1.1.1.1.3.1.cmml" xref="S4.E12.m1.1.1.1.1.3.1">⋅</ci><apply id="S4.E12.m1.1.1.1.1.3.2.cmml" xref="S4.E12.m1.1.1.1.1.3.2"><csymbol cd="ambiguous" id="S4.E12.m1.1.1.1.1.3.2.1.cmml" xref="S4.E12.m1.1.1.1.1.3.2">subscript</csymbol><ci id="S4.E12.m1.1.1.1.1.3.2.2.cmml" xref="S4.E12.m1.1.1.1.1.3.2.2">𝑑</ci><ci id="S4.E12.m1.1.1.1.1.3.2.3.cmml" xref="S4.E12.m1.1.1.1.1.3.2.3">𝑖</ci></apply><apply id="S4.E12.m1.1.1.1.1.3.3.cmml" xref="S4.E12.m1.1.1.1.1.3.3"><csymbol cd="ambiguous" id="S4.E12.m1.1.1.1.1.3.3.1.cmml" xref="S4.E12.m1.1.1.1.1.3.3">subscript</csymbol><ci id="S4.E12.m1.1.1.1.1.3.3.2.cmml" xref="S4.E12.m1.1.1.1.1.3.3.2">𝒂</ci><apply id="S4.E12.m1.1.1.1.1.3.3.3.cmml" xref="S4.E12.m1.1.1.1.1.3.3.3"><minus id="S4.E12.m1.1.1.1.1.3.3.3.1.cmml" xref="S4.E12.m1.1.1.1.1.3.3.3.1"></minus><ci id="S4.E12.m1.1.1.1.1.3.3.3.2.cmml" xref="S4.E12.m1.1.1.1.1.3.3.3.2">𝐿</ci><cn type="integer" id="S4.E12.m1.1.1.1.1.3.3.3.3.cmml" xref="S4.E12.m1.1.1.1.1.3.3.3.3">1</cn></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.E12.m1.1c">\displaystyle=d_{i}\cdot\bm{a}_{L-1}\,,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(12)</span></td>
</tr></tbody>
</table>
<p id="Thmproofx1.p2.48" class="ltx_p">where <math id="Thmproofx1.p2.39.m1.1" class="ltx_Math" alttext="\bm{y}=\bm{a_{L}}" display="inline"><semantics id="Thmproofx1.p2.39.m1.1a"><mrow id="Thmproofx1.p2.39.m1.1.1" xref="Thmproofx1.p2.39.m1.1.1.cmml"><mi id="Thmproofx1.p2.39.m1.1.1.2" xref="Thmproofx1.p2.39.m1.1.1.2.cmml">𝒚</mi><mo id="Thmproofx1.p2.39.m1.1.1.1" xref="Thmproofx1.p2.39.m1.1.1.1.cmml">=</mo><msub id="Thmproofx1.p2.39.m1.1.1.3" xref="Thmproofx1.p2.39.m1.1.1.3.cmml"><mi id="Thmproofx1.p2.39.m1.1.1.3.2" xref="Thmproofx1.p2.39.m1.1.1.3.2.cmml">𝒂</mi><mi id="Thmproofx1.p2.39.m1.1.1.3.3" xref="Thmproofx1.p2.39.m1.1.1.3.3.cmml">𝑳</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.39.m1.1b"><apply id="Thmproofx1.p2.39.m1.1.1.cmml" xref="Thmproofx1.p2.39.m1.1.1"><eq id="Thmproofx1.p2.39.m1.1.1.1.cmml" xref="Thmproofx1.p2.39.m1.1.1.1"></eq><ci id="Thmproofx1.p2.39.m1.1.1.2.cmml" xref="Thmproofx1.p2.39.m1.1.1.2">𝒚</ci><apply id="Thmproofx1.p2.39.m1.1.1.3.cmml" xref="Thmproofx1.p2.39.m1.1.1.3"><csymbol cd="ambiguous" id="Thmproofx1.p2.39.m1.1.1.3.1.cmml" xref="Thmproofx1.p2.39.m1.1.1.3">subscript</csymbol><ci id="Thmproofx1.p2.39.m1.1.1.3.2.cmml" xref="Thmproofx1.p2.39.m1.1.1.3.2">𝒂</ci><ci id="Thmproofx1.p2.39.m1.1.1.3.3.cmml" xref="Thmproofx1.p2.39.m1.1.1.3.3">𝑳</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.39.m1.1c">\bm{y}=\bm{a_{L}}</annotation></semantics></math> is the activation function
of the output layer, <math id="Thmproofx1.p2.40.m2.1" class="ltx_Math" alttext="b^{i}_{L}" display="inline"><semantics id="Thmproofx1.p2.40.m2.1a"><msubsup id="Thmproofx1.p2.40.m2.1.1" xref="Thmproofx1.p2.40.m2.1.1.cmml"><mi id="Thmproofx1.p2.40.m2.1.1.2.2" xref="Thmproofx1.p2.40.m2.1.1.2.2.cmml">b</mi><mi id="Thmproofx1.p2.40.m2.1.1.3" xref="Thmproofx1.p2.40.m2.1.1.3.cmml">L</mi><mi id="Thmproofx1.p2.40.m2.1.1.2.3" xref="Thmproofx1.p2.40.m2.1.1.2.3.cmml">i</mi></msubsup><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.40.m2.1b"><apply id="Thmproofx1.p2.40.m2.1.1.cmml" xref="Thmproofx1.p2.40.m2.1.1"><csymbol cd="ambiguous" id="Thmproofx1.p2.40.m2.1.1.1.cmml" xref="Thmproofx1.p2.40.m2.1.1">subscript</csymbol><apply id="Thmproofx1.p2.40.m2.1.1.2.cmml" xref="Thmproofx1.p2.40.m2.1.1"><csymbol cd="ambiguous" id="Thmproofx1.p2.40.m2.1.1.2.1.cmml" xref="Thmproofx1.p2.40.m2.1.1">superscript</csymbol><ci id="Thmproofx1.p2.40.m2.1.1.2.2.cmml" xref="Thmproofx1.p2.40.m2.1.1.2.2">𝑏</ci><ci id="Thmproofx1.p2.40.m2.1.1.2.3.cmml" xref="Thmproofx1.p2.40.m2.1.1.2.3">𝑖</ci></apply><ci id="Thmproofx1.p2.40.m2.1.1.3.cmml" xref="Thmproofx1.p2.40.m2.1.1.3">𝐿</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.40.m2.1c">b^{i}_{L}</annotation></semantics></math> is the bias,
and <math id="Thmproofx1.p2.41.m3.1" class="ltx_Math" alttext="y_{i}={\bm{W}^{i}_{L}}^{T}\bm{a}_{L-1}+b^{i}_{L}" display="inline"><semantics id="Thmproofx1.p2.41.m3.1a"><mrow id="Thmproofx1.p2.41.m3.1.1" xref="Thmproofx1.p2.41.m3.1.1.cmml"><msub id="Thmproofx1.p2.41.m3.1.1.2" xref="Thmproofx1.p2.41.m3.1.1.2.cmml"><mi id="Thmproofx1.p2.41.m3.1.1.2.2" xref="Thmproofx1.p2.41.m3.1.1.2.2.cmml">y</mi><mi id="Thmproofx1.p2.41.m3.1.1.2.3" xref="Thmproofx1.p2.41.m3.1.1.2.3.cmml">i</mi></msub><mo id="Thmproofx1.p2.41.m3.1.1.1" xref="Thmproofx1.p2.41.m3.1.1.1.cmml">=</mo><mrow id="Thmproofx1.p2.41.m3.1.1.3" xref="Thmproofx1.p2.41.m3.1.1.3.cmml"><mrow id="Thmproofx1.p2.41.m3.1.1.3.2" xref="Thmproofx1.p2.41.m3.1.1.3.2.cmml"><mmultiscripts id="Thmproofx1.p2.41.m3.1.1.3.2.2" xref="Thmproofx1.p2.41.m3.1.1.3.2.2.cmml"><mi id="Thmproofx1.p2.41.m3.1.1.3.2.2.2.2.2" xref="Thmproofx1.p2.41.m3.1.1.3.2.2.2.2.2.cmml">𝑾</mi><mi id="Thmproofx1.p2.41.m3.1.1.3.2.2.2.3" xref="Thmproofx1.p2.41.m3.1.1.3.2.2.2.3.cmml">L</mi><mi id="Thmproofx1.p2.41.m3.1.1.3.2.2.2.2.3" xref="Thmproofx1.p2.41.m3.1.1.3.2.2.2.2.3.cmml">i</mi><mrow id="Thmproofx1.p2.41.m3.1.1.3.2.2a" xref="Thmproofx1.p2.41.m3.1.1.3.2.2.cmml"></mrow><mi id="Thmproofx1.p2.41.m3.1.1.3.2.2.3" xref="Thmproofx1.p2.41.m3.1.1.3.2.2.3.cmml">T</mi></mmultiscripts><mo lspace="0em" rspace="0em" id="Thmproofx1.p2.41.m3.1.1.3.2.1" xref="Thmproofx1.p2.41.m3.1.1.3.2.1.cmml">​</mo><msub id="Thmproofx1.p2.41.m3.1.1.3.2.3" xref="Thmproofx1.p2.41.m3.1.1.3.2.3.cmml"><mi id="Thmproofx1.p2.41.m3.1.1.3.2.3.2" xref="Thmproofx1.p2.41.m3.1.1.3.2.3.2.cmml">𝒂</mi><mrow id="Thmproofx1.p2.41.m3.1.1.3.2.3.3" xref="Thmproofx1.p2.41.m3.1.1.3.2.3.3.cmml"><mi id="Thmproofx1.p2.41.m3.1.1.3.2.3.3.2" xref="Thmproofx1.p2.41.m3.1.1.3.2.3.3.2.cmml">L</mi><mo id="Thmproofx1.p2.41.m3.1.1.3.2.3.3.1" xref="Thmproofx1.p2.41.m3.1.1.3.2.3.3.1.cmml">−</mo><mn id="Thmproofx1.p2.41.m3.1.1.3.2.3.3.3" xref="Thmproofx1.p2.41.m3.1.1.3.2.3.3.3.cmml">1</mn></mrow></msub></mrow><mo id="Thmproofx1.p2.41.m3.1.1.3.1" xref="Thmproofx1.p2.41.m3.1.1.3.1.cmml">+</mo><msubsup id="Thmproofx1.p2.41.m3.1.1.3.3" xref="Thmproofx1.p2.41.m3.1.1.3.3.cmml"><mi id="Thmproofx1.p2.41.m3.1.1.3.3.2.2" xref="Thmproofx1.p2.41.m3.1.1.3.3.2.2.cmml">b</mi><mi id="Thmproofx1.p2.41.m3.1.1.3.3.3" xref="Thmproofx1.p2.41.m3.1.1.3.3.3.cmml">L</mi><mi id="Thmproofx1.p2.41.m3.1.1.3.3.2.3" xref="Thmproofx1.p2.41.m3.1.1.3.3.2.3.cmml">i</mi></msubsup></mrow></mrow><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.41.m3.1b"><apply id="Thmproofx1.p2.41.m3.1.1.cmml" xref="Thmproofx1.p2.41.m3.1.1"><eq id="Thmproofx1.p2.41.m3.1.1.1.cmml" xref="Thmproofx1.p2.41.m3.1.1.1"></eq><apply id="Thmproofx1.p2.41.m3.1.1.2.cmml" xref="Thmproofx1.p2.41.m3.1.1.2"><csymbol cd="ambiguous" id="Thmproofx1.p2.41.m3.1.1.2.1.cmml" xref="Thmproofx1.p2.41.m3.1.1.2">subscript</csymbol><ci id="Thmproofx1.p2.41.m3.1.1.2.2.cmml" xref="Thmproofx1.p2.41.m3.1.1.2.2">𝑦</ci><ci id="Thmproofx1.p2.41.m3.1.1.2.3.cmml" xref="Thmproofx1.p2.41.m3.1.1.2.3">𝑖</ci></apply><apply id="Thmproofx1.p2.41.m3.1.1.3.cmml" xref="Thmproofx1.p2.41.m3.1.1.3"><plus id="Thmproofx1.p2.41.m3.1.1.3.1.cmml" xref="Thmproofx1.p2.41.m3.1.1.3.1"></plus><apply id="Thmproofx1.p2.41.m3.1.1.3.2.cmml" xref="Thmproofx1.p2.41.m3.1.1.3.2"><times id="Thmproofx1.p2.41.m3.1.1.3.2.1.cmml" xref="Thmproofx1.p2.41.m3.1.1.3.2.1"></times><apply id="Thmproofx1.p2.41.m3.1.1.3.2.2.cmml" xref="Thmproofx1.p2.41.m3.1.1.3.2.2"><csymbol cd="ambiguous" id="Thmproofx1.p2.41.m3.1.1.3.2.2.1.cmml" xref="Thmproofx1.p2.41.m3.1.1.3.2.2">superscript</csymbol><apply id="Thmproofx1.p2.41.m3.1.1.3.2.2.2.cmml" xref="Thmproofx1.p2.41.m3.1.1.3.2.2"><csymbol cd="ambiguous" id="Thmproofx1.p2.41.m3.1.1.3.2.2.2.1.cmml" xref="Thmproofx1.p2.41.m3.1.1.3.2.2">subscript</csymbol><apply id="Thmproofx1.p2.41.m3.1.1.3.2.2.2.2.cmml" xref="Thmproofx1.p2.41.m3.1.1.3.2.2"><csymbol cd="ambiguous" id="Thmproofx1.p2.41.m3.1.1.3.2.2.2.2.1.cmml" xref="Thmproofx1.p2.41.m3.1.1.3.2.2">superscript</csymbol><ci id="Thmproofx1.p2.41.m3.1.1.3.2.2.2.2.2.cmml" xref="Thmproofx1.p2.41.m3.1.1.3.2.2.2.2.2">𝑾</ci><ci id="Thmproofx1.p2.41.m3.1.1.3.2.2.2.2.3.cmml" xref="Thmproofx1.p2.41.m3.1.1.3.2.2.2.2.3">𝑖</ci></apply><ci id="Thmproofx1.p2.41.m3.1.1.3.2.2.2.3.cmml" xref="Thmproofx1.p2.41.m3.1.1.3.2.2.2.3">𝐿</ci></apply><ci id="Thmproofx1.p2.41.m3.1.1.3.2.2.3.cmml" xref="Thmproofx1.p2.41.m3.1.1.3.2.2.3">𝑇</ci></apply><apply id="Thmproofx1.p2.41.m3.1.1.3.2.3.cmml" xref="Thmproofx1.p2.41.m3.1.1.3.2.3"><csymbol cd="ambiguous" id="Thmproofx1.p2.41.m3.1.1.3.2.3.1.cmml" xref="Thmproofx1.p2.41.m3.1.1.3.2.3">subscript</csymbol><ci id="Thmproofx1.p2.41.m3.1.1.3.2.3.2.cmml" xref="Thmproofx1.p2.41.m3.1.1.3.2.3.2">𝒂</ci><apply id="Thmproofx1.p2.41.m3.1.1.3.2.3.3.cmml" xref="Thmproofx1.p2.41.m3.1.1.3.2.3.3"><minus id="Thmproofx1.p2.41.m3.1.1.3.2.3.3.1.cmml" xref="Thmproofx1.p2.41.m3.1.1.3.2.3.3.1"></minus><ci id="Thmproofx1.p2.41.m3.1.1.3.2.3.3.2.cmml" xref="Thmproofx1.p2.41.m3.1.1.3.2.3.3.2">𝐿</ci><cn type="integer" id="Thmproofx1.p2.41.m3.1.1.3.2.3.3.3.cmml" xref="Thmproofx1.p2.41.m3.1.1.3.2.3.3.3">1</cn></apply></apply></apply><apply id="Thmproofx1.p2.41.m3.1.1.3.3.cmml" xref="Thmproofx1.p2.41.m3.1.1.3.3"><csymbol cd="ambiguous" id="Thmproofx1.p2.41.m3.1.1.3.3.1.cmml" xref="Thmproofx1.p2.41.m3.1.1.3.3">subscript</csymbol><apply id="Thmproofx1.p2.41.m3.1.1.3.3.2.cmml" xref="Thmproofx1.p2.41.m3.1.1.3.3"><csymbol cd="ambiguous" id="Thmproofx1.p2.41.m3.1.1.3.3.2.1.cmml" xref="Thmproofx1.p2.41.m3.1.1.3.3">superscript</csymbol><ci id="Thmproofx1.p2.41.m3.1.1.3.3.2.2.cmml" xref="Thmproofx1.p2.41.m3.1.1.3.3.2.2">𝑏</ci><ci id="Thmproofx1.p2.41.m3.1.1.3.3.2.3.cmml" xref="Thmproofx1.p2.41.m3.1.1.3.3.2.3">𝑖</ci></apply><ci id="Thmproofx1.p2.41.m3.1.1.3.3.3.cmml" xref="Thmproofx1.p2.41.m3.1.1.3.3.3">𝐿</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.41.m3.1c">y_{i}={\bm{W}^{i}_{L}}^{T}\bm{a}_{L-1}+b^{i}_{L}</annotation></semantics></math>.
When non-negative activation functions (e.g. Sigmoid or ReLU) are used, <math id="Thmproofx1.p2.42.m4.1" class="ltx_Math" alttext="\bm{a}_{L-1}" display="inline"><semantics id="Thmproofx1.p2.42.m4.1a"><msub id="Thmproofx1.p2.42.m4.1.1" xref="Thmproofx1.p2.42.m4.1.1.cmml"><mi id="Thmproofx1.p2.42.m4.1.1.2" xref="Thmproofx1.p2.42.m4.1.1.2.cmml">𝒂</mi><mrow id="Thmproofx1.p2.42.m4.1.1.3" xref="Thmproofx1.p2.42.m4.1.1.3.cmml"><mi id="Thmproofx1.p2.42.m4.1.1.3.2" xref="Thmproofx1.p2.42.m4.1.1.3.2.cmml">L</mi><mo id="Thmproofx1.p2.42.m4.1.1.3.1" xref="Thmproofx1.p2.42.m4.1.1.3.1.cmml">−</mo><mn id="Thmproofx1.p2.42.m4.1.1.3.3" xref="Thmproofx1.p2.42.m4.1.1.3.3.cmml">1</mn></mrow></msub><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.42.m4.1b"><apply id="Thmproofx1.p2.42.m4.1.1.cmml" xref="Thmproofx1.p2.42.m4.1.1"><csymbol cd="ambiguous" id="Thmproofx1.p2.42.m4.1.1.1.cmml" xref="Thmproofx1.p2.42.m4.1.1">subscript</csymbol><ci id="Thmproofx1.p2.42.m4.1.1.2.cmml" xref="Thmproofx1.p2.42.m4.1.1.2">𝒂</ci><apply id="Thmproofx1.p2.42.m4.1.1.3.cmml" xref="Thmproofx1.p2.42.m4.1.1.3"><minus id="Thmproofx1.p2.42.m4.1.1.3.1.cmml" xref="Thmproofx1.p2.42.m4.1.1.3.1"></minus><ci id="Thmproofx1.p2.42.m4.1.1.3.2.cmml" xref="Thmproofx1.p2.42.m4.1.1.3.2">𝐿</ci><cn type="integer" id="Thmproofx1.p2.42.m4.1.1.3.3.cmml" xref="Thmproofx1.p2.42.m4.1.1.3.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.42.m4.1c">\bm{a}_{L-1}</annotation></semantics></math> is non-negative. 
Consequently, <math id="Thmproofx1.p2.43.m5.1" class="ltx_Math" alttext="\nabla\bm{W}^{i}_{L}" display="inline"><semantics id="Thmproofx1.p2.43.m5.1a"><mrow id="Thmproofx1.p2.43.m5.1.1" xref="Thmproofx1.p2.43.m5.1.1.cmml"><mo rspace="0.167em" id="Thmproofx1.p2.43.m5.1.1.1" xref="Thmproofx1.p2.43.m5.1.1.1.cmml">∇</mo><msubsup id="Thmproofx1.p2.43.m5.1.1.2" xref="Thmproofx1.p2.43.m5.1.1.2.cmml"><mi id="Thmproofx1.p2.43.m5.1.1.2.2.2" xref="Thmproofx1.p2.43.m5.1.1.2.2.2.cmml">𝑾</mi><mi id="Thmproofx1.p2.43.m5.1.1.2.3" xref="Thmproofx1.p2.43.m5.1.1.2.3.cmml">L</mi><mi id="Thmproofx1.p2.43.m5.1.1.2.2.3" xref="Thmproofx1.p2.43.m5.1.1.2.2.3.cmml">i</mi></msubsup></mrow><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.43.m5.1b"><apply id="Thmproofx1.p2.43.m5.1.1.cmml" xref="Thmproofx1.p2.43.m5.1.1"><ci id="Thmproofx1.p2.43.m5.1.1.1.cmml" xref="Thmproofx1.p2.43.m5.1.1.1">∇</ci><apply id="Thmproofx1.p2.43.m5.1.1.2.cmml" xref="Thmproofx1.p2.43.m5.1.1.2"><csymbol cd="ambiguous" id="Thmproofx1.p2.43.m5.1.1.2.1.cmml" xref="Thmproofx1.p2.43.m5.1.1.2">subscript</csymbol><apply id="Thmproofx1.p2.43.m5.1.1.2.2.cmml" xref="Thmproofx1.p2.43.m5.1.1.2"><csymbol cd="ambiguous" id="Thmproofx1.p2.43.m5.1.1.2.2.1.cmml" xref="Thmproofx1.p2.43.m5.1.1.2">superscript</csymbol><ci id="Thmproofx1.p2.43.m5.1.1.2.2.2.cmml" xref="Thmproofx1.p2.43.m5.1.1.2.2.2">𝑾</ci><ci id="Thmproofx1.p2.43.m5.1.1.2.2.3.cmml" xref="Thmproofx1.p2.43.m5.1.1.2.2.3">𝑖</ci></apply><ci id="Thmproofx1.p2.43.m5.1.1.2.3.cmml" xref="Thmproofx1.p2.43.m5.1.1.2.3">𝐿</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.43.m5.1c">\nabla\bm{W}^{i}_{L}</annotation></semantics></math> and <math id="Thmproofx1.p2.44.m6.1" class="ltx_Math" alttext="d_{i}" display="inline"><semantics id="Thmproofx1.p2.44.m6.1a"><msub id="Thmproofx1.p2.44.m6.1.1" xref="Thmproofx1.p2.44.m6.1.1.cmml"><mi id="Thmproofx1.p2.44.m6.1.1.2" xref="Thmproofx1.p2.44.m6.1.1.2.cmml">d</mi><mi id="Thmproofx1.p2.44.m6.1.1.3" xref="Thmproofx1.p2.44.m6.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.44.m6.1b"><apply id="Thmproofx1.p2.44.m6.1.1.cmml" xref="Thmproofx1.p2.44.m6.1.1"><csymbol cd="ambiguous" id="Thmproofx1.p2.44.m6.1.1.1.cmml" xref="Thmproofx1.p2.44.m6.1.1">subscript</csymbol><ci id="Thmproofx1.p2.44.m6.1.1.2.cmml" xref="Thmproofx1.p2.44.m6.1.1.2">𝑑</ci><ci id="Thmproofx1.p2.44.m6.1.1.3.cmml" xref="Thmproofx1.p2.44.m6.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.44.m6.1c">d_{i}</annotation></semantics></math> have the same sign.
Considering Eq. (<a href="#S4.E9" title="In Proof ‣ 4 Gradient analysis ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">9</span></a>), we conclude that negative <math id="Thmproofx1.p2.45.m7.1" class="ltx_Math" alttext="\nabla\bm{W}^{i}_{L}" display="inline"><semantics id="Thmproofx1.p2.45.m7.1a"><mrow id="Thmproofx1.p2.45.m7.1.1" xref="Thmproofx1.p2.45.m7.1.1.cmml"><mo rspace="0.167em" id="Thmproofx1.p2.45.m7.1.1.1" xref="Thmproofx1.p2.45.m7.1.1.1.cmml">∇</mo><msubsup id="Thmproofx1.p2.45.m7.1.1.2" xref="Thmproofx1.p2.45.m7.1.1.2.cmml"><mi id="Thmproofx1.p2.45.m7.1.1.2.2.2" xref="Thmproofx1.p2.45.m7.1.1.2.2.2.cmml">𝑾</mi><mi id="Thmproofx1.p2.45.m7.1.1.2.3" xref="Thmproofx1.p2.45.m7.1.1.2.3.cmml">L</mi><mi id="Thmproofx1.p2.45.m7.1.1.2.2.3" xref="Thmproofx1.p2.45.m7.1.1.2.2.3.cmml">i</mi></msubsup></mrow><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.45.m7.1b"><apply id="Thmproofx1.p2.45.m7.1.1.cmml" xref="Thmproofx1.p2.45.m7.1.1"><ci id="Thmproofx1.p2.45.m7.1.1.1.cmml" xref="Thmproofx1.p2.45.m7.1.1.1">∇</ci><apply id="Thmproofx1.p2.45.m7.1.1.2.cmml" xref="Thmproofx1.p2.45.m7.1.1.2"><csymbol cd="ambiguous" id="Thmproofx1.p2.45.m7.1.1.2.1.cmml" xref="Thmproofx1.p2.45.m7.1.1.2">subscript</csymbol><apply id="Thmproofx1.p2.45.m7.1.1.2.2.cmml" xref="Thmproofx1.p2.45.m7.1.1.2"><csymbol cd="ambiguous" id="Thmproofx1.p2.45.m7.1.1.2.2.1.cmml" xref="Thmproofx1.p2.45.m7.1.1.2">superscript</csymbol><ci id="Thmproofx1.p2.45.m7.1.1.2.2.2.cmml" xref="Thmproofx1.p2.45.m7.1.1.2.2.2">𝑾</ci><ci id="Thmproofx1.p2.45.m7.1.1.2.2.3.cmml" xref="Thmproofx1.p2.45.m7.1.1.2.2.3">𝑖</ci></apply><ci id="Thmproofx1.p2.45.m7.1.1.2.3.cmml" xref="Thmproofx1.p2.45.m7.1.1.2.3">𝐿</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.45.m7.1c">\nabla\bm{W}^{i}_{L}</annotation></semantics></math> indicates that the label <math id="Thmproofx1.p2.46.m8.1" class="ltx_Math" alttext="i" display="inline"><semantics id="Thmproofx1.p2.46.m8.1a"><mi id="Thmproofx1.p2.46.m8.1.1" xref="Thmproofx1.p2.46.m8.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.46.m8.1b"><ci id="Thmproofx1.p2.46.m8.1.1.cmml" xref="Thmproofx1.p2.46.m8.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.46.m8.1c">i</annotation></semantics></math> is present in the ground-truth labels set <math id="Thmproofx1.p2.47.m9.1" class="ltx_Math" alttext="C" display="inline"><semantics id="Thmproofx1.p2.47.m9.1a"><mi id="Thmproofx1.p2.47.m9.1.1" xref="Thmproofx1.p2.47.m9.1.1.cmml">C</mi><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.47.m9.1b"><ci id="Thmproofx1.p2.47.m9.1.1.cmml" xref="Thmproofx1.p2.47.m9.1.1">𝐶</ci></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.47.m9.1c">C</annotation></semantics></math> of the training batch.
However, a present label can have a positive gradient according to the value of <math id="Thmproofx1.p2.48.m10.1" class="ltx_Math" alttext="d_{i}" display="inline"><semantics id="Thmproofx1.p2.48.m10.1a"><msub id="Thmproofx1.p2.48.m10.1.1" xref="Thmproofx1.p2.48.m10.1.1.cmml"><mi id="Thmproofx1.p2.48.m10.1.1.2" xref="Thmproofx1.p2.48.m10.1.1.2.cmml">d</mi><mi id="Thmproofx1.p2.48.m10.1.1.3" xref="Thmproofx1.p2.48.m10.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="Thmproofx1.p2.48.m10.1b"><apply id="Thmproofx1.p2.48.m10.1.1.cmml" xref="Thmproofx1.p2.48.m10.1.1"><csymbol cd="ambiguous" id="Thmproofx1.p2.48.m10.1.1.1.cmml" xref="Thmproofx1.p2.48.m10.1.1">subscript</csymbol><ci id="Thmproofx1.p2.48.m10.1.1.2.cmml" xref="Thmproofx1.p2.48.m10.1.1.2">𝑑</ci><ci id="Thmproofx1.p2.48.m10.1.1.3.cmml" xref="Thmproofx1.p2.48.m10.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx1.p2.48.m10.1c">d_{i}</annotation></semantics></math> as discussed earlier.</p>
</div>
</div>
<div id="S4.p3" class="ltx_para">
<dl id="S4.I2" class="ltx_description">
<dt id="S4.I2.ix1" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span id="S4.I2.ix1.1.1.1" class="ltx_text ltx_font_bold">Property 2.</span></span></dt>
<dd class="ltx_item">
<div id="S4.I2.ix1.p1" class="ltx_para">
<p id="S4.I2.ix1.p1.3" class="ltx_p"><span id="S4.I2.ix1.p1.3.3" class="ltx_text ltx_font_italic">In untrained models, the magnitude of the gradient <math id="S4.I2.ix1.p1.1.1.m1.1" class="ltx_Math" alttext="{g_{i}=\mathds{1}^{T}\cdot\nabla\bm{W}^{i}_{L}}" display="inline"><semantics id="S4.I2.ix1.p1.1.1.m1.1a"><mrow id="S4.I2.ix1.p1.1.1.m1.1.1" xref="S4.I2.ix1.p1.1.1.m1.1.1.cmml"><msub id="S4.I2.ix1.p1.1.1.m1.1.1.2" xref="S4.I2.ix1.p1.1.1.m1.1.1.2.cmml"><mi id="S4.I2.ix1.p1.1.1.m1.1.1.2.2" xref="S4.I2.ix1.p1.1.1.m1.1.1.2.2.cmml">g</mi><mi id="S4.I2.ix1.p1.1.1.m1.1.1.2.3" xref="S4.I2.ix1.p1.1.1.m1.1.1.2.3.cmml">i</mi></msub><mo id="S4.I2.ix1.p1.1.1.m1.1.1.1" xref="S4.I2.ix1.p1.1.1.m1.1.1.1.cmml">=</mo><mrow id="S4.I2.ix1.p1.1.1.m1.1.1.3" xref="S4.I2.ix1.p1.1.1.m1.1.1.3.cmml"><msup id="S4.I2.ix1.p1.1.1.m1.1.1.3.2" xref="S4.I2.ix1.p1.1.1.m1.1.1.3.2.cmml"><mn id="S4.I2.ix1.p1.1.1.m1.1.1.3.2.2" xref="S4.I2.ix1.p1.1.1.m1.1.1.3.2.2.cmml">𝟙</mn><mi id="S4.I2.ix1.p1.1.1.m1.1.1.3.2.3" xref="S4.I2.ix1.p1.1.1.m1.1.1.3.2.3.cmml">T</mi></msup><mo lspace="0.222em" rspace="0.222em" id="S4.I2.ix1.p1.1.1.m1.1.1.3.1" xref="S4.I2.ix1.p1.1.1.m1.1.1.3.1.cmml">⋅</mo><mrow id="S4.I2.ix1.p1.1.1.m1.1.1.3.3" xref="S4.I2.ix1.p1.1.1.m1.1.1.3.3.cmml"><mo rspace="0.167em" id="S4.I2.ix1.p1.1.1.m1.1.1.3.3.1" xref="S4.I2.ix1.p1.1.1.m1.1.1.3.3.1.cmml">∇</mo><msubsup id="S4.I2.ix1.p1.1.1.m1.1.1.3.3.2" xref="S4.I2.ix1.p1.1.1.m1.1.1.3.3.2.cmml"><mi id="S4.I2.ix1.p1.1.1.m1.1.1.3.3.2.2.2" xref="S4.I2.ix1.p1.1.1.m1.1.1.3.3.2.2.2.cmml">𝐖</mi><mi id="S4.I2.ix1.p1.1.1.m1.1.1.3.3.2.3" xref="S4.I2.ix1.p1.1.1.m1.1.1.3.3.2.3.cmml">L</mi><mi id="S4.I2.ix1.p1.1.1.m1.1.1.3.3.2.2.3" xref="S4.I2.ix1.p1.1.1.m1.1.1.3.3.2.2.3.cmml">i</mi></msubsup></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.I2.ix1.p1.1.1.m1.1b"><apply id="S4.I2.ix1.p1.1.1.m1.1.1.cmml" xref="S4.I2.ix1.p1.1.1.m1.1.1"><eq id="S4.I2.ix1.p1.1.1.m1.1.1.1.cmml" xref="S4.I2.ix1.p1.1.1.m1.1.1.1"></eq><apply id="S4.I2.ix1.p1.1.1.m1.1.1.2.cmml" xref="S4.I2.ix1.p1.1.1.m1.1.1.2"><csymbol cd="ambiguous" id="S4.I2.ix1.p1.1.1.m1.1.1.2.1.cmml" xref="S4.I2.ix1.p1.1.1.m1.1.1.2">subscript</csymbol><ci id="S4.I2.ix1.p1.1.1.m1.1.1.2.2.cmml" xref="S4.I2.ix1.p1.1.1.m1.1.1.2.2">𝑔</ci><ci id="S4.I2.ix1.p1.1.1.m1.1.1.2.3.cmml" xref="S4.I2.ix1.p1.1.1.m1.1.1.2.3">𝑖</ci></apply><apply id="S4.I2.ix1.p1.1.1.m1.1.1.3.cmml" xref="S4.I2.ix1.p1.1.1.m1.1.1.3"><ci id="S4.I2.ix1.p1.1.1.m1.1.1.3.1.cmml" xref="S4.I2.ix1.p1.1.1.m1.1.1.3.1">⋅</ci><apply id="S4.I2.ix1.p1.1.1.m1.1.1.3.2.cmml" xref="S4.I2.ix1.p1.1.1.m1.1.1.3.2"><csymbol cd="ambiguous" id="S4.I2.ix1.p1.1.1.m1.1.1.3.2.1.cmml" xref="S4.I2.ix1.p1.1.1.m1.1.1.3.2">superscript</csymbol><cn type="integer" id="S4.I2.ix1.p1.1.1.m1.1.1.3.2.2.cmml" xref="S4.I2.ix1.p1.1.1.m1.1.1.3.2.2">1</cn><ci id="S4.I2.ix1.p1.1.1.m1.1.1.3.2.3.cmml" xref="S4.I2.ix1.p1.1.1.m1.1.1.3.2.3">𝑇</ci></apply><apply id="S4.I2.ix1.p1.1.1.m1.1.1.3.3.cmml" xref="S4.I2.ix1.p1.1.1.m1.1.1.3.3"><ci id="S4.I2.ix1.p1.1.1.m1.1.1.3.3.1.cmml" xref="S4.I2.ix1.p1.1.1.m1.1.1.3.3.1">∇</ci><apply id="S4.I2.ix1.p1.1.1.m1.1.1.3.3.2.cmml" xref="S4.I2.ix1.p1.1.1.m1.1.1.3.3.2"><csymbol cd="ambiguous" id="S4.I2.ix1.p1.1.1.m1.1.1.3.3.2.1.cmml" xref="S4.I2.ix1.p1.1.1.m1.1.1.3.3.2">subscript</csymbol><apply id="S4.I2.ix1.p1.1.1.m1.1.1.3.3.2.2.cmml" xref="S4.I2.ix1.p1.1.1.m1.1.1.3.3.2"><csymbol cd="ambiguous" id="S4.I2.ix1.p1.1.1.m1.1.1.3.3.2.2.1.cmml" xref="S4.I2.ix1.p1.1.1.m1.1.1.3.3.2">superscript</csymbol><ci id="S4.I2.ix1.p1.1.1.m1.1.1.3.3.2.2.2.cmml" xref="S4.I2.ix1.p1.1.1.m1.1.1.3.3.2.2.2">𝐖</ci><ci id="S4.I2.ix1.p1.1.1.m1.1.1.3.3.2.2.3.cmml" xref="S4.I2.ix1.p1.1.1.m1.1.1.3.3.2.2.3">𝑖</ci></apply><ci id="S4.I2.ix1.p1.1.1.m1.1.1.3.3.2.3.cmml" xref="S4.I2.ix1.p1.1.1.m1.1.1.3.3.2.3">𝐿</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.I2.ix1.p1.1.1.m1.1c">{g_{i}=\mathds{1}^{T}\cdot\nabla\bm{W}^{i}_{L}}</annotation></semantics></math>  is approximately  proportional to the number of occurrences <math id="S4.I2.ix1.p1.2.2.m2.1" class="ltx_Math" alttext="\lambda_{i}" display="inline"><semantics id="S4.I2.ix1.p1.2.2.m2.1a"><msub id="S4.I2.ix1.p1.2.2.m2.1.1" xref="S4.I2.ix1.p1.2.2.m2.1.1.cmml"><mi id="S4.I2.ix1.p1.2.2.m2.1.1.2" xref="S4.I2.ix1.p1.2.2.m2.1.1.2.cmml">λ</mi><mi id="S4.I2.ix1.p1.2.2.m2.1.1.3" xref="S4.I2.ix1.p1.2.2.m2.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S4.I2.ix1.p1.2.2.m2.1b"><apply id="S4.I2.ix1.p1.2.2.m2.1.1.cmml" xref="S4.I2.ix1.p1.2.2.m2.1.1"><csymbol cd="ambiguous" id="S4.I2.ix1.p1.2.2.m2.1.1.1.cmml" xref="S4.I2.ix1.p1.2.2.m2.1.1">subscript</csymbol><ci id="S4.I2.ix1.p1.2.2.m2.1.1.2.cmml" xref="S4.I2.ix1.p1.2.2.m2.1.1.2">𝜆</ci><ci id="S4.I2.ix1.p1.2.2.m2.1.1.3.cmml" xref="S4.I2.ix1.p1.2.2.m2.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.I2.ix1.p1.2.2.m2.1c">\lambda_{i}</annotation></semantics></math> of label <math id="S4.I2.ix1.p1.3.3.m3.1" class="ltx_Math" alttext="i" display="inline"><semantics id="S4.I2.ix1.p1.3.3.m3.1a"><mi id="S4.I2.ix1.p1.3.3.m3.1.1" xref="S4.I2.ix1.p1.3.3.m3.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S4.I2.ix1.p1.3.3.m3.1b"><ci id="S4.I2.ix1.p1.3.3.m3.1.1.cmml" xref="S4.I2.ix1.p1.3.3.m3.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.I2.ix1.p1.3.3.m3.1c">i</annotation></semantics></math> in the training batch.</span></p>
</div>
</dd>
</dl>
</div>
<div id="Thmproofx2" class="ltx_theorem ltx_theorem_proof">
<h6 class="ltx_title ltx_font_italic ltx_title_theorem"><span class="ltx_tag ltx_tag_theorem">Proof</span></h6>
<div id="Thmproofx2.p1" class="ltx_para">
<p id="Thmproofx2.p1.8" class="ltx_p">Based on Eq. (<a href="#S4.E12" title="In Proof ‣ 4 Gradient analysis ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">12</span></a>), we have</p>
<table id="Sx2.EGx6" class="ltx_equationgroup ltx_eqn_align ltx_eqn_table">

<tbody id="S4.E13"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S4.E13.m1.1" class="ltx_Math" alttext="\displaystyle g_{i}=\mathds{1}^{T}\cdot\nabla\bm{W}^{i}_{L}" display="inline"><semantics id="S4.E13.m1.1a"><mrow id="S4.E13.m1.1.1" xref="S4.E13.m1.1.1.cmml"><msub id="S4.E13.m1.1.1.2" xref="S4.E13.m1.1.1.2.cmml"><mi id="S4.E13.m1.1.1.2.2" xref="S4.E13.m1.1.1.2.2.cmml">g</mi><mi id="S4.E13.m1.1.1.2.3" xref="S4.E13.m1.1.1.2.3.cmml">i</mi></msub><mo id="S4.E13.m1.1.1.1" xref="S4.E13.m1.1.1.1.cmml">=</mo><mrow id="S4.E13.m1.1.1.3" xref="S4.E13.m1.1.1.3.cmml"><msup id="S4.E13.m1.1.1.3.2" xref="S4.E13.m1.1.1.3.2.cmml"><mn id="S4.E13.m1.1.1.3.2.2" xref="S4.E13.m1.1.1.3.2.2.cmml">𝟙</mn><mi id="S4.E13.m1.1.1.3.2.3" xref="S4.E13.m1.1.1.3.2.3.cmml">T</mi></msup><mo lspace="0.222em" rspace="0.222em" id="S4.E13.m1.1.1.3.1" xref="S4.E13.m1.1.1.3.1.cmml">⋅</mo><mrow id="S4.E13.m1.1.1.3.3" xref="S4.E13.m1.1.1.3.3.cmml"><mo rspace="0.167em" id="S4.E13.m1.1.1.3.3.1" xref="S4.E13.m1.1.1.3.3.1.cmml">∇</mo><msubsup id="S4.E13.m1.1.1.3.3.2" xref="S4.E13.m1.1.1.3.3.2.cmml"><mi id="S4.E13.m1.1.1.3.3.2.2.2" xref="S4.E13.m1.1.1.3.3.2.2.2.cmml">𝑾</mi><mi id="S4.E13.m1.1.1.3.3.2.3" xref="S4.E13.m1.1.1.3.3.2.3.cmml">L</mi><mi id="S4.E13.m1.1.1.3.3.2.2.3" xref="S4.E13.m1.1.1.3.3.2.2.3.cmml">i</mi></msubsup></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.E13.m1.1b"><apply id="S4.E13.m1.1.1.cmml" xref="S4.E13.m1.1.1"><eq id="S4.E13.m1.1.1.1.cmml" xref="S4.E13.m1.1.1.1"></eq><apply id="S4.E13.m1.1.1.2.cmml" xref="S4.E13.m1.1.1.2"><csymbol cd="ambiguous" id="S4.E13.m1.1.1.2.1.cmml" xref="S4.E13.m1.1.1.2">subscript</csymbol><ci id="S4.E13.m1.1.1.2.2.cmml" xref="S4.E13.m1.1.1.2.2">𝑔</ci><ci id="S4.E13.m1.1.1.2.3.cmml" xref="S4.E13.m1.1.1.2.3">𝑖</ci></apply><apply id="S4.E13.m1.1.1.3.cmml" xref="S4.E13.m1.1.1.3"><ci id="S4.E13.m1.1.1.3.1.cmml" xref="S4.E13.m1.1.1.3.1">⋅</ci><apply id="S4.E13.m1.1.1.3.2.cmml" xref="S4.E13.m1.1.1.3.2"><csymbol cd="ambiguous" id="S4.E13.m1.1.1.3.2.1.cmml" xref="S4.E13.m1.1.1.3.2">superscript</csymbol><cn type="integer" id="S4.E13.m1.1.1.3.2.2.cmml" xref="S4.E13.m1.1.1.3.2.2">1</cn><ci id="S4.E13.m1.1.1.3.2.3.cmml" xref="S4.E13.m1.1.1.3.2.3">𝑇</ci></apply><apply id="S4.E13.m1.1.1.3.3.cmml" xref="S4.E13.m1.1.1.3.3"><ci id="S4.E13.m1.1.1.3.3.1.cmml" xref="S4.E13.m1.1.1.3.3.1">∇</ci><apply id="S4.E13.m1.1.1.3.3.2.cmml" xref="S4.E13.m1.1.1.3.3.2"><csymbol cd="ambiguous" id="S4.E13.m1.1.1.3.3.2.1.cmml" xref="S4.E13.m1.1.1.3.3.2">subscript</csymbol><apply id="S4.E13.m1.1.1.3.3.2.2.cmml" xref="S4.E13.m1.1.1.3.3.2"><csymbol cd="ambiguous" id="S4.E13.m1.1.1.3.3.2.2.1.cmml" xref="S4.E13.m1.1.1.3.3.2">superscript</csymbol><ci id="S4.E13.m1.1.1.3.3.2.2.2.cmml" xref="S4.E13.m1.1.1.3.3.2.2.2">𝑾</ci><ci id="S4.E13.m1.1.1.3.3.2.2.3.cmml" xref="S4.E13.m1.1.1.3.3.2.2.3">𝑖</ci></apply><ci id="S4.E13.m1.1.1.3.3.2.3.cmml" xref="S4.E13.m1.1.1.3.3.2.3">𝐿</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.E13.m1.1c">\displaystyle g_{i}=\mathds{1}^{T}\cdot\nabla\bm{W}^{i}_{L}</annotation></semantics></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="S4.E13.m2.1" class="ltx_Math" alttext="\displaystyle=d_{i}\left(\mathds{1}^{T}\cdot\bm{a}_{L-1}\right)\,." display="inline"><semantics id="S4.E13.m2.1a"><mrow id="S4.E13.m2.1.1.1" xref="S4.E13.m2.1.1.1.1.cmml"><mrow id="S4.E13.m2.1.1.1.1" xref="S4.E13.m2.1.1.1.1.cmml"><mi id="S4.E13.m2.1.1.1.1.3" xref="S4.E13.m2.1.1.1.1.3.cmml"></mi><mo id="S4.E13.m2.1.1.1.1.2" xref="S4.E13.m2.1.1.1.1.2.cmml">=</mo><mrow id="S4.E13.m2.1.1.1.1.1" xref="S4.E13.m2.1.1.1.1.1.cmml"><msub id="S4.E13.m2.1.1.1.1.1.3" xref="S4.E13.m2.1.1.1.1.1.3.cmml"><mi id="S4.E13.m2.1.1.1.1.1.3.2" xref="S4.E13.m2.1.1.1.1.1.3.2.cmml">d</mi><mi id="S4.E13.m2.1.1.1.1.1.3.3" xref="S4.E13.m2.1.1.1.1.1.3.3.cmml">i</mi></msub><mo lspace="0em" rspace="0em" id="S4.E13.m2.1.1.1.1.1.2" xref="S4.E13.m2.1.1.1.1.1.2.cmml">​</mo><mrow id="S4.E13.m2.1.1.1.1.1.1.1" xref="S4.E13.m2.1.1.1.1.1.1.1.1.cmml"><mo id="S4.E13.m2.1.1.1.1.1.1.1.2" xref="S4.E13.m2.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S4.E13.m2.1.1.1.1.1.1.1.1" xref="S4.E13.m2.1.1.1.1.1.1.1.1.cmml"><msup id="S4.E13.m2.1.1.1.1.1.1.1.1.2" xref="S4.E13.m2.1.1.1.1.1.1.1.1.2.cmml"><mn id="S4.E13.m2.1.1.1.1.1.1.1.1.2.2" xref="S4.E13.m2.1.1.1.1.1.1.1.1.2.2.cmml">𝟙</mn><mi id="S4.E13.m2.1.1.1.1.1.1.1.1.2.3" xref="S4.E13.m2.1.1.1.1.1.1.1.1.2.3.cmml">T</mi></msup><mo lspace="0.222em" rspace="0.222em" id="S4.E13.m2.1.1.1.1.1.1.1.1.1" xref="S4.E13.m2.1.1.1.1.1.1.1.1.1.cmml">⋅</mo><msub id="S4.E13.m2.1.1.1.1.1.1.1.1.3" xref="S4.E13.m2.1.1.1.1.1.1.1.1.3.cmml"><mi id="S4.E13.m2.1.1.1.1.1.1.1.1.3.2" xref="S4.E13.m2.1.1.1.1.1.1.1.1.3.2.cmml">𝒂</mi><mrow id="S4.E13.m2.1.1.1.1.1.1.1.1.3.3" xref="S4.E13.m2.1.1.1.1.1.1.1.1.3.3.cmml"><mi id="S4.E13.m2.1.1.1.1.1.1.1.1.3.3.2" xref="S4.E13.m2.1.1.1.1.1.1.1.1.3.3.2.cmml">L</mi><mo id="S4.E13.m2.1.1.1.1.1.1.1.1.3.3.1" xref="S4.E13.m2.1.1.1.1.1.1.1.1.3.3.1.cmml">−</mo><mn id="S4.E13.m2.1.1.1.1.1.1.1.1.3.3.3" xref="S4.E13.m2.1.1.1.1.1.1.1.1.3.3.3.cmml">1</mn></mrow></msub></mrow><mo id="S4.E13.m2.1.1.1.1.1.1.1.3" xref="S4.E13.m2.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><mo lspace="0.170em" id="S4.E13.m2.1.1.1.2" xref="S4.E13.m2.1.1.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.E13.m2.1b"><apply id="S4.E13.m2.1.1.1.1.cmml" xref="S4.E13.m2.1.1.1"><eq id="S4.E13.m2.1.1.1.1.2.cmml" xref="S4.E13.m2.1.1.1.1.2"></eq><csymbol cd="latexml" id="S4.E13.m2.1.1.1.1.3.cmml" xref="S4.E13.m2.1.1.1.1.3">absent</csymbol><apply id="S4.E13.m2.1.1.1.1.1.cmml" xref="S4.E13.m2.1.1.1.1.1"><times id="S4.E13.m2.1.1.1.1.1.2.cmml" xref="S4.E13.m2.1.1.1.1.1.2"></times><apply id="S4.E13.m2.1.1.1.1.1.3.cmml" xref="S4.E13.m2.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S4.E13.m2.1.1.1.1.1.3.1.cmml" xref="S4.E13.m2.1.1.1.1.1.3">subscript</csymbol><ci id="S4.E13.m2.1.1.1.1.1.3.2.cmml" xref="S4.E13.m2.1.1.1.1.1.3.2">𝑑</ci><ci id="S4.E13.m2.1.1.1.1.1.3.3.cmml" xref="S4.E13.m2.1.1.1.1.1.3.3">𝑖</ci></apply><apply id="S4.E13.m2.1.1.1.1.1.1.1.1.cmml" xref="S4.E13.m2.1.1.1.1.1.1.1"><ci id="S4.E13.m2.1.1.1.1.1.1.1.1.1.cmml" xref="S4.E13.m2.1.1.1.1.1.1.1.1.1">⋅</ci><apply id="S4.E13.m2.1.1.1.1.1.1.1.1.2.cmml" xref="S4.E13.m2.1.1.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S4.E13.m2.1.1.1.1.1.1.1.1.2.1.cmml" xref="S4.E13.m2.1.1.1.1.1.1.1.1.2">superscript</csymbol><cn type="integer" id="S4.E13.m2.1.1.1.1.1.1.1.1.2.2.cmml" xref="S4.E13.m2.1.1.1.1.1.1.1.1.2.2">1</cn><ci id="S4.E13.m2.1.1.1.1.1.1.1.1.2.3.cmml" xref="S4.E13.m2.1.1.1.1.1.1.1.1.2.3">𝑇</ci></apply><apply id="S4.E13.m2.1.1.1.1.1.1.1.1.3.cmml" xref="S4.E13.m2.1.1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S4.E13.m2.1.1.1.1.1.1.1.1.3.1.cmml" xref="S4.E13.m2.1.1.1.1.1.1.1.1.3">subscript</csymbol><ci id="S4.E13.m2.1.1.1.1.1.1.1.1.3.2.cmml" xref="S4.E13.m2.1.1.1.1.1.1.1.1.3.2">𝒂</ci><apply id="S4.E13.m2.1.1.1.1.1.1.1.1.3.3.cmml" xref="S4.E13.m2.1.1.1.1.1.1.1.1.3.3"><minus id="S4.E13.m2.1.1.1.1.1.1.1.1.3.3.1.cmml" xref="S4.E13.m2.1.1.1.1.1.1.1.1.3.3.1"></minus><ci id="S4.E13.m2.1.1.1.1.1.1.1.1.3.3.2.cmml" xref="S4.E13.m2.1.1.1.1.1.1.1.1.3.3.2">𝐿</ci><cn type="integer" id="S4.E13.m2.1.1.1.1.1.1.1.1.3.3.3.cmml" xref="S4.E13.m2.1.1.1.1.1.1.1.1.3.3.3">1</cn></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.E13.m2.1c">\displaystyle=d_{i}\left(\mathds{1}^{T}\cdot\bm{a}_{L-1}\right)\,.</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(13)</span></td>
</tr></tbody>
</table>
<p id="Thmproofx2.p1.1" class="ltx_p">We substitute <math id="Thmproofx2.p1.1.m1.1" class="ltx_Math" alttext="d_{i}" display="inline"><semantics id="Thmproofx2.p1.1.m1.1a"><msub id="Thmproofx2.p1.1.m1.1.1" xref="Thmproofx2.p1.1.m1.1.1.cmml"><mi id="Thmproofx2.p1.1.m1.1.1.2" xref="Thmproofx2.p1.1.m1.1.1.2.cmml">d</mi><mi id="Thmproofx2.p1.1.m1.1.1.3" xref="Thmproofx2.p1.1.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="Thmproofx2.p1.1.m1.1b"><apply id="Thmproofx2.p1.1.m1.1.1.cmml" xref="Thmproofx2.p1.1.m1.1.1"><csymbol cd="ambiguous" id="Thmproofx2.p1.1.m1.1.1.1.cmml" xref="Thmproofx2.p1.1.m1.1.1">subscript</csymbol><ci id="Thmproofx2.p1.1.m1.1.1.2.cmml" xref="Thmproofx2.p1.1.m1.1.1.2">𝑑</ci><ci id="Thmproofx2.p1.1.m1.1.1.3.cmml" xref="Thmproofx2.p1.1.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx2.p1.1.m1.1c">d_{i}</annotation></semantics></math> with its expression from Eq. (<a href="#S4.E9" title="In Proof ‣ 4 Gradient analysis ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">9</span></a>) as follows</p>
<table id="Sx2.EGx7" class="ltx_equationgroup ltx_eqn_align ltx_eqn_table">

<tbody id="S4.E14"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S4.E14.m1.1" class="ltx_Math" alttext="\displaystyle g_{i}" display="inline"><semantics id="S4.E14.m1.1a"><msub id="S4.E14.m1.1.1" xref="S4.E14.m1.1.1.cmml"><mi id="S4.E14.m1.1.1.2" xref="S4.E14.m1.1.1.2.cmml">g</mi><mi id="S4.E14.m1.1.1.3" xref="S4.E14.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S4.E14.m1.1b"><apply id="S4.E14.m1.1.1.cmml" xref="S4.E14.m1.1.1"><csymbol cd="ambiguous" id="S4.E14.m1.1.1.1.cmml" xref="S4.E14.m1.1.1">subscript</csymbol><ci id="S4.E14.m1.1.1.2.cmml" xref="S4.E14.m1.1.1.2">𝑔</ci><ci id="S4.E14.m1.1.1.3.cmml" xref="S4.E14.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.E14.m1.1c">\displaystyle g_{i}</annotation></semantics></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="S4.E14.m2.3" class="ltx_Math" alttext="\displaystyle=\left(-\frac{\lambda_{i}}{B}+\frac{1}{B}\sum_{k=1}^{B}\frac{e^{y_{i(k)}}}{\sum\nolimits_{j}e^{y_{j(k)}}}\right)\left(\mathds{1}^{T}\cdot\bm{a}_{L-1}\right)\,." display="inline"><semantics id="S4.E14.m2.3a"><mrow id="S4.E14.m2.3.3.1" xref="S4.E14.m2.3.3.1.1.cmml"><mrow id="S4.E14.m2.3.3.1.1" xref="S4.E14.m2.3.3.1.1.cmml"><mi id="S4.E14.m2.3.3.1.1.4" xref="S4.E14.m2.3.3.1.1.4.cmml"></mi><mo id="S4.E14.m2.3.3.1.1.3" xref="S4.E14.m2.3.3.1.1.3.cmml">=</mo><mrow id="S4.E14.m2.3.3.1.1.2" xref="S4.E14.m2.3.3.1.1.2.cmml"><mrow id="S4.E14.m2.3.3.1.1.1.1.1" xref="S4.E14.m2.3.3.1.1.1.1.1.1.cmml"><mo id="S4.E14.m2.3.3.1.1.1.1.1.2" xref="S4.E14.m2.3.3.1.1.1.1.1.1.cmml">(</mo><mrow id="S4.E14.m2.3.3.1.1.1.1.1.1" xref="S4.E14.m2.3.3.1.1.1.1.1.1.cmml"><mrow id="S4.E14.m2.3.3.1.1.1.1.1.1.2" xref="S4.E14.m2.3.3.1.1.1.1.1.1.2.cmml"><mo id="S4.E14.m2.3.3.1.1.1.1.1.1.2a" xref="S4.E14.m2.3.3.1.1.1.1.1.1.2.cmml">−</mo><mstyle displaystyle="true" id="S4.E14.m2.3.3.1.1.1.1.1.1.2.2" xref="S4.E14.m2.3.3.1.1.1.1.1.1.2.2.cmml"><mfrac id="S4.E14.m2.3.3.1.1.1.1.1.1.2.2a" xref="S4.E14.m2.3.3.1.1.1.1.1.1.2.2.cmml"><msub id="S4.E14.m2.3.3.1.1.1.1.1.1.2.2.2" xref="S4.E14.m2.3.3.1.1.1.1.1.1.2.2.2.cmml"><mi id="S4.E14.m2.3.3.1.1.1.1.1.1.2.2.2.2" xref="S4.E14.m2.3.3.1.1.1.1.1.1.2.2.2.2.cmml">λ</mi><mi id="S4.E14.m2.3.3.1.1.1.1.1.1.2.2.2.3" xref="S4.E14.m2.3.3.1.1.1.1.1.1.2.2.2.3.cmml">i</mi></msub><mi id="S4.E14.m2.3.3.1.1.1.1.1.1.2.2.3" xref="S4.E14.m2.3.3.1.1.1.1.1.1.2.2.3.cmml">B</mi></mfrac></mstyle></mrow><mo id="S4.E14.m2.3.3.1.1.1.1.1.1.1" xref="S4.E14.m2.3.3.1.1.1.1.1.1.1.cmml">+</mo><mrow id="S4.E14.m2.3.3.1.1.1.1.1.1.3" xref="S4.E14.m2.3.3.1.1.1.1.1.1.3.cmml"><mstyle displaystyle="true" id="S4.E14.m2.3.3.1.1.1.1.1.1.3.2" xref="S4.E14.m2.3.3.1.1.1.1.1.1.3.2.cmml"><mfrac id="S4.E14.m2.3.3.1.1.1.1.1.1.3.2a" xref="S4.E14.m2.3.3.1.1.1.1.1.1.3.2.cmml"><mn id="S4.E14.m2.3.3.1.1.1.1.1.1.3.2.2" xref="S4.E14.m2.3.3.1.1.1.1.1.1.3.2.2.cmml">1</mn><mi id="S4.E14.m2.3.3.1.1.1.1.1.1.3.2.3" xref="S4.E14.m2.3.3.1.1.1.1.1.1.3.2.3.cmml">B</mi></mfrac></mstyle><mo lspace="0em" rspace="0em" id="S4.E14.m2.3.3.1.1.1.1.1.1.3.1" xref="S4.E14.m2.3.3.1.1.1.1.1.1.3.1.cmml">​</mo><mrow id="S4.E14.m2.3.3.1.1.1.1.1.1.3.3" xref="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.cmml"><mstyle displaystyle="true" id="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.1" xref="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.1.cmml"><munderover id="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.1a" xref="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.1.cmml"><mo movablelimits="false" id="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.1.2.2" xref="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.1.2.2.cmml">∑</mo><mrow id="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.1.2.3" xref="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.1.2.3.cmml"><mi id="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.1.2.3.2" xref="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.1.2.3.2.cmml">k</mi><mo id="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.1.2.3.1" xref="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.1.2.3.1.cmml">=</mo><mn id="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.1.2.3.3" xref="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.1.2.3.3.cmml">1</mn></mrow><mi id="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.1.3" xref="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.1.3.cmml">B</mi></munderover></mstyle><mstyle displaystyle="true" id="S4.E14.m2.2.2" xref="S4.E14.m2.2.2.cmml"><mfrac id="S4.E14.m2.2.2a" xref="S4.E14.m2.2.2.cmml"><msup id="S4.E14.m2.1.1.1" xref="S4.E14.m2.1.1.1.cmml"><mi id="S4.E14.m2.1.1.1.3" xref="S4.E14.m2.1.1.1.3.cmml">e</mi><msub id="S4.E14.m2.1.1.1.1.1" xref="S4.E14.m2.1.1.1.1.1.cmml"><mi id="S4.E14.m2.1.1.1.1.1.3" xref="S4.E14.m2.1.1.1.1.1.3.cmml">y</mi><mrow id="S4.E14.m2.1.1.1.1.1.1.1" xref="S4.E14.m2.1.1.1.1.1.1.1.cmml"><mi id="S4.E14.m2.1.1.1.1.1.1.1.3" xref="S4.E14.m2.1.1.1.1.1.1.1.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="S4.E14.m2.1.1.1.1.1.1.1.2" xref="S4.E14.m2.1.1.1.1.1.1.1.2.cmml">​</mo><mrow id="S4.E14.m2.1.1.1.1.1.1.1.4.2" xref="S4.E14.m2.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S4.E14.m2.1.1.1.1.1.1.1.4.2.1" xref="S4.E14.m2.1.1.1.1.1.1.1.cmml">(</mo><mi id="S4.E14.m2.1.1.1.1.1.1.1.1" xref="S4.E14.m2.1.1.1.1.1.1.1.1.cmml">k</mi><mo stretchy="false" id="S4.E14.m2.1.1.1.1.1.1.1.4.2.2" xref="S4.E14.m2.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></msub></msup><mrow id="S4.E14.m2.2.2.2" xref="S4.E14.m2.2.2.2.cmml"><msub id="S4.E14.m2.2.2.2.2" xref="S4.E14.m2.2.2.2.2.cmml"><mo id="S4.E14.m2.2.2.2.2.2" xref="S4.E14.m2.2.2.2.2.2.cmml">∑</mo><mi id="S4.E14.m2.2.2.2.2.3" xref="S4.E14.m2.2.2.2.2.3.cmml">j</mi></msub><msup id="S4.E14.m2.2.2.2.3" xref="S4.E14.m2.2.2.2.3.cmml"><mi id="S4.E14.m2.2.2.2.3.2" xref="S4.E14.m2.2.2.2.3.2.cmml">e</mi><msub id="S4.E14.m2.2.2.2.1.1" xref="S4.E14.m2.2.2.2.1.1.cmml"><mi id="S4.E14.m2.2.2.2.1.1.3" xref="S4.E14.m2.2.2.2.1.1.3.cmml">y</mi><mrow id="S4.E14.m2.2.2.2.1.1.1.1" xref="S4.E14.m2.2.2.2.1.1.1.1.cmml"><mi id="S4.E14.m2.2.2.2.1.1.1.1.3" xref="S4.E14.m2.2.2.2.1.1.1.1.3.cmml">j</mi><mo lspace="0em" rspace="0em" id="S4.E14.m2.2.2.2.1.1.1.1.2" xref="S4.E14.m2.2.2.2.1.1.1.1.2.cmml">​</mo><mrow id="S4.E14.m2.2.2.2.1.1.1.1.4.2" xref="S4.E14.m2.2.2.2.1.1.1.1.cmml"><mo stretchy="false" id="S4.E14.m2.2.2.2.1.1.1.1.4.2.1" xref="S4.E14.m2.2.2.2.1.1.1.1.cmml">(</mo><mi id="S4.E14.m2.2.2.2.1.1.1.1.1" xref="S4.E14.m2.2.2.2.1.1.1.1.1.cmml">k</mi><mo stretchy="false" id="S4.E14.m2.2.2.2.1.1.1.1.4.2.2" xref="S4.E14.m2.2.2.2.1.1.1.1.cmml">)</mo></mrow></mrow></msub></msup></mrow></mfrac></mstyle></mrow></mrow></mrow><mo id="S4.E14.m2.3.3.1.1.1.1.1.3" xref="S4.E14.m2.3.3.1.1.1.1.1.1.cmml">)</mo></mrow><mo lspace="0em" rspace="0em" id="S4.E14.m2.3.3.1.1.2.3" xref="S4.E14.m2.3.3.1.1.2.3.cmml">​</mo><mrow id="S4.E14.m2.3.3.1.1.2.2.1" xref="S4.E14.m2.3.3.1.1.2.2.1.1.cmml"><mo id="S4.E14.m2.3.3.1.1.2.2.1.2" xref="S4.E14.m2.3.3.1.1.2.2.1.1.cmml">(</mo><mrow id="S4.E14.m2.3.3.1.1.2.2.1.1" xref="S4.E14.m2.3.3.1.1.2.2.1.1.cmml"><msup id="S4.E14.m2.3.3.1.1.2.2.1.1.2" xref="S4.E14.m2.3.3.1.1.2.2.1.1.2.cmml"><mn id="S4.E14.m2.3.3.1.1.2.2.1.1.2.2" xref="S4.E14.m2.3.3.1.1.2.2.1.1.2.2.cmml">𝟙</mn><mi id="S4.E14.m2.3.3.1.1.2.2.1.1.2.3" xref="S4.E14.m2.3.3.1.1.2.2.1.1.2.3.cmml">T</mi></msup><mo lspace="0.222em" rspace="0.222em" id="S4.E14.m2.3.3.1.1.2.2.1.1.1" xref="S4.E14.m2.3.3.1.1.2.2.1.1.1.cmml">⋅</mo><msub id="S4.E14.m2.3.3.1.1.2.2.1.1.3" xref="S4.E14.m2.3.3.1.1.2.2.1.1.3.cmml"><mi id="S4.E14.m2.3.3.1.1.2.2.1.1.3.2" xref="S4.E14.m2.3.3.1.1.2.2.1.1.3.2.cmml">𝒂</mi><mrow id="S4.E14.m2.3.3.1.1.2.2.1.1.3.3" xref="S4.E14.m2.3.3.1.1.2.2.1.1.3.3.cmml"><mi id="S4.E14.m2.3.3.1.1.2.2.1.1.3.3.2" xref="S4.E14.m2.3.3.1.1.2.2.1.1.3.3.2.cmml">L</mi><mo id="S4.E14.m2.3.3.1.1.2.2.1.1.3.3.1" xref="S4.E14.m2.3.3.1.1.2.2.1.1.3.3.1.cmml">−</mo><mn id="S4.E14.m2.3.3.1.1.2.2.1.1.3.3.3" xref="S4.E14.m2.3.3.1.1.2.2.1.1.3.3.3.cmml">1</mn></mrow></msub></mrow><mo id="S4.E14.m2.3.3.1.1.2.2.1.3" xref="S4.E14.m2.3.3.1.1.2.2.1.1.cmml">)</mo></mrow></mrow></mrow><mo lspace="0.170em" id="S4.E14.m2.3.3.1.2" xref="S4.E14.m2.3.3.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.E14.m2.3b"><apply id="S4.E14.m2.3.3.1.1.cmml" xref="S4.E14.m2.3.3.1"><eq id="S4.E14.m2.3.3.1.1.3.cmml" xref="S4.E14.m2.3.3.1.1.3"></eq><csymbol cd="latexml" id="S4.E14.m2.3.3.1.1.4.cmml" xref="S4.E14.m2.3.3.1.1.4">absent</csymbol><apply id="S4.E14.m2.3.3.1.1.2.cmml" xref="S4.E14.m2.3.3.1.1.2"><times id="S4.E14.m2.3.3.1.1.2.3.cmml" xref="S4.E14.m2.3.3.1.1.2.3"></times><apply id="S4.E14.m2.3.3.1.1.1.1.1.1.cmml" xref="S4.E14.m2.3.3.1.1.1.1.1"><plus id="S4.E14.m2.3.3.1.1.1.1.1.1.1.cmml" xref="S4.E14.m2.3.3.1.1.1.1.1.1.1"></plus><apply id="S4.E14.m2.3.3.1.1.1.1.1.1.2.cmml" xref="S4.E14.m2.3.3.1.1.1.1.1.1.2"><minus id="S4.E14.m2.3.3.1.1.1.1.1.1.2.1.cmml" xref="S4.E14.m2.3.3.1.1.1.1.1.1.2"></minus><apply id="S4.E14.m2.3.3.1.1.1.1.1.1.2.2.cmml" xref="S4.E14.m2.3.3.1.1.1.1.1.1.2.2"><divide id="S4.E14.m2.3.3.1.1.1.1.1.1.2.2.1.cmml" xref="S4.E14.m2.3.3.1.1.1.1.1.1.2.2"></divide><apply id="S4.E14.m2.3.3.1.1.1.1.1.1.2.2.2.cmml" xref="S4.E14.m2.3.3.1.1.1.1.1.1.2.2.2"><csymbol cd="ambiguous" id="S4.E14.m2.3.3.1.1.1.1.1.1.2.2.2.1.cmml" xref="S4.E14.m2.3.3.1.1.1.1.1.1.2.2.2">subscript</csymbol><ci id="S4.E14.m2.3.3.1.1.1.1.1.1.2.2.2.2.cmml" xref="S4.E14.m2.3.3.1.1.1.1.1.1.2.2.2.2">𝜆</ci><ci id="S4.E14.m2.3.3.1.1.1.1.1.1.2.2.2.3.cmml" xref="S4.E14.m2.3.3.1.1.1.1.1.1.2.2.2.3">𝑖</ci></apply><ci id="S4.E14.m2.3.3.1.1.1.1.1.1.2.2.3.cmml" xref="S4.E14.m2.3.3.1.1.1.1.1.1.2.2.3">𝐵</ci></apply></apply><apply id="S4.E14.m2.3.3.1.1.1.1.1.1.3.cmml" xref="S4.E14.m2.3.3.1.1.1.1.1.1.3"><times id="S4.E14.m2.3.3.1.1.1.1.1.1.3.1.cmml" xref="S4.E14.m2.3.3.1.1.1.1.1.1.3.1"></times><apply id="S4.E14.m2.3.3.1.1.1.1.1.1.3.2.cmml" xref="S4.E14.m2.3.3.1.1.1.1.1.1.3.2"><divide id="S4.E14.m2.3.3.1.1.1.1.1.1.3.2.1.cmml" xref="S4.E14.m2.3.3.1.1.1.1.1.1.3.2"></divide><cn type="integer" id="S4.E14.m2.3.3.1.1.1.1.1.1.3.2.2.cmml" xref="S4.E14.m2.3.3.1.1.1.1.1.1.3.2.2">1</cn><ci id="S4.E14.m2.3.3.1.1.1.1.1.1.3.2.3.cmml" xref="S4.E14.m2.3.3.1.1.1.1.1.1.3.2.3">𝐵</ci></apply><apply id="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.cmml" xref="S4.E14.m2.3.3.1.1.1.1.1.1.3.3"><apply id="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.1.cmml" xref="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.1"><csymbol cd="ambiguous" id="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.1.1.cmml" xref="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.1">superscript</csymbol><apply id="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.1.2.cmml" xref="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.1"><csymbol cd="ambiguous" id="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.1.2.1.cmml" xref="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.1">subscript</csymbol><sum id="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.1.2.2.cmml" xref="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.1.2.2"></sum><apply id="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.1.2.3.cmml" xref="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.1.2.3"><eq id="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.1.2.3.1.cmml" xref="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.1.2.3.1"></eq><ci id="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.1.2.3.2.cmml" xref="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.1.2.3.2">𝑘</ci><cn type="integer" id="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.1.2.3.3.cmml" xref="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.1.2.3.3">1</cn></apply></apply><ci id="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.1.3.cmml" xref="S4.E14.m2.3.3.1.1.1.1.1.1.3.3.1.3">𝐵</ci></apply><apply id="S4.E14.m2.2.2.cmml" xref="S4.E14.m2.2.2"><divide id="S4.E14.m2.2.2.3.cmml" xref="S4.E14.m2.2.2"></divide><apply id="S4.E14.m2.1.1.1.cmml" xref="S4.E14.m2.1.1.1"><csymbol cd="ambiguous" id="S4.E14.m2.1.1.1.2.cmml" xref="S4.E14.m2.1.1.1">superscript</csymbol><ci id="S4.E14.m2.1.1.1.3.cmml" xref="S4.E14.m2.1.1.1.3">𝑒</ci><apply id="S4.E14.m2.1.1.1.1.1.cmml" xref="S4.E14.m2.1.1.1.1.1"><csymbol cd="ambiguous" id="S4.E14.m2.1.1.1.1.1.2.cmml" xref="S4.E14.m2.1.1.1.1.1">subscript</csymbol><ci id="S4.E14.m2.1.1.1.1.1.3.cmml" xref="S4.E14.m2.1.1.1.1.1.3">𝑦</ci><apply id="S4.E14.m2.1.1.1.1.1.1.1.cmml" xref="S4.E14.m2.1.1.1.1.1.1.1"><times id="S4.E14.m2.1.1.1.1.1.1.1.2.cmml" xref="S4.E14.m2.1.1.1.1.1.1.1.2"></times><ci id="S4.E14.m2.1.1.1.1.1.1.1.3.cmml" xref="S4.E14.m2.1.1.1.1.1.1.1.3">𝑖</ci><ci id="S4.E14.m2.1.1.1.1.1.1.1.1.cmml" xref="S4.E14.m2.1.1.1.1.1.1.1.1">𝑘</ci></apply></apply></apply><apply id="S4.E14.m2.2.2.2.cmml" xref="S4.E14.m2.2.2.2"><apply id="S4.E14.m2.2.2.2.2.cmml" xref="S4.E14.m2.2.2.2.2"><csymbol cd="ambiguous" id="S4.E14.m2.2.2.2.2.1.cmml" xref="S4.E14.m2.2.2.2.2">subscript</csymbol><sum id="S4.E14.m2.2.2.2.2.2.cmml" xref="S4.E14.m2.2.2.2.2.2"></sum><ci id="S4.E14.m2.2.2.2.2.3.cmml" xref="S4.E14.m2.2.2.2.2.3">𝑗</ci></apply><apply id="S4.E14.m2.2.2.2.3.cmml" xref="S4.E14.m2.2.2.2.3"><csymbol cd="ambiguous" id="S4.E14.m2.2.2.2.3.1.cmml" xref="S4.E14.m2.2.2.2.3">superscript</csymbol><ci id="S4.E14.m2.2.2.2.3.2.cmml" xref="S4.E14.m2.2.2.2.3.2">𝑒</ci><apply id="S4.E14.m2.2.2.2.1.1.cmml" xref="S4.E14.m2.2.2.2.1.1"><csymbol cd="ambiguous" id="S4.E14.m2.2.2.2.1.1.2.cmml" xref="S4.E14.m2.2.2.2.1.1">subscript</csymbol><ci id="S4.E14.m2.2.2.2.1.1.3.cmml" xref="S4.E14.m2.2.2.2.1.1.3">𝑦</ci><apply id="S4.E14.m2.2.2.2.1.1.1.1.cmml" xref="S4.E14.m2.2.2.2.1.1.1.1"><times id="S4.E14.m2.2.2.2.1.1.1.1.2.cmml" xref="S4.E14.m2.2.2.2.1.1.1.1.2"></times><ci id="S4.E14.m2.2.2.2.1.1.1.1.3.cmml" xref="S4.E14.m2.2.2.2.1.1.1.1.3">𝑗</ci><ci id="S4.E14.m2.2.2.2.1.1.1.1.1.cmml" xref="S4.E14.m2.2.2.2.1.1.1.1.1">𝑘</ci></apply></apply></apply></apply></apply></apply></apply></apply><apply id="S4.E14.m2.3.3.1.1.2.2.1.1.cmml" xref="S4.E14.m2.3.3.1.1.2.2.1"><ci id="S4.E14.m2.3.3.1.1.2.2.1.1.1.cmml" xref="S4.E14.m2.3.3.1.1.2.2.1.1.1">⋅</ci><apply id="S4.E14.m2.3.3.1.1.2.2.1.1.2.cmml" xref="S4.E14.m2.3.3.1.1.2.2.1.1.2"><csymbol cd="ambiguous" id="S4.E14.m2.3.3.1.1.2.2.1.1.2.1.cmml" xref="S4.E14.m2.3.3.1.1.2.2.1.1.2">superscript</csymbol><cn type="integer" id="S4.E14.m2.3.3.1.1.2.2.1.1.2.2.cmml" xref="S4.E14.m2.3.3.1.1.2.2.1.1.2.2">1</cn><ci id="S4.E14.m2.3.3.1.1.2.2.1.1.2.3.cmml" xref="S4.E14.m2.3.3.1.1.2.2.1.1.2.3">𝑇</ci></apply><apply id="S4.E14.m2.3.3.1.1.2.2.1.1.3.cmml" xref="S4.E14.m2.3.3.1.1.2.2.1.1.3"><csymbol cd="ambiguous" id="S4.E14.m2.3.3.1.1.2.2.1.1.3.1.cmml" xref="S4.E14.m2.3.3.1.1.2.2.1.1.3">subscript</csymbol><ci id="S4.E14.m2.3.3.1.1.2.2.1.1.3.2.cmml" xref="S4.E14.m2.3.3.1.1.2.2.1.1.3.2">𝒂</ci><apply id="S4.E14.m2.3.3.1.1.2.2.1.1.3.3.cmml" xref="S4.E14.m2.3.3.1.1.2.2.1.1.3.3"><minus id="S4.E14.m2.3.3.1.1.2.2.1.1.3.3.1.cmml" xref="S4.E14.m2.3.3.1.1.2.2.1.1.3.3.1"></minus><ci id="S4.E14.m2.3.3.1.1.2.2.1.1.3.3.2.cmml" xref="S4.E14.m2.3.3.1.1.2.2.1.1.3.3.2">𝐿</ci><cn type="integer" id="S4.E14.m2.3.3.1.1.2.2.1.1.3.3.3.cmml" xref="S4.E14.m2.3.3.1.1.2.2.1.1.3.3.3">1</cn></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.E14.m2.3c">\displaystyle=\left(-\frac{\lambda_{i}}{B}+\frac{1}{B}\sum_{k=1}^{B}\frac{e^{y_{i(k)}}}{\sum\nolimits_{j}e^{y_{j(k)}}}\right)\left(\mathds{1}^{T}\cdot\bm{a}_{L-1}\right)\,.</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(14)</span></td>
</tr></tbody>
</table>
<p id="Thmproofx2.p1.2" class="ltx_p">When <math id="Thmproofx2.p1.2.m1.2" class="ltx_Math" alttext="\sum_{k=1}^{B}\frac{e^{y_{i(k)}}}{\sum\nolimits_{j}e^{y_{j(k)}}}" display="inline"><semantics id="Thmproofx2.p1.2.m1.2a"><mrow id="Thmproofx2.p1.2.m1.2.3" xref="Thmproofx2.p1.2.m1.2.3.cmml"><msubsup id="Thmproofx2.p1.2.m1.2.3.1" xref="Thmproofx2.p1.2.m1.2.3.1.cmml"><mo id="Thmproofx2.p1.2.m1.2.3.1.2.2" xref="Thmproofx2.p1.2.m1.2.3.1.2.2.cmml">∑</mo><mrow id="Thmproofx2.p1.2.m1.2.3.1.2.3" xref="Thmproofx2.p1.2.m1.2.3.1.2.3.cmml"><mi id="Thmproofx2.p1.2.m1.2.3.1.2.3.2" xref="Thmproofx2.p1.2.m1.2.3.1.2.3.2.cmml">k</mi><mo id="Thmproofx2.p1.2.m1.2.3.1.2.3.1" xref="Thmproofx2.p1.2.m1.2.3.1.2.3.1.cmml">=</mo><mn id="Thmproofx2.p1.2.m1.2.3.1.2.3.3" xref="Thmproofx2.p1.2.m1.2.3.1.2.3.3.cmml">1</mn></mrow><mi id="Thmproofx2.p1.2.m1.2.3.1.3" xref="Thmproofx2.p1.2.m1.2.3.1.3.cmml">B</mi></msubsup><mfrac id="Thmproofx2.p1.2.m1.2.2" xref="Thmproofx2.p1.2.m1.2.2.cmml"><msup id="Thmproofx2.p1.2.m1.1.1.1" xref="Thmproofx2.p1.2.m1.1.1.1.cmml"><mi id="Thmproofx2.p1.2.m1.1.1.1.3" xref="Thmproofx2.p1.2.m1.1.1.1.3.cmml">e</mi><msub id="Thmproofx2.p1.2.m1.1.1.1.1.1" xref="Thmproofx2.p1.2.m1.1.1.1.1.1.cmml"><mi id="Thmproofx2.p1.2.m1.1.1.1.1.1.3" xref="Thmproofx2.p1.2.m1.1.1.1.1.1.3.cmml">y</mi><mrow id="Thmproofx2.p1.2.m1.1.1.1.1.1.1.1" xref="Thmproofx2.p1.2.m1.1.1.1.1.1.1.1.cmml"><mi id="Thmproofx2.p1.2.m1.1.1.1.1.1.1.1.3" xref="Thmproofx2.p1.2.m1.1.1.1.1.1.1.1.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="Thmproofx2.p1.2.m1.1.1.1.1.1.1.1.2" xref="Thmproofx2.p1.2.m1.1.1.1.1.1.1.1.2.cmml">​</mo><mrow id="Thmproofx2.p1.2.m1.1.1.1.1.1.1.1.4.2" xref="Thmproofx2.p1.2.m1.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="Thmproofx2.p1.2.m1.1.1.1.1.1.1.1.4.2.1" xref="Thmproofx2.p1.2.m1.1.1.1.1.1.1.1.cmml">(</mo><mi id="Thmproofx2.p1.2.m1.1.1.1.1.1.1.1.1" xref="Thmproofx2.p1.2.m1.1.1.1.1.1.1.1.1.cmml">k</mi><mo stretchy="false" id="Thmproofx2.p1.2.m1.1.1.1.1.1.1.1.4.2.2" xref="Thmproofx2.p1.2.m1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></msub></msup><mrow id="Thmproofx2.p1.2.m1.2.2.2" xref="Thmproofx2.p1.2.m1.2.2.2.cmml"><mstyle displaystyle="false" id="Thmproofx2.p1.2.m1.2.2.2.2" xref="Thmproofx2.p1.2.m1.2.2.2.2.cmml"><msub id="Thmproofx2.p1.2.m1.2.2.2.2a" xref="Thmproofx2.p1.2.m1.2.2.2.2.cmml"><mo id="Thmproofx2.p1.2.m1.2.2.2.2.2" xref="Thmproofx2.p1.2.m1.2.2.2.2.2.cmml">∑</mo><mi id="Thmproofx2.p1.2.m1.2.2.2.2.3" xref="Thmproofx2.p1.2.m1.2.2.2.2.3.cmml">j</mi></msub></mstyle><msup id="Thmproofx2.p1.2.m1.2.2.2.3" xref="Thmproofx2.p1.2.m1.2.2.2.3.cmml"><mi id="Thmproofx2.p1.2.m1.2.2.2.3.2" xref="Thmproofx2.p1.2.m1.2.2.2.3.2.cmml">e</mi><msub id="Thmproofx2.p1.2.m1.2.2.2.1.1" xref="Thmproofx2.p1.2.m1.2.2.2.1.1.cmml"><mi id="Thmproofx2.p1.2.m1.2.2.2.1.1.3" xref="Thmproofx2.p1.2.m1.2.2.2.1.1.3.cmml">y</mi><mrow id="Thmproofx2.p1.2.m1.2.2.2.1.1.1.1" xref="Thmproofx2.p1.2.m1.2.2.2.1.1.1.1.cmml"><mi id="Thmproofx2.p1.2.m1.2.2.2.1.1.1.1.3" xref="Thmproofx2.p1.2.m1.2.2.2.1.1.1.1.3.cmml">j</mi><mo lspace="0em" rspace="0em" id="Thmproofx2.p1.2.m1.2.2.2.1.1.1.1.2" xref="Thmproofx2.p1.2.m1.2.2.2.1.1.1.1.2.cmml">​</mo><mrow id="Thmproofx2.p1.2.m1.2.2.2.1.1.1.1.4.2" xref="Thmproofx2.p1.2.m1.2.2.2.1.1.1.1.cmml"><mo stretchy="false" id="Thmproofx2.p1.2.m1.2.2.2.1.1.1.1.4.2.1" xref="Thmproofx2.p1.2.m1.2.2.2.1.1.1.1.cmml">(</mo><mi id="Thmproofx2.p1.2.m1.2.2.2.1.1.1.1.1" xref="Thmproofx2.p1.2.m1.2.2.2.1.1.1.1.1.cmml">k</mi><mo stretchy="false" id="Thmproofx2.p1.2.m1.2.2.2.1.1.1.1.4.2.2" xref="Thmproofx2.p1.2.m1.2.2.2.1.1.1.1.cmml">)</mo></mrow></mrow></msub></msup></mrow></mfrac></mrow><annotation-xml encoding="MathML-Content" id="Thmproofx2.p1.2.m1.2b"><apply id="Thmproofx2.p1.2.m1.2.3.cmml" xref="Thmproofx2.p1.2.m1.2.3"><apply id="Thmproofx2.p1.2.m1.2.3.1.cmml" xref="Thmproofx2.p1.2.m1.2.3.1"><csymbol cd="ambiguous" id="Thmproofx2.p1.2.m1.2.3.1.1.cmml" xref="Thmproofx2.p1.2.m1.2.3.1">superscript</csymbol><apply id="Thmproofx2.p1.2.m1.2.3.1.2.cmml" xref="Thmproofx2.p1.2.m1.2.3.1"><csymbol cd="ambiguous" id="Thmproofx2.p1.2.m1.2.3.1.2.1.cmml" xref="Thmproofx2.p1.2.m1.2.3.1">subscript</csymbol><sum id="Thmproofx2.p1.2.m1.2.3.1.2.2.cmml" xref="Thmproofx2.p1.2.m1.2.3.1.2.2"></sum><apply id="Thmproofx2.p1.2.m1.2.3.1.2.3.cmml" xref="Thmproofx2.p1.2.m1.2.3.1.2.3"><eq id="Thmproofx2.p1.2.m1.2.3.1.2.3.1.cmml" xref="Thmproofx2.p1.2.m1.2.3.1.2.3.1"></eq><ci id="Thmproofx2.p1.2.m1.2.3.1.2.3.2.cmml" xref="Thmproofx2.p1.2.m1.2.3.1.2.3.2">𝑘</ci><cn type="integer" id="Thmproofx2.p1.2.m1.2.3.1.2.3.3.cmml" xref="Thmproofx2.p1.2.m1.2.3.1.2.3.3">1</cn></apply></apply><ci id="Thmproofx2.p1.2.m1.2.3.1.3.cmml" xref="Thmproofx2.p1.2.m1.2.3.1.3">𝐵</ci></apply><apply id="Thmproofx2.p1.2.m1.2.2.cmml" xref="Thmproofx2.p1.2.m1.2.2"><divide id="Thmproofx2.p1.2.m1.2.2.3.cmml" xref="Thmproofx2.p1.2.m1.2.2"></divide><apply id="Thmproofx2.p1.2.m1.1.1.1.cmml" xref="Thmproofx2.p1.2.m1.1.1.1"><csymbol cd="ambiguous" id="Thmproofx2.p1.2.m1.1.1.1.2.cmml" xref="Thmproofx2.p1.2.m1.1.1.1">superscript</csymbol><ci id="Thmproofx2.p1.2.m1.1.1.1.3.cmml" xref="Thmproofx2.p1.2.m1.1.1.1.3">𝑒</ci><apply id="Thmproofx2.p1.2.m1.1.1.1.1.1.cmml" xref="Thmproofx2.p1.2.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="Thmproofx2.p1.2.m1.1.1.1.1.1.2.cmml" xref="Thmproofx2.p1.2.m1.1.1.1.1.1">subscript</csymbol><ci id="Thmproofx2.p1.2.m1.1.1.1.1.1.3.cmml" xref="Thmproofx2.p1.2.m1.1.1.1.1.1.3">𝑦</ci><apply id="Thmproofx2.p1.2.m1.1.1.1.1.1.1.1.cmml" xref="Thmproofx2.p1.2.m1.1.1.1.1.1.1.1"><times id="Thmproofx2.p1.2.m1.1.1.1.1.1.1.1.2.cmml" xref="Thmproofx2.p1.2.m1.1.1.1.1.1.1.1.2"></times><ci id="Thmproofx2.p1.2.m1.1.1.1.1.1.1.1.3.cmml" xref="Thmproofx2.p1.2.m1.1.1.1.1.1.1.1.3">𝑖</ci><ci id="Thmproofx2.p1.2.m1.1.1.1.1.1.1.1.1.cmml" xref="Thmproofx2.p1.2.m1.1.1.1.1.1.1.1.1">𝑘</ci></apply></apply></apply><apply id="Thmproofx2.p1.2.m1.2.2.2.cmml" xref="Thmproofx2.p1.2.m1.2.2.2"><apply id="Thmproofx2.p1.2.m1.2.2.2.2.cmml" xref="Thmproofx2.p1.2.m1.2.2.2.2"><csymbol cd="ambiguous" id="Thmproofx2.p1.2.m1.2.2.2.2.1.cmml" xref="Thmproofx2.p1.2.m1.2.2.2.2">subscript</csymbol><sum id="Thmproofx2.p1.2.m1.2.2.2.2.2.cmml" xref="Thmproofx2.p1.2.m1.2.2.2.2.2"></sum><ci id="Thmproofx2.p1.2.m1.2.2.2.2.3.cmml" xref="Thmproofx2.p1.2.m1.2.2.2.2.3">𝑗</ci></apply><apply id="Thmproofx2.p1.2.m1.2.2.2.3.cmml" xref="Thmproofx2.p1.2.m1.2.2.2.3"><csymbol cd="ambiguous" id="Thmproofx2.p1.2.m1.2.2.2.3.1.cmml" xref="Thmproofx2.p1.2.m1.2.2.2.3">superscript</csymbol><ci id="Thmproofx2.p1.2.m1.2.2.2.3.2.cmml" xref="Thmproofx2.p1.2.m1.2.2.2.3.2">𝑒</ci><apply id="Thmproofx2.p1.2.m1.2.2.2.1.1.cmml" xref="Thmproofx2.p1.2.m1.2.2.2.1.1"><csymbol cd="ambiguous" id="Thmproofx2.p1.2.m1.2.2.2.1.1.2.cmml" xref="Thmproofx2.p1.2.m1.2.2.2.1.1">subscript</csymbol><ci id="Thmproofx2.p1.2.m1.2.2.2.1.1.3.cmml" xref="Thmproofx2.p1.2.m1.2.2.2.1.1.3">𝑦</ci><apply id="Thmproofx2.p1.2.m1.2.2.2.1.1.1.1.cmml" xref="Thmproofx2.p1.2.m1.2.2.2.1.1.1.1"><times id="Thmproofx2.p1.2.m1.2.2.2.1.1.1.1.2.cmml" xref="Thmproofx2.p1.2.m1.2.2.2.1.1.1.1.2"></times><ci id="Thmproofx2.p1.2.m1.2.2.2.1.1.1.1.3.cmml" xref="Thmproofx2.p1.2.m1.2.2.2.1.1.1.1.3">𝑗</ci><ci id="Thmproofx2.p1.2.m1.2.2.2.1.1.1.1.1.cmml" xref="Thmproofx2.p1.2.m1.2.2.2.1.1.1.1.1">𝑘</ci></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx2.p1.2.m1.2c">\sum_{k=1}^{B}\frac{e^{y_{i(k)}}}{\sum\nolimits_{j}e^{y_{j(k)}}}</annotation></semantics></math> is close to zero, we can write</p>
<table id="Sx2.EGx8" class="ltx_equationgroup ltx_eqn_align ltx_eqn_table">

<tbody id="S4.E15"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S4.E15.m1.1" class="ltx_Math" alttext="\displaystyle g_{i}\approx-\frac{\lambda_{i}}{B}\left(\mathds{1}^{T}\cdot\bm{a}_{L-1}\right)\,," display="inline"><semantics id="S4.E15.m1.1a"><mrow id="S4.E15.m1.1.1.1" xref="S4.E15.m1.1.1.1.1.cmml"><mrow id="S4.E15.m1.1.1.1.1" xref="S4.E15.m1.1.1.1.1.cmml"><msub id="S4.E15.m1.1.1.1.1.3" xref="S4.E15.m1.1.1.1.1.3.cmml"><mi id="S4.E15.m1.1.1.1.1.3.2" xref="S4.E15.m1.1.1.1.1.3.2.cmml">g</mi><mi id="S4.E15.m1.1.1.1.1.3.3" xref="S4.E15.m1.1.1.1.1.3.3.cmml">i</mi></msub><mo id="S4.E15.m1.1.1.1.1.2" xref="S4.E15.m1.1.1.1.1.2.cmml">≈</mo><mrow id="S4.E15.m1.1.1.1.1.1" xref="S4.E15.m1.1.1.1.1.1.cmml"><mo id="S4.E15.m1.1.1.1.1.1a" xref="S4.E15.m1.1.1.1.1.1.cmml">−</mo><mrow id="S4.E15.m1.1.1.1.1.1.1" xref="S4.E15.m1.1.1.1.1.1.1.cmml"><mstyle displaystyle="true" id="S4.E15.m1.1.1.1.1.1.1.3" xref="S4.E15.m1.1.1.1.1.1.1.3.cmml"><mfrac id="S4.E15.m1.1.1.1.1.1.1.3a" xref="S4.E15.m1.1.1.1.1.1.1.3.cmml"><msub id="S4.E15.m1.1.1.1.1.1.1.3.2" xref="S4.E15.m1.1.1.1.1.1.1.3.2.cmml"><mi id="S4.E15.m1.1.1.1.1.1.1.3.2.2" xref="S4.E15.m1.1.1.1.1.1.1.3.2.2.cmml">λ</mi><mi id="S4.E15.m1.1.1.1.1.1.1.3.2.3" xref="S4.E15.m1.1.1.1.1.1.1.3.2.3.cmml">i</mi></msub><mi id="S4.E15.m1.1.1.1.1.1.1.3.3" xref="S4.E15.m1.1.1.1.1.1.1.3.3.cmml">B</mi></mfrac></mstyle><mo lspace="0em" rspace="0em" id="S4.E15.m1.1.1.1.1.1.1.2" xref="S4.E15.m1.1.1.1.1.1.1.2.cmml">​</mo><mrow id="S4.E15.m1.1.1.1.1.1.1.1.1" xref="S4.E15.m1.1.1.1.1.1.1.1.1.1.cmml"><mo id="S4.E15.m1.1.1.1.1.1.1.1.1.2" xref="S4.E15.m1.1.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S4.E15.m1.1.1.1.1.1.1.1.1.1" xref="S4.E15.m1.1.1.1.1.1.1.1.1.1.cmml"><msup id="S4.E15.m1.1.1.1.1.1.1.1.1.1.2" xref="S4.E15.m1.1.1.1.1.1.1.1.1.1.2.cmml"><mn id="S4.E15.m1.1.1.1.1.1.1.1.1.1.2.2" xref="S4.E15.m1.1.1.1.1.1.1.1.1.1.2.2.cmml">𝟙</mn><mi id="S4.E15.m1.1.1.1.1.1.1.1.1.1.2.3" xref="S4.E15.m1.1.1.1.1.1.1.1.1.1.2.3.cmml">T</mi></msup><mo lspace="0.222em" rspace="0.222em" id="S4.E15.m1.1.1.1.1.1.1.1.1.1.1" xref="S4.E15.m1.1.1.1.1.1.1.1.1.1.1.cmml">⋅</mo><msub id="S4.E15.m1.1.1.1.1.1.1.1.1.1.3" xref="S4.E15.m1.1.1.1.1.1.1.1.1.1.3.cmml"><mi id="S4.E15.m1.1.1.1.1.1.1.1.1.1.3.2" xref="S4.E15.m1.1.1.1.1.1.1.1.1.1.3.2.cmml">𝒂</mi><mrow id="S4.E15.m1.1.1.1.1.1.1.1.1.1.3.3" xref="S4.E15.m1.1.1.1.1.1.1.1.1.1.3.3.cmml"><mi id="S4.E15.m1.1.1.1.1.1.1.1.1.1.3.3.2" xref="S4.E15.m1.1.1.1.1.1.1.1.1.1.3.3.2.cmml">L</mi><mo id="S4.E15.m1.1.1.1.1.1.1.1.1.1.3.3.1" xref="S4.E15.m1.1.1.1.1.1.1.1.1.1.3.3.1.cmml">−</mo><mn id="S4.E15.m1.1.1.1.1.1.1.1.1.1.3.3.3" xref="S4.E15.m1.1.1.1.1.1.1.1.1.1.3.3.3.cmml">1</mn></mrow></msub></mrow><mo rspace="0.170em" id="S4.E15.m1.1.1.1.1.1.1.1.1.3" xref="S4.E15.m1.1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow><mo id="S4.E15.m1.1.1.1.2" xref="S4.E15.m1.1.1.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.E15.m1.1b"><apply id="S4.E15.m1.1.1.1.1.cmml" xref="S4.E15.m1.1.1.1"><approx id="S4.E15.m1.1.1.1.1.2.cmml" xref="S4.E15.m1.1.1.1.1.2"></approx><apply id="S4.E15.m1.1.1.1.1.3.cmml" xref="S4.E15.m1.1.1.1.1.3"><csymbol cd="ambiguous" id="S4.E15.m1.1.1.1.1.3.1.cmml" xref="S4.E15.m1.1.1.1.1.3">subscript</csymbol><ci id="S4.E15.m1.1.1.1.1.3.2.cmml" xref="S4.E15.m1.1.1.1.1.3.2">𝑔</ci><ci id="S4.E15.m1.1.1.1.1.3.3.cmml" xref="S4.E15.m1.1.1.1.1.3.3">𝑖</ci></apply><apply id="S4.E15.m1.1.1.1.1.1.cmml" xref="S4.E15.m1.1.1.1.1.1"><minus id="S4.E15.m1.1.1.1.1.1.2.cmml" xref="S4.E15.m1.1.1.1.1.1"></minus><apply id="S4.E15.m1.1.1.1.1.1.1.cmml" xref="S4.E15.m1.1.1.1.1.1.1"><times id="S4.E15.m1.1.1.1.1.1.1.2.cmml" xref="S4.E15.m1.1.1.1.1.1.1.2"></times><apply id="S4.E15.m1.1.1.1.1.1.1.3.cmml" xref="S4.E15.m1.1.1.1.1.1.1.3"><divide id="S4.E15.m1.1.1.1.1.1.1.3.1.cmml" xref="S4.E15.m1.1.1.1.1.1.1.3"></divide><apply id="S4.E15.m1.1.1.1.1.1.1.3.2.cmml" xref="S4.E15.m1.1.1.1.1.1.1.3.2"><csymbol cd="ambiguous" id="S4.E15.m1.1.1.1.1.1.1.3.2.1.cmml" xref="S4.E15.m1.1.1.1.1.1.1.3.2">subscript</csymbol><ci id="S4.E15.m1.1.1.1.1.1.1.3.2.2.cmml" xref="S4.E15.m1.1.1.1.1.1.1.3.2.2">𝜆</ci><ci id="S4.E15.m1.1.1.1.1.1.1.3.2.3.cmml" xref="S4.E15.m1.1.1.1.1.1.1.3.2.3">𝑖</ci></apply><ci id="S4.E15.m1.1.1.1.1.1.1.3.3.cmml" xref="S4.E15.m1.1.1.1.1.1.1.3.3">𝐵</ci></apply><apply id="S4.E15.m1.1.1.1.1.1.1.1.1.1.cmml" xref="S4.E15.m1.1.1.1.1.1.1.1.1"><ci id="S4.E15.m1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S4.E15.m1.1.1.1.1.1.1.1.1.1.1">⋅</ci><apply id="S4.E15.m1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S4.E15.m1.1.1.1.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S4.E15.m1.1.1.1.1.1.1.1.1.1.2.1.cmml" xref="S4.E15.m1.1.1.1.1.1.1.1.1.1.2">superscript</csymbol><cn type="integer" id="S4.E15.m1.1.1.1.1.1.1.1.1.1.2.2.cmml" xref="S4.E15.m1.1.1.1.1.1.1.1.1.1.2.2">1</cn><ci id="S4.E15.m1.1.1.1.1.1.1.1.1.1.2.3.cmml" xref="S4.E15.m1.1.1.1.1.1.1.1.1.1.2.3">𝑇</ci></apply><apply id="S4.E15.m1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S4.E15.m1.1.1.1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S4.E15.m1.1.1.1.1.1.1.1.1.1.3.1.cmml" xref="S4.E15.m1.1.1.1.1.1.1.1.1.1.3">subscript</csymbol><ci id="S4.E15.m1.1.1.1.1.1.1.1.1.1.3.2.cmml" xref="S4.E15.m1.1.1.1.1.1.1.1.1.1.3.2">𝒂</ci><apply id="S4.E15.m1.1.1.1.1.1.1.1.1.1.3.3.cmml" xref="S4.E15.m1.1.1.1.1.1.1.1.1.1.3.3"><minus id="S4.E15.m1.1.1.1.1.1.1.1.1.1.3.3.1.cmml" xref="S4.E15.m1.1.1.1.1.1.1.1.1.1.3.3.1"></minus><ci id="S4.E15.m1.1.1.1.1.1.1.1.1.1.3.3.2.cmml" xref="S4.E15.m1.1.1.1.1.1.1.1.1.1.3.3.2">𝐿</ci><cn type="integer" id="S4.E15.m1.1.1.1.1.1.1.1.1.1.3.3.3.cmml" xref="S4.E15.m1.1.1.1.1.1.1.1.1.1.3.3.3">1</cn></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.E15.m1.1c">\displaystyle g_{i}\approx-\frac{\lambda_{i}}{B}\left(\mathds{1}^{T}\cdot\bm{a}_{L-1}\right)\,,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(15)</span></td>
</tr></tbody>
</table>
<p id="Thmproofx2.p1.5" class="ltx_p">thus, <math id="Thmproofx2.p1.3.m1.1" class="ltx_Math" alttext="g_{i}" display="inline"><semantics id="Thmproofx2.p1.3.m1.1a"><msub id="Thmproofx2.p1.3.m1.1.1" xref="Thmproofx2.p1.3.m1.1.1.cmml"><mi id="Thmproofx2.p1.3.m1.1.1.2" xref="Thmproofx2.p1.3.m1.1.1.2.cmml">g</mi><mi id="Thmproofx2.p1.3.m1.1.1.3" xref="Thmproofx2.p1.3.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="Thmproofx2.p1.3.m1.1b"><apply id="Thmproofx2.p1.3.m1.1.1.cmml" xref="Thmproofx2.p1.3.m1.1.1"><csymbol cd="ambiguous" id="Thmproofx2.p1.3.m1.1.1.1.cmml" xref="Thmproofx2.p1.3.m1.1.1">subscript</csymbol><ci id="Thmproofx2.p1.3.m1.1.1.2.cmml" xref="Thmproofx2.p1.3.m1.1.1.2">𝑔</ci><ci id="Thmproofx2.p1.3.m1.1.1.3.cmml" xref="Thmproofx2.p1.3.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx2.p1.3.m1.1c">g_{i}</annotation></semantics></math> is proportional to <math id="Thmproofx2.p1.4.m2.1" class="ltx_Math" alttext="\lambda_{i}" display="inline"><semantics id="Thmproofx2.p1.4.m2.1a"><msub id="Thmproofx2.p1.4.m2.1.1" xref="Thmproofx2.p1.4.m2.1.1.cmml"><mi id="Thmproofx2.p1.4.m2.1.1.2" xref="Thmproofx2.p1.4.m2.1.1.2.cmml">λ</mi><mi id="Thmproofx2.p1.4.m2.1.1.3" xref="Thmproofx2.p1.4.m2.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="Thmproofx2.p1.4.m2.1b"><apply id="Thmproofx2.p1.4.m2.1.1.cmml" xref="Thmproofx2.p1.4.m2.1.1"><csymbol cd="ambiguous" id="Thmproofx2.p1.4.m2.1.1.1.cmml" xref="Thmproofx2.p1.4.m2.1.1">subscript</csymbol><ci id="Thmproofx2.p1.4.m2.1.1.2.cmml" xref="Thmproofx2.p1.4.m2.1.1.2">𝜆</ci><ci id="Thmproofx2.p1.4.m2.1.1.3.cmml" xref="Thmproofx2.p1.4.m2.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx2.p1.4.m2.1c">\lambda_{i}</annotation></semantics></math>.
We denote <math id="Thmproofx2.p1.5.m3.1" class="ltx_Math" alttext="m" display="inline"><semantics id="Thmproofx2.p1.5.m3.1a"><mi id="Thmproofx2.p1.5.m3.1.1" xref="Thmproofx2.p1.5.m3.1.1.cmml">m</mi><annotation-xml encoding="MathML-Content" id="Thmproofx2.p1.5.m3.1b"><ci id="Thmproofx2.p1.5.m3.1.1.cmml" xref="Thmproofx2.p1.5.m3.1.1">𝑚</ci></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx2.p1.5.m3.1c">m</annotation></semantics></math> to be</p>
<table id="Sx2.EGx9" class="ltx_equationgroup ltx_eqn_align ltx_eqn_table">

<tbody id="S4.E16"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S4.E16.m1.1" class="ltx_Math" alttext="\displaystyle m=-\frac{\mathds{1}^{T}\cdot\bm{a}_{L-1}}{B}\,," display="inline"><semantics id="S4.E16.m1.1a"><mrow id="S4.E16.m1.1.1.1" xref="S4.E16.m1.1.1.1.1.cmml"><mrow id="S4.E16.m1.1.1.1.1" xref="S4.E16.m1.1.1.1.1.cmml"><mi id="S4.E16.m1.1.1.1.1.2" xref="S4.E16.m1.1.1.1.1.2.cmml">m</mi><mo id="S4.E16.m1.1.1.1.1.1" xref="S4.E16.m1.1.1.1.1.1.cmml">=</mo><mrow id="S4.E16.m1.1.1.1.1.3" xref="S4.E16.m1.1.1.1.1.3.cmml"><mo id="S4.E16.m1.1.1.1.1.3a" xref="S4.E16.m1.1.1.1.1.3.cmml">−</mo><mstyle displaystyle="true" id="S4.E16.m1.1.1.1.1.3.2" xref="S4.E16.m1.1.1.1.1.3.2.cmml"><mfrac id="S4.E16.m1.1.1.1.1.3.2a" xref="S4.E16.m1.1.1.1.1.3.2.cmml"><mrow id="S4.E16.m1.1.1.1.1.3.2.2" xref="S4.E16.m1.1.1.1.1.3.2.2.cmml"><msup id="S4.E16.m1.1.1.1.1.3.2.2.2" xref="S4.E16.m1.1.1.1.1.3.2.2.2.cmml"><mn id="S4.E16.m1.1.1.1.1.3.2.2.2.2" xref="S4.E16.m1.1.1.1.1.3.2.2.2.2.cmml">𝟙</mn><mi id="S4.E16.m1.1.1.1.1.3.2.2.2.3" xref="S4.E16.m1.1.1.1.1.3.2.2.2.3.cmml">T</mi></msup><mo lspace="0.222em" rspace="0.222em" id="S4.E16.m1.1.1.1.1.3.2.2.1" xref="S4.E16.m1.1.1.1.1.3.2.2.1.cmml">⋅</mo><msub id="S4.E16.m1.1.1.1.1.3.2.2.3" xref="S4.E16.m1.1.1.1.1.3.2.2.3.cmml"><mi id="S4.E16.m1.1.1.1.1.3.2.2.3.2" xref="S4.E16.m1.1.1.1.1.3.2.2.3.2.cmml">𝒂</mi><mrow id="S4.E16.m1.1.1.1.1.3.2.2.3.3" xref="S4.E16.m1.1.1.1.1.3.2.2.3.3.cmml"><mi id="S4.E16.m1.1.1.1.1.3.2.2.3.3.2" xref="S4.E16.m1.1.1.1.1.3.2.2.3.3.2.cmml">L</mi><mo id="S4.E16.m1.1.1.1.1.3.2.2.3.3.1" xref="S4.E16.m1.1.1.1.1.3.2.2.3.3.1.cmml">−</mo><mn id="S4.E16.m1.1.1.1.1.3.2.2.3.3.3" xref="S4.E16.m1.1.1.1.1.3.2.2.3.3.3.cmml">1</mn></mrow></msub></mrow><mi id="S4.E16.m1.1.1.1.1.3.2.3" xref="S4.E16.m1.1.1.1.1.3.2.3.cmml">B</mi></mfrac></mstyle></mrow></mrow><mo lspace="0.170em" id="S4.E16.m1.1.1.1.2" xref="S4.E16.m1.1.1.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.E16.m1.1b"><apply id="S4.E16.m1.1.1.1.1.cmml" xref="S4.E16.m1.1.1.1"><eq id="S4.E16.m1.1.1.1.1.1.cmml" xref="S4.E16.m1.1.1.1.1.1"></eq><ci id="S4.E16.m1.1.1.1.1.2.cmml" xref="S4.E16.m1.1.1.1.1.2">𝑚</ci><apply id="S4.E16.m1.1.1.1.1.3.cmml" xref="S4.E16.m1.1.1.1.1.3"><minus id="S4.E16.m1.1.1.1.1.3.1.cmml" xref="S4.E16.m1.1.1.1.1.3"></minus><apply id="S4.E16.m1.1.1.1.1.3.2.cmml" xref="S4.E16.m1.1.1.1.1.3.2"><divide id="S4.E16.m1.1.1.1.1.3.2.1.cmml" xref="S4.E16.m1.1.1.1.1.3.2"></divide><apply id="S4.E16.m1.1.1.1.1.3.2.2.cmml" xref="S4.E16.m1.1.1.1.1.3.2.2"><ci id="S4.E16.m1.1.1.1.1.3.2.2.1.cmml" xref="S4.E16.m1.1.1.1.1.3.2.2.1">⋅</ci><apply id="S4.E16.m1.1.1.1.1.3.2.2.2.cmml" xref="S4.E16.m1.1.1.1.1.3.2.2.2"><csymbol cd="ambiguous" id="S4.E16.m1.1.1.1.1.3.2.2.2.1.cmml" xref="S4.E16.m1.1.1.1.1.3.2.2.2">superscript</csymbol><cn type="integer" id="S4.E16.m1.1.1.1.1.3.2.2.2.2.cmml" xref="S4.E16.m1.1.1.1.1.3.2.2.2.2">1</cn><ci id="S4.E16.m1.1.1.1.1.3.2.2.2.3.cmml" xref="S4.E16.m1.1.1.1.1.3.2.2.2.3">𝑇</ci></apply><apply id="S4.E16.m1.1.1.1.1.3.2.2.3.cmml" xref="S4.E16.m1.1.1.1.1.3.2.2.3"><csymbol cd="ambiguous" id="S4.E16.m1.1.1.1.1.3.2.2.3.1.cmml" xref="S4.E16.m1.1.1.1.1.3.2.2.3">subscript</csymbol><ci id="S4.E16.m1.1.1.1.1.3.2.2.3.2.cmml" xref="S4.E16.m1.1.1.1.1.3.2.2.3.2">𝒂</ci><apply id="S4.E16.m1.1.1.1.1.3.2.2.3.3.cmml" xref="S4.E16.m1.1.1.1.1.3.2.2.3.3"><minus id="S4.E16.m1.1.1.1.1.3.2.2.3.3.1.cmml" xref="S4.E16.m1.1.1.1.1.3.2.2.3.3.1"></minus><ci id="S4.E16.m1.1.1.1.1.3.2.2.3.3.2.cmml" xref="S4.E16.m1.1.1.1.1.3.2.2.3.3.2">𝐿</ci><cn type="integer" id="S4.E16.m1.1.1.1.1.3.2.2.3.3.3.cmml" xref="S4.E16.m1.1.1.1.1.3.2.2.3.3.3">1</cn></apply></apply></apply><ci id="S4.E16.m1.1.1.1.1.3.2.3.cmml" xref="S4.E16.m1.1.1.1.1.3.2.3">𝐵</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.E16.m1.1c">\displaystyle m=-\frac{\mathds{1}^{T}\cdot\bm{a}_{L-1}}{B}\,,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(16)</span></td>
</tr></tbody>
</table>
<p id="Thmproofx2.p1.7" class="ltx_p">therefore, <math id="Thmproofx2.p1.6.m1.1" class="ltx_Math" alttext="g_{i}\approx\lambda_{i}m" display="inline"><semantics id="Thmproofx2.p1.6.m1.1a"><mrow id="Thmproofx2.p1.6.m1.1.1" xref="Thmproofx2.p1.6.m1.1.1.cmml"><msub id="Thmproofx2.p1.6.m1.1.1.2" xref="Thmproofx2.p1.6.m1.1.1.2.cmml"><mi id="Thmproofx2.p1.6.m1.1.1.2.2" xref="Thmproofx2.p1.6.m1.1.1.2.2.cmml">g</mi><mi id="Thmproofx2.p1.6.m1.1.1.2.3" xref="Thmproofx2.p1.6.m1.1.1.2.3.cmml">i</mi></msub><mo id="Thmproofx2.p1.6.m1.1.1.1" xref="Thmproofx2.p1.6.m1.1.1.1.cmml">≈</mo><mrow id="Thmproofx2.p1.6.m1.1.1.3" xref="Thmproofx2.p1.6.m1.1.1.3.cmml"><msub id="Thmproofx2.p1.6.m1.1.1.3.2" xref="Thmproofx2.p1.6.m1.1.1.3.2.cmml"><mi id="Thmproofx2.p1.6.m1.1.1.3.2.2" xref="Thmproofx2.p1.6.m1.1.1.3.2.2.cmml">λ</mi><mi id="Thmproofx2.p1.6.m1.1.1.3.2.3" xref="Thmproofx2.p1.6.m1.1.1.3.2.3.cmml">i</mi></msub><mo lspace="0em" rspace="0em" id="Thmproofx2.p1.6.m1.1.1.3.1" xref="Thmproofx2.p1.6.m1.1.1.3.1.cmml">​</mo><mi id="Thmproofx2.p1.6.m1.1.1.3.3" xref="Thmproofx2.p1.6.m1.1.1.3.3.cmml">m</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="Thmproofx2.p1.6.m1.1b"><apply id="Thmproofx2.p1.6.m1.1.1.cmml" xref="Thmproofx2.p1.6.m1.1.1"><approx id="Thmproofx2.p1.6.m1.1.1.1.cmml" xref="Thmproofx2.p1.6.m1.1.1.1"></approx><apply id="Thmproofx2.p1.6.m1.1.1.2.cmml" xref="Thmproofx2.p1.6.m1.1.1.2"><csymbol cd="ambiguous" id="Thmproofx2.p1.6.m1.1.1.2.1.cmml" xref="Thmproofx2.p1.6.m1.1.1.2">subscript</csymbol><ci id="Thmproofx2.p1.6.m1.1.1.2.2.cmml" xref="Thmproofx2.p1.6.m1.1.1.2.2">𝑔</ci><ci id="Thmproofx2.p1.6.m1.1.1.2.3.cmml" xref="Thmproofx2.p1.6.m1.1.1.2.3">𝑖</ci></apply><apply id="Thmproofx2.p1.6.m1.1.1.3.cmml" xref="Thmproofx2.p1.6.m1.1.1.3"><times id="Thmproofx2.p1.6.m1.1.1.3.1.cmml" xref="Thmproofx2.p1.6.m1.1.1.3.1"></times><apply id="Thmproofx2.p1.6.m1.1.1.3.2.cmml" xref="Thmproofx2.p1.6.m1.1.1.3.2"><csymbol cd="ambiguous" id="Thmproofx2.p1.6.m1.1.1.3.2.1.cmml" xref="Thmproofx2.p1.6.m1.1.1.3.2">subscript</csymbol><ci id="Thmproofx2.p1.6.m1.1.1.3.2.2.cmml" xref="Thmproofx2.p1.6.m1.1.1.3.2.2">𝜆</ci><ci id="Thmproofx2.p1.6.m1.1.1.3.2.3.cmml" xref="Thmproofx2.p1.6.m1.1.1.3.2.3">𝑖</ci></apply><ci id="Thmproofx2.p1.6.m1.1.1.3.3.cmml" xref="Thmproofx2.p1.6.m1.1.1.3.3">𝑚</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx2.p1.6.m1.1c">g_{i}\approx\lambda_{i}m</annotation></semantics></math>.
We define the parameter <em id="Thmproofx2.p1.7.1" class="ltx_emph ltx_font_italic">impact</em> <math id="Thmproofx2.p1.7.m2.1" class="ltx_Math" alttext="m" display="inline"><semantics id="Thmproofx2.p1.7.m2.1a"><mi id="Thmproofx2.p1.7.m2.1.1" xref="Thmproofx2.p1.7.m2.1.1.cmml">m</mi><annotation-xml encoding="MathML-Content" id="Thmproofx2.p1.7.m2.1b"><ci id="Thmproofx2.p1.7.m2.1.1.cmml" xref="Thmproofx2.p1.7.m2.1.1">𝑚</ci></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx2.p1.7.m2.1c">m</annotation></semantics></math> as <em id="Thmproofx2.p1.7.2" class="ltx_emph ltx_font_italic">the change of the gradient value caused by a single occurrence of a label in the training batch</em>.
This value is negative and constant across labels, thus, label-agnostic.</p>
</div>
<div id="Thmproofx2.p2" class="ltx_para">
<p id="Thmproofx2.p2.6" class="ltx_p">However, for an untrained model, the value of <math id="Thmproofx2.p2.1.m1.2" class="ltx_Math" alttext="\sum_{k=1}^{B}\frac{e^{y_{i(k)}}}{\sum\nolimits_{j}e^{y_{j(k)}}}" display="inline"><semantics id="Thmproofx2.p2.1.m1.2a"><mrow id="Thmproofx2.p2.1.m1.2.3" xref="Thmproofx2.p2.1.m1.2.3.cmml"><msubsup id="Thmproofx2.p2.1.m1.2.3.1" xref="Thmproofx2.p2.1.m1.2.3.1.cmml"><mo id="Thmproofx2.p2.1.m1.2.3.1.2.2" xref="Thmproofx2.p2.1.m1.2.3.1.2.2.cmml">∑</mo><mrow id="Thmproofx2.p2.1.m1.2.3.1.2.3" xref="Thmproofx2.p2.1.m1.2.3.1.2.3.cmml"><mi id="Thmproofx2.p2.1.m1.2.3.1.2.3.2" xref="Thmproofx2.p2.1.m1.2.3.1.2.3.2.cmml">k</mi><mo id="Thmproofx2.p2.1.m1.2.3.1.2.3.1" xref="Thmproofx2.p2.1.m1.2.3.1.2.3.1.cmml">=</mo><mn id="Thmproofx2.p2.1.m1.2.3.1.2.3.3" xref="Thmproofx2.p2.1.m1.2.3.1.2.3.3.cmml">1</mn></mrow><mi id="Thmproofx2.p2.1.m1.2.3.1.3" xref="Thmproofx2.p2.1.m1.2.3.1.3.cmml">B</mi></msubsup><mfrac id="Thmproofx2.p2.1.m1.2.2" xref="Thmproofx2.p2.1.m1.2.2.cmml"><msup id="Thmproofx2.p2.1.m1.1.1.1" xref="Thmproofx2.p2.1.m1.1.1.1.cmml"><mi id="Thmproofx2.p2.1.m1.1.1.1.3" xref="Thmproofx2.p2.1.m1.1.1.1.3.cmml">e</mi><msub id="Thmproofx2.p2.1.m1.1.1.1.1.1" xref="Thmproofx2.p2.1.m1.1.1.1.1.1.cmml"><mi id="Thmproofx2.p2.1.m1.1.1.1.1.1.3" xref="Thmproofx2.p2.1.m1.1.1.1.1.1.3.cmml">y</mi><mrow id="Thmproofx2.p2.1.m1.1.1.1.1.1.1.1" xref="Thmproofx2.p2.1.m1.1.1.1.1.1.1.1.cmml"><mi id="Thmproofx2.p2.1.m1.1.1.1.1.1.1.1.3" xref="Thmproofx2.p2.1.m1.1.1.1.1.1.1.1.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="Thmproofx2.p2.1.m1.1.1.1.1.1.1.1.2" xref="Thmproofx2.p2.1.m1.1.1.1.1.1.1.1.2.cmml">​</mo><mrow id="Thmproofx2.p2.1.m1.1.1.1.1.1.1.1.4.2" xref="Thmproofx2.p2.1.m1.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="Thmproofx2.p2.1.m1.1.1.1.1.1.1.1.4.2.1" xref="Thmproofx2.p2.1.m1.1.1.1.1.1.1.1.cmml">(</mo><mi id="Thmproofx2.p2.1.m1.1.1.1.1.1.1.1.1" xref="Thmproofx2.p2.1.m1.1.1.1.1.1.1.1.1.cmml">k</mi><mo stretchy="false" id="Thmproofx2.p2.1.m1.1.1.1.1.1.1.1.4.2.2" xref="Thmproofx2.p2.1.m1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></msub></msup><mrow id="Thmproofx2.p2.1.m1.2.2.2" xref="Thmproofx2.p2.1.m1.2.2.2.cmml"><mstyle displaystyle="false" id="Thmproofx2.p2.1.m1.2.2.2.2" xref="Thmproofx2.p2.1.m1.2.2.2.2.cmml"><msub id="Thmproofx2.p2.1.m1.2.2.2.2a" xref="Thmproofx2.p2.1.m1.2.2.2.2.cmml"><mo id="Thmproofx2.p2.1.m1.2.2.2.2.2" xref="Thmproofx2.p2.1.m1.2.2.2.2.2.cmml">∑</mo><mi id="Thmproofx2.p2.1.m1.2.2.2.2.3" xref="Thmproofx2.p2.1.m1.2.2.2.2.3.cmml">j</mi></msub></mstyle><msup id="Thmproofx2.p2.1.m1.2.2.2.3" xref="Thmproofx2.p2.1.m1.2.2.2.3.cmml"><mi id="Thmproofx2.p2.1.m1.2.2.2.3.2" xref="Thmproofx2.p2.1.m1.2.2.2.3.2.cmml">e</mi><msub id="Thmproofx2.p2.1.m1.2.2.2.1.1" xref="Thmproofx2.p2.1.m1.2.2.2.1.1.cmml"><mi id="Thmproofx2.p2.1.m1.2.2.2.1.1.3" xref="Thmproofx2.p2.1.m1.2.2.2.1.1.3.cmml">y</mi><mrow id="Thmproofx2.p2.1.m1.2.2.2.1.1.1.1" xref="Thmproofx2.p2.1.m1.2.2.2.1.1.1.1.cmml"><mi id="Thmproofx2.p2.1.m1.2.2.2.1.1.1.1.3" xref="Thmproofx2.p2.1.m1.2.2.2.1.1.1.1.3.cmml">j</mi><mo lspace="0em" rspace="0em" id="Thmproofx2.p2.1.m1.2.2.2.1.1.1.1.2" xref="Thmproofx2.p2.1.m1.2.2.2.1.1.1.1.2.cmml">​</mo><mrow id="Thmproofx2.p2.1.m1.2.2.2.1.1.1.1.4.2" xref="Thmproofx2.p2.1.m1.2.2.2.1.1.1.1.cmml"><mo stretchy="false" id="Thmproofx2.p2.1.m1.2.2.2.1.1.1.1.4.2.1" xref="Thmproofx2.p2.1.m1.2.2.2.1.1.1.1.cmml">(</mo><mi id="Thmproofx2.p2.1.m1.2.2.2.1.1.1.1.1" xref="Thmproofx2.p2.1.m1.2.2.2.1.1.1.1.1.cmml">k</mi><mo stretchy="false" id="Thmproofx2.p2.1.m1.2.2.2.1.1.1.1.4.2.2" xref="Thmproofx2.p2.1.m1.2.2.2.1.1.1.1.cmml">)</mo></mrow></mrow></msub></msup></mrow></mfrac></mrow><annotation-xml encoding="MathML-Content" id="Thmproofx2.p2.1.m1.2b"><apply id="Thmproofx2.p2.1.m1.2.3.cmml" xref="Thmproofx2.p2.1.m1.2.3"><apply id="Thmproofx2.p2.1.m1.2.3.1.cmml" xref="Thmproofx2.p2.1.m1.2.3.1"><csymbol cd="ambiguous" id="Thmproofx2.p2.1.m1.2.3.1.1.cmml" xref="Thmproofx2.p2.1.m1.2.3.1">superscript</csymbol><apply id="Thmproofx2.p2.1.m1.2.3.1.2.cmml" xref="Thmproofx2.p2.1.m1.2.3.1"><csymbol cd="ambiguous" id="Thmproofx2.p2.1.m1.2.3.1.2.1.cmml" xref="Thmproofx2.p2.1.m1.2.3.1">subscript</csymbol><sum id="Thmproofx2.p2.1.m1.2.3.1.2.2.cmml" xref="Thmproofx2.p2.1.m1.2.3.1.2.2"></sum><apply id="Thmproofx2.p2.1.m1.2.3.1.2.3.cmml" xref="Thmproofx2.p2.1.m1.2.3.1.2.3"><eq id="Thmproofx2.p2.1.m1.2.3.1.2.3.1.cmml" xref="Thmproofx2.p2.1.m1.2.3.1.2.3.1"></eq><ci id="Thmproofx2.p2.1.m1.2.3.1.2.3.2.cmml" xref="Thmproofx2.p2.1.m1.2.3.1.2.3.2">𝑘</ci><cn type="integer" id="Thmproofx2.p2.1.m1.2.3.1.2.3.3.cmml" xref="Thmproofx2.p2.1.m1.2.3.1.2.3.3">1</cn></apply></apply><ci id="Thmproofx2.p2.1.m1.2.3.1.3.cmml" xref="Thmproofx2.p2.1.m1.2.3.1.3">𝐵</ci></apply><apply id="Thmproofx2.p2.1.m1.2.2.cmml" xref="Thmproofx2.p2.1.m1.2.2"><divide id="Thmproofx2.p2.1.m1.2.2.3.cmml" xref="Thmproofx2.p2.1.m1.2.2"></divide><apply id="Thmproofx2.p2.1.m1.1.1.1.cmml" xref="Thmproofx2.p2.1.m1.1.1.1"><csymbol cd="ambiguous" id="Thmproofx2.p2.1.m1.1.1.1.2.cmml" xref="Thmproofx2.p2.1.m1.1.1.1">superscript</csymbol><ci id="Thmproofx2.p2.1.m1.1.1.1.3.cmml" xref="Thmproofx2.p2.1.m1.1.1.1.3">𝑒</ci><apply id="Thmproofx2.p2.1.m1.1.1.1.1.1.cmml" xref="Thmproofx2.p2.1.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="Thmproofx2.p2.1.m1.1.1.1.1.1.2.cmml" xref="Thmproofx2.p2.1.m1.1.1.1.1.1">subscript</csymbol><ci id="Thmproofx2.p2.1.m1.1.1.1.1.1.3.cmml" xref="Thmproofx2.p2.1.m1.1.1.1.1.1.3">𝑦</ci><apply id="Thmproofx2.p2.1.m1.1.1.1.1.1.1.1.cmml" xref="Thmproofx2.p2.1.m1.1.1.1.1.1.1.1"><times id="Thmproofx2.p2.1.m1.1.1.1.1.1.1.1.2.cmml" xref="Thmproofx2.p2.1.m1.1.1.1.1.1.1.1.2"></times><ci id="Thmproofx2.p2.1.m1.1.1.1.1.1.1.1.3.cmml" xref="Thmproofx2.p2.1.m1.1.1.1.1.1.1.1.3">𝑖</ci><ci id="Thmproofx2.p2.1.m1.1.1.1.1.1.1.1.1.cmml" xref="Thmproofx2.p2.1.m1.1.1.1.1.1.1.1.1">𝑘</ci></apply></apply></apply><apply id="Thmproofx2.p2.1.m1.2.2.2.cmml" xref="Thmproofx2.p2.1.m1.2.2.2"><apply id="Thmproofx2.p2.1.m1.2.2.2.2.cmml" xref="Thmproofx2.p2.1.m1.2.2.2.2"><csymbol cd="ambiguous" id="Thmproofx2.p2.1.m1.2.2.2.2.1.cmml" xref="Thmproofx2.p2.1.m1.2.2.2.2">subscript</csymbol><sum id="Thmproofx2.p2.1.m1.2.2.2.2.2.cmml" xref="Thmproofx2.p2.1.m1.2.2.2.2.2"></sum><ci id="Thmproofx2.p2.1.m1.2.2.2.2.3.cmml" xref="Thmproofx2.p2.1.m1.2.2.2.2.3">𝑗</ci></apply><apply id="Thmproofx2.p2.1.m1.2.2.2.3.cmml" xref="Thmproofx2.p2.1.m1.2.2.2.3"><csymbol cd="ambiguous" id="Thmproofx2.p2.1.m1.2.2.2.3.1.cmml" xref="Thmproofx2.p2.1.m1.2.2.2.3">superscript</csymbol><ci id="Thmproofx2.p2.1.m1.2.2.2.3.2.cmml" xref="Thmproofx2.p2.1.m1.2.2.2.3.2">𝑒</ci><apply id="Thmproofx2.p2.1.m1.2.2.2.1.1.cmml" xref="Thmproofx2.p2.1.m1.2.2.2.1.1"><csymbol cd="ambiguous" id="Thmproofx2.p2.1.m1.2.2.2.1.1.2.cmml" xref="Thmproofx2.p2.1.m1.2.2.2.1.1">subscript</csymbol><ci id="Thmproofx2.p2.1.m1.2.2.2.1.1.3.cmml" xref="Thmproofx2.p2.1.m1.2.2.2.1.1.3">𝑦</ci><apply id="Thmproofx2.p2.1.m1.2.2.2.1.1.1.1.cmml" xref="Thmproofx2.p2.1.m1.2.2.2.1.1.1.1"><times id="Thmproofx2.p2.1.m1.2.2.2.1.1.1.1.2.cmml" xref="Thmproofx2.p2.1.m1.2.2.2.1.1.1.1.2"></times><ci id="Thmproofx2.p2.1.m1.2.2.2.1.1.1.1.3.cmml" xref="Thmproofx2.p2.1.m1.2.2.2.1.1.1.1.3">𝑗</ci><ci id="Thmproofx2.p2.1.m1.2.2.2.1.1.1.1.1.cmml" xref="Thmproofx2.p2.1.m1.2.2.2.1.1.1.1.1">𝑘</ci></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx2.p2.1.m1.2c">\sum_{k=1}^{B}\frac{e^{y_{i(k)}}}{\sum\nolimits_{j}e^{y_{j(k)}}}</annotation></semantics></math> strongly depends on the model weight initialization.
The prediction score <math id="Thmproofx2.p2.2.m2.1" class="ltx_Math" alttext="y_{i}" display="inline"><semantics id="Thmproofx2.p2.2.m2.1a"><msub id="Thmproofx2.p2.2.m2.1.1" xref="Thmproofx2.p2.2.m2.1.1.cmml"><mi id="Thmproofx2.p2.2.m2.1.1.2" xref="Thmproofx2.p2.2.m2.1.1.2.cmml">y</mi><mi id="Thmproofx2.p2.2.m2.1.1.3" xref="Thmproofx2.p2.2.m2.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="Thmproofx2.p2.2.m2.1b"><apply id="Thmproofx2.p2.2.m2.1.1.cmml" xref="Thmproofx2.p2.2.m2.1.1"><csymbol cd="ambiguous" id="Thmproofx2.p2.2.m2.1.1.1.cmml" xref="Thmproofx2.p2.2.m2.1.1">subscript</csymbol><ci id="Thmproofx2.p2.2.m2.1.1.2.cmml" xref="Thmproofx2.p2.2.m2.1.1.2">𝑦</ci><ci id="Thmproofx2.p2.2.m2.1.1.3.cmml" xref="Thmproofx2.p2.2.m2.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx2.p2.2.m2.1c">y_{i}</annotation></semantics></math> can be randomly distributed around an uniform random guess <math id="Thmproofx2.p2.3.m3.1" class="ltx_Math" alttext="P=\nicefrac{{1}}{{n}}" display="inline"><semantics id="Thmproofx2.p2.3.m3.1a"><mrow id="Thmproofx2.p2.3.m3.1.1" xref="Thmproofx2.p2.3.m3.1.1.cmml"><mi id="Thmproofx2.p2.3.m3.1.1.2" xref="Thmproofx2.p2.3.m3.1.1.2.cmml">P</mi><mo id="Thmproofx2.p2.3.m3.1.1.1" xref="Thmproofx2.p2.3.m3.1.1.1.cmml">=</mo><mrow id="Thmproofx2.p2.3.m3.1.1.3" xref="Thmproofx2.p2.3.m3.1.1.3.cmml"><mpadded voffset="0.3em" id="Thmproofx2.p2.3.m3.1.1.3.2" xref="Thmproofx2.p2.3.m3.1.1.3.2.cmml"><mn mathsize="70%" id="Thmproofx2.p2.3.m3.1.1.3.2a" xref="Thmproofx2.p2.3.m3.1.1.3.2.cmml">1</mn></mpadded><mpadded lspace="-0.1em" width="-0.15em" id="Thmproofx2.p2.3.m3.1.1.3.1" xref="Thmproofx2.p2.3.m3.1.1.3.1.cmml"><mo stretchy="true" symmetric="true" id="Thmproofx2.p2.3.m3.1.1.3.1a" xref="Thmproofx2.p2.3.m3.1.1.3.1.cmml">/</mo></mpadded><mi mathsize="70%" id="Thmproofx2.p2.3.m3.1.1.3.3" xref="Thmproofx2.p2.3.m3.1.1.3.3.cmml">n</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="Thmproofx2.p2.3.m3.1b"><apply id="Thmproofx2.p2.3.m3.1.1.cmml" xref="Thmproofx2.p2.3.m3.1.1"><eq id="Thmproofx2.p2.3.m3.1.1.1.cmml" xref="Thmproofx2.p2.3.m3.1.1.1"></eq><ci id="Thmproofx2.p2.3.m3.1.1.2.cmml" xref="Thmproofx2.p2.3.m3.1.1.2">𝑃</ci><apply id="Thmproofx2.p2.3.m3.1.1.3.cmml" xref="Thmproofx2.p2.3.m3.1.1.3"><divide id="Thmproofx2.p2.3.m3.1.1.3.1.cmml" xref="Thmproofx2.p2.3.m3.1.1.3.1"></divide><cn type="integer" id="Thmproofx2.p2.3.m3.1.1.3.2.cmml" xref="Thmproofx2.p2.3.m3.1.1.3.2">1</cn><ci id="Thmproofx2.p2.3.m3.1.1.3.3.cmml" xref="Thmproofx2.p2.3.m3.1.1.3.3">𝑛</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx2.p2.3.m3.1c">P=\nicefrac{{1}}{{n}}</annotation></semantics></math>, which the more classes exist in the dataset, the lower is its value, thus, the aforementioned summation goes closer to zero.
In some cases, <math id="Thmproofx2.p2.4.m4.1" class="ltx_Math" alttext="y_{i}" display="inline"><semantics id="Thmproofx2.p2.4.m4.1a"><msub id="Thmproofx2.p2.4.m4.1.1" xref="Thmproofx2.p2.4.m4.1.1.cmml"><mi id="Thmproofx2.p2.4.m4.1.1.2" xref="Thmproofx2.p2.4.m4.1.1.2.cmml">y</mi><mi id="Thmproofx2.p2.4.m4.1.1.3" xref="Thmproofx2.p2.4.m4.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="Thmproofx2.p2.4.m4.1b"><apply id="Thmproofx2.p2.4.m4.1.1.cmml" xref="Thmproofx2.p2.4.m4.1.1"><csymbol cd="ambiguous" id="Thmproofx2.p2.4.m4.1.1.1.cmml" xref="Thmproofx2.p2.4.m4.1.1">subscript</csymbol><ci id="Thmproofx2.p2.4.m4.1.1.2.cmml" xref="Thmproofx2.p2.4.m4.1.1.2">𝑦</ci><ci id="Thmproofx2.p2.4.m4.1.1.3.cmml" xref="Thmproofx2.p2.4.m4.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx2.p2.4.m4.1c">y_{i}</annotation></semantics></math> might be notably high, although the label <math id="Thmproofx2.p2.5.m5.1" class="ltx_Math" alttext="i" display="inline"><semantics id="Thmproofx2.p2.5.m5.1a"><mi id="Thmproofx2.p2.5.m5.1.1" xref="Thmproofx2.p2.5.m5.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="Thmproofx2.p2.5.m5.1b"><ci id="Thmproofx2.p2.5.m5.1.1.cmml" xref="Thmproofx2.p2.5.m5.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx2.p2.5.m5.1c">i</annotation></semantics></math> is not present in the training batch.
This comes as a result of misclassification and leads to a positive shift in the gradient values.
We call this shift <em id="Thmproofx2.p2.6.1" class="ltx_emph ltx_font_italic">offset</em> <math id="Thmproofx2.p2.6.m6.1" class="ltx_Math" alttext="s" display="inline"><semantics id="Thmproofx2.p2.6.m6.1a"><mi id="Thmproofx2.p2.6.m6.1.1" xref="Thmproofx2.p2.6.m6.1.1.cmml">s</mi><annotation-xml encoding="MathML-Content" id="Thmproofx2.p2.6.m6.1b"><ci id="Thmproofx2.p2.6.m6.1.1.cmml" xref="Thmproofx2.p2.6.m6.1.1">𝑠</ci></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx2.p2.6.m6.1c">s</annotation></semantics></math>, and based on Eq. (<a href="#S4.E14" title="In Proof ‣ 4 Gradient analysis ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">14</span></a>), we can write</p>
<table id="Sx2.EGx10" class="ltx_equationgroup ltx_eqn_align ltx_eqn_table">

<tbody id="S4.E17"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S4.E17.m1.1" class="ltx_Math" alttext="\displaystyle s_{i}" display="inline"><semantics id="S4.E17.m1.1a"><msub id="S4.E17.m1.1.1" xref="S4.E17.m1.1.1.cmml"><mi id="S4.E17.m1.1.1.2" xref="S4.E17.m1.1.1.2.cmml">s</mi><mi id="S4.E17.m1.1.1.3" xref="S4.E17.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S4.E17.m1.1b"><apply id="S4.E17.m1.1.1.cmml" xref="S4.E17.m1.1.1"><csymbol cd="ambiguous" id="S4.E17.m1.1.1.1.cmml" xref="S4.E17.m1.1.1">subscript</csymbol><ci id="S4.E17.m1.1.1.2.cmml" xref="S4.E17.m1.1.1.2">𝑠</ci><ci id="S4.E17.m1.1.1.3.cmml" xref="S4.E17.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.E17.m1.1c">\displaystyle s_{i}</annotation></semantics></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="S4.E17.m2.3" class="ltx_Math" alttext="\displaystyle=\left(\frac{1}{B}\sum_{k=1}^{B}\frac{e^{y_{i(k)}}}{\sum\nolimits_{j}e^{y_{j(k)}}}\right)\left(\mathds{1}^{T}\cdot\bm{a}_{L-1}\right)\,." display="inline"><semantics id="S4.E17.m2.3a"><mrow id="S4.E17.m2.3.3.1" xref="S4.E17.m2.3.3.1.1.cmml"><mrow id="S4.E17.m2.3.3.1.1" xref="S4.E17.m2.3.3.1.1.cmml"><mi id="S4.E17.m2.3.3.1.1.4" xref="S4.E17.m2.3.3.1.1.4.cmml"></mi><mo id="S4.E17.m2.3.3.1.1.3" xref="S4.E17.m2.3.3.1.1.3.cmml">=</mo><mrow id="S4.E17.m2.3.3.1.1.2" xref="S4.E17.m2.3.3.1.1.2.cmml"><mrow id="S4.E17.m2.3.3.1.1.1.1.1" xref="S4.E17.m2.3.3.1.1.1.1.1.1.cmml"><mo id="S4.E17.m2.3.3.1.1.1.1.1.2" xref="S4.E17.m2.3.3.1.1.1.1.1.1.cmml">(</mo><mrow id="S4.E17.m2.3.3.1.1.1.1.1.1" xref="S4.E17.m2.3.3.1.1.1.1.1.1.cmml"><mstyle displaystyle="true" id="S4.E17.m2.3.3.1.1.1.1.1.1.2" xref="S4.E17.m2.3.3.1.1.1.1.1.1.2.cmml"><mfrac id="S4.E17.m2.3.3.1.1.1.1.1.1.2a" xref="S4.E17.m2.3.3.1.1.1.1.1.1.2.cmml"><mn id="S4.E17.m2.3.3.1.1.1.1.1.1.2.2" xref="S4.E17.m2.3.3.1.1.1.1.1.1.2.2.cmml">1</mn><mi id="S4.E17.m2.3.3.1.1.1.1.1.1.2.3" xref="S4.E17.m2.3.3.1.1.1.1.1.1.2.3.cmml">B</mi></mfrac></mstyle><mo lspace="0em" rspace="0em" id="S4.E17.m2.3.3.1.1.1.1.1.1.1" xref="S4.E17.m2.3.3.1.1.1.1.1.1.1.cmml">​</mo><mrow id="S4.E17.m2.3.3.1.1.1.1.1.1.3" xref="S4.E17.m2.3.3.1.1.1.1.1.1.3.cmml"><mstyle displaystyle="true" id="S4.E17.m2.3.3.1.1.1.1.1.1.3.1" xref="S4.E17.m2.3.3.1.1.1.1.1.1.3.1.cmml"><munderover id="S4.E17.m2.3.3.1.1.1.1.1.1.3.1a" xref="S4.E17.m2.3.3.1.1.1.1.1.1.3.1.cmml"><mo movablelimits="false" id="S4.E17.m2.3.3.1.1.1.1.1.1.3.1.2.2" xref="S4.E17.m2.3.3.1.1.1.1.1.1.3.1.2.2.cmml">∑</mo><mrow id="S4.E17.m2.3.3.1.1.1.1.1.1.3.1.2.3" xref="S4.E17.m2.3.3.1.1.1.1.1.1.3.1.2.3.cmml"><mi id="S4.E17.m2.3.3.1.1.1.1.1.1.3.1.2.3.2" xref="S4.E17.m2.3.3.1.1.1.1.1.1.3.1.2.3.2.cmml">k</mi><mo id="S4.E17.m2.3.3.1.1.1.1.1.1.3.1.2.3.1" xref="S4.E17.m2.3.3.1.1.1.1.1.1.3.1.2.3.1.cmml">=</mo><mn id="S4.E17.m2.3.3.1.1.1.1.1.1.3.1.2.3.3" xref="S4.E17.m2.3.3.1.1.1.1.1.1.3.1.2.3.3.cmml">1</mn></mrow><mi id="S4.E17.m2.3.3.1.1.1.1.1.1.3.1.3" xref="S4.E17.m2.3.3.1.1.1.1.1.1.3.1.3.cmml">B</mi></munderover></mstyle><mstyle displaystyle="true" id="S4.E17.m2.2.2" xref="S4.E17.m2.2.2.cmml"><mfrac id="S4.E17.m2.2.2a" xref="S4.E17.m2.2.2.cmml"><msup id="S4.E17.m2.1.1.1" xref="S4.E17.m2.1.1.1.cmml"><mi id="S4.E17.m2.1.1.1.3" xref="S4.E17.m2.1.1.1.3.cmml">e</mi><msub id="S4.E17.m2.1.1.1.1.1" xref="S4.E17.m2.1.1.1.1.1.cmml"><mi id="S4.E17.m2.1.1.1.1.1.3" xref="S4.E17.m2.1.1.1.1.1.3.cmml">y</mi><mrow id="S4.E17.m2.1.1.1.1.1.1.1" xref="S4.E17.m2.1.1.1.1.1.1.1.cmml"><mi id="S4.E17.m2.1.1.1.1.1.1.1.3" xref="S4.E17.m2.1.1.1.1.1.1.1.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="S4.E17.m2.1.1.1.1.1.1.1.2" xref="S4.E17.m2.1.1.1.1.1.1.1.2.cmml">​</mo><mrow id="S4.E17.m2.1.1.1.1.1.1.1.4.2" xref="S4.E17.m2.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S4.E17.m2.1.1.1.1.1.1.1.4.2.1" xref="S4.E17.m2.1.1.1.1.1.1.1.cmml">(</mo><mi id="S4.E17.m2.1.1.1.1.1.1.1.1" xref="S4.E17.m2.1.1.1.1.1.1.1.1.cmml">k</mi><mo stretchy="false" id="S4.E17.m2.1.1.1.1.1.1.1.4.2.2" xref="S4.E17.m2.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></msub></msup><mrow id="S4.E17.m2.2.2.2" xref="S4.E17.m2.2.2.2.cmml"><msub id="S4.E17.m2.2.2.2.2" xref="S4.E17.m2.2.2.2.2.cmml"><mo id="S4.E17.m2.2.2.2.2.2" xref="S4.E17.m2.2.2.2.2.2.cmml">∑</mo><mi id="S4.E17.m2.2.2.2.2.3" xref="S4.E17.m2.2.2.2.2.3.cmml">j</mi></msub><msup id="S4.E17.m2.2.2.2.3" xref="S4.E17.m2.2.2.2.3.cmml"><mi id="S4.E17.m2.2.2.2.3.2" xref="S4.E17.m2.2.2.2.3.2.cmml">e</mi><msub id="S4.E17.m2.2.2.2.1.1" xref="S4.E17.m2.2.2.2.1.1.cmml"><mi id="S4.E17.m2.2.2.2.1.1.3" xref="S4.E17.m2.2.2.2.1.1.3.cmml">y</mi><mrow id="S4.E17.m2.2.2.2.1.1.1.1" xref="S4.E17.m2.2.2.2.1.1.1.1.cmml"><mi id="S4.E17.m2.2.2.2.1.1.1.1.3" xref="S4.E17.m2.2.2.2.1.1.1.1.3.cmml">j</mi><mo lspace="0em" rspace="0em" id="S4.E17.m2.2.2.2.1.1.1.1.2" xref="S4.E17.m2.2.2.2.1.1.1.1.2.cmml">​</mo><mrow id="S4.E17.m2.2.2.2.1.1.1.1.4.2" xref="S4.E17.m2.2.2.2.1.1.1.1.cmml"><mo stretchy="false" id="S4.E17.m2.2.2.2.1.1.1.1.4.2.1" xref="S4.E17.m2.2.2.2.1.1.1.1.cmml">(</mo><mi id="S4.E17.m2.2.2.2.1.1.1.1.1" xref="S4.E17.m2.2.2.2.1.1.1.1.1.cmml">k</mi><mo stretchy="false" id="S4.E17.m2.2.2.2.1.1.1.1.4.2.2" xref="S4.E17.m2.2.2.2.1.1.1.1.cmml">)</mo></mrow></mrow></msub></msup></mrow></mfrac></mstyle></mrow></mrow><mo id="S4.E17.m2.3.3.1.1.1.1.1.3" xref="S4.E17.m2.3.3.1.1.1.1.1.1.cmml">)</mo></mrow><mo lspace="0em" rspace="0em" id="S4.E17.m2.3.3.1.1.2.3" xref="S4.E17.m2.3.3.1.1.2.3.cmml">​</mo><mrow id="S4.E17.m2.3.3.1.1.2.2.1" xref="S4.E17.m2.3.3.1.1.2.2.1.1.cmml"><mo id="S4.E17.m2.3.3.1.1.2.2.1.2" xref="S4.E17.m2.3.3.1.1.2.2.1.1.cmml">(</mo><mrow id="S4.E17.m2.3.3.1.1.2.2.1.1" xref="S4.E17.m2.3.3.1.1.2.2.1.1.cmml"><msup id="S4.E17.m2.3.3.1.1.2.2.1.1.2" xref="S4.E17.m2.3.3.1.1.2.2.1.1.2.cmml"><mn id="S4.E17.m2.3.3.1.1.2.2.1.1.2.2" xref="S4.E17.m2.3.3.1.1.2.2.1.1.2.2.cmml">𝟙</mn><mi id="S4.E17.m2.3.3.1.1.2.2.1.1.2.3" xref="S4.E17.m2.3.3.1.1.2.2.1.1.2.3.cmml">T</mi></msup><mo lspace="0.222em" rspace="0.222em" id="S4.E17.m2.3.3.1.1.2.2.1.1.1" xref="S4.E17.m2.3.3.1.1.2.2.1.1.1.cmml">⋅</mo><msub id="S4.E17.m2.3.3.1.1.2.2.1.1.3" xref="S4.E17.m2.3.3.1.1.2.2.1.1.3.cmml"><mi id="S4.E17.m2.3.3.1.1.2.2.1.1.3.2" xref="S4.E17.m2.3.3.1.1.2.2.1.1.3.2.cmml">𝒂</mi><mrow id="S4.E17.m2.3.3.1.1.2.2.1.1.3.3" xref="S4.E17.m2.3.3.1.1.2.2.1.1.3.3.cmml"><mi id="S4.E17.m2.3.3.1.1.2.2.1.1.3.3.2" xref="S4.E17.m2.3.3.1.1.2.2.1.1.3.3.2.cmml">L</mi><mo id="S4.E17.m2.3.3.1.1.2.2.1.1.3.3.1" xref="S4.E17.m2.3.3.1.1.2.2.1.1.3.3.1.cmml">−</mo><mn id="S4.E17.m2.3.3.1.1.2.2.1.1.3.3.3" xref="S4.E17.m2.3.3.1.1.2.2.1.1.3.3.3.cmml">1</mn></mrow></msub></mrow><mo id="S4.E17.m2.3.3.1.1.2.2.1.3" xref="S4.E17.m2.3.3.1.1.2.2.1.1.cmml">)</mo></mrow></mrow></mrow><mo lspace="0.170em" id="S4.E17.m2.3.3.1.2" xref="S4.E17.m2.3.3.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.E17.m2.3b"><apply id="S4.E17.m2.3.3.1.1.cmml" xref="S4.E17.m2.3.3.1"><eq id="S4.E17.m2.3.3.1.1.3.cmml" xref="S4.E17.m2.3.3.1.1.3"></eq><csymbol cd="latexml" id="S4.E17.m2.3.3.1.1.4.cmml" xref="S4.E17.m2.3.3.1.1.4">absent</csymbol><apply id="S4.E17.m2.3.3.1.1.2.cmml" xref="S4.E17.m2.3.3.1.1.2"><times id="S4.E17.m2.3.3.1.1.2.3.cmml" xref="S4.E17.m2.3.3.1.1.2.3"></times><apply id="S4.E17.m2.3.3.1.1.1.1.1.1.cmml" xref="S4.E17.m2.3.3.1.1.1.1.1"><times id="S4.E17.m2.3.3.1.1.1.1.1.1.1.cmml" xref="S4.E17.m2.3.3.1.1.1.1.1.1.1"></times><apply id="S4.E17.m2.3.3.1.1.1.1.1.1.2.cmml" xref="S4.E17.m2.3.3.1.1.1.1.1.1.2"><divide id="S4.E17.m2.3.3.1.1.1.1.1.1.2.1.cmml" xref="S4.E17.m2.3.3.1.1.1.1.1.1.2"></divide><cn type="integer" id="S4.E17.m2.3.3.1.1.1.1.1.1.2.2.cmml" xref="S4.E17.m2.3.3.1.1.1.1.1.1.2.2">1</cn><ci id="S4.E17.m2.3.3.1.1.1.1.1.1.2.3.cmml" xref="S4.E17.m2.3.3.1.1.1.1.1.1.2.3">𝐵</ci></apply><apply id="S4.E17.m2.3.3.1.1.1.1.1.1.3.cmml" xref="S4.E17.m2.3.3.1.1.1.1.1.1.3"><apply id="S4.E17.m2.3.3.1.1.1.1.1.1.3.1.cmml" xref="S4.E17.m2.3.3.1.1.1.1.1.1.3.1"><csymbol cd="ambiguous" id="S4.E17.m2.3.3.1.1.1.1.1.1.3.1.1.cmml" xref="S4.E17.m2.3.3.1.1.1.1.1.1.3.1">superscript</csymbol><apply id="S4.E17.m2.3.3.1.1.1.1.1.1.3.1.2.cmml" xref="S4.E17.m2.3.3.1.1.1.1.1.1.3.1"><csymbol cd="ambiguous" id="S4.E17.m2.3.3.1.1.1.1.1.1.3.1.2.1.cmml" xref="S4.E17.m2.3.3.1.1.1.1.1.1.3.1">subscript</csymbol><sum id="S4.E17.m2.3.3.1.1.1.1.1.1.3.1.2.2.cmml" xref="S4.E17.m2.3.3.1.1.1.1.1.1.3.1.2.2"></sum><apply id="S4.E17.m2.3.3.1.1.1.1.1.1.3.1.2.3.cmml" xref="S4.E17.m2.3.3.1.1.1.1.1.1.3.1.2.3"><eq id="S4.E17.m2.3.3.1.1.1.1.1.1.3.1.2.3.1.cmml" xref="S4.E17.m2.3.3.1.1.1.1.1.1.3.1.2.3.1"></eq><ci id="S4.E17.m2.3.3.1.1.1.1.1.1.3.1.2.3.2.cmml" xref="S4.E17.m2.3.3.1.1.1.1.1.1.3.1.2.3.2">𝑘</ci><cn type="integer" id="S4.E17.m2.3.3.1.1.1.1.1.1.3.1.2.3.3.cmml" xref="S4.E17.m2.3.3.1.1.1.1.1.1.3.1.2.3.3">1</cn></apply></apply><ci id="S4.E17.m2.3.3.1.1.1.1.1.1.3.1.3.cmml" xref="S4.E17.m2.3.3.1.1.1.1.1.1.3.1.3">𝐵</ci></apply><apply id="S4.E17.m2.2.2.cmml" xref="S4.E17.m2.2.2"><divide id="S4.E17.m2.2.2.3.cmml" xref="S4.E17.m2.2.2"></divide><apply id="S4.E17.m2.1.1.1.cmml" xref="S4.E17.m2.1.1.1"><csymbol cd="ambiguous" id="S4.E17.m2.1.1.1.2.cmml" xref="S4.E17.m2.1.1.1">superscript</csymbol><ci id="S4.E17.m2.1.1.1.3.cmml" xref="S4.E17.m2.1.1.1.3">𝑒</ci><apply id="S4.E17.m2.1.1.1.1.1.cmml" xref="S4.E17.m2.1.1.1.1.1"><csymbol cd="ambiguous" id="S4.E17.m2.1.1.1.1.1.2.cmml" xref="S4.E17.m2.1.1.1.1.1">subscript</csymbol><ci id="S4.E17.m2.1.1.1.1.1.3.cmml" xref="S4.E17.m2.1.1.1.1.1.3">𝑦</ci><apply id="S4.E17.m2.1.1.1.1.1.1.1.cmml" xref="S4.E17.m2.1.1.1.1.1.1.1"><times id="S4.E17.m2.1.1.1.1.1.1.1.2.cmml" xref="S4.E17.m2.1.1.1.1.1.1.1.2"></times><ci id="S4.E17.m2.1.1.1.1.1.1.1.3.cmml" xref="S4.E17.m2.1.1.1.1.1.1.1.3">𝑖</ci><ci id="S4.E17.m2.1.1.1.1.1.1.1.1.cmml" xref="S4.E17.m2.1.1.1.1.1.1.1.1">𝑘</ci></apply></apply></apply><apply id="S4.E17.m2.2.2.2.cmml" xref="S4.E17.m2.2.2.2"><apply id="S4.E17.m2.2.2.2.2.cmml" xref="S4.E17.m2.2.2.2.2"><csymbol cd="ambiguous" id="S4.E17.m2.2.2.2.2.1.cmml" xref="S4.E17.m2.2.2.2.2">subscript</csymbol><sum id="S4.E17.m2.2.2.2.2.2.cmml" xref="S4.E17.m2.2.2.2.2.2"></sum><ci id="S4.E17.m2.2.2.2.2.3.cmml" xref="S4.E17.m2.2.2.2.2.3">𝑗</ci></apply><apply id="S4.E17.m2.2.2.2.3.cmml" xref="S4.E17.m2.2.2.2.3"><csymbol cd="ambiguous" id="S4.E17.m2.2.2.2.3.1.cmml" xref="S4.E17.m2.2.2.2.3">superscript</csymbol><ci id="S4.E17.m2.2.2.2.3.2.cmml" xref="S4.E17.m2.2.2.2.3.2">𝑒</ci><apply id="S4.E17.m2.2.2.2.1.1.cmml" xref="S4.E17.m2.2.2.2.1.1"><csymbol cd="ambiguous" id="S4.E17.m2.2.2.2.1.1.2.cmml" xref="S4.E17.m2.2.2.2.1.1">subscript</csymbol><ci id="S4.E17.m2.2.2.2.1.1.3.cmml" xref="S4.E17.m2.2.2.2.1.1.3">𝑦</ci><apply id="S4.E17.m2.2.2.2.1.1.1.1.cmml" xref="S4.E17.m2.2.2.2.1.1.1.1"><times id="S4.E17.m2.2.2.2.1.1.1.1.2.cmml" xref="S4.E17.m2.2.2.2.1.1.1.1.2"></times><ci id="S4.E17.m2.2.2.2.1.1.1.1.3.cmml" xref="S4.E17.m2.2.2.2.1.1.1.1.3">𝑗</ci><ci id="S4.E17.m2.2.2.2.1.1.1.1.1.cmml" xref="S4.E17.m2.2.2.2.1.1.1.1.1">𝑘</ci></apply></apply></apply></apply></apply></apply></apply><apply id="S4.E17.m2.3.3.1.1.2.2.1.1.cmml" xref="S4.E17.m2.3.3.1.1.2.2.1"><ci id="S4.E17.m2.3.3.1.1.2.2.1.1.1.cmml" xref="S4.E17.m2.3.3.1.1.2.2.1.1.1">⋅</ci><apply id="S4.E17.m2.3.3.1.1.2.2.1.1.2.cmml" xref="S4.E17.m2.3.3.1.1.2.2.1.1.2"><csymbol cd="ambiguous" id="S4.E17.m2.3.3.1.1.2.2.1.1.2.1.cmml" xref="S4.E17.m2.3.3.1.1.2.2.1.1.2">superscript</csymbol><cn type="integer" id="S4.E17.m2.3.3.1.1.2.2.1.1.2.2.cmml" xref="S4.E17.m2.3.3.1.1.2.2.1.1.2.2">1</cn><ci id="S4.E17.m2.3.3.1.1.2.2.1.1.2.3.cmml" xref="S4.E17.m2.3.3.1.1.2.2.1.1.2.3">𝑇</ci></apply><apply id="S4.E17.m2.3.3.1.1.2.2.1.1.3.cmml" xref="S4.E17.m2.3.3.1.1.2.2.1.1.3"><csymbol cd="ambiguous" id="S4.E17.m2.3.3.1.1.2.2.1.1.3.1.cmml" xref="S4.E17.m2.3.3.1.1.2.2.1.1.3">subscript</csymbol><ci id="S4.E17.m2.3.3.1.1.2.2.1.1.3.2.cmml" xref="S4.E17.m2.3.3.1.1.2.2.1.1.3.2">𝒂</ci><apply id="S4.E17.m2.3.3.1.1.2.2.1.1.3.3.cmml" xref="S4.E17.m2.3.3.1.1.2.2.1.1.3.3"><minus id="S4.E17.m2.3.3.1.1.2.2.1.1.3.3.1.cmml" xref="S4.E17.m2.3.3.1.1.2.2.1.1.3.3.1"></minus><ci id="S4.E17.m2.3.3.1.1.2.2.1.1.3.3.2.cmml" xref="S4.E17.m2.3.3.1.1.2.2.1.1.3.3.2">𝐿</ci><cn type="integer" id="S4.E17.m2.3.3.1.1.2.2.1.1.3.3.3.cmml" xref="S4.E17.m2.3.3.1.1.2.2.1.1.3.3.3">1</cn></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.E17.m2.3c">\displaystyle=\left(\frac{1}{B}\sum_{k=1}^{B}\frac{e^{y_{i(k)}}}{\sum\nolimits_{j}e^{y_{j(k)}}}\right)\left(\mathds{1}^{T}\cdot\bm{a}_{L-1}\right)\,.</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(17)</span></td>
</tr></tbody>
</table>
<p id="Thmproofx2.p2.14" class="ltx_p">This offset value varies from a label to another, so it is a label-specific value.
Using our defined parameters impact <math id="Thmproofx2.p2.7.m1.1" class="ltx_Math" alttext="m" display="inline"><semantics id="Thmproofx2.p2.7.m1.1a"><mi id="Thmproofx2.p2.7.m1.1.1" xref="Thmproofx2.p2.7.m1.1.1.cmml">m</mi><annotation-xml encoding="MathML-Content" id="Thmproofx2.p2.7.m1.1b"><ci id="Thmproofx2.p2.7.m1.1.1.cmml" xref="Thmproofx2.p2.7.m1.1.1">𝑚</ci></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx2.p2.7.m1.1c">m</annotation></semantics></math> and offset <math id="Thmproofx2.p2.8.m2.1" class="ltx_Math" alttext="s_{i}" display="inline"><semantics id="Thmproofx2.p2.8.m2.1a"><msub id="Thmproofx2.p2.8.m2.1.1" xref="Thmproofx2.p2.8.m2.1.1.cmml"><mi id="Thmproofx2.p2.8.m2.1.1.2" xref="Thmproofx2.p2.8.m2.1.1.2.cmml">s</mi><mi id="Thmproofx2.p2.8.m2.1.1.3" xref="Thmproofx2.p2.8.m2.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="Thmproofx2.p2.8.m2.1b"><apply id="Thmproofx2.p2.8.m2.1.1.cmml" xref="Thmproofx2.p2.8.m2.1.1"><csymbol cd="ambiguous" id="Thmproofx2.p2.8.m2.1.1.1.cmml" xref="Thmproofx2.p2.8.m2.1.1">subscript</csymbol><ci id="Thmproofx2.p2.8.m2.1.1.2.cmml" xref="Thmproofx2.p2.8.m2.1.1.2">𝑠</ci><ci id="Thmproofx2.p2.8.m2.1.1.3.cmml" xref="Thmproofx2.p2.8.m2.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx2.p2.8.m2.1c">s_{i}</annotation></semantics></math>, we can reformulate Eq. (<a href="#S4.E14" title="In Proof ‣ 4 Gradient analysis ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">14</span></a>) as follows <math id="Thmproofx2.p2.9.m3.1" class="ltx_Math" alttext="g_{i}=\lambda_{i}m+s_{i}" display="inline"><semantics id="Thmproofx2.p2.9.m3.1a"><mrow id="Thmproofx2.p2.9.m3.1.1" xref="Thmproofx2.p2.9.m3.1.1.cmml"><msub id="Thmproofx2.p2.9.m3.1.1.2" xref="Thmproofx2.p2.9.m3.1.1.2.cmml"><mi id="Thmproofx2.p2.9.m3.1.1.2.2" xref="Thmproofx2.p2.9.m3.1.1.2.2.cmml">g</mi><mi id="Thmproofx2.p2.9.m3.1.1.2.3" xref="Thmproofx2.p2.9.m3.1.1.2.3.cmml">i</mi></msub><mo id="Thmproofx2.p2.9.m3.1.1.1" xref="Thmproofx2.p2.9.m3.1.1.1.cmml">=</mo><mrow id="Thmproofx2.p2.9.m3.1.1.3" xref="Thmproofx2.p2.9.m3.1.1.3.cmml"><mrow id="Thmproofx2.p2.9.m3.1.1.3.2" xref="Thmproofx2.p2.9.m3.1.1.3.2.cmml"><msub id="Thmproofx2.p2.9.m3.1.1.3.2.2" xref="Thmproofx2.p2.9.m3.1.1.3.2.2.cmml"><mi id="Thmproofx2.p2.9.m3.1.1.3.2.2.2" xref="Thmproofx2.p2.9.m3.1.1.3.2.2.2.cmml">λ</mi><mi id="Thmproofx2.p2.9.m3.1.1.3.2.2.3" xref="Thmproofx2.p2.9.m3.1.1.3.2.2.3.cmml">i</mi></msub><mo lspace="0em" rspace="0em" id="Thmproofx2.p2.9.m3.1.1.3.2.1" xref="Thmproofx2.p2.9.m3.1.1.3.2.1.cmml">​</mo><mi id="Thmproofx2.p2.9.m3.1.1.3.2.3" xref="Thmproofx2.p2.9.m3.1.1.3.2.3.cmml">m</mi></mrow><mo id="Thmproofx2.p2.9.m3.1.1.3.1" xref="Thmproofx2.p2.9.m3.1.1.3.1.cmml">+</mo><msub id="Thmproofx2.p2.9.m3.1.1.3.3" xref="Thmproofx2.p2.9.m3.1.1.3.3.cmml"><mi id="Thmproofx2.p2.9.m3.1.1.3.3.2" xref="Thmproofx2.p2.9.m3.1.1.3.3.2.cmml">s</mi><mi id="Thmproofx2.p2.9.m3.1.1.3.3.3" xref="Thmproofx2.p2.9.m3.1.1.3.3.3.cmml">i</mi></msub></mrow></mrow><annotation-xml encoding="MathML-Content" id="Thmproofx2.p2.9.m3.1b"><apply id="Thmproofx2.p2.9.m3.1.1.cmml" xref="Thmproofx2.p2.9.m3.1.1"><eq id="Thmproofx2.p2.9.m3.1.1.1.cmml" xref="Thmproofx2.p2.9.m3.1.1.1"></eq><apply id="Thmproofx2.p2.9.m3.1.1.2.cmml" xref="Thmproofx2.p2.9.m3.1.1.2"><csymbol cd="ambiguous" id="Thmproofx2.p2.9.m3.1.1.2.1.cmml" xref="Thmproofx2.p2.9.m3.1.1.2">subscript</csymbol><ci id="Thmproofx2.p2.9.m3.1.1.2.2.cmml" xref="Thmproofx2.p2.9.m3.1.1.2.2">𝑔</ci><ci id="Thmproofx2.p2.9.m3.1.1.2.3.cmml" xref="Thmproofx2.p2.9.m3.1.1.2.3">𝑖</ci></apply><apply id="Thmproofx2.p2.9.m3.1.1.3.cmml" xref="Thmproofx2.p2.9.m3.1.1.3"><plus id="Thmproofx2.p2.9.m3.1.1.3.1.cmml" xref="Thmproofx2.p2.9.m3.1.1.3.1"></plus><apply id="Thmproofx2.p2.9.m3.1.1.3.2.cmml" xref="Thmproofx2.p2.9.m3.1.1.3.2"><times id="Thmproofx2.p2.9.m3.1.1.3.2.1.cmml" xref="Thmproofx2.p2.9.m3.1.1.3.2.1"></times><apply id="Thmproofx2.p2.9.m3.1.1.3.2.2.cmml" xref="Thmproofx2.p2.9.m3.1.1.3.2.2"><csymbol cd="ambiguous" id="Thmproofx2.p2.9.m3.1.1.3.2.2.1.cmml" xref="Thmproofx2.p2.9.m3.1.1.3.2.2">subscript</csymbol><ci id="Thmproofx2.p2.9.m3.1.1.3.2.2.2.cmml" xref="Thmproofx2.p2.9.m3.1.1.3.2.2.2">𝜆</ci><ci id="Thmproofx2.p2.9.m3.1.1.3.2.2.3.cmml" xref="Thmproofx2.p2.9.m3.1.1.3.2.2.3">𝑖</ci></apply><ci id="Thmproofx2.p2.9.m3.1.1.3.2.3.cmml" xref="Thmproofx2.p2.9.m3.1.1.3.2.3">𝑚</ci></apply><apply id="Thmproofx2.p2.9.m3.1.1.3.3.cmml" xref="Thmproofx2.p2.9.m3.1.1.3.3"><csymbol cd="ambiguous" id="Thmproofx2.p2.9.m3.1.1.3.3.1.cmml" xref="Thmproofx2.p2.9.m3.1.1.3.3">subscript</csymbol><ci id="Thmproofx2.p2.9.m3.1.1.3.3.2.cmml" xref="Thmproofx2.p2.9.m3.1.1.3.3.2">𝑠</ci><ci id="Thmproofx2.p2.9.m3.1.1.3.3.3.cmml" xref="Thmproofx2.p2.9.m3.1.1.3.3.3">𝑖</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx2.p2.9.m3.1c">g_{i}=\lambda_{i}m+s_{i}</annotation></semantics></math>.
From this equation, it follows easily that the number of occurrences <math id="Thmproofx2.p2.10.m4.1" class="ltx_Math" alttext="\lambda_{i}" display="inline"><semantics id="Thmproofx2.p2.10.m4.1a"><msub id="Thmproofx2.p2.10.m4.1.1" xref="Thmproofx2.p2.10.m4.1.1.cmml"><mi id="Thmproofx2.p2.10.m4.1.1.2" xref="Thmproofx2.p2.10.m4.1.1.2.cmml">λ</mi><mi id="Thmproofx2.p2.10.m4.1.1.3" xref="Thmproofx2.p2.10.m4.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="Thmproofx2.p2.10.m4.1b"><apply id="Thmproofx2.p2.10.m4.1.1.cmml" xref="Thmproofx2.p2.10.m4.1.1"><csymbol cd="ambiguous" id="Thmproofx2.p2.10.m4.1.1.1.cmml" xref="Thmproofx2.p2.10.m4.1.1">subscript</csymbol><ci id="Thmproofx2.p2.10.m4.1.1.2.cmml" xref="Thmproofx2.p2.10.m4.1.1.2">𝜆</ci><ci id="Thmproofx2.p2.10.m4.1.1.3.cmml" xref="Thmproofx2.p2.10.m4.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx2.p2.10.m4.1c">\lambda_{i}</annotation></semantics></math> of label <math id="Thmproofx2.p2.11.m5.1" class="ltx_Math" alttext="i" display="inline"><semantics id="Thmproofx2.p2.11.m5.1a"><mi id="Thmproofx2.p2.11.m5.1.1" xref="Thmproofx2.p2.11.m5.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="Thmproofx2.p2.11.m5.1b"><ci id="Thmproofx2.p2.11.m5.1.1.cmml" xref="Thmproofx2.p2.11.m5.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx2.p2.11.m5.1c">i</annotation></semantics></math> can be derived from the parameters <math id="Thmproofx2.p2.12.m6.1" class="ltx_Math" alttext="m" display="inline"><semantics id="Thmproofx2.p2.12.m6.1a"><mi id="Thmproofx2.p2.12.m6.1.1" xref="Thmproofx2.p2.12.m6.1.1.cmml">m</mi><annotation-xml encoding="MathML-Content" id="Thmproofx2.p2.12.m6.1b"><ci id="Thmproofx2.p2.12.m6.1.1.cmml" xref="Thmproofx2.p2.12.m6.1.1">𝑚</ci></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx2.p2.12.m6.1c">m</annotation></semantics></math>, <math id="Thmproofx2.p2.13.m7.1" class="ltx_Math" alttext="s_{i}" display="inline"><semantics id="Thmproofx2.p2.13.m7.1a"><msub id="Thmproofx2.p2.13.m7.1.1" xref="Thmproofx2.p2.13.m7.1.1.cmml"><mi id="Thmproofx2.p2.13.m7.1.1.2" xref="Thmproofx2.p2.13.m7.1.1.2.cmml">s</mi><mi id="Thmproofx2.p2.13.m7.1.1.3" xref="Thmproofx2.p2.13.m7.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="Thmproofx2.p2.13.m7.1b"><apply id="Thmproofx2.p2.13.m7.1.1.cmml" xref="Thmproofx2.p2.13.m7.1.1"><csymbol cd="ambiguous" id="Thmproofx2.p2.13.m7.1.1.1.cmml" xref="Thmproofx2.p2.13.m7.1.1">subscript</csymbol><ci id="Thmproofx2.p2.13.m7.1.1.2.cmml" xref="Thmproofx2.p2.13.m7.1.1.2">𝑠</ci><ci id="Thmproofx2.p2.13.m7.1.1.3.cmml" xref="Thmproofx2.p2.13.m7.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx2.p2.13.m7.1c">s_{i}</annotation></semantics></math>, and <math id="Thmproofx2.p2.14.m8.1" class="ltx_Math" alttext="g_{i}" display="inline"><semantics id="Thmproofx2.p2.14.m8.1a"><msub id="Thmproofx2.p2.14.m8.1.1" xref="Thmproofx2.p2.14.m8.1.1.cmml"><mi id="Thmproofx2.p2.14.m8.1.1.2" xref="Thmproofx2.p2.14.m8.1.1.2.cmml">g</mi><mi id="Thmproofx2.p2.14.m8.1.1.3" xref="Thmproofx2.p2.14.m8.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="Thmproofx2.p2.14.m8.1b"><apply id="Thmproofx2.p2.14.m8.1.1.cmml" xref="Thmproofx2.p2.14.m8.1.1"><csymbol cd="ambiguous" id="Thmproofx2.p2.14.m8.1.1.1.cmml" xref="Thmproofx2.p2.14.m8.1.1">subscript</csymbol><ci id="Thmproofx2.p2.14.m8.1.1.2.cmml" xref="Thmproofx2.p2.14.m8.1.1.2">𝑔</ci><ci id="Thmproofx2.p2.14.m8.1.1.3.cmml" xref="Thmproofx2.p2.14.m8.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Thmproofx2.p2.14.m8.1c">g_{i}</annotation></semantics></math>.</p>
</div>
<figure id="S4.F3" class="ltx_figure">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S4.F3.sf1" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2105.09369/assets/x2.png" id="S4.F3.sf1.g1" class="ltx_graphics ltx_img_landscape" width="664" height="495" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S4.F3.sf1.2.1.1" class="ltx_text" style="font-size:90%;">(a)</span> </span><span id="S4.F3.sf1.3.2" class="ltx_text" style="font-size:90%;">Gradients distribution</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S4.F3.sf2" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2105.09369/assets/x3.png" id="S4.F3.sf2.g1" class="ltx_graphics ltx_img_square" width="332" height="286" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S4.F3.sf2.2.1.1" class="ltx_text" style="font-size:90%;">(b)</span> </span><span id="S4.F3.sf2.3.2" class="ltx_text" style="font-size:90%;">Gradients heatmap</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S4.F3.sf3" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2105.09369/assets/x4.png" id="S4.F3.sf3.g1" class="ltx_graphics ltx_img_landscape" width="664" height="503" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S4.F3.sf3.2.1.1" class="ltx_text" style="font-size:90%;">(c)</span> </span><span id="S4.F3.sf3.3.2" class="ltx_text" style="font-size:90%;">After calibration</span></figcaption>
</figure>
</div>
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S4.F3.4.2.1" class="ltx_text" style="font-size:90%;">Figure 3</span>: </span><span id="S4.F3.2.1" class="ltx_text" style="font-size:80%;">Distribution of gradients obtained from a randomly initialized CNN on a batch of samples of MNIST varying the batch size in <math id="S4.F3.2.1.m1.4" class="ltx_Math" alttext="\{2,8,32,128\}" display="inline"><semantics id="S4.F3.2.1.m1.4b"><mrow id="S4.F3.2.1.m1.4.5.2" xref="S4.F3.2.1.m1.4.5.1.cmml"><mo stretchy="false" id="S4.F3.2.1.m1.4.5.2.1" xref="S4.F3.2.1.m1.4.5.1.cmml">{</mo><mn id="S4.F3.2.1.m1.1.1" xref="S4.F3.2.1.m1.1.1.cmml">2</mn><mo id="S4.F3.2.1.m1.4.5.2.2" xref="S4.F3.2.1.m1.4.5.1.cmml">,</mo><mn id="S4.F3.2.1.m1.2.2" xref="S4.F3.2.1.m1.2.2.cmml">8</mn><mo id="S4.F3.2.1.m1.4.5.2.3" xref="S4.F3.2.1.m1.4.5.1.cmml">,</mo><mn id="S4.F3.2.1.m1.3.3" xref="S4.F3.2.1.m1.3.3.cmml">32</mn><mo id="S4.F3.2.1.m1.4.5.2.4" xref="S4.F3.2.1.m1.4.5.1.cmml">,</mo><mn id="S4.F3.2.1.m1.4.4" xref="S4.F3.2.1.m1.4.4.cmml">128</mn><mo stretchy="false" id="S4.F3.2.1.m1.4.5.2.5" xref="S4.F3.2.1.m1.4.5.1.cmml">}</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.F3.2.1.m1.4c"><set id="S4.F3.2.1.m1.4.5.1.cmml" xref="S4.F3.2.1.m1.4.5.2"><cn type="integer" id="S4.F3.2.1.m1.1.1.cmml" xref="S4.F3.2.1.m1.1.1">2</cn><cn type="integer" id="S4.F3.2.1.m1.2.2.cmml" xref="S4.F3.2.1.m1.2.2">8</cn><cn type="integer" id="S4.F3.2.1.m1.3.3.cmml" xref="S4.F3.2.1.m1.3.3">32</cn><cn type="integer" id="S4.F3.2.1.m1.4.4.cmml" xref="S4.F3.2.1.m1.4.4">128</cn></set></annotation-xml><annotation encoding="application/x-tex" id="S4.F3.2.1.m1.4d">\{2,8,32,128\}</annotation></semantics></math>: (a) the distribution shows the correlation between the gradients and the label occurrences, (b) heatmap shows that the majority of the gradients have negative values when the corresponding label is present in the batch, (c) gradients after calibration exhibit a more prominent correlation with label occurrences. Given this strong correlation, it is possible to accurately estimate the label occurrences in the training batch basing on the gradient values.</span></figcaption>
</figure>
</div>
<div id="S4.p4" class="ltx_para">
<p id="S4.p4.5" class="ltx_p">To demonstrate the two gradient properties, we randomly initialize the weights of a CNN composed by three convolutional layers.
Then, we check the gradients <math id="S4.p4.1.m1.1" class="ltx_Math" alttext="g_{i}" display="inline"><semantics id="S4.p4.1.m1.1a"><msub id="S4.p4.1.m1.1.1" xref="S4.p4.1.m1.1.1.cmml"><mi id="S4.p4.1.m1.1.1.2" xref="S4.p4.1.m1.1.1.2.cmml">g</mi><mi id="S4.p4.1.m1.1.1.3" xref="S4.p4.1.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S4.p4.1.m1.1b"><apply id="S4.p4.1.m1.1.1.cmml" xref="S4.p4.1.m1.1.1"><csymbol cd="ambiguous" id="S4.p4.1.m1.1.1.1.cmml" xref="S4.p4.1.m1.1.1">subscript</csymbol><ci id="S4.p4.1.m1.1.1.2.cmml" xref="S4.p4.1.m1.1.1.2">𝑔</ci><ci id="S4.p4.1.m1.1.1.3.cmml" xref="S4.p4.1.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.p4.1.m1.1c">g_{i}</annotation></semantics></math> by evaluating the network on a batch of samples
taken from the MNIST dataset <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib20" title="" class="ltx_ref">20</a>]</cite>, which contains <math id="S4.p4.2.m2.1" class="ltx_Math" alttext="10" display="inline"><semantics id="S4.p4.2.m2.1a"><mn id="S4.p4.2.m2.1.1" xref="S4.p4.2.m2.1.1.cmml">10</mn><annotation-xml encoding="MathML-Content" id="S4.p4.2.m2.1b"><cn type="integer" id="S4.p4.2.m2.1.1.cmml" xref="S4.p4.2.m2.1.1">10</cn></annotation-xml><annotation encoding="application/x-tex" id="S4.p4.2.m2.1c">10</annotation></semantics></math> classes. 
We repeat the experiment <math id="S4.p4.3.m3.2" class="ltx_Math" alttext="1,000" display="inline"><semantics id="S4.p4.3.m3.2a"><mrow id="S4.p4.3.m3.2.3.2" xref="S4.p4.3.m3.2.3.1.cmml"><mn id="S4.p4.3.m3.1.1" xref="S4.p4.3.m3.1.1.cmml">1</mn><mo id="S4.p4.3.m3.2.3.2.1" xref="S4.p4.3.m3.2.3.1.cmml">,</mo><mn id="S4.p4.3.m3.2.2" xref="S4.p4.3.m3.2.2.cmml">000</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.p4.3.m3.2b"><list id="S4.p4.3.m3.2.3.1.cmml" xref="S4.p4.3.m3.2.3.2"><cn type="integer" id="S4.p4.3.m3.1.1.cmml" xref="S4.p4.3.m3.1.1">1</cn><cn type="integer" id="S4.p4.3.m3.2.2.cmml" xref="S4.p4.3.m3.2.2">000</cn></list></annotation-xml><annotation encoding="application/x-tex" id="S4.p4.3.m3.2c">1,000</annotation></semantics></math> times with different batch sizes <math id="S4.p4.4.m4.4" class="ltx_Math" alttext="B\in\{2,8,32,128\}" display="inline"><semantics id="S4.p4.4.m4.4a"><mrow id="S4.p4.4.m4.4.5" xref="S4.p4.4.m4.4.5.cmml"><mi id="S4.p4.4.m4.4.5.2" xref="S4.p4.4.m4.4.5.2.cmml">B</mi><mo id="S4.p4.4.m4.4.5.1" xref="S4.p4.4.m4.4.5.1.cmml">∈</mo><mrow id="S4.p4.4.m4.4.5.3.2" xref="S4.p4.4.m4.4.5.3.1.cmml"><mo stretchy="false" id="S4.p4.4.m4.4.5.3.2.1" xref="S4.p4.4.m4.4.5.3.1.cmml">{</mo><mn id="S4.p4.4.m4.1.1" xref="S4.p4.4.m4.1.1.cmml">2</mn><mo id="S4.p4.4.m4.4.5.3.2.2" xref="S4.p4.4.m4.4.5.3.1.cmml">,</mo><mn id="S4.p4.4.m4.2.2" xref="S4.p4.4.m4.2.2.cmml">8</mn><mo id="S4.p4.4.m4.4.5.3.2.3" xref="S4.p4.4.m4.4.5.3.1.cmml">,</mo><mn id="S4.p4.4.m4.3.3" xref="S4.p4.4.m4.3.3.cmml">32</mn><mo id="S4.p4.4.m4.4.5.3.2.4" xref="S4.p4.4.m4.4.5.3.1.cmml">,</mo><mn id="S4.p4.4.m4.4.4" xref="S4.p4.4.m4.4.4.cmml">128</mn><mo stretchy="false" id="S4.p4.4.m4.4.5.3.2.5" xref="S4.p4.4.m4.4.5.3.1.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.p4.4.m4.4b"><apply id="S4.p4.4.m4.4.5.cmml" xref="S4.p4.4.m4.4.5"><in id="S4.p4.4.m4.4.5.1.cmml" xref="S4.p4.4.m4.4.5.1"></in><ci id="S4.p4.4.m4.4.5.2.cmml" xref="S4.p4.4.m4.4.5.2">𝐵</ci><set id="S4.p4.4.m4.4.5.3.1.cmml" xref="S4.p4.4.m4.4.5.3.2"><cn type="integer" id="S4.p4.4.m4.1.1.cmml" xref="S4.p4.4.m4.1.1">2</cn><cn type="integer" id="S4.p4.4.m4.2.2.cmml" xref="S4.p4.4.m4.2.2">8</cn><cn type="integer" id="S4.p4.4.m4.3.3.cmml" xref="S4.p4.4.m4.3.3">32</cn><cn type="integer" id="S4.p4.4.m4.4.4.cmml" xref="S4.p4.4.m4.4.4">128</cn></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.p4.4.m4.4c">B\in\{2,8,32,128\}</annotation></semantics></math>.
Figure <a href="#S4.F3" title="Figure 3 ‣ Proof ‣ 4 Gradient analysis ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a> (a) depicts the distribution of the resulting gradients, where each data point represents the gradient value of one label in one experiment. 
The y-axis shows the gradient values and the x-axis represents the number of occurrences for the corresponding label <math id="S4.p4.5.m5.2" class="ltx_Math" alttext="i:\forall i\in[1,n]" display="inline"><semantics id="S4.p4.5.m5.2a"><mrow id="S4.p4.5.m5.2.3" xref="S4.p4.5.m5.2.3.cmml"><mi id="S4.p4.5.m5.2.3.2" xref="S4.p4.5.m5.2.3.2.cmml">i</mi><mo lspace="0.278em" rspace="0.278em" id="S4.p4.5.m5.2.3.1" xref="S4.p4.5.m5.2.3.1.cmml">:</mo><mrow id="S4.p4.5.m5.2.3.3" xref="S4.p4.5.m5.2.3.3.cmml"><mrow id="S4.p4.5.m5.2.3.3.2" xref="S4.p4.5.m5.2.3.3.2.cmml"><mo rspace="0.167em" id="S4.p4.5.m5.2.3.3.2.1" xref="S4.p4.5.m5.2.3.3.2.1.cmml">∀</mo><mi id="S4.p4.5.m5.2.3.3.2.2" xref="S4.p4.5.m5.2.3.3.2.2.cmml">i</mi></mrow><mo id="S4.p4.5.m5.2.3.3.1" xref="S4.p4.5.m5.2.3.3.1.cmml">∈</mo><mrow id="S4.p4.5.m5.2.3.3.3.2" xref="S4.p4.5.m5.2.3.3.3.1.cmml"><mo stretchy="false" id="S4.p4.5.m5.2.3.3.3.2.1" xref="S4.p4.5.m5.2.3.3.3.1.cmml">[</mo><mn id="S4.p4.5.m5.1.1" xref="S4.p4.5.m5.1.1.cmml">1</mn><mo id="S4.p4.5.m5.2.3.3.3.2.2" xref="S4.p4.5.m5.2.3.3.3.1.cmml">,</mo><mi id="S4.p4.5.m5.2.2" xref="S4.p4.5.m5.2.2.cmml">n</mi><mo stretchy="false" id="S4.p4.5.m5.2.3.3.3.2.3" xref="S4.p4.5.m5.2.3.3.3.1.cmml">]</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.p4.5.m5.2b"><apply id="S4.p4.5.m5.2.3.cmml" xref="S4.p4.5.m5.2.3"><ci id="S4.p4.5.m5.2.3.1.cmml" xref="S4.p4.5.m5.2.3.1">:</ci><ci id="S4.p4.5.m5.2.3.2.cmml" xref="S4.p4.5.m5.2.3.2">𝑖</ci><apply id="S4.p4.5.m5.2.3.3.cmml" xref="S4.p4.5.m5.2.3.3"><in id="S4.p4.5.m5.2.3.3.1.cmml" xref="S4.p4.5.m5.2.3.3.1"></in><apply id="S4.p4.5.m5.2.3.3.2.cmml" xref="S4.p4.5.m5.2.3.3.2"><csymbol cd="latexml" id="S4.p4.5.m5.2.3.3.2.1.cmml" xref="S4.p4.5.m5.2.3.3.2.1">for-all</csymbol><ci id="S4.p4.5.m5.2.3.3.2.2.cmml" xref="S4.p4.5.m5.2.3.3.2.2">𝑖</ci></apply><interval closure="closed" id="S4.p4.5.m5.2.3.3.3.1.cmml" xref="S4.p4.5.m5.2.3.3.3.2"><cn type="integer" id="S4.p4.5.m5.1.1.cmml" xref="S4.p4.5.m5.1.1">1</cn><ci id="S4.p4.5.m5.2.2.cmml" xref="S4.p4.5.m5.2.2">𝑛</ci></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.p4.5.m5.2c">i:\forall i\in[1,n]</annotation></semantics></math>.</p>
</div>
<div id="S4.p5" class="ltx_para">
<p id="S4.p5.4" class="ltx_p">We can see that there are no negative gradients at <math id="S4.p5.1.m1.1" class="ltx_Math" alttext="\lambda_{i}=0" display="inline"><semantics id="S4.p5.1.m1.1a"><mrow id="S4.p5.1.m1.1.1" xref="S4.p5.1.m1.1.1.cmml"><msub id="S4.p5.1.m1.1.1.2" xref="S4.p5.1.m1.1.1.2.cmml"><mi id="S4.p5.1.m1.1.1.2.2" xref="S4.p5.1.m1.1.1.2.2.cmml">λ</mi><mi id="S4.p5.1.m1.1.1.2.3" xref="S4.p5.1.m1.1.1.2.3.cmml">i</mi></msub><mo id="S4.p5.1.m1.1.1.1" xref="S4.p5.1.m1.1.1.1.cmml">=</mo><mn id="S4.p5.1.m1.1.1.3" xref="S4.p5.1.m1.1.1.3.cmml">0</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.p5.1.m1.1b"><apply id="S4.p5.1.m1.1.1.cmml" xref="S4.p5.1.m1.1.1"><eq id="S4.p5.1.m1.1.1.1.cmml" xref="S4.p5.1.m1.1.1.1"></eq><apply id="S4.p5.1.m1.1.1.2.cmml" xref="S4.p5.1.m1.1.1.2"><csymbol cd="ambiguous" id="S4.p5.1.m1.1.1.2.1.cmml" xref="S4.p5.1.m1.1.1.2">subscript</csymbol><ci id="S4.p5.1.m1.1.1.2.2.cmml" xref="S4.p5.1.m1.1.1.2.2">𝜆</ci><ci id="S4.p5.1.m1.1.1.2.3.cmml" xref="S4.p5.1.m1.1.1.2.3">𝑖</ci></apply><cn type="integer" id="S4.p5.1.m1.1.1.3.cmml" xref="S4.p5.1.m1.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.p5.1.m1.1c">\lambda_{i}=0</annotation></semantics></math> (framed in red), i.e.,  the negative gradients always correspond to an existing label in the batch <math id="S4.p5.2.m2.1" class="ltx_Math" alttext="\lambda_{i}&gt;0" display="inline"><semantics id="S4.p5.2.m2.1a"><mrow id="S4.p5.2.m2.1.1" xref="S4.p5.2.m2.1.1.cmml"><msub id="S4.p5.2.m2.1.1.2" xref="S4.p5.2.m2.1.1.2.cmml"><mi id="S4.p5.2.m2.1.1.2.2" xref="S4.p5.2.m2.1.1.2.2.cmml">λ</mi><mi id="S4.p5.2.m2.1.1.2.3" xref="S4.p5.2.m2.1.1.2.3.cmml">i</mi></msub><mo id="S4.p5.2.m2.1.1.1" xref="S4.p5.2.m2.1.1.1.cmml">&gt;</mo><mn id="S4.p5.2.m2.1.1.3" xref="S4.p5.2.m2.1.1.3.cmml">0</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.p5.2.m2.1b"><apply id="S4.p5.2.m2.1.1.cmml" xref="S4.p5.2.m2.1.1"><gt id="S4.p5.2.m2.1.1.1.cmml" xref="S4.p5.2.m2.1.1.1"></gt><apply id="S4.p5.2.m2.1.1.2.cmml" xref="S4.p5.2.m2.1.1.2"><csymbol cd="ambiguous" id="S4.p5.2.m2.1.1.2.1.cmml" xref="S4.p5.2.m2.1.1.2">subscript</csymbol><ci id="S4.p5.2.m2.1.1.2.2.cmml" xref="S4.p5.2.m2.1.1.2.2">𝜆</ci><ci id="S4.p5.2.m2.1.1.2.3.cmml" xref="S4.p5.2.m2.1.1.2.3">𝑖</ci></apply><cn type="integer" id="S4.p5.2.m2.1.1.3.cmml" xref="S4.p5.2.m2.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.p5.2.m2.1c">\lambda_{i}&gt;0</annotation></semantics></math>, which confirms Property 1. For all the batch sizes, we notice that the values of the gradients decrease consistently with the increase of the occurrences.
This, in turn, confirms Property 2 and our definition of the impact parameter.
We also observe that the decrease of gradient values is roughly constant regardless of the label.
This confirms the impact being label-agnostic, as we described earlier.
Furthermore, we notice that the magnitude of the impact is negatively correlated with the batch size.
Meaning, the more samples are present in a batch, the smaller are the changes of the gradients for a different number of occurrences.
This is also clear from the definition of impact in Eq. (<a href="#S4.E16" title="In Proof ‣ 4 Gradient analysis ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">16</span></a>).
We also can see that there are positive gradients that correspond to <math id="S4.p5.3.m3.1" class="ltx_Math" alttext="\lambda_{i}&gt;0" display="inline"><semantics id="S4.p5.3.m3.1a"><mrow id="S4.p5.3.m3.1.1" xref="S4.p5.3.m3.1.1.cmml"><msub id="S4.p5.3.m3.1.1.2" xref="S4.p5.3.m3.1.1.2.cmml"><mi id="S4.p5.3.m3.1.1.2.2" xref="S4.p5.3.m3.1.1.2.2.cmml">λ</mi><mi id="S4.p5.3.m3.1.1.2.3" xref="S4.p5.3.m3.1.1.2.3.cmml">i</mi></msub><mo id="S4.p5.3.m3.1.1.1" xref="S4.p5.3.m3.1.1.1.cmml">&gt;</mo><mn id="S4.p5.3.m3.1.1.3" xref="S4.p5.3.m3.1.1.3.cmml">0</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.p5.3.m3.1b"><apply id="S4.p5.3.m3.1.1.cmml" xref="S4.p5.3.m3.1.1"><gt id="S4.p5.3.m3.1.1.1.cmml" xref="S4.p5.3.m3.1.1.1"></gt><apply id="S4.p5.3.m3.1.1.2.cmml" xref="S4.p5.3.m3.1.1.2"><csymbol cd="ambiguous" id="S4.p5.3.m3.1.1.2.1.cmml" xref="S4.p5.3.m3.1.1.2">subscript</csymbol><ci id="S4.p5.3.m3.1.1.2.2.cmml" xref="S4.p5.3.m3.1.1.2.2">𝜆</ci><ci id="S4.p5.3.m3.1.1.2.3.cmml" xref="S4.p5.3.m3.1.1.2.3">𝑖</ci></apply><cn type="integer" id="S4.p5.3.m3.1.1.3.cmml" xref="S4.p5.3.m3.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.p5.3.m3.1c">\lambda_{i}&gt;0</annotation></semantics></math>.
The positive value of these gradients is mainly caused by the offset <math id="S4.p5.4.m4.1" class="ltx_Math" alttext="s_{i}" display="inline"><semantics id="S4.p5.4.m4.1a"><msub id="S4.p5.4.m4.1.1" xref="S4.p5.4.m4.1.1.cmml"><mi id="S4.p5.4.m4.1.1.2" xref="S4.p5.4.m4.1.1.2.cmml">s</mi><mi id="S4.p5.4.m4.1.1.3" xref="S4.p5.4.m4.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S4.p5.4.m4.1b"><apply id="S4.p5.4.m4.1.1.cmml" xref="S4.p5.4.m4.1.1"><csymbol cd="ambiguous" id="S4.p5.4.m4.1.1.1.cmml" xref="S4.p5.4.m4.1.1">subscript</csymbol><ci id="S4.p5.4.m4.1.1.2.cmml" xref="S4.p5.4.m4.1.1.2">𝑠</ci><ci id="S4.p5.4.m4.1.1.3.cmml" xref="S4.p5.4.m4.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.p5.4.m4.1c">s_{i}</annotation></semantics></math> defined in Eq. (<a href="#S4.E17" title="In Proof ‣ 4 Gradient analysis ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">17</span></a>).
To illustrate their ratio, we depict a heatmap in Figure <a href="#S4.F3" title="Figure 3 ‣ Proof ‣ 4 Gradient analysis ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a> (b). 
We observe that only part of the gradients (18%) are positive, i.e., shifted by the offset, while the majority of the gradients have negative values when the corresponding labels are present in the batch. In Section <a href="#S5.SS1" title="5.1 Attack parameters estimation ‣ 5 Label extraction ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5.1</span></a>, we describe our methods to estimate the offset and elaborate on Figure <a href="#S4.F3" title="Figure 3 ‣ Proof ‣ 4 Gradient analysis ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a> (c).</p>
</div>
</section>
<section id="S5" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">5 </span>Label extraction</h2>

<div id="S5.p1" class="ltx_para">
<p id="S5.p1.1" class="ltx_p">In this section, we present <span title="" class="ltx_glossaryref">Label Leakage from Gradients (LLG)</span>, to extract the ground-truth labels from shared gradients.
We first introduce different methods to estimate the attack parameters, impact and offset.
Then, we explain the attack.</p>
</div>
<section id="S5.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.1 </span>Attack parameters estimation</h3>

<div id="S5.SS1.p1" class="ltx_para">
<p id="S5.SS1.p1.1" class="ltx_p">In the light of different threat models, we empirically  developed several heuristic  methods to estimate the impact and offset.</p>
<dl id="S5.I1" class="ltx_description">
<dt id="S5.I1.ix1" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span id="S5.I1.ix1.1.1.1" class="ltx_text ltx_font_bold">Shared gradients.</span></span></dt>
<dd class="ltx_item">
<div id="S5.I1.ix1.p1" class="ltx_para">
<p id="S5.I1.ix1.p1.7" class="ltx_p">In this scenario, the adversary has access only to the shared gradients.
As mentioned earlier, the impact refers to the change in the value of the gradients corresponding to one occurrence of a label.
Our intuition is that a good estimation for the impact is obtained by averaging the gradients
over the number of data samples <math id="S5.I1.ix1.p1.1.m1.1" class="ltx_Math" alttext="|\bm{D}|" display="inline"><semantics id="S5.I1.ix1.p1.1.m1.1a"><mrow id="S5.I1.ix1.p1.1.m1.1.2.2" xref="S5.I1.ix1.p1.1.m1.1.2.1.cmml"><mo stretchy="false" id="S5.I1.ix1.p1.1.m1.1.2.2.1" xref="S5.I1.ix1.p1.1.m1.1.2.1.1.cmml">|</mo><mi id="S5.I1.ix1.p1.1.m1.1.1" xref="S5.I1.ix1.p1.1.m1.1.1.cmml">𝑫</mi><mo stretchy="false" id="S5.I1.ix1.p1.1.m1.1.2.2.2" xref="S5.I1.ix1.p1.1.m1.1.2.1.1.cmml">|</mo></mrow><annotation-xml encoding="MathML-Content" id="S5.I1.ix1.p1.1.m1.1b"><apply id="S5.I1.ix1.p1.1.m1.1.2.1.cmml" xref="S5.I1.ix1.p1.1.m1.1.2.2"><abs id="S5.I1.ix1.p1.1.m1.1.2.1.1.cmml" xref="S5.I1.ix1.p1.1.m1.1.2.2.1"></abs><ci id="S5.I1.ix1.p1.1.m1.1.1.cmml" xref="S5.I1.ix1.p1.1.m1.1.1">𝑫</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.I1.ix1.p1.1.m1.1c">|\bm{D}|</annotation></semantics></math> used by a user in a training round.
For FedSGD, <math id="S5.I1.ix1.p1.2.m2.1" class="ltx_Math" alttext="|\bm{D}|=B" display="inline"><semantics id="S5.I1.ix1.p1.2.m2.1a"><mrow id="S5.I1.ix1.p1.2.m2.1.2" xref="S5.I1.ix1.p1.2.m2.1.2.cmml"><mrow id="S5.I1.ix1.p1.2.m2.1.2.2.2" xref="S5.I1.ix1.p1.2.m2.1.2.2.1.cmml"><mo stretchy="false" id="S5.I1.ix1.p1.2.m2.1.2.2.2.1" xref="S5.I1.ix1.p1.2.m2.1.2.2.1.1.cmml">|</mo><mi id="S5.I1.ix1.p1.2.m2.1.1" xref="S5.I1.ix1.p1.2.m2.1.1.cmml">𝑫</mi><mo stretchy="false" id="S5.I1.ix1.p1.2.m2.1.2.2.2.2" xref="S5.I1.ix1.p1.2.m2.1.2.2.1.1.cmml">|</mo></mrow><mo id="S5.I1.ix1.p1.2.m2.1.2.1" xref="S5.I1.ix1.p1.2.m2.1.2.1.cmml">=</mo><mi id="S5.I1.ix1.p1.2.m2.1.2.3" xref="S5.I1.ix1.p1.2.m2.1.2.3.cmml">B</mi></mrow><annotation-xml encoding="MathML-Content" id="S5.I1.ix1.p1.2.m2.1b"><apply id="S5.I1.ix1.p1.2.m2.1.2.cmml" xref="S5.I1.ix1.p1.2.m2.1.2"><eq id="S5.I1.ix1.p1.2.m2.1.2.1.cmml" xref="S5.I1.ix1.p1.2.m2.1.2.1"></eq><apply id="S5.I1.ix1.p1.2.m2.1.2.2.1.cmml" xref="S5.I1.ix1.p1.2.m2.1.2.2.2"><abs id="S5.I1.ix1.p1.2.m2.1.2.2.1.1.cmml" xref="S5.I1.ix1.p1.2.m2.1.2.2.2.1"></abs><ci id="S5.I1.ix1.p1.2.m2.1.1.cmml" xref="S5.I1.ix1.p1.2.m2.1.1">𝑫</ci></apply><ci id="S5.I1.ix1.p1.2.m2.1.2.3.cmml" xref="S5.I1.ix1.p1.2.m2.1.2.3">𝐵</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.I1.ix1.p1.2.m2.1c">|\bm{D}|=B</annotation></semantics></math> the batch size, while for FedAvg, <math id="S5.I1.ix1.p1.3.m3.3" class="ltx_Math" alttext="|\bm{D}|=\gamma.B" display="inline"><semantics id="S5.I1.ix1.p1.3.m3.3a"><mrow id="S5.I1.ix1.p1.3.m3.3.3.1" xref="S5.I1.ix1.p1.3.m3.3.3.2.cmml"><mrow id="S5.I1.ix1.p1.3.m3.3.3.1.1" xref="S5.I1.ix1.p1.3.m3.3.3.1.1.cmml"><mrow id="S5.I1.ix1.p1.3.m3.3.3.1.1.2.2" xref="S5.I1.ix1.p1.3.m3.3.3.1.1.2.1.cmml"><mo stretchy="false" id="S5.I1.ix1.p1.3.m3.3.3.1.1.2.2.1" xref="S5.I1.ix1.p1.3.m3.3.3.1.1.2.1.1.cmml">|</mo><mi id="S5.I1.ix1.p1.3.m3.1.1" xref="S5.I1.ix1.p1.3.m3.1.1.cmml">𝑫</mi><mo stretchy="false" id="S5.I1.ix1.p1.3.m3.3.3.1.1.2.2.2" xref="S5.I1.ix1.p1.3.m3.3.3.1.1.2.1.1.cmml">|</mo></mrow><mo id="S5.I1.ix1.p1.3.m3.3.3.1.1.1" xref="S5.I1.ix1.p1.3.m3.3.3.1.1.1.cmml">=</mo><mi id="S5.I1.ix1.p1.3.m3.3.3.1.1.3" xref="S5.I1.ix1.p1.3.m3.3.3.1.1.3.cmml">γ</mi></mrow><mo lspace="0em" rspace="0.167em" id="S5.I1.ix1.p1.3.m3.3.3.1.2" xref="S5.I1.ix1.p1.3.m3.3.3.2a.cmml">.</mo><mi id="S5.I1.ix1.p1.3.m3.2.2" xref="S5.I1.ix1.p1.3.m3.2.2.cmml">B</mi></mrow><annotation-xml encoding="MathML-Content" id="S5.I1.ix1.p1.3.m3.3b"><apply id="S5.I1.ix1.p1.3.m3.3.3.2.cmml" xref="S5.I1.ix1.p1.3.m3.3.3.1"><csymbol cd="ambiguous" id="S5.I1.ix1.p1.3.m3.3.3.2a.cmml" xref="S5.I1.ix1.p1.3.m3.3.3.1.2">formulae-sequence</csymbol><apply id="S5.I1.ix1.p1.3.m3.3.3.1.1.cmml" xref="S5.I1.ix1.p1.3.m3.3.3.1.1"><eq id="S5.I1.ix1.p1.3.m3.3.3.1.1.1.cmml" xref="S5.I1.ix1.p1.3.m3.3.3.1.1.1"></eq><apply id="S5.I1.ix1.p1.3.m3.3.3.1.1.2.1.cmml" xref="S5.I1.ix1.p1.3.m3.3.3.1.1.2.2"><abs id="S5.I1.ix1.p1.3.m3.3.3.1.1.2.1.1.cmml" xref="S5.I1.ix1.p1.3.m3.3.3.1.1.2.2.1"></abs><ci id="S5.I1.ix1.p1.3.m3.1.1.cmml" xref="S5.I1.ix1.p1.3.m3.1.1">𝑫</ci></apply><ci id="S5.I1.ix1.p1.3.m3.3.3.1.1.3.cmml" xref="S5.I1.ix1.p1.3.m3.3.3.1.1.3">𝛾</ci></apply><ci id="S5.I1.ix1.p1.3.m3.2.2.cmml" xref="S5.I1.ix1.p1.3.m3.2.2">𝐵</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.I1.ix1.p1.3.m3.3c">|\bm{D}|=\gamma.B</annotation></semantics></math>, where <math id="S5.I1.ix1.p1.4.m4.1" class="ltx_Math" alttext="\gamma" display="inline"><semantics id="S5.I1.ix1.p1.4.m4.1a"><mi id="S5.I1.ix1.p1.4.m4.1.1" xref="S5.I1.ix1.p1.4.m4.1.1.cmml">γ</mi><annotation-xml encoding="MathML-Content" id="S5.I1.ix1.p1.4.m4.1b"><ci id="S5.I1.ix1.p1.4.m4.1.1.cmml" xref="S5.I1.ix1.p1.4.m4.1.1">𝛾</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.I1.ix1.p1.4.m4.1c">\gamma</annotation></semantics></math> is the number of local iterations (batches). 
Based on Property 1, we know that all negative gradients are indeed indicating existing labels in the training samples. 
Therefore, we average only the gradients with negative values.
Consequently, this average is an underestimation since some gradients may be positive because they are shifted with an offset.
We empirically observed that multiplying by a factor that depends on the total number of classes <math id="S5.I1.ix1.p1.5.m5.1" class="ltx_Math" alttext="n" display="inline"><semantics id="S5.I1.ix1.p1.5.m5.1a"><mi id="S5.I1.ix1.p1.5.m5.1.1" xref="S5.I1.ix1.p1.5.m5.1.1.cmml">n</mi><annotation-xml encoding="MathML-Content" id="S5.I1.ix1.p1.5.m5.1b"><ci id="S5.I1.ix1.p1.5.m5.1.1.cmml" xref="S5.I1.ix1.p1.5.m5.1.1">𝑛</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.I1.ix1.p1.5.m5.1c">n</annotation></semantics></math> is a good additive correction, precisely, we multiply by <math id="S5.I1.ix1.p1.6.m6.1" class="ltx_Math" alttext="(1+1/n)" display="inline"><semantics id="S5.I1.ix1.p1.6.m6.1a"><mrow id="S5.I1.ix1.p1.6.m6.1.1.1" xref="S5.I1.ix1.p1.6.m6.1.1.1.1.cmml"><mo stretchy="false" id="S5.I1.ix1.p1.6.m6.1.1.1.2" xref="S5.I1.ix1.p1.6.m6.1.1.1.1.cmml">(</mo><mrow id="S5.I1.ix1.p1.6.m6.1.1.1.1" xref="S5.I1.ix1.p1.6.m6.1.1.1.1.cmml"><mn id="S5.I1.ix1.p1.6.m6.1.1.1.1.2" xref="S5.I1.ix1.p1.6.m6.1.1.1.1.2.cmml">1</mn><mo id="S5.I1.ix1.p1.6.m6.1.1.1.1.1" xref="S5.I1.ix1.p1.6.m6.1.1.1.1.1.cmml">+</mo><mrow id="S5.I1.ix1.p1.6.m6.1.1.1.1.3" xref="S5.I1.ix1.p1.6.m6.1.1.1.1.3.cmml"><mn id="S5.I1.ix1.p1.6.m6.1.1.1.1.3.2" xref="S5.I1.ix1.p1.6.m6.1.1.1.1.3.2.cmml">1</mn><mo id="S5.I1.ix1.p1.6.m6.1.1.1.1.3.1" xref="S5.I1.ix1.p1.6.m6.1.1.1.1.3.1.cmml">/</mo><mi id="S5.I1.ix1.p1.6.m6.1.1.1.1.3.3" xref="S5.I1.ix1.p1.6.m6.1.1.1.1.3.3.cmml">n</mi></mrow></mrow><mo stretchy="false" id="S5.I1.ix1.p1.6.m6.1.1.1.3" xref="S5.I1.ix1.p1.6.m6.1.1.1.1.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="S5.I1.ix1.p1.6.m6.1b"><apply id="S5.I1.ix1.p1.6.m6.1.1.1.1.cmml" xref="S5.I1.ix1.p1.6.m6.1.1.1"><plus id="S5.I1.ix1.p1.6.m6.1.1.1.1.1.cmml" xref="S5.I1.ix1.p1.6.m6.1.1.1.1.1"></plus><cn type="integer" id="S5.I1.ix1.p1.6.m6.1.1.1.1.2.cmml" xref="S5.I1.ix1.p1.6.m6.1.1.1.1.2">1</cn><apply id="S5.I1.ix1.p1.6.m6.1.1.1.1.3.cmml" xref="S5.I1.ix1.p1.6.m6.1.1.1.1.3"><divide id="S5.I1.ix1.p1.6.m6.1.1.1.1.3.1.cmml" xref="S5.I1.ix1.p1.6.m6.1.1.1.1.3.1"></divide><cn type="integer" id="S5.I1.ix1.p1.6.m6.1.1.1.1.3.2.cmml" xref="S5.I1.ix1.p1.6.m6.1.1.1.1.3.2">1</cn><ci id="S5.I1.ix1.p1.6.m6.1.1.1.1.3.3.cmml" xref="S5.I1.ix1.p1.6.m6.1.1.1.1.3.3">𝑛</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.I1.ix1.p1.6.m6.1c">(1+1/n)</annotation></semantics></math>. 
Thus, we estimate the impact <math id="S5.I1.ix1.p1.7.m7.1" class="ltx_Math" alttext="m" display="inline"><semantics id="S5.I1.ix1.p1.7.m7.1a"><mi id="S5.I1.ix1.p1.7.m7.1.1" xref="S5.I1.ix1.p1.7.m7.1.1.cmml">m</mi><annotation-xml encoding="MathML-Content" id="S5.I1.ix1.p1.7.m7.1b"><ci id="S5.I1.ix1.p1.7.m7.1.1.cmml" xref="S5.I1.ix1.p1.7.m7.1.1">𝑚</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.I1.ix1.p1.7.m7.1c">m</annotation></semantics></math> as follows</p>
<table id="S5.E18" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S5.E18.m1.2" class="ltx_Math" alttext="m=\frac{1}{|\bm{D}|}\sum_{i:g_{i}&lt;0}^{n}(g_{i})\left(1+\frac{1}{n}\right)\,." display="block"><semantics id="S5.E18.m1.2a"><mrow id="S5.E18.m1.2.2.1" xref="S5.E18.m1.2.2.1.1.cmml"><mrow id="S5.E18.m1.2.2.1.1" xref="S5.E18.m1.2.2.1.1.cmml"><mi id="S5.E18.m1.2.2.1.1.4" xref="S5.E18.m1.2.2.1.1.4.cmml">m</mi><mo id="S5.E18.m1.2.2.1.1.3" xref="S5.E18.m1.2.2.1.1.3.cmml">=</mo><mrow id="S5.E18.m1.2.2.1.1.2" xref="S5.E18.m1.2.2.1.1.2.cmml"><mfrac id="S5.E18.m1.1.1" xref="S5.E18.m1.1.1.cmml"><mn id="S5.E18.m1.1.1.3" xref="S5.E18.m1.1.1.3.cmml">1</mn><mrow id="S5.E18.m1.1.1.1.3" xref="S5.E18.m1.1.1.1.2.cmml"><mo stretchy="false" id="S5.E18.m1.1.1.1.3.1" xref="S5.E18.m1.1.1.1.2.1.cmml">|</mo><mi id="S5.E18.m1.1.1.1.1" xref="S5.E18.m1.1.1.1.1.cmml">𝑫</mi><mo stretchy="false" id="S5.E18.m1.1.1.1.3.2" xref="S5.E18.m1.1.1.1.2.1.cmml">|</mo></mrow></mfrac><mo lspace="0em" rspace="0em" id="S5.E18.m1.2.2.1.1.2.3" xref="S5.E18.m1.2.2.1.1.2.3.cmml">​</mo><mrow id="S5.E18.m1.2.2.1.1.2.2" xref="S5.E18.m1.2.2.1.1.2.2.cmml"><munderover id="S5.E18.m1.2.2.1.1.2.2.3" xref="S5.E18.m1.2.2.1.1.2.2.3.cmml"><mo movablelimits="false" rspace="0em" id="S5.E18.m1.2.2.1.1.2.2.3.2.2" xref="S5.E18.m1.2.2.1.1.2.2.3.2.2.cmml">∑</mo><mrow id="S5.E18.m1.2.2.1.1.2.2.3.2.3" xref="S5.E18.m1.2.2.1.1.2.2.3.2.3.cmml"><mi id="S5.E18.m1.2.2.1.1.2.2.3.2.3.2" xref="S5.E18.m1.2.2.1.1.2.2.3.2.3.2.cmml">i</mi><mo lspace="0.278em" rspace="0.278em" id="S5.E18.m1.2.2.1.1.2.2.3.2.3.1" xref="S5.E18.m1.2.2.1.1.2.2.3.2.3.1.cmml">:</mo><mrow id="S5.E18.m1.2.2.1.1.2.2.3.2.3.3" xref="S5.E18.m1.2.2.1.1.2.2.3.2.3.3.cmml"><msub id="S5.E18.m1.2.2.1.1.2.2.3.2.3.3.2" xref="S5.E18.m1.2.2.1.1.2.2.3.2.3.3.2.cmml"><mi id="S5.E18.m1.2.2.1.1.2.2.3.2.3.3.2.2" xref="S5.E18.m1.2.2.1.1.2.2.3.2.3.3.2.2.cmml">g</mi><mi id="S5.E18.m1.2.2.1.1.2.2.3.2.3.3.2.3" xref="S5.E18.m1.2.2.1.1.2.2.3.2.3.3.2.3.cmml">i</mi></msub><mo id="S5.E18.m1.2.2.1.1.2.2.3.2.3.3.1" xref="S5.E18.m1.2.2.1.1.2.2.3.2.3.3.1.cmml">&lt;</mo><mn id="S5.E18.m1.2.2.1.1.2.2.3.2.3.3.3" xref="S5.E18.m1.2.2.1.1.2.2.3.2.3.3.3.cmml">0</mn></mrow></mrow><mi id="S5.E18.m1.2.2.1.1.2.2.3.3" xref="S5.E18.m1.2.2.1.1.2.2.3.3.cmml">n</mi></munderover><mrow id="S5.E18.m1.2.2.1.1.2.2.2" xref="S5.E18.m1.2.2.1.1.2.2.2.cmml"><mrow id="S5.E18.m1.2.2.1.1.1.1.1.1.1" xref="S5.E18.m1.2.2.1.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S5.E18.m1.2.2.1.1.1.1.1.1.1.2" xref="S5.E18.m1.2.2.1.1.1.1.1.1.1.1.cmml">(</mo><msub id="S5.E18.m1.2.2.1.1.1.1.1.1.1.1" xref="S5.E18.m1.2.2.1.1.1.1.1.1.1.1.cmml"><mi id="S5.E18.m1.2.2.1.1.1.1.1.1.1.1.2" xref="S5.E18.m1.2.2.1.1.1.1.1.1.1.1.2.cmml">g</mi><mi id="S5.E18.m1.2.2.1.1.1.1.1.1.1.1.3" xref="S5.E18.m1.2.2.1.1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo stretchy="false" id="S5.E18.m1.2.2.1.1.1.1.1.1.1.3" xref="S5.E18.m1.2.2.1.1.1.1.1.1.1.1.cmml">)</mo></mrow><mo lspace="0em" rspace="0em" id="S5.E18.m1.2.2.1.1.2.2.2.3" xref="S5.E18.m1.2.2.1.1.2.2.2.3.cmml">​</mo><mrow id="S5.E18.m1.2.2.1.1.2.2.2.2.1" xref="S5.E18.m1.2.2.1.1.2.2.2.2.1.1.cmml"><mo id="S5.E18.m1.2.2.1.1.2.2.2.2.1.2" xref="S5.E18.m1.2.2.1.1.2.2.2.2.1.1.cmml">(</mo><mrow id="S5.E18.m1.2.2.1.1.2.2.2.2.1.1" xref="S5.E18.m1.2.2.1.1.2.2.2.2.1.1.cmml"><mn id="S5.E18.m1.2.2.1.1.2.2.2.2.1.1.2" xref="S5.E18.m1.2.2.1.1.2.2.2.2.1.1.2.cmml">1</mn><mo id="S5.E18.m1.2.2.1.1.2.2.2.2.1.1.1" xref="S5.E18.m1.2.2.1.1.2.2.2.2.1.1.1.cmml">+</mo><mfrac id="S5.E18.m1.2.2.1.1.2.2.2.2.1.1.3" xref="S5.E18.m1.2.2.1.1.2.2.2.2.1.1.3.cmml"><mn id="S5.E18.m1.2.2.1.1.2.2.2.2.1.1.3.2" xref="S5.E18.m1.2.2.1.1.2.2.2.2.1.1.3.2.cmml">1</mn><mi id="S5.E18.m1.2.2.1.1.2.2.2.2.1.1.3.3" xref="S5.E18.m1.2.2.1.1.2.2.2.2.1.1.3.3.cmml">n</mi></mfrac></mrow><mo id="S5.E18.m1.2.2.1.1.2.2.2.2.1.3" xref="S5.E18.m1.2.2.1.1.2.2.2.2.1.1.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><mo lspace="0.170em" id="S5.E18.m1.2.2.1.2" xref="S5.E18.m1.2.2.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S5.E18.m1.2b"><apply id="S5.E18.m1.2.2.1.1.cmml" xref="S5.E18.m1.2.2.1"><eq id="S5.E18.m1.2.2.1.1.3.cmml" xref="S5.E18.m1.2.2.1.1.3"></eq><ci id="S5.E18.m1.2.2.1.1.4.cmml" xref="S5.E18.m1.2.2.1.1.4">𝑚</ci><apply id="S5.E18.m1.2.2.1.1.2.cmml" xref="S5.E18.m1.2.2.1.1.2"><times id="S5.E18.m1.2.2.1.1.2.3.cmml" xref="S5.E18.m1.2.2.1.1.2.3"></times><apply id="S5.E18.m1.1.1.cmml" xref="S5.E18.m1.1.1"><divide id="S5.E18.m1.1.1.2.cmml" xref="S5.E18.m1.1.1"></divide><cn type="integer" id="S5.E18.m1.1.1.3.cmml" xref="S5.E18.m1.1.1.3">1</cn><apply id="S5.E18.m1.1.1.1.2.cmml" xref="S5.E18.m1.1.1.1.3"><abs id="S5.E18.m1.1.1.1.2.1.cmml" xref="S5.E18.m1.1.1.1.3.1"></abs><ci id="S5.E18.m1.1.1.1.1.cmml" xref="S5.E18.m1.1.1.1.1">𝑫</ci></apply></apply><apply id="S5.E18.m1.2.2.1.1.2.2.cmml" xref="S5.E18.m1.2.2.1.1.2.2"><apply id="S5.E18.m1.2.2.1.1.2.2.3.cmml" xref="S5.E18.m1.2.2.1.1.2.2.3"><csymbol cd="ambiguous" id="S5.E18.m1.2.2.1.1.2.2.3.1.cmml" xref="S5.E18.m1.2.2.1.1.2.2.3">superscript</csymbol><apply id="S5.E18.m1.2.2.1.1.2.2.3.2.cmml" xref="S5.E18.m1.2.2.1.1.2.2.3"><csymbol cd="ambiguous" id="S5.E18.m1.2.2.1.1.2.2.3.2.1.cmml" xref="S5.E18.m1.2.2.1.1.2.2.3">subscript</csymbol><sum id="S5.E18.m1.2.2.1.1.2.2.3.2.2.cmml" xref="S5.E18.m1.2.2.1.1.2.2.3.2.2"></sum><apply id="S5.E18.m1.2.2.1.1.2.2.3.2.3.cmml" xref="S5.E18.m1.2.2.1.1.2.2.3.2.3"><ci id="S5.E18.m1.2.2.1.1.2.2.3.2.3.1.cmml" xref="S5.E18.m1.2.2.1.1.2.2.3.2.3.1">:</ci><ci id="S5.E18.m1.2.2.1.1.2.2.3.2.3.2.cmml" xref="S5.E18.m1.2.2.1.1.2.2.3.2.3.2">𝑖</ci><apply id="S5.E18.m1.2.2.1.1.2.2.3.2.3.3.cmml" xref="S5.E18.m1.2.2.1.1.2.2.3.2.3.3"><lt id="S5.E18.m1.2.2.1.1.2.2.3.2.3.3.1.cmml" xref="S5.E18.m1.2.2.1.1.2.2.3.2.3.3.1"></lt><apply id="S5.E18.m1.2.2.1.1.2.2.3.2.3.3.2.cmml" xref="S5.E18.m1.2.2.1.1.2.2.3.2.3.3.2"><csymbol cd="ambiguous" id="S5.E18.m1.2.2.1.1.2.2.3.2.3.3.2.1.cmml" xref="S5.E18.m1.2.2.1.1.2.2.3.2.3.3.2">subscript</csymbol><ci id="S5.E18.m1.2.2.1.1.2.2.3.2.3.3.2.2.cmml" xref="S5.E18.m1.2.2.1.1.2.2.3.2.3.3.2.2">𝑔</ci><ci id="S5.E18.m1.2.2.1.1.2.2.3.2.3.3.2.3.cmml" xref="S5.E18.m1.2.2.1.1.2.2.3.2.3.3.2.3">𝑖</ci></apply><cn type="integer" id="S5.E18.m1.2.2.1.1.2.2.3.2.3.3.3.cmml" xref="S5.E18.m1.2.2.1.1.2.2.3.2.3.3.3">0</cn></apply></apply></apply><ci id="S5.E18.m1.2.2.1.1.2.2.3.3.cmml" xref="S5.E18.m1.2.2.1.1.2.2.3.3">𝑛</ci></apply><apply id="S5.E18.m1.2.2.1.1.2.2.2.cmml" xref="S5.E18.m1.2.2.1.1.2.2.2"><times id="S5.E18.m1.2.2.1.1.2.2.2.3.cmml" xref="S5.E18.m1.2.2.1.1.2.2.2.3"></times><apply id="S5.E18.m1.2.2.1.1.1.1.1.1.1.1.cmml" xref="S5.E18.m1.2.2.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S5.E18.m1.2.2.1.1.1.1.1.1.1.1.1.cmml" xref="S5.E18.m1.2.2.1.1.1.1.1.1.1">subscript</csymbol><ci id="S5.E18.m1.2.2.1.1.1.1.1.1.1.1.2.cmml" xref="S5.E18.m1.2.2.1.1.1.1.1.1.1.1.2">𝑔</ci><ci id="S5.E18.m1.2.2.1.1.1.1.1.1.1.1.3.cmml" xref="S5.E18.m1.2.2.1.1.1.1.1.1.1.1.3">𝑖</ci></apply><apply id="S5.E18.m1.2.2.1.1.2.2.2.2.1.1.cmml" xref="S5.E18.m1.2.2.1.1.2.2.2.2.1"><plus id="S5.E18.m1.2.2.1.1.2.2.2.2.1.1.1.cmml" xref="S5.E18.m1.2.2.1.1.2.2.2.2.1.1.1"></plus><cn type="integer" id="S5.E18.m1.2.2.1.1.2.2.2.2.1.1.2.cmml" xref="S5.E18.m1.2.2.1.1.2.2.2.2.1.1.2">1</cn><apply id="S5.E18.m1.2.2.1.1.2.2.2.2.1.1.3.cmml" xref="S5.E18.m1.2.2.1.1.2.2.2.2.1.1.3"><divide id="S5.E18.m1.2.2.1.1.2.2.2.2.1.1.3.1.cmml" xref="S5.E18.m1.2.2.1.1.2.2.2.2.1.1.3"></divide><cn type="integer" id="S5.E18.m1.2.2.1.1.2.2.2.2.1.1.3.2.cmml" xref="S5.E18.m1.2.2.1.1.2.2.2.2.1.1.3.2">1</cn><ci id="S5.E18.m1.2.2.1.1.2.2.2.2.1.1.3.3.cmml" xref="S5.E18.m1.2.2.1.1.2.2.2.2.1.1.3.3">𝑛</ci></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.E18.m1.2c">m=\frac{1}{|\bm{D}|}\sum_{i:g_{i}&lt;0}^{n}(g_{i})\left(1+\frac{1}{n}\right)\,.</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(18)</span></td>
</tr></tbody>
</table>
<p id="S5.I1.ix1.p1.8" class="ltx_p">For this threat model, the offset <math id="S5.I1.ix1.p1.8.m1.1" class="ltx_Math" alttext="s_{i}" display="inline"><semantics id="S5.I1.ix1.p1.8.m1.1a"><msub id="S5.I1.ix1.p1.8.m1.1.1" xref="S5.I1.ix1.p1.8.m1.1.1.cmml"><mi id="S5.I1.ix1.p1.8.m1.1.1.2" xref="S5.I1.ix1.p1.8.m1.1.1.2.cmml">s</mi><mi id="S5.I1.ix1.p1.8.m1.1.1.3" xref="S5.I1.ix1.p1.8.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S5.I1.ix1.p1.8.m1.1b"><apply id="S5.I1.ix1.p1.8.m1.1.1.cmml" xref="S5.I1.ix1.p1.8.m1.1.1"><csymbol cd="ambiguous" id="S5.I1.ix1.p1.8.m1.1.1.1.cmml" xref="S5.I1.ix1.p1.8.m1.1.1">subscript</csymbol><ci id="S5.I1.ix1.p1.8.m1.1.1.2.cmml" xref="S5.I1.ix1.p1.8.m1.1.1.2">𝑠</ci><ci id="S5.I1.ix1.p1.8.m1.1.1.3.cmml" xref="S5.I1.ix1.p1.8.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.I1.ix1.p1.8.m1.1c">s_{i}</annotation></semantics></math> cannot be estimated, thus, considered to be zero in the attack.</p>
</div>
</dd>
<dt id="S5.I1.ix2" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span id="S5.I1.ix2.1.1.1" class="ltx_text ltx_font_bold">White-box model.</span></span></dt>
<dd class="ltx_item">
<div id="S5.I1.ix2.p1" class="ltx_para">
<p id="S5.I1.ix2.p1.10" class="ltx_p">When the adversary additionally has access to the model architecture and parameters,  they can use it to generate more gradients and gain more insights about the behavior of the gradients in this model.
Consequently, better estimations for the impact and offset can be achieved.
The approximation in Eq. (<a href="#S4.E15" title="In Proof ‣ 4 Gradient analysis ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">15</span></a>) indicates that the impact <math id="S5.I1.ix2.p1.1.m1.1" class="ltx_Math" alttext="m" display="inline"><semantics id="S5.I1.ix2.p1.1.m1.1a"><mi id="S5.I1.ix2.p1.1.m1.1.1" xref="S5.I1.ix2.p1.1.m1.1.1.cmml">m</mi><annotation-xml encoding="MathML-Content" id="S5.I1.ix2.p1.1.m1.1b"><ci id="S5.I1.ix2.p1.1.m1.1.1.cmml" xref="S5.I1.ix2.p1.1.m1.1.1">𝑚</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.I1.ix2.p1.1.m1.1c">m</annotation></semantics></math> can be estimated if the gradient <math id="S5.I1.ix2.p1.2.m2.1" class="ltx_Math" alttext="g_{i}" display="inline"><semantics id="S5.I1.ix2.p1.2.m2.1a"><msub id="S5.I1.ix2.p1.2.m2.1.1" xref="S5.I1.ix2.p1.2.m2.1.1.cmml"><mi id="S5.I1.ix2.p1.2.m2.1.1.2" xref="S5.I1.ix2.p1.2.m2.1.1.2.cmml">g</mi><mi id="S5.I1.ix2.p1.2.m2.1.1.3" xref="S5.I1.ix2.p1.2.m2.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S5.I1.ix2.p1.2.m2.1b"><apply id="S5.I1.ix2.p1.2.m2.1.1.cmml" xref="S5.I1.ix2.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S5.I1.ix2.p1.2.m2.1.1.1.cmml" xref="S5.I1.ix2.p1.2.m2.1.1">subscript</csymbol><ci id="S5.I1.ix2.p1.2.m2.1.1.2.cmml" xref="S5.I1.ix2.p1.2.m2.1.1.2">𝑔</ci><ci id="S5.I1.ix2.p1.2.m2.1.1.3.cmml" xref="S5.I1.ix2.p1.2.m2.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.I1.ix2.p1.2.m2.1c">g_{i}</annotation></semantics></math> and number of occurrences <math id="S5.I1.ix2.p1.3.m3.1" class="ltx_Math" alttext="\lambda_{i}" display="inline"><semantics id="S5.I1.ix2.p1.3.m3.1a"><msub id="S5.I1.ix2.p1.3.m3.1.1" xref="S5.I1.ix2.p1.3.m3.1.1.cmml"><mi id="S5.I1.ix2.p1.3.m3.1.1.2" xref="S5.I1.ix2.p1.3.m3.1.1.2.cmml">λ</mi><mi id="S5.I1.ix2.p1.3.m3.1.1.3" xref="S5.I1.ix2.p1.3.m3.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S5.I1.ix2.p1.3.m3.1b"><apply id="S5.I1.ix2.p1.3.m3.1.1.cmml" xref="S5.I1.ix2.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S5.I1.ix2.p1.3.m3.1.1.1.cmml" xref="S5.I1.ix2.p1.3.m3.1.1">subscript</csymbol><ci id="S5.I1.ix2.p1.3.m3.1.1.2.cmml" xref="S5.I1.ix2.p1.3.m3.1.1.2">𝜆</ci><ci id="S5.I1.ix2.p1.3.m3.1.1.3.cmml" xref="S5.I1.ix2.p1.3.m3.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.I1.ix2.p1.3.m3.1c">\lambda_{i}</annotation></semantics></math> are known, regardless the quality of the input data.
Thus, dummy data samples, e.g., dummy images of zeros (black), ones (white), or random pixels, can be used to generate <math id="S5.I1.ix2.p1.4.m4.1" class="ltx_Math" alttext="g_{i}" display="inline"><semantics id="S5.I1.ix2.p1.4.m4.1a"><msub id="S5.I1.ix2.p1.4.m4.1.1" xref="S5.I1.ix2.p1.4.m4.1.1.cmml"><mi id="S5.I1.ix2.p1.4.m4.1.1.2" xref="S5.I1.ix2.p1.4.m4.1.1.2.cmml">g</mi><mi id="S5.I1.ix2.p1.4.m4.1.1.3" xref="S5.I1.ix2.p1.4.m4.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S5.I1.ix2.p1.4.m4.1b"><apply id="S5.I1.ix2.p1.4.m4.1.1.cmml" xref="S5.I1.ix2.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S5.I1.ix2.p1.4.m4.1.1.1.cmml" xref="S5.I1.ix2.p1.4.m4.1.1">subscript</csymbol><ci id="S5.I1.ix2.p1.4.m4.1.1.2.cmml" xref="S5.I1.ix2.p1.4.m4.1.1.2">𝑔</ci><ci id="S5.I1.ix2.p1.4.m4.1.1.3.cmml" xref="S5.I1.ix2.p1.4.m4.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.I1.ix2.p1.4.m4.1c">g_{i}</annotation></semantics></math> under known <math id="S5.I1.ix2.p1.5.m5.1" class="ltx_Math" alttext="\lambda_{i}" display="inline"><semantics id="S5.I1.ix2.p1.5.m5.1a"><msub id="S5.I1.ix2.p1.5.m5.1.1" xref="S5.I1.ix2.p1.5.m5.1.1.cmml"><mi id="S5.I1.ix2.p1.5.m5.1.1.2" xref="S5.I1.ix2.p1.5.m5.1.1.2.cmml">λ</mi><mi id="S5.I1.ix2.p1.5.m5.1.1.3" xref="S5.I1.ix2.p1.5.m5.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S5.I1.ix2.p1.5.m5.1b"><apply id="S5.I1.ix2.p1.5.m5.1.1.cmml" xref="S5.I1.ix2.p1.5.m5.1.1"><csymbol cd="ambiguous" id="S5.I1.ix2.p1.5.m5.1.1.1.cmml" xref="S5.I1.ix2.p1.5.m5.1.1">subscript</csymbol><ci id="S5.I1.ix2.p1.5.m5.1.1.2.cmml" xref="S5.I1.ix2.p1.5.m5.1.1.2">𝜆</ci><ci id="S5.I1.ix2.p1.5.m5.1.1.3.cmml" xref="S5.I1.ix2.p1.5.m5.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.I1.ix2.p1.5.m5.1c">\lambda_{i}</annotation></semantics></math>. 
More precisely, we form a collection of dummy batches, each batch contains data samples assigned to one label <math id="S5.I1.ix2.p1.6.m6.1" class="ltx_Math" alttext="i" display="inline"><semantics id="S5.I1.ix2.p1.6.m6.1a"><mi id="S5.I1.ix2.p1.6.m6.1.1" xref="S5.I1.ix2.p1.6.m6.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S5.I1.ix2.p1.6.m6.1b"><ci id="S5.I1.ix2.p1.6.m6.1.1.cmml" xref="S5.I1.ix2.p1.6.m6.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.I1.ix2.p1.6.m6.1c">i</annotation></semantics></math>.
For impact estimation, we pass these batches to a shadow  model (a copy of the original model),  one at a time, and calculate the average <math id="S5.I1.ix2.p1.7.m7.1" class="ltx_Math" alttext="\bar{g_{i}}" display="inline"><semantics id="S5.I1.ix2.p1.7.m7.1a"><mover accent="true" id="S5.I1.ix2.p1.7.m7.1.1" xref="S5.I1.ix2.p1.7.m7.1.1.cmml"><msub id="S5.I1.ix2.p1.7.m7.1.1.2" xref="S5.I1.ix2.p1.7.m7.1.1.2.cmml"><mi id="S5.I1.ix2.p1.7.m7.1.1.2.2" xref="S5.I1.ix2.p1.7.m7.1.1.2.2.cmml">g</mi><mi id="S5.I1.ix2.p1.7.m7.1.1.2.3" xref="S5.I1.ix2.p1.7.m7.1.1.2.3.cmml">i</mi></msub><mo id="S5.I1.ix2.p1.7.m7.1.1.1" xref="S5.I1.ix2.p1.7.m7.1.1.1.cmml">¯</mo></mover><annotation-xml encoding="MathML-Content" id="S5.I1.ix2.p1.7.m7.1b"><apply id="S5.I1.ix2.p1.7.m7.1.1.cmml" xref="S5.I1.ix2.p1.7.m7.1.1"><ci id="S5.I1.ix2.p1.7.m7.1.1.1.cmml" xref="S5.I1.ix2.p1.7.m7.1.1.1">¯</ci><apply id="S5.I1.ix2.p1.7.m7.1.1.2.cmml" xref="S5.I1.ix2.p1.7.m7.1.1.2"><csymbol cd="ambiguous" id="S5.I1.ix2.p1.7.m7.1.1.2.1.cmml" xref="S5.I1.ix2.p1.7.m7.1.1.2">subscript</csymbol><ci id="S5.I1.ix2.p1.7.m7.1.1.2.2.cmml" xref="S5.I1.ix2.p1.7.m7.1.1.2.2">𝑔</ci><ci id="S5.I1.ix2.p1.7.m7.1.1.2.3.cmml" xref="S5.I1.ix2.p1.7.m7.1.1.2.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.I1.ix2.p1.7.m7.1c">\bar{g_{i}}</annotation></semantics></math> for all the batches corresponding to each label <math id="S5.I1.ix2.p1.8.m8.2" class="ltx_Math" alttext="i\in[1,n]" display="inline"><semantics id="S5.I1.ix2.p1.8.m8.2a"><mrow id="S5.I1.ix2.p1.8.m8.2.3" xref="S5.I1.ix2.p1.8.m8.2.3.cmml"><mi id="S5.I1.ix2.p1.8.m8.2.3.2" xref="S5.I1.ix2.p1.8.m8.2.3.2.cmml">i</mi><mo id="S5.I1.ix2.p1.8.m8.2.3.1" xref="S5.I1.ix2.p1.8.m8.2.3.1.cmml">∈</mo><mrow id="S5.I1.ix2.p1.8.m8.2.3.3.2" xref="S5.I1.ix2.p1.8.m8.2.3.3.1.cmml"><mo stretchy="false" id="S5.I1.ix2.p1.8.m8.2.3.3.2.1" xref="S5.I1.ix2.p1.8.m8.2.3.3.1.cmml">[</mo><mn id="S5.I1.ix2.p1.8.m8.1.1" xref="S5.I1.ix2.p1.8.m8.1.1.cmml">1</mn><mo id="S5.I1.ix2.p1.8.m8.2.3.3.2.2" xref="S5.I1.ix2.p1.8.m8.2.3.3.1.cmml">,</mo><mi id="S5.I1.ix2.p1.8.m8.2.2" xref="S5.I1.ix2.p1.8.m8.2.2.cmml">n</mi><mo stretchy="false" id="S5.I1.ix2.p1.8.m8.2.3.3.2.3" xref="S5.I1.ix2.p1.8.m8.2.3.3.1.cmml">]</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S5.I1.ix2.p1.8.m8.2b"><apply id="S5.I1.ix2.p1.8.m8.2.3.cmml" xref="S5.I1.ix2.p1.8.m8.2.3"><in id="S5.I1.ix2.p1.8.m8.2.3.1.cmml" xref="S5.I1.ix2.p1.8.m8.2.3.1"></in><ci id="S5.I1.ix2.p1.8.m8.2.3.2.cmml" xref="S5.I1.ix2.p1.8.m8.2.3.2">𝑖</ci><interval closure="closed" id="S5.I1.ix2.p1.8.m8.2.3.3.1.cmml" xref="S5.I1.ix2.p1.8.m8.2.3.3.2"><cn type="integer" id="S5.I1.ix2.p1.8.m8.1.1.cmml" xref="S5.I1.ix2.p1.8.m8.1.1">1</cn><ci id="S5.I1.ix2.p1.8.m8.2.2.cmml" xref="S5.I1.ix2.p1.8.m8.2.2">𝑛</ci></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.I1.ix2.p1.8.m8.2c">i\in[1,n]</annotation></semantics></math>.
Then, we average over all classes <math id="S5.I1.ix2.p1.9.m9.1" class="ltx_Math" alttext="n" display="inline"><semantics id="S5.I1.ix2.p1.9.m9.1a"><mi id="S5.I1.ix2.p1.9.m9.1.1" xref="S5.I1.ix2.p1.9.m9.1.1.cmml">n</mi><annotation-xml encoding="MathML-Content" id="S5.I1.ix2.p1.9.m9.1b"><ci id="S5.I1.ix2.p1.9.m9.1.1.cmml" xref="S5.I1.ix2.p1.9.m9.1.1">𝑛</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.I1.ix2.p1.9.m9.1c">n</annotation></semantics></math> and the batch size <math id="S5.I1.ix2.p1.10.m10.1" class="ltx_Math" alttext="B" display="inline"><semantics id="S5.I1.ix2.p1.10.m10.1a"><mi id="S5.I1.ix2.p1.10.m10.1.1" xref="S5.I1.ix2.p1.10.m10.1.1.cmml">B</mi><annotation-xml encoding="MathML-Content" id="S5.I1.ix2.p1.10.m10.1b"><ci id="S5.I1.ix2.p1.10.m10.1.1.cmml" xref="S5.I1.ix2.p1.10.m10.1.1">𝐵</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.I1.ix2.p1.10.m10.1c">B</annotation></semantics></math> as follows</p>
<table id="S5.E19" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S5.E19.m1.2" class="ltx_Math" alttext="m=\frac{1}{nB}\sum_{i=1}^{n}(\bar{g_{i}})\left(1+\frac{1}{n}\right)\,." display="block"><semantics id="S5.E19.m1.2a"><mrow id="S5.E19.m1.2.2.1" xref="S5.E19.m1.2.2.1.1.cmml"><mrow id="S5.E19.m1.2.2.1.1" xref="S5.E19.m1.2.2.1.1.cmml"><mi id="S5.E19.m1.2.2.1.1.3" xref="S5.E19.m1.2.2.1.1.3.cmml">m</mi><mo id="S5.E19.m1.2.2.1.1.2" xref="S5.E19.m1.2.2.1.1.2.cmml">=</mo><mrow id="S5.E19.m1.2.2.1.1.1" xref="S5.E19.m1.2.2.1.1.1.cmml"><mfrac id="S5.E19.m1.2.2.1.1.1.3" xref="S5.E19.m1.2.2.1.1.1.3.cmml"><mn id="S5.E19.m1.2.2.1.1.1.3.2" xref="S5.E19.m1.2.2.1.1.1.3.2.cmml">1</mn><mrow id="S5.E19.m1.2.2.1.1.1.3.3" xref="S5.E19.m1.2.2.1.1.1.3.3.cmml"><mi id="S5.E19.m1.2.2.1.1.1.3.3.2" xref="S5.E19.m1.2.2.1.1.1.3.3.2.cmml">n</mi><mo lspace="0em" rspace="0em" id="S5.E19.m1.2.2.1.1.1.3.3.1" xref="S5.E19.m1.2.2.1.1.1.3.3.1.cmml">​</mo><mi id="S5.E19.m1.2.2.1.1.1.3.3.3" xref="S5.E19.m1.2.2.1.1.1.3.3.3.cmml">B</mi></mrow></mfrac><mo lspace="0em" rspace="0em" id="S5.E19.m1.2.2.1.1.1.2" xref="S5.E19.m1.2.2.1.1.1.2.cmml">​</mo><mrow id="S5.E19.m1.2.2.1.1.1.1" xref="S5.E19.m1.2.2.1.1.1.1.cmml"><munderover id="S5.E19.m1.2.2.1.1.1.1.2" xref="S5.E19.m1.2.2.1.1.1.1.2.cmml"><mo movablelimits="false" rspace="0em" id="S5.E19.m1.2.2.1.1.1.1.2.2.2" xref="S5.E19.m1.2.2.1.1.1.1.2.2.2.cmml">∑</mo><mrow id="S5.E19.m1.2.2.1.1.1.1.2.2.3" xref="S5.E19.m1.2.2.1.1.1.1.2.2.3.cmml"><mi id="S5.E19.m1.2.2.1.1.1.1.2.2.3.2" xref="S5.E19.m1.2.2.1.1.1.1.2.2.3.2.cmml">i</mi><mo id="S5.E19.m1.2.2.1.1.1.1.2.2.3.1" xref="S5.E19.m1.2.2.1.1.1.1.2.2.3.1.cmml">=</mo><mn id="S5.E19.m1.2.2.1.1.1.1.2.2.3.3" xref="S5.E19.m1.2.2.1.1.1.1.2.2.3.3.cmml">1</mn></mrow><mi id="S5.E19.m1.2.2.1.1.1.1.2.3" xref="S5.E19.m1.2.2.1.1.1.1.2.3.cmml">n</mi></munderover><mrow id="S5.E19.m1.2.2.1.1.1.1.1" xref="S5.E19.m1.2.2.1.1.1.1.1.cmml"><mrow id="S5.E19.m1.2.2.1.1.1.1.1.3.2" xref="S5.E19.m1.1.1.cmml"><mo stretchy="false" id="S5.E19.m1.2.2.1.1.1.1.1.3.2.1" xref="S5.E19.m1.1.1.cmml">(</mo><mover accent="true" id="S5.E19.m1.1.1" xref="S5.E19.m1.1.1.cmml"><msub id="S5.E19.m1.1.1.2" xref="S5.E19.m1.1.1.2.cmml"><mi id="S5.E19.m1.1.1.2.2" xref="S5.E19.m1.1.1.2.2.cmml">g</mi><mi id="S5.E19.m1.1.1.2.3" xref="S5.E19.m1.1.1.2.3.cmml">i</mi></msub><mo id="S5.E19.m1.1.1.1" xref="S5.E19.m1.1.1.1.cmml">¯</mo></mover><mo stretchy="false" id="S5.E19.m1.2.2.1.1.1.1.1.3.2.2" xref="S5.E19.m1.1.1.cmml">)</mo></mrow><mo lspace="0em" rspace="0em" id="S5.E19.m1.2.2.1.1.1.1.1.2" xref="S5.E19.m1.2.2.1.1.1.1.1.2.cmml">​</mo><mrow id="S5.E19.m1.2.2.1.1.1.1.1.1.1" xref="S5.E19.m1.2.2.1.1.1.1.1.1.1.1.cmml"><mo id="S5.E19.m1.2.2.1.1.1.1.1.1.1.2" xref="S5.E19.m1.2.2.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S5.E19.m1.2.2.1.1.1.1.1.1.1.1" xref="S5.E19.m1.2.2.1.1.1.1.1.1.1.1.cmml"><mn id="S5.E19.m1.2.2.1.1.1.1.1.1.1.1.2" xref="S5.E19.m1.2.2.1.1.1.1.1.1.1.1.2.cmml">1</mn><mo id="S5.E19.m1.2.2.1.1.1.1.1.1.1.1.1" xref="S5.E19.m1.2.2.1.1.1.1.1.1.1.1.1.cmml">+</mo><mfrac id="S5.E19.m1.2.2.1.1.1.1.1.1.1.1.3" xref="S5.E19.m1.2.2.1.1.1.1.1.1.1.1.3.cmml"><mn id="S5.E19.m1.2.2.1.1.1.1.1.1.1.1.3.2" xref="S5.E19.m1.2.2.1.1.1.1.1.1.1.1.3.2.cmml">1</mn><mi id="S5.E19.m1.2.2.1.1.1.1.1.1.1.1.3.3" xref="S5.E19.m1.2.2.1.1.1.1.1.1.1.1.3.3.cmml">n</mi></mfrac></mrow><mo id="S5.E19.m1.2.2.1.1.1.1.1.1.1.3" xref="S5.E19.m1.2.2.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><mo lspace="0.170em" id="S5.E19.m1.2.2.1.2" xref="S5.E19.m1.2.2.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S5.E19.m1.2b"><apply id="S5.E19.m1.2.2.1.1.cmml" xref="S5.E19.m1.2.2.1"><eq id="S5.E19.m1.2.2.1.1.2.cmml" xref="S5.E19.m1.2.2.1.1.2"></eq><ci id="S5.E19.m1.2.2.1.1.3.cmml" xref="S5.E19.m1.2.2.1.1.3">𝑚</ci><apply id="S5.E19.m1.2.2.1.1.1.cmml" xref="S5.E19.m1.2.2.1.1.1"><times id="S5.E19.m1.2.2.1.1.1.2.cmml" xref="S5.E19.m1.2.2.1.1.1.2"></times><apply id="S5.E19.m1.2.2.1.1.1.3.cmml" xref="S5.E19.m1.2.2.1.1.1.3"><divide id="S5.E19.m1.2.2.1.1.1.3.1.cmml" xref="S5.E19.m1.2.2.1.1.1.3"></divide><cn type="integer" id="S5.E19.m1.2.2.1.1.1.3.2.cmml" xref="S5.E19.m1.2.2.1.1.1.3.2">1</cn><apply id="S5.E19.m1.2.2.1.1.1.3.3.cmml" xref="S5.E19.m1.2.2.1.1.1.3.3"><times id="S5.E19.m1.2.2.1.1.1.3.3.1.cmml" xref="S5.E19.m1.2.2.1.1.1.3.3.1"></times><ci id="S5.E19.m1.2.2.1.1.1.3.3.2.cmml" xref="S5.E19.m1.2.2.1.1.1.3.3.2">𝑛</ci><ci id="S5.E19.m1.2.2.1.1.1.3.3.3.cmml" xref="S5.E19.m1.2.2.1.1.1.3.3.3">𝐵</ci></apply></apply><apply id="S5.E19.m1.2.2.1.1.1.1.cmml" xref="S5.E19.m1.2.2.1.1.1.1"><apply id="S5.E19.m1.2.2.1.1.1.1.2.cmml" xref="S5.E19.m1.2.2.1.1.1.1.2"><csymbol cd="ambiguous" id="S5.E19.m1.2.2.1.1.1.1.2.1.cmml" xref="S5.E19.m1.2.2.1.1.1.1.2">superscript</csymbol><apply id="S5.E19.m1.2.2.1.1.1.1.2.2.cmml" xref="S5.E19.m1.2.2.1.1.1.1.2"><csymbol cd="ambiguous" id="S5.E19.m1.2.2.1.1.1.1.2.2.1.cmml" xref="S5.E19.m1.2.2.1.1.1.1.2">subscript</csymbol><sum id="S5.E19.m1.2.2.1.1.1.1.2.2.2.cmml" xref="S5.E19.m1.2.2.1.1.1.1.2.2.2"></sum><apply id="S5.E19.m1.2.2.1.1.1.1.2.2.3.cmml" xref="S5.E19.m1.2.2.1.1.1.1.2.2.3"><eq id="S5.E19.m1.2.2.1.1.1.1.2.2.3.1.cmml" xref="S5.E19.m1.2.2.1.1.1.1.2.2.3.1"></eq><ci id="S5.E19.m1.2.2.1.1.1.1.2.2.3.2.cmml" xref="S5.E19.m1.2.2.1.1.1.1.2.2.3.2">𝑖</ci><cn type="integer" id="S5.E19.m1.2.2.1.1.1.1.2.2.3.3.cmml" xref="S5.E19.m1.2.2.1.1.1.1.2.2.3.3">1</cn></apply></apply><ci id="S5.E19.m1.2.2.1.1.1.1.2.3.cmml" xref="S5.E19.m1.2.2.1.1.1.1.2.3">𝑛</ci></apply><apply id="S5.E19.m1.2.2.1.1.1.1.1.cmml" xref="S5.E19.m1.2.2.1.1.1.1.1"><times id="S5.E19.m1.2.2.1.1.1.1.1.2.cmml" xref="S5.E19.m1.2.2.1.1.1.1.1.2"></times><apply id="S5.E19.m1.1.1.cmml" xref="S5.E19.m1.2.2.1.1.1.1.1.3.2"><ci id="S5.E19.m1.1.1.1.cmml" xref="S5.E19.m1.1.1.1">¯</ci><apply id="S5.E19.m1.1.1.2.cmml" xref="S5.E19.m1.1.1.2"><csymbol cd="ambiguous" id="S5.E19.m1.1.1.2.1.cmml" xref="S5.E19.m1.1.1.2">subscript</csymbol><ci id="S5.E19.m1.1.1.2.2.cmml" xref="S5.E19.m1.1.1.2.2">𝑔</ci><ci id="S5.E19.m1.1.1.2.3.cmml" xref="S5.E19.m1.1.1.2.3">𝑖</ci></apply></apply><apply id="S5.E19.m1.2.2.1.1.1.1.1.1.1.1.cmml" xref="S5.E19.m1.2.2.1.1.1.1.1.1.1"><plus id="S5.E19.m1.2.2.1.1.1.1.1.1.1.1.1.cmml" xref="S5.E19.m1.2.2.1.1.1.1.1.1.1.1.1"></plus><cn type="integer" id="S5.E19.m1.2.2.1.1.1.1.1.1.1.1.2.cmml" xref="S5.E19.m1.2.2.1.1.1.1.1.1.1.1.2">1</cn><apply id="S5.E19.m1.2.2.1.1.1.1.1.1.1.1.3.cmml" xref="S5.E19.m1.2.2.1.1.1.1.1.1.1.1.3"><divide id="S5.E19.m1.2.2.1.1.1.1.1.1.1.1.3.1.cmml" xref="S5.E19.m1.2.2.1.1.1.1.1.1.1.1.3"></divide><cn type="integer" id="S5.E19.m1.2.2.1.1.1.1.1.1.1.1.3.2.cmml" xref="S5.E19.m1.2.2.1.1.1.1.1.1.1.1.3.2">1</cn><ci id="S5.E19.m1.2.2.1.1.1.1.1.1.1.1.3.3.cmml" xref="S5.E19.m1.2.2.1.1.1.1.1.1.1.1.3.3">𝑛</ci></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.E19.m1.2c">m=\frac{1}{nB}\sum_{i=1}^{n}(\bar{g_{i}})\left(1+\frac{1}{n}\right)\,.</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(19)</span></td>
</tr></tbody>
</table>
<p id="S5.I1.ix2.p1.16" class="ltx_p">As mentioned earlier, we assume the offset <math id="S5.I1.ix2.p1.11.m1.1" class="ltx_Math" alttext="s_{i}" display="inline"><semantics id="S5.I1.ix2.p1.11.m1.1a"><msub id="S5.I1.ix2.p1.11.m1.1.1" xref="S5.I1.ix2.p1.11.m1.1.1.cmml"><mi id="S5.I1.ix2.p1.11.m1.1.1.2" xref="S5.I1.ix2.p1.11.m1.1.1.2.cmml">s</mi><mi id="S5.I1.ix2.p1.11.m1.1.1.3" xref="S5.I1.ix2.p1.11.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S5.I1.ix2.p1.11.m1.1b"><apply id="S5.I1.ix2.p1.11.m1.1.1.cmml" xref="S5.I1.ix2.p1.11.m1.1.1"><csymbol cd="ambiguous" id="S5.I1.ix2.p1.11.m1.1.1.1.cmml" xref="S5.I1.ix2.p1.11.m1.1.1">subscript</csymbol><ci id="S5.I1.ix2.p1.11.m1.1.1.2.cmml" xref="S5.I1.ix2.p1.11.m1.1.1.2">𝑠</ci><ci id="S5.I1.ix2.p1.11.m1.1.1.3.cmml" xref="S5.I1.ix2.p1.11.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.I1.ix2.p1.11.m1.1c">s_{i}</annotation></semantics></math> to be an approximation of misclassification penalties, when the model mistakenly predicts <math id="S5.I1.ix2.p1.12.m2.1" class="ltx_Math" alttext="i" display="inline"><semantics id="S5.I1.ix2.p1.12.m2.1a"><mi id="S5.I1.ix2.p1.12.m2.1.1" xref="S5.I1.ix2.p1.12.m2.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S5.I1.ix2.p1.12.m2.1b"><ci id="S5.I1.ix2.p1.12.m2.1.1.cmml" xref="S5.I1.ix2.p1.12.m2.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.I1.ix2.p1.12.m2.1c">i</annotation></semantics></math> to be ground-truth.
These penalties are mainly related to the status of the model weights, which can be biased to specific classes. 
Based on this intuition, we estimate the offset <math id="S5.I1.ix2.p1.13.m3.1" class="ltx_Math" alttext="s_{i}" display="inline"><semantics id="S5.I1.ix2.p1.13.m3.1a"><msub id="S5.I1.ix2.p1.13.m3.1.1" xref="S5.I1.ix2.p1.13.m3.1.1.cmml"><mi id="S5.I1.ix2.p1.13.m3.1.1.2" xref="S5.I1.ix2.p1.13.m3.1.1.2.cmml">s</mi><mi id="S5.I1.ix2.p1.13.m3.1.1.3" xref="S5.I1.ix2.p1.13.m3.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S5.I1.ix2.p1.13.m3.1b"><apply id="S5.I1.ix2.p1.13.m3.1.1.cmml" xref="S5.I1.ix2.p1.13.m3.1.1"><csymbol cd="ambiguous" id="S5.I1.ix2.p1.13.m3.1.1.1.cmml" xref="S5.I1.ix2.p1.13.m3.1.1">subscript</csymbol><ci id="S5.I1.ix2.p1.13.m3.1.1.2.cmml" xref="S5.I1.ix2.p1.13.m3.1.1.2">𝑠</ci><ci id="S5.I1.ix2.p1.13.m3.1.1.3.cmml" xref="S5.I1.ix2.p1.13.m3.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.I1.ix2.p1.13.m3.1c">s_{i}</annotation></semantics></math> by passing batches full of other labels <math id="S5.I1.ix2.p1.14.m4.2" class="ltx_Math" alttext="{\forall j\in[1,n]\!:j\neq i}" display="inline"><semantics id="S5.I1.ix2.p1.14.m4.2a"><mrow id="S5.I1.ix2.p1.14.m4.2.3" xref="S5.I1.ix2.p1.14.m4.2.3.cmml"><mrow id="S5.I1.ix2.p1.14.m4.2.3.2" xref="S5.I1.ix2.p1.14.m4.2.3.2.cmml"><mrow id="S5.I1.ix2.p1.14.m4.2.3.2.2" xref="S5.I1.ix2.p1.14.m4.2.3.2.2.cmml"><mo rspace="0.167em" id="S5.I1.ix2.p1.14.m4.2.3.2.2.1" xref="S5.I1.ix2.p1.14.m4.2.3.2.2.1.cmml">∀</mo><mi id="S5.I1.ix2.p1.14.m4.2.3.2.2.2" xref="S5.I1.ix2.p1.14.m4.2.3.2.2.2.cmml">j</mi></mrow><mo id="S5.I1.ix2.p1.14.m4.2.3.2.1" xref="S5.I1.ix2.p1.14.m4.2.3.2.1.cmml">∈</mo><mrow id="S5.I1.ix2.p1.14.m4.2.3.2.3.2" xref="S5.I1.ix2.p1.14.m4.2.3.2.3.1.cmml"><mo stretchy="false" id="S5.I1.ix2.p1.14.m4.2.3.2.3.2.1" xref="S5.I1.ix2.p1.14.m4.2.3.2.3.1.cmml">[</mo><mn id="S5.I1.ix2.p1.14.m4.1.1" xref="S5.I1.ix2.p1.14.m4.1.1.cmml">1</mn><mo id="S5.I1.ix2.p1.14.m4.2.3.2.3.2.2" xref="S5.I1.ix2.p1.14.m4.2.3.2.3.1.cmml">,</mo><mi id="S5.I1.ix2.p1.14.m4.2.2" xref="S5.I1.ix2.p1.14.m4.2.2.cmml">n</mi><mo rspace="0.108em" stretchy="false" id="S5.I1.ix2.p1.14.m4.2.3.2.3.2.3" xref="S5.I1.ix2.p1.14.m4.2.3.2.3.1.cmml">]</mo></mrow></mrow><mo rspace="0.278em" id="S5.I1.ix2.p1.14.m4.2.3.1" xref="S5.I1.ix2.p1.14.m4.2.3.1.cmml">:</mo><mrow id="S5.I1.ix2.p1.14.m4.2.3.3" xref="S5.I1.ix2.p1.14.m4.2.3.3.cmml"><mi id="S5.I1.ix2.p1.14.m4.2.3.3.2" xref="S5.I1.ix2.p1.14.m4.2.3.3.2.cmml">j</mi><mo id="S5.I1.ix2.p1.14.m4.2.3.3.1" xref="S5.I1.ix2.p1.14.m4.2.3.3.1.cmml">≠</mo><mi id="S5.I1.ix2.p1.14.m4.2.3.3.3" xref="S5.I1.ix2.p1.14.m4.2.3.3.3.cmml">i</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="S5.I1.ix2.p1.14.m4.2b"><apply id="S5.I1.ix2.p1.14.m4.2.3.cmml" xref="S5.I1.ix2.p1.14.m4.2.3"><ci id="S5.I1.ix2.p1.14.m4.2.3.1.cmml" xref="S5.I1.ix2.p1.14.m4.2.3.1">:</ci><apply id="S5.I1.ix2.p1.14.m4.2.3.2.cmml" xref="S5.I1.ix2.p1.14.m4.2.3.2"><in id="S5.I1.ix2.p1.14.m4.2.3.2.1.cmml" xref="S5.I1.ix2.p1.14.m4.2.3.2.1"></in><apply id="S5.I1.ix2.p1.14.m4.2.3.2.2.cmml" xref="S5.I1.ix2.p1.14.m4.2.3.2.2"><csymbol cd="latexml" id="S5.I1.ix2.p1.14.m4.2.3.2.2.1.cmml" xref="S5.I1.ix2.p1.14.m4.2.3.2.2.1">for-all</csymbol><ci id="S5.I1.ix2.p1.14.m4.2.3.2.2.2.cmml" xref="S5.I1.ix2.p1.14.m4.2.3.2.2.2">𝑗</ci></apply><interval closure="closed" id="S5.I1.ix2.p1.14.m4.2.3.2.3.1.cmml" xref="S5.I1.ix2.p1.14.m4.2.3.2.3.2"><cn type="integer" id="S5.I1.ix2.p1.14.m4.1.1.cmml" xref="S5.I1.ix2.p1.14.m4.1.1">1</cn><ci id="S5.I1.ix2.p1.14.m4.2.2.cmml" xref="S5.I1.ix2.p1.14.m4.2.2">𝑛</ci></interval></apply><apply id="S5.I1.ix2.p1.14.m4.2.3.3.cmml" xref="S5.I1.ix2.p1.14.m4.2.3.3"><neq id="S5.I1.ix2.p1.14.m4.2.3.3.1.cmml" xref="S5.I1.ix2.p1.14.m4.2.3.3.1"></neq><ci id="S5.I1.ix2.p1.14.m4.2.3.3.2.cmml" xref="S5.I1.ix2.p1.14.m4.2.3.3.2">𝑗</ci><ci id="S5.I1.ix2.p1.14.m4.2.3.3.3.cmml" xref="S5.I1.ix2.p1.14.m4.2.3.3.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.I1.ix2.p1.14.m4.2c">{\forall j\in[1,n]\!:j\neq i}</annotation></semantics></math>, each batch full of one label, one batch per run.
We repeat this for various batch sizes, in total of <math id="S5.I1.ix2.p1.15.m5.1" class="ltx_Math" alttext="z" display="inline"><semantics id="S5.I1.ix2.p1.15.m5.1a"><mi id="S5.I1.ix2.p1.15.m5.1.1" xref="S5.I1.ix2.p1.15.m5.1.1.cmml">z</mi><annotation-xml encoding="MathML-Content" id="S5.I1.ix2.p1.15.m5.1b"><ci id="S5.I1.ix2.p1.15.m5.1.1.cmml" xref="S5.I1.ix2.p1.15.m5.1.1">𝑧</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.I1.ix2.p1.15.m5.1c">z</annotation></semantics></math> runs.
In these runs, the gradients of label <math id="S5.I1.ix2.p1.16.m6.1" class="ltx_Math" alttext="i" display="inline"><semantics id="S5.I1.ix2.p1.16.m6.1a"><mi id="S5.I1.ix2.p1.16.m6.1.1" xref="S5.I1.ix2.p1.16.m6.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S5.I1.ix2.p1.16.m6.1b"><ci id="S5.I1.ix2.p1.16.m6.1.1.cmml" xref="S5.I1.ix2.p1.16.m6.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.I1.ix2.p1.16.m6.1c">i</annotation></semantics></math> reflect to some extent the misclassification penalties.
Therefore, we calculate the mean of these gradients to be our estimated offset, thus, we have</p>
<table id="S5.E20" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S5.E20.m1.1" class="ltx_Math" alttext="s_{i}=\frac{1}{z}\sum_{k=1}^{z}(g_{i_{k}})\,." display="block"><semantics id="S5.E20.m1.1a"><mrow id="S5.E20.m1.1.1.1" xref="S5.E20.m1.1.1.1.1.cmml"><mrow id="S5.E20.m1.1.1.1.1" xref="S5.E20.m1.1.1.1.1.cmml"><msub id="S5.E20.m1.1.1.1.1.3" xref="S5.E20.m1.1.1.1.1.3.cmml"><mi id="S5.E20.m1.1.1.1.1.3.2" xref="S5.E20.m1.1.1.1.1.3.2.cmml">s</mi><mi id="S5.E20.m1.1.1.1.1.3.3" xref="S5.E20.m1.1.1.1.1.3.3.cmml">i</mi></msub><mo id="S5.E20.m1.1.1.1.1.2" xref="S5.E20.m1.1.1.1.1.2.cmml">=</mo><mrow id="S5.E20.m1.1.1.1.1.1" xref="S5.E20.m1.1.1.1.1.1.cmml"><mfrac id="S5.E20.m1.1.1.1.1.1.3" xref="S5.E20.m1.1.1.1.1.1.3.cmml"><mn id="S5.E20.m1.1.1.1.1.1.3.2" xref="S5.E20.m1.1.1.1.1.1.3.2.cmml">1</mn><mi id="S5.E20.m1.1.1.1.1.1.3.3" xref="S5.E20.m1.1.1.1.1.1.3.3.cmml">z</mi></mfrac><mo lspace="0em" rspace="0em" id="S5.E20.m1.1.1.1.1.1.2" xref="S5.E20.m1.1.1.1.1.1.2.cmml">​</mo><mrow id="S5.E20.m1.1.1.1.1.1.1" xref="S5.E20.m1.1.1.1.1.1.1.cmml"><munderover id="S5.E20.m1.1.1.1.1.1.1.2" xref="S5.E20.m1.1.1.1.1.1.1.2.cmml"><mo movablelimits="false" rspace="0em" id="S5.E20.m1.1.1.1.1.1.1.2.2.2" xref="S5.E20.m1.1.1.1.1.1.1.2.2.2.cmml">∑</mo><mrow id="S5.E20.m1.1.1.1.1.1.1.2.2.3" xref="S5.E20.m1.1.1.1.1.1.1.2.2.3.cmml"><mi id="S5.E20.m1.1.1.1.1.1.1.2.2.3.2" xref="S5.E20.m1.1.1.1.1.1.1.2.2.3.2.cmml">k</mi><mo id="S5.E20.m1.1.1.1.1.1.1.2.2.3.1" xref="S5.E20.m1.1.1.1.1.1.1.2.2.3.1.cmml">=</mo><mn id="S5.E20.m1.1.1.1.1.1.1.2.2.3.3" xref="S5.E20.m1.1.1.1.1.1.1.2.2.3.3.cmml">1</mn></mrow><mi id="S5.E20.m1.1.1.1.1.1.1.2.3" xref="S5.E20.m1.1.1.1.1.1.1.2.3.cmml">z</mi></munderover><mrow id="S5.E20.m1.1.1.1.1.1.1.1.1" xref="S5.E20.m1.1.1.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S5.E20.m1.1.1.1.1.1.1.1.1.2" xref="S5.E20.m1.1.1.1.1.1.1.1.1.1.cmml">(</mo><msub id="S5.E20.m1.1.1.1.1.1.1.1.1.1" xref="S5.E20.m1.1.1.1.1.1.1.1.1.1.cmml"><mi id="S5.E20.m1.1.1.1.1.1.1.1.1.1.2" xref="S5.E20.m1.1.1.1.1.1.1.1.1.1.2.cmml">g</mi><msub id="S5.E20.m1.1.1.1.1.1.1.1.1.1.3" xref="S5.E20.m1.1.1.1.1.1.1.1.1.1.3.cmml"><mi id="S5.E20.m1.1.1.1.1.1.1.1.1.1.3.2" xref="S5.E20.m1.1.1.1.1.1.1.1.1.1.3.2.cmml">i</mi><mi id="S5.E20.m1.1.1.1.1.1.1.1.1.1.3.3" xref="S5.E20.m1.1.1.1.1.1.1.1.1.1.3.3.cmml">k</mi></msub></msub><mo stretchy="false" id="S5.E20.m1.1.1.1.1.1.1.1.1.3" xref="S5.E20.m1.1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow><mo lspace="0.170em" id="S5.E20.m1.1.1.1.2" xref="S5.E20.m1.1.1.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S5.E20.m1.1b"><apply id="S5.E20.m1.1.1.1.1.cmml" xref="S5.E20.m1.1.1.1"><eq id="S5.E20.m1.1.1.1.1.2.cmml" xref="S5.E20.m1.1.1.1.1.2"></eq><apply id="S5.E20.m1.1.1.1.1.3.cmml" xref="S5.E20.m1.1.1.1.1.3"><csymbol cd="ambiguous" id="S5.E20.m1.1.1.1.1.3.1.cmml" xref="S5.E20.m1.1.1.1.1.3">subscript</csymbol><ci id="S5.E20.m1.1.1.1.1.3.2.cmml" xref="S5.E20.m1.1.1.1.1.3.2">𝑠</ci><ci id="S5.E20.m1.1.1.1.1.3.3.cmml" xref="S5.E20.m1.1.1.1.1.3.3">𝑖</ci></apply><apply id="S5.E20.m1.1.1.1.1.1.cmml" xref="S5.E20.m1.1.1.1.1.1"><times id="S5.E20.m1.1.1.1.1.1.2.cmml" xref="S5.E20.m1.1.1.1.1.1.2"></times><apply id="S5.E20.m1.1.1.1.1.1.3.cmml" xref="S5.E20.m1.1.1.1.1.1.3"><divide id="S5.E20.m1.1.1.1.1.1.3.1.cmml" xref="S5.E20.m1.1.1.1.1.1.3"></divide><cn type="integer" id="S5.E20.m1.1.1.1.1.1.3.2.cmml" xref="S5.E20.m1.1.1.1.1.1.3.2">1</cn><ci id="S5.E20.m1.1.1.1.1.1.3.3.cmml" xref="S5.E20.m1.1.1.1.1.1.3.3">𝑧</ci></apply><apply id="S5.E20.m1.1.1.1.1.1.1.cmml" xref="S5.E20.m1.1.1.1.1.1.1"><apply id="S5.E20.m1.1.1.1.1.1.1.2.cmml" xref="S5.E20.m1.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S5.E20.m1.1.1.1.1.1.1.2.1.cmml" xref="S5.E20.m1.1.1.1.1.1.1.2">superscript</csymbol><apply id="S5.E20.m1.1.1.1.1.1.1.2.2.cmml" xref="S5.E20.m1.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S5.E20.m1.1.1.1.1.1.1.2.2.1.cmml" xref="S5.E20.m1.1.1.1.1.1.1.2">subscript</csymbol><sum id="S5.E20.m1.1.1.1.1.1.1.2.2.2.cmml" xref="S5.E20.m1.1.1.1.1.1.1.2.2.2"></sum><apply id="S5.E20.m1.1.1.1.1.1.1.2.2.3.cmml" xref="S5.E20.m1.1.1.1.1.1.1.2.2.3"><eq id="S5.E20.m1.1.1.1.1.1.1.2.2.3.1.cmml" xref="S5.E20.m1.1.1.1.1.1.1.2.2.3.1"></eq><ci id="S5.E20.m1.1.1.1.1.1.1.2.2.3.2.cmml" xref="S5.E20.m1.1.1.1.1.1.1.2.2.3.2">𝑘</ci><cn type="integer" id="S5.E20.m1.1.1.1.1.1.1.2.2.3.3.cmml" xref="S5.E20.m1.1.1.1.1.1.1.2.2.3.3">1</cn></apply></apply><ci id="S5.E20.m1.1.1.1.1.1.1.2.3.cmml" xref="S5.E20.m1.1.1.1.1.1.1.2.3">𝑧</ci></apply><apply id="S5.E20.m1.1.1.1.1.1.1.1.1.1.cmml" xref="S5.E20.m1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S5.E20.m1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S5.E20.m1.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S5.E20.m1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S5.E20.m1.1.1.1.1.1.1.1.1.1.2">𝑔</ci><apply id="S5.E20.m1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S5.E20.m1.1.1.1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S5.E20.m1.1.1.1.1.1.1.1.1.1.3.1.cmml" xref="S5.E20.m1.1.1.1.1.1.1.1.1.1.3">subscript</csymbol><ci id="S5.E20.m1.1.1.1.1.1.1.1.1.1.3.2.cmml" xref="S5.E20.m1.1.1.1.1.1.1.1.1.1.3.2">𝑖</ci><ci id="S5.E20.m1.1.1.1.1.1.1.1.1.1.3.3.cmml" xref="S5.E20.m1.1.1.1.1.1.1.1.1.1.3.3">𝑘</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.E20.m1.1c">s_{i}=\frac{1}{z}\sum_{k=1}^{z}(g_{i_{k}})\,.</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(20)</span></td>
</tr></tbody>
</table>
</div>
</dd>
<dt id="S5.I1.ix3" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span id="S5.I1.ix3.1.1.1" class="ltx_text ltx_font_bold">Auxiliary knowledge.</span></span></dt>
<dd class="ltx_item">
<div id="S5.I1.ix3.p1" class="ltx_para">
<p id="S5.I1.ix3.p1.1" class="ltx_p">In this scenario, the adversary has access to the shared gradients, model, and auxiliary data that contains the same classes as the training dataset.
Here, the adversary can follow the same methods of the white-box scenario, however, using real input data instead of dummy data.
This in turn is expected to yield better estimations for the impact and offset.
The goodness of the auxiliary data, i.e., the similarity of the content and class distribution to the original dataset, might play a role in the quality of the estimations.
This aspect can be investigated in further research.</p>
</div>
<div id="S5.I1.ix3.p2" class="ltx_para">
<p id="S5.I1.ix3.p2.2" class="ltx_p">To demonstrate the quality of our offset estimation, we calibrate the gradients of Figure <a href="#S4.F3" title="Figure 3 ‣ Proof ‣ 4 Gradient analysis ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a> (a) by subtracting the estimated offset and plot the results in
Figure <a href="#S4.F3" title="Figure 3 ‣ Proof ‣ 4 Gradient analysis ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a> (c). We can see how the gradients become mainly negative and strongly correlated with the label occurrences.
To measure the correlation, we use the Pearson correlation coefficient <math id="S5.I1.ix3.p2.1.m1.1" class="ltx_Math" alttext="{-1\leq\rho\leq 1}" display="inline"><semantics id="S5.I1.ix3.p2.1.m1.1a"><mrow id="S5.I1.ix3.p2.1.m1.1.1" xref="S5.I1.ix3.p2.1.m1.1.1.cmml"><mrow id="S5.I1.ix3.p2.1.m1.1.1.2" xref="S5.I1.ix3.p2.1.m1.1.1.2.cmml"><mo id="S5.I1.ix3.p2.1.m1.1.1.2a" xref="S5.I1.ix3.p2.1.m1.1.1.2.cmml">−</mo><mn id="S5.I1.ix3.p2.1.m1.1.1.2.2" xref="S5.I1.ix3.p2.1.m1.1.1.2.2.cmml">1</mn></mrow><mo id="S5.I1.ix3.p2.1.m1.1.1.3" xref="S5.I1.ix3.p2.1.m1.1.1.3.cmml">≤</mo><mi id="S5.I1.ix3.p2.1.m1.1.1.4" xref="S5.I1.ix3.p2.1.m1.1.1.4.cmml">ρ</mi><mo id="S5.I1.ix3.p2.1.m1.1.1.5" xref="S5.I1.ix3.p2.1.m1.1.1.5.cmml">≤</mo><mn id="S5.I1.ix3.p2.1.m1.1.1.6" xref="S5.I1.ix3.p2.1.m1.1.1.6.cmml">1</mn></mrow><annotation-xml encoding="MathML-Content" id="S5.I1.ix3.p2.1.m1.1b"><apply id="S5.I1.ix3.p2.1.m1.1.1.cmml" xref="S5.I1.ix3.p2.1.m1.1.1"><and id="S5.I1.ix3.p2.1.m1.1.1a.cmml" xref="S5.I1.ix3.p2.1.m1.1.1"></and><apply id="S5.I1.ix3.p2.1.m1.1.1b.cmml" xref="S5.I1.ix3.p2.1.m1.1.1"><leq id="S5.I1.ix3.p2.1.m1.1.1.3.cmml" xref="S5.I1.ix3.p2.1.m1.1.1.3"></leq><apply id="S5.I1.ix3.p2.1.m1.1.1.2.cmml" xref="S5.I1.ix3.p2.1.m1.1.1.2"><minus id="S5.I1.ix3.p2.1.m1.1.1.2.1.cmml" xref="S5.I1.ix3.p2.1.m1.1.1.2"></minus><cn type="integer" id="S5.I1.ix3.p2.1.m1.1.1.2.2.cmml" xref="S5.I1.ix3.p2.1.m1.1.1.2.2">1</cn></apply><ci id="S5.I1.ix3.p2.1.m1.1.1.4.cmml" xref="S5.I1.ix3.p2.1.m1.1.1.4">𝜌</ci></apply><apply id="S5.I1.ix3.p2.1.m1.1.1c.cmml" xref="S5.I1.ix3.p2.1.m1.1.1"><leq id="S5.I1.ix3.p2.1.m1.1.1.5.cmml" xref="S5.I1.ix3.p2.1.m1.1.1.5"></leq><share href="#S5.I1.ix3.p2.1.m1.1.1.4.cmml" id="S5.I1.ix3.p2.1.m1.1.1d.cmml" xref="S5.I1.ix3.p2.1.m1.1.1"></share><cn type="integer" id="S5.I1.ix3.p2.1.m1.1.1.6.cmml" xref="S5.I1.ix3.p2.1.m1.1.1.6">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.I1.ix3.p2.1.m1.1c">{-1\leq\rho\leq 1}</annotation></semantics></math> <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib4" title="" class="ltx_ref">4</a>]</cite>, which yields, for all the studied batch sizes, values of <math id="S5.I1.ix3.p2.2.m2.1" class="ltx_Math" alttext="{|\rho|&gt;0.99}" display="inline"><semantics id="S5.I1.ix3.p2.2.m2.1a"><mrow id="S5.I1.ix3.p2.2.m2.1.2" xref="S5.I1.ix3.p2.2.m2.1.2.cmml"><mrow id="S5.I1.ix3.p2.2.m2.1.2.2.2" xref="S5.I1.ix3.p2.2.m2.1.2.2.1.cmml"><mo stretchy="false" id="S5.I1.ix3.p2.2.m2.1.2.2.2.1" xref="S5.I1.ix3.p2.2.m2.1.2.2.1.1.cmml">|</mo><mi id="S5.I1.ix3.p2.2.m2.1.1" xref="S5.I1.ix3.p2.2.m2.1.1.cmml">ρ</mi><mo stretchy="false" id="S5.I1.ix3.p2.2.m2.1.2.2.2.2" xref="S5.I1.ix3.p2.2.m2.1.2.2.1.1.cmml">|</mo></mrow><mo id="S5.I1.ix3.p2.2.m2.1.2.1" xref="S5.I1.ix3.p2.2.m2.1.2.1.cmml">&gt;</mo><mn id="S5.I1.ix3.p2.2.m2.1.2.3" xref="S5.I1.ix3.p2.2.m2.1.2.3.cmml">0.99</mn></mrow><annotation-xml encoding="MathML-Content" id="S5.I1.ix3.p2.2.m2.1b"><apply id="S5.I1.ix3.p2.2.m2.1.2.cmml" xref="S5.I1.ix3.p2.2.m2.1.2"><gt id="S5.I1.ix3.p2.2.m2.1.2.1.cmml" xref="S5.I1.ix3.p2.2.m2.1.2.1"></gt><apply id="S5.I1.ix3.p2.2.m2.1.2.2.1.cmml" xref="S5.I1.ix3.p2.2.m2.1.2.2.2"><abs id="S5.I1.ix3.p2.2.m2.1.2.2.1.1.cmml" xref="S5.I1.ix3.p2.2.m2.1.2.2.2.1"></abs><ci id="S5.I1.ix3.p2.2.m2.1.1.cmml" xref="S5.I1.ix3.p2.2.m2.1.1">𝜌</ci></apply><cn type="float" id="S5.I1.ix3.p2.2.m2.1.2.3.cmml" xref="S5.I1.ix3.p2.2.m2.1.2.3">0.99</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.I1.ix3.p2.2.m2.1c">{|\rho|&gt;0.99}</annotation></semantics></math> .
The calibration process mitigates  the effect of the offset and makes the gradient values more consistent, thus, easier to be used for extracting the labels.</p>
</div>
</dd>
</dl>
</div>
</section>
<section id="S5.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.2 </span>Label leakage from gradients attack</h3>

<div id="S5.SS2.p1" class="ltx_para">
<p id="S5.SS2.p1.2" class="ltx_p"><span title="" class="ltx_glossaryref">LLG</span> extracts the ground-truth labels from gradients by exploiting Property 1 and 2. The attack consists of three main steps summarized in Algorithm <a href="#algorithm1" title="In 5.2 Label leakage from gradients attack ‣ 5 Label extraction ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>.</p>
<ol id="S5.I2" class="ltx_enumerate">
<li id="S5.I2.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span> 
<div id="S5.I2.i1.p1" class="ltx_para">
<p id="S5.I2.i1.p1.2" class="ltx_p">We start with extracting the labels based on the negative values of the gradients (Property 1). Thus, the corresponding label of each negative gradient is added to the list of the extracted labels <math id="S5.I2.i1.p1.1.m1.1" class="ltx_Math" alttext="E" display="inline"><semantics id="S5.I2.i1.p1.1.m1.1a"><mi id="S5.I2.i1.p1.1.m1.1.1" xref="S5.I2.i1.p1.1.m1.1.1.cmml">E</mi><annotation-xml encoding="MathML-Content" id="S5.I2.i1.p1.1.m1.1b"><ci id="S5.I2.i1.p1.1.m1.1.1.cmml" xref="S5.I2.i1.p1.1.m1.1.1">𝐸</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.I2.i1.p1.1.m1.1c">E</annotation></semantics></math>.
As Property 1 holds firm in our problem setting, we can guarantee 100% correctness of the extracted labels in this step.
As preparation for the next step,  every time we add a label to <math id="S5.I2.i1.p1.2.m2.1" class="ltx_Math" alttext="E" display="inline"><semantics id="S5.I2.i1.p1.2.m2.1a"><mi id="S5.I2.i1.p1.2.m2.1.1" xref="S5.I2.i1.p1.2.m2.1.1.cmml">E</mi><annotation-xml encoding="MathML-Content" id="S5.I2.i1.p1.2.m2.1b"><ci id="S5.I2.i1.p1.2.m2.1.1.cmml" xref="S5.I2.i1.p1.2.m2.1.1">𝐸</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.I2.i1.p1.2.m2.1c">E</annotation></semantics></math>, we subtract the impact from the corresponding gradient following Property 2 (Lines 1-5).</p>
</div>
</li>
<li id="S5.I2.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span> 
<div id="S5.I2.i2.p1" class="ltx_para">
<p id="S5.I2.i2.p1.1" class="ltx_p">We calibrate the gradients by subtracting the offset. In case the offset is not estimated, it is considered to be zero.
This step increases the correlation between the gradient values and label occurrences, which facilitates better label extraction based on these values (Line 7).
</p>
</div>
</li>
<li id="S5.I2.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">3.</span> 
<div id="S5.I2.i3.p1" class="ltx_para">
<p id="S5.I2.i3.p1.3" class="ltx_p">After calibration, the minimum gradient value (negative with maximum magnitude) is more likely corresponding to a label occurred in the batch (see Figure <a href="#S4.F3" title="Figure 3 ‣ Proof ‣ 4 Gradient analysis ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a> (c)).
Therefore, we select the minimum and add the corresponding label to the extracted labels.
We repeat Step (3) until the size of the extracted labels list <math id="S5.I2.i3.p1.1.m1.1" class="ltx_Math" alttext="E" display="inline"><semantics id="S5.I2.i3.p1.1.m1.1a"><mi id="S5.I2.i3.p1.1.m1.1.1" xref="S5.I2.i3.p1.1.m1.1.1.cmml">E</mi><annotation-xml encoding="MathML-Content" id="S5.I2.i3.p1.1.m1.1b"><ci id="S5.I2.i3.p1.1.m1.1.1.cmml" xref="S5.I2.i3.p1.1.m1.1.1">𝐸</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.I2.i3.p1.1.m1.1c">E</annotation></semantics></math> matches the number of data samples <math id="S5.I2.i3.p1.2.m2.1" class="ltx_Math" alttext="D" display="inline"><semantics id="S5.I2.i3.p1.2.m2.1a"><mi id="S5.I2.i3.p1.2.m2.1.1" xref="S5.I2.i3.p1.2.m2.1.1.cmml">D</mi><annotation-xml encoding="MathML-Content" id="S5.I2.i3.p1.2.m2.1b"><ci id="S5.I2.i3.p1.2.m2.1.1.cmml" xref="S5.I2.i3.p1.2.m2.1.1">𝐷</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.I2.i3.p1.2.m2.1c">D</annotation></semantics></math> used to generate the gradients.
Assuming that <math id="S5.I2.i3.p1.3.m3.1" class="ltx_Math" alttext="|D|" display="inline"><semantics id="S5.I2.i3.p1.3.m3.1a"><mrow id="S5.I2.i3.p1.3.m3.1.2.2" xref="S5.I2.i3.p1.3.m3.1.2.1.cmml"><mo stretchy="false" id="S5.I2.i3.p1.3.m3.1.2.2.1" xref="S5.I2.i3.p1.3.m3.1.2.1.1.cmml">|</mo><mi id="S5.I2.i3.p1.3.m3.1.1" xref="S5.I2.i3.p1.3.m3.1.1.cmml">D</mi><mo stretchy="false" id="S5.I2.i3.p1.3.m3.1.2.2.2" xref="S5.I2.i3.p1.3.m3.1.2.1.1.cmml">|</mo></mrow><annotation-xml encoding="MathML-Content" id="S5.I2.i3.p1.3.m3.1b"><apply id="S5.I2.i3.p1.3.m3.1.2.1.cmml" xref="S5.I2.i3.p1.3.m3.1.2.2"><abs id="S5.I2.i3.p1.3.m3.1.2.1.1.cmml" xref="S5.I2.i3.p1.3.m3.1.2.2.1"></abs><ci id="S5.I2.i3.p1.3.m3.1.1.cmml" xref="S5.I2.i3.p1.3.m3.1.1">𝐷</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.I2.i3.p1.3.m3.1c">|D|</annotation></semantics></math> is known or can be guessed by the adversary (Lines 8-11).</p>
</div>
</li>
</ol>
<p id="S5.SS2.p1.1" class="ltx_p">Finally, the output of the <span title="" class="ltx_glossaryref">LLG</span> attack is the list of extracted labels <math id="S5.SS2.p1.1.m1.1" class="ltx_Math" alttext="E" display="inline"><semantics id="S5.SS2.p1.1.m1.1a"><mi id="S5.SS2.p1.1.m1.1.1" xref="S5.SS2.p1.1.m1.1.1.cmml">E</mi><annotation-xml encoding="MathML-Content" id="S5.SS2.p1.1.m1.1b"><ci id="S5.SS2.p1.1.m1.1.1.cmml" xref="S5.SS2.p1.1.m1.1.1">𝐸</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.p1.1.m1.1c">E</annotation></semantics></math>, precisely, the labels existing in the batch and how many times they occur.</p>
</div>
<figure id="algorithm1" class="ltx_float ltx_algorithm">
<div id="algorithm1.17" class="ltx_listing ltx_lst_numbers_left ltx_listing">
<div id="algorithm1.5.5" class="ltx_listingline">
<span id="algorithm1.5.5.1" class="ltx_text"><span id="algorithm1.5.5.1.1" class="ltx_text ltx_font_bold">Data:</span> </span><math id="algorithm1.1.1.m1.1" class="ltx_math_unparsed" alttext="\bm{G}=[g_{1},..,g_{n}]" display="inline"><semantics id="algorithm1.1.1.m1.1a"><mrow id="algorithm1.1.1.m1.1b"><mi id="algorithm1.1.1.m1.1.1">𝑮</mi><mo id="algorithm1.1.1.m1.1.2">=</mo><mrow id="algorithm1.1.1.m1.1.3"><mo stretchy="false" id="algorithm1.1.1.m1.1.3.1">[</mo><msub id="algorithm1.1.1.m1.1.3.2"><mi id="algorithm1.1.1.m1.1.3.2.2">g</mi><mn id="algorithm1.1.1.m1.1.3.2.3">1</mn></msub><mo id="algorithm1.1.1.m1.1.3.3">,</mo><mo lspace="0em" rspace="0.0835em" id="algorithm1.1.1.m1.1.3.4">.</mo><mo lspace="0.0835em" rspace="0.167em" id="algorithm1.1.1.m1.1.3.5">.</mo><mo id="algorithm1.1.1.m1.1.3.6">,</mo><msub id="algorithm1.1.1.m1.1.3.7"><mi id="algorithm1.1.1.m1.1.3.7.2">g</mi><mi id="algorithm1.1.1.m1.1.3.7.3">n</mi></msub><mo stretchy="false" id="algorithm1.1.1.m1.1.3.8">]</mo></mrow></mrow><annotation encoding="application/x-tex" id="algorithm1.1.1.m1.1c">\bm{G}=[g_{1},..,g_{n}]</annotation></semantics></math>: vector  of gradients, <math id="algorithm1.2.2.m2.1" class="ltx_Math" alttext="m" display="inline"><semantics id="algorithm1.2.2.m2.1a"><mi id="algorithm1.2.2.m2.1.1" xref="algorithm1.2.2.m2.1.1.cmml">m</mi><annotation-xml encoding="MathML-Content" id="algorithm1.2.2.m2.1b"><ci id="algorithm1.2.2.m2.1.1.cmml" xref="algorithm1.2.2.m2.1.1">𝑚</ci></annotation-xml><annotation encoding="application/x-tex" id="algorithm1.2.2.m2.1c">m</annotation></semantics></math>: impact, <math id="algorithm1.3.3.m3.1" class="ltx_math_unparsed" alttext="{\bm{S}=[s_{1},..,s_{n}]}" display="inline"><semantics id="algorithm1.3.3.m3.1a"><mrow id="algorithm1.3.3.m3.1b"><mi id="algorithm1.3.3.m3.1.1">𝑺</mi><mo id="algorithm1.3.3.m3.1.2">=</mo><mrow id="algorithm1.3.3.m3.1.3"><mo stretchy="false" id="algorithm1.3.3.m3.1.3.1">[</mo><msub id="algorithm1.3.3.m3.1.3.2"><mi id="algorithm1.3.3.m3.1.3.2.2">s</mi><mn id="algorithm1.3.3.m3.1.3.2.3">1</mn></msub><mo id="algorithm1.3.3.m3.1.3.3">,</mo><mo lspace="0em" rspace="0.0835em" id="algorithm1.3.3.m3.1.3.4">.</mo><mo lspace="0.0835em" rspace="0.167em" id="algorithm1.3.3.m3.1.3.5">.</mo><mo id="algorithm1.3.3.m3.1.3.6">,</mo><msub id="algorithm1.3.3.m3.1.3.7"><mi id="algorithm1.3.3.m3.1.3.7.2">s</mi><mi id="algorithm1.3.3.m3.1.3.7.3">n</mi></msub><mo stretchy="false" id="algorithm1.3.3.m3.1.3.8">]</mo></mrow></mrow><annotation encoding="application/x-tex" id="algorithm1.3.3.m3.1c">{\bm{S}=[s_{1},..,s_{n}]}</annotation></semantics></math>: vector  of offsets,
<math id="algorithm1.4.4.m4.1" class="ltx_Math" alttext="\bm{D}" display="inline"><semantics id="algorithm1.4.4.m4.1a"><mi id="algorithm1.4.4.m4.1.1" xref="algorithm1.4.4.m4.1.1.cmml">𝑫</mi><annotation-xml encoding="MathML-Content" id="algorithm1.4.4.m4.1b"><ci id="algorithm1.4.4.m4.1.1.cmml" xref="algorithm1.4.4.m4.1.1">𝑫</ci></annotation-xml><annotation encoding="application/x-tex" id="algorithm1.4.4.m4.1c">\bm{D}</annotation></semantics></math>: data samples used to generate <math id="algorithm1.5.5.m5.1" class="ltx_Math" alttext="\bm{G}" display="inline"><semantics id="algorithm1.5.5.m5.1a"><mi id="algorithm1.5.5.m5.1.1" xref="algorithm1.5.5.m5.1.1.cmml">𝑮</mi><annotation-xml encoding="MathML-Content" id="algorithm1.5.5.m5.1b"><ci id="algorithm1.5.5.m5.1.1.cmml" xref="algorithm1.5.5.m5.1.1">𝑮</ci></annotation-xml><annotation encoding="application/x-tex" id="algorithm1.5.5.m5.1c">\bm{G}</annotation></semantics></math>.

</div>
<div id="algorithm1.6.6" class="ltx_listingline">
<span id="algorithm1.6.6.1" class="ltx_text"><span id="algorithm1.6.6.1.1" class="ltx_text ltx_font_bold">Result:</span> </span><math id="algorithm1.6.6.m1.1" class="ltx_Math" alttext="E" display="inline"><semantics id="algorithm1.6.6.m1.1a"><mi id="algorithm1.6.6.m1.1.1" xref="algorithm1.6.6.m1.1.1.cmml">E</mi><annotation-xml encoding="MathML-Content" id="algorithm1.6.6.m1.1b"><ci id="algorithm1.6.6.m1.1.1.cmml" xref="algorithm1.6.6.m1.1.1">𝐸</ci></annotation-xml><annotation encoding="application/x-tex" id="algorithm1.6.6.m1.1c">E</annotation></semantics></math>: list for extracted labels.
</div>
<div id="algorithm1.7.7" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">1</span>
<span id="algorithm1.7.7.2" class="ltx_text ltx_font_bold">for</span> <em id="algorithm1.7.7.1" class="ltx_emph ltx_font_italic"><math id="algorithm1.7.7.1.m1.1" class="ltx_Math" alttext="g_{i}\in\bm{G}" display="inline"><semantics id="algorithm1.7.7.1.m1.1a"><mrow id="algorithm1.7.7.1.m1.1.1" xref="algorithm1.7.7.1.m1.1.1.cmml"><msub id="algorithm1.7.7.1.m1.1.1.2" xref="algorithm1.7.7.1.m1.1.1.2.cmml"><mi id="algorithm1.7.7.1.m1.1.1.2.2" xref="algorithm1.7.7.1.m1.1.1.2.2.cmml">g</mi><mi id="algorithm1.7.7.1.m1.1.1.2.3" xref="algorithm1.7.7.1.m1.1.1.2.3.cmml">i</mi></msub><mo id="algorithm1.7.7.1.m1.1.1.1" xref="algorithm1.7.7.1.m1.1.1.1.cmml">∈</mo><mi id="algorithm1.7.7.1.m1.1.1.3" xref="algorithm1.7.7.1.m1.1.1.3.cmml">𝐆</mi></mrow><annotation-xml encoding="MathML-Content" id="algorithm1.7.7.1.m1.1b"><apply id="algorithm1.7.7.1.m1.1.1.cmml" xref="algorithm1.7.7.1.m1.1.1"><in id="algorithm1.7.7.1.m1.1.1.1.cmml" xref="algorithm1.7.7.1.m1.1.1.1"></in><apply id="algorithm1.7.7.1.m1.1.1.2.cmml" xref="algorithm1.7.7.1.m1.1.1.2"><csymbol cd="ambiguous" id="algorithm1.7.7.1.m1.1.1.2.1.cmml" xref="algorithm1.7.7.1.m1.1.1.2">subscript</csymbol><ci id="algorithm1.7.7.1.m1.1.1.2.2.cmml" xref="algorithm1.7.7.1.m1.1.1.2.2">𝑔</ci><ci id="algorithm1.7.7.1.m1.1.1.2.3.cmml" xref="algorithm1.7.7.1.m1.1.1.2.3">𝑖</ci></apply><ci id="algorithm1.7.7.1.m1.1.1.3.cmml" xref="algorithm1.7.7.1.m1.1.1.3">𝐆</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="algorithm1.7.7.1.m1.1c">g_{i}\in\bm{G}</annotation></semantics></math></em> <span id="algorithm1.7.7.3" class="ltx_text ltx_font_bold">do</span> 
</div>
<div id="algorithm1.8.8" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">2</span>  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>   
<span id="algorithm1.8.8.2" class="ltx_text ltx_font_bold">if</span> <em id="algorithm1.8.8.1" class="ltx_emph ltx_font_italic"><math id="algorithm1.8.8.1.m1.1" class="ltx_Math" alttext="g_{i}&lt;0" display="inline"><semantics id="algorithm1.8.8.1.m1.1a"><mrow id="algorithm1.8.8.1.m1.1.1" xref="algorithm1.8.8.1.m1.1.1.cmml"><msub id="algorithm1.8.8.1.m1.1.1.2" xref="algorithm1.8.8.1.m1.1.1.2.cmml"><mi id="algorithm1.8.8.1.m1.1.1.2.2" xref="algorithm1.8.8.1.m1.1.1.2.2.cmml">g</mi><mi id="algorithm1.8.8.1.m1.1.1.2.3" xref="algorithm1.8.8.1.m1.1.1.2.3.cmml">i</mi></msub><mo id="algorithm1.8.8.1.m1.1.1.1" xref="algorithm1.8.8.1.m1.1.1.1.cmml">&lt;</mo><mn id="algorithm1.8.8.1.m1.1.1.3" xref="algorithm1.8.8.1.m1.1.1.3.cmml">0</mn></mrow><annotation-xml encoding="MathML-Content" id="algorithm1.8.8.1.m1.1b"><apply id="algorithm1.8.8.1.m1.1.1.cmml" xref="algorithm1.8.8.1.m1.1.1"><lt id="algorithm1.8.8.1.m1.1.1.1.cmml" xref="algorithm1.8.8.1.m1.1.1.1"></lt><apply id="algorithm1.8.8.1.m1.1.1.2.cmml" xref="algorithm1.8.8.1.m1.1.1.2"><csymbol cd="ambiguous" id="algorithm1.8.8.1.m1.1.1.2.1.cmml" xref="algorithm1.8.8.1.m1.1.1.2">subscript</csymbol><ci id="algorithm1.8.8.1.m1.1.1.2.2.cmml" xref="algorithm1.8.8.1.m1.1.1.2.2">𝑔</ci><ci id="algorithm1.8.8.1.m1.1.1.2.3.cmml" xref="algorithm1.8.8.1.m1.1.1.2.3">𝑖</ci></apply><cn type="integer" id="algorithm1.8.8.1.m1.1.1.3.cmml" xref="algorithm1.8.8.1.m1.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="algorithm1.8.8.1.m1.1c">g_{i}&lt;0</annotation></semantics></math></em> <span id="algorithm1.8.8.3" class="ltx_text ltx_font_bold">then</span> 
</div>
<div id="algorithm1.10.10" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">3</span>  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>     <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>   
append <math id="algorithm1.9.9.m1.1" class="ltx_Math" alttext="i" display="inline"><semantics id="algorithm1.9.9.m1.1a"><mi id="algorithm1.9.9.m1.1.1" xref="algorithm1.9.9.m1.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="algorithm1.9.9.m1.1b"><ci id="algorithm1.9.9.m1.1.1.cmml" xref="algorithm1.9.9.m1.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="algorithm1.9.9.m1.1c">i</annotation></semantics></math> to <math id="algorithm1.10.10.m2.1" class="ltx_Math" alttext="E" display="inline"><semantics id="algorithm1.10.10.m2.1a"><mi id="algorithm1.10.10.m2.1.1" xref="algorithm1.10.10.m2.1.1.cmml">E</mi><annotation-xml encoding="MathML-Content" id="algorithm1.10.10.m2.1b"><ci id="algorithm1.10.10.m2.1.1.cmml" xref="algorithm1.10.10.m2.1.1">𝐸</ci></annotation-xml><annotation encoding="application/x-tex" id="algorithm1.10.10.m2.1c">E</annotation></semantics></math>;
</div>
<div id="algorithm1.11.11" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">4</span>  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>     <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>   
<math id="algorithm1.11.11.m1.1" class="ltx_Math" alttext="g_{i}\leftarrow g_{i}-m" display="inline"><semantics id="algorithm1.11.11.m1.1a"><mrow id="algorithm1.11.11.m1.1.1" xref="algorithm1.11.11.m1.1.1.cmml"><msub id="algorithm1.11.11.m1.1.1.2" xref="algorithm1.11.11.m1.1.1.2.cmml"><mi id="algorithm1.11.11.m1.1.1.2.2" xref="algorithm1.11.11.m1.1.1.2.2.cmml">g</mi><mi id="algorithm1.11.11.m1.1.1.2.3" xref="algorithm1.11.11.m1.1.1.2.3.cmml">i</mi></msub><mo stretchy="false" id="algorithm1.11.11.m1.1.1.1" xref="algorithm1.11.11.m1.1.1.1.cmml">←</mo><mrow id="algorithm1.11.11.m1.1.1.3" xref="algorithm1.11.11.m1.1.1.3.cmml"><msub id="algorithm1.11.11.m1.1.1.3.2" xref="algorithm1.11.11.m1.1.1.3.2.cmml"><mi id="algorithm1.11.11.m1.1.1.3.2.2" xref="algorithm1.11.11.m1.1.1.3.2.2.cmml">g</mi><mi id="algorithm1.11.11.m1.1.1.3.2.3" xref="algorithm1.11.11.m1.1.1.3.2.3.cmml">i</mi></msub><mo id="algorithm1.11.11.m1.1.1.3.1" xref="algorithm1.11.11.m1.1.1.3.1.cmml">−</mo><mi id="algorithm1.11.11.m1.1.1.3.3" xref="algorithm1.11.11.m1.1.1.3.3.cmml">m</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="algorithm1.11.11.m1.1b"><apply id="algorithm1.11.11.m1.1.1.cmml" xref="algorithm1.11.11.m1.1.1"><ci id="algorithm1.11.11.m1.1.1.1.cmml" xref="algorithm1.11.11.m1.1.1.1">←</ci><apply id="algorithm1.11.11.m1.1.1.2.cmml" xref="algorithm1.11.11.m1.1.1.2"><csymbol cd="ambiguous" id="algorithm1.11.11.m1.1.1.2.1.cmml" xref="algorithm1.11.11.m1.1.1.2">subscript</csymbol><ci id="algorithm1.11.11.m1.1.1.2.2.cmml" xref="algorithm1.11.11.m1.1.1.2.2">𝑔</ci><ci id="algorithm1.11.11.m1.1.1.2.3.cmml" xref="algorithm1.11.11.m1.1.1.2.3">𝑖</ci></apply><apply id="algorithm1.11.11.m1.1.1.3.cmml" xref="algorithm1.11.11.m1.1.1.3"><minus id="algorithm1.11.11.m1.1.1.3.1.cmml" xref="algorithm1.11.11.m1.1.1.3.1"></minus><apply id="algorithm1.11.11.m1.1.1.3.2.cmml" xref="algorithm1.11.11.m1.1.1.3.2"><csymbol cd="ambiguous" id="algorithm1.11.11.m1.1.1.3.2.1.cmml" xref="algorithm1.11.11.m1.1.1.3.2">subscript</csymbol><ci id="algorithm1.11.11.m1.1.1.3.2.2.cmml" xref="algorithm1.11.11.m1.1.1.3.2.2">𝑔</ci><ci id="algorithm1.11.11.m1.1.1.3.2.3.cmml" xref="algorithm1.11.11.m1.1.1.3.2.3">𝑖</ci></apply><ci id="algorithm1.11.11.m1.1.1.3.3.cmml" xref="algorithm1.11.11.m1.1.1.3.3">𝑚</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algorithm1.11.11.m1.1c">g_{i}\leftarrow g_{i}-m</annotation></semantics></math>;
</div>
<div id="algorithm1.17.18" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">5</span>  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>     <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>   

</div>
<div id="algorithm1.17.19" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">6</span>  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>    end if
</div>
<div id="algorithm1.17.20" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">7</span>  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>   
</div>
<div id="algorithm1.17.21" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">8</span> end for
</div>
<div id="algorithm1.12.12" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">9</span><math id="algorithm1.12.12.m1.1" class="ltx_Math" alttext="\bm{G}\leftarrow\bm{G}-\bm{S}" display="inline"><semantics id="algorithm1.12.12.m1.1a"><mrow id="algorithm1.12.12.m1.1.1" xref="algorithm1.12.12.m1.1.1.cmml"><mi id="algorithm1.12.12.m1.1.1.2" xref="algorithm1.12.12.m1.1.1.2.cmml">𝑮</mi><mo stretchy="false" id="algorithm1.12.12.m1.1.1.1" xref="algorithm1.12.12.m1.1.1.1.cmml">←</mo><mrow id="algorithm1.12.12.m1.1.1.3" xref="algorithm1.12.12.m1.1.1.3.cmml"><mi id="algorithm1.12.12.m1.1.1.3.2" xref="algorithm1.12.12.m1.1.1.3.2.cmml">𝑮</mi><mo id="algorithm1.12.12.m1.1.1.3.1" xref="algorithm1.12.12.m1.1.1.3.1.cmml">−</mo><mi id="algorithm1.12.12.m1.1.1.3.3" xref="algorithm1.12.12.m1.1.1.3.3.cmml">𝑺</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="algorithm1.12.12.m1.1b"><apply id="algorithm1.12.12.m1.1.1.cmml" xref="algorithm1.12.12.m1.1.1"><ci id="algorithm1.12.12.m1.1.1.1.cmml" xref="algorithm1.12.12.m1.1.1.1">←</ci><ci id="algorithm1.12.12.m1.1.1.2.cmml" xref="algorithm1.12.12.m1.1.1.2">𝑮</ci><apply id="algorithm1.12.12.m1.1.1.3.cmml" xref="algorithm1.12.12.m1.1.1.3"><minus id="algorithm1.12.12.m1.1.1.3.1.cmml" xref="algorithm1.12.12.m1.1.1.3.1"></minus><ci id="algorithm1.12.12.m1.1.1.3.2.cmml" xref="algorithm1.12.12.m1.1.1.3.2">𝑮</ci><ci id="algorithm1.12.12.m1.1.1.3.3.cmml" xref="algorithm1.12.12.m1.1.1.3.3">𝑺</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algorithm1.12.12.m1.1c">\bm{G}\leftarrow\bm{G}-\bm{S}</annotation></semantics></math>;
</div>
<div id="algorithm1.13.13" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">10</span>  
<span id="algorithm1.13.13.2" class="ltx_text ltx_font_bold">while</span> <em id="algorithm1.13.13.1" class="ltx_emph ltx_font_italic"><math id="algorithm1.13.13.1.m1.2" class="ltx_Math" alttext="|E|&lt;|\bm{D}|" display="inline"><semantics id="algorithm1.13.13.1.m1.2a"><mrow id="algorithm1.13.13.1.m1.2.3" xref="algorithm1.13.13.1.m1.2.3.cmml"><mrow id="algorithm1.13.13.1.m1.2.3.2.2" xref="algorithm1.13.13.1.m1.2.3.2.1.cmml"><mo stretchy="false" id="algorithm1.13.13.1.m1.2.3.2.2.1" xref="algorithm1.13.13.1.m1.2.3.2.1.1.cmml">|</mo><mi id="algorithm1.13.13.1.m1.1.1" xref="algorithm1.13.13.1.m1.1.1.cmml">E</mi><mo stretchy="false" id="algorithm1.13.13.1.m1.2.3.2.2.2" xref="algorithm1.13.13.1.m1.2.3.2.1.1.cmml">|</mo></mrow><mo id="algorithm1.13.13.1.m1.2.3.1" xref="algorithm1.13.13.1.m1.2.3.1.cmml">&lt;</mo><mrow id="algorithm1.13.13.1.m1.2.3.3.2" xref="algorithm1.13.13.1.m1.2.3.3.1.cmml"><mo stretchy="false" id="algorithm1.13.13.1.m1.2.3.3.2.1" xref="algorithm1.13.13.1.m1.2.3.3.1.1.cmml">|</mo><mi id="algorithm1.13.13.1.m1.2.2" xref="algorithm1.13.13.1.m1.2.2.cmml">𝐃</mi><mo stretchy="false" id="algorithm1.13.13.1.m1.2.3.3.2.2" xref="algorithm1.13.13.1.m1.2.3.3.1.1.cmml">|</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="algorithm1.13.13.1.m1.2b"><apply id="algorithm1.13.13.1.m1.2.3.cmml" xref="algorithm1.13.13.1.m1.2.3"><lt id="algorithm1.13.13.1.m1.2.3.1.cmml" xref="algorithm1.13.13.1.m1.2.3.1"></lt><apply id="algorithm1.13.13.1.m1.2.3.2.1.cmml" xref="algorithm1.13.13.1.m1.2.3.2.2"><abs id="algorithm1.13.13.1.m1.2.3.2.1.1.cmml" xref="algorithm1.13.13.1.m1.2.3.2.2.1"></abs><ci id="algorithm1.13.13.1.m1.1.1.cmml" xref="algorithm1.13.13.1.m1.1.1">𝐸</ci></apply><apply id="algorithm1.13.13.1.m1.2.3.3.1.cmml" xref="algorithm1.13.13.1.m1.2.3.3.2"><abs id="algorithm1.13.13.1.m1.2.3.3.1.1.cmml" xref="algorithm1.13.13.1.m1.2.3.3.2.1"></abs><ci id="algorithm1.13.13.1.m1.2.2.cmml" xref="algorithm1.13.13.1.m1.2.2">𝐃</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algorithm1.13.13.1.m1.2c">|E|&lt;|\bm{D}|</annotation></semantics></math></em> <span id="algorithm1.13.13.3" class="ltx_text ltx_font_bold">do</span> 
</div>
<div id="algorithm1.14.14" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">11</span>  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>   
Select <math id="algorithm1.14.14.m1.1" class="ltx_Math" alttext="g_{i}:g_{i}=min(\bm{G})" display="inline"><semantics id="algorithm1.14.14.m1.1a"><mrow id="algorithm1.14.14.m1.1.2" xref="algorithm1.14.14.m1.1.2.cmml"><msub id="algorithm1.14.14.m1.1.2.2" xref="algorithm1.14.14.m1.1.2.2.cmml"><mi id="algorithm1.14.14.m1.1.2.2.2" xref="algorithm1.14.14.m1.1.2.2.2.cmml">g</mi><mi id="algorithm1.14.14.m1.1.2.2.3" xref="algorithm1.14.14.m1.1.2.2.3.cmml">i</mi></msub><mo lspace="0.278em" rspace="0.278em" id="algorithm1.14.14.m1.1.2.1" xref="algorithm1.14.14.m1.1.2.1.cmml">:</mo><mrow id="algorithm1.14.14.m1.1.2.3" xref="algorithm1.14.14.m1.1.2.3.cmml"><msub id="algorithm1.14.14.m1.1.2.3.2" xref="algorithm1.14.14.m1.1.2.3.2.cmml"><mi id="algorithm1.14.14.m1.1.2.3.2.2" xref="algorithm1.14.14.m1.1.2.3.2.2.cmml">g</mi><mi id="algorithm1.14.14.m1.1.2.3.2.3" xref="algorithm1.14.14.m1.1.2.3.2.3.cmml">i</mi></msub><mo id="algorithm1.14.14.m1.1.2.3.1" xref="algorithm1.14.14.m1.1.2.3.1.cmml">=</mo><mrow id="algorithm1.14.14.m1.1.2.3.3" xref="algorithm1.14.14.m1.1.2.3.3.cmml"><mi id="algorithm1.14.14.m1.1.2.3.3.2" xref="algorithm1.14.14.m1.1.2.3.3.2.cmml">m</mi><mo lspace="0em" rspace="0em" id="algorithm1.14.14.m1.1.2.3.3.1" xref="algorithm1.14.14.m1.1.2.3.3.1.cmml">​</mo><mi id="algorithm1.14.14.m1.1.2.3.3.3" xref="algorithm1.14.14.m1.1.2.3.3.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="algorithm1.14.14.m1.1.2.3.3.1a" xref="algorithm1.14.14.m1.1.2.3.3.1.cmml">​</mo><mi id="algorithm1.14.14.m1.1.2.3.3.4" xref="algorithm1.14.14.m1.1.2.3.3.4.cmml">n</mi><mo lspace="0em" rspace="0em" id="algorithm1.14.14.m1.1.2.3.3.1b" xref="algorithm1.14.14.m1.1.2.3.3.1.cmml">​</mo><mrow id="algorithm1.14.14.m1.1.2.3.3.5.2" xref="algorithm1.14.14.m1.1.2.3.3.cmml"><mo stretchy="false" id="algorithm1.14.14.m1.1.2.3.3.5.2.1" xref="algorithm1.14.14.m1.1.2.3.3.cmml">(</mo><mi id="algorithm1.14.14.m1.1.1" xref="algorithm1.14.14.m1.1.1.cmml">𝑮</mi><mo stretchy="false" id="algorithm1.14.14.m1.1.2.3.3.5.2.2" xref="algorithm1.14.14.m1.1.2.3.3.cmml">)</mo></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="algorithm1.14.14.m1.1b"><apply id="algorithm1.14.14.m1.1.2.cmml" xref="algorithm1.14.14.m1.1.2"><ci id="algorithm1.14.14.m1.1.2.1.cmml" xref="algorithm1.14.14.m1.1.2.1">:</ci><apply id="algorithm1.14.14.m1.1.2.2.cmml" xref="algorithm1.14.14.m1.1.2.2"><csymbol cd="ambiguous" id="algorithm1.14.14.m1.1.2.2.1.cmml" xref="algorithm1.14.14.m1.1.2.2">subscript</csymbol><ci id="algorithm1.14.14.m1.1.2.2.2.cmml" xref="algorithm1.14.14.m1.1.2.2.2">𝑔</ci><ci id="algorithm1.14.14.m1.1.2.2.3.cmml" xref="algorithm1.14.14.m1.1.2.2.3">𝑖</ci></apply><apply id="algorithm1.14.14.m1.1.2.3.cmml" xref="algorithm1.14.14.m1.1.2.3"><eq id="algorithm1.14.14.m1.1.2.3.1.cmml" xref="algorithm1.14.14.m1.1.2.3.1"></eq><apply id="algorithm1.14.14.m1.1.2.3.2.cmml" xref="algorithm1.14.14.m1.1.2.3.2"><csymbol cd="ambiguous" id="algorithm1.14.14.m1.1.2.3.2.1.cmml" xref="algorithm1.14.14.m1.1.2.3.2">subscript</csymbol><ci id="algorithm1.14.14.m1.1.2.3.2.2.cmml" xref="algorithm1.14.14.m1.1.2.3.2.2">𝑔</ci><ci id="algorithm1.14.14.m1.1.2.3.2.3.cmml" xref="algorithm1.14.14.m1.1.2.3.2.3">𝑖</ci></apply><apply id="algorithm1.14.14.m1.1.2.3.3.cmml" xref="algorithm1.14.14.m1.1.2.3.3"><times id="algorithm1.14.14.m1.1.2.3.3.1.cmml" xref="algorithm1.14.14.m1.1.2.3.3.1"></times><ci id="algorithm1.14.14.m1.1.2.3.3.2.cmml" xref="algorithm1.14.14.m1.1.2.3.3.2">𝑚</ci><ci id="algorithm1.14.14.m1.1.2.3.3.3.cmml" xref="algorithm1.14.14.m1.1.2.3.3.3">𝑖</ci><ci id="algorithm1.14.14.m1.1.2.3.3.4.cmml" xref="algorithm1.14.14.m1.1.2.3.3.4">𝑛</ci><ci id="algorithm1.14.14.m1.1.1.cmml" xref="algorithm1.14.14.m1.1.1">𝑮</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algorithm1.14.14.m1.1c">g_{i}:g_{i}=min(\bm{G})</annotation></semantics></math>;
</div>
<div id="algorithm1.16.16" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">12</span>  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>   
append <math id="algorithm1.15.15.m1.1" class="ltx_Math" alttext="i" display="inline"><semantics id="algorithm1.15.15.m1.1a"><mi id="algorithm1.15.15.m1.1.1" xref="algorithm1.15.15.m1.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="algorithm1.15.15.m1.1b"><ci id="algorithm1.15.15.m1.1.1.cmml" xref="algorithm1.15.15.m1.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="algorithm1.15.15.m1.1c">i</annotation></semantics></math> to <math id="algorithm1.16.16.m2.1" class="ltx_Math" alttext="E" display="inline"><semantics id="algorithm1.16.16.m2.1a"><mi id="algorithm1.16.16.m2.1.1" xref="algorithm1.16.16.m2.1.1.cmml">E</mi><annotation-xml encoding="MathML-Content" id="algorithm1.16.16.m2.1b"><ci id="algorithm1.16.16.m2.1.1.cmml" xref="algorithm1.16.16.m2.1.1">𝐸</ci></annotation-xml><annotation encoding="application/x-tex" id="algorithm1.16.16.m2.1c">E</annotation></semantics></math>;
</div>
<div id="algorithm1.17.17" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">13</span>  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>   
<math id="algorithm1.17.17.m1.1" class="ltx_Math" alttext="g_{i}\leftarrow g_{i}-m" display="inline"><semantics id="algorithm1.17.17.m1.1a"><mrow id="algorithm1.17.17.m1.1.1" xref="algorithm1.17.17.m1.1.1.cmml"><msub id="algorithm1.17.17.m1.1.1.2" xref="algorithm1.17.17.m1.1.1.2.cmml"><mi id="algorithm1.17.17.m1.1.1.2.2" xref="algorithm1.17.17.m1.1.1.2.2.cmml">g</mi><mi id="algorithm1.17.17.m1.1.1.2.3" xref="algorithm1.17.17.m1.1.1.2.3.cmml">i</mi></msub><mo stretchy="false" id="algorithm1.17.17.m1.1.1.1" xref="algorithm1.17.17.m1.1.1.1.cmml">←</mo><mrow id="algorithm1.17.17.m1.1.1.3" xref="algorithm1.17.17.m1.1.1.3.cmml"><msub id="algorithm1.17.17.m1.1.1.3.2" xref="algorithm1.17.17.m1.1.1.3.2.cmml"><mi id="algorithm1.17.17.m1.1.1.3.2.2" xref="algorithm1.17.17.m1.1.1.3.2.2.cmml">g</mi><mi id="algorithm1.17.17.m1.1.1.3.2.3" xref="algorithm1.17.17.m1.1.1.3.2.3.cmml">i</mi></msub><mo id="algorithm1.17.17.m1.1.1.3.1" xref="algorithm1.17.17.m1.1.1.3.1.cmml">−</mo><mi id="algorithm1.17.17.m1.1.1.3.3" xref="algorithm1.17.17.m1.1.1.3.3.cmml">m</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="algorithm1.17.17.m1.1b"><apply id="algorithm1.17.17.m1.1.1.cmml" xref="algorithm1.17.17.m1.1.1"><ci id="algorithm1.17.17.m1.1.1.1.cmml" xref="algorithm1.17.17.m1.1.1.1">←</ci><apply id="algorithm1.17.17.m1.1.1.2.cmml" xref="algorithm1.17.17.m1.1.1.2"><csymbol cd="ambiguous" id="algorithm1.17.17.m1.1.1.2.1.cmml" xref="algorithm1.17.17.m1.1.1.2">subscript</csymbol><ci id="algorithm1.17.17.m1.1.1.2.2.cmml" xref="algorithm1.17.17.m1.1.1.2.2">𝑔</ci><ci id="algorithm1.17.17.m1.1.1.2.3.cmml" xref="algorithm1.17.17.m1.1.1.2.3">𝑖</ci></apply><apply id="algorithm1.17.17.m1.1.1.3.cmml" xref="algorithm1.17.17.m1.1.1.3"><minus id="algorithm1.17.17.m1.1.1.3.1.cmml" xref="algorithm1.17.17.m1.1.1.3.1"></minus><apply id="algorithm1.17.17.m1.1.1.3.2.cmml" xref="algorithm1.17.17.m1.1.1.3.2"><csymbol cd="ambiguous" id="algorithm1.17.17.m1.1.1.3.2.1.cmml" xref="algorithm1.17.17.m1.1.1.3.2">subscript</csymbol><ci id="algorithm1.17.17.m1.1.1.3.2.2.cmml" xref="algorithm1.17.17.m1.1.1.3.2.2">𝑔</ci><ci id="algorithm1.17.17.m1.1.1.3.2.3.cmml" xref="algorithm1.17.17.m1.1.1.3.2.3">𝑖</ci></apply><ci id="algorithm1.17.17.m1.1.1.3.3.cmml" xref="algorithm1.17.17.m1.1.1.3.3">𝑚</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algorithm1.17.17.m1.1c">g_{i}\leftarrow g_{i}-m</annotation></semantics></math>;
</div>
<div id="algorithm1.17.22" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">14</span>  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>   

</div>
<div id="algorithm1.17.23" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">15</span> end while
</div>
<div id="algorithm1.17.24" class="ltx_listingline">

</div>
</div>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_float"><span id="algorithm1.19.1.1" class="ltx_text ltx_font_bold">Algorithm 1</span> </span>Label Leakage from Gradients</figcaption>
</figure>
</section>
</section>
<section id="S6" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">6 </span>Empirical evaluation</h2>

<div id="S6.p1" class="ltx_para">
<p id="S6.p1.2" class="ltx_p">We evaluate the effectiveness of <span title="" class="ltx_glossaryref">LLG</span> with varying settings including: different <span title="" class="ltx_glossaryref">FL</span> algorithms,  threat models, model architectures, and model convergence statuses.
We also test the robustness of <span title="" class="ltx_glossaryref">LLG</span> against two defense mechanisms, namely, noisy and compressed gradients.
For the sake of simplicity, we refer to <math id="S6.p1.1.m1.1" class="ltx_Math" alttext="g_{i}=\mathds{1}^{T}\cdot\nabla\bm{W}^{i}_{L}" display="inline"><semantics id="S6.p1.1.m1.1a"><mrow id="S6.p1.1.m1.1.1" xref="S6.p1.1.m1.1.1.cmml"><msub id="S6.p1.1.m1.1.1.2" xref="S6.p1.1.m1.1.1.2.cmml"><mi id="S6.p1.1.m1.1.1.2.2" xref="S6.p1.1.m1.1.1.2.2.cmml">g</mi><mi id="S6.p1.1.m1.1.1.2.3" xref="S6.p1.1.m1.1.1.2.3.cmml">i</mi></msub><mo id="S6.p1.1.m1.1.1.1" xref="S6.p1.1.m1.1.1.1.cmml">=</mo><mrow id="S6.p1.1.m1.1.1.3" xref="S6.p1.1.m1.1.1.3.cmml"><msup id="S6.p1.1.m1.1.1.3.2" xref="S6.p1.1.m1.1.1.3.2.cmml"><mn id="S6.p1.1.m1.1.1.3.2.2" xref="S6.p1.1.m1.1.1.3.2.2.cmml">𝟙</mn><mi id="S6.p1.1.m1.1.1.3.2.3" xref="S6.p1.1.m1.1.1.3.2.3.cmml">T</mi></msup><mo lspace="0.222em" rspace="0.222em" id="S6.p1.1.m1.1.1.3.1" xref="S6.p1.1.m1.1.1.3.1.cmml">⋅</mo><mrow id="S6.p1.1.m1.1.1.3.3" xref="S6.p1.1.m1.1.1.3.3.cmml"><mo rspace="0.167em" id="S6.p1.1.m1.1.1.3.3.1" xref="S6.p1.1.m1.1.1.3.3.1.cmml">∇</mo><msubsup id="S6.p1.1.m1.1.1.3.3.2" xref="S6.p1.1.m1.1.1.3.3.2.cmml"><mi id="S6.p1.1.m1.1.1.3.3.2.2.2" xref="S6.p1.1.m1.1.1.3.3.2.2.2.cmml">𝑾</mi><mi id="S6.p1.1.m1.1.1.3.3.2.3" xref="S6.p1.1.m1.1.1.3.3.2.3.cmml">L</mi><mi id="S6.p1.1.m1.1.1.3.3.2.2.3" xref="S6.p1.1.m1.1.1.3.3.2.2.3.cmml">i</mi></msubsup></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S6.p1.1.m1.1b"><apply id="S6.p1.1.m1.1.1.cmml" xref="S6.p1.1.m1.1.1"><eq id="S6.p1.1.m1.1.1.1.cmml" xref="S6.p1.1.m1.1.1.1"></eq><apply id="S6.p1.1.m1.1.1.2.cmml" xref="S6.p1.1.m1.1.1.2"><csymbol cd="ambiguous" id="S6.p1.1.m1.1.1.2.1.cmml" xref="S6.p1.1.m1.1.1.2">subscript</csymbol><ci id="S6.p1.1.m1.1.1.2.2.cmml" xref="S6.p1.1.m1.1.1.2.2">𝑔</ci><ci id="S6.p1.1.m1.1.1.2.3.cmml" xref="S6.p1.1.m1.1.1.2.3">𝑖</ci></apply><apply id="S6.p1.1.m1.1.1.3.cmml" xref="S6.p1.1.m1.1.1.3"><ci id="S6.p1.1.m1.1.1.3.1.cmml" xref="S6.p1.1.m1.1.1.3.1">⋅</ci><apply id="S6.p1.1.m1.1.1.3.2.cmml" xref="S6.p1.1.m1.1.1.3.2"><csymbol cd="ambiguous" id="S6.p1.1.m1.1.1.3.2.1.cmml" xref="S6.p1.1.m1.1.1.3.2">superscript</csymbol><cn type="integer" id="S6.p1.1.m1.1.1.3.2.2.cmml" xref="S6.p1.1.m1.1.1.3.2.2">1</cn><ci id="S6.p1.1.m1.1.1.3.2.3.cmml" xref="S6.p1.1.m1.1.1.3.2.3">𝑇</ci></apply><apply id="S6.p1.1.m1.1.1.3.3.cmml" xref="S6.p1.1.m1.1.1.3.3"><ci id="S6.p1.1.m1.1.1.3.3.1.cmml" xref="S6.p1.1.m1.1.1.3.3.1">∇</ci><apply id="S6.p1.1.m1.1.1.3.3.2.cmml" xref="S6.p1.1.m1.1.1.3.3.2"><csymbol cd="ambiguous" id="S6.p1.1.m1.1.1.3.3.2.1.cmml" xref="S6.p1.1.m1.1.1.3.3.2">subscript</csymbol><apply id="S6.p1.1.m1.1.1.3.3.2.2.cmml" xref="S6.p1.1.m1.1.1.3.3.2"><csymbol cd="ambiguous" id="S6.p1.1.m1.1.1.3.3.2.2.1.cmml" xref="S6.p1.1.m1.1.1.3.3.2">superscript</csymbol><ci id="S6.p1.1.m1.1.1.3.3.2.2.2.cmml" xref="S6.p1.1.m1.1.1.3.3.2.2.2">𝑾</ci><ci id="S6.p1.1.m1.1.1.3.3.2.2.3.cmml" xref="S6.p1.1.m1.1.1.3.3.2.2.3">𝑖</ci></apply><ci id="S6.p1.1.m1.1.1.3.3.2.3.cmml" xref="S6.p1.1.m1.1.1.3.3.2.3">𝐿</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.p1.1.m1.1c">g_{i}=\mathds{1}^{T}\cdot\nabla\bm{W}^{i}_{L}</annotation></semantics></math> as the gradient of label <math id="S6.p1.2.m2.1" class="ltx_Math" alttext="i" display="inline"><semantics id="S6.p1.2.m2.1a"><mi id="S6.p1.2.m2.1.1" xref="S6.p1.2.m2.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S6.p1.2.m2.1b"><ci id="S6.p1.2.m2.1.1.cmml" xref="S6.p1.2.m2.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S6.p1.2.m2.1c">i</annotation></semantics></math> in the rest of this section.
Next, we describe the experimental setting, then we discuss our results.
The source code of the experiments can be found in <a target="_blank" href="https://github.com/tklab-tud/LLG" title="" class="ltx_ref">https://github.com/tklab-tud/LLG</a>.</p>
</div>
<section id="S6.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">6.1 </span>Experimental setup</h3>

<div id="S6.SS1.p1" class="ltx_para">
<dl id="S6.I1" class="ltx_description">
<dt id="S6.I1.ix1" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span id="S6.I1.ix1.1.1.1" class="ltx_text ltx_font_bold">Default model.</span></span></dt>
<dd class="ltx_item">
<div id="S6.I1.ix1.p1" class="ltx_para">
<p id="S6.I1.ix1.p1.5" class="ltx_p">We use a CNN model with three convolutional layers (see Appendix, Table <a href="#Sx2.T2" title="Table 2 ‣ Appendix ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a>) as our default model for a classification task. The activation function is Sigmoid, and we use SGD as an optimizer with learning rate <math id="S6.I1.ix1.p1.1.m1.1" class="ltx_Math" alttext="0.1" display="inline"><semantics id="S6.I1.ix1.p1.1.m1.1a"><mn id="S6.I1.ix1.p1.1.m1.1.1" xref="S6.I1.ix1.p1.1.m1.1.1.cmml">0.1</mn><annotation-xml encoding="MathML-Content" id="S6.I1.ix1.p1.1.m1.1b"><cn type="float" id="S6.I1.ix1.p1.1.m1.1.1.cmml" xref="S6.I1.ix1.p1.1.m1.1.1">0.1</cn></annotation-xml><annotation encoding="application/x-tex" id="S6.I1.ix1.p1.1.m1.1c">0.1</annotation></semantics></math> and cross-entropy as loss function.
We use batches of varying sizes <math id="S6.I1.ix1.p1.2.m2.2" class="ltx_Math" alttext="B=2^{k}:k\in[0,7]" display="inline"><semantics id="S6.I1.ix1.p1.2.m2.2a"><mrow id="S6.I1.ix1.p1.2.m2.2.3" xref="S6.I1.ix1.p1.2.m2.2.3.cmml"><mrow id="S6.I1.ix1.p1.2.m2.2.3.2" xref="S6.I1.ix1.p1.2.m2.2.3.2.cmml"><mi id="S6.I1.ix1.p1.2.m2.2.3.2.2" xref="S6.I1.ix1.p1.2.m2.2.3.2.2.cmml">B</mi><mo id="S6.I1.ix1.p1.2.m2.2.3.2.1" xref="S6.I1.ix1.p1.2.m2.2.3.2.1.cmml">=</mo><msup id="S6.I1.ix1.p1.2.m2.2.3.2.3" xref="S6.I1.ix1.p1.2.m2.2.3.2.3.cmml"><mn id="S6.I1.ix1.p1.2.m2.2.3.2.3.2" xref="S6.I1.ix1.p1.2.m2.2.3.2.3.2.cmml">2</mn><mi id="S6.I1.ix1.p1.2.m2.2.3.2.3.3" xref="S6.I1.ix1.p1.2.m2.2.3.2.3.3.cmml">k</mi></msup></mrow><mo lspace="0.278em" rspace="0.278em" id="S6.I1.ix1.p1.2.m2.2.3.1" xref="S6.I1.ix1.p1.2.m2.2.3.1.cmml">:</mo><mrow id="S6.I1.ix1.p1.2.m2.2.3.3" xref="S6.I1.ix1.p1.2.m2.2.3.3.cmml"><mi id="S6.I1.ix1.p1.2.m2.2.3.3.2" xref="S6.I1.ix1.p1.2.m2.2.3.3.2.cmml">k</mi><mo id="S6.I1.ix1.p1.2.m2.2.3.3.1" xref="S6.I1.ix1.p1.2.m2.2.3.3.1.cmml">∈</mo><mrow id="S6.I1.ix1.p1.2.m2.2.3.3.3.2" xref="S6.I1.ix1.p1.2.m2.2.3.3.3.1.cmml"><mo stretchy="false" id="S6.I1.ix1.p1.2.m2.2.3.3.3.2.1" xref="S6.I1.ix1.p1.2.m2.2.3.3.3.1.cmml">[</mo><mn id="S6.I1.ix1.p1.2.m2.1.1" xref="S6.I1.ix1.p1.2.m2.1.1.cmml">0</mn><mo id="S6.I1.ix1.p1.2.m2.2.3.3.3.2.2" xref="S6.I1.ix1.p1.2.m2.2.3.3.3.1.cmml">,</mo><mn id="S6.I1.ix1.p1.2.m2.2.2" xref="S6.I1.ix1.p1.2.m2.2.2.cmml">7</mn><mo stretchy="false" id="S6.I1.ix1.p1.2.m2.2.3.3.3.2.3" xref="S6.I1.ix1.p1.2.m2.2.3.3.3.1.cmml">]</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S6.I1.ix1.p1.2.m2.2b"><apply id="S6.I1.ix1.p1.2.m2.2.3.cmml" xref="S6.I1.ix1.p1.2.m2.2.3"><ci id="S6.I1.ix1.p1.2.m2.2.3.1.cmml" xref="S6.I1.ix1.p1.2.m2.2.3.1">:</ci><apply id="S6.I1.ix1.p1.2.m2.2.3.2.cmml" xref="S6.I1.ix1.p1.2.m2.2.3.2"><eq id="S6.I1.ix1.p1.2.m2.2.3.2.1.cmml" xref="S6.I1.ix1.p1.2.m2.2.3.2.1"></eq><ci id="S6.I1.ix1.p1.2.m2.2.3.2.2.cmml" xref="S6.I1.ix1.p1.2.m2.2.3.2.2">𝐵</ci><apply id="S6.I1.ix1.p1.2.m2.2.3.2.3.cmml" xref="S6.I1.ix1.p1.2.m2.2.3.2.3"><csymbol cd="ambiguous" id="S6.I1.ix1.p1.2.m2.2.3.2.3.1.cmml" xref="S6.I1.ix1.p1.2.m2.2.3.2.3">superscript</csymbol><cn type="integer" id="S6.I1.ix1.p1.2.m2.2.3.2.3.2.cmml" xref="S6.I1.ix1.p1.2.m2.2.3.2.3.2">2</cn><ci id="S6.I1.ix1.p1.2.m2.2.3.2.3.3.cmml" xref="S6.I1.ix1.p1.2.m2.2.3.2.3.3">𝑘</ci></apply></apply><apply id="S6.I1.ix1.p1.2.m2.2.3.3.cmml" xref="S6.I1.ix1.p1.2.m2.2.3.3"><in id="S6.I1.ix1.p1.2.m2.2.3.3.1.cmml" xref="S6.I1.ix1.p1.2.m2.2.3.3.1"></in><ci id="S6.I1.ix1.p1.2.m2.2.3.3.2.cmml" xref="S6.I1.ix1.p1.2.m2.2.3.3.2">𝑘</ci><interval closure="closed" id="S6.I1.ix1.p1.2.m2.2.3.3.3.1.cmml" xref="S6.I1.ix1.p1.2.m2.2.3.3.3.2"><cn type="integer" id="S6.I1.ix1.p1.2.m2.1.1.cmml" xref="S6.I1.ix1.p1.2.m2.1.1">0</cn><cn type="integer" id="S6.I1.ix1.p1.2.m2.2.2.cmml" xref="S6.I1.ix1.p1.2.m2.2.2">7</cn></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I1.ix1.p1.2.m2.2c">B=2^{k}:k\in[0,7]</annotation></semantics></math>.
When applying the attack for FedSGD, we feed the model with one batch,
and we use <math id="S6.I1.ix1.p1.3.m3.1" class="ltx_Math" alttext="\gamma=10" display="inline"><semantics id="S6.I1.ix1.p1.3.m3.1a"><mrow id="S6.I1.ix1.p1.3.m3.1.1" xref="S6.I1.ix1.p1.3.m3.1.1.cmml"><mi id="S6.I1.ix1.p1.3.m3.1.1.2" xref="S6.I1.ix1.p1.3.m3.1.1.2.cmml">γ</mi><mo id="S6.I1.ix1.p1.3.m3.1.1.1" xref="S6.I1.ix1.p1.3.m3.1.1.1.cmml">=</mo><mn id="S6.I1.ix1.p1.3.m3.1.1.3" xref="S6.I1.ix1.p1.3.m3.1.1.3.cmml">10</mn></mrow><annotation-xml encoding="MathML-Content" id="S6.I1.ix1.p1.3.m3.1b"><apply id="S6.I1.ix1.p1.3.m3.1.1.cmml" xref="S6.I1.ix1.p1.3.m3.1.1"><eq id="S6.I1.ix1.p1.3.m3.1.1.1.cmml" xref="S6.I1.ix1.p1.3.m3.1.1.1"></eq><ci id="S6.I1.ix1.p1.3.m3.1.1.2.cmml" xref="S6.I1.ix1.p1.3.m3.1.1.2">𝛾</ci><cn type="integer" id="S6.I1.ix1.p1.3.m3.1.1.3.cmml" xref="S6.I1.ix1.p1.3.m3.1.1.3">10</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I1.ix1.p1.3.m3.1c">\gamma=10</annotation></semantics></math> batches for FedAvg. 
The label distribution in a batch can be <em id="S6.I1.ix1.p1.5.1" class="ltx_emph ltx_font_italic">balanced</em> or <em id="S6.I1.ix1.p1.5.2" class="ltx_emph ltx_font_italic">unbalanced</em>.
For balanced data, the samples of the batch are selected randomly from the dataset.
For unbalanced data, we select 50% of the batch samples from one random label <math id="S6.I1.ix1.p1.4.m4.1" class="ltx_Math" alttext="i" display="inline"><semantics id="S6.I1.ix1.p1.4.m4.1a"><mi id="S6.I1.ix1.p1.4.m4.1.1" xref="S6.I1.ix1.p1.4.m4.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S6.I1.ix1.p1.4.m4.1b"><ci id="S6.I1.ix1.p1.4.m4.1.1.cmml" xref="S6.I1.ix1.p1.4.m4.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S6.I1.ix1.p1.4.m4.1c">i</annotation></semantics></math> and 25% from another label <math id="S6.I1.ix1.p1.5.m5.1" class="ltx_Math" alttext="j" display="inline"><semantics id="S6.I1.ix1.p1.5.m5.1a"><mi id="S6.I1.ix1.p1.5.m5.1.1" xref="S6.I1.ix1.p1.5.m5.1.1.cmml">j</mi><annotation-xml encoding="MathML-Content" id="S6.I1.ix1.p1.5.m5.1b"><ci id="S6.I1.ix1.p1.5.m5.1.1.cmml" xref="S6.I1.ix1.p1.5.m5.1.1">𝑗</ci></annotation-xml><annotation encoding="application/x-tex" id="S6.I1.ix1.p1.5.m5.1c">j</annotation></semantics></math>.
The remaining 25% of the batch is chosen randomly.
We initialize the model with random weights and repeat each experiment 100 times, then report the mean values for analysis and discussion.</p>
</div>
</dd>
<dt id="S6.I1.ix2" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span id="S6.I1.ix2.1.1.1" class="ltx_text ltx_font_bold">Datasets.</span></span></dt>
<dd class="ltx_item">
<div id="S6.I1.ix2.p1" class="ltx_para">
<p id="S6.I1.ix2.p1.1" class="ltx_p">We conduct our experiments on four widely used benchmark datasets:
MNIST <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib20" title="" class="ltx_ref">20</a>]</cite> consists of 70,000 grey-scale images for handwritten digits, with 10 classes in total.
SVHN <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib29" title="" class="ltx_ref">29</a>]</cite> has 99,289 color images of house numbers with 10 classes.
CIFAR-100 <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib19" title="" class="ltx_ref">19</a>]</cite> contains 60,000 color images with 100 classes.
And CelebA <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib25" title="" class="ltx_ref">25</a>]</cite> is a facial attributes dataset with 202,599 images.
In our experiments, we consider only the hair color attribute with 5 classes.</p>
</div>
</dd>
<dt id="S6.I1.ix3" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span id="S6.I1.ix3.1.1.1" class="ltx_text ltx_font_bold">Threat model.</span></span></dt>
<dd class="ltx_item">
<div id="S6.I1.ix3.p1" class="ltx_para">
<p id="S6.I1.ix3.p1.1" class="ltx_p">We assume the users to train the model on real data and correct labels.
The adversary has access to the shared gradients of only one target user. 
We consider three different scenarios for the observation capabilities of the adversary (see Section <a href="#S2.SS3" title="2.3 Problem setting ‣ 2 Background ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2.3</span></a>).
Based on these scenarios, the estimation of the impact and offset parameters differs (see Section <a href="#S5.SS1" title="5.1 Attack parameters estimation ‣ 5 Label extraction ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5.1</span></a>), while the same attack applies for all.
We refer to the application of the attack under these different scenarios as follows:</p>
<ol id="S6.I1.ix3.I1" class="ltx_enumerate">
<li id="S6.I1.ix3.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span id="S6.I1.ix3.I1.i1.1.1.1" class="ltx_text ltx_font_bold">1.</span></span> 
<div id="S6.I1.ix3.I1.i1.p1" class="ltx_para">
<p id="S6.I1.ix3.I1.i1.p1.1" class="ltx_p"><span title="" class="ltx_glossaryref ltx_font_italic">LLG</span> for accessing only the shared gradients scenario.</p>
</div>
</li>
<li id="S6.I1.ix3.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span id="S6.I1.ix3.I1.i2.1.1.1" class="ltx_text ltx_font_bold">2.</span></span> 
<div id="S6.I1.ix3.I1.i2.p1" class="ltx_para">
<p id="S6.I1.ix3.I1.i2.p1.1" class="ltx_p"><span title="" class="ltx_glossaryref ltx_font_italic">LLG</span><span id="S6.I1.ix3.I1.i2.p1.1.1" class="ltx_text ltx_font_italic"> *</span> for the white-box model, where we employ various dummy images to estimate the impact and offset.
Empirically, we observed the dummy images with which the attack achieves better performance on each dataset.
This resulted in using zeros (black) images for MNIST, random pixels for SVHN, ones (white) for CIFAR, and zeros (black) for CelebA.</p>
</div>
</li>
<li id="S6.I1.ix3.I1.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span id="S6.I1.ix3.I1.i3.1.1.1" class="ltx_text ltx_font_bold">3.</span></span> 
<div id="S6.I1.ix3.I1.i3.p1" class="ltx_para">
<p id="S6.I1.ix3.I1.i3.p1.1" class="ltx_p"><span title="" class="ltx_glossaryref ltx_font_italic">LLG</span><span id="S6.I1.ix3.I1.i3.p1.1.1" class="ltx_text ltx_font_italic"> +</span> for auxiliary knowledge, where it is assumed that the adversary has access to auxiliary data that contains <math id="S6.I1.ix3.I1.i3.p1.1.m1.1" class="ltx_Math" alttext="10" display="inline"><semantics id="S6.I1.ix3.I1.i3.p1.1.m1.1a"><mn id="S6.I1.ix3.I1.i3.p1.1.m1.1.1" xref="S6.I1.ix3.I1.i3.p1.1.m1.1.1.cmml">10</mn><annotation-xml encoding="MathML-Content" id="S6.I1.ix3.I1.i3.p1.1.m1.1b"><cn type="integer" id="S6.I1.ix3.I1.i3.p1.1.m1.1.1.cmml" xref="S6.I1.ix3.I1.i3.p1.1.m1.1.1">10</cn></annotation-xml><annotation encoding="application/x-tex" id="S6.I1.ix3.I1.i3.p1.1.m1.1c">10</annotation></semantics></math> batches of images from each class.</p>
</div>
</li>
</ol>
</div>
</dd>
<dt id="S6.I1.ix4" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span id="S6.I1.ix4.1.1.1" class="ltx_text ltx_font_bold">Metrics.</span></span></dt>
<dd class="ltx_item">
<div id="S6.I1.ix4.p1" class="ltx_para">
<p id="S6.I1.ix4.p1.1" class="ltx_p">To measure the attack effectiveness, we use the <span title="" class="ltx_glossaryref">attack success rate (ASR)</span> metric <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib36" title="" class="ltx_ref">36</a>]</cite>,  which is expressed as the ratio of the correctly extracted labels over the total number of the extracted labels. We also employed the Hellinger distance <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib7" title="" class="ltx_ref">7</a>]</cite> to measure the distance between the distribution of the extracted labels and the ground-truth.
However, during our experiments, we observed that both aforementioned metrics yielded very similar measurements, therefore, we present our results only with the <span title="" class="ltx_glossaryref">ASR</span> metric.</p>
</div>
</dd>
<dt id="S6.I1.ix5" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span id="S6.I1.ix5.1.1.1" class="ltx_text ltx_font_bold">Baselines.</span></span></dt>
<dd class="ltx_item">
<div id="S6.I1.ix5.p1" class="ltx_para">
<p id="S6.I1.ix5.p1.1" class="ltx_p">We compare <span title="" class="ltx_glossaryref">LLG</span> with two baselines.
First, the DLG attack <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib41" title="" class="ltx_ref">41</a>]</cite>, which aims to reconstruct the training data and labels using an optimization approach.
For our experiments, we run DLG for <math id="S6.I1.ix5.p1.1.m1.1" class="ltx_Math" alttext="100" display="inline"><semantics id="S6.I1.ix5.p1.1.m1.1a"><mn id="S6.I1.ix5.p1.1.m1.1.1" xref="S6.I1.ix5.p1.1.m1.1.1.cmml">100</mn><annotation-xml encoding="MathML-Content" id="S6.I1.ix5.p1.1.m1.1b"><cn type="integer" id="S6.I1.ix5.p1.1.m1.1.1.cmml" xref="S6.I1.ix5.p1.1.m1.1.1">100</cn></annotation-xml><annotation encoding="application/x-tex" id="S6.I1.ix5.p1.1.m1.1c">100</annotation></semantics></math> iterations and focus only on the label reconstruction results.
We used the DLG implementation provided by Zhao et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib38" title="" class="ltx_ref">38</a>]</cite><span id="footnote2" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">2</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">2</sup><span class="ltx_tag ltx_tag_note">2</span>https://github.com/PatrickZH/Improved-Deep-Leakage-from-Gradients</span></span></span>. 
Second, we consider a uniform distribution-based random guess as a baseline.
An adversary without any shared gradients might partially succeed in guessing the existing labels frequency
by assuming that the labels distribute uniformly, especially in the case of large balanced batches.
The random guess serves as a risk assessment curve.
Having any attack performing better than the random guess means that there is information leakage.</p>
</div>
</dd>
</dl>
</div>
</section>
<section id="S6.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">6.2 </span>Attack success rate</h3>

<figure id="S6.F4" class="ltx_figure">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_1">
<figure id="S6.F4.1" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2105.09369/assets/x5.png" id="S6.F4.1.g1" class="ltx_graphics ltx_img_landscape" width="207" height="9" alt="Refer to caption">
</figure>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_4">
<figure id="S6.F4.sf1" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2105.09369/assets/x6.png" id="S6.F4.sf1.g1" class="ltx_graphics ltx_img_square" width="332" height="343" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S6.F4.sf1.2.1.1" class="ltx_text" style="font-size:90%;">(a)</span> </span><span id="S6.F4.sf1.3.2" class="ltx_text" style="font-size:90%;">MNIST - FS</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_4">
<figure id="S6.F4.sf2" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2105.09369/assets/x7.png" id="S6.F4.sf2.g1" class="ltx_graphics ltx_img_square" width="332" height="378" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S6.F4.sf2.2.1.1" class="ltx_text" style="font-size:90%;">(b)</span> </span><span id="S6.F4.sf2.3.2" class="ltx_text" style="font-size:90%;">SVHN - FS</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_4">
<figure id="S6.F4.sf3" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2105.09369/assets/x8.png" id="S6.F4.sf3.g1" class="ltx_graphics ltx_img_square" width="332" height="378" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S6.F4.sf3.2.1.1" class="ltx_text" style="font-size:90%;">(c)</span> </span><span id="S6.F4.sf3.3.2" class="ltx_text" style="font-size:90%;">CIFAR-100 - FS</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_4">
<figure id="S6.F4.sf4" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2105.09369/assets/x9.png" id="S6.F4.sf4.g1" class="ltx_graphics ltx_img_square" width="332" height="378" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S6.F4.sf4.2.1.1" class="ltx_text" style="font-size:90%;">(d)</span> </span><span id="S6.F4.sf4.3.2" class="ltx_text" style="font-size:90%;">CelebA - FS</span></figcaption>
</figure>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_4">
<figure id="S6.F4.sf5" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2105.09369/assets/x10.png" id="S6.F4.sf5.g1" class="ltx_graphics ltx_img_square" width="332" height="343" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S6.F4.sf5.2.1.1" class="ltx_text" style="font-size:90%;">(e)</span> </span><span id="S6.F4.sf5.3.2" class="ltx_text" style="font-size:90%;">MNIST - FA</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_4">
<figure id="S6.F4.sf6" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2105.09369/assets/x11.png" id="S6.F4.sf6.g1" class="ltx_graphics ltx_img_square" width="332" height="378" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S6.F4.sf6.2.1.1" class="ltx_text" style="font-size:90%;">(f)</span> </span><span id="S6.F4.sf6.3.2" class="ltx_text" style="font-size:90%;">SVHN - FA</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_4">
<figure id="S6.F4.sf7" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2105.09369/assets/x12.png" id="S6.F4.sf7.g1" class="ltx_graphics ltx_img_square" width="332" height="378" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S6.F4.sf7.2.1.1" class="ltx_text" style="font-size:90%;">(g)</span> </span><span id="S6.F4.sf7.3.2" class="ltx_text" style="font-size:90%;">CIFAR-100 - FA</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_4">
<figure id="S6.F4.sf8" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2105.09369/assets/x13.png" id="S6.F4.sf8.g1" class="ltx_graphics ltx_img_square" width="332" height="378" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S6.F4.sf8.2.1.1" class="ltx_text" style="font-size:90%;">(h)</span> </span><span id="S6.F4.sf8.3.2" class="ltx_text" style="font-size:90%;">CelebA - FA</span></figcaption>
</figure>
</div>
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S6.F4.5.2.1" class="ltx_text" style="font-size:90%;">Figure 4</span>: </span><span id="S6.F4.3.1" class="ltx_text" style="font-size:80%;">Attack success rate of (1) LLG with shared gradients, (2) LLG* with white-box model, (3) LLG+ with auxiliary knowledge, (4) DLG <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib41" title="" class="ltx_ref">41</a>]</cite>, and (5) random guess on MNIST, SVHN, CIFAR-100, and CelebA. Label extraction is based on gradients generated from passing (1) one batch for FedSGD (FS) in the first row, and (2) <math id="S6.F4.3.1.m1.1" class="ltx_Math" alttext="10" display="inline"><semantics id="S6.F4.3.1.m1.1b"><mn id="S6.F4.3.1.m1.1.1" xref="S6.F4.3.1.m1.1.1.cmml">10</mn><annotation-xml encoding="MathML-Content" id="S6.F4.3.1.m1.1c"><cn type="integer" id="S6.F4.3.1.m1.1.1.cmml" xref="S6.F4.3.1.m1.1.1">10</cn></annotation-xml><annotation encoding="application/x-tex" id="S6.F4.3.1.m1.1d">10</annotation></semantics></math> batches for FedAvg (FA) in the second row, to a randomly initialized CNN. DLG runs for 100 iterations. LLG methods outperform the baselines in most of the cases. </span></figcaption>
</figure>
<div id="S6.SS2.p1" class="ltx_para">
<p id="S6.SS2.p1.2" class="ltx_p">We run our experiments under two <span title="" class="ltx_glossaryref">FL</span> algorithms, namely, FedSGD and FedAvg <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib27" title="" class="ltx_ref">27</a>]</cite>.
For FedSGD, we pass one batch to the model and attack the generated gradients.
While for FedAvg, we feed the model with <math id="S6.SS2.p1.1.m1.1" class="ltx_Math" alttext="10" display="inline"><semantics id="S6.SS2.p1.1.m1.1a"><mn id="S6.SS2.p1.1.m1.1.1" xref="S6.SS2.p1.1.m1.1.1.cmml">10</mn><annotation-xml encoding="MathML-Content" id="S6.SS2.p1.1.m1.1b"><cn type="integer" id="S6.SS2.p1.1.m1.1.1.cmml" xref="S6.SS2.p1.1.m1.1.1">10</cn></annotation-xml><annotation encoding="application/x-tex" id="S6.SS2.p1.1.m1.1c">10</annotation></semantics></math> batches and attack the aggregated gradients, i.e., the sum of the gradients over <math id="S6.SS2.p1.2.m2.1" class="ltx_Math" alttext="10" display="inline"><semantics id="S6.SS2.p1.2.m2.1a"><mn id="S6.SS2.p1.2.m2.1.1" xref="S6.SS2.p1.2.m2.1.1.cmml">10</mn><annotation-xml encoding="MathML-Content" id="S6.SS2.p1.2.m2.1b"><cn type="integer" id="S6.SS2.p1.2.m2.1.1.cmml" xref="S6.SS2.p1.2.m2.1.1">10</cn></annotation-xml><annotation encoding="application/x-tex" id="S6.SS2.p1.2.m2.1c">10</annotation></semantics></math> iterations. 
During our experiments, we observed a very limited difference in the <span title="" class="ltx_glossaryref">ASR</span> of the <span title="" class="ltx_glossaryref">LLG</span> attacks for balanced and unbalanced batches.
Therefore, and because the unbalanced data is closer to real-world scenarios <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib27" title="" class="ltx_ref">27</a>]</cite>, we focus on presenting the results of the unbalanced data case, 
while providing a part of the balanced data results (for FedSGD) in the Appendix, Figure <a href="#Sx2.F8" title="Figure 8 ‣ Appendix ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">8</span></a>.</p>
</div>
<figure id="S6.F5" class="ltx_figure">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S6.F5.1" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2105.09369/assets/x14.png" id="S6.F5.1.g1" class="ltx_graphics ltx_img_portrait" width="462" height="1222" alt="Refer to caption">
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S6.F5.sf1" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2105.09369/assets/x15.png" id="S6.F5.sf1.g1" class="ltx_graphics ltx_img_landscape" width="332" height="252" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S6.F5.sf1.2.1.1" class="ltx_text" style="font-size:90%;">(a)</span> </span><span id="S6.F5.sf1.3.2" class="ltx_text" style="font-size:90%;">FS</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S6.F5.sf2" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2105.09369/assets/x16.png" id="S6.F5.sf2.g1" class="ltx_graphics ltx_img_landscape" width="332" height="267" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S6.F5.sf2.2.1.1" class="ltx_text" style="font-size:90%;">(b)</span> </span><span id="S6.F5.sf2.3.2" class="ltx_text" style="font-size:90%;">FA</span></figcaption>
</figure>
</div>
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S6.F5.5.2.1" class="ltx_text" style="font-size:90%;">Figure 5</span>: </span><span id="S6.F5.3.1" class="ltx_text" style="font-size:80%;">Attack success rate of <span title="" class="ltx_glossaryref">LLG</span> + and DLG on unbalanced batches of different sizes from MNIST with different model architectures: CNN, LeNet, ResNet20.
For FedSGD (FS),  <span title="" class="ltx_glossaryref">LLG</span> + achieves around 100% accuracy on CNN and LeNet while its accuracy slightly decreases on ResNet20. DLG achieves <math id="S6.F5.3.1.m1.1" class="ltx_Math" alttext="&gt;80\%" display="inline"><semantics id="S6.F5.3.1.m1.1b"><mrow id="S6.F5.3.1.m1.1.1" xref="S6.F5.3.1.m1.1.1.cmml"><mi id="S6.F5.3.1.m1.1.1.2" xref="S6.F5.3.1.m1.1.1.2.cmml"></mi><mo id="S6.F5.3.1.m1.1.1.1" xref="S6.F5.3.1.m1.1.1.1.cmml">&gt;</mo><mrow id="S6.F5.3.1.m1.1.1.3" xref="S6.F5.3.1.m1.1.1.3.cmml"><mn id="S6.F5.3.1.m1.1.1.3.2" xref="S6.F5.3.1.m1.1.1.3.2.cmml">80</mn><mo id="S6.F5.3.1.m1.1.1.3.1" xref="S6.F5.3.1.m1.1.1.3.1.cmml">%</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S6.F5.3.1.m1.1c"><apply id="S6.F5.3.1.m1.1.1.cmml" xref="S6.F5.3.1.m1.1.1"><gt id="S6.F5.3.1.m1.1.1.1.cmml" xref="S6.F5.3.1.m1.1.1.1"></gt><csymbol cd="latexml" id="S6.F5.3.1.m1.1.1.2.cmml" xref="S6.F5.3.1.m1.1.1.2">absent</csymbol><apply id="S6.F5.3.1.m1.1.1.3.cmml" xref="S6.F5.3.1.m1.1.1.3"><csymbol cd="latexml" id="S6.F5.3.1.m1.1.1.3.1.cmml" xref="S6.F5.3.1.m1.1.1.3.1">percent</csymbol><cn type="integer" id="S6.F5.3.1.m1.1.1.3.2.cmml" xref="S6.F5.3.1.m1.1.1.3.2">80</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.F5.3.1.m1.1d">&gt;80\%</annotation></semantics></math> for most batch sizes on CNN, while drops remarkably on more complex architectures i.e. LeNet and ResNet20. 
For FedAvg (FA), the ASR of <span title="" class="ltx_glossaryref">LLG</span> + is slightly different form architecture to another, while DLG shows higher sensitivity to the architectures.  </span></figcaption>
</figure>
<div id="S6.SS2.p2" class="ltx_para">
<dl id="S6.I2" class="ltx_description">
<dt id="S6.I2.ix1" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span id="S6.I2.ix1.1.1.1" class="ltx_text ltx_font_bold">FedSGD.</span></span></dt>
<dd class="ltx_item">
<div id="S6.I2.ix1.p1" class="ltx_para">
<p id="S6.I2.ix1.p1.6" class="ltx_p">Figures <a href="#S6.F4" title="Figure 4 ‣ 6.2 Attack success rate ‣ 6 Empirical evaluation ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4</span></a> (a-d) illustrate the <span title="" class="ltx_glossaryref">ASR</span> scores (y-axis) with batches of different sizes (x-axis).
We can see that all <span title="" class="ltx_glossaryref">LLG</span> variants show some level of <span title="" class="ltx_glossaryref">ASR</span> degradation when the batch size increases.
However, it appears to be stabilized to some extent for bigger batches, e.g., <math id="S6.I2.ix1.p1.1.m1.1" class="ltx_Math" alttext="64" display="inline"><semantics id="S6.I2.ix1.p1.1.m1.1a"><mn id="S6.I2.ix1.p1.1.m1.1.1" xref="S6.I2.ix1.p1.1.m1.1.1.cmml">64</mn><annotation-xml encoding="MathML-Content" id="S6.I2.ix1.p1.1.m1.1b"><cn type="integer" id="S6.I2.ix1.p1.1.m1.1.1.cmml" xref="S6.I2.ix1.p1.1.m1.1.1">64</cn></annotation-xml><annotation encoding="application/x-tex" id="S6.I2.ix1.p1.1.m1.1c">64</annotation></semantics></math> and <math id="S6.I2.ix1.p1.2.m2.1" class="ltx_Math" alttext="128" display="inline"><semantics id="S6.I2.ix1.p1.2.m2.1a"><mn id="S6.I2.ix1.p1.2.m2.1.1" xref="S6.I2.ix1.p1.2.m2.1.1.cmml">128</mn><annotation-xml encoding="MathML-Content" id="S6.I2.ix1.p1.2.m2.1b"><cn type="integer" id="S6.I2.ix1.p1.2.m2.1.1.cmml" xref="S6.I2.ix1.p1.2.m2.1.1">128</cn></annotation-xml><annotation encoding="application/x-tex" id="S6.I2.ix1.p1.2.m2.1c">128</annotation></semantics></math>.
This is due to the fact that the first step of the algorithm (see Section <a href="#S5.SS2" title="5.2 Label leakage from gradients attack ‣ 5 Label extraction ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5.2</span></a>) is based on Property 1 and yields 100% correct labels.
This step extracts a maximum of <math id="S6.I2.ix1.p1.3.m3.1" class="ltx_Math" alttext="n" display="inline"><semantics id="S6.I2.ix1.p1.3.m3.1a"><mi id="S6.I2.ix1.p1.3.m3.1.1" xref="S6.I2.ix1.p1.3.m3.1.1.cmml">n</mi><annotation-xml encoding="MathML-Content" id="S6.I2.ix1.p1.3.m3.1b"><ci id="S6.I2.ix1.p1.3.m3.1.1.cmml" xref="S6.I2.ix1.p1.3.m3.1.1">𝑛</ci></annotation-xml><annotation encoding="application/x-tex" id="S6.I2.ix1.p1.3.m3.1c">n</annotation></semantics></math> labels.
Thus, its results are dominant when <math id="S6.I2.ix1.p1.4.m4.1" class="ltx_Math" alttext="B\leq n" display="inline"><semantics id="S6.I2.ix1.p1.4.m4.1a"><mrow id="S6.I2.ix1.p1.4.m4.1.1" xref="S6.I2.ix1.p1.4.m4.1.1.cmml"><mi id="S6.I2.ix1.p1.4.m4.1.1.2" xref="S6.I2.ix1.p1.4.m4.1.1.2.cmml">B</mi><mo id="S6.I2.ix1.p1.4.m4.1.1.1" xref="S6.I2.ix1.p1.4.m4.1.1.1.cmml">≤</mo><mi id="S6.I2.ix1.p1.4.m4.1.1.3" xref="S6.I2.ix1.p1.4.m4.1.1.3.cmml">n</mi></mrow><annotation-xml encoding="MathML-Content" id="S6.I2.ix1.p1.4.m4.1b"><apply id="S6.I2.ix1.p1.4.m4.1.1.cmml" xref="S6.I2.ix1.p1.4.m4.1.1"><leq id="S6.I2.ix1.p1.4.m4.1.1.1.cmml" xref="S6.I2.ix1.p1.4.m4.1.1.1"></leq><ci id="S6.I2.ix1.p1.4.m4.1.1.2.cmml" xref="S6.I2.ix1.p1.4.m4.1.1.2">𝐵</ci><ci id="S6.I2.ix1.p1.4.m4.1.1.3.cmml" xref="S6.I2.ix1.p1.4.m4.1.1.3">𝑛</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I2.ix1.p1.4.m4.1c">B\leq n</annotation></semantics></math>.
Where as if <math id="S6.I2.ix1.p1.5.m5.1" class="ltx_Math" alttext="B&gt;n" display="inline"><semantics id="S6.I2.ix1.p1.5.m5.1a"><mrow id="S6.I2.ix1.p1.5.m5.1.1" xref="S6.I2.ix1.p1.5.m5.1.1.cmml"><mi id="S6.I2.ix1.p1.5.m5.1.1.2" xref="S6.I2.ix1.p1.5.m5.1.1.2.cmml">B</mi><mo id="S6.I2.ix1.p1.5.m5.1.1.1" xref="S6.I2.ix1.p1.5.m5.1.1.1.cmml">&gt;</mo><mi id="S6.I2.ix1.p1.5.m5.1.1.3" xref="S6.I2.ix1.p1.5.m5.1.1.3.cmml">n</mi></mrow><annotation-xml encoding="MathML-Content" id="S6.I2.ix1.p1.5.m5.1b"><apply id="S6.I2.ix1.p1.5.m5.1.1.cmml" xref="S6.I2.ix1.p1.5.m5.1.1"><gt id="S6.I2.ix1.p1.5.m5.1.1.1.cmml" xref="S6.I2.ix1.p1.5.m5.1.1.1"></gt><ci id="S6.I2.ix1.p1.5.m5.1.1.2.cmml" xref="S6.I2.ix1.p1.5.m5.1.1.2">𝐵</ci><ci id="S6.I2.ix1.p1.5.m5.1.1.3.cmml" xref="S6.I2.ix1.p1.5.m5.1.1.3">𝑛</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I2.ix1.p1.5.m5.1c">B&gt;n</annotation></semantics></math>, the second and third steps, which are based on heuristic estimations, contribute more to the final extracted labels.
As a result, we notice a degradation of the <span title="" class="ltx_glossaryref">ASR</span>.
However, the different batch sizes do not seem to massively affect the correctness of the results of these steps.
This might be explained by the fact that the batch size <math id="S6.I2.ix1.p1.6.m6.1" class="ltx_Math" alttext="B" display="inline"><semantics id="S6.I2.ix1.p1.6.m6.1a"><mi id="S6.I2.ix1.p1.6.m6.1.1" xref="S6.I2.ix1.p1.6.m6.1.1.cmml">B</mi><annotation-xml encoding="MathML-Content" id="S6.I2.ix1.p1.6.m6.1b"><ci id="S6.I2.ix1.p1.6.m6.1.1.cmml" xref="S6.I2.ix1.p1.6.m6.1.1">𝐵</ci></annotation-xml><annotation encoding="application/x-tex" id="S6.I2.ix1.p1.6.m6.1c">B</annotation></semantics></math> is always considered as a parameter in the heuristic estimations of the impact and offset.</p>
</div>
<div id="S6.I2.ix1.p2" class="ltx_para">
<p id="S6.I2.ix1.p2.1" class="ltx_p">Overall, <span title="" class="ltx_glossaryref">LLG</span> + outperforms all the other <span title="" class="ltx_glossaryref">LLG</span> variants and DLG.
The <span title="" class="ltx_glossaryref">LLG</span> and <span title="" class="ltx_glossaryref">LLG</span> * scores range from 100% to a minimum of 77% across the different datasets.
Whereas <span title="" class="ltx_glossaryref">LLG</span> + remarkably exhibits a high level of stability for various batch sizes and number of classes (in datasets) with an <math id="S6.I2.ix1.p2.1.m1.1" class="ltx_Math" alttext="ASR&gt;98\%" display="inline"><semantics id="S6.I2.ix1.p2.1.m1.1a"><mrow id="S6.I2.ix1.p2.1.m1.1.1" xref="S6.I2.ix1.p2.1.m1.1.1.cmml"><mrow id="S6.I2.ix1.p2.1.m1.1.1.2" xref="S6.I2.ix1.p2.1.m1.1.1.2.cmml"><mi id="S6.I2.ix1.p2.1.m1.1.1.2.2" xref="S6.I2.ix1.p2.1.m1.1.1.2.2.cmml">A</mi><mo lspace="0em" rspace="0em" id="S6.I2.ix1.p2.1.m1.1.1.2.1" xref="S6.I2.ix1.p2.1.m1.1.1.2.1.cmml">​</mo><mi id="S6.I2.ix1.p2.1.m1.1.1.2.3" xref="S6.I2.ix1.p2.1.m1.1.1.2.3.cmml">S</mi><mo lspace="0em" rspace="0em" id="S6.I2.ix1.p2.1.m1.1.1.2.1a" xref="S6.I2.ix1.p2.1.m1.1.1.2.1.cmml">​</mo><mi id="S6.I2.ix1.p2.1.m1.1.1.2.4" xref="S6.I2.ix1.p2.1.m1.1.1.2.4.cmml">R</mi></mrow><mo id="S6.I2.ix1.p2.1.m1.1.1.1" xref="S6.I2.ix1.p2.1.m1.1.1.1.cmml">&gt;</mo><mrow id="S6.I2.ix1.p2.1.m1.1.1.3" xref="S6.I2.ix1.p2.1.m1.1.1.3.cmml"><mn id="S6.I2.ix1.p2.1.m1.1.1.3.2" xref="S6.I2.ix1.p2.1.m1.1.1.3.2.cmml">98</mn><mo id="S6.I2.ix1.p2.1.m1.1.1.3.1" xref="S6.I2.ix1.p2.1.m1.1.1.3.1.cmml">%</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S6.I2.ix1.p2.1.m1.1b"><apply id="S6.I2.ix1.p2.1.m1.1.1.cmml" xref="S6.I2.ix1.p2.1.m1.1.1"><gt id="S6.I2.ix1.p2.1.m1.1.1.1.cmml" xref="S6.I2.ix1.p2.1.m1.1.1.1"></gt><apply id="S6.I2.ix1.p2.1.m1.1.1.2.cmml" xref="S6.I2.ix1.p2.1.m1.1.1.2"><times id="S6.I2.ix1.p2.1.m1.1.1.2.1.cmml" xref="S6.I2.ix1.p2.1.m1.1.1.2.1"></times><ci id="S6.I2.ix1.p2.1.m1.1.1.2.2.cmml" xref="S6.I2.ix1.p2.1.m1.1.1.2.2">𝐴</ci><ci id="S6.I2.ix1.p2.1.m1.1.1.2.3.cmml" xref="S6.I2.ix1.p2.1.m1.1.1.2.3">𝑆</ci><ci id="S6.I2.ix1.p2.1.m1.1.1.2.4.cmml" xref="S6.I2.ix1.p2.1.m1.1.1.2.4">𝑅</ci></apply><apply id="S6.I2.ix1.p2.1.m1.1.1.3.cmml" xref="S6.I2.ix1.p2.1.m1.1.1.3"><csymbol cd="latexml" id="S6.I2.ix1.p2.1.m1.1.1.3.1.cmml" xref="S6.I2.ix1.p2.1.m1.1.1.3.1">percent</csymbol><cn type="integer" id="S6.I2.ix1.p2.1.m1.1.1.3.2.cmml" xref="S6.I2.ix1.p2.1.m1.1.1.3.2">98</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I2.ix1.p2.1.m1.1c">ASR&gt;98\%</annotation></semantics></math>.
This mainly reflects the quality of our estimation methods for impact and offset.</p>
</div>
<div id="S6.I2.ix1.p3" class="ltx_para">
<p id="S6.I2.ix1.p3.1" class="ltx_p">In contrast, <span title="" class="ltx_glossaryref">DLG</span> achieves varying accuracy scores. However,
no clear behavior can be concluded w.r.t. the changes in the batch sizes. 
This might be due to the fact that <span title="" class="ltx_glossaryref">DLG</span> requires a training phase, which is highly sensitive to model initialization, i.e., it might fail to converge for some randomly initialized models or might take different amounts of time for reaching a specific accuracy, unlike <span title="" class="ltx_glossaryref">LLG</span>, which yields more deterministic results, while at the same time being orders of magnitude faster.
For example, the execution time of those experiments illustrated in Figure <a href="#S6.F4" title="Figure 4 ‣ 6.2 Attack success rate ‣ 6 Empirical evaluation ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4</span></a> (a) is as follows: LLG 54s, LLG* 32.2m, LLG+ 14.6m, DLG 17.4h, and Random 50s, using a Tesla GPU V100-SXM3-32GB.
It is worth mentioning that LLG* requires more time than LLG+ due to the dummy images generation.</p>
</div>
<div id="S6.I2.ix1.p4" class="ltx_para">
<p id="S6.I2.ix1.p4.1" class="ltx_p">The <span title="" class="ltx_glossaryref">ASR</span> of each <span title="" class="ltx_glossaryref">LLG</span> attack is similar to some extent on MNIST and SVHN respectively.
This can be explained by the fact that both datasets have the same number of classes, i.e. 10.
On CIFAR-100 (100 classes), interestingly, we notice that <span title="" class="ltx_glossaryref">LLG</span> performs quite closely to <span title="" class="ltx_glossaryref">LLG</span> + (both have <math id="S6.I2.ix1.p4.1.m1.1" class="ltx_Math" alttext="ASR&gt;96\%" display="inline"><semantics id="S6.I2.ix1.p4.1.m1.1a"><mrow id="S6.I2.ix1.p4.1.m1.1.1" xref="S6.I2.ix1.p4.1.m1.1.1.cmml"><mrow id="S6.I2.ix1.p4.1.m1.1.1.2" xref="S6.I2.ix1.p4.1.m1.1.1.2.cmml"><mi id="S6.I2.ix1.p4.1.m1.1.1.2.2" xref="S6.I2.ix1.p4.1.m1.1.1.2.2.cmml">A</mi><mo lspace="0em" rspace="0em" id="S6.I2.ix1.p4.1.m1.1.1.2.1" xref="S6.I2.ix1.p4.1.m1.1.1.2.1.cmml">​</mo><mi id="S6.I2.ix1.p4.1.m1.1.1.2.3" xref="S6.I2.ix1.p4.1.m1.1.1.2.3.cmml">S</mi><mo lspace="0em" rspace="0em" id="S6.I2.ix1.p4.1.m1.1.1.2.1a" xref="S6.I2.ix1.p4.1.m1.1.1.2.1.cmml">​</mo><mi id="S6.I2.ix1.p4.1.m1.1.1.2.4" xref="S6.I2.ix1.p4.1.m1.1.1.2.4.cmml">R</mi></mrow><mo id="S6.I2.ix1.p4.1.m1.1.1.1" xref="S6.I2.ix1.p4.1.m1.1.1.1.cmml">&gt;</mo><mrow id="S6.I2.ix1.p4.1.m1.1.1.3" xref="S6.I2.ix1.p4.1.m1.1.1.3.cmml"><mn id="S6.I2.ix1.p4.1.m1.1.1.3.2" xref="S6.I2.ix1.p4.1.m1.1.1.3.2.cmml">96</mn><mo id="S6.I2.ix1.p4.1.m1.1.1.3.1" xref="S6.I2.ix1.p4.1.m1.1.1.3.1.cmml">%</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S6.I2.ix1.p4.1.m1.1b"><apply id="S6.I2.ix1.p4.1.m1.1.1.cmml" xref="S6.I2.ix1.p4.1.m1.1.1"><gt id="S6.I2.ix1.p4.1.m1.1.1.1.cmml" xref="S6.I2.ix1.p4.1.m1.1.1.1"></gt><apply id="S6.I2.ix1.p4.1.m1.1.1.2.cmml" xref="S6.I2.ix1.p4.1.m1.1.1.2"><times id="S6.I2.ix1.p4.1.m1.1.1.2.1.cmml" xref="S6.I2.ix1.p4.1.m1.1.1.2.1"></times><ci id="S6.I2.ix1.p4.1.m1.1.1.2.2.cmml" xref="S6.I2.ix1.p4.1.m1.1.1.2.2">𝐴</ci><ci id="S6.I2.ix1.p4.1.m1.1.1.2.3.cmml" xref="S6.I2.ix1.p4.1.m1.1.1.2.3">𝑆</ci><ci id="S6.I2.ix1.p4.1.m1.1.1.2.4.cmml" xref="S6.I2.ix1.p4.1.m1.1.1.2.4">𝑅</ci></apply><apply id="S6.I2.ix1.p4.1.m1.1.1.3.cmml" xref="S6.I2.ix1.p4.1.m1.1.1.3"><csymbol cd="latexml" id="S6.I2.ix1.p4.1.m1.1.1.3.1.cmml" xref="S6.I2.ix1.p4.1.m1.1.1.3.1">percent</csymbol><cn type="integer" id="S6.I2.ix1.p4.1.m1.1.1.3.2.cmml" xref="S6.I2.ix1.p4.1.m1.1.1.3.2">96</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I2.ix1.p4.1.m1.1c">ASR&gt;96\%</annotation></semantics></math>), as shown in Figure <a href="#S6.F4" title="Figure 4 ‣ 6.2 Attack success rate ‣ 6 Empirical evaluation ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4</span></a> (c), while it drops to around 75% on CelebA (5 classes).
This observation suggests that <span title="" class="ltx_glossaryref">LLG</span> performs better for datasets with a bigger number of classes.
This can be explained by the fact that <span title="" class="ltx_glossaryref">LLG</span> solely depends on the quality of the impact parameter, which is derived from Eq. (<a href="#S4.E15" title="In Proof ‣ 4 Gradient analysis ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">15</span></a>) under the assumption that the untrained model performs poorly.
This assumption is more valid when the number of classes is bigger, as we explained earlier in the proof of Property 2, Section <a href="#S4" title="4 Gradient analysis ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4</span></a>.
Therefore, the estimation of the impact yields better results leading to higher <span title="" class="ltx_glossaryref">ASR</span>.</p>
</div>
<div id="S6.I2.ix1.p5" class="ltx_para">
<p id="S6.I2.ix1.p5.1" class="ltx_p"><span title="" class="ltx_glossaryref">LLG</span> *, with its dummy data for the parameter estimation, shows a notable drop on CIFAR-100.
It is known that the complexity of CIFAR-100 images is higher than the one of MNIST and SVHN.
Therefore, we can conclude that the complexity of the dataset might influence <span title="" class="ltx_glossaryref">LLG</span> * in a negative way, while it has no observable effect on <span title="" class="ltx_glossaryref">LLG</span> and <span title="" class="ltx_glossaryref">LLG</span> +.

For DLG, we notice in Figure <a href="#S6.F4" title="Figure 4 ‣ 6.2 Attack success rate ‣ 6 Empirical evaluation ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4</span></a> (d) a remarkable decrease in accuracy on CelebA.
This can be due to the fact that the images are of higher dimensions (<math id="S6.I2.ix1.p5.1.m1.1" class="ltx_Math" alttext="178\times 218" display="inline"><semantics id="S6.I2.ix1.p5.1.m1.1a"><mrow id="S6.I2.ix1.p5.1.m1.1.1" xref="S6.I2.ix1.p5.1.m1.1.1.cmml"><mn id="S6.I2.ix1.p5.1.m1.1.1.2" xref="S6.I2.ix1.p5.1.m1.1.1.2.cmml">178</mn><mo lspace="0.222em" rspace="0.222em" id="S6.I2.ix1.p5.1.m1.1.1.1" xref="S6.I2.ix1.p5.1.m1.1.1.1.cmml">×</mo><mn id="S6.I2.ix1.p5.1.m1.1.1.3" xref="S6.I2.ix1.p5.1.m1.1.1.3.cmml">218</mn></mrow><annotation-xml encoding="MathML-Content" id="S6.I2.ix1.p5.1.m1.1b"><apply id="S6.I2.ix1.p5.1.m1.1.1.cmml" xref="S6.I2.ix1.p5.1.m1.1.1"><times id="S6.I2.ix1.p5.1.m1.1.1.1.cmml" xref="S6.I2.ix1.p5.1.m1.1.1.1"></times><cn type="integer" id="S6.I2.ix1.p5.1.m1.1.1.2.cmml" xref="S6.I2.ix1.p5.1.m1.1.1.2">178</cn><cn type="integer" id="S6.I2.ix1.p5.1.m1.1.1.3.cmml" xref="S6.I2.ix1.p5.1.m1.1.1.3">218</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I2.ix1.p5.1.m1.1c">178\times 218</annotation></semantics></math>), unlike the other datasets.
Thus, the convergence of the attack is much more difficult.</p>
</div>
</dd>
<dt id="S6.I2.ix2" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span id="S6.I2.ix2.1.1.1" class="ltx_text ltx_font_bold">FedAvg.</span></span></dt>
<dd class="ltx_item">
<div id="S6.I2.ix2.p1" class="ltx_para">
<p id="S6.I2.ix2.p1.3" class="ltx_p">In Figures <a href="#S6.F4" title="Figure 4 ‣ 6.2 Attack success rate ‣ 6 Empirical evaluation ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4</span></a> (e-h), we can see that the <span title="" class="ltx_glossaryref">ASRs</span> of all the <span title="" class="ltx_glossaryref">LLG</span> variants considerably decrease comparing with FedSGD, ranging between <math id="S6.I2.ix2.p1.1.m1.1" class="ltx_Math" alttext="55\%" display="inline"><semantics id="S6.I2.ix2.p1.1.m1.1a"><mrow id="S6.I2.ix2.p1.1.m1.1.1" xref="S6.I2.ix2.p1.1.m1.1.1.cmml"><mn id="S6.I2.ix2.p1.1.m1.1.1.2" xref="S6.I2.ix2.p1.1.m1.1.1.2.cmml">55</mn><mo id="S6.I2.ix2.p1.1.m1.1.1.1" xref="S6.I2.ix2.p1.1.m1.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S6.I2.ix2.p1.1.m1.1b"><apply id="S6.I2.ix2.p1.1.m1.1.1.cmml" xref="S6.I2.ix2.p1.1.m1.1.1"><csymbol cd="latexml" id="S6.I2.ix2.p1.1.m1.1.1.1.cmml" xref="S6.I2.ix2.p1.1.m1.1.1.1">percent</csymbol><cn type="integer" id="S6.I2.ix2.p1.1.m1.1.1.2.cmml" xref="S6.I2.ix2.p1.1.m1.1.1.2">55</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I2.ix2.p1.1.m1.1c">55\%</annotation></semantics></math> and <math id="S6.I2.ix2.p1.2.m2.1" class="ltx_Math" alttext="90\%" display="inline"><semantics id="S6.I2.ix2.p1.2.m2.1a"><mrow id="S6.I2.ix2.p1.2.m2.1.1" xref="S6.I2.ix2.p1.2.m2.1.1.cmml"><mn id="S6.I2.ix2.p1.2.m2.1.1.2" xref="S6.I2.ix2.p1.2.m2.1.1.2.cmml">90</mn><mo id="S6.I2.ix2.p1.2.m2.1.1.1" xref="S6.I2.ix2.p1.2.m2.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S6.I2.ix2.p1.2.m2.1b"><apply id="S6.I2.ix2.p1.2.m2.1.1.cmml" xref="S6.I2.ix2.p1.2.m2.1.1"><csymbol cd="latexml" id="S6.I2.ix2.p1.2.m2.1.1.1.cmml" xref="S6.I2.ix2.p1.2.m2.1.1.1">percent</csymbol><cn type="integer" id="S6.I2.ix2.p1.2.m2.1.1.2.cmml" xref="S6.I2.ix2.p1.2.m2.1.1.2">90</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I2.ix2.p1.2.m2.1c">90\%</annotation></semantics></math>.
This is expected as the shared gradients are generated from multiple iterations (<math id="S6.I2.ix2.p1.3.m3.1" class="ltx_Math" alttext="10" display="inline"><semantics id="S6.I2.ix2.p1.3.m3.1a"><mn id="S6.I2.ix2.p1.3.m3.1.1" xref="S6.I2.ix2.p1.3.m3.1.1.cmml">10</mn><annotation-xml encoding="MathML-Content" id="S6.I2.ix2.p1.3.m3.1b"><cn type="integer" id="S6.I2.ix2.p1.3.m3.1.1.cmml" xref="S6.I2.ix2.p1.3.m3.1.1">10</cn></annotation-xml><annotation encoding="application/x-tex" id="S6.I2.ix2.p1.3.m3.1c">10</annotation></semantics></math> batches).
Thus, the correlation between the gradient values and label occurrences is less prominent.
In other words, the gradients are accumulated several times over iterations, such that the correlation (Property 1 and 2) become more difficult to detect and exploit.
However, the <span title="" class="ltx_glossaryref">LLG</span> attacks achieve higher <span title="" class="ltx_glossaryref">ASRs</span> than the random guess on all the datasets, thus, they are still posing a serious threat.
The superiority of <span title="" class="ltx_glossaryref">LLG</span> + is maintained on CIFAR-100 and CelebA, while in MNIST and SVHN, <span title="" class="ltx_glossaryref">LLG</span> * and DLG surprisingly perform the best.</p>
</div>
</dd>
</dl>
</div>
</section>
<section id="S6.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">6.3 </span>Model architecture</h3>

<div id="S6.SS3.p1" class="ltx_para">
<p id="S6.SS3.p1.1" class="ltx_p">Here, we study the influence of the model architecture on the studied attacks;
for that, we consider two models besides our default <span title="" class="ltx_glossaryref">CNN</span>:

<span id="S6.I3" class="ltx_inline-enumerate">
<span id="S6.I3.i1" class="ltx_inline-item"><span class="ltx_tag ltx_tag_inline-item">(1)</span> <span id="S6.I3.i1.1" class="ltx_text">LeNet <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib20" title="" class="ltx_ref">20</a>]</cite>, a basic <span title="" class="ltx_glossaryref">CNN</span> that contains 3 convolutional layers with 2 maximum pooling layers as shown in the Appendix, Table <a href="#Sx2.T3" title="Table 3 ‣ Appendix ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a>.
</span></span>
<span id="S6.I3.i2" class="ltx_inline-item"><span class="ltx_tag ltx_tag_inline-item">(2)</span> <span id="S6.I3.i2.1" class="ltx_text">ResNet20 <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib16" title="" class="ltx_ref">16</a>]</cite>, a successful residual architecture with convolutions, which introduces the concept of <span id="S6.I3.i2.1.1" class="ltx_text ltx_inline-quote ltx_outerquote">“identity shortcut connection”</span> that skips one or more layers to avoid the problem of vanishing gradients in deep neural architectures.
ResNet20 contains 20 layers in total: 9 convolutional layers, 9 batch normalization, and 2 linear layers.
</span></span>
</span></p>
</div>
<div id="S6.SS3.p2" class="ltx_para">
<p id="S6.SS3.p2.1" class="ltx_p">Both aforementioned architectures, alongside their principal components, namely, convolutions and residual blocks, have achieved and contributed to state-of-the-art results on several classification tasks.</p>
</div>
<div id="S6.SS3.p3" class="ltx_para">
<p id="S6.SS3.p3.1" class="ltx_p">The two main conditions for Property 1 to hold are:

<span id="S6.I4" class="ltx_inline-enumerate">
<span id="S6.I4.i1" class="ltx_inline-item"><span class="ltx_tag ltx_tag_inline-item">(1)</span> <span id="S6.I4.i1.1" class="ltx_text">using the cross-entropy loss and
</span></span>
<span id="S6.I4.i2" class="ltx_inline-item"><span class="ltx_tag ltx_tag_inline-item">(2)</span> <span id="S6.I4.i2.1" class="ltx_text">having a non-negative activation function in the last layer before the output.
</span></span>
</span>
Thus, we assume the labels extracted in the first step of the attack (see Algorithm <a href="#algorithm1" title="In 5.2 Label leakage from gradients attack ‣ 5 Label extraction ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>, Line 1-5) based on this property to be correct regardless of the rest of the model architecture.
While the next steps of <span title="" class="ltx_glossaryref">LLG</span> are based on the impact, offset, and their estimations, which might be of different accuracy from one model architecture to another.  To run our analysis, we use MNIST with varying batch sizes and measure the <span title="" class="ltx_glossaryref">ASR</span> of <span title="" class="ltx_glossaryref">LLG</span> + and DLG.</p>
</div>
<figure id="S6.F6" class="ltx_figure">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S6.F6.1" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2105.09369/assets/x17.png" id="S6.F6.1.g1" class="ltx_graphics ltx_img_portrait" width="460" height="956" alt="Refer to caption">
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S6.F6.sf1" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2105.09369/assets/x18.png" id="S6.F6.sf1.g1" class="ltx_graphics ltx_img_landscape" width="332" height="252" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S6.F6.sf1.2.1.1" class="ltx_text" style="font-size:90%;">(a)</span> </span><span id="S6.F6.sf1.3.2" class="ltx_text" style="font-size:90%;">FS</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S6.F6.sf2" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2105.09369/assets/x19.png" id="S6.F6.sf2.g1" class="ltx_graphics ltx_img_landscape" width="332" height="252" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S6.F6.sf2.2.1.1" class="ltx_text" style="font-size:90%;">(b)</span> </span><span id="S6.F6.sf2.3.2" class="ltx_text" style="font-size:90%;">FA</span></figcaption>
</figure>
</div>
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S6.F6.5.2.1" class="ltx_text" style="font-size:90%;">Figure 6</span>: </span><span id="S6.F6.3.1" class="ltx_text" style="font-size:80%;">Influence of model convergence status on <span title="" class="ltx_glossaryref">ASR</span> of LLG, LLG*, LLG+, DLG, and random guess for CNN with unbalanced batches from MNIST dataset. On the left y-axis it is plotted the attack success rate, while on the right y-axis, it is plotted the model test accuracy. The number of training iterations (<math id="S6.F6.3.1.m1.1" class="ltx_Math" alttext="\times 10^{3}" display="inline"><semantics id="S6.F6.3.1.m1.1b"><mrow id="S6.F6.3.1.m1.1.1" xref="S6.F6.3.1.m1.1.1.cmml"><mi id="S6.F6.3.1.m1.1.1.2" xref="S6.F6.3.1.m1.1.1.2.cmml"></mi><mo lspace="0.222em" rspace="0.222em" id="S6.F6.3.1.m1.1.1.1" xref="S6.F6.3.1.m1.1.1.1.cmml">×</mo><msup id="S6.F6.3.1.m1.1.1.3" xref="S6.F6.3.1.m1.1.1.3.cmml"><mn id="S6.F6.3.1.m1.1.1.3.2" xref="S6.F6.3.1.m1.1.1.3.2.cmml">10</mn><mn id="S6.F6.3.1.m1.1.1.3.3" xref="S6.F6.3.1.m1.1.1.3.3.cmml">3</mn></msup></mrow><annotation-xml encoding="MathML-Content" id="S6.F6.3.1.m1.1c"><apply id="S6.F6.3.1.m1.1.1.cmml" xref="S6.F6.3.1.m1.1.1"><times id="S6.F6.3.1.m1.1.1.1.cmml" xref="S6.F6.3.1.m1.1.1.1"></times><csymbol cd="latexml" id="S6.F6.3.1.m1.1.1.2.cmml" xref="S6.F6.3.1.m1.1.1.2">absent</csymbol><apply id="S6.F6.3.1.m1.1.1.3.cmml" xref="S6.F6.3.1.m1.1.1.3"><csymbol cd="ambiguous" id="S6.F6.3.1.m1.1.1.3.1.cmml" xref="S6.F6.3.1.m1.1.1.3">superscript</csymbol><cn type="integer" id="S6.F6.3.1.m1.1.1.3.2.cmml" xref="S6.F6.3.1.m1.1.1.3.2">10</cn><cn type="integer" id="S6.F6.3.1.m1.1.1.3.3.cmml" xref="S6.F6.3.1.m1.1.1.3.3">3</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.F6.3.1.m1.1d">\times 10^{3}</annotation></semantics></math>) is on the x-axis. All different LLG methods achieve remarkable success rates even if the models are well-trained and gradients become less informative.</span></figcaption>
</figure>
<div id="S6.SS3.p4" class="ltx_para">
<dl id="S6.I5" class="ltx_description">
<dt id="S6.I5.ix1" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span id="S6.I5.ix1.1.1.1" class="ltx_text ltx_font_bold">FedSGD.</span></span></dt>
<dd class="ltx_item">
<div id="S6.I5.ix1.p1" class="ltx_para">
<p id="S6.I5.ix1.p1.2" class="ltx_p">As we can see in Figure <a href="#S6.F5" title="Figure 5 ‣ 6.2 Attack success rate ‣ 6 Empirical evaluation ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5</span></a> (a), <span title="" class="ltx_glossaryref">LLG</span> + performs best on <span title="" class="ltx_glossaryref">CNN</span> and LeNet, achieving approximately 100% of success rate, while a degradation starts from batches with size <math id="S6.I5.ix1.p1.1.m1.1" class="ltx_Math" alttext="&gt;2" display="inline"><semantics id="S6.I5.ix1.p1.1.m1.1a"><mrow id="S6.I5.ix1.p1.1.m1.1.1" xref="S6.I5.ix1.p1.1.m1.1.1.cmml"><mi id="S6.I5.ix1.p1.1.m1.1.1.2" xref="S6.I5.ix1.p1.1.m1.1.1.2.cmml"></mi><mo id="S6.I5.ix1.p1.1.m1.1.1.1" xref="S6.I5.ix1.p1.1.m1.1.1.1.cmml">&gt;</mo><mn id="S6.I5.ix1.p1.1.m1.1.1.3" xref="S6.I5.ix1.p1.1.m1.1.1.3.cmml">2</mn></mrow><annotation-xml encoding="MathML-Content" id="S6.I5.ix1.p1.1.m1.1b"><apply id="S6.I5.ix1.p1.1.m1.1.1.cmml" xref="S6.I5.ix1.p1.1.m1.1.1"><gt id="S6.I5.ix1.p1.1.m1.1.1.1.cmml" xref="S6.I5.ix1.p1.1.m1.1.1.1"></gt><csymbol cd="latexml" id="S6.I5.ix1.p1.1.m1.1.1.2.cmml" xref="S6.I5.ix1.p1.1.m1.1.1.2">absent</csymbol><cn type="integer" id="S6.I5.ix1.p1.1.m1.1.1.3.cmml" xref="S6.I5.ix1.p1.1.m1.1.1.3">2</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I5.ix1.p1.1.m1.1c">&gt;2</annotation></semantics></math> for ResNet20.
This is mainly due to the residual blocks  in the ResNet20 architecture that prevents the vanishing gradients problem in deep neural networks.
In other words, ResNet20 implicitly alters and controls the range of the  gradient values in order to not let them vanish (gradients close to zero) or to explode (gradients go towards  <math id="S6.I5.ix1.p1.2.m2.1" class="ltx_Math" alttext="+\infty" display="inline"><semantics id="S6.I5.ix1.p1.2.m2.1a"><mrow id="S6.I5.ix1.p1.2.m2.1.1" xref="S6.I5.ix1.p1.2.m2.1.1.cmml"><mo id="S6.I5.ix1.p1.2.m2.1.1a" xref="S6.I5.ix1.p1.2.m2.1.1.cmml">+</mo><mi mathvariant="normal" id="S6.I5.ix1.p1.2.m2.1.1.2" xref="S6.I5.ix1.p1.2.m2.1.1.2.cmml">∞</mi></mrow><annotation-xml encoding="MathML-Content" id="S6.I5.ix1.p1.2.m2.1b"><apply id="S6.I5.ix1.p1.2.m2.1.1.cmml" xref="S6.I5.ix1.p1.2.m2.1.1"><plus id="S6.I5.ix1.p1.2.m2.1.1.1.cmml" xref="S6.I5.ix1.p1.2.m2.1.1"></plus><infinity id="S6.I5.ix1.p1.2.m2.1.1.2.cmml" xref="S6.I5.ix1.p1.2.m2.1.1.2"></infinity></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I5.ix1.p1.2.m2.1c">+\infty</annotation></semantics></math>) during training.
This manipulates our definitions of the impact and offset parameters in Eq. (<a href="#S4.E16" title="In Proof ‣ 4 Gradient analysis ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">16</span></a>) and (<a href="#S4.E17" title="In Proof ‣ 4 Gradient analysis ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">17</span></a>), thus, directly affecting the attack performance.</p>
</div>
<div id="S6.I5.ix1.p2" class="ltx_para">
<p id="S6.I5.ix1.p2.1" class="ltx_p">On the other hand, DLG shows much higher sensitivity towards the model architecture.
As we can see it achieves <math id="S6.I5.ix1.p2.1.m1.1" class="ltx_Math" alttext="&gt;80\%" display="inline"><semantics id="S6.I5.ix1.p2.1.m1.1a"><mrow id="S6.I5.ix1.p2.1.m1.1.1" xref="S6.I5.ix1.p2.1.m1.1.1.cmml"><mi id="S6.I5.ix1.p2.1.m1.1.1.2" xref="S6.I5.ix1.p2.1.m1.1.1.2.cmml"></mi><mo id="S6.I5.ix1.p2.1.m1.1.1.1" xref="S6.I5.ix1.p2.1.m1.1.1.1.cmml">&gt;</mo><mrow id="S6.I5.ix1.p2.1.m1.1.1.3" xref="S6.I5.ix1.p2.1.m1.1.1.3.cmml"><mn id="S6.I5.ix1.p2.1.m1.1.1.3.2" xref="S6.I5.ix1.p2.1.m1.1.1.3.2.cmml">80</mn><mo id="S6.I5.ix1.p2.1.m1.1.1.3.1" xref="S6.I5.ix1.p2.1.m1.1.1.3.1.cmml">%</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S6.I5.ix1.p2.1.m1.1b"><apply id="S6.I5.ix1.p2.1.m1.1.1.cmml" xref="S6.I5.ix1.p2.1.m1.1.1"><gt id="S6.I5.ix1.p2.1.m1.1.1.1.cmml" xref="S6.I5.ix1.p2.1.m1.1.1.1"></gt><csymbol cd="latexml" id="S6.I5.ix1.p2.1.m1.1.1.2.cmml" xref="S6.I5.ix1.p2.1.m1.1.1.2">absent</csymbol><apply id="S6.I5.ix1.p2.1.m1.1.1.3.cmml" xref="S6.I5.ix1.p2.1.m1.1.1.3"><csymbol cd="latexml" id="S6.I5.ix1.p2.1.m1.1.1.3.1.cmml" xref="S6.I5.ix1.p2.1.m1.1.1.3.1">percent</csymbol><cn type="integer" id="S6.I5.ix1.p2.1.m1.1.1.3.2.cmml" xref="S6.I5.ix1.p2.1.m1.1.1.3.2">80</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I5.ix1.p2.1.m1.1c">&gt;80\%</annotation></semantics></math> for most batch sizes on CNN, while dropping remarkably on more complex models, LeNet and ResNet20. Such a strong influence of the model architecture on DLG is expected, as DLG includes an optimization phase, where optimizing complex models typically requires much more iterations.</p>
</div>
</dd>
<dt id="S6.I5.ix2" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span id="S6.I5.ix2.1.1.1" class="ltx_text ltx_font_bold">FedAvg.</span></span></dt>
<dd class="ltx_item">
<div id="S6.I5.ix2.p1" class="ltx_para">
<p id="S6.I5.ix2.p1.1" class="ltx_p">In Figure <a href="#S6.F5" title="Figure 5 ‣ 6.2 Attack success rate ‣ 6 Empirical evaluation ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5</span></a> (b), we observe that under small batch sizes <math id="S6.I5.ix2.p1.1.m1.1" class="ltx_Math" alttext="B\leq 16" display="inline"><semantics id="S6.I5.ix2.p1.1.m1.1a"><mrow id="S6.I5.ix2.p1.1.m1.1.1" xref="S6.I5.ix2.p1.1.m1.1.1.cmml"><mi id="S6.I5.ix2.p1.1.m1.1.1.2" xref="S6.I5.ix2.p1.1.m1.1.1.2.cmml">B</mi><mo id="S6.I5.ix2.p1.1.m1.1.1.1" xref="S6.I5.ix2.p1.1.m1.1.1.1.cmml">≤</mo><mn id="S6.I5.ix2.p1.1.m1.1.1.3" xref="S6.I5.ix2.p1.1.m1.1.1.3.cmml">16</mn></mrow><annotation-xml encoding="MathML-Content" id="S6.I5.ix2.p1.1.m1.1b"><apply id="S6.I5.ix2.p1.1.m1.1.1.cmml" xref="S6.I5.ix2.p1.1.m1.1.1"><leq id="S6.I5.ix2.p1.1.m1.1.1.1.cmml" xref="S6.I5.ix2.p1.1.m1.1.1.1"></leq><ci id="S6.I5.ix2.p1.1.m1.1.1.2.cmml" xref="S6.I5.ix2.p1.1.m1.1.1.2">𝐵</ci><cn type="integer" id="S6.I5.ix2.p1.1.m1.1.1.3.cmml" xref="S6.I5.ix2.p1.1.m1.1.1.3">16</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I5.ix2.p1.1.m1.1c">B\leq 16</annotation></semantics></math>, the <span title="" class="ltx_glossaryref">ASR</span> of <span title="" class="ltx_glossaryref">LLG</span> + is higher for CNN.
While for bigger batches, <span title="" class="ltx_glossaryref">LLG</span> + only slightly differs from one model to another.
This supports the finding that the model architecture has limited effect on <span title="" class="ltx_glossaryref">LLG</span> +.
In contrast, DLG shows again higher sensitivity with bigger variance of the <span title="" class="ltx_glossaryref">ASR</span> over the different architectures.
 
</p>
</div>
</dd>
</dl>
</div>
</section>
<section id="S6.SS4" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">6.4 </span>Model convergence status</h3>

<div id="S6.SS4.p1" class="ltx_para">
<p id="S6.SS4.p1.1" class="ltx_p">The gradients guide the model towards a local minimum of the loss function.
As the model converges to this minimum, the information included in the gradients becomes less prominent.
Therefore, we expect the convergence status of the model to have a strong influence on the attack effectiveness.
All the previous experiments are conducted in one communication round,
i.e., the gradients are generated and shared with the server only once. 
In this section, we go further with training the model and observe the implications on the attack.</p>
</div>
<div id="S6.SS4.p2" class="ltx_para">
<p id="S6.SS4.p2.7" class="ltx_p">We train the model in a federated setting, where the data of MNIST is distributed among <math id="S6.SS4.p2.1.m1.1" class="ltx_Math" alttext="750" display="inline"><semantics id="S6.SS4.p2.1.m1.1a"><mn id="S6.SS4.p2.1.m1.1.1" xref="S6.SS4.p2.1.m1.1.1.cmml">750</mn><annotation-xml encoding="MathML-Content" id="S6.SS4.p2.1.m1.1b"><cn type="integer" id="S6.SS4.p2.1.m1.1.1.cmml" xref="S6.SS4.p2.1.m1.1.1">750</cn></annotation-xml><annotation encoding="application/x-tex" id="S6.SS4.p2.1.m1.1c">750</annotation></semantics></math> users, each has <math id="S6.SS4.p2.2.m2.1" class="ltx_Math" alttext="80" display="inline"><semantics id="S6.SS4.p2.2.m2.1a"><mn id="S6.SS4.p2.2.m2.1.1" xref="S6.SS4.p2.2.m2.1.1.cmml">80</mn><annotation-xml encoding="MathML-Content" id="S6.SS4.p2.2.m2.1b"><cn type="integer" id="S6.SS4.p2.2.m2.1.1.cmml" xref="S6.SS4.p2.2.m2.1.1">80</cn></annotation-xml><annotation encoding="application/x-tex" id="S6.SS4.p2.2.m2.1c">80</annotation></semantics></math> unbalanced data samples.
The server selects randomly <math id="S6.SS4.p2.3.m3.1" class="ltx_Math" alttext="100" display="inline"><semantics id="S6.SS4.p2.3.m3.1a"><mn id="S6.SS4.p2.3.m3.1.1" xref="S6.SS4.p2.3.m3.1.1.cmml">100</mn><annotation-xml encoding="MathML-Content" id="S6.SS4.p2.3.m3.1b"><cn type="integer" id="S6.SS4.p2.3.m3.1.1.cmml" xref="S6.SS4.p2.3.m3.1.1">100</cn></annotation-xml><annotation encoding="application/x-tex" id="S6.SS4.p2.3.m3.1c">100</annotation></semantics></math> users for every communication round to train the global model locally and share their gradients. 
The CNN model is trained with batches of size <math id="S6.SS4.p2.4.m4.1" class="ltx_Math" alttext="8" display="inline"><semantics id="S6.SS4.p2.4.m4.1a"><mn id="S6.SS4.p2.4.m4.1.1" xref="S6.SS4.p2.4.m4.1.1.cmml">8</mn><annotation-xml encoding="MathML-Content" id="S6.SS4.p2.4.m4.1b"><cn type="integer" id="S6.SS4.p2.4.m4.1.1.cmml" xref="S6.SS4.p2.4.m4.1.1">8</cn></annotation-xml><annotation encoding="application/x-tex" id="S6.SS4.p2.4.m4.1c">8</annotation></semantics></math> for <math id="S6.SS4.p2.5.m5.1" class="ltx_Math" alttext="10^{3}" display="inline"><semantics id="S6.SS4.p2.5.m5.1a"><msup id="S6.SS4.p2.5.m5.1.1" xref="S6.SS4.p2.5.m5.1.1.cmml"><mn id="S6.SS4.p2.5.m5.1.1.2" xref="S6.SS4.p2.5.m5.1.1.2.cmml">10</mn><mn id="S6.SS4.p2.5.m5.1.1.3" xref="S6.SS4.p2.5.m5.1.1.3.cmml">3</mn></msup><annotation-xml encoding="MathML-Content" id="S6.SS4.p2.5.m5.1b"><apply id="S6.SS4.p2.5.m5.1.1.cmml" xref="S6.SS4.p2.5.m5.1.1"><csymbol cd="ambiguous" id="S6.SS4.p2.5.m5.1.1.1.cmml" xref="S6.SS4.p2.5.m5.1.1">superscript</csymbol><cn type="integer" id="S6.SS4.p2.5.m5.1.1.2.cmml" xref="S6.SS4.p2.5.m5.1.1.2">10</cn><cn type="integer" id="S6.SS4.p2.5.m5.1.1.3.cmml" xref="S6.SS4.p2.5.m5.1.1.3">3</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.SS4.p2.5.m5.1c">10^{3}</annotation></semantics></math> iterations.
We chose the batch size <math id="S6.SS4.p2.6.m6.1" class="ltx_Math" alttext="8" display="inline"><semantics id="S6.SS4.p2.6.m6.1a"><mn id="S6.SS4.p2.6.m6.1.1" xref="S6.SS4.p2.6.m6.1.1.cmml">8</mn><annotation-xml encoding="MathML-Content" id="S6.SS4.p2.6.m6.1b"><cn type="integer" id="S6.SS4.p2.6.m6.1.1.cmml" xref="S6.SS4.p2.6.m6.1.1">8</cn></annotation-xml><annotation encoding="application/x-tex" id="S6.SS4.p2.6.m6.1c">8</annotation></semantics></math> to be able to apply the DLG attack in its most effective setting <math id="S6.SS4.p2.7.m7.1" class="ltx_Math" alttext="B\leq 8" display="inline"><semantics id="S6.SS4.p2.7.m7.1a"><mrow id="S6.SS4.p2.7.m7.1.1" xref="S6.SS4.p2.7.m7.1.1.cmml"><mi id="S6.SS4.p2.7.m7.1.1.2" xref="S6.SS4.p2.7.m7.1.1.2.cmml">B</mi><mo id="S6.SS4.p2.7.m7.1.1.1" xref="S6.SS4.p2.7.m7.1.1.1.cmml">≤</mo><mn id="S6.SS4.p2.7.m7.1.1.3" xref="S6.SS4.p2.7.m7.1.1.3.cmml">8</mn></mrow><annotation-xml encoding="MathML-Content" id="S6.SS4.p2.7.m7.1b"><apply id="S6.SS4.p2.7.m7.1.1.cmml" xref="S6.SS4.p2.7.m7.1.1"><leq id="S6.SS4.p2.7.m7.1.1.1.cmml" xref="S6.SS4.p2.7.m7.1.1.1"></leq><ci id="S6.SS4.p2.7.m7.1.1.2.cmml" xref="S6.SS4.p2.7.m7.1.1.2">𝐵</ci><cn type="integer" id="S6.SS4.p2.7.m7.1.1.3.cmml" xref="S6.SS4.p2.7.m7.1.1.3">8</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.SS4.p2.7.m7.1c">B\leq 8</annotation></semantics></math> <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib41" title="" class="ltx_ref">41</a>]</cite>.
In every communication round, we attack the shared gradients of one target user (victim) with DLG and <span title="" class="ltx_glossaryref">LLG</span> variants, where the impact and offset are estimated dynamically. 
Figures <a href="#S6.F6" title="Figure 6 ‣ 6.3 Model architecture ‣ 6 Empirical evaluation ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6</span></a> (a,b) depict the attacks <span title="" class="ltx_glossaryref">ASR</span> (on the left y-axis) versus the model accuracy at testing time (on the right y-axis), while the x-axis represents the number of training iterations.</p>
</div>
<figure id="S6.F7" class="ltx_figure">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_1">
<figure id="S6.F7.1" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2105.09369/assets/x20.png" id="S6.F7.1.g1" class="ltx_graphics ltx_img_landscape" width="455" height="20" alt="Refer to caption">
</figure>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S6.F7.sf1" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2105.09369/assets/x21.png" id="S6.F7.sf1.g1" class="ltx_graphics ltx_img_landscape" width="332" height="252" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S6.F7.sf1.2.1.1" class="ltx_text" style="font-size:90%;">(a)</span> </span><span id="S6.F7.sf1.3.2" class="ltx_text" style="font-size:90%;">Pure noise - FS</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S6.F7.sf2" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2105.09369/assets/x22.png" id="S6.F7.sf2.g1" class="ltx_graphics ltx_img_landscape" width="332" height="267" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S6.F7.sf2.2.1.1" class="ltx_text" style="font-size:90%;">(b)</span> </span><span id="S6.F7.sf2.3.2" class="ltx_text" style="font-size:90%;">Differential privacy - FS</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S6.F7.sf3" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2105.09369/assets/x23.png" id="S6.F7.sf3.g1" class="ltx_graphics ltx_img_square" width="332" height="268" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S6.F7.sf3.2.1.1" class="ltx_text" style="font-size:90%;">(c)</span> </span><span id="S6.F7.sf3.3.2" class="ltx_text" style="font-size:90%;">Compression - FS</span></figcaption>
</figure>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S6.F7.sf4" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2105.09369/assets/x24.png" id="S6.F7.sf4.g1" class="ltx_graphics ltx_img_landscape" width="332" height="252" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S6.F7.sf4.2.1.1" class="ltx_text" style="font-size:90%;">(d)</span> </span><span id="S6.F7.sf4.3.2" class="ltx_text" style="font-size:90%;">Pure noise - FA</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S6.F7.sf5" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2105.09369/assets/x25.png" id="S6.F7.sf5.g1" class="ltx_graphics ltx_img_landscape" width="332" height="267" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S6.F7.sf5.2.1.1" class="ltx_text" style="font-size:90%;">(e)</span> </span><span id="S6.F7.sf5.3.2" class="ltx_text" style="font-size:90%;">Differential privacy - FA</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S6.F7.sf6" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2105.09369/assets/x26.png" id="S6.F7.sf6.g1" class="ltx_graphics ltx_img_square" width="332" height="268" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S6.F7.sf6.2.1.1" class="ltx_text" style="font-size:90%;">(f)</span> </span><span id="S6.F7.sf6.3.2" class="ltx_text" style="font-size:90%;">Compression - FA</span></figcaption>
</figure>
</div>
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S6.F7.23.11.1" class="ltx_text" style="font-size:90%;">Figure 7</span>: </span><span id="S6.F7.21.10" class="ltx_text" style="font-size:80%;">Effectiveness of different defenses against <span title="" class="ltx_glossaryref">LLG</span> + on an unbalanced batch from MNIST with a randomly initialized CNN: (a) defense by adding Gaussian distributed noise to gradients with <math id="S6.F7.12.1.m1.3" class="ltx_Math" alttext="\sigma\in\{0.01,0.1,1\}" display="inline"><semantics id="S6.F7.12.1.m1.3b"><mrow id="S6.F7.12.1.m1.3.4" xref="S6.F7.12.1.m1.3.4.cmml"><mi id="S6.F7.12.1.m1.3.4.2" xref="S6.F7.12.1.m1.3.4.2.cmml">σ</mi><mo id="S6.F7.12.1.m1.3.4.1" xref="S6.F7.12.1.m1.3.4.1.cmml">∈</mo><mrow id="S6.F7.12.1.m1.3.4.3.2" xref="S6.F7.12.1.m1.3.4.3.1.cmml"><mo stretchy="false" id="S6.F7.12.1.m1.3.4.3.2.1" xref="S6.F7.12.1.m1.3.4.3.1.cmml">{</mo><mn id="S6.F7.12.1.m1.1.1" xref="S6.F7.12.1.m1.1.1.cmml">0.01</mn><mo id="S6.F7.12.1.m1.3.4.3.2.2" xref="S6.F7.12.1.m1.3.4.3.1.cmml">,</mo><mn id="S6.F7.12.1.m1.2.2" xref="S6.F7.12.1.m1.2.2.cmml">0.1</mn><mo id="S6.F7.12.1.m1.3.4.3.2.3" xref="S6.F7.12.1.m1.3.4.3.1.cmml">,</mo><mn id="S6.F7.12.1.m1.3.3" xref="S6.F7.12.1.m1.3.3.cmml">1</mn><mo stretchy="false" id="S6.F7.12.1.m1.3.4.3.2.4" xref="S6.F7.12.1.m1.3.4.3.1.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S6.F7.12.1.m1.3c"><apply id="S6.F7.12.1.m1.3.4.cmml" xref="S6.F7.12.1.m1.3.4"><in id="S6.F7.12.1.m1.3.4.1.cmml" xref="S6.F7.12.1.m1.3.4.1"></in><ci id="S6.F7.12.1.m1.3.4.2.cmml" xref="S6.F7.12.1.m1.3.4.2">𝜎</ci><set id="S6.F7.12.1.m1.3.4.3.1.cmml" xref="S6.F7.12.1.m1.3.4.3.2"><cn type="float" id="S6.F7.12.1.m1.1.1.cmml" xref="S6.F7.12.1.m1.1.1">0.01</cn><cn type="float" id="S6.F7.12.1.m1.2.2.cmml" xref="S6.F7.12.1.m1.2.2">0.1</cn><cn type="integer" id="S6.F7.12.1.m1.3.3.cmml" xref="S6.F7.12.1.m1.3.3">1</cn></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.F7.12.1.m1.3d">\sigma\in\{0.01,0.1,1\}</annotation></semantics></math>, (b) defense by user-side differential privacy with <math id="S6.F7.13.2.m2.1" class="ltx_Math" alttext="\sigma=0.1" display="inline"><semantics id="S6.F7.13.2.m2.1b"><mrow id="S6.F7.13.2.m2.1.1" xref="S6.F7.13.2.m2.1.1.cmml"><mi id="S6.F7.13.2.m2.1.1.2" xref="S6.F7.13.2.m2.1.1.2.cmml">σ</mi><mo id="S6.F7.13.2.m2.1.1.1" xref="S6.F7.13.2.m2.1.1.1.cmml">=</mo><mn id="S6.F7.13.2.m2.1.1.3" xref="S6.F7.13.2.m2.1.1.3.cmml">0.1</mn></mrow><annotation-xml encoding="MathML-Content" id="S6.F7.13.2.m2.1c"><apply id="S6.F7.13.2.m2.1.1.cmml" xref="S6.F7.13.2.m2.1.1"><eq id="S6.F7.13.2.m2.1.1.1.cmml" xref="S6.F7.13.2.m2.1.1.1"></eq><ci id="S6.F7.13.2.m2.1.1.2.cmml" xref="S6.F7.13.2.m2.1.1.2">𝜎</ci><cn type="float" id="S6.F7.13.2.m2.1.1.3.cmml" xref="S6.F7.13.2.m2.1.1.3">0.1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.F7.13.2.m2.1d">\sigma=0.1</annotation></semantics></math>,  and clipping bound <math id="S6.F7.14.3.m3.3" class="ltx_Math" alttext="\beta\in\{1,5,10\}" display="inline"><semantics id="S6.F7.14.3.m3.3b"><mrow id="S6.F7.14.3.m3.3.4" xref="S6.F7.14.3.m3.3.4.cmml"><mi id="S6.F7.14.3.m3.3.4.2" xref="S6.F7.14.3.m3.3.4.2.cmml">β</mi><mo id="S6.F7.14.3.m3.3.4.1" xref="S6.F7.14.3.m3.3.4.1.cmml">∈</mo><mrow id="S6.F7.14.3.m3.3.4.3.2" xref="S6.F7.14.3.m3.3.4.3.1.cmml"><mo stretchy="false" id="S6.F7.14.3.m3.3.4.3.2.1" xref="S6.F7.14.3.m3.3.4.3.1.cmml">{</mo><mn id="S6.F7.14.3.m3.1.1" xref="S6.F7.14.3.m3.1.1.cmml">1</mn><mo id="S6.F7.14.3.m3.3.4.3.2.2" xref="S6.F7.14.3.m3.3.4.3.1.cmml">,</mo><mn id="S6.F7.14.3.m3.2.2" xref="S6.F7.14.3.m3.2.2.cmml">5</mn><mo id="S6.F7.14.3.m3.3.4.3.2.3" xref="S6.F7.14.3.m3.3.4.3.1.cmml">,</mo><mn id="S6.F7.14.3.m3.3.3" xref="S6.F7.14.3.m3.3.3.cmml">10</mn><mo stretchy="false" id="S6.F7.14.3.m3.3.4.3.2.4" xref="S6.F7.14.3.m3.3.4.3.1.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S6.F7.14.3.m3.3c"><apply id="S6.F7.14.3.m3.3.4.cmml" xref="S6.F7.14.3.m3.3.4"><in id="S6.F7.14.3.m3.3.4.1.cmml" xref="S6.F7.14.3.m3.3.4.1"></in><ci id="S6.F7.14.3.m3.3.4.2.cmml" xref="S6.F7.14.3.m3.3.4.2">𝛽</ci><set id="S6.F7.14.3.m3.3.4.3.1.cmml" xref="S6.F7.14.3.m3.3.4.3.2"><cn type="integer" id="S6.F7.14.3.m3.1.1.cmml" xref="S6.F7.14.3.m3.1.1">1</cn><cn type="integer" id="S6.F7.14.3.m3.2.2.cmml" xref="S6.F7.14.3.m3.2.2">5</cn><cn type="integer" id="S6.F7.14.3.m3.3.3.cmml" xref="S6.F7.14.3.m3.3.3">10</cn></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.F7.14.3.m3.3d">\beta\in\{1,5,10\}</annotation></semantics></math>, (c) defense by pruning gradients with varying compression ratios <math id="S6.F7.15.4.m4.3" class="ltx_Math" alttext="\theta\in\{20\%,40\%,80\%\}" display="inline"><semantics id="S6.F7.15.4.m4.3b"><mrow id="S6.F7.15.4.m4.3.3" xref="S6.F7.15.4.m4.3.3.cmml"><mi id="S6.F7.15.4.m4.3.3.5" xref="S6.F7.15.4.m4.3.3.5.cmml">θ</mi><mo id="S6.F7.15.4.m4.3.3.4" xref="S6.F7.15.4.m4.3.3.4.cmml">∈</mo><mrow id="S6.F7.15.4.m4.3.3.3.3" xref="S6.F7.15.4.m4.3.3.3.4.cmml"><mo stretchy="false" id="S6.F7.15.4.m4.3.3.3.3.4" xref="S6.F7.15.4.m4.3.3.3.4.cmml">{</mo><mrow id="S6.F7.15.4.m4.1.1.1.1.1" xref="S6.F7.15.4.m4.1.1.1.1.1.cmml"><mn id="S6.F7.15.4.m4.1.1.1.1.1.2" xref="S6.F7.15.4.m4.1.1.1.1.1.2.cmml">20</mn><mo id="S6.F7.15.4.m4.1.1.1.1.1.1" xref="S6.F7.15.4.m4.1.1.1.1.1.1.cmml">%</mo></mrow><mo id="S6.F7.15.4.m4.3.3.3.3.5" xref="S6.F7.15.4.m4.3.3.3.4.cmml">,</mo><mrow id="S6.F7.15.4.m4.2.2.2.2.2" xref="S6.F7.15.4.m4.2.2.2.2.2.cmml"><mn id="S6.F7.15.4.m4.2.2.2.2.2.2" xref="S6.F7.15.4.m4.2.2.2.2.2.2.cmml">40</mn><mo id="S6.F7.15.4.m4.2.2.2.2.2.1" xref="S6.F7.15.4.m4.2.2.2.2.2.1.cmml">%</mo></mrow><mo id="S6.F7.15.4.m4.3.3.3.3.6" xref="S6.F7.15.4.m4.3.3.3.4.cmml">,</mo><mrow id="S6.F7.15.4.m4.3.3.3.3.3" xref="S6.F7.15.4.m4.3.3.3.3.3.cmml"><mn id="S6.F7.15.4.m4.3.3.3.3.3.2" xref="S6.F7.15.4.m4.3.3.3.3.3.2.cmml">80</mn><mo id="S6.F7.15.4.m4.3.3.3.3.3.1" xref="S6.F7.15.4.m4.3.3.3.3.3.1.cmml">%</mo></mrow><mo stretchy="false" id="S6.F7.15.4.m4.3.3.3.3.7" xref="S6.F7.15.4.m4.3.3.3.4.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S6.F7.15.4.m4.3c"><apply id="S6.F7.15.4.m4.3.3.cmml" xref="S6.F7.15.4.m4.3.3"><in id="S6.F7.15.4.m4.3.3.4.cmml" xref="S6.F7.15.4.m4.3.3.4"></in><ci id="S6.F7.15.4.m4.3.3.5.cmml" xref="S6.F7.15.4.m4.3.3.5">𝜃</ci><set id="S6.F7.15.4.m4.3.3.3.4.cmml" xref="S6.F7.15.4.m4.3.3.3.3"><apply id="S6.F7.15.4.m4.1.1.1.1.1.cmml" xref="S6.F7.15.4.m4.1.1.1.1.1"><csymbol cd="latexml" id="S6.F7.15.4.m4.1.1.1.1.1.1.cmml" xref="S6.F7.15.4.m4.1.1.1.1.1.1">percent</csymbol><cn type="integer" id="S6.F7.15.4.m4.1.1.1.1.1.2.cmml" xref="S6.F7.15.4.m4.1.1.1.1.1.2">20</cn></apply><apply id="S6.F7.15.4.m4.2.2.2.2.2.cmml" xref="S6.F7.15.4.m4.2.2.2.2.2"><csymbol cd="latexml" id="S6.F7.15.4.m4.2.2.2.2.2.1.cmml" xref="S6.F7.15.4.m4.2.2.2.2.2.1">percent</csymbol><cn type="integer" id="S6.F7.15.4.m4.2.2.2.2.2.2.cmml" xref="S6.F7.15.4.m4.2.2.2.2.2.2">40</cn></apply><apply id="S6.F7.15.4.m4.3.3.3.3.3.cmml" xref="S6.F7.15.4.m4.3.3.3.3.3"><csymbol cd="latexml" id="S6.F7.15.4.m4.3.3.3.3.3.1.cmml" xref="S6.F7.15.4.m4.3.3.3.3.3.1">percent</csymbol><cn type="integer" id="S6.F7.15.4.m4.3.3.3.3.3.2.cmml" xref="S6.F7.15.4.m4.3.3.3.3.3.2">80</cn></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.F7.15.4.m4.3d">\theta\in\{20\%,40\%,80\%\}</annotation></semantics></math>. Pure noise is not successful in eliminating the risk completely, since <span title="" class="ltx_glossaryref">LLG</span> + maintains a higher <span title="" class="ltx_glossaryref">ASR</span> than the random guess.
While, differential privacy mitigates the attack with <math id="S6.F7.16.5.m5.1" class="ltx_Math" alttext="\beta=1" display="inline"><semantics id="S6.F7.16.5.m5.1b"><mrow id="S6.F7.16.5.m5.1.1" xref="S6.F7.16.5.m5.1.1.cmml"><mi id="S6.F7.16.5.m5.1.1.2" xref="S6.F7.16.5.m5.1.1.2.cmml">β</mi><mo id="S6.F7.16.5.m5.1.1.1" xref="S6.F7.16.5.m5.1.1.1.cmml">=</mo><mn id="S6.F7.16.5.m5.1.1.3" xref="S6.F7.16.5.m5.1.1.3.cmml">1</mn></mrow><annotation-xml encoding="MathML-Content" id="S6.F7.16.5.m5.1c"><apply id="S6.F7.16.5.m5.1.1.cmml" xref="S6.F7.16.5.m5.1.1"><eq id="S6.F7.16.5.m5.1.1.1.cmml" xref="S6.F7.16.5.m5.1.1.1"></eq><ci id="S6.F7.16.5.m5.1.1.2.cmml" xref="S6.F7.16.5.m5.1.1.2">𝛽</ci><cn type="integer" id="S6.F7.16.5.m5.1.1.3.cmml" xref="S6.F7.16.5.m5.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.F7.16.5.m5.1d">\beta=1</annotation></semantics></math> for FedAvg (FA), and for FedSGD (FS) when batch size <math id="S6.F7.17.6.m6.1" class="ltx_Math" alttext="B\geq 16" display="inline"><semantics id="S6.F7.17.6.m6.1b"><mrow id="S6.F7.17.6.m6.1.1" xref="S6.F7.17.6.m6.1.1.cmml"><mi id="S6.F7.17.6.m6.1.1.2" xref="S6.F7.17.6.m6.1.1.2.cmml">B</mi><mo id="S6.F7.17.6.m6.1.1.1" xref="S6.F7.17.6.m6.1.1.1.cmml">≥</mo><mn id="S6.F7.17.6.m6.1.1.3" xref="S6.F7.17.6.m6.1.1.3.cmml">16</mn></mrow><annotation-xml encoding="MathML-Content" id="S6.F7.17.6.m6.1c"><apply id="S6.F7.17.6.m6.1.1.cmml" xref="S6.F7.17.6.m6.1.1"><geq id="S6.F7.17.6.m6.1.1.1.cmml" xref="S6.F7.17.6.m6.1.1.1"></geq><ci id="S6.F7.17.6.m6.1.1.2.cmml" xref="S6.F7.17.6.m6.1.1.2">𝐵</ci><cn type="integer" id="S6.F7.17.6.m6.1.1.3.cmml" xref="S6.F7.17.6.m6.1.1.3">16</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.F7.17.6.m6.1d">B\geq 16</annotation></semantics></math>.
Gradient compression is effective in FedSGD when a high compression ratio (<math id="S6.F7.18.7.m7.1" class="ltx_Math" alttext="\geq 80\%" display="inline"><semantics id="S6.F7.18.7.m7.1b"><mrow id="S6.F7.18.7.m7.1.1" xref="S6.F7.18.7.m7.1.1.cmml"><mi id="S6.F7.18.7.m7.1.1.2" xref="S6.F7.18.7.m7.1.1.2.cmml"></mi><mo id="S6.F7.18.7.m7.1.1.1" xref="S6.F7.18.7.m7.1.1.1.cmml">≥</mo><mrow id="S6.F7.18.7.m7.1.1.3" xref="S6.F7.18.7.m7.1.1.3.cmml"><mn id="S6.F7.18.7.m7.1.1.3.2" xref="S6.F7.18.7.m7.1.1.3.2.cmml">80</mn><mo id="S6.F7.18.7.m7.1.1.3.1" xref="S6.F7.18.7.m7.1.1.3.1.cmml">%</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S6.F7.18.7.m7.1c"><apply id="S6.F7.18.7.m7.1.1.cmml" xref="S6.F7.18.7.m7.1.1"><geq id="S6.F7.18.7.m7.1.1.1.cmml" xref="S6.F7.18.7.m7.1.1.1"></geq><csymbol cd="latexml" id="S6.F7.18.7.m7.1.1.2.cmml" xref="S6.F7.18.7.m7.1.1.2">absent</csymbol><apply id="S6.F7.18.7.m7.1.1.3.cmml" xref="S6.F7.18.7.m7.1.1.3"><csymbol cd="latexml" id="S6.F7.18.7.m7.1.1.3.1.cmml" xref="S6.F7.18.7.m7.1.1.3.1">percent</csymbol><cn type="integer" id="S6.F7.18.7.m7.1.1.3.2.cmml" xref="S6.F7.18.7.m7.1.1.3.2">80</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.F7.18.7.m7.1d">\geq 80\%</annotation></semantics></math>) is used with <math id="S6.F7.19.8.m8.1" class="ltx_Math" alttext="B\geq 4" display="inline"><semantics id="S6.F7.19.8.m8.1b"><mrow id="S6.F7.19.8.m8.1.1" xref="S6.F7.19.8.m8.1.1.cmml"><mi id="S6.F7.19.8.m8.1.1.2" xref="S6.F7.19.8.m8.1.1.2.cmml">B</mi><mo id="S6.F7.19.8.m8.1.1.1" xref="S6.F7.19.8.m8.1.1.1.cmml">≥</mo><mn id="S6.F7.19.8.m8.1.1.3" xref="S6.F7.19.8.m8.1.1.3.cmml">4</mn></mrow><annotation-xml encoding="MathML-Content" id="S6.F7.19.8.m8.1c"><apply id="S6.F7.19.8.m8.1.1.cmml" xref="S6.F7.19.8.m8.1.1"><geq id="S6.F7.19.8.m8.1.1.1.cmml" xref="S6.F7.19.8.m8.1.1.1"></geq><ci id="S6.F7.19.8.m8.1.1.2.cmml" xref="S6.F7.19.8.m8.1.1.2">𝐵</ci><cn type="integer" id="S6.F7.19.8.m8.1.1.3.cmml" xref="S6.F7.19.8.m8.1.1.3">4</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.F7.19.8.m8.1d">B\geq 4</annotation></semantics></math>.
For FedAvg, even the compression ratio <math id="S6.F7.20.9.m9.1" class="ltx_Math" alttext="40\%" display="inline"><semantics id="S6.F7.20.9.m9.1b"><mrow id="S6.F7.20.9.m9.1.1" xref="S6.F7.20.9.m9.1.1.cmml"><mn id="S6.F7.20.9.m9.1.1.2" xref="S6.F7.20.9.m9.1.1.2.cmml">40</mn><mo id="S6.F7.20.9.m9.1.1.1" xref="S6.F7.20.9.m9.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S6.F7.20.9.m9.1c"><apply id="S6.F7.20.9.m9.1.1.cmml" xref="S6.F7.20.9.m9.1.1"><csymbol cd="latexml" id="S6.F7.20.9.m9.1.1.1.cmml" xref="S6.F7.20.9.m9.1.1.1">percent</csymbol><cn type="integer" id="S6.F7.20.9.m9.1.1.2.cmml" xref="S6.F7.20.9.m9.1.1.2">40</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.F7.20.9.m9.1d">40\%</annotation></semantics></math> with <math id="S6.F7.21.10.m10.1" class="ltx_Math" alttext="B\geq 8" display="inline"><semantics id="S6.F7.21.10.m10.1b"><mrow id="S6.F7.21.10.m10.1.1" xref="S6.F7.21.10.m10.1.1.cmml"><mi id="S6.F7.21.10.m10.1.1.2" xref="S6.F7.21.10.m10.1.1.2.cmml">B</mi><mo id="S6.F7.21.10.m10.1.1.1" xref="S6.F7.21.10.m10.1.1.1.cmml">≥</mo><mn id="S6.F7.21.10.m10.1.1.3" xref="S6.F7.21.10.m10.1.1.3.cmml">8</mn></mrow><annotation-xml encoding="MathML-Content" id="S6.F7.21.10.m10.1c"><apply id="S6.F7.21.10.m10.1.1.cmml" xref="S6.F7.21.10.m10.1.1"><geq id="S6.F7.21.10.m10.1.1.1.cmml" xref="S6.F7.21.10.m10.1.1.1"></geq><ci id="S6.F7.21.10.m10.1.1.2.cmml" xref="S6.F7.21.10.m10.1.1.2">𝐵</ci><cn type="integer" id="S6.F7.21.10.m10.1.1.3.cmml" xref="S6.F7.21.10.m10.1.1.3">8</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.F7.21.10.m10.1d">B\geq 8</annotation></semantics></math> is an effective defense. </span></figcaption>
</figure>
<div id="S6.SS4.p3" class="ltx_para">
<dl id="S6.I6" class="ltx_description">
<dt id="S6.I6.ix1" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span id="S6.I6.ix1.1.1.1" class="ltx_text ltx_font_bold">FedSGD.</span></span></dt>
<dd class="ltx_item">
<div id="S6.I6.ix1.p1" class="ltx_para">
<p id="S6.I6.ix1.p1.1" class="ltx_p">We can see in Figure <a href="#S6.F6" title="Figure 6 ‣ 6.3 Model architecture ‣ 6 Empirical evaluation ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6</span></a> (a) that the growth of the model accuracy incurs a notable decrease of the <span title="" class="ltx_glossaryref">ASR</span> for all <span title="" class="ltx_glossaryref">LLG</span> s. However, although the model converges close to 93% accuracy, <span title="" class="ltx_glossaryref">LLG</span> and <span title="" class="ltx_glossaryref">LLG</span> + keep achieving <math id="S6.I6.ix1.p1.1.m1.1" class="ltx_Math" alttext="\lx@glossaries@gls@link{main}{ASR}{\leavevmode ASR}&gt;60\%" display="inline"><semantics id="S6.I6.ix1.p1.1.m1.1a"><mrow id="S6.I6.ix1.p1.1.m1.1.1" xref="S6.I6.ix1.p1.1.m1.1.1.cmml"><mtext class="ltx_mathvariant_italic" id="S6.I6.ix1.p1.1.m1.1.1.2" xref="S6.I6.ix1.p1.1.m1.1.1.2e.cmml"><span title="" class="ltx_glossaryref ltx_font_italic">ASR</span></mtext><mo id="S6.I6.ix1.p1.1.m1.1.1.1" xref="S6.I6.ix1.p1.1.m1.1.1.1.cmml">&gt;</mo><mrow id="S6.I6.ix1.p1.1.m1.1.1.3" xref="S6.I6.ix1.p1.1.m1.1.1.3.cmml"><mn id="S6.I6.ix1.p1.1.m1.1.1.3.2" xref="S6.I6.ix1.p1.1.m1.1.1.3.2.cmml">60</mn><mo id="S6.I6.ix1.p1.1.m1.1.1.3.1" xref="S6.I6.ix1.p1.1.m1.1.1.3.1.cmml">%</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S6.I6.ix1.p1.1.m1.1b"><apply id="S6.I6.ix1.p1.1.m1.1.1.cmml" xref="S6.I6.ix1.p1.1.m1.1.1"><gt id="S6.I6.ix1.p1.1.m1.1.1.1.cmml" xref="S6.I6.ix1.p1.1.m1.1.1.1"></gt><ci id="S6.I6.ix1.p1.1.m1.1.1.2e.cmml" xref="S6.I6.ix1.p1.1.m1.1.1.2"><mtext class="ltx_mathvariant_italic" id="S6.I6.ix1.p1.1.m1.1.1.2.cmml" xref="S6.I6.ix1.p1.1.m1.1.1.2"><span title="" class="ltx_glossaryref ltx_font_italic">ASR</span></mtext></ci><apply id="S6.I6.ix1.p1.1.m1.1.1.3.cmml" xref="S6.I6.ix1.p1.1.m1.1.1.3"><csymbol cd="latexml" id="S6.I6.ix1.p1.1.m1.1.1.3.1.cmml" xref="S6.I6.ix1.p1.1.m1.1.1.3.1">percent</csymbol><cn type="integer" id="S6.I6.ix1.p1.1.m1.1.1.3.2.cmml" xref="S6.I6.ix1.p1.1.m1.1.1.3.2">60</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I6.ix1.p1.1.m1.1c">\lx@glossaries@gls@link{main}{ASR}{\leavevmode ASR}&gt;60\%</annotation></semantics></math>, considerably higher than the random guess which is around 32%.
Meaning, the attacks are still able to take advantage of the reduced information in gradients over the course of the whole training process.
Similarly, DLG shows degradation in accuracy, yet it remains effective for well-trained models.</p>
</div>
</dd>
<dt id="S6.I6.ix2" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span id="S6.I6.ix2.1.1.1" class="ltx_text ltx_font_bold">FedAvg.</span></span></dt>
<dd class="ltx_item">
<div id="S6.I6.ix2.p1" class="ltx_para">
<p id="S6.I6.ix2.p1.7" class="ltx_p">Figure <a href="#S6.F6" title="Figure 6 ‣ 6.3 Model architecture ‣ 6 Empirical evaluation ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6</span></a> (b) shows more stability of <span title="" class="ltx_glossaryref">ASR</span> over the training process, especially for <span title="" class="ltx_glossaryref">LLG</span> and DLG.
Even in the early stages of the training, the multiple local iterations in FedAvg improve the model accuracy, thus, make the accumulative gradients less informative.
Therefore, the attacks start with lower <span title="" class="ltx_glossaryref">ASR</span> comparing with FedSGD.
However, this leads also to mitigating the notable degradation of <span title="" class="ltx_glossaryref">ASR</span> observed in Figure <a href="#S6.F6" title="Figure 6 ‣ 6.3 Model architecture ‣ 6 Empirical evaluation ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6</span></a> (a).
<span title="" class="ltx_glossaryref">LLG</span> * and <span title="" class="ltx_glossaryref">LLG</span> + exhibit volatile behavior in the early iterations, where they have an increasing success rate between iteration <math id="S6.I6.ix2.p1.1.m1.1" class="ltx_Math" alttext="100" display="inline"><semantics id="S6.I6.ix2.p1.1.m1.1a"><mn id="S6.I6.ix2.p1.1.m1.1.1" xref="S6.I6.ix2.p1.1.m1.1.1.cmml">100</mn><annotation-xml encoding="MathML-Content" id="S6.I6.ix2.p1.1.m1.1b"><cn type="integer" id="S6.I6.ix2.p1.1.m1.1.1.cmml" xref="S6.I6.ix2.p1.1.m1.1.1">100</cn></annotation-xml><annotation encoding="application/x-tex" id="S6.I6.ix2.p1.1.m1.1c">100</annotation></semantics></math> and <math id="S6.I6.ix2.p1.2.m2.1" class="ltx_Math" alttext="300" display="inline"><semantics id="S6.I6.ix2.p1.2.m2.1a"><mn id="S6.I6.ix2.p1.2.m2.1.1" xref="S6.I6.ix2.p1.2.m2.1.1.cmml">300</mn><annotation-xml encoding="MathML-Content" id="S6.I6.ix2.p1.2.m2.1b"><cn type="integer" id="S6.I6.ix2.p1.2.m2.1.1.cmml" xref="S6.I6.ix2.p1.2.m2.1.1">300</cn></annotation-xml><annotation encoding="application/x-tex" id="S6.I6.ix2.p1.2.m2.1c">300</annotation></semantics></math>.
Then, they decrease again from <math id="S6.I6.ix2.p1.3.m3.1" class="ltx_Math" alttext="80\%" display="inline"><semantics id="S6.I6.ix2.p1.3.m3.1a"><mrow id="S6.I6.ix2.p1.3.m3.1.1" xref="S6.I6.ix2.p1.3.m3.1.1.cmml"><mn id="S6.I6.ix2.p1.3.m3.1.1.2" xref="S6.I6.ix2.p1.3.m3.1.1.2.cmml">80</mn><mo id="S6.I6.ix2.p1.3.m3.1.1.1" xref="S6.I6.ix2.p1.3.m3.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S6.I6.ix2.p1.3.m3.1b"><apply id="S6.I6.ix2.p1.3.m3.1.1.cmml" xref="S6.I6.ix2.p1.3.m3.1.1"><csymbol cd="latexml" id="S6.I6.ix2.p1.3.m3.1.1.1.cmml" xref="S6.I6.ix2.p1.3.m3.1.1.1">percent</csymbol><cn type="integer" id="S6.I6.ix2.p1.3.m3.1.1.2.cmml" xref="S6.I6.ix2.p1.3.m3.1.1.2">80</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I6.ix2.p1.3.m3.1c">80\%</annotation></semantics></math> to close to <math id="S6.I6.ix2.p1.4.m4.1" class="ltx_Math" alttext="70\%" display="inline"><semantics id="S6.I6.ix2.p1.4.m4.1a"><mrow id="S6.I6.ix2.p1.4.m4.1.1" xref="S6.I6.ix2.p1.4.m4.1.1.cmml"><mn id="S6.I6.ix2.p1.4.m4.1.1.2" xref="S6.I6.ix2.p1.4.m4.1.1.2.cmml">70</mn><mo id="S6.I6.ix2.p1.4.m4.1.1.1" xref="S6.I6.ix2.p1.4.m4.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S6.I6.ix2.p1.4.m4.1b"><apply id="S6.I6.ix2.p1.4.m4.1.1.cmml" xref="S6.I6.ix2.p1.4.m4.1.1"><csymbol cd="latexml" id="S6.I6.ix2.p1.4.m4.1.1.1.cmml" xref="S6.I6.ix2.p1.4.m4.1.1.1">percent</csymbol><cn type="integer" id="S6.I6.ix2.p1.4.m4.1.1.2.cmml" xref="S6.I6.ix2.p1.4.m4.1.1.2">70</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I6.ix2.p1.4.m4.1c">70\%</annotation></semantics></math> and <math id="S6.I6.ix2.p1.5.m5.1" class="ltx_Math" alttext="60\%" display="inline"><semantics id="S6.I6.ix2.p1.5.m5.1a"><mrow id="S6.I6.ix2.p1.5.m5.1.1" xref="S6.I6.ix2.p1.5.m5.1.1.cmml"><mn id="S6.I6.ix2.p1.5.m5.1.1.2" xref="S6.I6.ix2.p1.5.m5.1.1.2.cmml">60</mn><mo id="S6.I6.ix2.p1.5.m5.1.1.1" xref="S6.I6.ix2.p1.5.m5.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S6.I6.ix2.p1.5.m5.1b"><apply id="S6.I6.ix2.p1.5.m5.1.1.cmml" xref="S6.I6.ix2.p1.5.m5.1.1"><csymbol cd="latexml" id="S6.I6.ix2.p1.5.m5.1.1.1.cmml" xref="S6.I6.ix2.p1.5.m5.1.1.1">percent</csymbol><cn type="integer" id="S6.I6.ix2.p1.5.m5.1.1.2.cmml" xref="S6.I6.ix2.p1.5.m5.1.1.2">60</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I6.ix2.p1.5.m5.1c">60\%</annotation></semantics></math>, respectively. Interestingly, DLG maintains a high success rate (around <math id="S6.I6.ix2.p1.6.m6.1" class="ltx_Math" alttext="80\%" display="inline"><semantics id="S6.I6.ix2.p1.6.m6.1a"><mrow id="S6.I6.ix2.p1.6.m6.1.1" xref="S6.I6.ix2.p1.6.m6.1.1.cmml"><mn id="S6.I6.ix2.p1.6.m6.1.1.2" xref="S6.I6.ix2.p1.6.m6.1.1.2.cmml">80</mn><mo id="S6.I6.ix2.p1.6.m6.1.1.1" xref="S6.I6.ix2.p1.6.m6.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S6.I6.ix2.p1.6.m6.1b"><apply id="S6.I6.ix2.p1.6.m6.1.1.cmml" xref="S6.I6.ix2.p1.6.m6.1.1"><csymbol cd="latexml" id="S6.I6.ix2.p1.6.m6.1.1.1.cmml" xref="S6.I6.ix2.p1.6.m6.1.1.1">percent</csymbol><cn type="integer" id="S6.I6.ix2.p1.6.m6.1.1.2.cmml" xref="S6.I6.ix2.p1.6.m6.1.1.2">80</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I6.ix2.p1.6.m6.1c">80\%</annotation></semantics></math>) outperforming the <span title="" class="ltx_glossaryref">LLG</span> variants in most parts of the training process.
This shows that DLG is less sensitive to convergence status under FedAvg and thus can cope with the decreasing amount of information in the gradients. 
Overall, all the attacks stay effective with <math id="S6.I6.ix2.p1.7.m7.1" class="ltx_Math" alttext="\lx@glossaries@gls@link{main}{ASR}{\leavevmode ASR}&gt;40\%" display="inline"><semantics id="S6.I6.ix2.p1.7.m7.1a"><mrow id="S6.I6.ix2.p1.7.m7.1.1" xref="S6.I6.ix2.p1.7.m7.1.1.cmml"><mtext class="ltx_mathvariant_italic" id="S6.I6.ix2.p1.7.m7.1.1.2" xref="S6.I6.ix2.p1.7.m7.1.1.2e.cmml"><span title="" class="ltx_glossaryref ltx_font_italic">ASR</span></mtext><mo id="S6.I6.ix2.p1.7.m7.1.1.1" xref="S6.I6.ix2.p1.7.m7.1.1.1.cmml">&gt;</mo><mrow id="S6.I6.ix2.p1.7.m7.1.1.3" xref="S6.I6.ix2.p1.7.m7.1.1.3.cmml"><mn id="S6.I6.ix2.p1.7.m7.1.1.3.2" xref="S6.I6.ix2.p1.7.m7.1.1.3.2.cmml">40</mn><mo id="S6.I6.ix2.p1.7.m7.1.1.3.1" xref="S6.I6.ix2.p1.7.m7.1.1.3.1.cmml">%</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S6.I6.ix2.p1.7.m7.1b"><apply id="S6.I6.ix2.p1.7.m7.1.1.cmml" xref="S6.I6.ix2.p1.7.m7.1.1"><gt id="S6.I6.ix2.p1.7.m7.1.1.1.cmml" xref="S6.I6.ix2.p1.7.m7.1.1.1"></gt><ci id="S6.I6.ix2.p1.7.m7.1.1.2e.cmml" xref="S6.I6.ix2.p1.7.m7.1.1.2"><mtext class="ltx_mathvariant_italic" id="S6.I6.ix2.p1.7.m7.1.1.2.cmml" xref="S6.I6.ix2.p1.7.m7.1.1.2"><span title="" class="ltx_glossaryref ltx_font_italic">ASR</span></mtext></ci><apply id="S6.I6.ix2.p1.7.m7.1.1.3.cmml" xref="S6.I6.ix2.p1.7.m7.1.1.3"><csymbol cd="latexml" id="S6.I6.ix2.p1.7.m7.1.1.3.1.cmml" xref="S6.I6.ix2.p1.7.m7.1.1.3.1">percent</csymbol><cn type="integer" id="S6.I6.ix2.p1.7.m7.1.1.3.2.cmml" xref="S6.I6.ix2.p1.7.m7.1.1.3.2">40</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I6.ix2.p1.7.m7.1c">\lx@glossaries@gls@link{main}{ASR}{\leavevmode ASR}&gt;40\%</annotation></semantics></math>, which is the random guess success rate.
 
</p>
</div>
</dd>
</dl>
</div>
</section>
<section id="S6.SS5" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">6.5 </span>Defense mechanisms</h3>

<div id="S6.SS5.p1" class="ltx_para">
<p id="S6.SS5.p1.1" class="ltx_p">As <span title="" class="ltx_glossaryref">LLG</span> is mainly based on the gradients, thus, sensitive to changes in their values, obfuscating them can be a direct mitigation mechanism.
In this section, we use two obfuscation techniques: noisy gradients and gradients compression.
We apply these techniques on the user side before sharing the gradients with the server and thus, protecting against external eavesdroppers and curious servers.
Then, we attack the gradients of one target user in one communication round for a randomly initialized <span title="" class="ltx_glossaryref">CNN</span> model (untrained).
In general, applying obfuscation techniques incurs a loss in the model accuracy.
To cover this aspect, we train the model to convergence under conditions similar to those in Section <a href="#S6.SS4" title="6.4 Model convergence status ‣ 6 Empirical evaluation ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6.4</span></a> while applying the defenses, and report its accuracy.</p>
</div>
<section id="S6.SS5.SSS1" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">6.5.1 </span>Noisy gradients</h4>

<div id="S6.SS5.SSS1.p1" class="ltx_para">
<p id="S6.SS5.SSS1.p1.6" class="ltx_p">Many researchers consider adding noise to gradients as the de facto standard for privacy-preserving <span title="" class="ltx_glossaryref">ML</span> <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib22" title="" class="ltx_ref">22</a>]</cite>.
In this experiment, we evaluate <span title="" class="ltx_glossaryref">LLG</span> + against two techniques of noise addition:

<span id="S6.I7" class="ltx_inline-enumerate">
<span id="S6.I7.i1" class="ltx_inline-item"><span class="ltx_tag ltx_tag_inline-item">(1)</span> <span id="S6.I7.i1.1" class="ltx_text">Pure noise: we add noise on gradients before sharing, similar to <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib36" title="" class="ltx_ref">36</a>, <a href="#bib.bib41" title="" class="ltx_ref">41</a>]</cite>, where no formal privacy properties are guaranteed, and
</span></span>
<span id="S6.I7.i2" class="ltx_inline-item"><span class="ltx_tag ltx_tag_inline-item">(2)</span> <span id="S6.I7.i2.2" class="ltx_text">differential privacy: following
differentially private <span title="" class="ltx_glossaryref">FL</span> <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib13" title="" class="ltx_ref">13</a>]</cite>, 
we clip the gradients to bound their sensitivity, then, we add noise to them.
The clipping is defined as
<math id="S6.I7.i2.1.m1.2" class="ltx_Math" alttext="\nabla\bm{W}\leftarrow\nabla\bm{W}/max\left(1,\frac{\|\nabla\bm{W}\|_{2}}{\beta}\right)" display="inline"><semantics id="S6.I7.i2.1.m1.2a"><mrow id="S6.I7.i2.1.m1.2.3" xref="S6.I7.i2.1.m1.2.3.cmml"><mrow id="S6.I7.i2.1.m1.2.3.2" xref="S6.I7.i2.1.m1.2.3.2.cmml"><mo rspace="0.167em" id="S6.I7.i2.1.m1.2.3.2.1" xref="S6.I7.i2.1.m1.2.3.2.1.cmml">∇</mo><mi id="S6.I7.i2.1.m1.2.3.2.2" xref="S6.I7.i2.1.m1.2.3.2.2.cmml">𝑾</mi></mrow><mo stretchy="false" id="S6.I7.i2.1.m1.2.3.1" xref="S6.I7.i2.1.m1.2.3.1.cmml">←</mo><mrow id="S6.I7.i2.1.m1.2.3.3" xref="S6.I7.i2.1.m1.2.3.3.cmml"><mrow id="S6.I7.i2.1.m1.2.3.3.2" xref="S6.I7.i2.1.m1.2.3.3.2.cmml"><mo rspace="0.167em" id="S6.I7.i2.1.m1.2.3.3.2.1" xref="S6.I7.i2.1.m1.2.3.3.2.1.cmml">∇</mo><mrow id="S6.I7.i2.1.m1.2.3.3.2.2" xref="S6.I7.i2.1.m1.2.3.3.2.2.cmml"><mrow id="S6.I7.i2.1.m1.2.3.3.2.2.2" xref="S6.I7.i2.1.m1.2.3.3.2.2.2.cmml"><mi id="S6.I7.i2.1.m1.2.3.3.2.2.2.2" xref="S6.I7.i2.1.m1.2.3.3.2.2.2.2.cmml">𝑾</mi><mo id="S6.I7.i2.1.m1.2.3.3.2.2.2.1" xref="S6.I7.i2.1.m1.2.3.3.2.2.2.1.cmml">/</mo><mi id="S6.I7.i2.1.m1.2.3.3.2.2.2.3" xref="S6.I7.i2.1.m1.2.3.3.2.2.2.3.cmml">m</mi></mrow><mo lspace="0em" rspace="0em" id="S6.I7.i2.1.m1.2.3.3.2.2.1" xref="S6.I7.i2.1.m1.2.3.3.2.2.1.cmml">​</mo><mi id="S6.I7.i2.1.m1.2.3.3.2.2.3" xref="S6.I7.i2.1.m1.2.3.3.2.2.3.cmml">a</mi><mo lspace="0em" rspace="0em" id="S6.I7.i2.1.m1.2.3.3.2.2.1a" xref="S6.I7.i2.1.m1.2.3.3.2.2.1.cmml">​</mo><mi id="S6.I7.i2.1.m1.2.3.3.2.2.4" xref="S6.I7.i2.1.m1.2.3.3.2.2.4.cmml">x</mi></mrow></mrow><mo lspace="0em" rspace="0em" id="S6.I7.i2.1.m1.2.3.3.1" xref="S6.I7.i2.1.m1.2.3.3.1.cmml">​</mo><mrow id="S6.I7.i2.1.m1.2.3.3.3.2" xref="S6.I7.i2.1.m1.2.3.3.3.1.cmml"><mo id="S6.I7.i2.1.m1.2.3.3.3.2.1" xref="S6.I7.i2.1.m1.2.3.3.3.1.cmml">(</mo><mn id="S6.I7.i2.1.m1.2.2" xref="S6.I7.i2.1.m1.2.2.cmml">1</mn><mo id="S6.I7.i2.1.m1.2.3.3.3.2.2" xref="S6.I7.i2.1.m1.2.3.3.3.1.cmml">,</mo><mfrac id="S6.I7.i2.1.m1.1.1" xref="S6.I7.i2.1.m1.1.1.cmml"><msub id="S6.I7.i2.1.m1.1.1.1" xref="S6.I7.i2.1.m1.1.1.1.cmml"><mrow id="S6.I7.i2.1.m1.1.1.1.1.1" xref="S6.I7.i2.1.m1.1.1.1.1.2.cmml"><mo stretchy="false" id="S6.I7.i2.1.m1.1.1.1.1.1.2" xref="S6.I7.i2.1.m1.1.1.1.1.2.1.cmml">‖</mo><mrow id="S6.I7.i2.1.m1.1.1.1.1.1.1" xref="S6.I7.i2.1.m1.1.1.1.1.1.1.cmml"><mo rspace="0.167em" id="S6.I7.i2.1.m1.1.1.1.1.1.1.1" xref="S6.I7.i2.1.m1.1.1.1.1.1.1.1.cmml">∇</mo><mi id="S6.I7.i2.1.m1.1.1.1.1.1.1.2" xref="S6.I7.i2.1.m1.1.1.1.1.1.1.2.cmml">𝑾</mi></mrow><mo stretchy="false" id="S6.I7.i2.1.m1.1.1.1.1.1.3" xref="S6.I7.i2.1.m1.1.1.1.1.2.1.cmml">‖</mo></mrow><mn id="S6.I7.i2.1.m1.1.1.1.3" xref="S6.I7.i2.1.m1.1.1.1.3.cmml">2</mn></msub><mi id="S6.I7.i2.1.m1.1.1.3" xref="S6.I7.i2.1.m1.1.1.3.cmml">β</mi></mfrac><mo id="S6.I7.i2.1.m1.2.3.3.3.2.3" xref="S6.I7.i2.1.m1.2.3.3.3.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S6.I7.i2.1.m1.2b"><apply id="S6.I7.i2.1.m1.2.3.cmml" xref="S6.I7.i2.1.m1.2.3"><ci id="S6.I7.i2.1.m1.2.3.1.cmml" xref="S6.I7.i2.1.m1.2.3.1">←</ci><apply id="S6.I7.i2.1.m1.2.3.2.cmml" xref="S6.I7.i2.1.m1.2.3.2"><ci id="S6.I7.i2.1.m1.2.3.2.1.cmml" xref="S6.I7.i2.1.m1.2.3.2.1">∇</ci><ci id="S6.I7.i2.1.m1.2.3.2.2.cmml" xref="S6.I7.i2.1.m1.2.3.2.2">𝑾</ci></apply><apply id="S6.I7.i2.1.m1.2.3.3.cmml" xref="S6.I7.i2.1.m1.2.3.3"><times id="S6.I7.i2.1.m1.2.3.3.1.cmml" xref="S6.I7.i2.1.m1.2.3.3.1"></times><apply id="S6.I7.i2.1.m1.2.3.3.2.cmml" xref="S6.I7.i2.1.m1.2.3.3.2"><ci id="S6.I7.i2.1.m1.2.3.3.2.1.cmml" xref="S6.I7.i2.1.m1.2.3.3.2.1">∇</ci><apply id="S6.I7.i2.1.m1.2.3.3.2.2.cmml" xref="S6.I7.i2.1.m1.2.3.3.2.2"><times id="S6.I7.i2.1.m1.2.3.3.2.2.1.cmml" xref="S6.I7.i2.1.m1.2.3.3.2.2.1"></times><apply id="S6.I7.i2.1.m1.2.3.3.2.2.2.cmml" xref="S6.I7.i2.1.m1.2.3.3.2.2.2"><divide id="S6.I7.i2.1.m1.2.3.3.2.2.2.1.cmml" xref="S6.I7.i2.1.m1.2.3.3.2.2.2.1"></divide><ci id="S6.I7.i2.1.m1.2.3.3.2.2.2.2.cmml" xref="S6.I7.i2.1.m1.2.3.3.2.2.2.2">𝑾</ci><ci id="S6.I7.i2.1.m1.2.3.3.2.2.2.3.cmml" xref="S6.I7.i2.1.m1.2.3.3.2.2.2.3">𝑚</ci></apply><ci id="S6.I7.i2.1.m1.2.3.3.2.2.3.cmml" xref="S6.I7.i2.1.m1.2.3.3.2.2.3">𝑎</ci><ci id="S6.I7.i2.1.m1.2.3.3.2.2.4.cmml" xref="S6.I7.i2.1.m1.2.3.3.2.2.4">𝑥</ci></apply></apply><interval closure="open" id="S6.I7.i2.1.m1.2.3.3.3.1.cmml" xref="S6.I7.i2.1.m1.2.3.3.3.2"><cn type="integer" id="S6.I7.i2.1.m1.2.2.cmml" xref="S6.I7.i2.1.m1.2.2">1</cn><apply id="S6.I7.i2.1.m1.1.1.cmml" xref="S6.I7.i2.1.m1.1.1"><divide id="S6.I7.i2.1.m1.1.1.2.cmml" xref="S6.I7.i2.1.m1.1.1"></divide><apply id="S6.I7.i2.1.m1.1.1.1.cmml" xref="S6.I7.i2.1.m1.1.1.1"><csymbol cd="ambiguous" id="S6.I7.i2.1.m1.1.1.1.2.cmml" xref="S6.I7.i2.1.m1.1.1.1">subscript</csymbol><apply id="S6.I7.i2.1.m1.1.1.1.1.2.cmml" xref="S6.I7.i2.1.m1.1.1.1.1.1"><csymbol cd="latexml" id="S6.I7.i2.1.m1.1.1.1.1.2.1.cmml" xref="S6.I7.i2.1.m1.1.1.1.1.1.2">norm</csymbol><apply id="S6.I7.i2.1.m1.1.1.1.1.1.1.cmml" xref="S6.I7.i2.1.m1.1.1.1.1.1.1"><ci id="S6.I7.i2.1.m1.1.1.1.1.1.1.1.cmml" xref="S6.I7.i2.1.m1.1.1.1.1.1.1.1">∇</ci><ci id="S6.I7.i2.1.m1.1.1.1.1.1.1.2.cmml" xref="S6.I7.i2.1.m1.1.1.1.1.1.1.2">𝑾</ci></apply></apply><cn type="integer" id="S6.I7.i2.1.m1.1.1.1.3.cmml" xref="S6.I7.i2.1.m1.1.1.1.3">2</cn></apply><ci id="S6.I7.i2.1.m1.1.1.3.cmml" xref="S6.I7.i2.1.m1.1.1.3">𝛽</ci></apply></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I7.i2.1.m1.2c">\nabla\bm{W}\leftarrow\nabla\bm{W}/max\left(1,\frac{\|\nabla\bm{W}\|_{2}}{\beta}\right)</annotation></semantics></math>, where <math id="S6.I7.i2.2.m2.1" class="ltx_Math" alttext="\beta" display="inline"><semantics id="S6.I7.i2.2.m2.1a"><mi id="S6.I7.i2.2.m2.1.1" xref="S6.I7.i2.2.m2.1.1.cmml">β</mi><annotation-xml encoding="MathML-Content" id="S6.I7.i2.2.m2.1b"><ci id="S6.I7.i2.2.m2.1.1.cmml" xref="S6.I7.i2.2.m2.1.1">𝛽</ci></annotation-xml><annotation encoding="application/x-tex" id="S6.I7.i2.2.m2.1c">\beta</annotation></semantics></math> is the gradient norm bound.
</span></span>
</span> 
In both noise addition techniques, we use the Gaussian noise distribution.
For pure noise, the standard deviation of the noise distribution is <math id="S6.SS5.SSS1.p1.1.m1.3" class="ltx_Math" alttext="\sigma\in\{0.01,0.1,1\}" display="inline"><semantics id="S6.SS5.SSS1.p1.1.m1.3a"><mrow id="S6.SS5.SSS1.p1.1.m1.3.4" xref="S6.SS5.SSS1.p1.1.m1.3.4.cmml"><mi id="S6.SS5.SSS1.p1.1.m1.3.4.2" xref="S6.SS5.SSS1.p1.1.m1.3.4.2.cmml">σ</mi><mo id="S6.SS5.SSS1.p1.1.m1.3.4.1" xref="S6.SS5.SSS1.p1.1.m1.3.4.1.cmml">∈</mo><mrow id="S6.SS5.SSS1.p1.1.m1.3.4.3.2" xref="S6.SS5.SSS1.p1.1.m1.3.4.3.1.cmml"><mo stretchy="false" id="S6.SS5.SSS1.p1.1.m1.3.4.3.2.1" xref="S6.SS5.SSS1.p1.1.m1.3.4.3.1.cmml">{</mo><mn id="S6.SS5.SSS1.p1.1.m1.1.1" xref="S6.SS5.SSS1.p1.1.m1.1.1.cmml">0.01</mn><mo id="S6.SS5.SSS1.p1.1.m1.3.4.3.2.2" xref="S6.SS5.SSS1.p1.1.m1.3.4.3.1.cmml">,</mo><mn id="S6.SS5.SSS1.p1.1.m1.2.2" xref="S6.SS5.SSS1.p1.1.m1.2.2.cmml">0.1</mn><mo id="S6.SS5.SSS1.p1.1.m1.3.4.3.2.3" xref="S6.SS5.SSS1.p1.1.m1.3.4.3.1.cmml">,</mo><mn id="S6.SS5.SSS1.p1.1.m1.3.3" xref="S6.SS5.SSS1.p1.1.m1.3.3.cmml">1</mn><mo stretchy="false" id="S6.SS5.SSS1.p1.1.m1.3.4.3.2.4" xref="S6.SS5.SSS1.p1.1.m1.3.4.3.1.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S6.SS5.SSS1.p1.1.m1.3b"><apply id="S6.SS5.SSS1.p1.1.m1.3.4.cmml" xref="S6.SS5.SSS1.p1.1.m1.3.4"><in id="S6.SS5.SSS1.p1.1.m1.3.4.1.cmml" xref="S6.SS5.SSS1.p1.1.m1.3.4.1"></in><ci id="S6.SS5.SSS1.p1.1.m1.3.4.2.cmml" xref="S6.SS5.SSS1.p1.1.m1.3.4.2">𝜎</ci><set id="S6.SS5.SSS1.p1.1.m1.3.4.3.1.cmml" xref="S6.SS5.SSS1.p1.1.m1.3.4.3.2"><cn type="float" id="S6.SS5.SSS1.p1.1.m1.1.1.cmml" xref="S6.SS5.SSS1.p1.1.m1.1.1">0.01</cn><cn type="float" id="S6.SS5.SSS1.p1.1.m1.2.2.cmml" xref="S6.SS5.SSS1.p1.1.m1.2.2">0.1</cn><cn type="integer" id="S6.SS5.SSS1.p1.1.m1.3.3.cmml" xref="S6.SS5.SSS1.p1.1.m1.3.3">1</cn></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.SS5.SSS1.p1.1.m1.3c">\sigma\in\{0.01,0.1,1\}</annotation></semantics></math> with central 0.
For differential privacy, we use <math id="S6.SS5.SSS1.p1.2.m2.1" class="ltx_Math" alttext="\sigma=0.1" display="inline"><semantics id="S6.SS5.SSS1.p1.2.m2.1a"><mrow id="S6.SS5.SSS1.p1.2.m2.1.1" xref="S6.SS5.SSS1.p1.2.m2.1.1.cmml"><mi id="S6.SS5.SSS1.p1.2.m2.1.1.2" xref="S6.SS5.SSS1.p1.2.m2.1.1.2.cmml">σ</mi><mo id="S6.SS5.SSS1.p1.2.m2.1.1.1" xref="S6.SS5.SSS1.p1.2.m2.1.1.1.cmml">=</mo><mn id="S6.SS5.SSS1.p1.2.m2.1.1.3" xref="S6.SS5.SSS1.p1.2.m2.1.1.3.cmml">0.1</mn></mrow><annotation-xml encoding="MathML-Content" id="S6.SS5.SSS1.p1.2.m2.1b"><apply id="S6.SS5.SSS1.p1.2.m2.1.1.cmml" xref="S6.SS5.SSS1.p1.2.m2.1.1"><eq id="S6.SS5.SSS1.p1.2.m2.1.1.1.cmml" xref="S6.SS5.SSS1.p1.2.m2.1.1.1"></eq><ci id="S6.SS5.SSS1.p1.2.m2.1.1.2.cmml" xref="S6.SS5.SSS1.p1.2.m2.1.1.2">𝜎</ci><cn type="float" id="S6.SS5.SSS1.p1.2.m2.1.1.3.cmml" xref="S6.SS5.SSS1.p1.2.m2.1.1.3">0.1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.SS5.SSS1.p1.2.m2.1c">\sigma=0.1</annotation></semantics></math> and varying norm bound <math id="S6.SS5.SSS1.p1.3.m3.3" class="ltx_Math" alttext="\beta\in\{1,5,10\}" display="inline"><semantics id="S6.SS5.SSS1.p1.3.m3.3a"><mrow id="S6.SS5.SSS1.p1.3.m3.3.4" xref="S6.SS5.SSS1.p1.3.m3.3.4.cmml"><mi id="S6.SS5.SSS1.p1.3.m3.3.4.2" xref="S6.SS5.SSS1.p1.3.m3.3.4.2.cmml">β</mi><mo id="S6.SS5.SSS1.p1.3.m3.3.4.1" xref="S6.SS5.SSS1.p1.3.m3.3.4.1.cmml">∈</mo><mrow id="S6.SS5.SSS1.p1.3.m3.3.4.3.2" xref="S6.SS5.SSS1.p1.3.m3.3.4.3.1.cmml"><mo stretchy="false" id="S6.SS5.SSS1.p1.3.m3.3.4.3.2.1" xref="S6.SS5.SSS1.p1.3.m3.3.4.3.1.cmml">{</mo><mn id="S6.SS5.SSS1.p1.3.m3.1.1" xref="S6.SS5.SSS1.p1.3.m3.1.1.cmml">1</mn><mo id="S6.SS5.SSS1.p1.3.m3.3.4.3.2.2" xref="S6.SS5.SSS1.p1.3.m3.3.4.3.1.cmml">,</mo><mn id="S6.SS5.SSS1.p1.3.m3.2.2" xref="S6.SS5.SSS1.p1.3.m3.2.2.cmml">5</mn><mo id="S6.SS5.SSS1.p1.3.m3.3.4.3.2.3" xref="S6.SS5.SSS1.p1.3.m3.3.4.3.1.cmml">,</mo><mn id="S6.SS5.SSS1.p1.3.m3.3.3" xref="S6.SS5.SSS1.p1.3.m3.3.3.cmml">10</mn><mo stretchy="false" id="S6.SS5.SSS1.p1.3.m3.3.4.3.2.4" xref="S6.SS5.SSS1.p1.3.m3.3.4.3.1.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S6.SS5.SSS1.p1.3.m3.3b"><apply id="S6.SS5.SSS1.p1.3.m3.3.4.cmml" xref="S6.SS5.SSS1.p1.3.m3.3.4"><in id="S6.SS5.SSS1.p1.3.m3.3.4.1.cmml" xref="S6.SS5.SSS1.p1.3.m3.3.4.1"></in><ci id="S6.SS5.SSS1.p1.3.m3.3.4.2.cmml" xref="S6.SS5.SSS1.p1.3.m3.3.4.2">𝛽</ci><set id="S6.SS5.SSS1.p1.3.m3.3.4.3.1.cmml" xref="S6.SS5.SSS1.p1.3.m3.3.4.3.2"><cn type="integer" id="S6.SS5.SSS1.p1.3.m3.1.1.cmml" xref="S6.SS5.SSS1.p1.3.m3.1.1">1</cn><cn type="integer" id="S6.SS5.SSS1.p1.3.m3.2.2.cmml" xref="S6.SS5.SSS1.p1.3.m3.2.2">5</cn><cn type="integer" id="S6.SS5.SSS1.p1.3.m3.3.3.cmml" xref="S6.SS5.SSS1.p1.3.m3.3.3">10</cn></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.SS5.SSS1.p1.3.m3.3c">\beta\in\{1,5,10\}</annotation></semantics></math>.
We track the privacy loss for the model trained with differential privacy using the moments accountant <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib1" title="" class="ltx_ref">1</a>]</cite>.
For <math id="S6.SS5.SSS1.p1.4.m4.1" class="ltx_Math" alttext="100" display="inline"><semantics id="S6.SS5.SSS1.p1.4.m4.1a"><mn id="S6.SS5.SSS1.p1.4.m4.1.1" xref="S6.SS5.SSS1.p1.4.m4.1.1.cmml">100</mn><annotation-xml encoding="MathML-Content" id="S6.SS5.SSS1.p1.4.m4.1b"><cn type="integer" id="S6.SS5.SSS1.p1.4.m4.1.1.cmml" xref="S6.SS5.SSS1.p1.4.m4.1.1">100</cn></annotation-xml><annotation encoding="application/x-tex" id="S6.SS5.SSS1.p1.4.m4.1c">100</annotation></semantics></math> communication rounds and <math id="S6.SS5.SSS1.p1.5.m5.1" class="ltx_Math" alttext="\delta=10^{-5}" display="inline"><semantics id="S6.SS5.SSS1.p1.5.m5.1a"><mrow id="S6.SS5.SSS1.p1.5.m5.1.1" xref="S6.SS5.SSS1.p1.5.m5.1.1.cmml"><mi id="S6.SS5.SSS1.p1.5.m5.1.1.2" xref="S6.SS5.SSS1.p1.5.m5.1.1.2.cmml">δ</mi><mo id="S6.SS5.SSS1.p1.5.m5.1.1.1" xref="S6.SS5.SSS1.p1.5.m5.1.1.1.cmml">=</mo><msup id="S6.SS5.SSS1.p1.5.m5.1.1.3" xref="S6.SS5.SSS1.p1.5.m5.1.1.3.cmml"><mn id="S6.SS5.SSS1.p1.5.m5.1.1.3.2" xref="S6.SS5.SSS1.p1.5.m5.1.1.3.2.cmml">10</mn><mrow id="S6.SS5.SSS1.p1.5.m5.1.1.3.3" xref="S6.SS5.SSS1.p1.5.m5.1.1.3.3.cmml"><mo id="S6.SS5.SSS1.p1.5.m5.1.1.3.3a" xref="S6.SS5.SSS1.p1.5.m5.1.1.3.3.cmml">−</mo><mn id="S6.SS5.SSS1.p1.5.m5.1.1.3.3.2" xref="S6.SS5.SSS1.p1.5.m5.1.1.3.3.2.cmml">5</mn></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S6.SS5.SSS1.p1.5.m5.1b"><apply id="S6.SS5.SSS1.p1.5.m5.1.1.cmml" xref="S6.SS5.SSS1.p1.5.m5.1.1"><eq id="S6.SS5.SSS1.p1.5.m5.1.1.1.cmml" xref="S6.SS5.SSS1.p1.5.m5.1.1.1"></eq><ci id="S6.SS5.SSS1.p1.5.m5.1.1.2.cmml" xref="S6.SS5.SSS1.p1.5.m5.1.1.2">𝛿</ci><apply id="S6.SS5.SSS1.p1.5.m5.1.1.3.cmml" xref="S6.SS5.SSS1.p1.5.m5.1.1.3"><csymbol cd="ambiguous" id="S6.SS5.SSS1.p1.5.m5.1.1.3.1.cmml" xref="S6.SS5.SSS1.p1.5.m5.1.1.3">superscript</csymbol><cn type="integer" id="S6.SS5.SSS1.p1.5.m5.1.1.3.2.cmml" xref="S6.SS5.SSS1.p1.5.m5.1.1.3.2">10</cn><apply id="S6.SS5.SSS1.p1.5.m5.1.1.3.3.cmml" xref="S6.SS5.SSS1.p1.5.m5.1.1.3.3"><minus id="S6.SS5.SSS1.p1.5.m5.1.1.3.3.1.cmml" xref="S6.SS5.SSS1.p1.5.m5.1.1.3.3"></minus><cn type="integer" id="S6.SS5.SSS1.p1.5.m5.1.1.3.3.2.cmml" xref="S6.SS5.SSS1.p1.5.m5.1.1.3.3.2">5</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.SS5.SSS1.p1.5.m5.1c">\delta=10^{-5}</annotation></semantics></math>, the privacy budget is estimated <math id="S6.SS5.SSS1.p1.6.m6.1" class="ltx_Math" alttext="\epsilon\approx 11.5" display="inline"><semantics id="S6.SS5.SSS1.p1.6.m6.1a"><mrow id="S6.SS5.SSS1.p1.6.m6.1.1" xref="S6.SS5.SSS1.p1.6.m6.1.1.cmml"><mi id="S6.SS5.SSS1.p1.6.m6.1.1.2" xref="S6.SS5.SSS1.p1.6.m6.1.1.2.cmml">ϵ</mi><mo id="S6.SS5.SSS1.p1.6.m6.1.1.1" xref="S6.SS5.SSS1.p1.6.m6.1.1.1.cmml">≈</mo><mn id="S6.SS5.SSS1.p1.6.m6.1.1.3" xref="S6.SS5.SSS1.p1.6.m6.1.1.3.cmml">11.5</mn></mrow><annotation-xml encoding="MathML-Content" id="S6.SS5.SSS1.p1.6.m6.1b"><apply id="S6.SS5.SSS1.p1.6.m6.1.1.cmml" xref="S6.SS5.SSS1.p1.6.m6.1.1"><approx id="S6.SS5.SSS1.p1.6.m6.1.1.1.cmml" xref="S6.SS5.SSS1.p1.6.m6.1.1.1"></approx><ci id="S6.SS5.SSS1.p1.6.m6.1.1.2.cmml" xref="S6.SS5.SSS1.p1.6.m6.1.1.2">italic-ϵ</ci><cn type="float" id="S6.SS5.SSS1.p1.6.m6.1.1.3.cmml" xref="S6.SS5.SSS1.p1.6.m6.1.1.3">11.5</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.SS5.SSS1.p1.6.m6.1c">\epsilon\approx 11.5</annotation></semantics></math>.</p>
</div>
<div id="S6.SS5.SSS1.p2" class="ltx_para">
<dl id="S6.I8" class="ltx_description">
<dt id="S6.I8.ix1" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span id="S6.I8.ix1.1.1.1" class="ltx_text ltx_font_bold">FedSGD.</span></span></dt>
<dd class="ltx_item">
<div id="S6.I8.ix1.p1" class="ltx_para">
<p id="S6.I8.ix1.p1.4" class="ltx_p">In Figure <a href="#S6.F7" title="Figure 7 ‣ 6.4 Model convergence status ‣ 6 Empirical evaluation ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">7</span></a> (a), we can see that the higher the magnitude of the noise the less accurate the attack.
This is expected as the attack partially uses the magnitude of the gradients to infer the labels following Property 2. Interestingly, we observe that the noise has less effect on the attack when the batch size is increasing.
We investigated this observation further by inspecting the values of the gradients before and after noise addition.
Our empirical analysis showed earlier in Figure <a href="#S4.F3" title="Figure 3 ‣ Proof ‣ 4 Gradient analysis ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a> (a, b) that the majority of gradients <math id="S6.I8.ix1.p1.1.m1.1" class="ltx_Math" alttext="g_{i}" display="inline"><semantics id="S6.I8.ix1.p1.1.m1.1a"><msub id="S6.I8.ix1.p1.1.m1.1.1" xref="S6.I8.ix1.p1.1.m1.1.1.cmml"><mi id="S6.I8.ix1.p1.1.m1.1.1.2" xref="S6.I8.ix1.p1.1.m1.1.1.2.cmml">g</mi><mi id="S6.I8.ix1.p1.1.m1.1.1.3" xref="S6.I8.ix1.p1.1.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S6.I8.ix1.p1.1.m1.1b"><apply id="S6.I8.ix1.p1.1.m1.1.1.cmml" xref="S6.I8.ix1.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S6.I8.ix1.p1.1.m1.1.1.1.cmml" xref="S6.I8.ix1.p1.1.m1.1.1">subscript</csymbol><ci id="S6.I8.ix1.p1.1.m1.1.1.2.cmml" xref="S6.I8.ix1.p1.1.m1.1.1.2">𝑔</ci><ci id="S6.I8.ix1.p1.1.m1.1.1.3.cmml" xref="S6.I8.ix1.p1.1.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I8.ix1.p1.1.m1.1c">g_{i}</annotation></semantics></math> have values close to zero when they correspond to labels not present in the batch. Adding noise to such small gradient values might lead to flipping their sign, and consequently, disrupting Property 1, which is one of the basis of the attack.
For batch sizes <math id="S6.I8.ix1.p1.2.m2.1" class="ltx_Math" alttext="B&lt;n" display="inline"><semantics id="S6.I8.ix1.p1.2.m2.1a"><mrow id="S6.I8.ix1.p1.2.m2.1.1" xref="S6.I8.ix1.p1.2.m2.1.1.cmml"><mi id="S6.I8.ix1.p1.2.m2.1.1.2" xref="S6.I8.ix1.p1.2.m2.1.1.2.cmml">B</mi><mo id="S6.I8.ix1.p1.2.m2.1.1.1" xref="S6.I8.ix1.p1.2.m2.1.1.1.cmml">&lt;</mo><mi id="S6.I8.ix1.p1.2.m2.1.1.3" xref="S6.I8.ix1.p1.2.m2.1.1.3.cmml">n</mi></mrow><annotation-xml encoding="MathML-Content" id="S6.I8.ix1.p1.2.m2.1b"><apply id="S6.I8.ix1.p1.2.m2.1.1.cmml" xref="S6.I8.ix1.p1.2.m2.1.1"><lt id="S6.I8.ix1.p1.2.m2.1.1.1.cmml" xref="S6.I8.ix1.p1.2.m2.1.1.1"></lt><ci id="S6.I8.ix1.p1.2.m2.1.1.2.cmml" xref="S6.I8.ix1.p1.2.m2.1.1.2">𝐵</ci><ci id="S6.I8.ix1.p1.2.m2.1.1.3.cmml" xref="S6.I8.ix1.p1.2.m2.1.1.3">𝑛</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I8.ix1.p1.2.m2.1c">B&lt;n</annotation></semantics></math> with <math id="S6.I8.ix1.p1.3.m3.1" class="ltx_Math" alttext="n" display="inline"><semantics id="S6.I8.ix1.p1.3.m3.1a"><mi id="S6.I8.ix1.p1.3.m3.1.1" xref="S6.I8.ix1.p1.3.m3.1.1.cmml">n</mi><annotation-xml encoding="MathML-Content" id="S6.I8.ix1.p1.3.m3.1b"><ci id="S6.I8.ix1.p1.3.m3.1.1.cmml" xref="S6.I8.ix1.p1.3.m3.1.1">𝑛</ci></annotation-xml><annotation encoding="application/x-tex" id="S6.I8.ix1.p1.3.m3.1c">n</annotation></semantics></math> as the number of classes, not all the labels will be present in the batch, so the flipping effect can be prominent on the attack success rate.
Whereas, in bigger batches, it is more likely to have more differing labels, thus, their gradients values are not close to zero.
As a result, adding a small amount of noise does not lead to sign flipping.
This also explains the stability of <span title="" class="ltx_glossaryref">ASR</span> values when <math id="S6.I8.ix1.p1.4.m4.1" class="ltx_Math" alttext="B\geq n" display="inline"><semantics id="S6.I8.ix1.p1.4.m4.1a"><mrow id="S6.I8.ix1.p1.4.m4.1.1" xref="S6.I8.ix1.p1.4.m4.1.1.cmml"><mi id="S6.I8.ix1.p1.4.m4.1.1.2" xref="S6.I8.ix1.p1.4.m4.1.1.2.cmml">B</mi><mo id="S6.I8.ix1.p1.4.m4.1.1.1" xref="S6.I8.ix1.p1.4.m4.1.1.1.cmml">≥</mo><mi id="S6.I8.ix1.p1.4.m4.1.1.3" xref="S6.I8.ix1.p1.4.m4.1.1.3.cmml">n</mi></mrow><annotation-xml encoding="MathML-Content" id="S6.I8.ix1.p1.4.m4.1b"><apply id="S6.I8.ix1.p1.4.m4.1.1.cmml" xref="S6.I8.ix1.p1.4.m4.1.1"><geq id="S6.I8.ix1.p1.4.m4.1.1.1.cmml" xref="S6.I8.ix1.p1.4.m4.1.1.1"></geq><ci id="S6.I8.ix1.p1.4.m4.1.1.2.cmml" xref="S6.I8.ix1.p1.4.m4.1.1.2">𝐵</ci><ci id="S6.I8.ix1.p1.4.m4.1.1.3.cmml" xref="S6.I8.ix1.p1.4.m4.1.1.3">𝑛</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I8.ix1.p1.4.m4.1c">B\geq n</annotation></semantics></math>. 
Overall, adding noise does not eliminate the risk completely while reducing the model accuracy (see Table <a href="#S6.T1" title="Table 1 ‣ 6.5.2 Gradient compression ‣ 6.5 Defense mechanisms ‣ 6 Empirical evaluation ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>). 
As we can see, <span title="" class="ltx_glossaryref">LLG</span> + maintains higher <span title="" class="ltx_glossaryref">ASRs</span> than the random guess for all the test noise scales.</p>
</div>
<div id="S6.I8.ix1.p2" class="ltx_para">
<p id="S6.I8.ix1.p2.3" class="ltx_p">Figure <a href="#S6.F7" title="Figure 7 ‣ 6.4 Model convergence status ‣ 6 Empirical evaluation ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">7</span></a> (b) shows that adding noise of <math id="S6.I8.ix1.p2.1.m1.1" class="ltx_Math" alttext="\sigma=0.1" display="inline"><semantics id="S6.I8.ix1.p2.1.m1.1a"><mrow id="S6.I8.ix1.p2.1.m1.1.1" xref="S6.I8.ix1.p2.1.m1.1.1.cmml"><mi id="S6.I8.ix1.p2.1.m1.1.1.2" xref="S6.I8.ix1.p2.1.m1.1.1.2.cmml">σ</mi><mo id="S6.I8.ix1.p2.1.m1.1.1.1" xref="S6.I8.ix1.p2.1.m1.1.1.1.cmml">=</mo><mn id="S6.I8.ix1.p2.1.m1.1.1.3" xref="S6.I8.ix1.p2.1.m1.1.1.3.cmml">0.1</mn></mrow><annotation-xml encoding="MathML-Content" id="S6.I8.ix1.p2.1.m1.1b"><apply id="S6.I8.ix1.p2.1.m1.1.1.cmml" xref="S6.I8.ix1.p2.1.m1.1.1"><eq id="S6.I8.ix1.p2.1.m1.1.1.1.cmml" xref="S6.I8.ix1.p2.1.m1.1.1.1"></eq><ci id="S6.I8.ix1.p2.1.m1.1.1.2.cmml" xref="S6.I8.ix1.p2.1.m1.1.1.2">𝜎</ci><cn type="float" id="S6.I8.ix1.p2.1.m1.1.1.3.cmml" xref="S6.I8.ix1.p2.1.m1.1.1.3">0.1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I8.ix1.p2.1.m1.1c">\sigma=0.1</annotation></semantics></math> with clipping bound <math id="S6.I8.ix1.p2.2.m2.1" class="ltx_Math" alttext="\beta=1" display="inline"><semantics id="S6.I8.ix1.p2.2.m2.1a"><mrow id="S6.I8.ix1.p2.2.m2.1.1" xref="S6.I8.ix1.p2.2.m2.1.1.cmml"><mi id="S6.I8.ix1.p2.2.m2.1.1.2" xref="S6.I8.ix1.p2.2.m2.1.1.2.cmml">β</mi><mo id="S6.I8.ix1.p2.2.m2.1.1.1" xref="S6.I8.ix1.p2.2.m2.1.1.1.cmml">=</mo><mn id="S6.I8.ix1.p2.2.m2.1.1.3" xref="S6.I8.ix1.p2.2.m2.1.1.3.cmml">1</mn></mrow><annotation-xml encoding="MathML-Content" id="S6.I8.ix1.p2.2.m2.1b"><apply id="S6.I8.ix1.p2.2.m2.1.1.cmml" xref="S6.I8.ix1.p2.2.m2.1.1"><eq id="S6.I8.ix1.p2.2.m2.1.1.1.cmml" xref="S6.I8.ix1.p2.2.m2.1.1.1"></eq><ci id="S6.I8.ix1.p2.2.m2.1.1.2.cmml" xref="S6.I8.ix1.p2.2.m2.1.1.2">𝛽</ci><cn type="integer" id="S6.I8.ix1.p2.2.m2.1.1.3.cmml" xref="S6.I8.ix1.p2.2.m2.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I8.ix1.p2.2.m2.1c">\beta=1</annotation></semantics></math>, is an effective defense against <span title="" class="ltx_glossaryref">LLG</span> + for batch sizes <math id="S6.I8.ix1.p2.3.m3.1" class="ltx_Math" alttext="B&gt;16" display="inline"><semantics id="S6.I8.ix1.p2.3.m3.1a"><mrow id="S6.I8.ix1.p2.3.m3.1.1" xref="S6.I8.ix1.p2.3.m3.1.1.cmml"><mi id="S6.I8.ix1.p2.3.m3.1.1.2" xref="S6.I8.ix1.p2.3.m3.1.1.2.cmml">B</mi><mo id="S6.I8.ix1.p2.3.m3.1.1.1" xref="S6.I8.ix1.p2.3.m3.1.1.1.cmml">&gt;</mo><mn id="S6.I8.ix1.p2.3.m3.1.1.3" xref="S6.I8.ix1.p2.3.m3.1.1.3.cmml">16</mn></mrow><annotation-xml encoding="MathML-Content" id="S6.I8.ix1.p2.3.m3.1b"><apply id="S6.I8.ix1.p2.3.m3.1.1.cmml" xref="S6.I8.ix1.p2.3.m3.1.1"><gt id="S6.I8.ix1.p2.3.m3.1.1.1.cmml" xref="S6.I8.ix1.p2.3.m3.1.1.1"></gt><ci id="S6.I8.ix1.p2.3.m3.1.1.2.cmml" xref="S6.I8.ix1.p2.3.m3.1.1.2">𝐵</ci><cn type="integer" id="S6.I8.ix1.p2.3.m3.1.1.3.cmml" xref="S6.I8.ix1.p2.3.m3.1.1.3">16</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I8.ix1.p2.3.m3.1c">B&gt;16</annotation></semantics></math>, where the <span title="" class="ltx_glossaryref">ASR</span> drops beyond the random guess.
However, this leads to a significant drop in the model accuracy as shown in Table <a href="#S6.T1" title="Table 1 ‣ 6.5.2 Gradient compression ‣ 6.5 Defense mechanisms ‣ 6 Empirical evaluation ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>.</p>
</div>
</dd>
<dt id="S6.I8.ix2" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span id="S6.I8.ix2.1.1.1" class="ltx_text ltx_font_bold">FedAvg.</span></span></dt>
<dd class="ltx_item">
<div id="S6.I8.ix2.p1" class="ltx_para">
<p id="S6.I8.ix2.p1.8" class="ltx_p">Unlike in FedSGD, the magnitude of the pure noise does not have a clear effect on <span title="" class="ltx_glossaryref">ASR</span> for FedAvg as shown in Figure <a href="#S6.F7" title="Figure 7 ‣ 6.4 Model convergence status ‣ 6 Empirical evaluation ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">7</span></a> (d).
That is due to the fact that the shared gradients are generated from <math id="S6.I8.ix2.p1.1.m1.1" class="ltx_Math" alttext="10" display="inline"><semantics id="S6.I8.ix2.p1.1.m1.1a"><mn id="S6.I8.ix2.p1.1.m1.1.1" xref="S6.I8.ix2.p1.1.m1.1.1.cmml">10</mn><annotation-xml encoding="MathML-Content" id="S6.I8.ix2.p1.1.m1.1b"><cn type="integer" id="S6.I8.ix2.p1.1.m1.1.1.cmml" xref="S6.I8.ix2.p1.1.m1.1.1">10</cn></annotation-xml><annotation encoding="application/x-tex" id="S6.I8.ix2.p1.1.m1.1c">10</annotation></semantics></math> batches.
Thus, the gradient values reflect <math id="S6.I8.ix2.p1.2.m2.1" class="ltx_Math" alttext="10\times B" display="inline"><semantics id="S6.I8.ix2.p1.2.m2.1a"><mrow id="S6.I8.ix2.p1.2.m2.1.1" xref="S6.I8.ix2.p1.2.m2.1.1.cmml"><mn id="S6.I8.ix2.p1.2.m2.1.1.2" xref="S6.I8.ix2.p1.2.m2.1.1.2.cmml">10</mn><mo lspace="0.222em" rspace="0.222em" id="S6.I8.ix2.p1.2.m2.1.1.1" xref="S6.I8.ix2.p1.2.m2.1.1.1.cmml">×</mo><mi id="S6.I8.ix2.p1.2.m2.1.1.3" xref="S6.I8.ix2.p1.2.m2.1.1.3.cmml">B</mi></mrow><annotation-xml encoding="MathML-Content" id="S6.I8.ix2.p1.2.m2.1b"><apply id="S6.I8.ix2.p1.2.m2.1.1.cmml" xref="S6.I8.ix2.p1.2.m2.1.1"><times id="S6.I8.ix2.p1.2.m2.1.1.1.cmml" xref="S6.I8.ix2.p1.2.m2.1.1.1"></times><cn type="integer" id="S6.I8.ix2.p1.2.m2.1.1.2.cmml" xref="S6.I8.ix2.p1.2.m2.1.1.2">10</cn><ci id="S6.I8.ix2.p1.2.m2.1.1.3.cmml" xref="S6.I8.ix2.p1.2.m2.1.1.3">𝐵</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I8.ix2.p1.2.m2.1c">10\times B</annotation></semantics></math> labels, which is always greater or equal <math id="S6.I8.ix2.p1.3.m3.1" class="ltx_Math" alttext="n" display="inline"><semantics id="S6.I8.ix2.p1.3.m3.1a"><mi id="S6.I8.ix2.p1.3.m3.1.1" xref="S6.I8.ix2.p1.3.m3.1.1.cmml">n</mi><annotation-xml encoding="MathML-Content" id="S6.I8.ix2.p1.3.m3.1b"><ci id="S6.I8.ix2.p1.3.m3.1.1.cmml" xref="S6.I8.ix2.p1.3.m3.1.1">𝑛</ci></annotation-xml><annotation encoding="application/x-tex" id="S6.I8.ix2.p1.3.m3.1c">n</annotation></semantics></math> for MNIST, where <math id="S6.I8.ix2.p1.4.m4.1" class="ltx_Math" alttext="n=10" display="inline"><semantics id="S6.I8.ix2.p1.4.m4.1a"><mrow id="S6.I8.ix2.p1.4.m4.1.1" xref="S6.I8.ix2.p1.4.m4.1.1.cmml"><mi id="S6.I8.ix2.p1.4.m4.1.1.2" xref="S6.I8.ix2.p1.4.m4.1.1.2.cmml">n</mi><mo id="S6.I8.ix2.p1.4.m4.1.1.1" xref="S6.I8.ix2.p1.4.m4.1.1.1.cmml">=</mo><mn id="S6.I8.ix2.p1.4.m4.1.1.3" xref="S6.I8.ix2.p1.4.m4.1.1.3.cmml">10</mn></mrow><annotation-xml encoding="MathML-Content" id="S6.I8.ix2.p1.4.m4.1b"><apply id="S6.I8.ix2.p1.4.m4.1.1.cmml" xref="S6.I8.ix2.p1.4.m4.1.1"><eq id="S6.I8.ix2.p1.4.m4.1.1.1.cmml" xref="S6.I8.ix2.p1.4.m4.1.1.1"></eq><ci id="S6.I8.ix2.p1.4.m4.1.1.2.cmml" xref="S6.I8.ix2.p1.4.m4.1.1.2">𝑛</ci><cn type="integer" id="S6.I8.ix2.p1.4.m4.1.1.3.cmml" xref="S6.I8.ix2.p1.4.m4.1.1.3">10</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I8.ix2.p1.4.m4.1c">n=10</annotation></semantics></math>.
Therefore, it is likely that most of the labels appear in one of the batches at least, consequently, no gradient values will be close to zero.
As a result, the pure noise does not impact <span title="" class="ltx_glossaryref">ASR</span> remarkably, and <span title="" class="ltx_glossaryref">LLG</span> + remains effective.
In Figure <a href="#S6.F7" title="Figure 7 ‣ 6.4 Model convergence status ‣ 6 Empirical evaluation ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">7</span></a> (e), we notice that noise <math id="S6.I8.ix2.p1.5.m5.1" class="ltx_Math" alttext="\sigma=0.1" display="inline"><semantics id="S6.I8.ix2.p1.5.m5.1a"><mrow id="S6.I8.ix2.p1.5.m5.1.1" xref="S6.I8.ix2.p1.5.m5.1.1.cmml"><mi id="S6.I8.ix2.p1.5.m5.1.1.2" xref="S6.I8.ix2.p1.5.m5.1.1.2.cmml">σ</mi><mo id="S6.I8.ix2.p1.5.m5.1.1.1" xref="S6.I8.ix2.p1.5.m5.1.1.1.cmml">=</mo><mn id="S6.I8.ix2.p1.5.m5.1.1.3" xref="S6.I8.ix2.p1.5.m5.1.1.3.cmml">0.1</mn></mrow><annotation-xml encoding="MathML-Content" id="S6.I8.ix2.p1.5.m5.1b"><apply id="S6.I8.ix2.p1.5.m5.1.1.cmml" xref="S6.I8.ix2.p1.5.m5.1.1"><eq id="S6.I8.ix2.p1.5.m5.1.1.1.cmml" xref="S6.I8.ix2.p1.5.m5.1.1.1"></eq><ci id="S6.I8.ix2.p1.5.m5.1.1.2.cmml" xref="S6.I8.ix2.p1.5.m5.1.1.2">𝜎</ci><cn type="float" id="S6.I8.ix2.p1.5.m5.1.1.3.cmml" xref="S6.I8.ix2.p1.5.m5.1.1.3">0.1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I8.ix2.p1.5.m5.1c">\sigma=0.1</annotation></semantics></math> with bound of <math id="S6.I8.ix2.p1.6.m6.1" class="ltx_Math" alttext="\beta=1" display="inline"><semantics id="S6.I8.ix2.p1.6.m6.1a"><mrow id="S6.I8.ix2.p1.6.m6.1.1" xref="S6.I8.ix2.p1.6.m6.1.1.cmml"><mi id="S6.I8.ix2.p1.6.m6.1.1.2" xref="S6.I8.ix2.p1.6.m6.1.1.2.cmml">β</mi><mo id="S6.I8.ix2.p1.6.m6.1.1.1" xref="S6.I8.ix2.p1.6.m6.1.1.1.cmml">=</mo><mn id="S6.I8.ix2.p1.6.m6.1.1.3" xref="S6.I8.ix2.p1.6.m6.1.1.3.cmml">1</mn></mrow><annotation-xml encoding="MathML-Content" id="S6.I8.ix2.p1.6.m6.1b"><apply id="S6.I8.ix2.p1.6.m6.1.1.cmml" xref="S6.I8.ix2.p1.6.m6.1.1"><eq id="S6.I8.ix2.p1.6.m6.1.1.1.cmml" xref="S6.I8.ix2.p1.6.m6.1.1.1"></eq><ci id="S6.I8.ix2.p1.6.m6.1.1.2.cmml" xref="S6.I8.ix2.p1.6.m6.1.1.2">𝛽</ci><cn type="integer" id="S6.I8.ix2.p1.6.m6.1.1.3.cmml" xref="S6.I8.ix2.p1.6.m6.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I8.ix2.p1.6.m6.1c">\beta=1</annotation></semantics></math> is able to mitigate <span title="" class="ltx_glossaryref">LLG</span> +, reducing its success rate close to <math id="S6.I8.ix2.p1.7.m7.1" class="ltx_Math" alttext="20\%" display="inline"><semantics id="S6.I8.ix2.p1.7.m7.1a"><mrow id="S6.I8.ix2.p1.7.m7.1.1" xref="S6.I8.ix2.p1.7.m7.1.1.cmml"><mn id="S6.I8.ix2.p1.7.m7.1.1.2" xref="S6.I8.ix2.p1.7.m7.1.1.2.cmml">20</mn><mo id="S6.I8.ix2.p1.7.m7.1.1.1" xref="S6.I8.ix2.p1.7.m7.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S6.I8.ix2.p1.7.m7.1b"><apply id="S6.I8.ix2.p1.7.m7.1.1.cmml" xref="S6.I8.ix2.p1.7.m7.1.1"><csymbol cd="latexml" id="S6.I8.ix2.p1.7.m7.1.1.1.cmml" xref="S6.I8.ix2.p1.7.m7.1.1.1">percent</csymbol><cn type="integer" id="S6.I8.ix2.p1.7.m7.1.1.2.cmml" xref="S6.I8.ix2.p1.7.m7.1.1.2">20</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I8.ix2.p1.7.m7.1c">20\%</annotation></semantics></math> for bigger batch sizes.
However, the model accuracy degrades remarkably to <math id="S6.I8.ix2.p1.8.m8.1" class="ltx_Math" alttext="52.5\%" display="inline"><semantics id="S6.I8.ix2.p1.8.m8.1a"><mrow id="S6.I8.ix2.p1.8.m8.1.1" xref="S6.I8.ix2.p1.8.m8.1.1.cmml"><mn id="S6.I8.ix2.p1.8.m8.1.1.2" xref="S6.I8.ix2.p1.8.m8.1.1.2.cmml">52.5</mn><mo id="S6.I8.ix2.p1.8.m8.1.1.1" xref="S6.I8.ix2.p1.8.m8.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S6.I8.ix2.p1.8.m8.1b"><apply id="S6.I8.ix2.p1.8.m8.1.1.cmml" xref="S6.I8.ix2.p1.8.m8.1.1"><csymbol cd="latexml" id="S6.I8.ix2.p1.8.m8.1.1.1.cmml" xref="S6.I8.ix2.p1.8.m8.1.1.1">percent</csymbol><cn type="float" id="S6.I8.ix2.p1.8.m8.1.1.2.cmml" xref="S6.I8.ix2.p1.8.m8.1.1.2">52.5</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I8.ix2.p1.8.m8.1c">52.5\%</annotation></semantics></math>.
Additionally, other differential privacy approaches, e.g., DP-SGD <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib1" title="" class="ltx_ref">1</a>]</cite> can also be applied and investigated as a defense.</p>
</div>
</dd>
</dl>
</div>
</section>
<section id="S6.SS5.SSS2" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">6.5.2 </span>Gradient compression</h4>

<div id="S6.SS5.SSS2.p1" class="ltx_para">
<p id="S6.SS5.SSS2.p1.2" class="ltx_p">Gradient compression <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib23" title="" class="ltx_ref">23</a>, <a href="#bib.bib33" title="" class="ltx_ref">33</a>]</cite> prunes shared gradients with small magnitudes to zero.
Pruning some gradients reduces the information that the attack exploits to extract the labels.
In this set of experiments, we evaluate <span title="" class="ltx_glossaryref">LLG</span> + under various gradient compression ratios <math id="S6.SS5.SSS2.p1.1.m1.3" class="ltx_Math" alttext="{\theta\in\{20\%,40\%,80\%\}}" display="inline"><semantics id="S6.SS5.SSS2.p1.1.m1.3a"><mrow id="S6.SS5.SSS2.p1.1.m1.3.3" xref="S6.SS5.SSS2.p1.1.m1.3.3.cmml"><mi id="S6.SS5.SSS2.p1.1.m1.3.3.5" xref="S6.SS5.SSS2.p1.1.m1.3.3.5.cmml">θ</mi><mo id="S6.SS5.SSS2.p1.1.m1.3.3.4" xref="S6.SS5.SSS2.p1.1.m1.3.3.4.cmml">∈</mo><mrow id="S6.SS5.SSS2.p1.1.m1.3.3.3.3" xref="S6.SS5.SSS2.p1.1.m1.3.3.3.4.cmml"><mo stretchy="false" id="S6.SS5.SSS2.p1.1.m1.3.3.3.3.4" xref="S6.SS5.SSS2.p1.1.m1.3.3.3.4.cmml">{</mo><mrow id="S6.SS5.SSS2.p1.1.m1.1.1.1.1.1" xref="S6.SS5.SSS2.p1.1.m1.1.1.1.1.1.cmml"><mn id="S6.SS5.SSS2.p1.1.m1.1.1.1.1.1.2" xref="S6.SS5.SSS2.p1.1.m1.1.1.1.1.1.2.cmml">20</mn><mo id="S6.SS5.SSS2.p1.1.m1.1.1.1.1.1.1" xref="S6.SS5.SSS2.p1.1.m1.1.1.1.1.1.1.cmml">%</mo></mrow><mo id="S6.SS5.SSS2.p1.1.m1.3.3.3.3.5" xref="S6.SS5.SSS2.p1.1.m1.3.3.3.4.cmml">,</mo><mrow id="S6.SS5.SSS2.p1.1.m1.2.2.2.2.2" xref="S6.SS5.SSS2.p1.1.m1.2.2.2.2.2.cmml"><mn id="S6.SS5.SSS2.p1.1.m1.2.2.2.2.2.2" xref="S6.SS5.SSS2.p1.1.m1.2.2.2.2.2.2.cmml">40</mn><mo id="S6.SS5.SSS2.p1.1.m1.2.2.2.2.2.1" xref="S6.SS5.SSS2.p1.1.m1.2.2.2.2.2.1.cmml">%</mo></mrow><mo id="S6.SS5.SSS2.p1.1.m1.3.3.3.3.6" xref="S6.SS5.SSS2.p1.1.m1.3.3.3.4.cmml">,</mo><mrow id="S6.SS5.SSS2.p1.1.m1.3.3.3.3.3" xref="S6.SS5.SSS2.p1.1.m1.3.3.3.3.3.cmml"><mn id="S6.SS5.SSS2.p1.1.m1.3.3.3.3.3.2" xref="S6.SS5.SSS2.p1.1.m1.3.3.3.3.3.2.cmml">80</mn><mo id="S6.SS5.SSS2.p1.1.m1.3.3.3.3.3.1" xref="S6.SS5.SSS2.p1.1.m1.3.3.3.3.3.1.cmml">%</mo></mrow><mo stretchy="false" id="S6.SS5.SSS2.p1.1.m1.3.3.3.3.7" xref="S6.SS5.SSS2.p1.1.m1.3.3.3.4.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S6.SS5.SSS2.p1.1.m1.3b"><apply id="S6.SS5.SSS2.p1.1.m1.3.3.cmml" xref="S6.SS5.SSS2.p1.1.m1.3.3"><in id="S6.SS5.SSS2.p1.1.m1.3.3.4.cmml" xref="S6.SS5.SSS2.p1.1.m1.3.3.4"></in><ci id="S6.SS5.SSS2.p1.1.m1.3.3.5.cmml" xref="S6.SS5.SSS2.p1.1.m1.3.3.5">𝜃</ci><set id="S6.SS5.SSS2.p1.1.m1.3.3.3.4.cmml" xref="S6.SS5.SSS2.p1.1.m1.3.3.3.3"><apply id="S6.SS5.SSS2.p1.1.m1.1.1.1.1.1.cmml" xref="S6.SS5.SSS2.p1.1.m1.1.1.1.1.1"><csymbol cd="latexml" id="S6.SS5.SSS2.p1.1.m1.1.1.1.1.1.1.cmml" xref="S6.SS5.SSS2.p1.1.m1.1.1.1.1.1.1">percent</csymbol><cn type="integer" id="S6.SS5.SSS2.p1.1.m1.1.1.1.1.1.2.cmml" xref="S6.SS5.SSS2.p1.1.m1.1.1.1.1.1.2">20</cn></apply><apply id="S6.SS5.SSS2.p1.1.m1.2.2.2.2.2.cmml" xref="S6.SS5.SSS2.p1.1.m1.2.2.2.2.2"><csymbol cd="latexml" id="S6.SS5.SSS2.p1.1.m1.2.2.2.2.2.1.cmml" xref="S6.SS5.SSS2.p1.1.m1.2.2.2.2.2.1">percent</csymbol><cn type="integer" id="S6.SS5.SSS2.p1.1.m1.2.2.2.2.2.2.cmml" xref="S6.SS5.SSS2.p1.1.m1.2.2.2.2.2.2">40</cn></apply><apply id="S6.SS5.SSS2.p1.1.m1.3.3.3.3.3.cmml" xref="S6.SS5.SSS2.p1.1.m1.3.3.3.3.3"><csymbol cd="latexml" id="S6.SS5.SSS2.p1.1.m1.3.3.3.3.3.1.cmml" xref="S6.SS5.SSS2.p1.1.m1.3.3.3.3.3.1">percent</csymbol><cn type="integer" id="S6.SS5.SSS2.p1.1.m1.3.3.3.3.3.2.cmml" xref="S6.SS5.SSS2.p1.1.m1.3.3.3.3.3.2">80</cn></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.SS5.SSS2.p1.1.m1.3c">{\theta\in\{20\%,40\%,80\%\}}</annotation></semantics></math>, i.e., <math id="S6.SS5.SSS2.p1.2.m2.1" class="ltx_Math" alttext="\theta" display="inline"><semantics id="S6.SS5.SSS2.p1.2.m2.1a"><mi id="S6.SS5.SSS2.p1.2.m2.1.1" xref="S6.SS5.SSS2.p1.2.m2.1.1.cmml">θ</mi><annotation-xml encoding="MathML-Content" id="S6.SS5.SSS2.p1.2.m2.1b"><ci id="S6.SS5.SSS2.p1.2.m2.1.1.cmml" xref="S6.SS5.SSS2.p1.2.m2.1.1">𝜃</ci></annotation-xml><annotation encoding="application/x-tex" id="S6.SS5.SSS2.p1.2.m2.1c">\theta</annotation></semantics></math> denotes the percentage of the gradients to be discarded in each communication round with the server.
We use the sparsification approach proposed in <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib23" title="" class="ltx_ref">23</a>]</cite>, where users send only the prominent gradients, i.e., with a magnitude larger than a specific threshold.
The threshold is calculated dynamically based on the desired compression ratio. The small gradients are accumulated across multiple communication rounds and sent only when they are large enough.</p>
</div>
<div id="S6.SS5.SSS2.p2" class="ltx_para">
<dl id="S6.I9" class="ltx_description">
<dt id="S6.I9.ix1" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span id="S6.I9.ix1.1.1.1" class="ltx_text ltx_font_bold">FedSGD.</span></span></dt>
<dd class="ltx_item">
<div id="S6.I9.ix1.p1" class="ltx_para">
<p id="S6.I9.ix1.p1.5" class="ltx_p">Figure <a href="#S6.F7" title="Figure 7 ‣ 6.4 Model convergence status ‣ 6 Empirical evaluation ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">7</span></a> (c) illustrates that when the ratio is <math id="S6.I9.ix1.p1.1.m1.1" class="ltx_Math" alttext="\leq 20\%" display="inline"><semantics id="S6.I9.ix1.p1.1.m1.1a"><mrow id="S6.I9.ix1.p1.1.m1.1.1" xref="S6.I9.ix1.p1.1.m1.1.1.cmml"><mi id="S6.I9.ix1.p1.1.m1.1.1.2" xref="S6.I9.ix1.p1.1.m1.1.1.2.cmml"></mi><mo id="S6.I9.ix1.p1.1.m1.1.1.1" xref="S6.I9.ix1.p1.1.m1.1.1.1.cmml">≤</mo><mrow id="S6.I9.ix1.p1.1.m1.1.1.3" xref="S6.I9.ix1.p1.1.m1.1.1.3.cmml"><mn id="S6.I9.ix1.p1.1.m1.1.1.3.2" xref="S6.I9.ix1.p1.1.m1.1.1.3.2.cmml">20</mn><mo id="S6.I9.ix1.p1.1.m1.1.1.3.1" xref="S6.I9.ix1.p1.1.m1.1.1.3.1.cmml">%</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S6.I9.ix1.p1.1.m1.1b"><apply id="S6.I9.ix1.p1.1.m1.1.1.cmml" xref="S6.I9.ix1.p1.1.m1.1.1"><leq id="S6.I9.ix1.p1.1.m1.1.1.1.cmml" xref="S6.I9.ix1.p1.1.m1.1.1.1"></leq><csymbol cd="latexml" id="S6.I9.ix1.p1.1.m1.1.1.2.cmml" xref="S6.I9.ix1.p1.1.m1.1.1.2">absent</csymbol><apply id="S6.I9.ix1.p1.1.m1.1.1.3.cmml" xref="S6.I9.ix1.p1.1.m1.1.1.3"><csymbol cd="latexml" id="S6.I9.ix1.p1.1.m1.1.1.3.1.cmml" xref="S6.I9.ix1.p1.1.m1.1.1.3.1">percent</csymbol><cn type="integer" id="S6.I9.ix1.p1.1.m1.1.1.3.2.cmml" xref="S6.I9.ix1.p1.1.m1.1.1.3.2">20</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I9.ix1.p1.1.m1.1c">\leq 20\%</annotation></semantics></math>, there is only a slight effect on the success rate of the attack.
When the compression ratio is <math id="S6.I9.ix1.p1.2.m2.1" class="ltx_Math" alttext="80\%" display="inline"><semantics id="S6.I9.ix1.p1.2.m2.1a"><mrow id="S6.I9.ix1.p1.2.m2.1.1" xref="S6.I9.ix1.p1.2.m2.1.1.cmml"><mn id="S6.I9.ix1.p1.2.m2.1.1.2" xref="S6.I9.ix1.p1.2.m2.1.1.2.cmml">80</mn><mo id="S6.I9.ix1.p1.2.m2.1.1.1" xref="S6.I9.ix1.p1.2.m2.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S6.I9.ix1.p1.2.m2.1b"><apply id="S6.I9.ix1.p1.2.m2.1.1.cmml" xref="S6.I9.ix1.p1.2.m2.1.1"><csymbol cd="latexml" id="S6.I9.ix1.p1.2.m2.1.1.1.cmml" xref="S6.I9.ix1.p1.2.m2.1.1.1">percent</csymbol><cn type="integer" id="S6.I9.ix1.p1.2.m2.1.1.2.cmml" xref="S6.I9.ix1.p1.2.m2.1.1.2">80</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I9.ix1.p1.2.m2.1c">80\%</annotation></semantics></math>, we notice that <span title="" class="ltx_glossaryref">LLG</span> + becomes completely ineffective for <math id="S6.I9.ix1.p1.3.m3.1" class="ltx_Math" alttext="B\geq 4" display="inline"><semantics id="S6.I9.ix1.p1.3.m3.1a"><mrow id="S6.I9.ix1.p1.3.m3.1.1" xref="S6.I9.ix1.p1.3.m3.1.1.cmml"><mi id="S6.I9.ix1.p1.3.m3.1.1.2" xref="S6.I9.ix1.p1.3.m3.1.1.2.cmml">B</mi><mo id="S6.I9.ix1.p1.3.m3.1.1.1" xref="S6.I9.ix1.p1.3.m3.1.1.1.cmml">≥</mo><mn id="S6.I9.ix1.p1.3.m3.1.1.3" xref="S6.I9.ix1.p1.3.m3.1.1.3.cmml">4</mn></mrow><annotation-xml encoding="MathML-Content" id="S6.I9.ix1.p1.3.m3.1b"><apply id="S6.I9.ix1.p1.3.m3.1.1.cmml" xref="S6.I9.ix1.p1.3.m3.1.1"><geq id="S6.I9.ix1.p1.3.m3.1.1.1.cmml" xref="S6.I9.ix1.p1.3.m3.1.1.1"></geq><ci id="S6.I9.ix1.p1.3.m3.1.1.2.cmml" xref="S6.I9.ix1.p1.3.m3.1.1.2">𝐵</ci><cn type="integer" id="S6.I9.ix1.p1.3.m3.1.1.3.cmml" xref="S6.I9.ix1.p1.3.m3.1.1.3">4</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I9.ix1.p1.3.m3.1c">B\geq 4</annotation></semantics></math>, dropping below the random guess.
Notably, the model accuracy is maintained high <math id="S6.I9.ix1.p1.4.m4.1" class="ltx_Math" alttext="91.9\%" display="inline"><semantics id="S6.I9.ix1.p1.4.m4.1a"><mrow id="S6.I9.ix1.p1.4.m4.1.1" xref="S6.I9.ix1.p1.4.m4.1.1.cmml"><mn id="S6.I9.ix1.p1.4.m4.1.1.2" xref="S6.I9.ix1.p1.4.m4.1.1.2.cmml">91.9</mn><mo id="S6.I9.ix1.p1.4.m4.1.1.1" xref="S6.I9.ix1.p1.4.m4.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S6.I9.ix1.p1.4.m4.1b"><apply id="S6.I9.ix1.p1.4.m4.1.1.cmml" xref="S6.I9.ix1.p1.4.m4.1.1"><csymbol cd="latexml" id="S6.I9.ix1.p1.4.m4.1.1.1.cmml" xref="S6.I9.ix1.p1.4.m4.1.1.1">percent</csymbol><cn type="float" id="S6.I9.ix1.p1.4.m4.1.1.2.cmml" xref="S6.I9.ix1.p1.4.m4.1.1.2">91.9</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I9.ix1.p1.4.m4.1c">91.9\%</annotation></semantics></math> in this case.
Consequently, gradient compression with <math id="S6.I9.ix1.p1.5.m5.1" class="ltx_Math" alttext="\theta&gt;80\%" display="inline"><semantics id="S6.I9.ix1.p1.5.m5.1a"><mrow id="S6.I9.ix1.p1.5.m5.1.1" xref="S6.I9.ix1.p1.5.m5.1.1.cmml"><mi id="S6.I9.ix1.p1.5.m5.1.1.2" xref="S6.I9.ix1.p1.5.m5.1.1.2.cmml">θ</mi><mo id="S6.I9.ix1.p1.5.m5.1.1.1" xref="S6.I9.ix1.p1.5.m5.1.1.1.cmml">&gt;</mo><mrow id="S6.I9.ix1.p1.5.m5.1.1.3" xref="S6.I9.ix1.p1.5.m5.1.1.3.cmml"><mn id="S6.I9.ix1.p1.5.m5.1.1.3.2" xref="S6.I9.ix1.p1.5.m5.1.1.3.2.cmml">80</mn><mo id="S6.I9.ix1.p1.5.m5.1.1.3.1" xref="S6.I9.ix1.p1.5.m5.1.1.3.1.cmml">%</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S6.I9.ix1.p1.5.m5.1b"><apply id="S6.I9.ix1.p1.5.m5.1.1.cmml" xref="S6.I9.ix1.p1.5.m5.1.1"><gt id="S6.I9.ix1.p1.5.m5.1.1.1.cmml" xref="S6.I9.ix1.p1.5.m5.1.1.1"></gt><ci id="S6.I9.ix1.p1.5.m5.1.1.2.cmml" xref="S6.I9.ix1.p1.5.m5.1.1.2">𝜃</ci><apply id="S6.I9.ix1.p1.5.m5.1.1.3.cmml" xref="S6.I9.ix1.p1.5.m5.1.1.3"><csymbol cd="latexml" id="S6.I9.ix1.p1.5.m5.1.1.3.1.cmml" xref="S6.I9.ix1.p1.5.m5.1.1.3.1">percent</csymbol><cn type="integer" id="S6.I9.ix1.p1.5.m5.1.1.3.2.cmml" xref="S6.I9.ix1.p1.5.m5.1.1.3.2">80</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I9.ix1.p1.5.m5.1c">\theta&gt;80\%</annotation></semantics></math> can practically defend against the attack while producing accurate models.</p>
</div>
</dd>
<dt id="S6.I9.ix2" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span id="S6.I9.ix2.1.1.1" class="ltx_text ltx_font_bold">FedAvg.</span></span></dt>
<dd class="ltx_item">
<div id="S6.I9.ix2.p1" class="ltx_para">
<p id="S6.I9.ix2.p1.6" class="ltx_p">Similar to FedSGD, we observe a limited effect of the ratio <math id="S6.I9.ix2.p1.1.m1.1" class="ltx_Math" alttext="\theta\leq 20\%" display="inline"><semantics id="S6.I9.ix2.p1.1.m1.1a"><mrow id="S6.I9.ix2.p1.1.m1.1.1" xref="S6.I9.ix2.p1.1.m1.1.1.cmml"><mi id="S6.I9.ix2.p1.1.m1.1.1.2" xref="S6.I9.ix2.p1.1.m1.1.1.2.cmml">θ</mi><mo id="S6.I9.ix2.p1.1.m1.1.1.1" xref="S6.I9.ix2.p1.1.m1.1.1.1.cmml">≤</mo><mrow id="S6.I9.ix2.p1.1.m1.1.1.3" xref="S6.I9.ix2.p1.1.m1.1.1.3.cmml"><mn id="S6.I9.ix2.p1.1.m1.1.1.3.2" xref="S6.I9.ix2.p1.1.m1.1.1.3.2.cmml">20</mn><mo id="S6.I9.ix2.p1.1.m1.1.1.3.1" xref="S6.I9.ix2.p1.1.m1.1.1.3.1.cmml">%</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S6.I9.ix2.p1.1.m1.1b"><apply id="S6.I9.ix2.p1.1.m1.1.1.cmml" xref="S6.I9.ix2.p1.1.m1.1.1"><leq id="S6.I9.ix2.p1.1.m1.1.1.1.cmml" xref="S6.I9.ix2.p1.1.m1.1.1.1"></leq><ci id="S6.I9.ix2.p1.1.m1.1.1.2.cmml" xref="S6.I9.ix2.p1.1.m1.1.1.2">𝜃</ci><apply id="S6.I9.ix2.p1.1.m1.1.1.3.cmml" xref="S6.I9.ix2.p1.1.m1.1.1.3"><csymbol cd="latexml" id="S6.I9.ix2.p1.1.m1.1.1.3.1.cmml" xref="S6.I9.ix2.p1.1.m1.1.1.3.1">percent</csymbol><cn type="integer" id="S6.I9.ix2.p1.1.m1.1.1.3.2.cmml" xref="S6.I9.ix2.p1.1.m1.1.1.3.2">20</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I9.ix2.p1.1.m1.1c">\theta\leq 20\%</annotation></semantics></math> in Figure <a href="#S6.F7" title="Figure 7 ‣ 6.4 Model convergence status ‣ 6 Empirical evaluation ‣ User-Level Label Leakage from Gradients in Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">7</span></a> (f), whereas the ratio of <math id="S6.I9.ix2.p1.2.m2.1" class="ltx_Math" alttext="\theta=40\%" display="inline"><semantics id="S6.I9.ix2.p1.2.m2.1a"><mrow id="S6.I9.ix2.p1.2.m2.1.1" xref="S6.I9.ix2.p1.2.m2.1.1.cmml"><mi id="S6.I9.ix2.p1.2.m2.1.1.2" xref="S6.I9.ix2.p1.2.m2.1.1.2.cmml">θ</mi><mo id="S6.I9.ix2.p1.2.m2.1.1.1" xref="S6.I9.ix2.p1.2.m2.1.1.1.cmml">=</mo><mrow id="S6.I9.ix2.p1.2.m2.1.1.3" xref="S6.I9.ix2.p1.2.m2.1.1.3.cmml"><mn id="S6.I9.ix2.p1.2.m2.1.1.3.2" xref="S6.I9.ix2.p1.2.m2.1.1.3.2.cmml">40</mn><mo id="S6.I9.ix2.p1.2.m2.1.1.3.1" xref="S6.I9.ix2.p1.2.m2.1.1.3.1.cmml">%</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S6.I9.ix2.p1.2.m2.1b"><apply id="S6.I9.ix2.p1.2.m2.1.1.cmml" xref="S6.I9.ix2.p1.2.m2.1.1"><eq id="S6.I9.ix2.p1.2.m2.1.1.1.cmml" xref="S6.I9.ix2.p1.2.m2.1.1.1"></eq><ci id="S6.I9.ix2.p1.2.m2.1.1.2.cmml" xref="S6.I9.ix2.p1.2.m2.1.1.2">𝜃</ci><apply id="S6.I9.ix2.p1.2.m2.1.1.3.cmml" xref="S6.I9.ix2.p1.2.m2.1.1.3"><csymbol cd="latexml" id="S6.I9.ix2.p1.2.m2.1.1.3.1.cmml" xref="S6.I9.ix2.p1.2.m2.1.1.3.1">percent</csymbol><cn type="integer" id="S6.I9.ix2.p1.2.m2.1.1.3.2.cmml" xref="S6.I9.ix2.p1.2.m2.1.1.3.2">40</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I9.ix2.p1.2.m2.1c">\theta=40\%</annotation></semantics></math> with <math id="S6.I9.ix2.p1.3.m3.1" class="ltx_Math" alttext="B\geq 8" display="inline"><semantics id="S6.I9.ix2.p1.3.m3.1a"><mrow id="S6.I9.ix2.p1.3.m3.1.1" xref="S6.I9.ix2.p1.3.m3.1.1.cmml"><mi id="S6.I9.ix2.p1.3.m3.1.1.2" xref="S6.I9.ix2.p1.3.m3.1.1.2.cmml">B</mi><mo id="S6.I9.ix2.p1.3.m3.1.1.1" xref="S6.I9.ix2.p1.3.m3.1.1.1.cmml">≥</mo><mn id="S6.I9.ix2.p1.3.m3.1.1.3" xref="S6.I9.ix2.p1.3.m3.1.1.3.cmml">8</mn></mrow><annotation-xml encoding="MathML-Content" id="S6.I9.ix2.p1.3.m3.1b"><apply id="S6.I9.ix2.p1.3.m3.1.1.cmml" xref="S6.I9.ix2.p1.3.m3.1.1"><geq id="S6.I9.ix2.p1.3.m3.1.1.1.cmml" xref="S6.I9.ix2.p1.3.m3.1.1.1"></geq><ci id="S6.I9.ix2.p1.3.m3.1.1.2.cmml" xref="S6.I9.ix2.p1.3.m3.1.1.2">𝐵</ci><cn type="integer" id="S6.I9.ix2.p1.3.m3.1.1.3.cmml" xref="S6.I9.ix2.p1.3.m3.1.1.3">8</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I9.ix2.p1.3.m3.1c">B\geq 8</annotation></semantics></math> can mitigate the risk of <span title="" class="ltx_glossaryref">LLG</span> +, as well as <math id="S6.I9.ix2.p1.4.m4.1" class="ltx_Math" alttext="\theta\geq 80\%" display="inline"><semantics id="S6.I9.ix2.p1.4.m4.1a"><mrow id="S6.I9.ix2.p1.4.m4.1.1" xref="S6.I9.ix2.p1.4.m4.1.1.cmml"><mi id="S6.I9.ix2.p1.4.m4.1.1.2" xref="S6.I9.ix2.p1.4.m4.1.1.2.cmml">θ</mi><mo id="S6.I9.ix2.p1.4.m4.1.1.1" xref="S6.I9.ix2.p1.4.m4.1.1.1.cmml">≥</mo><mrow id="S6.I9.ix2.p1.4.m4.1.1.3" xref="S6.I9.ix2.p1.4.m4.1.1.3.cmml"><mn id="S6.I9.ix2.p1.4.m4.1.1.3.2" xref="S6.I9.ix2.p1.4.m4.1.1.3.2.cmml">80</mn><mo id="S6.I9.ix2.p1.4.m4.1.1.3.1" xref="S6.I9.ix2.p1.4.m4.1.1.3.1.cmml">%</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S6.I9.ix2.p1.4.m4.1b"><apply id="S6.I9.ix2.p1.4.m4.1.1.cmml" xref="S6.I9.ix2.p1.4.m4.1.1"><geq id="S6.I9.ix2.p1.4.m4.1.1.1.cmml" xref="S6.I9.ix2.p1.4.m4.1.1.1"></geq><ci id="S6.I9.ix2.p1.4.m4.1.1.2.cmml" xref="S6.I9.ix2.p1.4.m4.1.1.2">𝜃</ci><apply id="S6.I9.ix2.p1.4.m4.1.1.3.cmml" xref="S6.I9.ix2.p1.4.m4.1.1.3"><csymbol cd="latexml" id="S6.I9.ix2.p1.4.m4.1.1.3.1.cmml" xref="S6.I9.ix2.p1.4.m4.1.1.3.1">percent</csymbol><cn type="integer" id="S6.I9.ix2.p1.4.m4.1.1.3.2.cmml" xref="S6.I9.ix2.p1.4.m4.1.1.3.2">80</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I9.ix2.p1.4.m4.1c">\theta\geq 80\%</annotation></semantics></math> for any batch size.
Under both compression ratios, the model converges at high accuracy scores, <math id="S6.I9.ix2.p1.5.m5.1" class="ltx_Math" alttext="91.6\%" display="inline"><semantics id="S6.I9.ix2.p1.5.m5.1a"><mrow id="S6.I9.ix2.p1.5.m5.1.1" xref="S6.I9.ix2.p1.5.m5.1.1.cmml"><mn id="S6.I9.ix2.p1.5.m5.1.1.2" xref="S6.I9.ix2.p1.5.m5.1.1.2.cmml">91.6</mn><mo id="S6.I9.ix2.p1.5.m5.1.1.1" xref="S6.I9.ix2.p1.5.m5.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S6.I9.ix2.p1.5.m5.1b"><apply id="S6.I9.ix2.p1.5.m5.1.1.cmml" xref="S6.I9.ix2.p1.5.m5.1.1"><csymbol cd="latexml" id="S6.I9.ix2.p1.5.m5.1.1.1.cmml" xref="S6.I9.ix2.p1.5.m5.1.1.1">percent</csymbol><cn type="float" id="S6.I9.ix2.p1.5.m5.1.1.2.cmml" xref="S6.I9.ix2.p1.5.m5.1.1.2">91.6</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I9.ix2.p1.5.m5.1c">91.6\%</annotation></semantics></math> and <math id="S6.I9.ix2.p1.6.m6.1" class="ltx_Math" alttext="89.3\%" display="inline"><semantics id="S6.I9.ix2.p1.6.m6.1a"><mrow id="S6.I9.ix2.p1.6.m6.1.1" xref="S6.I9.ix2.p1.6.m6.1.1.cmml"><mn id="S6.I9.ix2.p1.6.m6.1.1.2" xref="S6.I9.ix2.p1.6.m6.1.1.2.cmml">89.3</mn><mo id="S6.I9.ix2.p1.6.m6.1.1.1" xref="S6.I9.ix2.p1.6.m6.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S6.I9.ix2.p1.6.m6.1b"><apply id="S6.I9.ix2.p1.6.m6.1.1.cmml" xref="S6.I9.ix2.p1.6.m6.1.1"><csymbol cd="latexml" id="S6.I9.ix2.p1.6.m6.1.1.1.cmml" xref="S6.I9.ix2.p1.6.m6.1.1.1">percent</csymbol><cn type="float" id="S6.I9.ix2.p1.6.m6.1.1.2.cmml" xref="S6.I9.ix2.p1.6.m6.1.1.2">89.3</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.I9.ix2.p1.6.m6.1c">89.3\%</annotation></semantics></math>, respectively.
Additional improvements on the accuracy can be achieved by applying error compensation techniques, such as momentum correction and local gradient clipping, which are proposed in <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib23" title="" class="ltx_ref">23</a>]</cite>.</p>
</div>
</dd>
</dl>
</div>
<div id="S6.SS5.SSS2.p3" class="ltx_para">
<p id="S6.SS5.SSS2.p3.1" class="ltx_p">In addition to the aforementioned defenses, cryptography-based approaches exist <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib5" title="" class="ltx_ref">5</a>, <a href="#bib.bib3" title="" class="ltx_ref">3</a>, <a href="#bib.bib15" title="" class="ltx_ref">15</a>, <a href="#bib.bib39" title="" class="ltx_ref">39</a>]</cite>, which can protect gradients from external eavesdroppers and even curious servers.
However, besides the computation and communication overhead introduced by these approaches, they prevent the server from evaluating the utility and benignity of users’ updates.</p>
</div>
<figure id="S6.T1" class="ltx_table">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table"><span id="S6.T1.8.1.1" class="ltx_text" style="font-size:90%;">Table 1</span>: </span><span id="S6.T1.9.2" class="ltx_text" style="font-size:90%;">Model accuracy while applying the defense mechanisms.
PN: pure noise, DP: differential privacy, GC: gradient compression.</span></figcaption>
<table id="S6.T1.6" class="ltx_tabular ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="S6.T1.6.7.1" class="ltx_tr">
<th id="S6.T1.6.7.1.1" class="ltx_td ltx_th ltx_th_column ltx_th_row ltx_border_r ltx_border_t"></th>
<th id="S6.T1.6.7.1.2" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_r ltx_border_t" colspan="3">FedSGD (Acc. = 93.3%)</th>
<th id="S6.T1.6.7.1.3" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_t" colspan="3">FedAvg (Acc. = 94.5%)</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="S6.T1.1.1" class="ltx_tr">
<th id="S6.T1.1.1.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t">
<span id="S6.T1.1.1.1.1" class="ltx_text ltx_font_bold">PN</span> (<math id="S6.T1.1.1.1.m1.1" class="ltx_Math" alttext="\sigma" display="inline"><semantics id="S6.T1.1.1.1.m1.1a"><mi id="S6.T1.1.1.1.m1.1.1" xref="S6.T1.1.1.1.m1.1.1.cmml">σ</mi><annotation-xml encoding="MathML-Content" id="S6.T1.1.1.1.m1.1b"><ci id="S6.T1.1.1.1.m1.1.1.cmml" xref="S6.T1.1.1.1.m1.1.1">𝜎</ci></annotation-xml><annotation encoding="application/x-tex" id="S6.T1.1.1.1.m1.1c">\sigma</annotation></semantics></math>)</th>
<td id="S6.T1.1.1.2" class="ltx_td ltx_align_left ltx_border_t">0.01</td>
<td id="S6.T1.1.1.3" class="ltx_td ltx_align_left ltx_border_t">0.1</td>
<td id="S6.T1.1.1.4" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">1</td>
<td id="S6.T1.1.1.5" class="ltx_td ltx_align_left ltx_border_t">0.01</td>
<td id="S6.T1.1.1.6" class="ltx_td ltx_align_left ltx_border_t">0.1</td>
<td id="S6.T1.1.1.7" class="ltx_td ltx_align_left ltx_border_t">1</td>
</tr>
<tr id="S6.T1.3.3" class="ltx_tr">
<th id="S6.T1.3.3.3" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r">Acc. (%)</th>
<td id="S6.T1.3.3.4" class="ltx_td ltx_align_left">93.4</td>
<td id="S6.T1.3.3.5" class="ltx_td ltx_align_left">89.9</td>
<td id="S6.T1.2.2.1" class="ltx_td ltx_align_left ltx_border_r">
<math id="S6.T1.2.2.1.m1.1" class="ltx_Math" alttext="\leq" display="inline"><semantics id="S6.T1.2.2.1.m1.1a"><mo id="S6.T1.2.2.1.m1.1.1" xref="S6.T1.2.2.1.m1.1.1.cmml">≤</mo><annotation-xml encoding="MathML-Content" id="S6.T1.2.2.1.m1.1b"><leq id="S6.T1.2.2.1.m1.1.1.cmml" xref="S6.T1.2.2.1.m1.1.1"></leq></annotation-xml><annotation encoding="application/x-tex" id="S6.T1.2.2.1.m1.1c">\leq</annotation></semantics></math> 10.1</td>
<td id="S6.T1.3.3.6" class="ltx_td ltx_align_left">94.6</td>
<td id="S6.T1.3.3.7" class="ltx_td ltx_align_left">91.4</td>
<td id="S6.T1.3.3.2" class="ltx_td ltx_align_left">
<math id="S6.T1.3.3.2.m1.1" class="ltx_Math" alttext="\leq" display="inline"><semantics id="S6.T1.3.3.2.m1.1a"><mo id="S6.T1.3.3.2.m1.1.1" xref="S6.T1.3.3.2.m1.1.1.cmml">≤</mo><annotation-xml encoding="MathML-Content" id="S6.T1.3.3.2.m1.1b"><leq id="S6.T1.3.3.2.m1.1.1.cmml" xref="S6.T1.3.3.2.m1.1.1"></leq></annotation-xml><annotation encoding="application/x-tex" id="S6.T1.3.3.2.m1.1c">\leq</annotation></semantics></math> 13.5</td>
</tr>
<tr id="S6.T1.4.4" class="ltx_tr">
<th id="S6.T1.4.4.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t">
<span id="S6.T1.4.4.1.1" class="ltx_text ltx_font_bold">DP</span> (<math id="S6.T1.4.4.1.m1.1" class="ltx_Math" alttext="\beta" display="inline"><semantics id="S6.T1.4.4.1.m1.1a"><mi id="S6.T1.4.4.1.m1.1.1" xref="S6.T1.4.4.1.m1.1.1.cmml">β</mi><annotation-xml encoding="MathML-Content" id="S6.T1.4.4.1.m1.1b"><ci id="S6.T1.4.4.1.m1.1.1.cmml" xref="S6.T1.4.4.1.m1.1.1">𝛽</ci></annotation-xml><annotation encoding="application/x-tex" id="S6.T1.4.4.1.m1.1c">\beta</annotation></semantics></math>)</th>
<td id="S6.T1.4.4.2" class="ltx_td ltx_align_left ltx_border_t">10</td>
<td id="S6.T1.4.4.3" class="ltx_td ltx_align_left ltx_border_t">5</td>
<td id="S6.T1.4.4.4" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">1</td>
<td id="S6.T1.4.4.5" class="ltx_td ltx_align_left ltx_border_t">10</td>
<td id="S6.T1.4.4.6" class="ltx_td ltx_align_left ltx_border_t">5</td>
<td id="S6.T1.4.4.7" class="ltx_td ltx_align_left ltx_border_t">1</td>
</tr>
<tr id="S6.T1.5.5" class="ltx_tr">
<th id="S6.T1.5.5.2" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r">Acc. (%)</th>
<td id="S6.T1.5.5.3" class="ltx_td ltx_align_left">89</td>
<td id="S6.T1.5.5.4" class="ltx_td ltx_align_left">86.1</td>
<td id="S6.T1.5.5.1" class="ltx_td ltx_align_left ltx_border_r">
<math id="S6.T1.5.5.1.m1.1" class="ltx_Math" alttext="\leq" display="inline"><semantics id="S6.T1.5.5.1.m1.1a"><mo id="S6.T1.5.5.1.m1.1.1" xref="S6.T1.5.5.1.m1.1.1.cmml">≤</mo><annotation-xml encoding="MathML-Content" id="S6.T1.5.5.1.m1.1b"><leq id="S6.T1.5.5.1.m1.1.1.cmml" xref="S6.T1.5.5.1.m1.1.1"></leq></annotation-xml><annotation encoding="application/x-tex" id="S6.T1.5.5.1.m1.1c">\leq</annotation></semantics></math> 52.4</td>
<td id="S6.T1.5.5.5" class="ltx_td ltx_align_left">91.2</td>
<td id="S6.T1.5.5.6" class="ltx_td ltx_align_left">90.5</td>
<td id="S6.T1.5.5.7" class="ltx_td ltx_align_left">52.5</td>
</tr>
<tr id="S6.T1.6.6" class="ltx_tr">
<th id="S6.T1.6.6.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t">
<span id="S6.T1.6.6.1.1" class="ltx_text ltx_font_bold">GC</span> (<math id="S6.T1.6.6.1.m1.1" class="ltx_Math" alttext="\theta\%" display="inline"><semantics id="S6.T1.6.6.1.m1.1a"><mrow id="S6.T1.6.6.1.m1.1.1" xref="S6.T1.6.6.1.m1.1.1.cmml"><mi id="S6.T1.6.6.1.m1.1.1.2" xref="S6.T1.6.6.1.m1.1.1.2.cmml">θ</mi><mo id="S6.T1.6.6.1.m1.1.1.1" xref="S6.T1.6.6.1.m1.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S6.T1.6.6.1.m1.1b"><apply id="S6.T1.6.6.1.m1.1.1.cmml" xref="S6.T1.6.6.1.m1.1.1"><csymbol cd="latexml" id="S6.T1.6.6.1.m1.1.1.1.cmml" xref="S6.T1.6.6.1.m1.1.1.1">percent</csymbol><ci id="S6.T1.6.6.1.m1.1.1.2.cmml" xref="S6.T1.6.6.1.m1.1.1.2">𝜃</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.T1.6.6.1.m1.1c">\theta\%</annotation></semantics></math>)</th>
<td id="S6.T1.6.6.2" class="ltx_td ltx_align_left ltx_border_t">20</td>
<td id="S6.T1.6.6.3" class="ltx_td ltx_align_left ltx_border_t">40</td>
<td id="S6.T1.6.6.4" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">80</td>
<td id="S6.T1.6.6.5" class="ltx_td ltx_align_left ltx_border_t">20</td>
<td id="S6.T1.6.6.6" class="ltx_td ltx_align_left ltx_border_t">40</td>
<td id="S6.T1.6.6.7" class="ltx_td ltx_align_left ltx_border_t">80</td>
</tr>
<tr id="S6.T1.6.8.1" class="ltx_tr">
<th id="S6.T1.6.8.1.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b ltx_border_r">Acc. (%)</th>
<td id="S6.T1.6.8.1.2" class="ltx_td ltx_align_left ltx_border_b">93.4</td>
<td id="S6.T1.6.8.1.3" class="ltx_td ltx_align_left ltx_border_b">93.7</td>
<td id="S6.T1.6.8.1.4" class="ltx_td ltx_align_left ltx_border_b ltx_border_r">91.9</td>
<td id="S6.T1.6.8.1.5" class="ltx_td ltx_align_left ltx_border_b">92.8</td>
<td id="S6.T1.6.8.1.6" class="ltx_td ltx_align_left ltx_border_b">91.6</td>
<td id="S6.T1.6.8.1.7" class="ltx_td ltx_align_left ltx_border_b">89.3</td>
</tr>
</tbody>
</table>
</figure>
</section>
</section>
</section>
<section id="S7" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">7 </span>Conclusion</h2>

<div id="S7.p1" class="ltx_para">
<p id="S7.p1.1" class="ltx_p">We identified and formalized two properties of gradients of the last layer in deep neural network models trained with cross-entropy loss for a classification task.
These properties reveal a correlation between gradients and label occurrences in the training batch.
We investigate <span title="" class="ltx_glossaryref">Label Leakage from Gradients (LLG)</span>, a novel attack that exploits this correlation and extracts the ground-truth labels from shared gradients in the FedSGD and FedAvg algorithms.
We demonstrated the validity of <span title="" class="ltx_glossaryref">LLG</span> through mathematical proofs and empirical analysis.
Results demonstrate the scalability of <span title="" class="ltx_glossaryref">LLG</span> to arbitrary batch sizes and number of classes.
Moreover, we showed the success rate of <span title="" class="ltx_glossaryref">LLG</span> on various model architectures and in different stages of training.
The effectiveness of noisy gradients and gradient compression as defenses was also investigated.
Findings suggest gradient compression to be an efficient technique to prevent the attack while maintaining the model accuracy.
With this work, we hope to raise the awareness of the privacy risks associated with gradients sharing schemes, encouraging the community and service providers to give careful consideration to security and privacy measures in this context.
As future work, we are developing improvements for the attack under FedAvg and against trained models.
Additionally, we are investigating the implications of combining <span title="" class="ltx_glossaryref">LLG</span> with DLG on the overall accuracy of the data reconstruction.</p>
</div>
</section>
<section id="Sx1" class="ltx_section">
<h2 class="ltx_title ltx_title_section">Acknowledgements</h2>

<div id="Sx1.p1" class="ltx_para">
<p id="Sx1.p1.1" class="ltx_p">This work has been funded by the Deutsche Forschungsgemeinschaft (DFG, German Research Foundation) 251805230/GRK2050.
<em id="Sx1.p1.1.1" class="ltx_emph ltx_font_italic">Fabrizio Ventola</em> and <em id="Sx1.p1.1.2" class="ltx_emph ltx_font_italic">Kristian Kersting</em> acknowledge the support by the project “kompAKI - The Competence Center on AI and Labour”, funded by the German Federal Ministry of Education and Research.
<em id="Sx1.p1.1.3" class="ltx_emph ltx_font_italic">Kristian Kersting</em> acknowledges also the support by “KISTRA – Use of Artificial Intelligence for Early Detection of Crimes”, a project funded by the German Federal Ministry of the Interior, Building and Community, FKZ: 13N15343, and “safeFBDC - Financial Big Data Cluster”, a project funded by the German Federal Ministry for Economics Affairs and Energy as part of the GAIA-x initiative, FKZ: 01MK21002K.</p>
</div>
</section>
<section id="bib" class="ltx_bibliography">
<h2 class="ltx_title ltx_title_bibliography">References</h2>

<ul class="ltx_biblist">
<li id="bib.bib1" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[1]</span>
<span class="ltx_bibblock">
Abadi, M., McMahan, H.B., Chu, A., Mironov, I., Zhang, L., Goodfellow, I.,
Talwar, K.: Deep learning with differential privacy. In: Proceedings of the
ACM Conference on Computer and Communications Security (2016).
https://doi.org/10.1145/2976749.2978318

</span>
</li>
<li id="bib.bib2" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[2]</span>
<span class="ltx_bibblock">
Aono, Y., Hayashi, T., Wang, L., Moriai, S., et al.: Privacy-preserving deep
learning: Revisited and enhanced. In: International Conference on
Applications and Techniques in Information Security. pp. 100–110. Springer
(2017)

</span>
</li>
<li id="bib.bib3" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[3]</span>
<span class="ltx_bibblock">
Aono, Y., Hayashi, T., Wang, L., Moriai, S., et al.: Privacy-preserving deep
learning via additively homomorphic encryption. IEEE Transactions on
Information Forensics and Security <span id="bib.bib3.1.1" class="ltx_text ltx_font_bold">13</span>(5), 1333–1345 (2017)

</span>
</li>
<li id="bib.bib4" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[4]</span>
<span class="ltx_bibblock">
Benesty, J., Chen, J., Huang, Y., Cohen, I.: Pearson correlation coefficient.
In: Noise reduction in speech processing, pp. 1–4. Springer (2009)

</span>
</li>
<li id="bib.bib5" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[5]</span>
<span class="ltx_bibblock">
Bonawitz, K., Ivanov, V., Kreuter, B., Marcedone, A., McMahan, H.B., Patel, S.,
Ramage, D., Segal, A., Seth, K.: Practical secure aggregation for federated
learning on user-held data. arXiv preprint arXiv:1611.04482 (2016)

</span>
</li>
<li id="bib.bib6" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[6]</span>
<span class="ltx_bibblock">
Bonawitz, K., Ivanov, V., Kreuter, B., Marcedone, A., McMahan, H.B., Patel, S.,
Ramage, D., Segal, A., Seth, K.: Practical secure aggregation for
privacy-preserving machine learning. In: Proceedings of the 2017 ACM SIGSAC
Conference on Computer and Communications Security. pp. 1175–1191 (2017)

</span>
</li>
<li id="bib.bib7" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[7]</span>
<span class="ltx_bibblock">
Cramér, H.: Mathematical methods of statistics, vol. 43. Princeton
university press (1999)

</span>
</li>
<li id="bib.bib8" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[8]</span>
<span class="ltx_bibblock">
Daley, M.F., Goddard, K., McClung, M., Davidson, A., Weiss, G., Palen, T.,
Nyirenda, C., Platt, R., Courtney, B., Reichman, M.E.: Using a handheld
device for patient data collection: a pilot for medical countermeasures
surveillance. Public Health Reports <span id="bib.bib8.1.1" class="ltx_text ltx_font_bold">131</span>(1), 30–34 (2016)

</span>
</li>
<li id="bib.bib9" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[9]</span>
<span class="ltx_bibblock">
Duane, S., Tandan, M., Murphy, A.W., Vellinga, A.: Using mobile phones to
collect patient data: lessons learned from the simple study. JMIR research
protocols <span id="bib.bib9.1.1" class="ltx_text ltx_font_bold">6</span>(4),  e61 (2017)

</span>
</li>
<li id="bib.bib10" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[10]</span>
<span class="ltx_bibblock">
Enthoven, D., Al-Ars, Z.: Fidel: Reconstructing private training samples from
weight updates in federated learning. arXiv preprint arXiv:2101.00159 (2021)

</span>
</li>
<li id="bib.bib11" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[11]</span>
<span class="ltx_bibblock">
Flores, M., Dayan, I., Roth, H., Zhong, A., Harouni, A., Gentili, A., Abidin,
A., Liu, A., Costa, A., Wood, B., et al.: Federated learning used for
predicting outcomes in sars-cov-2 patients. Research Square (2021)

</span>
</li>
<li id="bib.bib12" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[12]</span>
<span class="ltx_bibblock">
Geiping, J., Bauermeister, H., Dröge, H., Moeller, M.: Inverting
gradients - how easy is it to break privacy in federated learning? In:
Larochelle, H., Ranzato, M., Hadsell, R., Balcan, M., Lin, H. (eds.) Advances
in Neural Information Processing Systems 33: Annual Conference on Neural
Information Processing Systems 2020, NeurIPS 2020, December 6-12, 2020,
virtual (2020),
<a target="_blank" href="https://proceedings.neurips.cc/paper/2020/hash/c4ede56bbd98819ae6112b20ac6bf145-Abstract.html" title="" class="ltx_ref">https://proceedings.neurips.cc/paper/2020/hash/c4ede56bbd98819ae6112b20ac6bf145-Abstract.html</a>

</span>
</li>
<li id="bib.bib13" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[13]</span>
<span class="ltx_bibblock">
Geyer, R.C., Klein, T., Nabi, M.: Differentially Private Federated
Learning: A Client Level Perspective. ArXiv e-prints (Dec 2017)

</span>
</li>
<li id="bib.bib14" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[14]</span>
<span class="ltx_bibblock">
Goodfellow, I., Bengio, Y., Courville, A.: Deep Learning. MIT Press (2016),
<a target="_blank" href="http://www.deeplearningbook.org" title="" class="ltx_ref">http://www.deeplearningbook.org</a>

</span>
</li>
<li id="bib.bib15" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[15]</span>
<span class="ltx_bibblock">
Hao, M., Li, H., Luo, X., Xu, G., Yang, H., Liu, S.: Efficient and
privacy-enhanced federated learning for industrial artificial intelligence.
IEEE Transactions on Industrial Informatics <span id="bib.bib15.1.1" class="ltx_text ltx_font_bold">16</span>(10), 6532–6542
(2019)

</span>
</li>
<li id="bib.bib16" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[16]</span>
<span class="ltx_bibblock">
He, K., Zhang, X., Ren, S., Sun, J.: Deep residual learning for image
recognition. In: Proceedings of the IEEE conference on computer vision and
pattern recognition. pp. 770–778 (2016)

</span>
</li>
<li id="bib.bib17" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[17]</span>
<span class="ltx_bibblock">
Jochems, A., Deist, T.M., El Naqa, I., Kessler, M., Mayo, C., Reeves, J.,
Jolly, S., Matuszak, M., Ten Haken, R., van Soest, J., et al.: Developing and
validating a survival prediction model for nsclc patients through distributed
learning across 3 countries. International Journal of Radiation Oncology*
Biology* Physics <span id="bib.bib17.1.1" class="ltx_text ltx_font_bold">99</span>(2), 344–352 (2017)

</span>
</li>
<li id="bib.bib18" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[18]</span>
<span class="ltx_bibblock">
Kairouz, P., McMahan, H.B., Avent, B., Bellet, A., Bennis, M., Bhagoji, A.N.,
Bonawitz, K., Charles, Z., Cormode, G., Cummings, R., et al.: Advances and
open problems in federated learning. arXiv preprint arXiv:1912.04977 (2019)

</span>
</li>
<li id="bib.bib19" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[19]</span>
<span class="ltx_bibblock">
Krizhevsky, A., Hinton, G., et al.: Learning multiple layers of features from
tiny images. MIT (2009)

</span>
</li>
<li id="bib.bib20" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[20]</span>
<span class="ltx_bibblock">
LeCun, Y., Bottou, L., Bengio, Y., Haffner, P.: Gradient-based learning applied
to document recognition. Proceedings of the IEEE <span id="bib.bib20.1.1" class="ltx_text ltx_font_bold">86</span>(11),
2278–2324 (1998)

</span>
</li>
<li id="bib.bib21" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[21]</span>
<span class="ltx_bibblock">
Li, O., Sun, J., Gao, W., Zhang, H., Yang, X., Xie, J., Wang, C.: Label leakage
and protection in two-party split learning. NeurIPS 2020 Workshop on
Scalability, Privacy, and Security in Federated Learning (SpicyFL) (2020)

</span>
</li>
<li id="bib.bib22" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[22]</span>
<span class="ltx_bibblock">
Li, Q., Wen, Z., He, B.: Federated learning systems: Vision, hype and reality
for data privacy and protection. arXiv preprint arXiv:1907.09693 (2019)

</span>
</li>
<li id="bib.bib23" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[23]</span>
<span class="ltx_bibblock">
Lin, Y., Han, S., Mao, H., Wang, Y., Dally, W.J.: Deep gradient compression:
Reducing the communication bandwidth for distributed training. arXiv preprint
arXiv:1712.01887 (2017)

</span>
</li>
<li id="bib.bib24" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[24]</span>
<span class="ltx_bibblock">
Liu, D.C., Nocedal, J.: On the limited memory bfgs method for large scale
optimization. Mathematical programming <span id="bib.bib24.1.1" class="ltx_text ltx_font_bold">45</span>(1), 503–528 (1989)

</span>
</li>
<li id="bib.bib25" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[25]</span>
<span class="ltx_bibblock">
Liu, Z., Luo, P., Wang, X., Tang, X.: Deep learning face attributes in the
wild. In: Proceedings of the IEEE international conference on computer
vision. pp. 3730–3738 (2015)

</span>
</li>
<li id="bib.bib26" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[26]</span>
<span class="ltx_bibblock">
Luo, X., Wu, Y., Xiao, X., Ooi, B.C.: Feature inference attack on model
predictions in vertical federated learning. arXiv preprint arXiv:2010.10152
(2020)

</span>
</li>
<li id="bib.bib27" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[27]</span>
<span class="ltx_bibblock">
McMahan, H.B., Moore, E., Ramage, D., Hampson, S., et al.:
Communication-efficient learning of deep networks from decentralized data.
arXiv preprint arXiv:1602.05629 (2016)

</span>
</li>
<li id="bib.bib28" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[28]</span>
<span class="ltx_bibblock">
Mo, F., Borovykh, A., Malekzadeh, M., Haddadi, H., Demetriou, S.: Layer-wise
characterization of latent information leakage in federated learning. arXiv
preprint arXiv:2010.08762 (2020)

</span>
</li>
<li id="bib.bib29" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[29]</span>
<span class="ltx_bibblock">
Netzer, Y., Wang, T., Coates, A., Bissacco, A., Wu, B., Ng, A.Y.: Reading
digits in natural images with unsupervised feature learning. CiteSeerX
(2011)

</span>
</li>
<li id="bib.bib30" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[30]</span>
<span class="ltx_bibblock">
Pustozerova, A., Mayer, R.: Information leaks in federated learning. In:
Proceedings of the Network and Distributed System Security Symposium (2020)

</span>
</li>
<li id="bib.bib31" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[31]</span>
<span class="ltx_bibblock">
Qian, J., Hansen, L.K.: What can we learn from gradients? arXiv preprint
arXiv:2010.15718 (2020)

</span>
</li>
<li id="bib.bib32" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[32]</span>
<span class="ltx_bibblock">
Shokri, R., Shmatikov, V.: Privacy-Preserving Deep Learning. In: Proceedings
of the 22nd ACM SIGSAC Conference on Computer and Communications Security.
pp. 1310––1321. CCS ’15, Association for Computing Machinery, New York,
NY, USA (2015). https://doi.org/10.1145/2810103.2813687,
<a target="_blank" href="https://doi.org/10.1145/2810103.2813687" title="" class="ltx_ref">https://doi.org/10.1145/2810103.2813687</a>

</span>
</li>
<li id="bib.bib33" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[33]</span>
<span class="ltx_bibblock">
Tsuzuku, Y., Imachi, H., Akiba, T.: Variance-based gradient compression for
efficient distributed deep learning. arXiv preprint arXiv:1802.06058 (2018)

</span>
</li>
<li id="bib.bib34" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[34]</span>
<span class="ltx_bibblock">
Wainakh, A., Müßig, T., Grube, T., Mühlhäuser, M.: Label
leakage from gradients in distributed machine learning. In: 2021 IEEE 18th
Annual Consumer Communications &amp; Networking Conference (CCNC). pp. 1–4.
IEEE (2021)

</span>
</li>
<li id="bib.bib35" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[35]</span>
<span class="ltx_bibblock">
Wang, Z., Song, M., Zhang, Z., Song, Y., Wang, Q., Qi, H.: Beyond inferring
class representatives: User-level privacy leakage from federated learning.
In: IEEE INFOCOM 2019-IEEE Conference on Computer Communications. pp.
2512–2520. IEEE (2019)

</span>
</li>
<li id="bib.bib36" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[36]</span>
<span class="ltx_bibblock">
Wei, W., Liu, L., Loper, M., Chow, K.H., Gursoy, M.E., Truex, S., Wu, Y.: A
framework for evaluating client privacy leakages in federated learning. In:
European Symposium on Research in Computer Security. pp. 545–566. Springer
(2020)

</span>
</li>
<li id="bib.bib37" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[37]</span>
<span class="ltx_bibblock">
Zhang, J., Zhang, J., Chen, J., Yu, S.: Gan enhanced membership inference: A
passive local attack in federated learning. In: ICC 2020-2020 IEEE
International Conference on Communications (ICC). pp. 1–6. IEEE (2020)

</span>
</li>
<li id="bib.bib38" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[38]</span>
<span class="ltx_bibblock">
Zhao, B., Mopuri, K.R., Bilen, H.: idlg: Improved deep leakage from gradients.
arXiv preprint arXiv:2001.02610 (2020)

</span>
</li>
<li id="bib.bib39" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[39]</span>
<span class="ltx_bibblock">
Zhu, H., Li, Z., Cheah, M., Goh, R.S.M.: Privacy-preserving weighted federated
learning within oracle-aided mpc framework. arXiv preprint arXiv:2003.07630
(2020)

</span>
</li>
<li id="bib.bib40" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[40]</span>
<span class="ltx_bibblock">
Zhu, J., Blaschko, M.: R-gap: Recursive gradient attack on privacy. arXiv
preprint arXiv:2010.07733 (2020)

</span>
</li>
<li id="bib.bib41" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[41]</span>
<span class="ltx_bibblock">
Zhu, L., Liu, Z., Han, S.: Deep leakage from gradients. In: Advances in Neural
Information Processing Systems. pp. 14747–14756 (2019)

</span>
</li>
</ul>
</section>
<section id="Sx2" class="ltx_section">
<h2 class="ltx_title ltx_title_section">Appendix</h2>

<figure id="Sx2.T2" class="ltx_table">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table"><span id="Sx2.T2.2.1.1" class="ltx_text" style="font-size:90%;">Table 2</span>: </span><span id="Sx2.T2.3.2" class="ltx_text" style="font-size:90%;">Architecture of CNN, the default model in the experimental setting.</span></figcaption>
<table id="Sx2.T2.4" class="ltx_tabular ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="Sx2.T2.4.1.1" class="ltx_tr">
<th id="Sx2.T2.4.1.1.1" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_t">Layer</th>
<th id="Sx2.T2.4.1.1.2" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_t">Size</th>
<th id="Sx2.T2.4.1.1.3" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_t">Activation function</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="Sx2.T2.4.2.1" class="ltx_tr">
<td id="Sx2.T2.4.2.1.1" class="ltx_td ltx_align_left ltx_border_t">(input)</td>
<td id="Sx2.T2.4.2.1.2" class="ltx_td ltx_align_left ltx_border_t">-</td>
<td id="Sx2.T2.4.2.1.3" class="ltx_td ltx_align_left ltx_border_t">-</td>
</tr>
<tr id="Sx2.T2.4.3.2" class="ltx_tr">
<td id="Sx2.T2.4.3.2.1" class="ltx_td ltx_align_left">Conv 2D</td>
<td id="Sx2.T2.4.3.2.2" class="ltx_td ltx_align_left">channels x 12</td>
<td id="Sx2.T2.4.3.2.3" class="ltx_td ltx_align_left">Sigmoid</td>
</tr>
<tr id="Sx2.T2.4.4.3" class="ltx_tr">
<td id="Sx2.T2.4.4.3.1" class="ltx_td ltx_align_left">Conv 2D</td>
<td id="Sx2.T2.4.4.3.2" class="ltx_td ltx_align_left">12 x 12</td>
<td id="Sx2.T2.4.4.3.3" class="ltx_td ltx_align_left">Sigmoid</td>
</tr>
<tr id="Sx2.T2.4.5.4" class="ltx_tr">
<td id="Sx2.T2.4.5.4.1" class="ltx_td ltx_align_left ltx_border_b">Conv 2D</td>
<td id="Sx2.T2.4.5.4.2" class="ltx_td ltx_align_left ltx_border_b">12 x 12</td>
<td id="Sx2.T2.4.5.4.3" class="ltx_td ltx_align_left ltx_border_b">Sigmoid</td>
</tr>
</tbody>
</table>
</figure>
<figure id="Sx2.T3" class="ltx_table">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table"><span id="Sx2.T3.2.1.1" class="ltx_text" style="font-size:90%;">Table 3</span>: </span><span id="Sx2.T3.3.2" class="ltx_text" style="font-size:90%;">Architecture of LeNet network, a very common architecture adopted in computer vision.</span></figcaption>
<table id="Sx2.T3.4" class="ltx_tabular ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="Sx2.T3.4.1.1" class="ltx_tr">
<th id="Sx2.T3.4.1.1.1" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_t">Layer</th>
<th id="Sx2.T3.4.1.1.2" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_t">Size</th>
<th id="Sx2.T3.4.1.1.3" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_t">Activation function</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="Sx2.T3.4.2.1" class="ltx_tr">
<td id="Sx2.T3.4.2.1.1" class="ltx_td ltx_align_left ltx_border_t">(input)</td>
<td id="Sx2.T3.4.2.1.2" class="ltx_td ltx_align_left ltx_border_t">-</td>
<td id="Sx2.T3.4.2.1.3" class="ltx_td ltx_align_left ltx_border_t">-</td>
</tr>
<tr id="Sx2.T3.4.3.2" class="ltx_tr">
<td id="Sx2.T3.4.3.2.1" class="ltx_td ltx_align_left">Conv 2D</td>
<td id="Sx2.T3.4.3.2.2" class="ltx_td ltx_align_left">1 x 6</td>
<td id="Sx2.T3.4.3.2.3" class="ltx_td ltx_align_left">ReLU</td>
</tr>
<tr id="Sx2.T3.4.4.3" class="ltx_tr">
<td id="Sx2.T3.4.4.3.1" class="ltx_td ltx_align_left">Maxpool</td>
<td id="Sx2.T3.4.4.3.2" class="ltx_td ltx_align_left">2 x 2</td>
<td id="Sx2.T3.4.4.3.3" class="ltx_td ltx_align_left">-</td>
</tr>
<tr id="Sx2.T3.4.5.4" class="ltx_tr">
<td id="Sx2.T3.4.5.4.1" class="ltx_td ltx_align_left">Conv 2D</td>
<td id="Sx2.T3.4.5.4.2" class="ltx_td ltx_align_left">6 x 16</td>
<td id="Sx2.T3.4.5.4.3" class="ltx_td ltx_align_left">ReLU</td>
</tr>
<tr id="Sx2.T3.4.6.5" class="ltx_tr">
<td id="Sx2.T3.4.6.5.1" class="ltx_td ltx_align_left">Maxpool</td>
<td id="Sx2.T3.4.6.5.2" class="ltx_td ltx_align_left">2</td>
<td id="Sx2.T3.4.6.5.3" class="ltx_td ltx_align_left">-</td>
</tr>
<tr id="Sx2.T3.4.7.6" class="ltx_tr">
<td id="Sx2.T3.4.7.6.1" class="ltx_td ltx_align_left">Linear</td>
<td id="Sx2.T3.4.7.6.2" class="ltx_td ltx_align_left">16 x 6</td>
<td id="Sx2.T3.4.7.6.3" class="ltx_td ltx_align_left">ReLU</td>
</tr>
<tr id="Sx2.T3.4.8.7" class="ltx_tr">
<td id="Sx2.T3.4.8.7.1" class="ltx_td ltx_align_left">Linear</td>
<td id="Sx2.T3.4.8.7.2" class="ltx_td ltx_align_left">120 x 84</td>
<td id="Sx2.T3.4.8.7.3" class="ltx_td ltx_align_left">ReLU</td>
</tr>
<tr id="Sx2.T3.4.9.8" class="ltx_tr">
<td id="Sx2.T3.4.9.8.1" class="ltx_td ltx_align_left ltx_border_b">Linear</td>
<td id="Sx2.T3.4.9.8.2" class="ltx_td ltx_align_left ltx_border_b">84 x 10</td>
<td id="Sx2.T3.4.9.8.3" class="ltx_td ltx_align_left ltx_border_b">ReLU</td>
</tr>
</tbody>
</table>
</figure>
<figure id="Sx2.F8" class="ltx_figure">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_1">
<figure id="Sx2.F8.1" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2105.09369/assets/x27.png" id="Sx2.F8.1.g1" class="ltx_graphics ltx_img_landscape" width="207" height="9" alt="Refer to caption">
</figure>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_4">
<figure id="Sx2.F8.sf1" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2105.09369/assets/x28.png" id="Sx2.F8.sf1.g1" class="ltx_graphics ltx_img_square" width="332" height="343" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="Sx2.F8.sf1.2.1.1" class="ltx_text" style="font-size:90%;">(a)</span> </span><span id="Sx2.F8.sf1.3.2" class="ltx_text" style="font-size:90%;">MNIST - FS</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_4">
<figure id="Sx2.F8.sf2" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2105.09369/assets/x29.png" id="Sx2.F8.sf2.g1" class="ltx_graphics ltx_img_square" width="332" height="378" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="Sx2.F8.sf2.2.1.1" class="ltx_text" style="font-size:90%;">(b)</span> </span><span id="Sx2.F8.sf2.3.2" class="ltx_text" style="font-size:90%;">SVHN - FS</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_4">
<figure id="Sx2.F8.sf3" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2105.09369/assets/x30.png" id="Sx2.F8.sf3.g1" class="ltx_graphics ltx_img_square" width="332" height="378" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="Sx2.F8.sf3.2.1.1" class="ltx_text" style="font-size:90%;">(c)</span> </span><span id="Sx2.F8.sf3.3.2" class="ltx_text" style="font-size:90%;">CIFAR-100 - FS</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_4">
<figure id="Sx2.F8.sf4" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2105.09369/assets/x31.png" id="Sx2.F8.sf4.g1" class="ltx_graphics ltx_img_square" width="332" height="378" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="Sx2.F8.sf4.2.1.1" class="ltx_text" style="font-size:90%;">(d)</span> </span><span id="Sx2.F8.sf4.3.2" class="ltx_text" style="font-size:90%;">CelebA - FS</span></figcaption>
</figure>
</div>
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="Sx2.F8.4.1.1" class="ltx_text" style="font-size:90%;">Figure 8</span>: </span><span id="Sx2.F8.5.2" class="ltx_text" style="font-size:80%;">Attack success rate of (1) LLG with shared gradients, (2) LLG* with white-box model, (3) LLG+ with auxiliary knowledge, (4) DLG <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib41" title="" class="ltx_ref">41</a>]</cite>, and (5) random guess on MNIST, SVHN, CIFAR-100, and CelebA.
Label extraction is based on gradients generated from passing one <em id="Sx2.F8.5.2.1" class="ltx_emph ltx_font_italic">balanced</em> batch (FedSGD) to a randomly initialized CNN.
 </span></figcaption>
</figure>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
</article>
</div>
<div class="ar5iv-footer"><a href="/html/2105.09368" class="ar5iv-nav-button ar5iv-nav-button-prev">◄</a>
    <a class="ar5iv-home-button" href="/"><img height="40" alt="ar5iv homepage" src="/assets/ar5iv.png"></a>
    <a href="/feeling_lucky" class="ar5iv-text-button">Feeling<br>lucky?</a>
    <a href="/log/2105.09369" class="ar5iv-text-button ar5iv-severity-error">Conversion<br>report</a>
    <a class="ar5iv-text-button" target="_blank" href="https://github.com/dginev/ar5iv/issues/new?template=improve-article--arxiv-id-.md&title=Improve+article+2105.09369">Report<br>an issue</a>
    <a href="https://arxiv.org/abs/2105.09369" class="ar5iv-text-button arxiv-ui-theme">View&nbsp;original<br>on&nbsp;arXiv</a><a href="/html/2105.09370" class="ar5iv-nav-button ar5iv-nav-button-next">►</a>
</div><footer class="ltx_page_footer">
<a class="ar5iv-toggle-color-scheme" href="javascript:toggleColorScheme()" title="Toggle ar5iv color scheme"><span class="color-scheme-icon"></span></a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/license" target="_blank">Copyright</a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/policies/privacy_policy" target="_blank">Privacy Policy</a>

<div class="ltx_page_logo">Generated  on Fri Mar  8 00:44:38 2024 by <a target="_blank" href="http://dlmf.nist.gov/LaTeXML/" class="ltx_LaTeXML_logo"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg==" alt="Mascot Sammy"></a>
</div></footer>
</div>

    <script>
      var canMathML = typeof(MathMLElement) == "function";
      if (!canMathML) {
        var body = document.querySelector("body");
        body.firstElementChild.setAttribute('style', 'opacity: 0;');
        var loading = document.createElement("div");
        loading.setAttribute("id", "mathjax-loading-spinner");
        var message = document.createElement("div");
        message.setAttribute("id", "mathjax-loading-message");
        message.innerText = "Typesetting Equations...";
        body.prepend(loading);
        body.prepend(message);

        var el = document.createElement("script");
        el.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js";
        document.querySelector("head").appendChild(el);

        window.MathJax = {
          startup: {
            pageReady: () => {
              return MathJax.startup.defaultPageReady().then(() => {
                body.removeChild(loading);
                body.removeChild(message);
                body.firstElementChild.removeAttribute('style');
              }); } } };
      }
    </script>
    <script>
    // Auxiliary function, building the preview feature when
    // an inline citation is clicked
    function clicked_cite(e) {
      e.preventDefault();
      let cite = this.closest('.ltx_cite');
      let next = cite.nextSibling;
      if (next && next.nodeType == Node.ELEMENT_NODE && next.getAttribute('class') == "ar5iv-bibitem-preview") {
        next.remove();
        return; }
      // Before adding a preview modal,
      // cleanup older previews, in case they're still open
      document.querySelectorAll('span.ar5iv-bibitem-preview').forEach(function(node) {
        node.remove();
      })

      // Create the preview
      preview = document.createElement('span');
      preview.setAttribute('class','ar5iv-bibitem-preview');
      let target = document.getElementById(this.getAttribute('href').slice(1));
      target.childNodes.forEach(function (child) {
        preview.append(child.cloneNode(true));
      });
      let close_x = document.createElement('button');
      close_x.setAttribute("aria-label","Close modal for bibliography item preview");
      close_x.textContent = "×";
      close_x.setAttribute('class', 'ar5iv-button-close-preview');
      close_x.setAttribute('onclick','this.parentNode.remove()');
      preview.append(close_x);
      preview.querySelectorAll('.ltx_tag_bibitem').forEach(function(node) {
        node.remove();
      });
      cite.parentNode.insertBefore(preview, cite.nextSibling);
      return;
    }
    // Global Document initialization:
    // - assign the preview feature to all inline citation links
    document.querySelectorAll(".ltx_cite .ltx_ref").forEach(function (link) {
      link.addEventListener("click", clicked_cite);
    });
    </script>
    </body>
</html>
