<article class="ltx_document">
 <h1 class="ltx_title ltx_title_document">
  SQL-CRAFT: Text-to-SQL through Interactive Refinement and Enhanced Reasoning
 </h1>
 <div class="ltx_authors">
  <span class="ltx_creator ltx_role_author">
   <span class="ltx_personname">
    <span class="ltx_text ltx_font_bold" id="id8.8.8">
     Hanchen Xia
     <math alttext="{}^{*{\twemoji{peach}\twemoji{lemon}}}" class="ltx_Math" display="inline" id="id1.1.1.m1.1">
      <semantics id="id1.1.1.m1.1a">
       <msup id="id1.1.1.m1.1.1" xref="id1.1.1.m1.1.1.cmml">
        <mi id="id1.1.1.m1.1.1a" xref="id1.1.1.m1.1.1.cmml">
        </mi>
        <mrow id="id1.1.1.m1.1.1.1" xref="id1.1.1.m1.1.1.1.cmml">
         <mi id="id1.1.1.m1.1.1.1.2" xref="id1.1.1.m1.1.1.1.2.cmml">
         </mi>
         <mo id="id1.1.1.m1.1.1.1.1" lspace="0.222em" rspace="0.222em" xref="id1.1.1.m1.1.1.1.1.cmml">
          ‚àó
         </mo>
         <mrow id="id1.1.1.m1.1.1.1.3" xref="id1.1.1.m1.1.1.1.3.cmml">
          <merror class="ltx_ERROR undefined undefined" id="id1.1.1.m1.1.1.1.3.2" xref="id1.1.1.m1.1.1.1.3.2b.cmml">
           <mtext id="id1.1.1.m1.1.1.1.3.2a" xref="id1.1.1.m1.1.1.1.3.2b.cmml">
            \twemoji
           </mtext>
          </merror>
          <mo id="id1.1.1.m1.1.1.1.3.1" lspace="0em" rspace="0em" xref="id1.1.1.m1.1.1.1.3.1.cmml">
           ‚Äã
          </mo>
          <mi id="id1.1.1.m1.1.1.1.3.3" xref="id1.1.1.m1.1.1.1.3.3.cmml">
           p
          </mi>
          <mo id="id1.1.1.m1.1.1.1.3.1a" lspace="0em" rspace="0em" xref="id1.1.1.m1.1.1.1.3.1.cmml">
           ‚Äã
          </mo>
          <mi id="id1.1.1.m1.1.1.1.3.4" xref="id1.1.1.m1.1.1.1.3.4.cmml">
           e
          </mi>
          <mo id="id1.1.1.m1.1.1.1.3.1b" lspace="0em" rspace="0em" xref="id1.1.1.m1.1.1.1.3.1.cmml">
           ‚Äã
          </mo>
          <mi id="id1.1.1.m1.1.1.1.3.5" xref="id1.1.1.m1.1.1.1.3.5.cmml">
           a
          </mi>
          <mo id="id1.1.1.m1.1.1.1.3.1c" lspace="0em" rspace="0em" xref="id1.1.1.m1.1.1.1.3.1.cmml">
           ‚Äã
          </mo>
          <mi id="id1.1.1.m1.1.1.1.3.6" xref="id1.1.1.m1.1.1.1.3.6.cmml">
           c
          </mi>
          <mo id="id1.1.1.m1.1.1.1.3.1d" lspace="0em" rspace="0em" xref="id1.1.1.m1.1.1.1.3.1.cmml">
           ‚Äã
          </mo>
          <mi id="id1.1.1.m1.1.1.1.3.7" xref="id1.1.1.m1.1.1.1.3.7.cmml">
           h
          </mi>
          <mo id="id1.1.1.m1.1.1.1.3.1e" lspace="0em" rspace="0em" xref="id1.1.1.m1.1.1.1.3.1.cmml">
           ‚Äã
          </mo>
          <merror class="ltx_ERROR undefined undefined" id="id1.1.1.m1.1.1.1.3.8" xref="id1.1.1.m1.1.1.1.3.8b.cmml">
           <mtext id="id1.1.1.m1.1.1.1.3.8a" xref="id1.1.1.m1.1.1.1.3.8b.cmml">
            \twemoji
           </mtext>
          </merror>
          <mo id="id1.1.1.m1.1.1.1.3.1f" lspace="0em" rspace="0em" xref="id1.1.1.m1.1.1.1.3.1.cmml">
           ‚Äã
          </mo>
          <mi id="id1.1.1.m1.1.1.1.3.9" xref="id1.1.1.m1.1.1.1.3.9.cmml">
           l
          </mi>
          <mo id="id1.1.1.m1.1.1.1.3.1g" lspace="0em" rspace="0em" xref="id1.1.1.m1.1.1.1.3.1.cmml">
           ‚Äã
          </mo>
          <mi id="id1.1.1.m1.1.1.1.3.10" xref="id1.1.1.m1.1.1.1.3.10.cmml">
           e
          </mi>
          <mo id="id1.1.1.m1.1.1.1.3.1h" lspace="0em" rspace="0em" xref="id1.1.1.m1.1.1.1.3.1.cmml">
           ‚Äã
          </mo>
          <mi id="id1.1.1.m1.1.1.1.3.11" xref="id1.1.1.m1.1.1.1.3.11.cmml">
           m
          </mi>
          <mo id="id1.1.1.m1.1.1.1.3.1i" lspace="0em" rspace="0em" xref="id1.1.1.m1.1.1.1.3.1.cmml">
           ‚Äã
          </mo>
          <mi id="id1.1.1.m1.1.1.1.3.12" xref="id1.1.1.m1.1.1.1.3.12.cmml">
           o
          </mi>
          <mo id="id1.1.1.m1.1.1.1.3.1j" lspace="0em" rspace="0em" xref="id1.1.1.m1.1.1.1.3.1.cmml">
           ‚Äã
          </mo>
          <mi id="id1.1.1.m1.1.1.1.3.13" xref="id1.1.1.m1.1.1.1.3.13.cmml">
           n
          </mi>
         </mrow>
        </mrow>
       </msup>
       <annotation-xml encoding="MathML-Content" id="id1.1.1.m1.1b">
        <apply id="id1.1.1.m1.1.1.cmml" xref="id1.1.1.m1.1.1">
         <apply id="id1.1.1.m1.1.1.1.cmml" xref="id1.1.1.m1.1.1.1">
          <times id="id1.1.1.m1.1.1.1.1.cmml" xref="id1.1.1.m1.1.1.1.1">
          </times>
          <csymbol cd="latexml" id="id1.1.1.m1.1.1.1.2.cmml" xref="id1.1.1.m1.1.1.1.2">
           absent
          </csymbol>
          <apply id="id1.1.1.m1.1.1.1.3.cmml" xref="id1.1.1.m1.1.1.1.3">
           <times id="id1.1.1.m1.1.1.1.3.1.cmml" xref="id1.1.1.m1.1.1.1.3.1">
           </times>
           <ci id="id1.1.1.m1.1.1.1.3.2b.cmml" xref="id1.1.1.m1.1.1.1.3.2">
            <merror class="ltx_ERROR undefined undefined" id="id1.1.1.m1.1.1.1.3.2.cmml" xref="id1.1.1.m1.1.1.1.3.2">
             <mtext id="id1.1.1.m1.1.1.1.3.2a.cmml" xref="id1.1.1.m1.1.1.1.3.2">
              \twemoji
             </mtext>
            </merror>
           </ci>
           <ci id="id1.1.1.m1.1.1.1.3.3.cmml" xref="id1.1.1.m1.1.1.1.3.3">
            ùëù
           </ci>
           <ci id="id1.1.1.m1.1.1.1.3.4.cmml" xref="id1.1.1.m1.1.1.1.3.4">
            ùëí
           </ci>
           <ci id="id1.1.1.m1.1.1.1.3.5.cmml" xref="id1.1.1.m1.1.1.1.3.5">
            ùëé
           </ci>
           <ci id="id1.1.1.m1.1.1.1.3.6.cmml" xref="id1.1.1.m1.1.1.1.3.6">
            ùëê
           </ci>
           <ci id="id1.1.1.m1.1.1.1.3.7.cmml" xref="id1.1.1.m1.1.1.1.3.7">
            ‚Ñé
           </ci>
           <ci id="id1.1.1.m1.1.1.1.3.8b.cmml" xref="id1.1.1.m1.1.1.1.3.8">
            <merror class="ltx_ERROR undefined undefined" id="id1.1.1.m1.1.1.1.3.8.cmml" xref="id1.1.1.m1.1.1.1.3.8">
             <mtext id="id1.1.1.m1.1.1.1.3.8a.cmml" xref="id1.1.1.m1.1.1.1.3.8">
              \twemoji
             </mtext>
            </merror>
           </ci>
           <ci id="id1.1.1.m1.1.1.1.3.9.cmml" xref="id1.1.1.m1.1.1.1.3.9">
            ùëô
           </ci>
           <ci id="id1.1.1.m1.1.1.1.3.10.cmml" xref="id1.1.1.m1.1.1.1.3.10">
            ùëí
           </ci>
           <ci id="id1.1.1.m1.1.1.1.3.11.cmml" xref="id1.1.1.m1.1.1.1.3.11">
            ùëö
           </ci>
           <ci id="id1.1.1.m1.1.1.1.3.12.cmml" xref="id1.1.1.m1.1.1.1.3.12">
            ùëú
           </ci>
           <ci id="id1.1.1.m1.1.1.1.3.13.cmml" xref="id1.1.1.m1.1.1.1.3.13">
            ùëõ
           </ci>
          </apply>
         </apply>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="id1.1.1.m1.1c">
        {}^{*{\twemoji{peach}\twemoji{lemon}}}
       </annotation>
      </semantics>
     </math>
     , Feng Jiang
     <math alttext="{}^{*\twemoji{lemon}}" class="ltx_Math" display="inline" id="id2.2.2.m2.1">
      <semantics id="id2.2.2.m2.1a">
       <msup id="id2.2.2.m2.1.1" xref="id2.2.2.m2.1.1.cmml">
        <mi id="id2.2.2.m2.1.1a" xref="id2.2.2.m2.1.1.cmml">
        </mi>
        <mrow id="id2.2.2.m2.1.1.1" xref="id2.2.2.m2.1.1.1.cmml">
         <mi id="id2.2.2.m2.1.1.1.2" xref="id2.2.2.m2.1.1.1.2.cmml">
         </mi>
         <mo id="id2.2.2.m2.1.1.1.1" lspace="0.222em" rspace="0.222em" xref="id2.2.2.m2.1.1.1.1.cmml">
          ‚àó
         </mo>
         <mrow id="id2.2.2.m2.1.1.1.3" xref="id2.2.2.m2.1.1.1.3.cmml">
          <merror class="ltx_ERROR undefined undefined" id="id2.2.2.m2.1.1.1.3.2" xref="id2.2.2.m2.1.1.1.3.2b.cmml">
           <mtext id="id2.2.2.m2.1.1.1.3.2a" xref="id2.2.2.m2.1.1.1.3.2b.cmml">
            \twemoji
           </mtext>
          </merror>
          <mo id="id2.2.2.m2.1.1.1.3.1" lspace="0em" rspace="0em" xref="id2.2.2.m2.1.1.1.3.1.cmml">
           ‚Äã
          </mo>
          <mi id="id2.2.2.m2.1.1.1.3.3" xref="id2.2.2.m2.1.1.1.3.3.cmml">
           l
          </mi>
          <mo id="id2.2.2.m2.1.1.1.3.1a" lspace="0em" rspace="0em" xref="id2.2.2.m2.1.1.1.3.1.cmml">
           ‚Äã
          </mo>
          <mi id="id2.2.2.m2.1.1.1.3.4" xref="id2.2.2.m2.1.1.1.3.4.cmml">
           e
          </mi>
          <mo id="id2.2.2.m2.1.1.1.3.1b" lspace="0em" rspace="0em" xref="id2.2.2.m2.1.1.1.3.1.cmml">
           ‚Äã
          </mo>
          <mi id="id2.2.2.m2.1.1.1.3.5" xref="id2.2.2.m2.1.1.1.3.5.cmml">
           m
          </mi>
          <mo id="id2.2.2.m2.1.1.1.3.1c" lspace="0em" rspace="0em" xref="id2.2.2.m2.1.1.1.3.1.cmml">
           ‚Äã
          </mo>
          <mi id="id2.2.2.m2.1.1.1.3.6" xref="id2.2.2.m2.1.1.1.3.6.cmml">
           o
          </mi>
          <mo id="id2.2.2.m2.1.1.1.3.1d" lspace="0em" rspace="0em" xref="id2.2.2.m2.1.1.1.3.1.cmml">
           ‚Äã
          </mo>
          <mi id="id2.2.2.m2.1.1.1.3.7" xref="id2.2.2.m2.1.1.1.3.7.cmml">
           n
          </mi>
         </mrow>
        </mrow>
       </msup>
       <annotation-xml encoding="MathML-Content" id="id2.2.2.m2.1b">
        <apply id="id2.2.2.m2.1.1.cmml" xref="id2.2.2.m2.1.1">
         <apply id="id2.2.2.m2.1.1.1.cmml" xref="id2.2.2.m2.1.1.1">
          <times id="id2.2.2.m2.1.1.1.1.cmml" xref="id2.2.2.m2.1.1.1.1">
          </times>
          <csymbol cd="latexml" id="id2.2.2.m2.1.1.1.2.cmml" xref="id2.2.2.m2.1.1.1.2">
           absent
          </csymbol>
          <apply id="id2.2.2.m2.1.1.1.3.cmml" xref="id2.2.2.m2.1.1.1.3">
           <times id="id2.2.2.m2.1.1.1.3.1.cmml" xref="id2.2.2.m2.1.1.1.3.1">
           </times>
           <ci id="id2.2.2.m2.1.1.1.3.2b.cmml" xref="id2.2.2.m2.1.1.1.3.2">
            <merror class="ltx_ERROR undefined undefined" id="id2.2.2.m2.1.1.1.3.2.cmml" xref="id2.2.2.m2.1.1.1.3.2">
             <mtext id="id2.2.2.m2.1.1.1.3.2a.cmml" xref="id2.2.2.m2.1.1.1.3.2">
              \twemoji
             </mtext>
            </merror>
           </ci>
           <ci id="id2.2.2.m2.1.1.1.3.3.cmml" xref="id2.2.2.m2.1.1.1.3.3">
            ùëô
           </ci>
           <ci id="id2.2.2.m2.1.1.1.3.4.cmml" xref="id2.2.2.m2.1.1.1.3.4">
            ùëí
           </ci>
           <ci id="id2.2.2.m2.1.1.1.3.5.cmml" xref="id2.2.2.m2.1.1.1.3.5">
            ùëö
           </ci>
           <ci id="id2.2.2.m2.1.1.1.3.6.cmml" xref="id2.2.2.m2.1.1.1.3.6">
            ùëú
           </ci>
           <ci id="id2.2.2.m2.1.1.1.3.7.cmml" xref="id2.2.2.m2.1.1.1.3.7">
            ùëõ
           </ci>
          </apply>
         </apply>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="id2.2.2.m2.1c">
        {}^{*\twemoji{lemon}}
       </annotation>
      </semantics>
     </math>
     , Naihao Deng
     <math alttext="{}^{\twemoji{avocado}}" class="ltx_Math" display="inline" id="id3.3.3.m3.1">
      <semantics id="id3.3.3.m3.1a">
       <msup id="id3.3.3.m3.1.1" xref="id3.3.3.m3.1.1.cmml">
        <mi id="id3.3.3.m3.1.1a" xref="id3.3.3.m3.1.1.cmml">
        </mi>
        <mrow id="id3.3.3.m3.1.1.1" xref="id3.3.3.m3.1.1.1.cmml">
         <merror class="ltx_ERROR undefined undefined" id="id3.3.3.m3.1.1.1.2" xref="id3.3.3.m3.1.1.1.2b.cmml">
          <mtext id="id3.3.3.m3.1.1.1.2a" xref="id3.3.3.m3.1.1.1.2b.cmml">
           \twemoji
          </mtext>
         </merror>
         <mo id="id3.3.3.m3.1.1.1.1" lspace="0em" rspace="0em" xref="id3.3.3.m3.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id3.3.3.m3.1.1.1.3" xref="id3.3.3.m3.1.1.1.3.cmml">
          a
         </mi>
         <mo id="id3.3.3.m3.1.1.1.1a" lspace="0em" rspace="0em" xref="id3.3.3.m3.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id3.3.3.m3.1.1.1.4" xref="id3.3.3.m3.1.1.1.4.cmml">
          v
         </mi>
         <mo id="id3.3.3.m3.1.1.1.1b" lspace="0em" rspace="0em" xref="id3.3.3.m3.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id3.3.3.m3.1.1.1.5" xref="id3.3.3.m3.1.1.1.5.cmml">
          o
         </mi>
         <mo id="id3.3.3.m3.1.1.1.1c" lspace="0em" rspace="0em" xref="id3.3.3.m3.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id3.3.3.m3.1.1.1.6" xref="id3.3.3.m3.1.1.1.6.cmml">
          c
         </mi>
         <mo id="id3.3.3.m3.1.1.1.1d" lspace="0em" rspace="0em" xref="id3.3.3.m3.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id3.3.3.m3.1.1.1.7" xref="id3.3.3.m3.1.1.1.7.cmml">
          a
         </mi>
         <mo id="id3.3.3.m3.1.1.1.1e" lspace="0em" rspace="0em" xref="id3.3.3.m3.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id3.3.3.m3.1.1.1.8" xref="id3.3.3.m3.1.1.1.8.cmml">
          d
         </mi>
         <mo id="id3.3.3.m3.1.1.1.1f" lspace="0em" rspace="0em" xref="id3.3.3.m3.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id3.3.3.m3.1.1.1.9" xref="id3.3.3.m3.1.1.1.9.cmml">
          o
         </mi>
        </mrow>
       </msup>
       <annotation-xml encoding="MathML-Content" id="id3.3.3.m3.1b">
        <apply id="id3.3.3.m3.1.1.cmml" xref="id3.3.3.m3.1.1">
         <apply id="id3.3.3.m3.1.1.1.cmml" xref="id3.3.3.m3.1.1.1">
          <times id="id3.3.3.m3.1.1.1.1.cmml" xref="id3.3.3.m3.1.1.1.1">
          </times>
          <ci id="id3.3.3.m3.1.1.1.2b.cmml" xref="id3.3.3.m3.1.1.1.2">
           <merror class="ltx_ERROR undefined undefined" id="id3.3.3.m3.1.1.1.2.cmml" xref="id3.3.3.m3.1.1.1.2">
            <mtext id="id3.3.3.m3.1.1.1.2a.cmml" xref="id3.3.3.m3.1.1.1.2">
             \twemoji
            </mtext>
           </merror>
          </ci>
          <ci id="id3.3.3.m3.1.1.1.3.cmml" xref="id3.3.3.m3.1.1.1.3">
           ùëé
          </ci>
          <ci id="id3.3.3.m3.1.1.1.4.cmml" xref="id3.3.3.m3.1.1.1.4">
           ùë£
          </ci>
          <ci id="id3.3.3.m3.1.1.1.5.cmml" xref="id3.3.3.m3.1.1.1.5">
           ùëú
          </ci>
          <ci id="id3.3.3.m3.1.1.1.6.cmml" xref="id3.3.3.m3.1.1.1.6">
           ùëê
          </ci>
          <ci id="id3.3.3.m3.1.1.1.7.cmml" xref="id3.3.3.m3.1.1.1.7">
           ùëé
          </ci>
          <ci id="id3.3.3.m3.1.1.1.8.cmml" xref="id3.3.3.m3.1.1.1.8">
           ùëë
          </ci>
          <ci id="id3.3.3.m3.1.1.1.9.cmml" xref="id3.3.3.m3.1.1.1.9">
           ùëú
          </ci>
         </apply>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="id3.3.3.m3.1c">
        {}^{\twemoji{avocado}}
       </annotation>
      </semantics>
     </math>
     , Cunxiang Wang
     <math alttext="{}^{\twemoji{lemon}}" class="ltx_Math" display="inline" id="id4.4.4.m4.1">
      <semantics id="id4.4.4.m4.1a">
       <msup id="id4.4.4.m4.1.1" xref="id4.4.4.m4.1.1.cmml">
        <mi id="id4.4.4.m4.1.1a" xref="id4.4.4.m4.1.1.cmml">
        </mi>
        <mrow id="id4.4.4.m4.1.1.1" xref="id4.4.4.m4.1.1.1.cmml">
         <merror class="ltx_ERROR undefined undefined" id="id4.4.4.m4.1.1.1.2" xref="id4.4.4.m4.1.1.1.2b.cmml">
          <mtext id="id4.4.4.m4.1.1.1.2a" xref="id4.4.4.m4.1.1.1.2b.cmml">
           \twemoji
          </mtext>
         </merror>
         <mo id="id4.4.4.m4.1.1.1.1" lspace="0em" rspace="0em" xref="id4.4.4.m4.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id4.4.4.m4.1.1.1.3" xref="id4.4.4.m4.1.1.1.3.cmml">
          l
         </mi>
         <mo id="id4.4.4.m4.1.1.1.1a" lspace="0em" rspace="0em" xref="id4.4.4.m4.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id4.4.4.m4.1.1.1.4" xref="id4.4.4.m4.1.1.1.4.cmml">
          e
         </mi>
         <mo id="id4.4.4.m4.1.1.1.1b" lspace="0em" rspace="0em" xref="id4.4.4.m4.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id4.4.4.m4.1.1.1.5" xref="id4.4.4.m4.1.1.1.5.cmml">
          m
         </mi>
         <mo id="id4.4.4.m4.1.1.1.1c" lspace="0em" rspace="0em" xref="id4.4.4.m4.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id4.4.4.m4.1.1.1.6" xref="id4.4.4.m4.1.1.1.6.cmml">
          o
         </mi>
         <mo id="id4.4.4.m4.1.1.1.1d" lspace="0em" rspace="0em" xref="id4.4.4.m4.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id4.4.4.m4.1.1.1.7" xref="id4.4.4.m4.1.1.1.7.cmml">
          n
         </mi>
        </mrow>
       </msup>
       <annotation-xml encoding="MathML-Content" id="id4.4.4.m4.1b">
        <apply id="id4.4.4.m4.1.1.cmml" xref="id4.4.4.m4.1.1">
         <apply id="id4.4.4.m4.1.1.1.cmml" xref="id4.4.4.m4.1.1.1">
          <times id="id4.4.4.m4.1.1.1.1.cmml" xref="id4.4.4.m4.1.1.1.1">
          </times>
          <ci id="id4.4.4.m4.1.1.1.2b.cmml" xref="id4.4.4.m4.1.1.1.2">
           <merror class="ltx_ERROR undefined undefined" id="id4.4.4.m4.1.1.1.2.cmml" xref="id4.4.4.m4.1.1.1.2">
            <mtext id="id4.4.4.m4.1.1.1.2a.cmml" xref="id4.4.4.m4.1.1.1.2">
             \twemoji
            </mtext>
           </merror>
          </ci>
          <ci id="id4.4.4.m4.1.1.1.3.cmml" xref="id4.4.4.m4.1.1.1.3">
           ùëô
          </ci>
          <ci id="id4.4.4.m4.1.1.1.4.cmml" xref="id4.4.4.m4.1.1.1.4">
           ùëí
          </ci>
          <ci id="id4.4.4.m4.1.1.1.5.cmml" xref="id4.4.4.m4.1.1.1.5">
           ùëö
          </ci>
          <ci id="id4.4.4.m4.1.1.1.6.cmml" xref="id4.4.4.m4.1.1.1.6">
           ùëú
          </ci>
          <ci id="id4.4.4.m4.1.1.1.7.cmml" xref="id4.4.4.m4.1.1.1.7">
           ùëõ
          </ci>
         </apply>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="id4.4.4.m4.1c">
        {}^{\twemoji{lemon}}
       </annotation>
      </semantics>
     </math>
     , Guojiang Zhao
     <math alttext="{}^{\twemoji{blueberries}}" class="ltx_Math" display="inline" id="id5.5.5.m5.1">
      <semantics id="id5.5.5.m5.1a">
       <msup id="id5.5.5.m5.1.1" xref="id5.5.5.m5.1.1.cmml">
        <mi id="id5.5.5.m5.1.1a" xref="id5.5.5.m5.1.1.cmml">
        </mi>
        <mrow id="id5.5.5.m5.1.1.1" xref="id5.5.5.m5.1.1.1.cmml">
         <merror class="ltx_ERROR undefined undefined" id="id5.5.5.m5.1.1.1.2" xref="id5.5.5.m5.1.1.1.2b.cmml">
          <mtext id="id5.5.5.m5.1.1.1.2a" xref="id5.5.5.m5.1.1.1.2b.cmml">
           \twemoji
          </mtext>
         </merror>
         <mo id="id5.5.5.m5.1.1.1.1" lspace="0em" rspace="0em" xref="id5.5.5.m5.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id5.5.5.m5.1.1.1.3" xref="id5.5.5.m5.1.1.1.3.cmml">
          b
         </mi>
         <mo id="id5.5.5.m5.1.1.1.1a" lspace="0em" rspace="0em" xref="id5.5.5.m5.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id5.5.5.m5.1.1.1.4" xref="id5.5.5.m5.1.1.1.4.cmml">
          l
         </mi>
         <mo id="id5.5.5.m5.1.1.1.1b" lspace="0em" rspace="0em" xref="id5.5.5.m5.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id5.5.5.m5.1.1.1.5" xref="id5.5.5.m5.1.1.1.5.cmml">
          u
         </mi>
         <mo id="id5.5.5.m5.1.1.1.1c" lspace="0em" rspace="0em" xref="id5.5.5.m5.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id5.5.5.m5.1.1.1.6" xref="id5.5.5.m5.1.1.1.6.cmml">
          e
         </mi>
         <mo id="id5.5.5.m5.1.1.1.1d" lspace="0em" rspace="0em" xref="id5.5.5.m5.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id5.5.5.m5.1.1.1.7" xref="id5.5.5.m5.1.1.1.7.cmml">
          b
         </mi>
         <mo id="id5.5.5.m5.1.1.1.1e" lspace="0em" rspace="0em" xref="id5.5.5.m5.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id5.5.5.m5.1.1.1.8" xref="id5.5.5.m5.1.1.1.8.cmml">
          e
         </mi>
         <mo id="id5.5.5.m5.1.1.1.1f" lspace="0em" rspace="0em" xref="id5.5.5.m5.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id5.5.5.m5.1.1.1.9" xref="id5.5.5.m5.1.1.1.9.cmml">
          r
         </mi>
         <mo id="id5.5.5.m5.1.1.1.1g" lspace="0em" rspace="0em" xref="id5.5.5.m5.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id5.5.5.m5.1.1.1.10" xref="id5.5.5.m5.1.1.1.10.cmml">
          r
         </mi>
         <mo id="id5.5.5.m5.1.1.1.1h" lspace="0em" rspace="0em" xref="id5.5.5.m5.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id5.5.5.m5.1.1.1.11" xref="id5.5.5.m5.1.1.1.11.cmml">
          i
         </mi>
         <mo id="id5.5.5.m5.1.1.1.1i" lspace="0em" rspace="0em" xref="id5.5.5.m5.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id5.5.5.m5.1.1.1.12" xref="id5.5.5.m5.1.1.1.12.cmml">
          e
         </mi>
         <mo id="id5.5.5.m5.1.1.1.1j" lspace="0em" rspace="0em" xref="id5.5.5.m5.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id5.5.5.m5.1.1.1.13" xref="id5.5.5.m5.1.1.1.13.cmml">
          s
         </mi>
        </mrow>
       </msup>
       <annotation-xml encoding="MathML-Content" id="id5.5.5.m5.1b">
        <apply id="id5.5.5.m5.1.1.cmml" xref="id5.5.5.m5.1.1">
         <apply id="id5.5.5.m5.1.1.1.cmml" xref="id5.5.5.m5.1.1.1">
          <times id="id5.5.5.m5.1.1.1.1.cmml" xref="id5.5.5.m5.1.1.1.1">
          </times>
          <ci id="id5.5.5.m5.1.1.1.2b.cmml" xref="id5.5.5.m5.1.1.1.2">
           <merror class="ltx_ERROR undefined undefined" id="id5.5.5.m5.1.1.1.2.cmml" xref="id5.5.5.m5.1.1.1.2">
            <mtext id="id5.5.5.m5.1.1.1.2a.cmml" xref="id5.5.5.m5.1.1.1.2">
             \twemoji
            </mtext>
           </merror>
          </ci>
          <ci id="id5.5.5.m5.1.1.1.3.cmml" xref="id5.5.5.m5.1.1.1.3">
           ùëè
          </ci>
          <ci id="id5.5.5.m5.1.1.1.4.cmml" xref="id5.5.5.m5.1.1.1.4">
           ùëô
          </ci>
          <ci id="id5.5.5.m5.1.1.1.5.cmml" xref="id5.5.5.m5.1.1.1.5">
           ùë¢
          </ci>
          <ci id="id5.5.5.m5.1.1.1.6.cmml" xref="id5.5.5.m5.1.1.1.6">
           ùëí
          </ci>
          <ci id="id5.5.5.m5.1.1.1.7.cmml" xref="id5.5.5.m5.1.1.1.7">
           ùëè
          </ci>
          <ci id="id5.5.5.m5.1.1.1.8.cmml" xref="id5.5.5.m5.1.1.1.8">
           ùëí
          </ci>
          <ci id="id5.5.5.m5.1.1.1.9.cmml" xref="id5.5.5.m5.1.1.1.9">
           ùëü
          </ci>
          <ci id="id5.5.5.m5.1.1.1.10.cmml" xref="id5.5.5.m5.1.1.1.10">
           ùëü
          </ci>
          <ci id="id5.5.5.m5.1.1.1.11.cmml" xref="id5.5.5.m5.1.1.1.11">
           ùëñ
          </ci>
          <ci id="id5.5.5.m5.1.1.1.12.cmml" xref="id5.5.5.m5.1.1.1.12">
           ùëí
          </ci>
          <ci id="id5.5.5.m5.1.1.1.13.cmml" xref="id5.5.5.m5.1.1.1.13">
           ùë†
          </ci>
         </apply>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="id5.5.5.m5.1c">
        {}^{\twemoji{blueberries}}
       </annotation>
      </semantics>
     </math>
     <br class="ltx_break"/>
     Rada Mihalcea
     <math alttext="{}^{\twemoji{avocado}}" class="ltx_Math" display="inline" id="id6.6.6.m6.1">
      <semantics id="id6.6.6.m6.1a">
       <msup id="id6.6.6.m6.1.1" xref="id6.6.6.m6.1.1.cmml">
        <mi id="id6.6.6.m6.1.1a" xref="id6.6.6.m6.1.1.cmml">
        </mi>
        <mrow id="id6.6.6.m6.1.1.1" xref="id6.6.6.m6.1.1.1.cmml">
         <merror class="ltx_ERROR undefined undefined" id="id6.6.6.m6.1.1.1.2" xref="id6.6.6.m6.1.1.1.2b.cmml">
          <mtext id="id6.6.6.m6.1.1.1.2a" xref="id6.6.6.m6.1.1.1.2b.cmml">
           \twemoji
          </mtext>
         </merror>
         <mo id="id6.6.6.m6.1.1.1.1" lspace="0em" rspace="0em" xref="id6.6.6.m6.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id6.6.6.m6.1.1.1.3" xref="id6.6.6.m6.1.1.1.3.cmml">
          a
         </mi>
         <mo id="id6.6.6.m6.1.1.1.1a" lspace="0em" rspace="0em" xref="id6.6.6.m6.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id6.6.6.m6.1.1.1.4" xref="id6.6.6.m6.1.1.1.4.cmml">
          v
         </mi>
         <mo id="id6.6.6.m6.1.1.1.1b" lspace="0em" rspace="0em" xref="id6.6.6.m6.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id6.6.6.m6.1.1.1.5" xref="id6.6.6.m6.1.1.1.5.cmml">
          o
         </mi>
         <mo id="id6.6.6.m6.1.1.1.1c" lspace="0em" rspace="0em" xref="id6.6.6.m6.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id6.6.6.m6.1.1.1.6" xref="id6.6.6.m6.1.1.1.6.cmml">
          c
         </mi>
         <mo id="id6.6.6.m6.1.1.1.1d" lspace="0em" rspace="0em" xref="id6.6.6.m6.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id6.6.6.m6.1.1.1.7" xref="id6.6.6.m6.1.1.1.7.cmml">
          a
         </mi>
         <mo id="id6.6.6.m6.1.1.1.1e" lspace="0em" rspace="0em" xref="id6.6.6.m6.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id6.6.6.m6.1.1.1.8" xref="id6.6.6.m6.1.1.1.8.cmml">
          d
         </mi>
         <mo id="id6.6.6.m6.1.1.1.1f" lspace="0em" rspace="0em" xref="id6.6.6.m6.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id6.6.6.m6.1.1.1.9" xref="id6.6.6.m6.1.1.1.9.cmml">
          o
         </mi>
        </mrow>
       </msup>
       <annotation-xml encoding="MathML-Content" id="id6.6.6.m6.1b">
        <apply id="id6.6.6.m6.1.1.cmml" xref="id6.6.6.m6.1.1">
         <apply id="id6.6.6.m6.1.1.1.cmml" xref="id6.6.6.m6.1.1.1">
          <times id="id6.6.6.m6.1.1.1.1.cmml" xref="id6.6.6.m6.1.1.1.1">
          </times>
          <ci id="id6.6.6.m6.1.1.1.2b.cmml" xref="id6.6.6.m6.1.1.1.2">
           <merror class="ltx_ERROR undefined undefined" id="id6.6.6.m6.1.1.1.2.cmml" xref="id6.6.6.m6.1.1.1.2">
            <mtext id="id6.6.6.m6.1.1.1.2a.cmml" xref="id6.6.6.m6.1.1.1.2">
             \twemoji
            </mtext>
           </merror>
          </ci>
          <ci id="id6.6.6.m6.1.1.1.3.cmml" xref="id6.6.6.m6.1.1.1.3">
           ùëé
          </ci>
          <ci id="id6.6.6.m6.1.1.1.4.cmml" xref="id6.6.6.m6.1.1.1.4">
           ùë£
          </ci>
          <ci id="id6.6.6.m6.1.1.1.5.cmml" xref="id6.6.6.m6.1.1.1.5">
           ùëú
          </ci>
          <ci id="id6.6.6.m6.1.1.1.6.cmml" xref="id6.6.6.m6.1.1.1.6">
           ùëê
          </ci>
          <ci id="id6.6.6.m6.1.1.1.7.cmml" xref="id6.6.6.m6.1.1.1.7">
           ùëé
          </ci>
          <ci id="id6.6.6.m6.1.1.1.8.cmml" xref="id6.6.6.m6.1.1.1.8">
           ùëë
          </ci>
          <ci id="id6.6.6.m6.1.1.1.9.cmml" xref="id6.6.6.m6.1.1.1.9">
           ùëú
          </ci>
         </apply>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="id6.6.6.m6.1c">
        {}^{\twemoji{avocado}}
       </annotation>
      </semantics>
     </math>
     , Yue Zhang
     <math alttext="{}^{\twemoji{lemon}}" class="ltx_Math" display="inline" id="id7.7.7.m7.1">
      <semantics id="id7.7.7.m7.1a">
       <msup id="id7.7.7.m7.1.1" xref="id7.7.7.m7.1.1.cmml">
        <mi id="id7.7.7.m7.1.1a" xref="id7.7.7.m7.1.1.cmml">
        </mi>
        <mrow id="id7.7.7.m7.1.1.1" xref="id7.7.7.m7.1.1.1.cmml">
         <merror class="ltx_ERROR undefined undefined" id="id7.7.7.m7.1.1.1.2" xref="id7.7.7.m7.1.1.1.2b.cmml">
          <mtext id="id7.7.7.m7.1.1.1.2a" xref="id7.7.7.m7.1.1.1.2b.cmml">
           \twemoji
          </mtext>
         </merror>
         <mo id="id7.7.7.m7.1.1.1.1" lspace="0em" rspace="0em" xref="id7.7.7.m7.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id7.7.7.m7.1.1.1.3" xref="id7.7.7.m7.1.1.1.3.cmml">
          l
         </mi>
         <mo id="id7.7.7.m7.1.1.1.1a" lspace="0em" rspace="0em" xref="id7.7.7.m7.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id7.7.7.m7.1.1.1.4" xref="id7.7.7.m7.1.1.1.4.cmml">
          e
         </mi>
         <mo id="id7.7.7.m7.1.1.1.1b" lspace="0em" rspace="0em" xref="id7.7.7.m7.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id7.7.7.m7.1.1.1.5" xref="id7.7.7.m7.1.1.1.5.cmml">
          m
         </mi>
         <mo id="id7.7.7.m7.1.1.1.1c" lspace="0em" rspace="0em" xref="id7.7.7.m7.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id7.7.7.m7.1.1.1.6" xref="id7.7.7.m7.1.1.1.6.cmml">
          o
         </mi>
         <mo id="id7.7.7.m7.1.1.1.1d" lspace="0em" rspace="0em" xref="id7.7.7.m7.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id7.7.7.m7.1.1.1.7" xref="id7.7.7.m7.1.1.1.7.cmml">
          n
         </mi>
        </mrow>
       </msup>
       <annotation-xml encoding="MathML-Content" id="id7.7.7.m7.1b">
        <apply id="id7.7.7.m7.1.1.cmml" xref="id7.7.7.m7.1.1">
         <apply id="id7.7.7.m7.1.1.1.cmml" xref="id7.7.7.m7.1.1.1">
          <times id="id7.7.7.m7.1.1.1.1.cmml" xref="id7.7.7.m7.1.1.1.1">
          </times>
          <ci id="id7.7.7.m7.1.1.1.2b.cmml" xref="id7.7.7.m7.1.1.1.2">
           <merror class="ltx_ERROR undefined undefined" id="id7.7.7.m7.1.1.1.2.cmml" xref="id7.7.7.m7.1.1.1.2">
            <mtext id="id7.7.7.m7.1.1.1.2a.cmml" xref="id7.7.7.m7.1.1.1.2">
             \twemoji
            </mtext>
           </merror>
          </ci>
          <ci id="id7.7.7.m7.1.1.1.3.cmml" xref="id7.7.7.m7.1.1.1.3">
           ùëô
          </ci>
          <ci id="id7.7.7.m7.1.1.1.4.cmml" xref="id7.7.7.m7.1.1.1.4">
           ùëí
          </ci>
          <ci id="id7.7.7.m7.1.1.1.5.cmml" xref="id7.7.7.m7.1.1.1.5">
           ùëö
          </ci>
          <ci id="id7.7.7.m7.1.1.1.6.cmml" xref="id7.7.7.m7.1.1.1.6">
           ùëú
          </ci>
          <ci id="id7.7.7.m7.1.1.1.7.cmml" xref="id7.7.7.m7.1.1.1.7">
           ùëõ
          </ci>
         </apply>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="id7.7.7.m7.1c">
        {}^{\twemoji{lemon}}
       </annotation>
      </semantics>
     </math>
     <br class="ltx_break"/>
     <math alttext="{}^{\twemoji{peach}}" class="ltx_Math" display="inline" id="id8.8.8.m8.1">
      <semantics id="id8.8.8.m8.1a">
       <msup id="id8.8.8.m8.1.1" xref="id8.8.8.m8.1.1.cmml">
        <mi id="id8.8.8.m8.1.1a" xref="id8.8.8.m8.1.1.cmml">
        </mi>
        <mrow id="id8.8.8.m8.1.1.1" xref="id8.8.8.m8.1.1.1.cmml">
         <merror class="ltx_ERROR undefined undefined" id="id8.8.8.m8.1.1.1.2" xref="id8.8.8.m8.1.1.1.2b.cmml">
          <mtext id="id8.8.8.m8.1.1.1.2a" xref="id8.8.8.m8.1.1.1.2b.cmml">
           \twemoji
          </mtext>
         </merror>
         <mo id="id8.8.8.m8.1.1.1.1" lspace="0em" rspace="0em" xref="id8.8.8.m8.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id8.8.8.m8.1.1.1.3" xref="id8.8.8.m8.1.1.1.3.cmml">
          p
         </mi>
         <mo id="id8.8.8.m8.1.1.1.1a" lspace="0em" rspace="0em" xref="id8.8.8.m8.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id8.8.8.m8.1.1.1.4" xref="id8.8.8.m8.1.1.1.4.cmml">
          e
         </mi>
         <mo id="id8.8.8.m8.1.1.1.1b" lspace="0em" rspace="0em" xref="id8.8.8.m8.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id8.8.8.m8.1.1.1.5" xref="id8.8.8.m8.1.1.1.5.cmml">
          a
         </mi>
         <mo id="id8.8.8.m8.1.1.1.1c" lspace="0em" rspace="0em" xref="id8.8.8.m8.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id8.8.8.m8.1.1.1.6" xref="id8.8.8.m8.1.1.1.6.cmml">
          c
         </mi>
         <mo id="id8.8.8.m8.1.1.1.1d" lspace="0em" rspace="0em" xref="id8.8.8.m8.1.1.1.1.cmml">
          ‚Äã
         </mo>
         <mi id="id8.8.8.m8.1.1.1.7" xref="id8.8.8.m8.1.1.1.7.cmml">
          h
         </mi>
        </mrow>
       </msup>
       <annotation-xml encoding="MathML-Content" id="id8.8.8.m8.1b">
        <apply id="id8.8.8.m8.1.1.cmml" xref="id8.8.8.m8.1.1">
         <apply id="id8.8.8.m8.1.1.1.cmml" xref="id8.8.8.m8.1.1.1">
          <times id="id8.8.8.m8.1.1.1.1.cmml" xref="id8.8.8.m8.1.1.1.1">
          </times>
          <ci id="id8.8.8.m8.1.1.1.2b.cmml" xref="id8.8.8.m8.1.1.1.2">
           <merror class="ltx_ERROR undefined undefined" id="id8.8.8.m8.1.1.1.2.cmml" xref="id8.8.8.m8.1.1.1.2">
            <mtext id="id8.8.8.m8.1.1.1.2a.cmml" xref="id8.8.8.m8.1.1.1.2">
             \twemoji
            </mtext>
           </merror>
          </ci>
          <ci id="id8.8.8.m8.1.1.1.3.cmml" xref="id8.8.8.m8.1.1.1.3">
           ùëù
          </ci>
          <ci id="id8.8.8.m8.1.1.1.4.cmml" xref="id8.8.8.m8.1.1.1.4">
           ùëí
          </ci>
          <ci id="id8.8.8.m8.1.1.1.5.cmml" xref="id8.8.8.m8.1.1.1.5">
           ùëé
          </ci>
          <ci id="id8.8.8.m8.1.1.1.6.cmml" xref="id8.8.8.m8.1.1.1.6">
           ùëê
          </ci>
          <ci id="id8.8.8.m8.1.1.1.7.cmml" xref="id8.8.8.m8.1.1.1.7">
           ‚Ñé
          </ci>
         </apply>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="id8.8.8.m8.1c">
        {}^{\twemoji{peach}}
       </annotation>
      </semantics>
     </math>
    </span>
    School of Mathematical Science
   </span>
   <span class="ltx_author_notes">
    <span class="ltx_contact ltx_role_affiliation">
    </span>
   </span>
  </span>
  <span class="ltx_creator ltx_role_author">
   <span class="ltx_personname">
    Shanghai Jiao Tong University
    <br class="ltx_break"/>
    <math alttext="{}^{\twemoji{lemon}}" class="ltx_Math" display="inline" id="id9.1.m1.1">
     <semantics id="id9.1.m1.1a">
      <msup id="id9.1.m1.1.1" xref="id9.1.m1.1.1.cmml">
       <mi id="id9.1.m1.1.1a" xref="id9.1.m1.1.1.cmml">
       </mi>
       <mrow id="id9.1.m1.1.1.1" xref="id9.1.m1.1.1.1.cmml">
        <merror class="ltx_ERROR undefined undefined" id="id9.1.m1.1.1.1.2" xref="id9.1.m1.1.1.1.2b.cmml">
         <mtext id="id9.1.m1.1.1.1.2a" xref="id9.1.m1.1.1.1.2b.cmml">
          \twemoji
         </mtext>
        </merror>
        <mo id="id9.1.m1.1.1.1.1" lspace="0em" rspace="0em" xref="id9.1.m1.1.1.1.1.cmml">
         ‚Äã
        </mo>
        <mi id="id9.1.m1.1.1.1.3" xref="id9.1.m1.1.1.1.3.cmml">
         l
        </mi>
        <mo id="id9.1.m1.1.1.1.1a" lspace="0em" rspace="0em" xref="id9.1.m1.1.1.1.1.cmml">
         ‚Äã
        </mo>
        <mi id="id9.1.m1.1.1.1.4" xref="id9.1.m1.1.1.1.4.cmml">
         e
        </mi>
        <mo id="id9.1.m1.1.1.1.1b" lspace="0em" rspace="0em" xref="id9.1.m1.1.1.1.1.cmml">
         ‚Äã
        </mo>
        <mi id="id9.1.m1.1.1.1.5" xref="id9.1.m1.1.1.1.5.cmml">
         m
        </mi>
        <mo id="id9.1.m1.1.1.1.1c" lspace="0em" rspace="0em" xref="id9.1.m1.1.1.1.1.cmml">
         ‚Äã
        </mo>
        <mi id="id9.1.m1.1.1.1.6" xref="id9.1.m1.1.1.1.6.cmml">
         o
        </mi>
        <mo id="id9.1.m1.1.1.1.1d" lspace="0em" rspace="0em" xref="id9.1.m1.1.1.1.1.cmml">
         ‚Äã
        </mo>
        <mi id="id9.1.m1.1.1.1.7" xref="id9.1.m1.1.1.1.7.cmml">
         n
        </mi>
       </mrow>
      </msup>
      <annotation-xml encoding="MathML-Content" id="id9.1.m1.1b">
       <apply id="id9.1.m1.1.1.cmml" xref="id9.1.m1.1.1">
        <apply id="id9.1.m1.1.1.1.cmml" xref="id9.1.m1.1.1.1">
         <times id="id9.1.m1.1.1.1.1.cmml" xref="id9.1.m1.1.1.1.1">
         </times>
         <ci id="id9.1.m1.1.1.1.2b.cmml" xref="id9.1.m1.1.1.1.2">
          <merror class="ltx_ERROR undefined undefined" id="id9.1.m1.1.1.1.2.cmml" xref="id9.1.m1.1.1.1.2">
           <mtext id="id9.1.m1.1.1.1.2a.cmml" xref="id9.1.m1.1.1.1.2">
            \twemoji
           </mtext>
          </merror>
         </ci>
         <ci id="id9.1.m1.1.1.1.3.cmml" xref="id9.1.m1.1.1.1.3">
          ùëô
         </ci>
         <ci id="id9.1.m1.1.1.1.4.cmml" xref="id9.1.m1.1.1.1.4">
          ùëí
         </ci>
         <ci id="id9.1.m1.1.1.1.5.cmml" xref="id9.1.m1.1.1.1.5">
          ùëö
         </ci>
         <ci id="id9.1.m1.1.1.1.6.cmml" xref="id9.1.m1.1.1.1.6">
          ùëú
         </ci>
         <ci id="id9.1.m1.1.1.1.7.cmml" xref="id9.1.m1.1.1.1.7">
          ùëõ
         </ci>
        </apply>
       </apply>
      </annotation-xml>
      <annotation encoding="application/x-tex" id="id9.1.m1.1c">
       {}^{\twemoji{lemon}}
      </annotation>
     </semantics>
    </math>
    School of Engineering
   </span>
   <span class="ltx_author_notes">
    <span class="ltx_contact ltx_role_affiliation">
    </span>
   </span>
  </span>
  <span class="ltx_creator ltx_role_author">
   <span class="ltx_personname">
    Westlake University
    <br class="ltx_break"/>
    <math alttext="{}^{\twemoji{avocado}}" class="ltx_Math" display="inline" id="id10.1.m1.1">
     <semantics id="id10.1.m1.1a">
      <msup id="id10.1.m1.1.1" xref="id10.1.m1.1.1.cmml">
       <mi id="id10.1.m1.1.1a" xref="id10.1.m1.1.1.cmml">
       </mi>
       <mrow id="id10.1.m1.1.1.1" xref="id10.1.m1.1.1.1.cmml">
        <merror class="ltx_ERROR undefined undefined" id="id10.1.m1.1.1.1.2" xref="id10.1.m1.1.1.1.2b.cmml">
         <mtext id="id10.1.m1.1.1.1.2a" xref="id10.1.m1.1.1.1.2b.cmml">
          \twemoji
         </mtext>
        </merror>
        <mo id="id10.1.m1.1.1.1.1" lspace="0em" rspace="0em" xref="id10.1.m1.1.1.1.1.cmml">
         ‚Äã
        </mo>
        <mi id="id10.1.m1.1.1.1.3" xref="id10.1.m1.1.1.1.3.cmml">
         a
        </mi>
        <mo id="id10.1.m1.1.1.1.1a" lspace="0em" rspace="0em" xref="id10.1.m1.1.1.1.1.cmml">
         ‚Äã
        </mo>
        <mi id="id10.1.m1.1.1.1.4" xref="id10.1.m1.1.1.1.4.cmml">
         v
        </mi>
        <mo id="id10.1.m1.1.1.1.1b" lspace="0em" rspace="0em" xref="id10.1.m1.1.1.1.1.cmml">
         ‚Äã
        </mo>
        <mi id="id10.1.m1.1.1.1.5" xref="id10.1.m1.1.1.1.5.cmml">
         o
        </mi>
        <mo id="id10.1.m1.1.1.1.1c" lspace="0em" rspace="0em" xref="id10.1.m1.1.1.1.1.cmml">
         ‚Äã
        </mo>
        <mi id="id10.1.m1.1.1.1.6" xref="id10.1.m1.1.1.1.6.cmml">
         c
        </mi>
        <mo id="id10.1.m1.1.1.1.1d" lspace="0em" rspace="0em" xref="id10.1.m1.1.1.1.1.cmml">
         ‚Äã
        </mo>
        <mi id="id10.1.m1.1.1.1.7" xref="id10.1.m1.1.1.1.7.cmml">
         a
        </mi>
        <mo id="id10.1.m1.1.1.1.1e" lspace="0em" rspace="0em" xref="id10.1.m1.1.1.1.1.cmml">
         ‚Äã
        </mo>
        <mi id="id10.1.m1.1.1.1.8" xref="id10.1.m1.1.1.1.8.cmml">
         d
        </mi>
        <mo id="id10.1.m1.1.1.1.1f" lspace="0em" rspace="0em" xref="id10.1.m1.1.1.1.1.cmml">
         ‚Äã
        </mo>
        <mi id="id10.1.m1.1.1.1.9" xref="id10.1.m1.1.1.1.9.cmml">
         o
        </mi>
       </mrow>
      </msup>
      <annotation-xml encoding="MathML-Content" id="id10.1.m1.1b">
       <apply id="id10.1.m1.1.1.cmml" xref="id10.1.m1.1.1">
        <apply id="id10.1.m1.1.1.1.cmml" xref="id10.1.m1.1.1.1">
         <times id="id10.1.m1.1.1.1.1.cmml" xref="id10.1.m1.1.1.1.1">
         </times>
         <ci id="id10.1.m1.1.1.1.2b.cmml" xref="id10.1.m1.1.1.1.2">
          <merror class="ltx_ERROR undefined undefined" id="id10.1.m1.1.1.1.2.cmml" xref="id10.1.m1.1.1.1.2">
           <mtext id="id10.1.m1.1.1.1.2a.cmml" xref="id10.1.m1.1.1.1.2">
            \twemoji
           </mtext>
          </merror>
         </ci>
         <ci id="id10.1.m1.1.1.1.3.cmml" xref="id10.1.m1.1.1.1.3">
          ùëé
         </ci>
         <ci id="id10.1.m1.1.1.1.4.cmml" xref="id10.1.m1.1.1.1.4">
          ùë£
         </ci>
         <ci id="id10.1.m1.1.1.1.5.cmml" xref="id10.1.m1.1.1.1.5">
          ùëú
         </ci>
         <ci id="id10.1.m1.1.1.1.6.cmml" xref="id10.1.m1.1.1.1.6">
          ùëê
         </ci>
         <ci id="id10.1.m1.1.1.1.7.cmml" xref="id10.1.m1.1.1.1.7">
          ùëé
         </ci>
         <ci id="id10.1.m1.1.1.1.8.cmml" xref="id10.1.m1.1.1.1.8">
          ùëë
         </ci>
         <ci id="id10.1.m1.1.1.1.9.cmml" xref="id10.1.m1.1.1.1.9">
          ùëú
         </ci>
        </apply>
       </apply>
      </annotation-xml>
      <annotation encoding="application/x-tex" id="id10.1.m1.1c">
       {}^{\twemoji{avocado}}
      </annotation>
     </semantics>
    </math>
    University of Michigan
    <math alttext="{}^{\twemoji{blueberries}}" class="ltx_Math" display="inline" id="id11.2.m2.1">
     <semantics id="id11.2.m2.1a">
      <msup id="id11.2.m2.1.1" xref="id11.2.m2.1.1.cmml">
       <mi id="id11.2.m2.1.1a" xref="id11.2.m2.1.1.cmml">
       </mi>
       <mrow id="id11.2.m2.1.1.1" xref="id11.2.m2.1.1.1.cmml">
        <merror class="ltx_ERROR undefined undefined" id="id11.2.m2.1.1.1.2" xref="id11.2.m2.1.1.1.2b.cmml">
         <mtext id="id11.2.m2.1.1.1.2a" xref="id11.2.m2.1.1.1.2b.cmml">
          \twemoji
         </mtext>
        </merror>
        <mo id="id11.2.m2.1.1.1.1" lspace="0em" rspace="0em" xref="id11.2.m2.1.1.1.1.cmml">
         ‚Äã
        </mo>
        <mi id="id11.2.m2.1.1.1.3" xref="id11.2.m2.1.1.1.3.cmml">
         b
        </mi>
        <mo id="id11.2.m2.1.1.1.1a" lspace="0em" rspace="0em" xref="id11.2.m2.1.1.1.1.cmml">
         ‚Äã
        </mo>
        <mi id="id11.2.m2.1.1.1.4" xref="id11.2.m2.1.1.1.4.cmml">
         l
        </mi>
        <mo id="id11.2.m2.1.1.1.1b" lspace="0em" rspace="0em" xref="id11.2.m2.1.1.1.1.cmml">
         ‚Äã
        </mo>
        <mi id="id11.2.m2.1.1.1.5" xref="id11.2.m2.1.1.1.5.cmml">
         u
        </mi>
        <mo id="id11.2.m2.1.1.1.1c" lspace="0em" rspace="0em" xref="id11.2.m2.1.1.1.1.cmml">
         ‚Äã
        </mo>
        <mi id="id11.2.m2.1.1.1.6" xref="id11.2.m2.1.1.1.6.cmml">
         e
        </mi>
        <mo id="id11.2.m2.1.1.1.1d" lspace="0em" rspace="0em" xref="id11.2.m2.1.1.1.1.cmml">
         ‚Äã
        </mo>
        <mi id="id11.2.m2.1.1.1.7" xref="id11.2.m2.1.1.1.7.cmml">
         b
        </mi>
        <mo id="id11.2.m2.1.1.1.1e" lspace="0em" rspace="0em" xref="id11.2.m2.1.1.1.1.cmml">
         ‚Äã
        </mo>
        <mi id="id11.2.m2.1.1.1.8" xref="id11.2.m2.1.1.1.8.cmml">
         e
        </mi>
        <mo id="id11.2.m2.1.1.1.1f" lspace="0em" rspace="0em" xref="id11.2.m2.1.1.1.1.cmml">
         ‚Äã
        </mo>
        <mi id="id11.2.m2.1.1.1.9" xref="id11.2.m2.1.1.1.9.cmml">
         r
        </mi>
        <mo id="id11.2.m2.1.1.1.1g" lspace="0em" rspace="0em" xref="id11.2.m2.1.1.1.1.cmml">
         ‚Äã
        </mo>
        <mi id="id11.2.m2.1.1.1.10" xref="id11.2.m2.1.1.1.10.cmml">
         r
        </mi>
        <mo id="id11.2.m2.1.1.1.1h" lspace="0em" rspace="0em" xref="id11.2.m2.1.1.1.1.cmml">
         ‚Äã
        </mo>
        <mi id="id11.2.m2.1.1.1.11" xref="id11.2.m2.1.1.1.11.cmml">
         i
        </mi>
        <mo id="id11.2.m2.1.1.1.1i" lspace="0em" rspace="0em" xref="id11.2.m2.1.1.1.1.cmml">
         ‚Äã
        </mo>
        <mi id="id11.2.m2.1.1.1.12" xref="id11.2.m2.1.1.1.12.cmml">
         e
        </mi>
        <mo id="id11.2.m2.1.1.1.1j" lspace="0em" rspace="0em" xref="id11.2.m2.1.1.1.1.cmml">
         ‚Äã
        </mo>
        <mi id="id11.2.m2.1.1.1.13" xref="id11.2.m2.1.1.1.13.cmml">
         s
        </mi>
       </mrow>
      </msup>
      <annotation-xml encoding="MathML-Content" id="id11.2.m2.1b">
       <apply id="id11.2.m2.1.1.cmml" xref="id11.2.m2.1.1">
        <apply id="id11.2.m2.1.1.1.cmml" xref="id11.2.m2.1.1.1">
         <times id="id11.2.m2.1.1.1.1.cmml" xref="id11.2.m2.1.1.1.1">
         </times>
         <ci id="id11.2.m2.1.1.1.2b.cmml" xref="id11.2.m2.1.1.1.2">
          <merror class="ltx_ERROR undefined undefined" id="id11.2.m2.1.1.1.2.cmml" xref="id11.2.m2.1.1.1.2">
           <mtext id="id11.2.m2.1.1.1.2a.cmml" xref="id11.2.m2.1.1.1.2">
            \twemoji
           </mtext>
          </merror>
         </ci>
         <ci id="id11.2.m2.1.1.1.3.cmml" xref="id11.2.m2.1.1.1.3">
          ùëè
         </ci>
         <ci id="id11.2.m2.1.1.1.4.cmml" xref="id11.2.m2.1.1.1.4">
          ùëô
         </ci>
         <ci id="id11.2.m2.1.1.1.5.cmml" xref="id11.2.m2.1.1.1.5">
          ùë¢
         </ci>
         <ci id="id11.2.m2.1.1.1.6.cmml" xref="id11.2.m2.1.1.1.6">
          ùëí
         </ci>
         <ci id="id11.2.m2.1.1.1.7.cmml" xref="id11.2.m2.1.1.1.7">
          ùëè
         </ci>
         <ci id="id11.2.m2.1.1.1.8.cmml" xref="id11.2.m2.1.1.1.8">
          ùëí
         </ci>
         <ci id="id11.2.m2.1.1.1.9.cmml" xref="id11.2.m2.1.1.1.9">
          ùëü
         </ci>
         <ci id="id11.2.m2.1.1.1.10.cmml" xref="id11.2.m2.1.1.1.10">
          ùëü
         </ci>
         <ci id="id11.2.m2.1.1.1.11.cmml" xref="id11.2.m2.1.1.1.11">
          ùëñ
         </ci>
         <ci id="id11.2.m2.1.1.1.12.cmml" xref="id11.2.m2.1.1.1.12">
          ùëí
         </ci>
         <ci id="id11.2.m2.1.1.1.13.cmml" xref="id11.2.m2.1.1.1.13">
          ùë†
         </ci>
        </apply>
       </apply>
      </annotation-xml>
      <annotation encoding="application/x-tex" id="id11.2.m2.1c">
       {}^{\twemoji{blueberries}}
      </annotation>
     </semantics>
    </math>
    Carnegie Mellon University
   </span>
   <span class="ltx_author_notes">
    <span class="ltx_contact ltx_role_affiliation">
    </span>
   </span>
  </span>
 </div>
 <div class="ltx_abstract">
  <h6 class="ltx_title ltx_title_abstract">
   Abstract
  </h6>
  <p class="ltx_p" id="id12.id1">
   Modern LLMs have become increasingly powerful, but they are still facing challenges in specialized tasks such as Text-to-SQL. We propose
   <span class="ltx_text ltx_font_bold" id="id12.id1.1">
    SQL-CRAFT
   </span>
   , a framework to enhance LLMs‚Äô
   <span class="ltx_text ltx_font_bold" id="id12.id1.2">
    SQL
   </span>
   generation
   <span class="ltx_text ltx_font_bold" id="id12.id1.3">
    C
   </span>
   apabilities through inte
   <span class="ltx_text ltx_font_bold" id="id12.id1.4">
    RA
   </span>
   ctive re
   <span class="ltx_text ltx_font_bold" id="id12.id1.5">
    F
   </span>
   inemen
   <span class="ltx_text ltx_font_bold" id="id12.id1.6">
    T
   </span>
   and enhanced reasoning.
We leverage an Interactive Correction Loop (IC-Loop) for LLMs to interact with databases automatically, as well as Python-enhanced reasoning. We conduct experiments on two Text-to-SQL datasets, Spider and Bird, with performance improvements of up to 5.7% compared to the naive prompting method. Moreover, our method surpasses the current state-of-the-art on the Spider Leaderboard, demonstrating the effectiveness of our framework.
  </p>
 </div>
 <div class="ltx_para ltx_noindent" id="p1">
  <div class="ltx_block ltx_align_bottom" id="p1.1">
   <p class="ltx_p" id="p1.1.1">
    <span class="ltx_text ltx_font_bold" id="p1.1.1.1">
     SQL-CRAFT: Text-to-SQL through Interactive Refinement and Enhanced Reasoning
    </span>
   </p>
   <br class="ltx_break ltx_centering"/>
   <p class="ltx_p ltx_align_center" id="p1.1.2" style="width:433.6pt;">
    <span class="ltx_text ltx_inline-block" id="p1.1.2.1" style="width:0.0pt;">
    </span>
   </p>
   <br class="ltx_break ltx_centering"/>
  </div>
 </div>
 <span class="ltx_note ltx_role_footnotetext" id="footnotex1">
  <sup class="ltx_note_mark">
   *
  </sup>
  <span class="ltx_note_outer">
   <span class="ltx_note_content">
    <sup class="ltx_note_mark">
     *
    </sup>
    <span class="ltx_note_type">
     footnotetext:
    </span>
    Equally contributed to this work.
   </span>
  </span>
 </span>
 <section class="ltx_section" id="S1">
  <h2 class="ltx_title ltx_title_section">
   <span class="ltx_tag ltx_tag_section">
    1
   </span>
   Introduction
  </h2>
  <div class="ltx_para" id="S1.p1">
   <p class="ltx_p" id="S1.p1.1">
    Text-to-SQL ‚Äì the task of converting natural language to SQL queries ‚Äì enables non-technical users to access databases in natural language.
Recently, Large Language Models (LLMs) have made significant progress on various tasks
    <cite class="ltx_cite ltx_citemacro_cite">
     Touvron et¬†al. (
     <a class="ltx_ref" href="#bib.bib23" title="">
      2023
     </a>
     ); OpenAI (
     <a class="ltx_ref" href="#bib.bib17" title="">
      2023
     </a>
     )
    </cite>
    , but little work explores the task of using LLMs on Text-to-SQL
    <cite class="ltx_cite ltx_citemacro_cite">
     Chen et¬†al. (
     <a class="ltx_ref" href="#bib.bib6" title="">
      2023b
     </a>
     )
    </cite>
    .
   </p>
  </div>
  <figure class="ltx_figure" id="S1.F1">
   <img alt="Refer to caption" class="ltx_graphics ltx_img_portrait" height="1196" id="S1.F1.g1" src="/html/2402.14851/assets/prompt.png" width="598"/>
   <br class="ltx_break"/>
   <figcaption class="ltx_caption">
    <span class="ltx_tag ltx_tag_figure">
     Figure 1:
    </span>
    Database Feedback Based Correction. LLMs may identify errors in the SQL when the database feedback conflicts with common sense.
   </figcaption>
  </figure>
  <div class="ltx_para" id="S1.p2">
   <p class="ltx_p" id="S1.p2.1">
    Most LLMs are pre-trained on publically available corpora
    <cite class="ltx_cite ltx_citemacro_cite">
     OpenAI (
     <a class="ltx_ref" href="#bib.bib17" title="">
      2023
     </a>
     ); Anil et¬†al. (
     <a class="ltx_ref" href="#bib.bib1" title="">
      2023
     </a>
     ); Touvron et¬†al. (
     <a class="ltx_ref" href="#bib.bib23" title="">
      2023
     </a>
     )
    </cite>
    but there is a scarcity of SQL queries in the pre-training corpora of LLMs.
For instance, in the public report from Github
    <span class="ltx_note ltx_role_footnote" id="footnote1">
     <sup class="ltx_note_mark">
      1
     </sup>
     <span class="ltx_note_outer">
      <span class="ltx_note_content">
       <sup class="ltx_note_mark">
        1
       </sup>
       <span class="ltx_tag ltx_tag_note">
        1
       </span>
       madnight.github.io/githut/#/
      </span>
     </span>
    </span>
    , the proportion of SQL languages is close to zero, while Python is at the top with a 17.7% share.
On the Stack Overflow website, there are 2.2 million questions tagged with ‚ÄòPython‚Äô,
    <span class="ltx_note ltx_role_footnote" id="footnote2">
     <sup class="ltx_note_mark">
      2
     </sup>
     <span class="ltx_note_outer">
      <span class="ltx_note_content">
       <sup class="ltx_note_mark">
        2
       </sup>
       <span class="ltx_tag ltx_tag_note">
        2
       </span>
       stackoverflow.com/questions/tagged/python
      </span>
     </span>
    </span>
    compared to 0.67 million tagged with ‚ÄòSQL‚Äô,
    <span class="ltx_note ltx_role_footnote" id="footnote3">
     <sup class="ltx_note_mark">
      3
     </sup>
     <span class="ltx_note_outer">
      <span class="ltx_note_content">
       <sup class="ltx_note_mark">
        3
       </sup>
       <span class="ltx_tag ltx_tag_note">
        3
       </span>
       stackoverflow.com/questions/tagged/sql
      </span>
     </span>
    </span>
    , fewer than one-third of the ‚ÄòPython‚Äô questions. Such disproportional distribution of coding languages may grant LLMs a stronger reasoning ability in Python than SQL.
   </p>
  </div>
  <div class="ltx_para" id="S1.p3">
   <p class="ltx_p" id="S1.p3.1">
    In this work, we aim to enhance LLMs‚Äô SQL generation ability.
First, we propose Interactive Corrections (IC) to correct LLMs‚Äô responses based on the database feedback iteratively (
    <a class="ltx_ref" href="#S1.F1" title="In 1 Introduction ‚Ä£ SQL-CRAFT: Text-to-SQL through Interactive Refinement and Enhanced Reasoning">
     <span class="ltx_text ltx_ref_tag">
      Figure
     </span>
     <span class="ltx_text ltx_ref_tag">
      1
     </span>
    </a>
    ). This strategy is inspired by the tricks used by human experts in writing SQL, which involve using database feedback to correct potential mistakes.
Second, we explore two ways to incorporate Python in LLMs‚Äô reasoning process for SQL generation, including generating Python code first and then translating it to SQL, as well as generating Python code together with the corresponding SQL query simultaneously
    <cite class="ltx_cite ltx_citemacro_cite">
     Chen et¬†al. (
     <a class="ltx_ref" href="#bib.bib5" title="">
      2023a
     </a>
     )
    </cite>
    .
   </p>
  </div>
  <div class="ltx_para" id="S1.p4">
   <p class="ltx_p" id="S1.p4.1">
    Finally, we conduct experiments on two recognized text-to-SQL benchmarks, Spider
    <cite class="ltx_cite ltx_citemacro_cite">
     Yu et¬†al. (
     <a class="ltx_ref" href="#bib.bib28" title="">
      2018
     </a>
     )
    </cite>
    and Bird
    <cite class="ltx_cite ltx_citemacro_cite">
     Li et¬†al. (
     <a class="ltx_ref" href="#bib.bib14" title="">
      2023b
     </a>
     )
    </cite>
    .
Our strategies enhance the ability of LLMs to generate SQL, surpassing the state-of-the-art methods on the Spider dataset.
   </p>
  </div>
 </section>
 <section class="ltx_section" id="S2">
  <h2 class="ltx_title ltx_title_section">
   <span class="ltx_tag ltx_tag_section">
    2
   </span>
   SQL-CRAFT Framework
  </h2>
  <div class="ltx_para" id="S2.p1">
   <p class="ltx_p" id="S2.p1.1">
    Our proposed SQL-CRAFT framework comprises two strategies, Python Enhanced Reasoning, and Interactive Correction.
   </p>
  </div>
  <section class="ltx_paragraph" id="S2.SS0.SSS0.Px1">
   <h5 class="ltx_title ltx_title_paragraph">
    Python Enhanced Reasoning.
   </h5>
   <div class="ltx_para" id="S2.SS0.SSS0.Px1.p1">
    <p class="ltx_p" id="S2.SS0.SSS0.Px1.p1.1">
     We try two methods to integrate Python during the reasoning process, PoT
     <cite class="ltx_cite ltx_citemacro_cite">
      Chen et¬†al. (
      <a class="ltx_ref" href="#bib.bib5" title="">
       2023a
      </a>
      )
     </cite>
     and Code Blocks (CBs).
    </p>
   </div>
   <div class="ltx_para" id="S2.SS0.SSS0.Px1.p2">
    <ul class="ltx_itemize" id="S2.I1">
     <li class="ltx_item" id="S2.I1.i1" style="list-style-type:none;">
      <span class="ltx_tag ltx_tag_item">
       ‚Ä¢
      </span>
      <div class="ltx_para" id="S2.I1.i1.p1">
       <p class="ltx_p" id="S2.I1.i1.p1.8">
        Program of Thoughts (PoT).
We ask the model to generate both Python Code Block and the SQL queries simultaneously, therefore enforcing the model to incorporate Python code blocks in its ‚Äúthought process‚Äù.
Formally,
       </p>
       <table class="ltx_equation ltx_eqn_table" id="S2.Ex1">
        <tbody>
         <tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
          <td class="ltx_eqn_cell ltx_eqn_center_padleft">
          </td>
          <td class="ltx_eqn_cell ltx_align_center">
           <math alttext="{\rm\texttt{LM}}(Q,D,P)=(C,S)," class="ltx_Math" display="block" id="S2.Ex1.m1.6">
            <semantics id="S2.Ex1.m1.6a">
             <mrow id="S2.Ex1.m1.6.6.1" xref="S2.Ex1.m1.6.6.1.1.cmml">
              <mrow id="S2.Ex1.m1.6.6.1.1" xref="S2.Ex1.m1.6.6.1.1.cmml">
               <mrow id="S2.Ex1.m1.6.6.1.1.2" xref="S2.Ex1.m1.6.6.1.1.2.cmml">
                <mtext class="ltx_mathvariant_monospace" id="S2.Ex1.m1.6.6.1.1.2.2" xref="S2.Ex1.m1.6.6.1.1.2.2a.cmml">
                 LM
                </mtext>
                <mo id="S2.Ex1.m1.6.6.1.1.2.1" lspace="0em" rspace="0em" xref="S2.Ex1.m1.6.6.1.1.2.1.cmml">
                 ‚Äã
                </mo>
                <mrow id="S2.Ex1.m1.6.6.1.1.2.3.2" xref="S2.Ex1.m1.6.6.1.1.2.3.1.cmml">
                 <mo id="S2.Ex1.m1.6.6.1.1.2.3.2.1" stretchy="false" xref="S2.Ex1.m1.6.6.1.1.2.3.1.cmml">
                  (
                 </mo>
                 <mi id="S2.Ex1.m1.1.1" xref="S2.Ex1.m1.1.1.cmml">
                  Q
                 </mi>
                 <mo id="S2.Ex1.m1.6.6.1.1.2.3.2.2" xref="S2.Ex1.m1.6.6.1.1.2.3.1.cmml">
                  ,
                 </mo>
                 <mi id="S2.Ex1.m1.2.2" xref="S2.Ex1.m1.2.2.cmml">
                  D
                 </mi>
                 <mo id="S2.Ex1.m1.6.6.1.1.2.3.2.3" xref="S2.Ex1.m1.6.6.1.1.2.3.1.cmml">
                  ,
                 </mo>
                 <mi id="S2.Ex1.m1.3.3" xref="S2.Ex1.m1.3.3.cmml">
                  P
                 </mi>
                 <mo id="S2.Ex1.m1.6.6.1.1.2.3.2.4" stretchy="false" xref="S2.Ex1.m1.6.6.1.1.2.3.1.cmml">
                  )
                 </mo>
                </mrow>
               </mrow>
               <mo id="S2.Ex1.m1.6.6.1.1.1" xref="S2.Ex1.m1.6.6.1.1.1.cmml">
                =
               </mo>
               <mrow id="S2.Ex1.m1.6.6.1.1.3.2" xref="S2.Ex1.m1.6.6.1.1.3.1.cmml">
                <mo id="S2.Ex1.m1.6.6.1.1.3.2.1" stretchy="false" xref="S2.Ex1.m1.6.6.1.1.3.1.cmml">
                 (
                </mo>
                <mi id="S2.Ex1.m1.4.4" xref="S2.Ex1.m1.4.4.cmml">
                 C
                </mi>
                <mo id="S2.Ex1.m1.6.6.1.1.3.2.2" xref="S2.Ex1.m1.6.6.1.1.3.1.cmml">
                 ,
                </mo>
                <mi id="S2.Ex1.m1.5.5" xref="S2.Ex1.m1.5.5.cmml">
                 S
                </mi>
                <mo id="S2.Ex1.m1.6.6.1.1.3.2.3" stretchy="false" xref="S2.Ex1.m1.6.6.1.1.3.1.cmml">
                 )
                </mo>
               </mrow>
              </mrow>
              <mo id="S2.Ex1.m1.6.6.1.2" xref="S2.Ex1.m1.6.6.1.1.cmml">
               ,
              </mo>
             </mrow>
             <annotation-xml encoding="MathML-Content" id="S2.Ex1.m1.6b">
              <apply id="S2.Ex1.m1.6.6.1.1.cmml" xref="S2.Ex1.m1.6.6.1">
               <eq id="S2.Ex1.m1.6.6.1.1.1.cmml" xref="S2.Ex1.m1.6.6.1.1.1">
               </eq>
               <apply id="S2.Ex1.m1.6.6.1.1.2.cmml" xref="S2.Ex1.m1.6.6.1.1.2">
                <times id="S2.Ex1.m1.6.6.1.1.2.1.cmml" xref="S2.Ex1.m1.6.6.1.1.2.1">
                </times>
                <ci id="S2.Ex1.m1.6.6.1.1.2.2a.cmml" xref="S2.Ex1.m1.6.6.1.1.2.2">
                 <mtext class="ltx_mathvariant_monospace" id="S2.Ex1.m1.6.6.1.1.2.2.cmml" xref="S2.Ex1.m1.6.6.1.1.2.2">
                  LM
                 </mtext>
                </ci>
                <vector id="S2.Ex1.m1.6.6.1.1.2.3.1.cmml" xref="S2.Ex1.m1.6.6.1.1.2.3.2">
                 <ci id="S2.Ex1.m1.1.1.cmml" xref="S2.Ex1.m1.1.1">
                  ùëÑ
                 </ci>
                 <ci id="S2.Ex1.m1.2.2.cmml" xref="S2.Ex1.m1.2.2">
                  ùê∑
                 </ci>
                 <ci id="S2.Ex1.m1.3.3.cmml" xref="S2.Ex1.m1.3.3">
                  ùëÉ
                 </ci>
                </vector>
               </apply>
               <interval closure="open" id="S2.Ex1.m1.6.6.1.1.3.1.cmml" xref="S2.Ex1.m1.6.6.1.1.3.2">
                <ci id="S2.Ex1.m1.4.4.cmml" xref="S2.Ex1.m1.4.4">
                 ùê∂
                </ci>
                <ci id="S2.Ex1.m1.5.5.cmml" xref="S2.Ex1.m1.5.5">
                 ùëÜ
                </ci>
               </interval>
              </apply>
             </annotation-xml>
             <annotation encoding="application/x-tex" id="S2.Ex1.m1.6c">
              {\rm\texttt{LM}}(Q,D,P)=(C,S),
             </annotation>
            </semantics>
           </math>
          </td>
          <td class="ltx_eqn_cell ltx_eqn_center_padright">
          </td>
         </tr>
        </tbody>
       </table>
       <p class="ltx_p" id="S2.I1.i1.p1.7">
        where we prompt the
        <span class="ltx_text ltx_markedasmath ltx_font_typewriter" id="S2.I1.i1.p1.7.1">
         LM
        </span>
        with the user question
        <math alttext="Q" class="ltx_Math" display="inline" id="S2.I1.i1.p1.2.m2.1">
         <semantics id="S2.I1.i1.p1.2.m2.1a">
          <mi id="S2.I1.i1.p1.2.m2.1.1" xref="S2.I1.i1.p1.2.m2.1.1.cmml">
           Q
          </mi>
          <annotation-xml encoding="MathML-Content" id="S2.I1.i1.p1.2.m2.1b">
           <ci id="S2.I1.i1.p1.2.m2.1.1.cmml" xref="S2.I1.i1.p1.2.m2.1.1">
            ùëÑ
           </ci>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S2.I1.i1.p1.2.m2.1c">
           Q
          </annotation>
         </semantics>
        </math>
        , database description
        <math alttext="D" class="ltx_Math" display="inline" id="S2.I1.i1.p1.3.m3.1">
         <semantics id="S2.I1.i1.p1.3.m3.1a">
          <mi id="S2.I1.i1.p1.3.m3.1.1" xref="S2.I1.i1.p1.3.m3.1.1.cmml">
           D
          </mi>
          <annotation-xml encoding="MathML-Content" id="S2.I1.i1.p1.3.m3.1b">
           <ci id="S2.I1.i1.p1.3.m3.1.1.cmml" xref="S2.I1.i1.p1.3.m3.1.1">
            ùê∑
           </ci>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S2.I1.i1.p1.3.m3.1c">
           D
          </annotation>
         </semantics>
        </math>
        and prompt
        <math alttext="P" class="ltx_Math" display="inline" id="S2.I1.i1.p1.4.m4.1">
         <semantics id="S2.I1.i1.p1.4.m4.1a">
          <mi id="S2.I1.i1.p1.4.m4.1.1" xref="S2.I1.i1.p1.4.m4.1.1.cmml">
           P
          </mi>
          <annotation-xml encoding="MathML-Content" id="S2.I1.i1.p1.4.m4.1b">
           <ci id="S2.I1.i1.p1.4.m4.1.1.cmml" xref="S2.I1.i1.p1.4.m4.1.1">
            ùëÉ
           </ci>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S2.I1.i1.p1.4.m4.1c">
           P
          </annotation>
         </semantics>
        </math>
        .
The
        <span class="ltx_text ltx_markedasmath ltx_font_typewriter" id="S2.I1.i1.p1.7.2">
         LM
        </span>
        then sequentially generates Python Code Blocks
        <math alttext="C" class="ltx_Math" display="inline" id="S2.I1.i1.p1.6.m6.1">
         <semantics id="S2.I1.i1.p1.6.m6.1a">
          <mi id="S2.I1.i1.p1.6.m6.1.1" xref="S2.I1.i1.p1.6.m6.1.1.cmml">
           C
          </mi>
          <annotation-xml encoding="MathML-Content" id="S2.I1.i1.p1.6.m6.1b">
           <ci id="S2.I1.i1.p1.6.m6.1.1.cmml" xref="S2.I1.i1.p1.6.m6.1.1">
            ùê∂
           </ci>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S2.I1.i1.p1.6.m6.1c">
           C
          </annotation>
         </semantics>
        </math>
        followed by SQL
        <math alttext="S" class="ltx_Math" display="inline" id="S2.I1.i1.p1.7.m7.1">
         <semantics id="S2.I1.i1.p1.7.m7.1a">
          <mi id="S2.I1.i1.p1.7.m7.1.1" xref="S2.I1.i1.p1.7.m7.1.1.cmml">
           S
          </mi>
          <annotation-xml encoding="MathML-Content" id="S2.I1.i1.p1.7.m7.1b">
           <ci id="S2.I1.i1.p1.7.m7.1.1.cmml" xref="S2.I1.i1.p1.7.m7.1.1">
            ùëÜ
           </ci>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S2.I1.i1.p1.7.m7.1c">
           S
          </annotation>
         </semantics>
        </math>
        .
       </p>
      </div>
     </li>
     <li class="ltx_item" id="S2.I1.i2" style="list-style-type:none;">
      <span class="ltx_tag ltx_tag_item">
       ‚Ä¢
      </span>
      <div class="ltx_para" id="S2.I1.i2.p1">
       <p class="ltx_p" id="S2.I1.i2.p1.12">
        Executable Code Blocks (CBs).
We divide the SQL generation process into two steps: first,
       </p>
       <table class="ltx_equation ltx_eqn_table" id="S2.Ex2">
        <tbody>
         <tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
          <td class="ltx_eqn_cell ltx_eqn_center_padleft">
          </td>
          <td class="ltx_eqn_cell ltx_align_center">
           <math alttext="{\rm\texttt{LM}}(Q,D,P_{1})=C," class="ltx_Math" display="block" id="S2.Ex2.m1.3">
            <semantics id="S2.Ex2.m1.3a">
             <mrow id="S2.Ex2.m1.3.3.1" xref="S2.Ex2.m1.3.3.1.1.cmml">
              <mrow id="S2.Ex2.m1.3.3.1.1" xref="S2.Ex2.m1.3.3.1.1.cmml">
               <mrow id="S2.Ex2.m1.3.3.1.1.1" xref="S2.Ex2.m1.3.3.1.1.1.cmml">
                <mtext class="ltx_mathvariant_monospace" id="S2.Ex2.m1.3.3.1.1.1.3" xref="S2.Ex2.m1.3.3.1.1.1.3a.cmml">
                 LM
                </mtext>
                <mo id="S2.Ex2.m1.3.3.1.1.1.2" lspace="0em" rspace="0em" xref="S2.Ex2.m1.3.3.1.1.1.2.cmml">
                 ‚Äã
                </mo>
                <mrow id="S2.Ex2.m1.3.3.1.1.1.1.1" xref="S2.Ex2.m1.3.3.1.1.1.1.2.cmml">
                 <mo id="S2.Ex2.m1.3.3.1.1.1.1.1.2" stretchy="false" xref="S2.Ex2.m1.3.3.1.1.1.1.2.cmml">
                  (
                 </mo>
                 <mi id="S2.Ex2.m1.1.1" xref="S2.Ex2.m1.1.1.cmml">
                  Q
                 </mi>
                 <mo id="S2.Ex2.m1.3.3.1.1.1.1.1.3" xref="S2.Ex2.m1.3.3.1.1.1.1.2.cmml">
                  ,
                 </mo>
                 <mi id="S2.Ex2.m1.2.2" xref="S2.Ex2.m1.2.2.cmml">
                  D
                 </mi>
                 <mo id="S2.Ex2.m1.3.3.1.1.1.1.1.4" xref="S2.Ex2.m1.3.3.1.1.1.1.2.cmml">
                  ,
                 </mo>
                 <msub id="S2.Ex2.m1.3.3.1.1.1.1.1.1" xref="S2.Ex2.m1.3.3.1.1.1.1.1.1.cmml">
                  <mi id="S2.Ex2.m1.3.3.1.1.1.1.1.1.2" xref="S2.Ex2.m1.3.3.1.1.1.1.1.1.2.cmml">
                   P
                  </mi>
                  <mn id="S2.Ex2.m1.3.3.1.1.1.1.1.1.3" xref="S2.Ex2.m1.3.3.1.1.1.1.1.1.3.cmml">
                   1
                  </mn>
                 </msub>
                 <mo id="S2.Ex2.m1.3.3.1.1.1.1.1.5" stretchy="false" xref="S2.Ex2.m1.3.3.1.1.1.1.2.cmml">
                  )
                 </mo>
                </mrow>
               </mrow>
               <mo id="S2.Ex2.m1.3.3.1.1.2" xref="S2.Ex2.m1.3.3.1.1.2.cmml">
                =
               </mo>
               <mi id="S2.Ex2.m1.3.3.1.1.3" xref="S2.Ex2.m1.3.3.1.1.3.cmml">
                C
               </mi>
              </mrow>
              <mo id="S2.Ex2.m1.3.3.1.2" xref="S2.Ex2.m1.3.3.1.1.cmml">
               ,
              </mo>
             </mrow>
             <annotation-xml encoding="MathML-Content" id="S2.Ex2.m1.3b">
              <apply id="S2.Ex2.m1.3.3.1.1.cmml" xref="S2.Ex2.m1.3.3.1">
               <eq id="S2.Ex2.m1.3.3.1.1.2.cmml" xref="S2.Ex2.m1.3.3.1.1.2">
               </eq>
               <apply id="S2.Ex2.m1.3.3.1.1.1.cmml" xref="S2.Ex2.m1.3.3.1.1.1">
                <times id="S2.Ex2.m1.3.3.1.1.1.2.cmml" xref="S2.Ex2.m1.3.3.1.1.1.2">
                </times>
                <ci id="S2.Ex2.m1.3.3.1.1.1.3a.cmml" xref="S2.Ex2.m1.3.3.1.1.1.3">
                 <mtext class="ltx_mathvariant_monospace" id="S2.Ex2.m1.3.3.1.1.1.3.cmml" xref="S2.Ex2.m1.3.3.1.1.1.3">
                  LM
                 </mtext>
                </ci>
                <vector id="S2.Ex2.m1.3.3.1.1.1.1.2.cmml" xref="S2.Ex2.m1.3.3.1.1.1.1.1">
                 <ci id="S2.Ex2.m1.1.1.cmml" xref="S2.Ex2.m1.1.1">
                  ùëÑ
                 </ci>
                 <ci id="S2.Ex2.m1.2.2.cmml" xref="S2.Ex2.m1.2.2">
                  ùê∑
                 </ci>
                 <apply id="S2.Ex2.m1.3.3.1.1.1.1.1.1.cmml" xref="S2.Ex2.m1.3.3.1.1.1.1.1.1">
                  <csymbol cd="ambiguous" id="S2.Ex2.m1.3.3.1.1.1.1.1.1.1.cmml" xref="S2.Ex2.m1.3.3.1.1.1.1.1.1">
                   subscript
                  </csymbol>
                  <ci id="S2.Ex2.m1.3.3.1.1.1.1.1.1.2.cmml" xref="S2.Ex2.m1.3.3.1.1.1.1.1.1.2">
                   ùëÉ
                  </ci>
                  <cn id="S2.Ex2.m1.3.3.1.1.1.1.1.1.3.cmml" type="integer" xref="S2.Ex2.m1.3.3.1.1.1.1.1.1.3">
                   1
                  </cn>
                 </apply>
                </vector>
               </apply>
               <ci id="S2.Ex2.m1.3.3.1.1.3.cmml" xref="S2.Ex2.m1.3.3.1.1.3">
                ùê∂
               </ci>
              </apply>
             </annotation-xml>
             <annotation encoding="application/x-tex" id="S2.Ex2.m1.3c">
              {\rm\texttt{LM}}(Q,D,P_{1})=C,
             </annotation>
            </semantics>
           </math>
          </td>
          <td class="ltx_eqn_cell ltx_eqn_center_padright">
          </td>
         </tr>
        </tbody>
       </table>
       <p class="ltx_p" id="S2.I1.i2.p1.5">
        where given the user question
        <math alttext="Q" class="ltx_Math" display="inline" id="S2.I1.i2.p1.1.m1.1">
         <semantics id="S2.I1.i2.p1.1.m1.1a">
          <mi id="S2.I1.i2.p1.1.m1.1.1" xref="S2.I1.i2.p1.1.m1.1.1.cmml">
           Q
          </mi>
          <annotation-xml encoding="MathML-Content" id="S2.I1.i2.p1.1.m1.1b">
           <ci id="S2.I1.i2.p1.1.m1.1.1.cmml" xref="S2.I1.i2.p1.1.m1.1.1">
            ùëÑ
           </ci>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S2.I1.i2.p1.1.m1.1c">
           Q
          </annotation>
         </semantics>
        </math>
        , database description
        <math alttext="D" class="ltx_Math" display="inline" id="S2.I1.i2.p1.2.m2.1">
         <semantics id="S2.I1.i2.p1.2.m2.1a">
          <mi id="S2.I1.i2.p1.2.m2.1.1" xref="S2.I1.i2.p1.2.m2.1.1.cmml">
           D
          </mi>
          <annotation-xml encoding="MathML-Content" id="S2.I1.i2.p1.2.m2.1b">
           <ci id="S2.I1.i2.p1.2.m2.1.1.cmml" xref="S2.I1.i2.p1.2.m2.1.1">
            ùê∑
           </ci>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S2.I1.i2.p1.2.m2.1c">
           D
          </annotation>
         </semantics>
        </math>
        and prompt
        <math alttext="P_{1}" class="ltx_Math" display="inline" id="S2.I1.i2.p1.3.m3.1">
         <semantics id="S2.I1.i2.p1.3.m3.1a">
          <msub id="S2.I1.i2.p1.3.m3.1.1" xref="S2.I1.i2.p1.3.m3.1.1.cmml">
           <mi id="S2.I1.i2.p1.3.m3.1.1.2" xref="S2.I1.i2.p1.3.m3.1.1.2.cmml">
            P
           </mi>
           <mn id="S2.I1.i2.p1.3.m3.1.1.3" xref="S2.I1.i2.p1.3.m3.1.1.3.cmml">
            1
           </mn>
          </msub>
          <annotation-xml encoding="MathML-Content" id="S2.I1.i2.p1.3.m3.1b">
           <apply id="S2.I1.i2.p1.3.m3.1.1.cmml" xref="S2.I1.i2.p1.3.m3.1.1">
            <csymbol cd="ambiguous" id="S2.I1.i2.p1.3.m3.1.1.1.cmml" xref="S2.I1.i2.p1.3.m3.1.1">
             subscript
            </csymbol>
            <ci id="S2.I1.i2.p1.3.m3.1.1.2.cmml" xref="S2.I1.i2.p1.3.m3.1.1.2">
             ùëÉ
            </ci>
            <cn id="S2.I1.i2.p1.3.m3.1.1.3.cmml" type="integer" xref="S2.I1.i2.p1.3.m3.1.1.3">
             1
            </cn>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S2.I1.i2.p1.3.m3.1c">
           P_{1}
          </annotation>
         </semantics>
        </math>
        ,
        <span class="ltx_text ltx_markedasmath ltx_font_typewriter" id="S2.I1.i2.p1.5.1">
         LM
        </span>
        generates a series of Python Code Blocks
        <math alttext="C" class="ltx_Math" display="inline" id="S2.I1.i2.p1.5.m5.1">
         <semantics id="S2.I1.i2.p1.5.m5.1a">
          <mi id="S2.I1.i2.p1.5.m5.1.1" xref="S2.I1.i2.p1.5.m5.1.1.cmml">
           C
          </mi>
          <annotation-xml encoding="MathML-Content" id="S2.I1.i2.p1.5.m5.1b">
           <ci id="S2.I1.i2.p1.5.m5.1.1.cmml" xref="S2.I1.i2.p1.5.m5.1.1">
            ùê∂
           </ci>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S2.I1.i2.p1.5.m5.1c">
           C
          </annotation>
         </semantics>
        </math>
        aligned with its chain-of-thought reasoning process, see
        <a class="ltx_ref" href="#A1.SS4" title="A.4 Prompt Examples ‚Ä£ Appendix A Appendix ‚Ä£ SQL-CRAFT: Text-to-SQL through Interactive Refinement and Enhanced Reasoning">
         <span class="ltx_text ltx_ref_tag">
          Section
         </span>
         <span class="ltx_text ltx_ref_tag">
          A.4
         </span>
        </a>
        .
Then,
       </p>
       <table class="ltx_equation ltx_eqn_table" id="S2.Ex3">
        <tbody>
         <tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
          <td class="ltx_eqn_cell ltx_eqn_center_padleft">
          </td>
          <td class="ltx_eqn_cell ltx_align_center">
           <math alttext="{\rm\texttt{LM}}(Q,D,P_{2},C)=S," class="ltx_Math" display="block" id="S2.Ex3.m1.4">
            <semantics id="S2.Ex3.m1.4a">
             <mrow id="S2.Ex3.m1.4.4.1" xref="S2.Ex3.m1.4.4.1.1.cmml">
              <mrow id="S2.Ex3.m1.4.4.1.1" xref="S2.Ex3.m1.4.4.1.1.cmml">
               <mrow id="S2.Ex3.m1.4.4.1.1.1" xref="S2.Ex3.m1.4.4.1.1.1.cmml">
                <mtext class="ltx_mathvariant_monospace" id="S2.Ex3.m1.4.4.1.1.1.3" xref="S2.Ex3.m1.4.4.1.1.1.3a.cmml">
                 LM
                </mtext>
                <mo id="S2.Ex3.m1.4.4.1.1.1.2" lspace="0em" rspace="0em" xref="S2.Ex3.m1.4.4.1.1.1.2.cmml">
                 ‚Äã
                </mo>
                <mrow id="S2.Ex3.m1.4.4.1.1.1.1.1" xref="S2.Ex3.m1.4.4.1.1.1.1.2.cmml">
                 <mo id="S2.Ex3.m1.4.4.1.1.1.1.1.2" stretchy="false" xref="S2.Ex3.m1.4.4.1.1.1.1.2.cmml">
                  (
                 </mo>
                 <mi id="S2.Ex3.m1.1.1" xref="S2.Ex3.m1.1.1.cmml">
                  Q
                 </mi>
                 <mo id="S2.Ex3.m1.4.4.1.1.1.1.1.3" xref="S2.Ex3.m1.4.4.1.1.1.1.2.cmml">
                  ,
                 </mo>
                 <mi id="S2.Ex3.m1.2.2" xref="S2.Ex3.m1.2.2.cmml">
                  D
                 </mi>
                 <mo id="S2.Ex3.m1.4.4.1.1.1.1.1.4" xref="S2.Ex3.m1.4.4.1.1.1.1.2.cmml">
                  ,
                 </mo>
                 <msub id="S2.Ex3.m1.4.4.1.1.1.1.1.1" xref="S2.Ex3.m1.4.4.1.1.1.1.1.1.cmml">
                  <mi id="S2.Ex3.m1.4.4.1.1.1.1.1.1.2" xref="S2.Ex3.m1.4.4.1.1.1.1.1.1.2.cmml">
                   P
                  </mi>
                  <mn id="S2.Ex3.m1.4.4.1.1.1.1.1.1.3" xref="S2.Ex3.m1.4.4.1.1.1.1.1.1.3.cmml">
                   2
                  </mn>
                 </msub>
                 <mo id="S2.Ex3.m1.4.4.1.1.1.1.1.5" xref="S2.Ex3.m1.4.4.1.1.1.1.2.cmml">
                  ,
                 </mo>
                 <mi id="S2.Ex3.m1.3.3" xref="S2.Ex3.m1.3.3.cmml">
                  C
                 </mi>
                 <mo id="S2.Ex3.m1.4.4.1.1.1.1.1.6" stretchy="false" xref="S2.Ex3.m1.4.4.1.1.1.1.2.cmml">
                  )
                 </mo>
                </mrow>
               </mrow>
               <mo id="S2.Ex3.m1.4.4.1.1.2" xref="S2.Ex3.m1.4.4.1.1.2.cmml">
                =
               </mo>
               <mi id="S2.Ex3.m1.4.4.1.1.3" xref="S2.Ex3.m1.4.4.1.1.3.cmml">
                S
               </mi>
              </mrow>
              <mo id="S2.Ex3.m1.4.4.1.2" xref="S2.Ex3.m1.4.4.1.1.cmml">
               ,
              </mo>
             </mrow>
             <annotation-xml encoding="MathML-Content" id="S2.Ex3.m1.4b">
              <apply id="S2.Ex3.m1.4.4.1.1.cmml" xref="S2.Ex3.m1.4.4.1">
               <eq id="S2.Ex3.m1.4.4.1.1.2.cmml" xref="S2.Ex3.m1.4.4.1.1.2">
               </eq>
               <apply id="S2.Ex3.m1.4.4.1.1.1.cmml" xref="S2.Ex3.m1.4.4.1.1.1">
                <times id="S2.Ex3.m1.4.4.1.1.1.2.cmml" xref="S2.Ex3.m1.4.4.1.1.1.2">
                </times>
                <ci id="S2.Ex3.m1.4.4.1.1.1.3a.cmml" xref="S2.Ex3.m1.4.4.1.1.1.3">
                 <mtext class="ltx_mathvariant_monospace" id="S2.Ex3.m1.4.4.1.1.1.3.cmml" xref="S2.Ex3.m1.4.4.1.1.1.3">
                  LM
                 </mtext>
                </ci>
                <vector id="S2.Ex3.m1.4.4.1.1.1.1.2.cmml" xref="S2.Ex3.m1.4.4.1.1.1.1.1">
                 <ci id="S2.Ex3.m1.1.1.cmml" xref="S2.Ex3.m1.1.1">
                  ùëÑ
                 </ci>
                 <ci id="S2.Ex3.m1.2.2.cmml" xref="S2.Ex3.m1.2.2">
                  ùê∑
                 </ci>
                 <apply id="S2.Ex3.m1.4.4.1.1.1.1.1.1.cmml" xref="S2.Ex3.m1.4.4.1.1.1.1.1.1">
                  <csymbol cd="ambiguous" id="S2.Ex3.m1.4.4.1.1.1.1.1.1.1.cmml" xref="S2.Ex3.m1.4.4.1.1.1.1.1.1">
                   subscript
                  </csymbol>
                  <ci id="S2.Ex3.m1.4.4.1.1.1.1.1.1.2.cmml" xref="S2.Ex3.m1.4.4.1.1.1.1.1.1.2">
                   ùëÉ
                  </ci>
                  <cn id="S2.Ex3.m1.4.4.1.1.1.1.1.1.3.cmml" type="integer" xref="S2.Ex3.m1.4.4.1.1.1.1.1.1.3">
                   2
                  </cn>
                 </apply>
                 <ci id="S2.Ex3.m1.3.3.cmml" xref="S2.Ex3.m1.3.3">
                  ùê∂
                 </ci>
                </vector>
               </apply>
               <ci id="S2.Ex3.m1.4.4.1.1.3.cmml" xref="S2.Ex3.m1.4.4.1.1.3">
                ùëÜ
               </ci>
              </apply>
             </annotation-xml>
             <annotation encoding="application/x-tex" id="S2.Ex3.m1.4c">
              {\rm\texttt{LM}}(Q,D,P_{2},C)=S,
             </annotation>
            </semantics>
           </math>
          </td>
          <td class="ltx_eqn_cell ltx_eqn_center_padright">
          </td>
         </tr>
        </tbody>
       </table>
       <p class="ltx_p" id="S2.I1.i2.p1.11">
        where the
        <span class="ltx_text ltx_markedasmath ltx_font_typewriter" id="S2.I1.i2.p1.11.1">
         LM
        </span>
        generates the target SQL query
        <math alttext="S" class="ltx_Math" display="inline" id="S2.I1.i2.p1.7.m2.1">
         <semantics id="S2.I1.i2.p1.7.m2.1a">
          <mi id="S2.I1.i2.p1.7.m2.1.1" xref="S2.I1.i2.p1.7.m2.1.1.cmml">
           S
          </mi>
          <annotation-xml encoding="MathML-Content" id="S2.I1.i2.p1.7.m2.1b">
           <ci id="S2.I1.i2.p1.7.m2.1.1.cmml" xref="S2.I1.i2.p1.7.m2.1.1">
            ùëÜ
           </ci>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S2.I1.i2.p1.7.m2.1c">
           S
          </annotation>
         </semantics>
        </math>
        given the user question
        <math alttext="Q" class="ltx_Math" display="inline" id="S2.I1.i2.p1.8.m3.1">
         <semantics id="S2.I1.i2.p1.8.m3.1a">
          <mi id="S2.I1.i2.p1.8.m3.1.1" xref="S2.I1.i2.p1.8.m3.1.1.cmml">
           Q
          </mi>
          <annotation-xml encoding="MathML-Content" id="S2.I1.i2.p1.8.m3.1b">
           <ci id="S2.I1.i2.p1.8.m3.1.1.cmml" xref="S2.I1.i2.p1.8.m3.1.1">
            ùëÑ
           </ci>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S2.I1.i2.p1.8.m3.1c">
           Q
          </annotation>
         </semantics>
        </math>
        , database description
        <math alttext="D" class="ltx_Math" display="inline" id="S2.I1.i2.p1.9.m4.1">
         <semantics id="S2.I1.i2.p1.9.m4.1a">
          <mi id="S2.I1.i2.p1.9.m4.1.1" xref="S2.I1.i2.p1.9.m4.1.1.cmml">
           D
          </mi>
          <annotation-xml encoding="MathML-Content" id="S2.I1.i2.p1.9.m4.1b">
           <ci id="S2.I1.i2.p1.9.m4.1.1.cmml" xref="S2.I1.i2.p1.9.m4.1.1">
            ùê∑
           </ci>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S2.I1.i2.p1.9.m4.1c">
           D
          </annotation>
         </semantics>
        </math>
        , a different prompt
        <math alttext="P_{2}" class="ltx_Math" display="inline" id="S2.I1.i2.p1.10.m5.1">
         <semantics id="S2.I1.i2.p1.10.m5.1a">
          <msub id="S2.I1.i2.p1.10.m5.1.1" xref="S2.I1.i2.p1.10.m5.1.1.cmml">
           <mi id="S2.I1.i2.p1.10.m5.1.1.2" xref="S2.I1.i2.p1.10.m5.1.1.2.cmml">
            P
           </mi>
           <mn id="S2.I1.i2.p1.10.m5.1.1.3" xref="S2.I1.i2.p1.10.m5.1.1.3.cmml">
            2
           </mn>
          </msub>
          <annotation-xml encoding="MathML-Content" id="S2.I1.i2.p1.10.m5.1b">
           <apply id="S2.I1.i2.p1.10.m5.1.1.cmml" xref="S2.I1.i2.p1.10.m5.1.1">
            <csymbol cd="ambiguous" id="S2.I1.i2.p1.10.m5.1.1.1.cmml" xref="S2.I1.i2.p1.10.m5.1.1">
             subscript
            </csymbol>
            <ci id="S2.I1.i2.p1.10.m5.1.1.2.cmml" xref="S2.I1.i2.p1.10.m5.1.1.2">
             ùëÉ
            </ci>
            <cn id="S2.I1.i2.p1.10.m5.1.1.3.cmml" type="integer" xref="S2.I1.i2.p1.10.m5.1.1.3">
             2
            </cn>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S2.I1.i2.p1.10.m5.1c">
           P_{2}
          </annotation>
         </semantics>
        </math>
        and the Python Code Block
        <math alttext="C" class="ltx_Math" display="inline" id="S2.I1.i2.p1.11.m6.1">
         <semantics id="S2.I1.i2.p1.11.m6.1a">
          <mi id="S2.I1.i2.p1.11.m6.1.1" xref="S2.I1.i2.p1.11.m6.1.1.cmml">
           C
          </mi>
          <annotation-xml encoding="MathML-Content" id="S2.I1.i2.p1.11.m6.1b">
           <ci id="S2.I1.i2.p1.11.m6.1.1.cmml" xref="S2.I1.i2.p1.11.m6.1.1">
            ùê∂
           </ci>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S2.I1.i2.p1.11.m6.1c">
           C
          </annotation>
         </semantics>
        </math>
        we get in the first step.
       </p>
      </div>
     </li>
    </ul>
   </div>
  </section>
  <section class="ltx_paragraph" id="S2.SS0.SSS0.Px2">
   <h5 class="ltx_title ltx_title_paragraph">
    IC-Loop.
   </h5>
   <div class="ltx_para" id="S2.SS0.SSS0.Px2.p1">
    <p class="ltx_p" id="S2.SS0.SSS0.Px2.p1.8">
     We introduce Interactive Correction (IC) shown in
     <a class="ltx_ref" href="#S1.F1" title="In 1 Introduction ‚Ä£ SQL-CRAFT: Text-to-SQL through Interactive Refinement and Enhanced Reasoning">
      <span class="ltx_text ltx_ref_tag">
       Figure
      </span>
      <span class="ltx_text ltx_ref_tag">
       1
      </span>
     </a>
     , which incorporates database feedback into the prompt to guide LLMs to refine their initial response.
As different questions may require varying numbers of corrections, we embed IC within a loop (IC-Loop). To avoid over-correction or insufficient correction, we design an automated control process to decide when to terminate the loop.
Given the prompt
     <math alttext="P" class="ltx_Math" display="inline" id="S2.SS0.SSS0.Px2.p1.1.m1.1">
      <semantics id="S2.SS0.SSS0.Px2.p1.1.m1.1a">
       <mi id="S2.SS0.SSS0.Px2.p1.1.m1.1.1" xref="S2.SS0.SSS0.Px2.p1.1.m1.1.1.cmml">
        P
       </mi>
       <annotation-xml encoding="MathML-Content" id="S2.SS0.SSS0.Px2.p1.1.m1.1b">
        <ci id="S2.SS0.SSS0.Px2.p1.1.m1.1.1.cmml" xref="S2.SS0.SSS0.Px2.p1.1.m1.1.1">
         ùëÉ
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.SS0.SSS0.Px2.p1.1.m1.1c">
        P
       </annotation>
      </semantics>
     </math>
     (including Instruction, Schema, Question) and code
     <math alttext="C_{0}" class="ltx_Math" display="inline" id="S2.SS0.SSS0.Px2.p1.2.m2.1">
      <semantics id="S2.SS0.SSS0.Px2.p1.2.m2.1a">
       <msub id="S2.SS0.SSS0.Px2.p1.2.m2.1.1" xref="S2.SS0.SSS0.Px2.p1.2.m2.1.1.cmml">
        <mi id="S2.SS0.SSS0.Px2.p1.2.m2.1.1.2" xref="S2.SS0.SSS0.Px2.p1.2.m2.1.1.2.cmml">
         C
        </mi>
        <mn id="S2.SS0.SSS0.Px2.p1.2.m2.1.1.3" xref="S2.SS0.SSS0.Px2.p1.2.m2.1.1.3.cmml">
         0
        </mn>
       </msub>
       <annotation-xml encoding="MathML-Content" id="S2.SS0.SSS0.Px2.p1.2.m2.1b">
        <apply id="S2.SS0.SSS0.Px2.p1.2.m2.1.1.cmml" xref="S2.SS0.SSS0.Px2.p1.2.m2.1.1">
         <csymbol cd="ambiguous" id="S2.SS0.SSS0.Px2.p1.2.m2.1.1.1.cmml" xref="S2.SS0.SSS0.Px2.p1.2.m2.1.1">
          subscript
         </csymbol>
         <ci id="S2.SS0.SSS0.Px2.p1.2.m2.1.1.2.cmml" xref="S2.SS0.SSS0.Px2.p1.2.m2.1.1.2">
          ùê∂
         </ci>
         <cn id="S2.SS0.SSS0.Px2.p1.2.m2.1.1.3.cmml" type="integer" xref="S2.SS0.SSS0.Px2.p1.2.m2.1.1.3">
          0
         </cn>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.SS0.SSS0.Px2.p1.2.m2.1c">
        C_{0}
       </annotation>
      </semantics>
     </math>
     , we execute it on the database
     <span class="ltx_text ltx_markedasmath ltx_font_typewriter" id="S2.SS0.SSS0.Px2.p1.8.1">
      DB
     </span>
     to get the result
     <math alttext="E" class="ltx_Math" display="inline" id="S2.SS0.SSS0.Px2.p1.4.m4.1">
      <semantics id="S2.SS0.SSS0.Px2.p1.4.m4.1a">
       <mi id="S2.SS0.SSS0.Px2.p1.4.m4.1.1" xref="S2.SS0.SSS0.Px2.p1.4.m4.1.1.cmml">
        E
       </mi>
       <annotation-xml encoding="MathML-Content" id="S2.SS0.SSS0.Px2.p1.4.m4.1b">
        <ci id="S2.SS0.SSS0.Px2.p1.4.m4.1.1.cmml" xref="S2.SS0.SSS0.Px2.p1.4.m4.1.1">
         ùê∏
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.SS0.SSS0.Px2.p1.4.m4.1c">
        E
       </annotation>
      </semantics>
     </math>
     . The
     <span class="ltx_text ltx_markedasmath ltx_font_typewriter" id="S2.SS0.SSS0.Px2.p1.8.2">
      LLM
     </span>
     continues reviewing the execution result and rewrites
     <math alttext="C_{0}" class="ltx_Math" display="inline" id="S2.SS0.SSS0.Px2.p1.6.m6.1">
      <semantics id="S2.SS0.SSS0.Px2.p1.6.m6.1a">
       <msub id="S2.SS0.SSS0.Px2.p1.6.m6.1.1" xref="S2.SS0.SSS0.Px2.p1.6.m6.1.1.cmml">
        <mi id="S2.SS0.SSS0.Px2.p1.6.m6.1.1.2" xref="S2.SS0.SSS0.Px2.p1.6.m6.1.1.2.cmml">
         C
        </mi>
        <mn id="S2.SS0.SSS0.Px2.p1.6.m6.1.1.3" xref="S2.SS0.SSS0.Px2.p1.6.m6.1.1.3.cmml">
         0
        </mn>
       </msub>
       <annotation-xml encoding="MathML-Content" id="S2.SS0.SSS0.Px2.p1.6.m6.1b">
        <apply id="S2.SS0.SSS0.Px2.p1.6.m6.1.1.cmml" xref="S2.SS0.SSS0.Px2.p1.6.m6.1.1">
         <csymbol cd="ambiguous" id="S2.SS0.SSS0.Px2.p1.6.m6.1.1.1.cmml" xref="S2.SS0.SSS0.Px2.p1.6.m6.1.1">
          subscript
         </csymbol>
         <ci id="S2.SS0.SSS0.Px2.p1.6.m6.1.1.2.cmml" xref="S2.SS0.SSS0.Px2.p1.6.m6.1.1.2">
          ùê∂
         </ci>
         <cn id="S2.SS0.SSS0.Px2.p1.6.m6.1.1.3.cmml" type="integer" xref="S2.SS0.SSS0.Px2.p1.6.m6.1.1.3">
          0
         </cn>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.SS0.SSS0.Px2.p1.6.m6.1c">
        C_{0}
       </annotation>
      </semantics>
     </math>
     until
     <span class="ltx_text ltx_markedasmath ltx_font_typewriter" id="S2.SS0.SSS0.Px2.p1.8.3">
      LLM
     </span>
     produces the same code as the previous run (
     <math alttext="C=C_{0}" class="ltx_Math" display="inline" id="S2.SS0.SSS0.Px2.p1.8.m8.1">
      <semantics id="S2.SS0.SSS0.Px2.p1.8.m8.1a">
       <mrow id="S2.SS0.SSS0.Px2.p1.8.m8.1.1" xref="S2.SS0.SSS0.Px2.p1.8.m8.1.1.cmml">
        <mi id="S2.SS0.SSS0.Px2.p1.8.m8.1.1.2" xref="S2.SS0.SSS0.Px2.p1.8.m8.1.1.2.cmml">
         C
        </mi>
        <mo id="S2.SS0.SSS0.Px2.p1.8.m8.1.1.1" xref="S2.SS0.SSS0.Px2.p1.8.m8.1.1.1.cmml">
         =
        </mo>
        <msub id="S2.SS0.SSS0.Px2.p1.8.m8.1.1.3" xref="S2.SS0.SSS0.Px2.p1.8.m8.1.1.3.cmml">
         <mi id="S2.SS0.SSS0.Px2.p1.8.m8.1.1.3.2" xref="S2.SS0.SSS0.Px2.p1.8.m8.1.1.3.2.cmml">
          C
         </mi>
         <mn id="S2.SS0.SSS0.Px2.p1.8.m8.1.1.3.3" xref="S2.SS0.SSS0.Px2.p1.8.m8.1.1.3.3.cmml">
          0
         </mn>
        </msub>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S2.SS0.SSS0.Px2.p1.8.m8.1b">
        <apply id="S2.SS0.SSS0.Px2.p1.8.m8.1.1.cmml" xref="S2.SS0.SSS0.Px2.p1.8.m8.1.1">
         <eq id="S2.SS0.SSS0.Px2.p1.8.m8.1.1.1.cmml" xref="S2.SS0.SSS0.Px2.p1.8.m8.1.1.1">
         </eq>
         <ci id="S2.SS0.SSS0.Px2.p1.8.m8.1.1.2.cmml" xref="S2.SS0.SSS0.Px2.p1.8.m8.1.1.2">
          ùê∂
         </ci>
         <apply id="S2.SS0.SSS0.Px2.p1.8.m8.1.1.3.cmml" xref="S2.SS0.SSS0.Px2.p1.8.m8.1.1.3">
          <csymbol cd="ambiguous" id="S2.SS0.SSS0.Px2.p1.8.m8.1.1.3.1.cmml" xref="S2.SS0.SSS0.Px2.p1.8.m8.1.1.3">
           subscript
          </csymbol>
          <ci id="S2.SS0.SSS0.Px2.p1.8.m8.1.1.3.2.cmml" xref="S2.SS0.SSS0.Px2.p1.8.m8.1.1.3.2">
           ùê∂
          </ci>
          <cn id="S2.SS0.SSS0.Px2.p1.8.m8.1.1.3.3.cmml" type="integer" xref="S2.SS0.SSS0.Px2.p1.8.m8.1.1.3.3">
           0
          </cn>
         </apply>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.SS0.SSS0.Px2.p1.8.m8.1c">
        C=C_{0}
       </annotation>
      </semantics>
     </math>
     ).
Algorithm
     <a class="ltx_ref" href="#algorithm1" title="Algorithm 1 ‚Ä£ IC-Loop. ‚Ä£ 2 SQL-CRAFT Framework ‚Ä£ SQL-CRAFT: Text-to-SQL through Interactive Refinement and Enhanced Reasoning">
      <span class="ltx_text ltx_ref_tag">
       1
      </span>
     </a>
     depicts this process.
    </p>
   </div>
   <div class="ltx_para" id="S2.SS0.SSS0.Px2.p2">
    <p class="ltx_p" id="S2.SS0.SSS0.Px2.p2.1">
     In simpler terms, we first set an upper limit on the number of iterations for a loop. After generating the initial SQL, we enter the IC-Loop. At this stage, the execution results are converted into CSV format and inserted into the prompt. The model is then instructed to write a new SQL based on the question, the original SQL, and its execution results. If the model believes the current SQL is correct, it will repeat the same SQL. The loop terminates when the program detects that the model has generated the same SQL again, indicating that the model‚Äôs knowledge and the question-answer pair have reached a consensus. Correction cases can be found in
     <a class="ltx_ref" href="#A1.SS3.SSS3" title="A.3.3 Interactive Correction Cases ‚Ä£ A.3 More Cases ‚Ä£ Appendix A Appendix ‚Ä£ SQL-CRAFT: Text-to-SQL through Interactive Refinement and Enhanced Reasoning">
      <span class="ltx_text ltx_ref_tag">
       Section
      </span>
      <span class="ltx_text ltx_ref_tag">
       A.3.3
      </span>
     </a>
    </p>
   </div>
   <figure class="ltx_float ltx_algorithm" id="algorithm1">
    <div class="ltx_listing ltx_lst_numbers_left ltx_listing" id="algorithm1.7">
     <div class="ltx_listingline" id="algorithm1.1.1">
      <span class="ltx_text ltx_font_bold" id="algorithm1.1.1.1">
       Given
      </span>
      <math alttext="C_{0}" class="ltx_Math" display="inline" id="algorithm1.1.1.m1.1">
       <semantics id="algorithm1.1.1.m1.1a">
        <msub id="algorithm1.1.1.m1.1.1" xref="algorithm1.1.1.m1.1.1.cmml">
         <mi id="algorithm1.1.1.m1.1.1.2" xref="algorithm1.1.1.m1.1.1.2.cmml">
          C
         </mi>
         <mn id="algorithm1.1.1.m1.1.1.3" xref="algorithm1.1.1.m1.1.1.3.cmml">
          0
         </mn>
        </msub>
        <annotation-xml encoding="MathML-Content" id="algorithm1.1.1.m1.1b">
         <apply id="algorithm1.1.1.m1.1.1.cmml" xref="algorithm1.1.1.m1.1.1">
          <csymbol cd="ambiguous" id="algorithm1.1.1.m1.1.1.1.cmml" xref="algorithm1.1.1.m1.1.1">
           subscript
          </csymbol>
          <ci id="algorithm1.1.1.m1.1.1.2.cmml" xref="algorithm1.1.1.m1.1.1.2">
           ùê∂
          </ci>
          <cn id="algorithm1.1.1.m1.1.1.3.cmml" type="integer" xref="algorithm1.1.1.m1.1.1.3">
           0
          </cn>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="algorithm1.1.1.m1.1c">
         C_{0}
        </annotation>
       </semantics>
      </math>
      ;
     </div>
     <div class="ltx_listingline" id="algorithm1.3.3">
      <math alttext="C={\rm\texttt{LLM}}(P,C_{0},E)" class="ltx_Math" display="inline" id="algorithm1.2.2.m1.3">
       <semantics id="algorithm1.2.2.m1.3a">
        <mrow id="algorithm1.2.2.m1.3.3" xref="algorithm1.2.2.m1.3.3.cmml">
         <mi id="algorithm1.2.2.m1.3.3.3" xref="algorithm1.2.2.m1.3.3.3.cmml">
          C
         </mi>
         <mo id="algorithm1.2.2.m1.3.3.2" xref="algorithm1.2.2.m1.3.3.2.cmml">
          =
         </mo>
         <mrow id="algorithm1.2.2.m1.3.3.1" xref="algorithm1.2.2.m1.3.3.1.cmml">
          <mtext class="ltx_mathvariant_monospace" id="algorithm1.2.2.m1.3.3.1.3" xref="algorithm1.2.2.m1.3.3.1.3a.cmml">
           LLM
          </mtext>
          <mo id="algorithm1.2.2.m1.3.3.1.2" lspace="0em" rspace="0em" xref="algorithm1.2.2.m1.3.3.1.2.cmml">
           ‚Äã
          </mo>
          <mrow id="algorithm1.2.2.m1.3.3.1.1.1" xref="algorithm1.2.2.m1.3.3.1.1.2.cmml">
           <mo id="algorithm1.2.2.m1.3.3.1.1.1.2" stretchy="false" xref="algorithm1.2.2.m1.3.3.1.1.2.cmml">
            (
           </mo>
           <mi id="algorithm1.2.2.m1.1.1" xref="algorithm1.2.2.m1.1.1.cmml">
            P
           </mi>
           <mo id="algorithm1.2.2.m1.3.3.1.1.1.3" xref="algorithm1.2.2.m1.3.3.1.1.2.cmml">
            ,
           </mo>
           <msub id="algorithm1.2.2.m1.3.3.1.1.1.1" xref="algorithm1.2.2.m1.3.3.1.1.1.1.cmml">
            <mi id="algorithm1.2.2.m1.3.3.1.1.1.1.2" xref="algorithm1.2.2.m1.3.3.1.1.1.1.2.cmml">
             C
            </mi>
            <mn id="algorithm1.2.2.m1.3.3.1.1.1.1.3" xref="algorithm1.2.2.m1.3.3.1.1.1.1.3.cmml">
             0
            </mn>
           </msub>
           <mo id="algorithm1.2.2.m1.3.3.1.1.1.4" xref="algorithm1.2.2.m1.3.3.1.1.2.cmml">
            ,
           </mo>
           <mi id="algorithm1.2.2.m1.2.2" xref="algorithm1.2.2.m1.2.2.cmml">
            E
           </mi>
           <mo id="algorithm1.2.2.m1.3.3.1.1.1.5" stretchy="false" xref="algorithm1.2.2.m1.3.3.1.1.2.cmml">
            )
           </mo>
          </mrow>
         </mrow>
        </mrow>
        <annotation-xml encoding="MathML-Content" id="algorithm1.2.2.m1.3b">
         <apply id="algorithm1.2.2.m1.3.3.cmml" xref="algorithm1.2.2.m1.3.3">
          <eq id="algorithm1.2.2.m1.3.3.2.cmml" xref="algorithm1.2.2.m1.3.3.2">
          </eq>
          <ci id="algorithm1.2.2.m1.3.3.3.cmml" xref="algorithm1.2.2.m1.3.3.3">
           ùê∂
          </ci>
          <apply id="algorithm1.2.2.m1.3.3.1.cmml" xref="algorithm1.2.2.m1.3.3.1">
           <times id="algorithm1.2.2.m1.3.3.1.2.cmml" xref="algorithm1.2.2.m1.3.3.1.2">
           </times>
           <ci id="algorithm1.2.2.m1.3.3.1.3a.cmml" xref="algorithm1.2.2.m1.3.3.1.3">
            <mtext class="ltx_mathvariant_monospace" id="algorithm1.2.2.m1.3.3.1.3.cmml" xref="algorithm1.2.2.m1.3.3.1.3">
             LLM
            </mtext>
           </ci>
           <vector id="algorithm1.2.2.m1.3.3.1.1.2.cmml" xref="algorithm1.2.2.m1.3.3.1.1.1">
            <ci id="algorithm1.2.2.m1.1.1.cmml" xref="algorithm1.2.2.m1.1.1">
             ùëÉ
            </ci>
            <apply id="algorithm1.2.2.m1.3.3.1.1.1.1.cmml" xref="algorithm1.2.2.m1.3.3.1.1.1.1">
             <csymbol cd="ambiguous" id="algorithm1.2.2.m1.3.3.1.1.1.1.1.cmml" xref="algorithm1.2.2.m1.3.3.1.1.1.1">
              subscript
             </csymbol>
             <ci id="algorithm1.2.2.m1.3.3.1.1.1.1.2.cmml" xref="algorithm1.2.2.m1.3.3.1.1.1.1.2">
              ùê∂
             </ci>
             <cn id="algorithm1.2.2.m1.3.3.1.1.1.1.3.cmml" type="integer" xref="algorithm1.2.2.m1.3.3.1.1.1.1.3">
              0
             </cn>
            </apply>
            <ci id="algorithm1.2.2.m1.2.2.cmml" xref="algorithm1.2.2.m1.2.2">
             ùê∏
            </ci>
           </vector>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="algorithm1.2.2.m1.3c">
         C={\rm\texttt{LLM}}(P,C_{0},E)
        </annotation>
       </semantics>
      </math>
      ;
      <math alttext="E\leftarrow{\rm\texttt{DB}}(C_{0})" class="ltx_Math" display="inline" id="algorithm1.3.3.m2.1">
       <semantics id="algorithm1.3.3.m2.1a">
        <mrow id="algorithm1.3.3.m2.1.1" xref="algorithm1.3.3.m2.1.1.cmml">
         <mi id="algorithm1.3.3.m2.1.1.3" xref="algorithm1.3.3.m2.1.1.3.cmml">
          E
         </mi>
         <mo id="algorithm1.3.3.m2.1.1.2" stretchy="false" xref="algorithm1.3.3.m2.1.1.2.cmml">
          ‚Üê
         </mo>
         <mrow id="algorithm1.3.3.m2.1.1.1" xref="algorithm1.3.3.m2.1.1.1.cmml">
          <mtext class="ltx_mathvariant_monospace" id="algorithm1.3.3.m2.1.1.1.3" xref="algorithm1.3.3.m2.1.1.1.3a.cmml">
           DB
          </mtext>
          <mo id="algorithm1.3.3.m2.1.1.1.2" lspace="0em" rspace="0em" xref="algorithm1.3.3.m2.1.1.1.2.cmml">
           ‚Äã
          </mo>
          <mrow id="algorithm1.3.3.m2.1.1.1.1.1" xref="algorithm1.3.3.m2.1.1.1.1.1.1.cmml">
           <mo id="algorithm1.3.3.m2.1.1.1.1.1.2" stretchy="false" xref="algorithm1.3.3.m2.1.1.1.1.1.1.cmml">
            (
           </mo>
           <msub id="algorithm1.3.3.m2.1.1.1.1.1.1" xref="algorithm1.3.3.m2.1.1.1.1.1.1.cmml">
            <mi id="algorithm1.3.3.m2.1.1.1.1.1.1.2" xref="algorithm1.3.3.m2.1.1.1.1.1.1.2.cmml">
             C
            </mi>
            <mn id="algorithm1.3.3.m2.1.1.1.1.1.1.3" xref="algorithm1.3.3.m2.1.1.1.1.1.1.3.cmml">
             0
            </mn>
           </msub>
           <mo id="algorithm1.3.3.m2.1.1.1.1.1.3" stretchy="false" xref="algorithm1.3.3.m2.1.1.1.1.1.1.cmml">
            )
           </mo>
          </mrow>
         </mrow>
        </mrow>
        <annotation-xml encoding="MathML-Content" id="algorithm1.3.3.m2.1b">
         <apply id="algorithm1.3.3.m2.1.1.cmml" xref="algorithm1.3.3.m2.1.1">
          <ci id="algorithm1.3.3.m2.1.1.2.cmml" xref="algorithm1.3.3.m2.1.1.2">
           ‚Üê
          </ci>
          <ci id="algorithm1.3.3.m2.1.1.3.cmml" xref="algorithm1.3.3.m2.1.1.3">
           ùê∏
          </ci>
          <apply id="algorithm1.3.3.m2.1.1.1.cmml" xref="algorithm1.3.3.m2.1.1.1">
           <times id="algorithm1.3.3.m2.1.1.1.2.cmml" xref="algorithm1.3.3.m2.1.1.1.2">
           </times>
           <ci id="algorithm1.3.3.m2.1.1.1.3a.cmml" xref="algorithm1.3.3.m2.1.1.1.3">
            <mtext class="ltx_mathvariant_monospace" id="algorithm1.3.3.m2.1.1.1.3.cmml" xref="algorithm1.3.3.m2.1.1.1.3">
             DB
            </mtext>
           </ci>
           <apply id="algorithm1.3.3.m2.1.1.1.1.1.1.cmml" xref="algorithm1.3.3.m2.1.1.1.1.1">
            <csymbol cd="ambiguous" id="algorithm1.3.3.m2.1.1.1.1.1.1.1.cmml" xref="algorithm1.3.3.m2.1.1.1.1.1">
             subscript
            </csymbol>
            <ci id="algorithm1.3.3.m2.1.1.1.1.1.1.2.cmml" xref="algorithm1.3.3.m2.1.1.1.1.1.1.2">
             ùê∂
            </ci>
            <cn id="algorithm1.3.3.m2.1.1.1.1.1.1.3.cmml" type="integer" xref="algorithm1.3.3.m2.1.1.1.1.1.1.3">
             0
            </cn>
           </apply>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="algorithm1.3.3.m2.1c">
         E\leftarrow{\rm\texttt{DB}}(C_{0})
        </annotation>
       </semantics>
      </math>
      ;
     </div>
     <div class="ltx_listingline" id="algorithm1.4.4">
      <span class="ltx_text ltx_font_bold" id="algorithm1.4.4.2">
       while
      </span>
      <em class="ltx_emph ltx_font_italic" id="algorithm1.4.4.1">
       <math alttext="C\neq C_{0}" class="ltx_Math" display="inline" id="algorithm1.4.4.1.m1.1">
        <semantics id="algorithm1.4.4.1.m1.1a">
         <mrow id="algorithm1.4.4.1.m1.1.1" xref="algorithm1.4.4.1.m1.1.1.cmml">
          <mi id="algorithm1.4.4.1.m1.1.1.2" xref="algorithm1.4.4.1.m1.1.1.2.cmml">
           C
          </mi>
          <mo id="algorithm1.4.4.1.m1.1.1.1" xref="algorithm1.4.4.1.m1.1.1.1.cmml">
           ‚â†
          </mo>
          <msub id="algorithm1.4.4.1.m1.1.1.3" xref="algorithm1.4.4.1.m1.1.1.3.cmml">
           <mi id="algorithm1.4.4.1.m1.1.1.3.2" xref="algorithm1.4.4.1.m1.1.1.3.2.cmml">
            C
           </mi>
           <mn id="algorithm1.4.4.1.m1.1.1.3.3" xref="algorithm1.4.4.1.m1.1.1.3.3.cmml">
            0
           </mn>
          </msub>
         </mrow>
         <annotation-xml encoding="MathML-Content" id="algorithm1.4.4.1.m1.1b">
          <apply id="algorithm1.4.4.1.m1.1.1.cmml" xref="algorithm1.4.4.1.m1.1.1">
           <neq id="algorithm1.4.4.1.m1.1.1.1.cmml" xref="algorithm1.4.4.1.m1.1.1.1">
           </neq>
           <ci id="algorithm1.4.4.1.m1.1.1.2.cmml" xref="algorithm1.4.4.1.m1.1.1.2">
            ùê∂
           </ci>
           <apply id="algorithm1.4.4.1.m1.1.1.3.cmml" xref="algorithm1.4.4.1.m1.1.1.3">
            <csymbol cd="ambiguous" id="algorithm1.4.4.1.m1.1.1.3.1.cmml" xref="algorithm1.4.4.1.m1.1.1.3">
             subscript
            </csymbol>
            <ci id="algorithm1.4.4.1.m1.1.1.3.2.cmml" xref="algorithm1.4.4.1.m1.1.1.3.2">
             ùê∂
            </ci>
            <cn id="algorithm1.4.4.1.m1.1.1.3.3.cmml" type="integer" xref="algorithm1.4.4.1.m1.1.1.3.3">
             0
            </cn>
           </apply>
          </apply>
         </annotation-xml>
         <annotation encoding="application/x-tex" id="algorithm1.4.4.1.m1.1c">
          C\neq C_{0}
         </annotation>
        </semantics>
       </math>
      </em>
      <span class="ltx_text ltx_font_bold" id="algorithm1.4.4.3">
       do
      </span>
     </div>
     <div class="ltx_listingline" id="algorithm1.7.7">
      <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">
      </span>
      <math alttext="C_{0}\leftarrow C" class="ltx_Math" display="inline" id="algorithm1.5.5.m1.1">
       <semantics id="algorithm1.5.5.m1.1a">
        <mrow id="algorithm1.5.5.m1.1.1" xref="algorithm1.5.5.m1.1.1.cmml">
         <msub id="algorithm1.5.5.m1.1.1.2" xref="algorithm1.5.5.m1.1.1.2.cmml">
          <mi id="algorithm1.5.5.m1.1.1.2.2" xref="algorithm1.5.5.m1.1.1.2.2.cmml">
           C
          </mi>
          <mn id="algorithm1.5.5.m1.1.1.2.3" xref="algorithm1.5.5.m1.1.1.2.3.cmml">
           0
          </mn>
         </msub>
         <mo id="algorithm1.5.5.m1.1.1.1" stretchy="false" xref="algorithm1.5.5.m1.1.1.1.cmml">
          ‚Üê
         </mo>
         <mi id="algorithm1.5.5.m1.1.1.3" xref="algorithm1.5.5.m1.1.1.3.cmml">
          C
         </mi>
        </mrow>
        <annotation-xml encoding="MathML-Content" id="algorithm1.5.5.m1.1b">
         <apply id="algorithm1.5.5.m1.1.1.cmml" xref="algorithm1.5.5.m1.1.1">
          <ci id="algorithm1.5.5.m1.1.1.1.cmml" xref="algorithm1.5.5.m1.1.1.1">
           ‚Üê
          </ci>
          <apply id="algorithm1.5.5.m1.1.1.2.cmml" xref="algorithm1.5.5.m1.1.1.2">
           <csymbol cd="ambiguous" id="algorithm1.5.5.m1.1.1.2.1.cmml" xref="algorithm1.5.5.m1.1.1.2">
            subscript
           </csymbol>
           <ci id="algorithm1.5.5.m1.1.1.2.2.cmml" xref="algorithm1.5.5.m1.1.1.2.2">
            ùê∂
           </ci>
           <cn id="algorithm1.5.5.m1.1.1.2.3.cmml" type="integer" xref="algorithm1.5.5.m1.1.1.2.3">
            0
           </cn>
          </apply>
          <ci id="algorithm1.5.5.m1.1.1.3.cmml" xref="algorithm1.5.5.m1.1.1.3">
           ùê∂
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="algorithm1.5.5.m1.1c">
         C_{0}\leftarrow C
        </annotation>
       </semantics>
      </math>
      ;
      <math alttext="C={\rm\texttt{LLM}}(P,C_{0},E)" class="ltx_Math" display="inline" id="algorithm1.6.6.m2.3">
       <semantics id="algorithm1.6.6.m2.3a">
        <mrow id="algorithm1.6.6.m2.3.3" xref="algorithm1.6.6.m2.3.3.cmml">
         <mi id="algorithm1.6.6.m2.3.3.3" xref="algorithm1.6.6.m2.3.3.3.cmml">
          C
         </mi>
         <mo id="algorithm1.6.6.m2.3.3.2" xref="algorithm1.6.6.m2.3.3.2.cmml">
          =
         </mo>
         <mrow id="algorithm1.6.6.m2.3.3.1" xref="algorithm1.6.6.m2.3.3.1.cmml">
          <mtext class="ltx_mathvariant_monospace" id="algorithm1.6.6.m2.3.3.1.3" xref="algorithm1.6.6.m2.3.3.1.3a.cmml">
           LLM
          </mtext>
          <mo id="algorithm1.6.6.m2.3.3.1.2" lspace="0em" rspace="0em" xref="algorithm1.6.6.m2.3.3.1.2.cmml">
           ‚Äã
          </mo>
          <mrow id="algorithm1.6.6.m2.3.3.1.1.1" xref="algorithm1.6.6.m2.3.3.1.1.2.cmml">
           <mo id="algorithm1.6.6.m2.3.3.1.1.1.2" stretchy="false" xref="algorithm1.6.6.m2.3.3.1.1.2.cmml">
            (
           </mo>
           <mi id="algorithm1.6.6.m2.1.1" xref="algorithm1.6.6.m2.1.1.cmml">
            P
           </mi>
           <mo id="algorithm1.6.6.m2.3.3.1.1.1.3" xref="algorithm1.6.6.m2.3.3.1.1.2.cmml">
            ,
           </mo>
           <msub id="algorithm1.6.6.m2.3.3.1.1.1.1" xref="algorithm1.6.6.m2.3.3.1.1.1.1.cmml">
            <mi id="algorithm1.6.6.m2.3.3.1.1.1.1.2" xref="algorithm1.6.6.m2.3.3.1.1.1.1.2.cmml">
             C
            </mi>
            <mn id="algorithm1.6.6.m2.3.3.1.1.1.1.3" xref="algorithm1.6.6.m2.3.3.1.1.1.1.3.cmml">
             0
            </mn>
           </msub>
           <mo id="algorithm1.6.6.m2.3.3.1.1.1.4" xref="algorithm1.6.6.m2.3.3.1.1.2.cmml">
            ,
           </mo>
           <mi id="algorithm1.6.6.m2.2.2" xref="algorithm1.6.6.m2.2.2.cmml">
            E
           </mi>
           <mo id="algorithm1.6.6.m2.3.3.1.1.1.5" stretchy="false" xref="algorithm1.6.6.m2.3.3.1.1.2.cmml">
            )
           </mo>
          </mrow>
         </mrow>
        </mrow>
        <annotation-xml encoding="MathML-Content" id="algorithm1.6.6.m2.3b">
         <apply id="algorithm1.6.6.m2.3.3.cmml" xref="algorithm1.6.6.m2.3.3">
          <eq id="algorithm1.6.6.m2.3.3.2.cmml" xref="algorithm1.6.6.m2.3.3.2">
          </eq>
          <ci id="algorithm1.6.6.m2.3.3.3.cmml" xref="algorithm1.6.6.m2.3.3.3">
           ùê∂
          </ci>
          <apply id="algorithm1.6.6.m2.3.3.1.cmml" xref="algorithm1.6.6.m2.3.3.1">
           <times id="algorithm1.6.6.m2.3.3.1.2.cmml" xref="algorithm1.6.6.m2.3.3.1.2">
           </times>
           <ci id="algorithm1.6.6.m2.3.3.1.3a.cmml" xref="algorithm1.6.6.m2.3.3.1.3">
            <mtext class="ltx_mathvariant_monospace" id="algorithm1.6.6.m2.3.3.1.3.cmml" xref="algorithm1.6.6.m2.3.3.1.3">
             LLM
            </mtext>
           </ci>
           <vector id="algorithm1.6.6.m2.3.3.1.1.2.cmml" xref="algorithm1.6.6.m2.3.3.1.1.1">
            <ci id="algorithm1.6.6.m2.1.1.cmml" xref="algorithm1.6.6.m2.1.1">
             ùëÉ
            </ci>
            <apply id="algorithm1.6.6.m2.3.3.1.1.1.1.cmml" xref="algorithm1.6.6.m2.3.3.1.1.1.1">
             <csymbol cd="ambiguous" id="algorithm1.6.6.m2.3.3.1.1.1.1.1.cmml" xref="algorithm1.6.6.m2.3.3.1.1.1.1">
              subscript
             </csymbol>
             <ci id="algorithm1.6.6.m2.3.3.1.1.1.1.2.cmml" xref="algorithm1.6.6.m2.3.3.1.1.1.1.2">
              ùê∂
             </ci>
             <cn id="algorithm1.6.6.m2.3.3.1.1.1.1.3.cmml" type="integer" xref="algorithm1.6.6.m2.3.3.1.1.1.1.3">
              0
             </cn>
            </apply>
            <ci id="algorithm1.6.6.m2.2.2.cmml" xref="algorithm1.6.6.m2.2.2">
             ùê∏
            </ci>
           </vector>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="algorithm1.6.6.m2.3c">
         C={\rm\texttt{LLM}}(P,C_{0},E)
        </annotation>
       </semantics>
      </math>
      ;
      <math alttext="E\leftarrow{\rm\texttt{DB}}(C_{0})" class="ltx_Math" display="inline" id="algorithm1.7.7.m3.1">
       <semantics id="algorithm1.7.7.m3.1a">
        <mrow id="algorithm1.7.7.m3.1.1" xref="algorithm1.7.7.m3.1.1.cmml">
         <mi id="algorithm1.7.7.m3.1.1.3" xref="algorithm1.7.7.m3.1.1.3.cmml">
          E
         </mi>
         <mo id="algorithm1.7.7.m3.1.1.2" stretchy="false" xref="algorithm1.7.7.m3.1.1.2.cmml">
          ‚Üê
         </mo>
         <mrow id="algorithm1.7.7.m3.1.1.1" xref="algorithm1.7.7.m3.1.1.1.cmml">
          <mtext class="ltx_mathvariant_monospace" id="algorithm1.7.7.m3.1.1.1.3" xref="algorithm1.7.7.m3.1.1.1.3a.cmml">
           DB
          </mtext>
          <mo id="algorithm1.7.7.m3.1.1.1.2" lspace="0em" rspace="0em" xref="algorithm1.7.7.m3.1.1.1.2.cmml">
           ‚Äã
          </mo>
          <mrow id="algorithm1.7.7.m3.1.1.1.1.1" xref="algorithm1.7.7.m3.1.1.1.1.1.1.cmml">
           <mo id="algorithm1.7.7.m3.1.1.1.1.1.2" stretchy="false" xref="algorithm1.7.7.m3.1.1.1.1.1.1.cmml">
            (
           </mo>
           <msub id="algorithm1.7.7.m3.1.1.1.1.1.1" xref="algorithm1.7.7.m3.1.1.1.1.1.1.cmml">
            <mi id="algorithm1.7.7.m3.1.1.1.1.1.1.2" xref="algorithm1.7.7.m3.1.1.1.1.1.1.2.cmml">
             C
            </mi>
            <mn id="algorithm1.7.7.m3.1.1.1.1.1.1.3" xref="algorithm1.7.7.m3.1.1.1.1.1.1.3.cmml">
             0
            </mn>
           </msub>
           <mo id="algorithm1.7.7.m3.1.1.1.1.1.3" stretchy="false" xref="algorithm1.7.7.m3.1.1.1.1.1.1.cmml">
            )
           </mo>
          </mrow>
         </mrow>
        </mrow>
        <annotation-xml encoding="MathML-Content" id="algorithm1.7.7.m3.1b">
         <apply id="algorithm1.7.7.m3.1.1.cmml" xref="algorithm1.7.7.m3.1.1">
          <ci id="algorithm1.7.7.m3.1.1.2.cmml" xref="algorithm1.7.7.m3.1.1.2">
           ‚Üê
          </ci>
          <ci id="algorithm1.7.7.m3.1.1.3.cmml" xref="algorithm1.7.7.m3.1.1.3">
           ùê∏
          </ci>
          <apply id="algorithm1.7.7.m3.1.1.1.cmml" xref="algorithm1.7.7.m3.1.1.1">
           <times id="algorithm1.7.7.m3.1.1.1.2.cmml" xref="algorithm1.7.7.m3.1.1.1.2">
           </times>
           <ci id="algorithm1.7.7.m3.1.1.1.3a.cmml" xref="algorithm1.7.7.m3.1.1.1.3">
            <mtext class="ltx_mathvariant_monospace" id="algorithm1.7.7.m3.1.1.1.3.cmml" xref="algorithm1.7.7.m3.1.1.1.3">
             DB
            </mtext>
           </ci>
           <apply id="algorithm1.7.7.m3.1.1.1.1.1.1.cmml" xref="algorithm1.7.7.m3.1.1.1.1.1">
            <csymbol cd="ambiguous" id="algorithm1.7.7.m3.1.1.1.1.1.1.1.cmml" xref="algorithm1.7.7.m3.1.1.1.1.1">
             subscript
            </csymbol>
            <ci id="algorithm1.7.7.m3.1.1.1.1.1.1.2.cmml" xref="algorithm1.7.7.m3.1.1.1.1.1.1.2">
             ùê∂
            </ci>
            <cn id="algorithm1.7.7.m3.1.1.1.1.1.1.3.cmml" type="integer" xref="algorithm1.7.7.m3.1.1.1.1.1.1.3">
             0
            </cn>
           </apply>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="algorithm1.7.7.m3.1c">
         E\leftarrow{\rm\texttt{DB}}(C_{0})
        </annotation>
       </semantics>
      </math>
     </div>
     <div class="ltx_listingline" id="algorithm1.7.8">
      end while
     </div>
     <div class="ltx_listingline" id="algorithm1.7.9">
     </div>
    </div>
    <figcaption class="ltx_caption">
     <span class="ltx_tag ltx_tag_float">
      <span class="ltx_text ltx_font_bold" id="algorithm1.9.1.1">
       Algorithm¬†1
      </span>
     </span>
     IC-Loop Control
    </figcaption>
   </figure>
  </section>
 </section>
 <section class="ltx_section" id="S3">
  <h2 class="ltx_title ltx_title_section">
   <span class="ltx_tag ltx_tag_section">
    3
   </span>
   Experiments and Results
  </h2>
  <div class="ltx_para" id="S3.p1">
   <p class="ltx_p" id="S3.p1.1">
    We conduct experiments on two cross-domain text-to-SQL benchmarks detailed in
    <a class="ltx_ref" href="#S3.T1" title="In 3 Experiments and Results ‚Ä£ SQL-CRAFT: Text-to-SQL through Interactive Refinement and Enhanced Reasoning">
     <span class="ltx_text ltx_ref_tag">
      Table
     </span>
     <span class="ltx_text ltx_ref_tag">
      1
     </span>
    </a>
    .
We employ test-suite execution evaluation
    <span class="ltx_note ltx_role_footnote" id="footnote4">
     <sup class="ltx_note_mark">
      4
     </sup>
     <span class="ltx_note_outer">
      <span class="ltx_note_content">
       <sup class="ltx_note_mark">
        4
       </sup>
       <span class="ltx_tag ltx_tag_note">
        4
       </span>
       github.com/taoyds/test-suite-sql-eval
      </span>
     </span>
    </span>
    <cite class="ltx_cite ltx_citemacro_cite">
     Zhong et¬†al. (
     <a class="ltx_ref" href="#bib.bib29" title="">
      2020
     </a>
     )
    </cite>
    , the standard evaluation protocol for Spider, and the official SQL execution accuracy (EA) evaluation for Bird
    <span class="ltx_note ltx_role_footnote" id="footnote5">
     <sup class="ltx_note_mark">
      5
     </sup>
     <span class="ltx_note_outer">
      <span class="ltx_note_content">
       <sup class="ltx_note_mark">
        5
       </sup>
       <span class="ltx_tag ltx_tag_note">
        5
       </span>
       bird-bench.github.io/
      </span>
     </span>
    </span>
    .
   </p>
  </div>
  <div class="ltx_para" id="S3.p2">
   <p class="ltx_p" id="S3.p2.1">
    For a fair comparison with the latest state-of-the-art work DAIL
    <cite class="ltx_cite ltx_citemacro_cite">
     Gao et¬†al. (
     <a class="ltx_ref" href="#bib.bib11" title="">
      2023
     </a>
     )
    </cite>
    on Spider-Dev
    <span class="ltx_note ltx_role_footnote" id="footnote6">
     <sup class="ltx_note_mark">
      6
     </sup>
     <span class="ltx_note_outer">
      <span class="ltx_note_content">
       <sup class="ltx_note_mark">
        6
       </sup>
       <span class="ltx_tag ltx_tag_note">
        6
       </span>
       yale-lily.github.io/spider
      </span>
     </span>
    </span>
    , we also apply the 5-shot setting to GPT-4 and GPT-3.5-Turbo.
Specifically, we construct the embeddings for the user questions and training set questions using the Ada 2 text embedding model from OpenAI
    <span class="ltx_note ltx_role_footnote" id="footnote7">
     <sup class="ltx_note_mark">
      7
     </sup>
     <span class="ltx_note_outer">
      <span class="ltx_note_content">
       <sup class="ltx_note_mark">
        7
       </sup>
       <span class="ltx_tag ltx_tag_note">
        7
       </span>
       platform.openai.com/docs/guides/embeddings/use-
       <br class="ltx_break"/>
       cases
      </span>
     </span>
    </span>
    , and then retrieve 5 question-SQL pairs from the training set with the highest cosine similarity scores as our few-shot examples.
   </p>
  </div>
  <figure class="ltx_table" id="S3.T1">
   <table class="ltx_tabular ltx_centering ltx_align_middle" id="S3.T1.1">
    <tr class="ltx_tr" id="S3.T1.1.1">
     <td class="ltx_td ltx_border_tt" id="S3.T1.1.1.1">
     </td>
     <td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T1.1.1.2">
      <span class="ltx_text" id="S3.T1.1.1.2.1">
      </span>
      <span class="ltx_text" id="S3.T1.1.1.2.2">
       <span class="ltx_tabular ltx_align_middle" id="S3.T1.1.1.2.2.1">
        <span class="ltx_tr" id="S3.T1.1.1.2.2.1.1">
         <span class="ltx_td ltx_nopad_r ltx_align_center" id="S3.T1.1.1.2.2.1.1.1">
          Spider
         </span>
        </span>
        <span class="ltx_tr" id="S3.T1.1.1.2.2.1.2">
         <span class="ltx_td ltx_nopad_r ltx_align_center" id="S3.T1.1.1.2.2.1.2.1">
          <cite class="ltx_cite ltx_citemacro_cite">
           Yu et¬†al. (
           <a class="ltx_ref" href="#bib.bib28" title="">
            2018
           </a>
           )
          </cite>
         </span>
        </span>
       </span>
      </span>
      <span class="ltx_text" id="S3.T1.1.1.2.3">
      </span>
     </td>
     <td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T1.1.1.3">
      <span class="ltx_text" id="S3.T1.1.1.3.1">
      </span>
      <span class="ltx_text" id="S3.T1.1.1.3.2">
       <span class="ltx_tabular ltx_align_middle" id="S3.T1.1.1.3.2.1">
        <span class="ltx_tr" id="S3.T1.1.1.3.2.1.1">
         <span class="ltx_td ltx_nopad_r ltx_align_center" id="S3.T1.1.1.3.2.1.1.1">
          Bird
         </span>
        </span>
        <span class="ltx_tr" id="S3.T1.1.1.3.2.1.2">
         <span class="ltx_td ltx_nopad_r ltx_align_center" id="S3.T1.1.1.3.2.1.2.1">
          <cite class="ltx_cite ltx_citemacro_cite">
           Li et¬†al. (
           <a class="ltx_ref" href="#bib.bib14" title="">
            2023b
           </a>
           )
          </cite>
         </span>
        </span>
       </span>
      </span>
      <span class="ltx_text" id="S3.T1.1.1.3.3">
      </span>
     </td>
    </tr>
    <tr class="ltx_tr" id="S3.T1.1.2">
     <td class="ltx_td ltx_align_left ltx_border_t" id="S3.T1.1.2.1">
      Dev
     </td>
     <td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.2.2">
      1,034
     </td>
     <td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.2.3">
      1,534
     </td>
    </tr>
    <tr class="ltx_tr" id="S3.T1.1.3">
     <td class="ltx_td ltx_align_left" id="S3.T1.1.3.1">
      #Domain
     </td>
     <td class="ltx_td ltx_align_center" id="S3.T1.1.3.2">
      138
     </td>
     <td class="ltx_td ltx_align_center" id="S3.T1.1.3.3">
      37
     </td>
    </tr>
    <tr class="ltx_tr" id="S3.T1.1.4">
     <td class="ltx_td ltx_align_left" id="S3.T1.1.4.1">
      #DB
     </td>
     <td class="ltx_td ltx_align_center" id="S3.T1.1.4.2">
      200
     </td>
     <td class="ltx_td ltx_align_center" id="S3.T1.1.4.3">
      95
     </td>
    </tr>
    <tr class="ltx_tr" id="S3.T1.1.5">
     <td class="ltx_td ltx_align_left ltx_border_bb" id="S3.T1.1.5.1">
      DB Size
     </td>
     <td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T1.1.5.2">
      -
     </td>
     <td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T1.1.5.3">
      33.4 GB
     </td>
    </tr>
   </table>
   <figcaption class="ltx_caption ltx_centering">
    <span class="ltx_tag ltx_tag_table">
     Table 1:
    </span>
    Statistics of two text-to-SQL benchmarks we use in our experiments. ‚Äú#Domain‚Äù and ‚Äú#DB‚Äù refer to the number of domains and databases, respectively.
   </figcaption>
  </figure>
  <section class="ltx_paragraph" id="S3.SS0.SSS0.Px1">
   <h5 class="ltx_title ltx_title_paragraph">
    Overall Results.
   </h5>
   <figure class="ltx_table" id="S3.T2">
    <table class="ltx_tabular ltx_align_middle" id="S3.T2.2">
     <tr class="ltx_tr" id="S3.T2.2.3">
      <td class="ltx_td ltx_border_tt" id="S3.T2.2.3.1" style="padding:2.5pt 3.0pt;">
      </td>
      <td class="ltx_td ltx_align_center ltx_border_tt" colspan="2" id="S3.T2.2.3.2" style="padding:2.5pt 3.0pt;">
       GPT-3.5-Turbo
      </td>
      <td class="ltx_td ltx_align_center ltx_border_tt" colspan="2" id="S3.T2.2.3.3" style="padding:2.5pt 3.0pt;">
       GPT-4
      </td>
     </tr>
     <tr class="ltx_tr" id="S3.T2.2.4">
      <td class="ltx_td" id="S3.T2.2.4.1" style="padding:2.5pt 3.0pt;">
      </td>
      <td class="ltx_td ltx_align_center ltx_border_t" id="S3.T2.2.4.2" style="padding:2.5pt 3.0pt;">
       Spider
      </td>
      <td class="ltx_td ltx_align_center ltx_border_t" id="S3.T2.2.4.3" style="padding:2.5pt 3.0pt;">
       Bird
      </td>
      <td class="ltx_td ltx_align_center ltx_border_t" id="S3.T2.2.4.4" style="padding:2.5pt 3.0pt;">
       Spider
      </td>
      <td class="ltx_td ltx_align_center ltx_border_t" id="S3.T2.2.4.5" style="padding:2.5pt 3.0pt;">
       Bird
      </td>
     </tr>
     <tr class="ltx_tr" id="S3.T2.2.5">
      <td class="ltx_td ltx_align_left ltx_border_t" id="S3.T2.2.5.1" style="padding:2.5pt 3.0pt;">
       SQL-Only
      </td>
      <td class="ltx_td ltx_align_center ltx_border_t" id="S3.T2.2.5.2" style="background-color:#FFEEF1;padding:2.5pt 3.0pt;">
       <span class="ltx_text" id="S3.T2.2.5.2.1" style="background-color:#FFEEF1;">
        78.2
       </span>
      </td>
      <td class="ltx_td ltx_align_center ltx_border_t" id="S3.T2.2.5.3" style="background-color:#FFFFFF;padding:2.5pt 3.0pt;">
       <span class="ltx_text" id="S3.T2.2.5.3.1" style="background-color:#FFFFFF;">
        29.99
       </span>
      </td>
      <td class="ltx_td ltx_align_center ltx_border_t" id="S3.T2.2.5.4" style="background-color:#FFD3DB;padding:2.5pt 3.0pt;">
       <span class="ltx_text" id="S3.T2.2.5.4.1" style="background-color:#FFD3DB;">
        79.7
       </span>
      </td>
      <td class="ltx_td ltx_align_center ltx_border_t" id="S3.T2.2.5.5" style="background-color:#FFFFFF;padding:2.5pt 3.0pt;">
       <span class="ltx_text" id="S3.T2.2.5.5.1" style="background-color:#FFFFFF;">
        53.30
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="S3.T2.2.6">
      <td class="ltx_td ltx_align_left" id="S3.T2.2.6.1" style="padding:2.5pt 3.0pt;">
       PoT
      </td>
      <td class="ltx_td ltx_align_center" id="S3.T2.2.6.2" style="background-color:#FFE8EC;padding:2.5pt 3.0pt;">
       <span class="ltx_text" id="S3.T2.2.6.2.1" style="background-color:#FFE8EC;">
        78.5
       </span>
      </td>
      <td class="ltx_td ltx_align_center" id="S3.T2.2.6.3" style="background-color:#FFFFFF;padding:2.5pt 3.0pt;">
       <span class="ltx_text" id="S3.T2.2.6.3.1" style="background-color:#FFFFFF;">
        30.70
       </span>
      </td>
      <td class="ltx_td ltx_align_center" id="S3.T2.2.6.4" style="background-color:#FFCED7;padding:2.5pt 3.0pt;">
       <span class="ltx_text" id="S3.T2.2.6.4.1" style="background-color:#FFCED7;">
        80.0
       </span>
      </td>
      <td class="ltx_td ltx_align_center" id="S3.T2.2.6.5" style="background-color:#FFFFFF;padding:2.5pt 3.0pt;">
       <span class="ltx_text" id="S3.T2.2.6.5.1" style="background-color:#FFFFFF;">
        54.61
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="S3.T2.2.7">
      <td class="ltx_td ltx_align_left" id="S3.T2.2.7.1" style="padding:2.5pt 3.0pt;">
       CBs
      </td>
      <td class="ltx_td ltx_align_center" id="S3.T2.2.7.2" style="background-color:#FFE7EB;padding:2.5pt 3.0pt;">
       <span class="ltx_text" id="S3.T2.2.7.2.1" style="background-color:#FFE7EB;">
        78.6
       </span>
      </td>
      <td class="ltx_td ltx_align_center" id="S3.T2.2.7.3" style="padding:2.5pt 3.0pt;">
       ‚Äì
      </td>
      <td class="ltx_td ltx_align_center" id="S3.T2.2.7.4" style="background-color:#FFC4CE;padding:2.5pt 3.0pt;">
       <span class="ltx_text" id="S3.T2.2.7.4.1" style="background-color:#FFC4CE;">
        80.6
       </span>
      </td>
      <td class="ltx_td ltx_align_center" id="S3.T2.2.7.5" style="padding:2.5pt 3.0pt;">
       ‚Äì
      </td>
     </tr>
     <tr class="ltx_tr" id="S3.T2.2.8">
      <td class="ltx_td ltx_align_left" id="S3.T2.2.8.1" style="padding:2.5pt 3.0pt;">
       IC-Lp
      </td>
      <td class="ltx_td ltx_align_center" id="S3.T2.2.8.2" style="background-color:#FFECEF;padding:2.5pt 3.0pt;">
       <span class="ltx_text" id="S3.T2.2.8.2.1" style="background-color:#FFECEF;">
        78.3
       </span>
      </td>
      <td class="ltx_td ltx_align_center" id="S3.T2.2.8.3" style="background-color:#FFFFFF;padding:2.5pt 3.0pt;">
       <span class="ltx_text" id="S3.T2.2.8.3.1" style="background-color:#FFFFFF;">
        30.38
       </span>
      </td>
      <td class="ltx_td ltx_align_center" id="S3.T2.2.8.4" style="background-color:#FFC0CB;padding:2.5pt 3.0pt;">
       <span class="ltx_text" id="S3.T2.2.8.4.1" style="background-color:#FFC0CB;">
        82.3
       </span>
      </td>
      <td class="ltx_td ltx_align_center" id="S3.T2.2.8.5" style="background-color:#FFFFFF;padding:2.5pt 3.0pt;">
       <span class="ltx_text" id="S3.T2.2.8.5.1" style="background-color:#FFFFFF;">
        54.89
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="S3.T2.2.9">
      <td class="ltx_td ltx_align_left" id="S3.T2.2.9.1" style="padding:2.5pt 3.0pt;">
       IC-Lp+CBs
      </td>
      <td class="ltx_td ltx_align_center" id="S3.T2.2.9.2" style="background-color:#FFD5DC;padding:2.5pt 3.0pt;">
       <span class="ltx_text" id="S3.T2.2.9.2.1" style="background-color:#FFD5DC;">
        79.6
       </span>
      </td>
      <td class="ltx_td ltx_align_center" id="S3.T2.2.9.3" style="padding:2.5pt 3.0pt;">
       ‚Äì
      </td>
      <td class="ltx_td ltx_align_center" id="S3.T2.2.9.4" style="background-color:#FFC0CB;padding:2.5pt 3.0pt;">
       <span class="ltx_text" id="S3.T2.2.9.4.1" style="background-color:#FFC0CB;">
        83.3
       </span>
      </td>
      <td class="ltx_td ltx_align_center" id="S3.T2.2.9.5" style="padding:2.5pt 3.0pt;">
       ‚Äì
      </td>
     </tr>
     <tr class="ltx_tr" id="S3.T2.1.1">
      <td class="ltx_td ltx_align_left ltx_border_t" id="S3.T2.1.1.1" style="padding:2.5pt 3.0pt;">
       DAIL
       <math alttext="{}_{\text{\cite[citet]{\@@bibref{Authors Phrase1YearPhrase2}{gao2023text}{\@@citephrase{(}}{\@@citephrase{)}}}}}" class="ltx_Math" display="inline" id="S3.T2.1.1.1.m1.1">
        <semantics id="S3.T2.1.1.1.m1.1a">
         <msub id="S3.T2.1.1.1.m1.1.1" xref="S3.T2.1.1.1.m1.1.1.cmml">
          <mi id="S3.T2.1.1.1.m1.1.1a" xref="S3.T2.1.1.1.m1.1.1.cmml">
          </mi>
          <mtext class="ltx_citemacro_citet" id="S3.T2.1.1.1.m1.1.1.1" mathsize="142%" xref="S3.T2.1.1.1.m1.1.1.1e.cmml">
           <cite class="ltx_cite ltx_citemacro_citet">
            Gao et¬†al.
            <span class="ltx_text" id="S3.T2.1.1.1.m1.1.1.1.1.1.1.1nest" style="font-size:70%;">
             (
            </span>
            <a class="ltx_ref" href="#bib.bib11" title="">
             2023
            </a>
            <span class="ltx_text" id="S3.T2.1.1.1.m1.1.1.1.2.2.2.1nest" style="font-size:70%;">
             )
            </span>
           </cite>
          </mtext>
         </msub>
         <annotation-xml encoding="MathML-Content" id="S3.T2.1.1.1.m1.1b">
          <apply id="S3.T2.1.1.1.m1.1.1.cmml" xref="S3.T2.1.1.1.m1.1.1">
           <ci id="S3.T2.1.1.1.m1.1.1.1e.cmml" xref="S3.T2.1.1.1.m1.1.1.1">
            <mtext class="ltx_citemacro_citet" id="S3.T2.1.1.1.m1.1.1.1.cmml" xref="S3.T2.1.1.1.m1.1.1.1">
             <cite class="ltx_cite ltx_citemacro_citet">
              Gao et¬†al.
              <span class="ltx_text" id="S3.T2.1.1.1.m1.1.1.1.1.1.1.1anest" style="font-size:70%;">
               (
              </span>
              <a class="ltx_ref" href="#bib.bib11" title="">
               2023
              </a>
              <span class="ltx_text" id="S3.T2.1.1.1.m1.1.1.1.2.2.2.1anest" style="font-size:70%;">
               )
              </span>
             </cite>
            </mtext>
           </ci>
          </apply>
         </annotation-xml>
         <annotation encoding="application/x-tex" id="S3.T2.1.1.1.m1.1c">
          {}_{\text{\cite[citet]{\@@bibref{Authors Phrase1YearPhrase2}{gao2023text}{\@@citephrase{(}}{\@@citephrase{)}}}}}
         </annotation>
        </semantics>
       </math>
      </td>
      <td class="ltx_td ltx_align_center ltx_border_t" id="S3.T2.1.1.2" style="padding:2.5pt 3.0pt;">
       ‚Äì
      </td>
      <td class="ltx_td ltx_align_center ltx_border_t" id="S3.T2.1.1.3" style="padding:2.5pt 3.0pt;">
       ‚Äì
      </td>
      <td class="ltx_td ltx_align_center ltx_border_t" id="S3.T2.1.1.4" style="background-color:#FFC0CB;padding:2.5pt 3.0pt;">
       <span class="ltx_text" id="S3.T2.1.1.4.1" style="background-color:#FFC0CB;">
        83.1
       </span>
      </td>
      <td class="ltx_td ltx_align_center ltx_border_t" id="S3.T2.1.1.5" style="background-color:#FFFFFF;padding:2.5pt 3.0pt;">
       <span class="ltx_text" id="S3.T2.1.1.5.1" style="background-color:#FFFFFF;">
        54.76
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="S3.T2.2.2">
      <td class="ltx_td ltx_align_left ltx_border_bb" id="S3.T2.2.2.1" style="padding:2.5pt 3.0pt;">
       IC-Lp+PoT
       <math alttext="{}_{\text{ours}}" class="ltx_Math" display="inline" id="S3.T2.2.2.1.m1.1">
        <semantics id="S3.T2.2.2.1.m1.1a">
         <msub id="S3.T2.2.2.1.m1.1.1" xref="S3.T2.2.2.1.m1.1.1.cmml">
          <mi id="S3.T2.2.2.1.m1.1.1a" xref="S3.T2.2.2.1.m1.1.1.cmml">
          </mi>
          <mtext id="S3.T2.2.2.1.m1.1.1.1" xref="S3.T2.2.2.1.m1.1.1.1a.cmml">
           ours
          </mtext>
         </msub>
         <annotation-xml encoding="MathML-Content" id="S3.T2.2.2.1.m1.1b">
          <apply id="S3.T2.2.2.1.m1.1.1.cmml" xref="S3.T2.2.2.1.m1.1.1">
           <ci id="S3.T2.2.2.1.m1.1.1.1a.cmml" xref="S3.T2.2.2.1.m1.1.1.1">
            <mtext id="S3.T2.2.2.1.m1.1.1.1.cmml" mathsize="70%" xref="S3.T2.2.2.1.m1.1.1.1">
             ours
            </mtext>
           </ci>
          </apply>
         </annotation-xml>
         <annotation encoding="application/x-tex" id="S3.T2.2.2.1.m1.1c">
          {}_{\text{ours}}
         </annotation>
        </semantics>
       </math>
      </td>
      <td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T2.2.2.2" style="background-color:#FFDAE1;padding:2.5pt 3.0pt;">
       <span class="ltx_text" id="S3.T2.2.2.2.1" style="background-color:#FFDAE1;">
        79.3
       </span>
      </td>
      <td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T2.2.2.3" style="background-color:#FFFFFF;padding:2.5pt 3.0pt;">
       <span class="ltx_text" id="S3.T2.2.2.3.1" style="background-color:#FFFFFF;">
        33.25
       </span>
      </td>
      <td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T2.2.2.4" style="background-color:#FFC0CB;padding:2.5pt 3.0pt;">
       <span class="ltx_text" id="S3.T2.2.2.4.1" style="background-color:#FFC0CB;">
        85.4
       </span>
      </td>
      <td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T2.2.2.5" style="background-color:#FFFFFF;padding:2.5pt 3.0pt;">
       <span class="ltx_text" id="S3.T2.2.2.5.1" style="background-color:#FFFFFF;">
        55.20
       </span>
      </td>
     </tr>
    </table>
    <figcaption class="ltx_caption">
     <span class="ltx_tag ltx_tag_table">
      Table 2:
     </span>
     Performance comparison between our methods and current SOTA DAIL
     <cite class="ltx_cite ltx_citemacro_cite">
      Gao et¬†al. (
      <a class="ltx_ref" href="#bib.bib11" title="">
       2023
      </a>
      )
     </cite>
     and ablation studies of different components for our method.
IC-Lp refers to the IC-Loop in
     <a class="ltx_ref" href="#S2" title="2 SQL-CRAFT Framework ‚Ä£ SQL-CRAFT: Text-to-SQL through Interactive Refinement and Enhanced Reasoning">
      <span class="ltx_text ltx_ref_tag">
       Section
      </span>
      <span class="ltx_text ltx_ref_tag">
       2
      </span>
     </a>
     .
For a fair comparison, we adopt a 5-shot setting for experiments in this table.
Hypothesis testing (see Appendix
     <a class="ltx_ref" href="#A1.SS2" title="A.2 Significance Test ‚Ä£ Appendix A Appendix ‚Ä£ SQL-CRAFT: Text-to-SQL through Interactive Refinement and Enhanced Reasoning">
      <span class="ltx_text ltx_ref_tag">
       A.2
      </span>
     </a>
     ) supports that the enhancement in the SQL generation capabilities of LLMs by the DB-Copilot framework is significant.
    </figcaption>
   </figure>
   <div class="ltx_para" id="S3.SS0.SSS0.Px1.p1">
    <p class="ltx_p" id="S3.SS0.SSS0.Px1.p1.1">
     <a class="ltx_ref" href="#S3.T2" title="In Overall Results. ‚Ä£ 3 Experiments and Results ‚Ä£ SQL-CRAFT: Text-to-SQL through Interactive Refinement and Enhanced Reasoning">
      <span class="ltx_text ltx_ref_tag">
       Table
      </span>
      <span class="ltx_text ltx_ref_tag">
       2
      </span>
     </a>
     reports the overall results. Both IC-Loop and PoT/CBs improve the execution accuracy across the models and datasets.
Compared to naively using GPT-4 for SQL generation, our framework achieves a maximum of 5.7% and 1.9% improvement on the dev set for Spider and Bird respectively.
Our best results yield an 85.4% and 55.2% performance on the dev set for Spider and Bird respectively, surpassing the state-of-the-art, DAIL (83.1% and 54.76% on Spider and Bird, respectively).
    </p>
   </div>
   <figure class="ltx_figure" id="S3.F2">
    <img alt="Refer to caption" class="ltx_graphics ltx_img_portrait" height="656" id="S3.F2.g1" src="/html/2402.14851/assets/x1.png" width="461"/>
    <figcaption class="ltx_caption">
     <span class="ltx_tag ltx_tag_figure">
      Figure 2:
     </span>
     <math alttext="k" class="ltx_Math" display="inline" id="S3.F2.2.m1.1">
      <semantics id="S3.F2.2.m1.1b">
       <mi id="S3.F2.2.m1.1.1" xref="S3.F2.2.m1.1.1.cmml">
        k
       </mi>
       <annotation-xml encoding="MathML-Content" id="S3.F2.2.m1.1c">
        <ci id="S3.F2.2.m1.1.1.cmml" xref="S3.F2.2.m1.1.1">
         ùëò
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.F2.2.m1.1d">
        k
       </annotation>
      </semantics>
     </math>
     -shots Sensitivity Analysis.
    </figcaption>
   </figure>
  </section>
  <section class="ltx_paragraph" id="S3.SS0.SSS0.Px2">
   <h5 class="ltx_title ltx_title_paragraph">
    Effects of
    <math alttext="k" class="ltx_Math" display="inline" id="S3.SS0.SSS0.Px2.1.m1.1">
     <semantics id="S3.SS0.SSS0.Px2.1.m1.1b">
      <mi id="S3.SS0.SSS0.Px2.1.m1.1.1" xref="S3.SS0.SSS0.Px2.1.m1.1.1.cmml">
       k
      </mi>
      <annotation-xml encoding="MathML-Content" id="S3.SS0.SSS0.Px2.1.m1.1c">
       <ci id="S3.SS0.SSS0.Px2.1.m1.1.1.cmml" xref="S3.SS0.SSS0.Px2.1.m1.1.1">
        ùëò
       </ci>
      </annotation-xml>
      <annotation encoding="application/x-tex" id="S3.SS0.SSS0.Px2.1.m1.1d">
       k
      </annotation>
     </semantics>
    </math>
    in
    <math alttext="k" class="ltx_Math" display="inline" id="S3.SS0.SSS0.Px2.2.m2.1">
     <semantics id="S3.SS0.SSS0.Px2.2.m2.1b">
      <mi id="S3.SS0.SSS0.Px2.2.m2.1.1" xref="S3.SS0.SSS0.Px2.2.m2.1.1.cmml">
       k
      </mi>
      <annotation-xml encoding="MathML-Content" id="S3.SS0.SSS0.Px2.2.m2.1c">
       <ci id="S3.SS0.SSS0.Px2.2.m2.1.1.cmml" xref="S3.SS0.SSS0.Px2.2.m2.1.1">
        ùëò
       </ci>
      </annotation-xml>
      <annotation encoding="application/x-tex" id="S3.SS0.SSS0.Px2.2.m2.1d">
       k
      </annotation>
     </semantics>
    </math>
    -shot.
   </h5>
   <div class="ltx_para" id="S3.SS0.SSS0.Px2.p1">
    <p class="ltx_p" id="S3.SS0.SSS0.Px2.p1.3">
     We test various
     <math alttext="k" class="ltx_Math" display="inline" id="S3.SS0.SSS0.Px2.p1.1.m1.1">
      <semantics id="S3.SS0.SSS0.Px2.p1.1.m1.1a">
       <mi id="S3.SS0.SSS0.Px2.p1.1.m1.1.1" xref="S3.SS0.SSS0.Px2.p1.1.m1.1.1.cmml">
        k
       </mi>
       <annotation-xml encoding="MathML-Content" id="S3.SS0.SSS0.Px2.p1.1.m1.1b">
        <ci id="S3.SS0.SSS0.Px2.p1.1.m1.1.1.cmml" xref="S3.SS0.SSS0.Px2.p1.1.m1.1.1">
         ùëò
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS0.SSS0.Px2.p1.1.m1.1c">
        k
       </annotation>
      </semantics>
     </math>
     on 200 examples from Spider-Dev (easy 26%, medium 36.5%, hard 16%, extra-hard 21.5%).
As shown in Figure
     <a class="ltx_ref" href="#S3.F2" title="Figure 2 ‚Ä£ Overall Results. ‚Ä£ 3 Experiments and Results ‚Ä£ SQL-CRAFT: Text-to-SQL through Interactive Refinement and Enhanced Reasoning">
      <span class="ltx_text ltx_ref_tag">
       2
      </span>
     </a>
     , when integrated with our methods of IC-Loop and PoT, both GPT-3.5 and GPT-4 outperform direct prompting and the DAIL approach consistently across almost all
     <math alttext="k" class="ltx_Math" display="inline" id="S3.SS0.SSS0.Px2.p1.2.m2.1">
      <semantics id="S3.SS0.SSS0.Px2.p1.2.m2.1a">
       <mi id="S3.SS0.SSS0.Px2.p1.2.m2.1.1" xref="S3.SS0.SSS0.Px2.p1.2.m2.1.1.cmml">
        k
       </mi>
       <annotation-xml encoding="MathML-Content" id="S3.SS0.SSS0.Px2.p1.2.m2.1b">
        <ci id="S3.SS0.SSS0.Px2.p1.2.m2.1.1.cmml" xref="S3.SS0.SSS0.Px2.p1.2.m2.1.1">
         ùëò
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS0.SSS0.Px2.p1.2.m2.1c">
        k
       </annotation>
      </semantics>
     </math>
     values.
Moreover, for the less capable model GPT-3.5, both direct prompting and DAIL approaches yield a worse performance at
     <math alttext="k=8,10" class="ltx_Math" display="inline" id="S3.SS0.SSS0.Px2.p1.3.m3.2">
      <semantics id="S3.SS0.SSS0.Px2.p1.3.m3.2a">
       <mrow id="S3.SS0.SSS0.Px2.p1.3.m3.2.3" xref="S3.SS0.SSS0.Px2.p1.3.m3.2.3.cmml">
        <mi id="S3.SS0.SSS0.Px2.p1.3.m3.2.3.2" xref="S3.SS0.SSS0.Px2.p1.3.m3.2.3.2.cmml">
         k
        </mi>
        <mo id="S3.SS0.SSS0.Px2.p1.3.m3.2.3.1" xref="S3.SS0.SSS0.Px2.p1.3.m3.2.3.1.cmml">
         =
        </mo>
        <mrow id="S3.SS0.SSS0.Px2.p1.3.m3.2.3.3.2" xref="S3.SS0.SSS0.Px2.p1.3.m3.2.3.3.1.cmml">
         <mn id="S3.SS0.SSS0.Px2.p1.3.m3.1.1" xref="S3.SS0.SSS0.Px2.p1.3.m3.1.1.cmml">
          8
         </mn>
         <mo id="S3.SS0.SSS0.Px2.p1.3.m3.2.3.3.2.1" xref="S3.SS0.SSS0.Px2.p1.3.m3.2.3.3.1.cmml">
          ,
         </mo>
         <mn id="S3.SS0.SSS0.Px2.p1.3.m3.2.2" xref="S3.SS0.SSS0.Px2.p1.3.m3.2.2.cmml">
          10
         </mn>
        </mrow>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S3.SS0.SSS0.Px2.p1.3.m3.2b">
        <apply id="S3.SS0.SSS0.Px2.p1.3.m3.2.3.cmml" xref="S3.SS0.SSS0.Px2.p1.3.m3.2.3">
         <eq id="S3.SS0.SSS0.Px2.p1.3.m3.2.3.1.cmml" xref="S3.SS0.SSS0.Px2.p1.3.m3.2.3.1">
         </eq>
         <ci id="S3.SS0.SSS0.Px2.p1.3.m3.2.3.2.cmml" xref="S3.SS0.SSS0.Px2.p1.3.m3.2.3.2">
          ùëò
         </ci>
         <list id="S3.SS0.SSS0.Px2.p1.3.m3.2.3.3.1.cmml" xref="S3.SS0.SSS0.Px2.p1.3.m3.2.3.3.2">
          <cn id="S3.SS0.SSS0.Px2.p1.3.m3.1.1.cmml" type="integer" xref="S3.SS0.SSS0.Px2.p1.3.m3.1.1">
           8
          </cn>
          <cn id="S3.SS0.SSS0.Px2.p1.3.m3.2.2.cmml" type="integer" xref="S3.SS0.SSS0.Px2.p1.3.m3.2.2">
           10
          </cn>
         </list>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS0.SSS0.Px2.p1.3.m3.2c">
        k=8,10
       </annotation>
      </semantics>
     </math>
     , potentially due to the model‚Äôs diminished attention over longer input.
In contrast, the performance decay for our method is minimal to none, suggesting our method can effectively enhance LLM‚Äôs reasoning capability even for less capable LLMs.
    </p>
   </div>
  </section>
  <section class="ltx_paragraph" id="S3.SS0.SSS0.Px3">
   <h5 class="ltx_title ltx_title_paragraph">
    Error Analysis
   </h5>
   <div class="ltx_para" id="S3.SS0.SSS0.Px3.p1">
    <p class="ltx_p" id="S3.SS0.SSS0.Px3.p1.1">
     In total, there are 151 examples of Spider dev on which our framework fails to generate the gold SQL.
     <a class="ltx_ref" href="#S3.T3" title="In Error Analysis ‚Ä£ 3 Experiments and Results ‚Ä£ SQL-CRAFT: Text-to-SQL through Interactive Refinement and Enhanced Reasoning">
      <span class="ltx_text ltx_ref_tag">
       Table
      </span>
      <span class="ltx_text ltx_ref_tag">
       3
      </span>
     </a>
     shows the error case distribution for our framework on the dev set of Spider (more cases in
     <a class="ltx_ref" href="#A1.SS3" title="A.3 More Cases ‚Ä£ Appendix A Appendix ‚Ä£ SQL-CRAFT: Text-to-SQL through Interactive Refinement and Enhanced Reasoning">
      <span class="ltx_text ltx_ref_tag">
       Section
      </span>
      <span class="ltx_text ltx_ref_tag">
       A.3
      </span>
     </a>
     ).
    </p>
   </div>
   <figure class="ltx_table" id="S3.T3">
    <table class="ltx_tabular ltx_minipage ltx_align_middle" id="S3.T3.1" style="width:433.6pt;">
     <tr class="ltx_tr" id="S3.T3.1.1">
      <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="S3.T3.1.1.1" style="padding:2.5pt 3.0pt;">
       <span class="ltx_inline-block ltx_align_top" id="S3.T3.1.1.1.1">
        <span class="ltx_p" id="S3.T3.1.1.1.1.1" style="width:42.7pt;">
         Error Type
        </span>
       </span>
      </td>
      <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="S3.T3.1.1.2" style="padding:2.5pt 3.0pt;">
       <span class="ltx_inline-block ltx_align_top" id="S3.T3.1.1.2.1">
        <span class="ltx_p" id="S3.T3.1.1.2.1.1" style="width:213.4pt;">
         Question, Gold &amp; Prediction
        </span>
       </span>
      </td>
      <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="S3.T3.1.1.3" style="padding:2.5pt 3.0pt;">
       <span class="ltx_inline-block ltx_align_top" id="S3.T3.1.1.3.1">
        <span class="ltx_p" id="S3.T3.1.1.3.1.1" style="width:170.7pt;">
         Explanation
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="S3.T3.1.2">
      <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="S3.T3.1.2.1" style="padding:2.5pt 3.0pt;">
       <span class="ltx_inline-block ltx_align_top" id="S3.T3.1.2.1.1">
        <span class="ltx_p" id="S3.T3.1.2.1.1.1" style="width:42.7pt;">
         <br class="ltx_break ltx_align_left"/>
         <br class="ltx_break ltx_align_left"/>
         <br class="ltx_break ltx_align_left"/>
         Gold Error (30.5%)
         <br class="ltx_break ltx_align_left"/>
        </span>
       </span>
      </td>
      <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="S3.T3.1.2.2" style="padding:2.5pt 3.0pt;">
       <span class="ltx_inline-block ltx_align_top" id="S3.T3.1.2.2.1">
        <span class="ltx_p" id="S3.T3.1.2.2.1.1" style="width:213.4pt;">
         <span class="ltx_text ltx_font_bold" id="S3.T3.1.2.2.1.1.1">
          Q:
         </span>
         What are the Asian countries which have a population larger than that of any country in Africa?
         <br class="ltx_break ltx_align_left"/>
         <span class="ltx_text ltx_align_left ltx_font_bold" id="S3.T3.1.2.2.1.1.2">
          Gold:
         </span>
         <span class="ltx_text ltx_align_left ltx_font_typewriter" id="S3.T3.1.2.2.1.1.3">
          SELECT Name FROM country WHERE Continent = "Asia" AND population &gt; (SELECT
          <span class="ltx_text" id="S3.T3.1.2.2.1.1.3.1" style="background-color:#FFC0CB;">
           min(population)
          </span>
          FROM country WHERE Continent = "Africa")
         </span>
         <br class="ltx_break ltx_align_left"/>
         <span class="ltx_text ltx_align_left ltx_font_bold" id="S3.T3.1.2.2.1.1.4">
          Pred:
         </span>
         <span class="ltx_text ltx_align_left ltx_font_typewriter" id="S3.T3.1.2.2.1.1.5">
          SELECT Name FROM country WHERE Continent = "Asia" AND population &gt; (SELECT
          <span class="ltx_text" id="S3.T3.1.2.2.1.1.5.1" style="background-color:#99FF99;">
           max(population)
          </span>
          FROM country WHERE Continent = "Africa")
         </span>
        </span>
       </span>
      </td>
      <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="S3.T3.1.2.3" style="padding:2.5pt 3.0pt;">
       <span class="ltx_inline-block ltx_align_top" id="S3.T3.1.2.3.1">
        <span class="ltx_p" id="S3.T3.1.2.3.1.1" style="width:170.7pt;">
         Only countries with a population larger than the largest in Africa can be called ‚Äúhave larger population than any country in Africa‚Äù. Therefore, employing the term
         <span class="ltx_text ltx_align_left ltx_font_typewriter" id="S3.T3.1.2.3.1.1.1">
          ... &gt; (SELECT max(population) ...
         </span>
         is correct, whereas the Gold is erroneous.
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="S3.T3.1.3">
      <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T3.1.3.1" style="padding:2.5pt 3.0pt;">
       <span class="ltx_inline-block ltx_align_top" id="S3.T3.1.3.1.1">
        <span class="ltx_p" id="S3.T3.1.3.1.1.1" style="width:42.7pt;">
         <br class="ltx_break ltx_align_left"/>
         <br class="ltx_break ltx_align_left"/>
         Logic
         <br class="ltx_break ltx_align_left"/>
         (29.8%)
         <br class="ltx_break ltx_align_left"/>
        </span>
       </span>
      </td>
      <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T3.1.3.2" style="padding:2.5pt 3.0pt;">
       <span class="ltx_inline-block ltx_align_top" id="S3.T3.1.3.2.1">
        <span class="ltx_p" id="S3.T3.1.3.2.1.1" style="width:213.4pt;">
         <span class="ltx_text ltx_font_bold" id="S3.T3.1.3.2.1.1.1">
          Q:
         </span>
         How many owners temporarily do not have any dogs?
         <br class="ltx_break ltx_align_left"/>
         <span class="ltx_text ltx_align_left ltx_font_bold" id="S3.T3.1.3.2.1.1.2">
          Gold:
         </span>
         <span class="ltx_text ltx_align_left ltx_font_typewriter" id="S3.T3.1.3.2.1.1.3">
          SELECT count(*) FROM Owners WHERE owner_id NOT IN (SELECT owner_id FROM Dogs)
         </span>
         <br class="ltx_break ltx_align_left"/>
         <span class="ltx_text ltx_align_left ltx_font_bold" id="S3.T3.1.3.2.1.1.4">
          Pred:
         </span>
         <span class="ltx_text ltx_align_left ltx_font_typewriter" id="S3.T3.1.3.2.1.1.5">
          SELECT (SELECT COUNT(DISTINCT owner_id) FROM Owners) - (SELECT COUNT(DISTINCT owner_id) FROM Dogs WHERE date_departed IS NULL)
         </span>
        </span>
       </span>
      </td>
      <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T3.1.3.3" style="padding:2.5pt 3.0pt;">
       <span class="ltx_inline-block ltx_align_top" id="S3.T3.1.3.3.1">
        <span class="ltx_p" id="S3.T3.1.3.3.1.1" style="width:170.7pt;">
         The predicted SQL wrongly assumes that all owners have had dogs by attempting to subtract the number of current dog owners from the total owners.
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="S3.T3.1.4">
      <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T3.1.4.1" style="padding:2.5pt 3.0pt;">
       <span class="ltx_inline-block ltx_align_top" id="S3.T3.1.4.1.1">
        <span class="ltx_p" id="S3.T3.1.4.1.1.1" style="width:42.7pt;">
         <br class="ltx_break ltx_align_left"/>
         Ambiguity (13.2%)
        </span>
       </span>
      </td>
      <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T3.1.4.2" style="padding:2.5pt 3.0pt;">
       <span class="ltx_inline-block ltx_align_top" id="S3.T3.1.4.2.1">
        <span class="ltx_p" id="S3.T3.1.4.2.1.1" style="width:213.4pt;">
         <span class="ltx_text ltx_font_bold" id="S3.T3.1.4.2.1.1.1">
          Q:
         </span>
         What are the names of all makers with more than 3 models?
         <br class="ltx_break ltx_align_left"/>
         <span class="ltx_text ltx_align_left ltx_font_bold" id="S3.T3.1.4.2.1.1.2">
          Gold:
         </span>
         <span class="ltx_text ltx_align_left ltx_font_typewriter" id="S3.T3.1.4.2.1.1.3">
          SELECT
          <span class="ltx_text" id="S3.T3.1.4.2.1.1.3.1" style="background-color:#99FF99;">
           T1.FullName
          </span>
          ... HAVING count(*) &gt; 3;
         </span>
         <br class="ltx_break ltx_align_left"/>
         <span class="ltx_text ltx_align_left ltx_font_bold" id="S3.T3.1.4.2.1.1.4">
          Pred:
         </span>
         <span class="ltx_text ltx_align_left ltx_font_typewriter" id="S3.T3.1.4.2.1.1.5">
          SELECT
          <span class="ltx_text" id="S3.T3.1.4.2.1.1.5.1" style="background-color:#FFC0CB;">
           T1.Maker
          </span>
          ... HAVING count(*) &gt; 3;
         </span>
        </span>
       </span>
      </td>
      <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T3.1.4.3" style="padding:2.5pt 3.0pt;">
       <span class="ltx_inline-block ltx_align_top" id="S3.T3.1.4.3.1">
        <span class="ltx_p" id="S3.T3.1.4.3.1.1" style="width:170.7pt;">
         Previous studies have shown that multiple correct answers can coexist across various NLP tasks
         <cite class="ltx_cite ltx_align_left ltx_citemacro_cite">
          Plank (
          <a class="ltx_ref" href="#bib.bib18" title="">
           2022
          </a>
          ); Deng et¬†al. (
          <a class="ltx_ref" href="#bib.bib8" title="">
           2023
          </a>
          )
         </cite>
         . In this case, both ‚ÄúFullName‚Äù and ‚ÄúMaker‚Äù columns can represent the ‚Äúname of makers‚Äù in the question, therefore both gold and model-generated SQL are correct.
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="S3.T3.1.5">
      <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T3.1.5.1" style="padding:2.5pt 3.0pt;">
       <span class="ltx_inline-block ltx_align_top" id="S3.T3.1.5.1.1">
        <span class="ltx_p" id="S3.T3.1.5.1.1.1" style="width:42.7pt;">
         <br class="ltx_break ltx_align_left"/>
         Imprecise (11.3%)
        </span>
       </span>
      </td>
      <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T3.1.5.2" style="padding:2.5pt 3.0pt;">
       <span class="ltx_inline-block ltx_align_top" id="S3.T3.1.5.2.1">
        <span class="ltx_p" id="S3.T3.1.5.2.1.1" style="width:213.4pt;">
         <span class="ltx_text ltx_font_bold" id="S3.T3.1.5.2.1.1.1">
          Q:
         </span>
         What are the arriving date of the dogs who have gone through a treatment?
         <br class="ltx_break ltx_align_left"/>
         <span class="ltx_text ltx_align_left ltx_font_bold" id="S3.T3.1.5.2.1.1.2">
          Gold:
         </span>
         <span class="ltx_text ltx_align_left ltx_font_typewriter" id="S3.T3.1.5.2.1.1.3">
          SELECT T1.date_arrived, FROM ...
         </span>
         <br class="ltx_break ltx_align_left"/>
         <span class="ltx_text ltx_align_left ltx_font_bold" id="S3.T3.1.5.2.1.1.4">
          Pred:
         </span>
         <span class="ltx_text ltx_align_left ltx_font_typewriter" id="S3.T3.1.5.2.1.1.5">
          SELECT T1.date_arrived,
          <span class="ltx_text" id="S3.T3.1.5.2.1.1.5.1" style="background-color:#FFC0CB;">
           T1.Name
          </span>
          FROM ...
         </span>
        </span>
       </span>
      </td>
      <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T3.1.5.3" style="padding:2.5pt 3.0pt;">
       <span class="ltx_inline-block ltx_align_top" id="S3.T3.1.5.3.1">
        <span class="ltx_p" id="S3.T3.1.5.3.1.1" style="width:170.7pt;">
         The predicted SQL selects the ‚ÄúName‚Äù column, which is not asked by the question.
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="S3.T3.1.6">
      <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T3.1.6.1" style="padding:2.5pt 3.0pt;">
       <span class="ltx_inline-block ltx_align_top" id="S3.T3.1.6.1.1">
        <span class="ltx_p" id="S3.T3.1.6.1.1.1" style="width:42.7pt;">
         <br class="ltx_break ltx_align_left"/>
         DB Value (10.6%)
        </span>
       </span>
      </td>
      <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T3.1.6.2" style="padding:2.5pt 3.0pt;">
       <span class="ltx_inline-block ltx_align_top" id="S3.T3.1.6.2.1">
        <span class="ltx_p" id="S3.T3.1.6.2.1.1" style="width:213.4pt;">
         <span class="ltx_text ltx_font_bold" id="S3.T3.1.6.2.1.1.1">
          Q:
         </span>
         Which city and country is the Alton airport at?
         <br class="ltx_break ltx_align_left"/>
         <span class="ltx_text ltx_align_left ltx_font_bold" id="S3.T3.1.6.2.1.1.2">
          Gold:
         </span>
         <span class="ltx_text ltx_align_left ltx_font_typewriter" id="S3.T3.1.6.2.1.1.3">
          SELECT ... WHERE AirportName
          <span class="ltx_text" id="S3.T3.1.6.2.1.1.3.1" style="background-color:#99FF99;">
           = "Alton"
          </span>
          ;
         </span>
         <br class="ltx_break ltx_align_left"/>
         <span class="ltx_text ltx_align_left ltx_font_bold" id="S3.T3.1.6.2.1.1.4">
          Pred:
         </span>
         <span class="ltx_text ltx_align_left ltx_font_typewriter" id="S3.T3.1.6.2.1.1.5">
          SELECT ... WHERE AirportName
          <span class="ltx_text" id="S3.T3.1.6.2.1.1.5.1" style="background-color:#FFC0CB;">
           LIKE "%Alton%"
          </span>
          ;
         </span>
        </span>
       </span>
      </td>
      <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T3.1.6.3" style="padding:2.5pt 3.0pt;">
       <span class="ltx_inline-block ltx_align_top" id="S3.T3.1.6.3.1">
        <span class="ltx_p" id="S3.T3.1.6.3.1.1" style="width:170.7pt;">
         After checking the database values in IC-Loop, the model notices that there is an space for the value ‚ÄúAlton‚Äù in the database. Since the Gold SQL query employs an exact match (
         <span class="ltx_text ltx_align_left ltx_font_typewriter ltx_align_center" id="S3.T3.1.6.3.1.1.1">
          ="Alton"
         </span>
         ), it cannot retrieve the corresponding data. In contrast, our framework takes such nuanced differences into consideration and uses the
         <span class="ltx_text ltx_align_left ltx_font_typewriter ltx_align_center" id="S3.T3.1.6.3.1.1.2">
          LIKE
         </span>
         clause for a fuzzy match on ‚ÄúAlton‚Äù.
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="S3.T3.1.7">
      <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_t" colspan="2" id="S3.T3.1.7.1" style="padding:2.5pt 3.0pt;">
       Others (4.6%): other errors that we cannot categorize into the above types.
      </td>
      <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_t" id="S3.T3.1.7.2" style="padding:2.5pt 3.0pt;">
      </td>
     </tr>
    </table>
    <figcaption class="ltx_caption">
     <span class="ltx_tag ltx_tag_table">
      Table 3:
     </span>
     Error Analysis of SQL-CRAFT on Spider.
    </figcaption>
   </figure>
   <div class="ltx_para" id="S3.SS0.SSS0.Px3.p2">
    <p class="ltx_p" id="S3.SS0.SSS0.Px3.p2.1">
     Some errors do not stem from our framework‚Äôs inability to accurately predict SQL, but rather from
     <span class="ltx_text ltx_font_italic" id="S3.SS0.SSS0.Px3.p2.1.1">
      the incorrect gold answer, question ambiguity, or the database setup
     </span>
     .
Among the 151 examples, 30.5% are due to annotation errors (4.5% of all the examples in Spider dev).
     <a class="ltx_ref" href="#A1.SS3.SSS1" title="A.3.1 Spider Error Cases ‚Ä£ A.3 More Cases ‚Ä£ Appendix A Appendix ‚Ä£ SQL-CRAFT: Text-to-SQL through Interactive Refinement and Enhanced Reasoning">
      <span class="ltx_text ltx_ref_tag">
       Section
      </span>
      <span class="ltx_text ltx_ref_tag">
       A.3.1
      </span>
     </a>
     shows an example where the gold SQL fails to answer the question.
We catalog the instances with incorrect gold SQL, correct the errors, and share the details.
     <span class="ltx_note ltx_role_footnote" id="footnote8">
      <sup class="ltx_note_mark">
       8
      </sup>
      <span class="ltx_note_outer">
       <span class="ltx_note_content">
        <sup class="ltx_note_mark">
         8
        </sup>
        <span class="ltx_tag ltx_tag_note">
         8
        </span>
        drive.google.com/file/d/1J7x0yVANpsX3wPDsfbrDQJexv-L4Mt6y/view?usp=sharing
       </span>
      </span>
     </span>
     Our findings indicate that the existing evaluation protocols for text-to-SQL generation may not authentically capture the capabilities of these sophisticated models.
Therefore, we advocate for a reassessment and enhancement of text-to-SQL evaluation methods.
    </p>
   </div>
   <div class="ltx_para" id="S3.SS0.SSS0.Px3.p3">
    <p class="ltx_p" id="S3.SS0.SSS0.Px3.p3.1">
     Apart from the aforementioned errors, other errors can be attributed to the
     <span class="ltx_text ltx_font_italic" id="S3.SS0.SSS0.Px3.p3.1.1">
      limitations of the model in accurately interpreting or processing the given information
     </span>
     .
Such an error reveals that even sophisticated LLMs, such as GPT-4, still struggle with precise interpretation and alignment to the specific requirements of the question.
We provide error analysis on Bird in
     <a class="ltx_ref" href="#A1.SS3.SSS2" title="A.3.2 BIRD Error Cases ‚Ä£ A.3 More Cases ‚Ä£ Appendix A Appendix ‚Ä£ SQL-CRAFT: Text-to-SQL through Interactive Refinement and Enhanced Reasoning">
      <span class="ltx_text ltx_ref_tag">
       Section
      </span>
      <span class="ltx_text ltx_ref_tag">
       A.3.2
      </span>
     </a>
     .
    </p>
   </div>
  </section>
 </section>
 <section class="ltx_section" id="S4">
  <h2 class="ltx_title ltx_title_section">
   <span class="ltx_tag ltx_tag_section">
    4
   </span>
   Conclusion
  </h2>
  <div class="ltx_para" id="S4.p1">
   <p class="ltx_p" id="S4.p1.1">
    We propose SQL-CRAFT, a framework involving interactive refinement and Python-enhanced reasoning that improves SQL generation accuracy for LLMs.
SQL-CRAFT demonstrates an improvement of 5.7% on Spider and 1.9% on Bird compared to the naive prompting method.
Moreover, SQL-CRAFT surpasses the state-of-the-art strategies on Spider.
We conduct a comprehensive error analysis and observe that there are issues with the current text-to-SQL evaluation.
Therefore, we call for attention from our community to develop a better text-to-SQL evaluation protocol that can capture nuances in SQL generation and authentically reflect the model performance.
   </p>
  </div>
 </section>
 <section class="ltx_section" id="S5">
  <h2 class="ltx_title ltx_title_section">
   <span class="ltx_tag ltx_tag_section">
    5
   </span>
   Ethical Statements and Limitations
  </h2>
  <div class="ltx_para" id="S5.p1">
   <p class="ltx_p" id="S5.p1.1">
    Strategies we propose are aim to improve the SQL generation capabilities of LLMs, with some of its concepts, possibly applicable to general language model tasks. There are some potential societal consequences of our work, none that we feel must be specifically highlighted here.
   </p>
  </div>
  <div class="ltx_para" id="S5.p2">
   <p class="ltx_p" id="S5.p2.1">
    In industrial application scenarios, SQL generation is often more complex and demands higher accuracy. The research of Text-to-SQL still has a long way to go before it becomes practically valuable. During the process of conducting case studies, we encounter some unpredictable output results, which might be related to the hallucination of LLMs.
   </p>
  </div>
 </section>
 <section class="ltx_bibliography" id="bib">
  <h2 class="ltx_title ltx_title_bibliography">
   References
  </h2>
  <ul class="ltx_biblist">
   <li class="ltx_bibitem" id="bib.bib1">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Anil et¬†al. (2023)
    </span>
    <span class="ltx_bibblock">
     Rohan Anil, Andrew¬†M Dai, Orhan Firat, Melvin Johnson, Dmitry Lepikhin, Alexandre Passos, Siamak Shakeri, Emanuel Taropa, Paige Bailey, Zhifeng Chen, et¬†al. 2023.
    </span>
    <span class="ltx_bibblock">
     Palm 2 technical report.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib1.1.1">
      arXiv preprint arXiv:2305.10403
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib2">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Brown et¬†al. (2020)
    </span>
    <span class="ltx_bibblock">
     Tom Brown, Benjamin Mann, Nick Ryder, Melanie Subbiah, Jared¬†D Kaplan, Prafulla Dhariwal, Arvind Neelakantan, Pranav Shyam, Girish Sastry, Amanda Askell, et¬†al. 2020.
    </span>
    <span class="ltx_bibblock">
     Language models are few-shot learners.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib2.1.1">
      Advances in neural information processing systems
     </em>
     , 33:1877‚Äì1901.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib3">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Cao et¬†al. (2021)
    </span>
    <span class="ltx_bibblock">
     Ruisheng Cao, Lu¬†Chen, Zhi Chen, Yanbin Zhao, Su¬†Zhu, and Kai Yu. 2021.
    </span>
    <span class="ltx_bibblock">
     Lgesql: line graph enhanced text-to-sql model with mixed local and non-local relations.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib3.1.1">
      arXiv preprint arXiv:2106.01093
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib4">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Chen et¬†al. (2022)
    </span>
    <span class="ltx_bibblock">
     Mingda Chen, Jingfei Du, Ramakanth Pasunuru, Todor Mihaylov, Srini Iyer, Veselin Stoyanov, and Zornitsa Kozareva. 2022.
    </span>
    <span class="ltx_bibblock">
     Improving in-context few-shot learning via self-supervised training.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib4.1.1">
      arXiv preprint arXiv:2205.01703
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib5">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Chen et¬†al. (2023a)
    </span>
    <span class="ltx_bibblock">
     Wenhu Chen, Xueguang Ma, Xinyi Wang, and William¬†W. Cohen. 2023a.
    </span>
    <span class="ltx_bibblock">
     Program of thoughts prompting: Disentangling computation from reasoning for numerical reasoning tasks.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib5.1.1">
      Transactions on Machine Learning Research
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib6">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Chen et¬†al. (2023b)
    </span>
    <span class="ltx_bibblock">
     Zui Chen, Lei Cao, Sam Madden, Tim Kraska, Zeyuan Shang, Ju¬†Fan, Nan Tang, Zihui Gu, Chunwei Liu, and Michael Cafarella. 2023b.
    </span>
    <span class="ltx_bibblock">
     Seed: Domain-specific data curation with large language models.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib6.1.1">
      arXiv e-prints
     </em>
     , pages arXiv‚Äì2310.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib7">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Clark et¬†al. (2020)
    </span>
    <span class="ltx_bibblock">
     Kevin Clark, Minh-Thang Luong, Quoc¬†V Le, and Christopher¬†D Manning. 2020.
    </span>
    <span class="ltx_bibblock">
     Electra: Pre-training text encoders as discriminators rather than generators.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib7.1.1">
      arXiv preprint arXiv:2003.10555
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib8">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Deng et¬†al. (2023)
    </span>
    <span class="ltx_bibblock">
     Naihao Deng, Xinliang Zhang, Siyang Liu, Winston Wu, Lu¬†Wang, and Rada Mihalcea. 2023.
    </span>
    <span class="ltx_bibblock">
     <a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2023.findings-emnlp.832" target="_blank" title="">
      You are what you annotate: Towards better models through annotator representations
     </a>
     .
    </span>
    <span class="ltx_bibblock">
     In
     <em class="ltx_emph ltx_font_italic" id="bib.bib8.1.1">
      Findings of the Association for Computational Linguistics: EMNLP 2023
     </em>
     , pages 12475‚Äì12498, Singapore. Association for Computational Linguistics.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib9">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Devlin et¬†al. (2018)
    </span>
    <span class="ltx_bibblock">
     Jacob Devlin, Ming-Wei Chang, Kenton Lee, and Kristina Toutanova. 2018.
    </span>
    <span class="ltx_bibblock">
     Bert: Pre-training of deep bidirectional transformers for language understanding.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib9.1.1">
      arXiv preprint arXiv:1810.04805
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib10">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Dong et¬†al. (2023)
    </span>
    <span class="ltx_bibblock">
     Xuemei Dong, Chao Zhang, Yuhang Ge, Yuren Mao, Yunjun Gao, Jinshu Lin, Dongfang Lou, et¬†al. 2023.
    </span>
    <span class="ltx_bibblock">
     C3: Zero-shot text-to-sql with chatgpt.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib10.1.1">
      arXiv preprint arXiv:2307.07306
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib11">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Gao et¬†al. (2023)
    </span>
    <span class="ltx_bibblock">
     Dawei Gao, Haibin Wang, Yaliang Li, Xiuyu Sun, Yichen Qian, Bolin Ding, and Jingren Zhou. 2023.
    </span>
    <span class="ltx_bibblock">
     Text-to-sql empowered by large language models: A benchmark evaluation.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib11.1.1">
      arXiv preprint arXiv:2308.15363
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib12">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Lewis et¬†al. (2019)
    </span>
    <span class="ltx_bibblock">
     Mike Lewis, Yinhan Liu, Naman Goyal, Marjan Ghazvininejad, Abdelrahman Mohamed, Omer Levy, Ves Stoyanov, and Luke Zettlemoyer. 2019.
    </span>
    <span class="ltx_bibblock">
     Bart: Denoising sequence-to-sequence pre-training for natural language generation, translation, and comprehension.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib12.1.1">
      arXiv preprint arXiv:1910.13461
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib13">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Li et¬†al. (2023a)
    </span>
    <span class="ltx_bibblock">
     Haoyang Li, Jing Zhang, Cuiping Li, and Hong Chen. 2023a.
    </span>
    <span class="ltx_bibblock">
     Resdsql: Decoupling schema linking and skeleton parsing for text-to-sql.
    </span>
    <span class="ltx_bibblock">
     In
     <em class="ltx_emph ltx_font_italic" id="bib.bib13.1.1">
      Proceedings of the AAAI Conference on Artificial Intelligence
     </em>
     , volume¬†37, pages 13067‚Äì13075.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib14">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Li et¬†al. (2023b)
    </span>
    <span class="ltx_bibblock">
     Jinyang Li, Binyuan Hui, Ge¬†Qu, Binhua Li, Jiaxi Yang, Bowen Li, Bailin Wang, Bowen Qin, Rongyu Cao, Ruiying Geng, et¬†al. 2023b.
    </span>
    <span class="ltx_bibblock">
     Can llm already serve as a database interface.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib14.1.1">
      A big bench for large-scale database grounded text-to-sqls. CoRR abs/2305.03111
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib15">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Liu and Liu (2021)
    </span>
    <span class="ltx_bibblock">
     Yixin Liu and Pengfei Liu. 2021.
    </span>
    <span class="ltx_bibblock">
     Simcls: A simple framework for contrastive learning of abstractive summarization.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib15.1.1">
      arXiv preprint arXiv:2106.01890
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib16">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Mann and Whitney (1947)
    </span>
    <span class="ltx_bibblock">
     Henry¬†B Mann and Donald¬†R Whitney. 1947.
    </span>
    <span class="ltx_bibblock">
     On a test of whether one of two random variables is stochastically larger than the other.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib16.1.1">
      The annals of mathematical statistics
     </em>
     , pages 50‚Äì60.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib17">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     OpenAI (2023)
    </span>
    <span class="ltx_bibblock">
     R¬†OpenAI. 2023.
    </span>
    <span class="ltx_bibblock">
     Gpt-4 technical report.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib17.1.1">
      arXiv
     </em>
     , pages 2303‚Äì08774.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib18">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Plank (2022)
    </span>
    <span class="ltx_bibblock">
     Barbara Plank. 2022.
    </span>
    <span class="ltx_bibblock">
     <a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2022.emnlp-main.731" target="_blank" title="">
      The ‚Äúproblem‚Äù of human label variation: On ground truth in data, modeling and evaluation
     </a>
     .
    </span>
    <span class="ltx_bibblock">
     In
     <em class="ltx_emph ltx_font_italic" id="bib.bib18.1.1">
      Proceedings of the 2022 Conference on Empirical Methods in Natural Language Processing
     </em>
     , pages 10671‚Äì10682, Abu Dhabi, United Arab Emirates. Association for Computational Linguistics.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib19">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Pourreza and Rafiei (2023)
    </span>
    <span class="ltx_bibblock">
     Mohammadreza Pourreza and Davood Rafiei. 2023.
    </span>
    <span class="ltx_bibblock">
     Din-sql: Decomposed in-context learning of text-to-sql with self-correction.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib19.1.1">
      arXiv preprint arXiv:2304.11015
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib20">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Qi et¬†al. (2022)
    </span>
    <span class="ltx_bibblock">
     Jiexing Qi, Jingyao Tang, Ziwei He, Xiangpeng Wan, Yu¬†Cheng, Chenghu Zhou, Xinbing Wang, Quanshi Zhang, and Zhouhan Lin. 2022.
    </span>
    <span class="ltx_bibblock">
     Rasat: Integrating relational structures into pretrained seq2seq model for text-to-sql.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib20.1.1">
      arXiv preprint arXiv:2205.06983
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib21">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Raffel et¬†al. (2020)
    </span>
    <span class="ltx_bibblock">
     Colin Raffel, Noam Shazeer, Adam Roberts, Katherine Lee, Sharan Narang, Michael Matena, Yanqi Zhou, Wei Li, and Peter¬†J Liu. 2020.
    </span>
    <span class="ltx_bibblock">
     Exploring the limits of transfer learning with a unified text-to-text transformer.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib21.1.1">
      The Journal of Machine Learning Research
     </em>
     , 21(1):5485‚Äì5551.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib22">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Scholak et¬†al. (2021)
    </span>
    <span class="ltx_bibblock">
     Torsten Scholak, Nathan Schucher, and Dzmitry Bahdanau. 2021.
    </span>
    <span class="ltx_bibblock">
     Picard: Parsing incrementally for constrained auto-regressive decoding from language models.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib22.1.1">
      arXiv preprint arXiv:2109.05093
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib23">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Touvron et¬†al. (2023)
    </span>
    <span class="ltx_bibblock">
     Hugo Touvron, Louis Martin, Kevin Stone, Peter Albert, Amjad Almahairi, Yasmine Babaei, Nikolay Bashlykov, Soumya Batra, Prajjwal Bhargava, Shruti Bhosale, et¬†al. 2023.
    </span>
    <span class="ltx_bibblock">
     Llama 2: Open foundation and fine-tuned chat models.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib23.1.1">
      arXiv preprint arXiv:2307.09288
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib24">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Wang et¬†al. (2019)
    </span>
    <span class="ltx_bibblock">
     Bailin Wang, Richard Shin, Xiaodong Liu, Oleksandr Polozov, and Matthew Richardson. 2019.
    </span>
    <span class="ltx_bibblock">
     Rat-sql: Relation-aware schema encoding and linking for text-to-sql parsers.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib24.1.1">
      arXiv preprint arXiv:1911.04942
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib25">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Wang et¬†al. (2022)
    </span>
    <span class="ltx_bibblock">
     Xuezhi Wang, Jason Wei, Dale Schuurmans, Quoc Le, Ed¬†Chi, Sharan Narang, Aakanksha Chowdhery, and Denny Zhou. 2022.
    </span>
    <span class="ltx_bibblock">
     Self-consistency improves chain of thought reasoning in language models.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib25.1.1">
      arXiv preprint arXiv:2203.11171
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib26">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Wei et¬†al. (2022)
    </span>
    <span class="ltx_bibblock">
     Jason Wei, Xuezhi Wang, Dale Schuurmans, Maarten Bosma, Fei Xia, Ed¬†Chi, Quoc¬†V Le, Denny Zhou, et¬†al. 2022.
    </span>
    <span class="ltx_bibblock">
     Chain-of-thought prompting elicits reasoning in large language models.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib26.1.1">
      Advances in Neural Information Processing Systems
     </em>
     , 35:24824‚Äì24837.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib27">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Yao et¬†al. (2023)
    </span>
    <span class="ltx_bibblock">
     Shunyu Yao, Dian Yu, Jeffrey Zhao, Izhak Shafran, Thomas¬†L Griffiths, Yuan Cao, and Karthik Narasimhan. 2023.
    </span>
    <span class="ltx_bibblock">
     Tree of thoughts: Deliberate problem solving with large language models.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib27.1.1">
      arXiv preprint arXiv:2305.10601
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib28">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Yu et¬†al. (2018)
    </span>
    <span class="ltx_bibblock">
     Tao Yu, Rui Zhang, Kai Yang, Michihiro Yasunaga, Dongxu Wang, Zifan Li, James Ma, Irene Li, Qingning Yao, Shanelle Roman, et¬†al. 2018.
    </span>
    <span class="ltx_bibblock">
     Spider: A large-scale human-labeled dataset for complex and cross-domain semantic parsing and text-to-sql task.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib28.1.1">
      arXiv preprint arXiv:1809.08887
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib29">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Zhong et¬†al. (2020)
    </span>
    <span class="ltx_bibblock">
     Ruiqi Zhong, Tao Yu, and Dan Klein. 2020.
    </span>
    <span class="ltx_bibblock">
     Semantic evaluation for text-to-sql with distilled test suites.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib29.1.1">
      arXiv preprint arXiv:2010.02840
     </em>
     .
    </span>
   </li>
  </ul>
 </section>
 <section class="ltx_appendix" id="A1">
  <h2 class="ltx_title ltx_title_appendix">
   <span class="ltx_tag ltx_tag_appendix">
    Appendix A
   </span>
   Appendix
  </h2>
  <section class="ltx_subsection" id="A1.SS1">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     A.1
    </span>
    Additional Relevant Work
   </h3>
   <div class="ltx_para" id="A1.SS1.p1">
    <p class="ltx_p" id="A1.SS1.p1.1">
     In addition to the related work highlighted in the introduction, there is other relevant work discussed below. In the past year, LLMs have made breakthroughs in many fields, recent advancements in NL2SQL conversion have been significantly influenced by LLMs such as GPT variants.
     <cite class="ltx_cite ltx_citemacro_citet">
      Pourreza and Rafiei (
      <a class="ltx_ref" href="#bib.bib19" title="">
       2023
      </a>
      )
     </cite>
     (2023) propose DIN-SQL, a method that employs GPT-4 in a few-shot learning paradigm, demonstrating notable performance in NL2SQL tasks.
     <cite class="ltx_cite ltx_citemacro_citet">
      Dong et¬†al. (
      <a class="ltx_ref" href="#bib.bib10" title="">
       2023
      </a>
      )
     </cite>
     introduce C3, a ChatGPT-based zero-shot NL2SQL method, which emphasizes clear prompting, calibration with hints, and consistent output to improve execution accuracy.
     <cite class="ltx_cite ltx_citemacro_citet">
      Gao et¬†al. (
      <a class="ltx_ref" href="#bib.bib11" title="">
       2023
      </a>
      )
     </cite>
     further explore the efficiency and effectiveness of LLMs in NL2SQL through their work DAIL-SQL, offering a comprehensive evaluation of various prompt engineering strategies. They demonstrate that DAIL-SQL, when equipped with GPT-4, achieves superior execution accuracy and token efficiency, making it a practical solution for real-world applications. Some recent works applied prompting method and the principle of consistency
     <cite class="ltx_cite ltx_citemacro_cite">
      Wang et¬†al. (
      <a class="ltx_ref" href="#bib.bib25" title="">
       2022
      </a>
      )
     </cite>
     to enhance the reasoning ability of LLMs through In-Context Learning, such as Chain-of-Thoughts(CoT)
     <cite class="ltx_cite ltx_citemacro_cite">
      Wei et¬†al. (
      <a class="ltx_ref" href="#bib.bib26" title="">
       2022
      </a>
      )
     </cite>
     and Tree-of-Thoughts(ToT)
     <cite class="ltx_cite ltx_citemacro_cite">
      Yao et¬†al. (
      <a class="ltx_ref" href="#bib.bib27" title="">
       2023
      </a>
      )
     </cite>
     .
     <cite class="ltx_cite ltx_citemacro_citet">
      Chen et¬†al. (
      <a class="ltx_ref" href="#bib.bib5" title="">
       2023a
      </a>
      )
     </cite>
     proposed the use of Python code to assist LLMs in reasoning called Program of Thoughts (PoT), achieving results that surpass CoT on math problems.
    </p>
   </div>
   <div class="ltx_para" id="A1.SS1.p2">
    <p class="ltx_p" id="A1.SS1.p2.1">
     Recent studies indicate that Language Models can learn from a few examples given in the context, known as in-context learning
     <cite class="ltx_cite ltx_citemacro_cite">
      Brown et¬†al. (
      <a class="ltx_ref" href="#bib.bib2" title="">
       2020
      </a>
      ); Chen et¬†al. (
      <a class="ltx_ref" href="#bib.bib4" title="">
       2022
      </a>
      ); Liu and Liu (
      <a class="ltx_ref" href="#bib.bib15" title="">
       2021
      </a>
      )
     </cite>
     . These works suggest that context learning can effectively enable LMs to perform a range of complex tasks. Therefore, considering the complexity of the NL2SQL task, context learning can be employed to guide LMs to better generate SQL queries.
    </p>
   </div>
   <div class="ltx_para" id="A1.SS1.p3">
    <p class="ltx_p" id="A1.SS1.p3.1">
     In addition to leveraging the in-context learning capabilities of LLMs, numerous studies have applied Pre-trained Language Models (PLMs) to the NL2SQL task, as the extensive pre-training on large textual corpora enables PLMs to better model the semantic relationship between user questions and database schemas. Overall, the PLMs used in these works mainly fall into two categories: encoder-only PLMs (such as BERT
     <cite class="ltx_cite ltx_citemacro_cite">
      Devlin et¬†al. (
      <a class="ltx_ref" href="#bib.bib9" title="">
       2018
      </a>
      )
     </cite>
     , ELECTRA
     <cite class="ltx_cite ltx_citemacro_cite">
      Clark et¬†al. (
      <a class="ltx_ref" href="#bib.bib7" title="">
       2020
      </a>
      )
     </cite>
     ) and encoder-decoder PLMs (like BART
     <cite class="ltx_cite ltx_citemacro_cite">
      Lewis et¬†al. (
      <a class="ltx_ref" href="#bib.bib12" title="">
       2019
      </a>
      )
     </cite>
     , T5
     <cite class="ltx_cite ltx_citemacro_cite">
      Raffel et¬†al. (
      <a class="ltx_ref" href="#bib.bib21" title="">
       2020
      </a>
      )
     </cite>
     ). For encoder-only PLMs, systems like RATSQL
     <cite class="ltx_cite ltx_citemacro_cite">
      Wang et¬†al. (
      <a class="ltx_ref" href="#bib.bib24" title="">
       2019
      </a>
      )
     </cite>
     and LGESQL
     <cite class="ltx_cite ltx_citemacro_cite">
      Cao et¬†al. (
      <a class="ltx_ref" href="#bib.bib3" title="">
       2021
      </a>
      )
     </cite>
     use BERT to encode user questions and database schemas, further employing graph neural networks to model foreign keys and schema linking. The encoded representations are then fed into a grammar-based syntactic neural decoder to generate SQL queries. For encoder-decoder PLMs, approaches like PICARD
     <cite class="ltx_cite ltx_citemacro_cite">
      Scholak et¬†al. (
      <a class="ltx_ref" href="#bib.bib22" title="">
       2021
      </a>
      )
     </cite>
     , RASAT
     <cite class="ltx_cite ltx_citemacro_cite">
      Qi et¬†al. (
      <a class="ltx_ref" href="#bib.bib20" title="">
       2022
      </a>
      )
     </cite>
     , and RESDSQL
     <cite class="ltx_cite ltx_citemacro_cite">
      Li et¬†al. (
      <a class="ltx_ref" href="#bib.bib13" title="">
       2023a
      </a>
      )
     </cite>
     frame the NL2SQL task as an end-to-end translation problem, using the T5 model to directly translate user questions into SQL queries. Additionally, task-specific strategies like relation-aware self-attention
     <cite class="ltx_cite ltx_citemacro_cite">
      Qi et¬†al. (
      <a class="ltx_ref" href="#bib.bib20" title="">
       2022
      </a>
      )
     </cite>
     , schema selection
     <cite class="ltx_cite ltx_citemacro_cite">
      Li et¬†al. (
      <a class="ltx_ref" href="#bib.bib13" title="">
       2023a
      </a>
      )
     </cite>
     , and constrained decoding
     <cite class="ltx_cite ltx_citemacro_cite">
      Scholak et¬†al. (
      <a class="ltx_ref" href="#bib.bib22" title="">
       2021
      </a>
      )
     </cite>
     further enhance the accuracy of Encoder-Decoder PLMs in generating SQL queries.
    </p>
   </div>
  </section>
  <section class="ltx_subsection" id="A1.SS2">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     A.2
    </span>
    Significance Test
   </h3>
   <div class="ltx_para" id="A1.SS2.p1">
    <p class="ltx_p" id="A1.SS2.p1.1">
     We divided the SQL generated by several strategies in Table
     <a class="ltx_ref" href="#S3.T2" title="Table 2 ‚Ä£ Overall Results. ‚Ä£ 3 Experiments and Results ‚Ä£ SQL-CRAFT: Text-to-SQL through Interactive Refinement and Enhanced Reasoning">
      <span class="ltx_text ltx_ref_tag">
       2
      </span>
     </a>
     into 10 equal parts and calculated the execution accuracy for each. Figure
     <a class="ltx_ref" href="#A1.F3" title="Figure 3 ‚Ä£ A.2 Significance Test ‚Ä£ Appendix A Appendix ‚Ä£ SQL-CRAFT: Text-to-SQL through Interactive Refinement and Enhanced Reasoning">
      <span class="ltx_text ltx_ref_tag">
       3
      </span>
     </a>
     shows the box plot drawn using this data.
    </p>
   </div>
   <figure class="ltx_figure" id="A1.F3">
    <img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_portrait" height="478" id="A1.F3.g1" src="/html/2402.14851/assets/x2.png" width="369"/>
    <figcaption class="ltx_caption ltx_centering">
     <span class="ltx_tag ltx_tag_figure">
      Figure 3:
     </span>
     Execution Accuracy Box Plot
    </figcaption>
   </figure>
   <div class="ltx_para" id="A1.SS2.p2">
    <p class="ltx_p" id="A1.SS2.p2.1">
     To test whether our strategy can indeed improve Execution Accuracy (EA), we conduct a significance test between the ‚ÄúSQL-Only‚Äù and ‚ÄúIC-Lp+PoT‚Äù strategies. The null hypothesis of the test is that the median EAs obtained by the two strategies are the same. The Mann-Whitney U Test
     <cite class="ltx_cite ltx_citemacro_cite">
      Mann and Whitney (
      <a class="ltx_ref" href="#bib.bib16" title="">
       1947
      </a>
      )
     </cite>
     is a non-parametric statistical method used to compare whether there is a significant difference in the medians of two independent samples. Compared to the Analysis of Variance (ANOVA), it does not require the data to be normally distributed, making it suitable for small samples or data with unknown distribution.
    </p>
   </div>
   <div class="ltx_para" id="A1.SS2.p3">
    <p class="ltx_p" id="A1.SS2.p3.1">
     The
     <math alttext="p" class="ltx_Math" display="inline" id="A1.SS2.p3.1.m1.1">
      <semantics id="A1.SS2.p3.1.m1.1a">
       <mi id="A1.SS2.p3.1.m1.1.1" xref="A1.SS2.p3.1.m1.1.1.cmml">
        p
       </mi>
       <annotation-xml encoding="MathML-Content" id="A1.SS2.p3.1.m1.1b">
        <ci id="A1.SS2.p3.1.m1.1.1.cmml" xref="A1.SS2.p3.1.m1.1.1">
         ùëù
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A1.SS2.p3.1.m1.1c">
        p
       </annotation>
      </semantics>
     </math>
     -value of the test is 0.0243, which is below the commonly accepted significance level of 0.05. Therefore, we have reason to reject the null hypothesis, indicating that the ‚ÄúIC-Lp+PoT‚Äù strategy leads to a significant performance improvement.
    </p>
   </div>
   <div class="ltx_pagination ltx_role_newpage">
   </div>
  </section>
  <section class="ltx_subsection" id="A1.SS3">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     A.3
    </span>
    More Cases
   </h3>
   <section class="ltx_subsubsection" id="A1.SS3.SSS1">
    <h4 class="ltx_title ltx_title_subsubsection">
     <span class="ltx_tag ltx_tag_subsubsection">
      A.3.1
     </span>
     Spider Error Cases
    </h4>
    <figure class="ltx_table" id="A1.T4">
     <table class="ltx_tabular ltx_align_middle" id="A1.T4.1">
      <tr class="ltx_tr" id="A1.T4.1.1">
       <td class="ltx_td ltx_align_left ltx_border_tt" id="A1.T4.1.1.1" style="padding:2.5pt 3.0pt;">
        Error Type
       </td>
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="A1.T4.1.1.2" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T4.1.1.2.1">
         <span class="ltx_p" id="A1.T4.1.1.2.1.1" style="width:227.6pt;">
          Question, Gold &amp; Prediction
         </span>
        </span>
       </td>
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="A1.T4.1.1.3" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T4.1.1.3.1">
         <span class="ltx_p" id="A1.T4.1.1.3.1.1" style="width:113.8pt;">
          Reason
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A1.T4.1.2">
       <td class="ltx_td ltx_align_left ltx_border_tt" id="A1.T4.1.2.1" style="padding:2.5pt 3.0pt;">
        DB Value
       </td>
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="A1.T4.1.2.2" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T4.1.2.2.1">
         <span class="ltx_p" id="A1.T4.1.2.2.1.1" style="width:227.6pt;">
          <span class="ltx_text ltx_font_bold" id="A1.T4.1.2.2.1.1.1">
           Q:
          </span>
          Find the last name of the students who currently live in the state of North Carolina but have not registered in any degree program.
          <br class="ltx_break ltx_align_left"/>
          <span class="ltx_text ltx_align_left ltx_font_bold" id="A1.T4.1.2.2.1.1.2">
           Gold:
          </span>
          SELECT ‚Ä¶ WHERE T2.state_province_county
          <span class="ltx_text ltx_align_left" id="A1.T4.1.2.2.1.1.3" style="background-color:#98FB98;">
           = ‚ÄôNorthCarolina‚Äô
          </span>
          EXCEPT ‚Ä¶
          <br class="ltx_break ltx_align_left"/>
          <span class="ltx_text ltx_align_left ltx_font_bold" id="A1.T4.1.2.2.1.1.4">
           Pred:
          </span>
          SELECT ‚Ä¶ WHERE T2.state_province_county
          <span class="ltx_text ltx_align_left" id="A1.T4.1.2.2.1.1.5" style="background-color:#FFC0CB;">
           = ‚ÄôNorth Carolina‚Äô
          </span>
          EXCEPT ‚Ä¶
         </span>
        </span>
       </td>
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="A1.T4.1.2.3" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T4.1.2.3.1">
         <span class="ltx_p" id="A1.T4.1.2.3.1.1" style="width:113.8pt;">
          The filtering condition in the question does not match the database value, string ‚ÄúNorthCalifornia‚Äù in database do not have a space in between.
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A1.T4.1.3">
       <td class="ltx_td ltx_align_left ltx_border_t" id="A1.T4.1.3.1" style="padding:2.5pt 3.0pt;">
        Gold Error
       </td>
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A1.T4.1.3.2" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T4.1.3.2.1">
         <span class="ltx_p" id="A1.T4.1.3.2.1.1" style="width:227.6pt;">
          <span class="ltx_text ltx_font_bold" id="A1.T4.1.3.2.1.1.1">
           Q:
          </span>
          What are the first names of all players, and their average rankings?
          <br class="ltx_break ltx_align_left"/>
          <span class="ltx_text ltx_align_left ltx_font_bold" id="A1.T4.1.3.2.1.1.2">
           Gold:
          </span>
          <span class="ltx_text ltx_align_left ltx_font_typewriter" id="A1.T4.1.3.2.1.1.3">
           SELECT avg(ranking), T1.first_name FROM players AS T1 JOIN rankings AS T2 ON T1.player_id = T2.player_id
           <span class="ltx_text" id="A1.T4.1.3.2.1.1.3.1" style="background-color:#FFC0CB;">
            GROUP BY T1.first_name
           </span>
          </span>
          <br class="ltx_break ltx_align_left"/>
          <span class="ltx_text ltx_align_left ltx_font_bold" id="A1.T4.1.3.2.1.1.4">
           Pred:
          </span>
          <span class="ltx_text ltx_align_left ltx_font_typewriter" id="A1.T4.1.3.2.1.1.5">
           SELECT avg(ranking), T1.first_name FROM players AS T1 JOIN rankings AS T2 ON T1.player_id = T2.player_id
           <span class="ltx_text" id="A1.T4.1.3.2.1.1.5.1" style="background-color:#98FB98;">
            GROUP BY T1.player_id
           </span>
          </span>
         </span>
        </span>
       </td>
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A1.T4.1.3.3" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T4.1.3.3.1">
         <span class="ltx_p" id="A1.T4.1.3.3.1.1" style="width:113.8pt;">
          The individuals in the table can be uniquely determined by column player_id not first_name, when
          <span class="ltx_text ltx_align_left ltx_font_typewriter" id="A1.T4.1.3.3.1.1.1">
           GROUP BY
          </span>
          .
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A1.T4.1.4">
       <td class="ltx_td ltx_align_left ltx_border_t" id="A1.T4.1.4.1" style="padding:2.5pt 3.0pt;">
        Gold Error
       </td>
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A1.T4.1.4.2" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T4.1.4.2.1">
         <span class="ltx_p" id="A1.T4.1.4.2.1.1" style="width:227.6pt;">
          <span class="ltx_text ltx_font_bold" id="A1.T4.1.4.2.1.1.1">
           Q:
          </span>
          Find the id and cell phone of the professionals who operate two or more types of treatments.
          <br class="ltx_break ltx_align_left"/>
          <span class="ltx_text ltx_align_left ltx_font_bold" id="A1.T4.1.4.2.1.1.2">
           Gold:
          </span>
          <span class="ltx_text ltx_align_left ltx_font_typewriter" id="A1.T4.1.4.2.1.1.3">
           SELECT T1.professional_id, T1.cell_number FROM Professionals AS T1 JOIN Treatments AS T2 ON T1.professional_id = T2.professional_id GROUP BY T1.professional_id
           <span class="ltx_text" id="A1.T4.1.4.2.1.1.3.1" style="background-color:#98FB98;">
            HAVING count(*) &gt;= 2
           </span>
          </span>
          <br class="ltx_break ltx_align_left"/>
          <span class="ltx_text ltx_align_left ltx_font_bold" id="A1.T4.1.4.2.1.1.4">
           Pred:
          </span>
          <span class="ltx_text ltx_align_left ltx_font_typewriter" id="A1.T4.1.4.2.1.1.5">
           SELECT T1.professional_id, T1.cell_number FROM Professionals AS T1 JOIN Treatments AS T2 ON T1.professional_id = T2.professional_id GROUP BY T1.professional_id HAVING COUNT(
           <span class="ltx_text" id="A1.T4.1.4.2.1.1.5.1" style="background-color:#FFC0CB;">
            DISTINCT
           </span>
           T2.treatment_type_code) &gt;= 2
          </span>
         </span>
        </span>
       </td>
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A1.T4.1.4.3" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T4.1.4.3.1">
         <span class="ltx_p" id="A1.T4.1.4.3.1.1" style="width:113.8pt;">
          The gold only finds professionals who have two or more records in the treatment table does not ensure that the records are for different types of treatments
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A1.T4.1.5">
       <td class="ltx_td ltx_align_left ltx_border_t" id="A1.T4.1.5.1" style="padding:2.5pt 3.0pt;">
        Ambiguity
       </td>
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A1.T4.1.5.2" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T4.1.5.2.1">
         <span class="ltx_p" id="A1.T4.1.5.2.1.1" style="width:227.6pt;">
          <span class="ltx_text ltx_font_bold" id="A1.T4.1.5.2.1.1.1">
           Q:
          </span>
          What are the names and ids of all makers with more than 3 models?
          <br class="ltx_break ltx_align_left"/>
          <span class="ltx_text ltx_align_left ltx_font_bold" id="A1.T4.1.5.2.1.1.2">
           Gold:
          </span>
          <span class="ltx_text ltx_align_left ltx_font_typewriter" id="A1.T4.1.5.2.1.1.3">
           SELECT
           <span class="ltx_text" id="A1.T4.1.5.2.1.1.3.1" style="background-color:#98FB98;">
            T1.FullName
           </span>
           , T1.Id FROM CAR_MAKERS AS T1 JOIN MODEL_LIST AS T2 ON T1.Id = T2.Maker GROUP BY T1.Id HAVING count(*) &gt; 3;
          </span>
          <br class="ltx_break ltx_align_left"/>
          <span class="ltx_text ltx_align_left ltx_font_bold" id="A1.T4.1.5.2.1.1.4">
           Pred:
          </span>
          <span class="ltx_text ltx_align_left ltx_font_typewriter" id="A1.T4.1.5.2.1.1.5">
           SELECT
           <span class="ltx_text" id="A1.T4.1.5.2.1.1.5.1" style="background-color:#FFC0CB;">
            T1.Maker
           </span>
           , T1.Id FROM CAR_MAKERS AS T1 JOIN MODEL_LIST AS T2 ON T1.Id = T2.Maker GROUP BY T1.Id HAVING count(*) &gt; 3;
          </span>
         </span>
        </span>
       </td>
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A1.T4.1.5.3" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T4.1.5.3.1">
         <span class="ltx_p" id="A1.T4.1.5.3.1.1" style="width:113.8pt;">
          Both column ‚ÄúMaker‚Äù and column ‚ÄúFullName‚Äù can answer the question about the ‚Äúnames of makers‚Äù in the query.
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A1.T4.1.6">
       <td class="ltx_td ltx_align_left ltx_border_bb ltx_border_t" id="A1.T4.1.6.1" style="padding:2.5pt 3.0pt;">
        Imprecise
       </td>
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_t" id="A1.T4.1.6.2" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T4.1.6.2.1">
         <span class="ltx_p" id="A1.T4.1.6.2.1.1" style="width:227.6pt;">
          <span class="ltx_text ltx_font_bold" id="A1.T4.1.6.2.1.1.1">
           Q:
          </span>
          What are the arriving date and the departing date of the dogs who have gone through a treatment?
          <br class="ltx_break ltx_align_left"/>
          <span class="ltx_text ltx_align_left ltx_font_bold" id="A1.T4.1.6.2.1.1.2">
           Gold:
          </span>
          <span class="ltx_text ltx_align_left ltx_font_typewriter" id="A1.T4.1.6.2.1.1.3">
           SELECT DISTINCT T1.date_arrived, T1.date_departed FROM Dogs AS T1 JOIN Treatments AS T2 ON T1.dog_id = T2.dog_id
          </span>
          <br class="ltx_break ltx_align_left"/>
          <span class="ltx_text ltx_align_left ltx_font_bold" id="A1.T4.1.6.2.1.1.4">
           Pred:
          </span>
          <span class="ltx_text ltx_align_left ltx_font_typewriter" id="A1.T4.1.6.2.1.1.5">
           SELECT DISTINCT T1.date_arrived, T1.date_departed,
           <span class="ltx_text" id="A1.T4.1.6.2.1.1.5.1" style="background-color:#FFC0CB;">
            T1.Name
           </span>
           FROM Dogs AS T1 JOIN Treatments AS T2 ON T1.dog_id = T2.dog_id
          </span>
         </span>
        </span>
       </td>
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_t" id="A1.T4.1.6.3" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T4.1.6.3.1">
         <span class="ltx_p" id="A1.T4.1.6.3.1.1" style="width:113.8pt;">
          The question do not require listing the specific names of the students, but only ask to list the students‚Äô arrival and departure dates. This falls under information redundancy.
         </span>
        </span>
       </td>
      </tr>
     </table>
     <figcaption class="ltx_caption">
      <span class="ltx_tag ltx_tag_table">
       Table 4:
      </span>
     </figcaption>
    </figure>
    <div class="ltx_pagination ltx_role_newpage">
    </div>
   </section>
   <section class="ltx_subsubsection" id="A1.SS3.SSS2">
    <h4 class="ltx_title ltx_title_subsubsection">
     <span class="ltx_tag ltx_tag_subsubsection">
      A.3.2
     </span>
     BIRD Error Cases
    </h4>
    <figure class="ltx_table" id="A1.T5">
     <table class="ltx_tabular ltx_align_middle" id="A1.T5.1">
      <tr class="ltx_tr" id="A1.T5.1.1">
       <td class="ltx_td ltx_align_left ltx_border_tt" id="A1.T5.1.1.1" style="padding:2.5pt 3.0pt;">
        Error Type
       </td>
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="A1.T5.1.1.2" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T5.1.1.2.1">
         <span class="ltx_p" id="A1.T5.1.1.2.1.1" style="width:227.6pt;">
          Question, Gold &amp; Prediction
         </span>
        </span>
       </td>
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="A1.T5.1.1.3" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T5.1.1.3.1">
         <span class="ltx_p" id="A1.T5.1.1.3.1.1" style="width:113.8pt;">
          Reason
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A1.T5.1.2">
       <td class="ltx_td ltx_align_left ltx_border_tt" id="A1.T5.1.2.1" style="padding:2.5pt 3.0pt;">
        DB Value
       </td>
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="A1.T5.1.2.2" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T5.1.2.2.1">
         <span class="ltx_p" id="A1.T5.1.2.2.1.1" style="width:227.6pt;">
          <span class="ltx_text ltx_font_bold" id="A1.T5.1.2.2.1.1.1">
           Q:
          </span>
          How many cards with unknown power that can‚Äôt be found in foil is in duel deck A?
          <br class="ltx_break ltx_align_left"/>
          <span class="ltx_text ltx_align_left ltx_font_bold" id="A1.T5.1.2.2.1.1.2">
           Gold:
          </span>
          SELECT SUM(CASE WHEN power
          <span class="ltx_text ltx_align_left" id="A1.T5.1.2.2.1.1.3" style="background-color:#98FB98;">
           LIKE ‚Äô%*%‚Äô
          </span>
          OR power IS NULL THEN 1 ELSE 0 END) FROM cards WHERE hasFoil = 0 AND duelDeck = ‚Äôa‚Äô
          <br class="ltx_break ltx_align_left"/>
          <span class="ltx_text ltx_align_left ltx_font_bold" id="A1.T5.1.2.2.1.1.4">
           Pred:
          </span>
          SELECT COUNT(*) FROM cards WHERE (power IS NULL OR
          <span class="ltx_text ltx_align_left" id="A1.T5.1.2.2.1.1.5" style="background-color:#FFC0CB;">
           power = ‚Äô*‚Äô
          </span>
          ) AND hasFoil = 0 AND duelDeck = ‚Äôa‚Äô
         </span>
        </span>
       </td>
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="A1.T5.1.2.3" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T5.1.2.3.1">
         <span class="ltx_p" id="A1.T5.1.2.3.1.1" style="width:113.8pt;">
          Values in database cannot exact match with the question and evidence.
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A1.T5.1.3">
       <td class="ltx_td ltx_align_left ltx_border_t" id="A1.T5.1.3.1" style="padding:2.5pt 3.0pt;">
        Gold Error
       </td>
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A1.T5.1.3.2" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T5.1.3.2.1">
         <span class="ltx_p" id="A1.T5.1.3.2.1.1" style="width:227.6pt;">
          <span class="ltx_text ltx_font_bold" id="A1.T5.1.3.2.1.1.1">
           Q:
          </span>
          How many artists have designed a card with a black border color and is available in both "arena" and "mtgo" printing type?
          <br class="ltx_break ltx_align_left"/>
          <span class="ltx_text ltx_align_left ltx_font_bold" id="A1.T5.1.3.2.1.1.2">
           Gold:
          </span>
          <span class="ltx_text ltx_align_left ltx_font_typewriter" id="A1.T5.1.3.2.1.1.3">
           SELECT COUNT(CASE WHEN availability LIKE ‚Äô%arena,mtgo%‚Äô THEN 1 ELSE NULL END) FROM cards
          </span>
          <br class="ltx_break ltx_align_left"/>
          <span class="ltx_text ltx_align_left ltx_font_bold" id="A1.T5.1.3.2.1.1.4">
           Pred:
          </span>
          <span class="ltx_text ltx_align_left ltx_font_typewriter" id="A1.T5.1.3.2.1.1.5">
           SELECT COUNT(DISTINCT artist) FROM cards
           <span class="ltx_text" id="A1.T5.1.3.2.1.1.5.1" style="background-color:#98FB98;">
            WHERE borderColor = ‚Äôblack‚Äô
           </span>
           AND availability LIKE ‚Äô%arena,mtgo%‚Äô
          </span>
         </span>
        </span>
       </td>
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A1.T5.1.3.3" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T5.1.3.3.1">
         <span class="ltx_p" id="A1.T5.1.3.3.1.1" style="width:113.8pt;">
          The gold missed one filtering condition.
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A1.T5.1.4">
       <td class="ltx_td ltx_align_left ltx_border_t" id="A1.T5.1.4.1" style="padding:2.5pt 3.0pt;">
        Ambiguity
       </td>
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A1.T5.1.4.2" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T5.1.4.2.1">
         <span class="ltx_p" id="A1.T5.1.4.2.1.1" style="width:227.6pt;">
          <span class="ltx_text ltx_font_bold" id="A1.T5.1.4.2.1.1.1">
           Q:
          </span>
          Among black card borders, which card has full artwork?
          <br class="ltx_break ltx_align_left"/>
          <span class="ltx_text ltx_align_left ltx_font_bold" id="A1.T5.1.4.2.1.1.2">
           Gold:
          </span>
          <span class="ltx_text ltx_align_left ltx_font_typewriter" id="A1.T5.1.4.2.1.1.3">
           SELECT
           <span class="ltx_text" id="A1.T5.1.4.2.1.1.3.1" style="background-color:#98FB98;">
            id
           </span>
           FROM cards WHERE borderColor = ‚Äôblack‚Äô AND isFullArt = 1
          </span>
          <br class="ltx_break ltx_align_left"/>
          <span class="ltx_text ltx_align_left ltx_font_bold" id="A1.T5.1.4.2.1.1.4">
           Pred:
          </span>
          <span class="ltx_text ltx_align_left ltx_font_typewriter" id="A1.T5.1.4.2.1.1.5">
           SELECT
           <span class="ltx_text" id="A1.T5.1.4.2.1.1.5.1" style="background-color:#FFC0CB;">
            name
           </span>
           FROM cards WHERE borderColor = ‚Äôblack‚Äô AND isFullArt = 1;
          </span>
         </span>
        </span>
       </td>
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A1.T5.1.4.3" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T5.1.4.3.1">
         <span class="ltx_p" id="A1.T5.1.4.3.1.1" style="width:113.8pt;">
          Both column ‚Äúname‚Äù and column ‚Äúid‚Äù can answer the question about the ‚Äúthe card has full artwork‚Äù in the query.
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A1.T5.1.5">
       <td class="ltx_td ltx_align_left ltx_border_bb ltx_border_t" id="A1.T5.1.5.1" style="padding:2.5pt 3.0pt;">
        Logic
       </td>
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_t" id="A1.T5.1.5.2" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T5.1.5.2.1">
         <span class="ltx_p" id="A1.T5.1.5.2.1.1" style="width:227.6pt;">
          <span class="ltx_text ltx_font_bold" id="A1.T5.1.5.2.1.1.1">
           Q:
          </span>
          Which cities have the top 5 lowest enrollment number for students in grades 1 through 12?
          <br class="ltx_break ltx_align_left"/>
          <span class="ltx_text ltx_align_left ltx_font_bold" id="A1.T5.1.5.2.1.1.2">
           Gold:
          </span>
          <span class="ltx_text ltx_align_left ltx_font_typewriter" id="A1.T5.1.5.2.1.1.3">
           SELECT T2.City FROM frpm AS T1 INNER JOIN schools AS T2 ON T1.CDSCode = T2.CDSCode GROUP BY T2.City ORDER BY SUM(T1.‚ÄòEnrollment (K-12)‚Äò) ASC LIMIT 5
          </span>
          <br class="ltx_break ltx_align_left"/>
          <span class="ltx_text ltx_align_left ltx_font_bold" id="A1.T5.1.5.2.1.1.4">
           Pred:
          </span>
          <span class="ltx_text ltx_align_left ltx_font_typewriter" id="A1.T5.1.5.2.1.1.5">
           SELECT T2.City, T1."Enrollment (K-12)" FROM frpm AS T1 JOIN schools AS T2 ON T1.CDSCode = T2.CDSCode ORDER BY T1."Enrollment (K-12)" ASC LIMIT 5;
          </span>
         </span>
        </span>
       </td>
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_t" id="A1.T5.1.5.3" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T5.1.5.3.1">
         <span class="ltx_p" id="A1.T5.1.5.3.1.1" style="width:113.8pt;">
          The Pred query is incorrect because it lacks grouping and aggregation. It directly selects cities and their corresponding "Enrollment (K-12)" without summing up the enrollment numbers across all schools within each city. As a result, it returns the cities of the five schools with the lowest enrollment numbers, which does not accurately answer the question seeking the top 5 cities with the lowest total enrollment for students in grades 1 through 12.
         </span>
        </span>
       </td>
      </tr>
     </table>
     <figcaption class="ltx_caption">
      <span class="ltx_tag ltx_tag_table">
       Table 5:
      </span>
     </figcaption>
    </figure>
    <div class="ltx_pagination ltx_role_newpage">
    </div>
   </section>
   <section class="ltx_subsubsection" id="A1.SS3.SSS3">
    <h4 class="ltx_title ltx_title_subsubsection">
     <span class="ltx_tag ltx_tag_subsubsection">
      A.3.3
     </span>
     Interactive Correction Cases
    </h4>
    <figure class="ltx_table" id="A1.T6">
     <table class="ltx_tabular ltx_align_middle" id="A1.T6.1">
      <tr class="ltx_tr" id="A1.T6.1.1">
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_r ltx_border_tt" id="A1.T6.1.1.1" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1">
         <span class="ltx_p" id="A1.T6.1.1.1.1.1" style="width:142.3pt;">
          Before
         </span>
        </span>
       </td>
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_r ltx_border_tt" id="A1.T6.1.1.2" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.2.1">
         <span class="ltx_p" id="A1.T6.1.1.2.1.1" style="width:142.3pt;">
          After
         </span>
        </span>
       </td>
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="A1.T6.1.1.3" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.3.1">
         <span class="ltx_p" id="A1.T6.1.1.3.1.1" style="width:142.3pt;">
          Reason
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A1.T6.1.2">
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" colspan="3" id="A1.T6.1.2.1" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T6.1.2.1.1">
         <span class="ltx_p" id="A1.T6.1.2.1.1.1" style="width:426.8pt;">
          <span class="ltx_text ltx_font_bold" id="A1.T6.1.2.1.1.1.1">
           Q:
          </span>
          What is the phone number of the school that has the highest number of test takers with an SAT score of over 1500?
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A1.T6.1.3">
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_r ltx_border_t" id="A1.T6.1.3.1" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T6.1.3.1.1">
         <span class="ltx_p" id="A1.T6.1.3.1.1.1" style="width:142.3pt;">
          <span class="ltx_text ltx_font_bold" id="A1.T6.1.3.1.1.1.1">
           Before:
          </span>
          <br class="ltx_break ltx_align_left"/>
          <span class="ltx_text ltx_align_left ltx_font_typewriter" id="A1.T6.1.3.1.1.1.2">
           SELECT schools.Phone
           <br class="ltx_break"/>
           FROM satscores
           <br class="ltx_break"/>
           JOIN schools ON satscores.cds = schools.CDSCode
           <br class="ltx_break"/>
           WHERE satscores.NumGE1500 &gt; 1500
           <br class="ltx_break"/>
           GROUP BY schools.School
           <br class="ltx_break"/>
           ORDER BY COUNT(*) DESC
           <br class="ltx_break"/>
           LIMIT 1;
          </span>
         </span>
        </span>
       </td>
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_r ltx_border_t" id="A1.T6.1.3.2" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T6.1.3.2.1">
         <span class="ltx_p" id="A1.T6.1.3.2.1.1" style="width:142.3pt;">
          <span class="ltx_text ltx_font_bold" id="A1.T6.1.3.2.1.1.1">
           After:
          </span>
          <br class="ltx_break ltx_align_left"/>
          <span class="ltx_text ltx_align_left ltx_font_typewriter" id="A1.T6.1.3.2.1.1.2">
           SELECT schools.Phone
           <br class="ltx_break"/>
           FROM satscores
           <br class="ltx_break"/>
           JOIN schools ON satscores.cds = schools.CDSCode
           <br class="ltx_break"/>
           ORDER BY satscores.NumGE1500 DESC
           <br class="ltx_break"/>
           LIMIT 1;
          </span>
         </span>
        </span>
       </td>
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A1.T6.1.3.3" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T6.1.3.3.1">
         <span class="ltx_p" id="A1.T6.1.3.3.1.1" style="width:142.3pt;">
          The WHERE clause is checking if the number of test takers with an SAT score over 1500 is greater than 1500, which is not what the question is asking. The question is asking for the school with the highest number of test takers who scored over 1500. Additionally, the GROUP BY clause is grouping by the school name, which may not be unique. It would be better to group by the school code (CDSCode) which is unique for each school.
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A1.T6.1.4">
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" colspan="3" id="A1.T6.1.4.1" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T6.1.4.1.1">
         <span class="ltx_p" id="A1.T6.1.4.1.1.1" style="width:426.8pt;">
          <span class="ltx_text ltx_font_bold" id="A1.T6.1.4.1.1.1.1">
           Q:
          </span>
          List the top five schools, by descending order, from the highest to the lowest, the most number of Enrollment (Ages 5-17). Please give their NCES school identification number.
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A1.T6.1.5">
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_r ltx_border_t" id="A1.T6.1.5.1" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T6.1.5.1.1">
         <span class="ltx_p" id="A1.T6.1.5.1.1.1" style="width:142.3pt;">
          <span class="ltx_text ltx_font_bold" id="A1.T6.1.5.1.1.1.1">
           Before:
          </span>
          <br class="ltx_break ltx_align_left"/>
          <span class="ltx_text ltx_align_left ltx_font_typewriter" id="A1.T6.1.5.1.1.1.2">
           SELECT T1."School Name", T2.NCESSchool
           <br class="ltx_break"/>
           FROM frpm AS T1
           <br class="ltx_break"/>
           JOIN schools AS T2 ON T1.CDSCode = T2.CDSCode
           <br class="ltx_break"/>
           ORDER BY T1."Enrollment (Ages 5-17)" DESC
           <br class="ltx_break"/>
           LIMIT 5;
          </span>
         </span>
        </span>
       </td>
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_r ltx_border_t" id="A1.T6.1.5.2" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T6.1.5.2.1">
         <span class="ltx_p" id="A1.T6.1.5.2.1.1" style="width:142.3pt;">
          <span class="ltx_text ltx_font_bold" id="A1.T6.1.5.2.1.1.1">
           After:
          </span>
          <br class="ltx_break ltx_align_left"/>
          <span class="ltx_text ltx_align_left ltx_font_typewriter" id="A1.T6.1.5.2.1.1.2">
           SELECT T2.NCESSchool
           <br class="ltx_break"/>
           FROM frpm AS T1
           <br class="ltx_break"/>
           JOIN schools AS T2 ON T1.CDSCode = T2.CDSCode
           <br class="ltx_break"/>
           ORDER BY T1."Enrollment (Ages 5-17)" DESC
           <br class="ltx_break"/>
           LIMIT 5;
          </span>
         </span>
        </span>
       </td>
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A1.T6.1.5.3" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T6.1.5.3.1">
         <span class="ltx_p" id="A1.T6.1.5.3.1.1" style="width:142.3pt;">
          The question asks for the top five schools with the most number of Enrollment (Ages 5-17), and their NCES school identification number. However, the SQL query provided returns the school name, which is not required by the question.
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A1.T6.1.6">
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" colspan="3" id="A1.T6.1.6.1" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T6.1.6.1.1">
         <span class="ltx_p" id="A1.T6.1.6.1.1.1" style="width:426.8pt;">
          <span class="ltx_text ltx_font_bold" id="A1.T6.1.6.1.1.1.1">
           Q:
          </span>
          find the package option of the tv channel that do not have any cartoon directed by Ben Jones.
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A1.T6.1.7">
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_r ltx_border_t" id="A1.T6.1.7.1" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T6.1.7.1.1">
         <span class="ltx_p" id="A1.T6.1.7.1.1.1" style="width:142.3pt;">
          <span class="ltx_text ltx_font_bold" id="A1.T6.1.7.1.1.1.1">
           Before:
          </span>
          <br class="ltx_break ltx_align_left"/>
          <span class="ltx_text ltx_align_left ltx_font_typewriter" id="A1.T6.1.7.1.1.1.2">
           SELECT TV_Channel.Package_Option
           <br class="ltx_break"/>
           FROM TV_Channel
           <br class="ltx_break"/>
           LEFT JOIN Cartoon ON TV_Channel.id = Cartoon.Channel
           <br class="ltx_break"/>
           WHERE Cartoon.Directed_by IS NOT ‚ÄôBen Jones‚Äô;
          </span>
         </span>
        </span>
       </td>
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_r ltx_border_t" id="A1.T6.1.7.2" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T6.1.7.2.1">
         <span class="ltx_p" id="A1.T6.1.7.2.1.1" style="width:142.3pt;">
          <span class="ltx_text ltx_font_bold" id="A1.T6.1.7.2.1.1.1">
           After:
          </span>
          <br class="ltx_break ltx_align_left"/>
          <span class="ltx_text ltx_align_left ltx_font_typewriter" id="A1.T6.1.7.2.1.1.2">
           SELECT TV_Channel.Package_Option
           <br class="ltx_break"/>
           FROM TV_Channel
           <br class="ltx_break"/>
           WHERE TV_Channel.id NOT IN (
           <br class="ltx_break"/>
           SELECT Cartoon.Channel
           <br class="ltx_break"/>
           FROM Cartoon
           <br class="ltx_break"/>
           WHERE Cartoon.Directed_by = ‚ÄôBen Jones‚Äô);
          </span>
         </span>
        </span>
       </td>
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A1.T6.1.7.3" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T6.1.7.3.1">
         <span class="ltx_p" id="A1.T6.1.7.3.1.1" style="width:142.3pt;">
          The current query is selecting all channels where the director is not Ben Jones, but it should exclude channels that have any cartoons directed by Ben Jones. This can be achieved by using a subquery to find all channels that have cartoons directed by Ben Jones, and then excluding these channels in the main query. Here is the corrected SQL:
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A1.T6.1.8">
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" colspan="3" id="A1.T6.1.8.1" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T6.1.8.1.1">
         <span class="ltx_p" id="A1.T6.1.8.1.1.1" style="width:426.8pt;">
          <span class="ltx_text ltx_font_bold" id="A1.T6.1.8.1.1.1.1">
           Q:
          </span>
          List the earnings of poker players in descending order.
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A1.T6.1.9">
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_r ltx_border_t" id="A1.T6.1.9.1" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T6.1.9.1.1">
         <span class="ltx_p" id="A1.T6.1.9.1.1.1" style="width:142.3pt;">
          <span class="ltx_text ltx_font_bold" id="A1.T6.1.9.1.1.1.1">
           Before:
          </span>
          <br class="ltx_break ltx_align_left"/>
          <span class="ltx_text ltx_align_left ltx_font_typewriter" id="A1.T6.1.9.1.1.1.2">
           SELECT * FROM poker_player ORDER BY Earnings DESC;
          </span>
         </span>
        </span>
       </td>
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_r ltx_border_t" id="A1.T6.1.9.2" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T6.1.9.2.1">
         <span class="ltx_p" id="A1.T6.1.9.2.1.1" style="width:142.3pt;">
          <span class="ltx_text ltx_font_bold" id="A1.T6.1.9.2.1.1.1">
           After:
          </span>
          <br class="ltx_break ltx_align_left"/>
          <span class="ltx_text ltx_align_left ltx_font_typewriter" id="A1.T6.1.9.2.1.1.2">
           SELECT Earnings FROM poker_player ORDER BY Earnings DESC;
          </span>
         </span>
        </span>
       </td>
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A1.T6.1.9.3" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T6.1.9.3.1">
         <span class="ltx_p" id="A1.T6.1.9.3.1.1" style="width:142.3pt;">
          The question only asks for the earnings of poker players. Therefore, we should only select the ‚ÄòEarnings‚Äò column to make the result more concise and relevant to the question.
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A1.T6.1.10">
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" colspan="3" id="A1.T6.1.10.1" style="padding:2.5pt 3.0pt;">
        <span class="ltx_text ltx_font_bold" id="A1.T6.1.10.1.1">
         Q:
        </span>
        How many countries speak both English and Dutch?
       </td>
      </tr>
      <tr class="ltx_tr" id="A1.T6.1.11">
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_r ltx_border_t" id="A1.T6.1.11.1" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T6.1.11.1.1">
         <span class="ltx_p" id="A1.T6.1.11.1.1.1" style="width:142.3pt;">
          <span class="ltx_text ltx_font_bold" id="A1.T6.1.11.1.1.1.1">
           Before:
          </span>
          <br class="ltx_break ltx_align_left"/>
          <span class="ltx_text ltx_align_left ltx_font_typewriter" id="A1.T6.1.11.1.1.1.2">
           SELECT COUNT(DISTINCT CountryCode)
           <br class="ltx_break"/>
           FROM countrylanguage
           <br class="ltx_break"/>
           WHERE Language = ‚ÄôEnglish‚Äô
           <br class="ltx_break"/>
           AND CountryCode IN (
           <br class="ltx_break"/>
           SELECT CountryCode
           <br class="ltx_break"/>
           FROM countrylanguage
           <br class="ltx_break"/>
           WHERE Language = ‚ÄôDutch‚Äô)
          </span>
         </span>
        </span>
       </td>
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_r ltx_border_t" id="A1.T6.1.11.2" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T6.1.11.2.1">
         <span class="ltx_p" id="A1.T6.1.11.2.1.1" style="width:142.3pt;">
          <span class="ltx_text ltx_font_bold" id="A1.T6.1.11.2.1.1.1">
           After:
          </span>
          <br class="ltx_break ltx_align_left"/>
          <span class="ltx_text ltx_align_left ltx_font_typewriter" id="A1.T6.1.11.2.1.1.2">
           SELECT COUNT(*)
           <br class="ltx_break"/>
           FROM (
           <br class="ltx_break"/>
           SELECT CountryCode
           <br class="ltx_break"/>
           FROM countrylanguage
           <br class="ltx_break"/>
           WHERE Language = ‚ÄôEnglish‚Äô
           <br class="ltx_break"/>
           INTERSECT
           <br class="ltx_break"/>
           SELECT CountryCode
           <br class="ltx_break"/>
           FROM countrylanguage
           <br class="ltx_break"/>
           WHERE Language = ‚ÄôDutch‚Äô)
          </span>
         </span>
        </span>
       </td>
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_t" id="A1.T6.1.11.3" style="padding:2.5pt 3.0pt;">
        <span class="ltx_inline-block ltx_align_top" id="A1.T6.1.11.3.1">
         <span class="ltx_p" id="A1.T6.1.11.3.1.1" style="width:142.3pt;">
          The SQL query provided uses the ‚ÄòIN‚Äò clause, which selects countries that speak either English or Dutch. However, the question asks for countries speaking both languages. Using IN results in a union of sets (either English or Dutch), not an intersection (both English and Dutch). This could be done with two separate queries joined by an ‚ÄòINTERSECT‚Äò clause.
         </span>
        </span>
       </td>
      </tr>
     </table>
     <figcaption class="ltx_caption">
      <span class="ltx_tag ltx_tag_table">
       Table 6:
      </span>
     </figcaption>
    </figure>
   </section>
  </section>
  <section class="ltx_subsection" id="A1.SS4">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     A.4
    </span>
    Prompt Examples
   </h3>
   <section class="ltx_subsubsection" id="A1.SS4.SSS1">
    <h4 class="ltx_title ltx_title_subsubsection">
     <span class="ltx_tag ltx_tag_subsubsection">
      A.4.1
     </span>
     PoT Prompt Example
    </h4>
    <div class="ltx_para" id="A1.SS4.SSS1.p1">
     <p class="ltx_p" id="A1.SS4.SSS1.p1.1">
      Give me a CODE to answer the ‚Äò### QUESTION‚Äò, and translate CODE to SQL. ‚Äò### DB_STRUCTURE‚Äò includes examples of each table, and the filtering criteria should be based on these data examples. In the CODE, ‚ÄòTable %s‚Äò is stored in ‚Äòdb_dict[‚Äô%s‚Äô]‚Äò, ‚Äòdb_dict‚Äò is of type dict[pandas.DataFrame]
      <br class="ltx_break"/>
      <br class="ltx_break"/>
      <br class="ltx_break"/>
      <br class="ltx_break"/>
      <br class="ltx_break"/>
      ### RELATED_SQLs:
&lt;‚Ä¶&gt;
      <br class="ltx_break"/>
      <br class="ltx_break"/>
      <br class="ltx_break"/>
      <br class="ltx_break"/>
      <br class="ltx_break"/>
      ### DB_STRUCTURE:
Database name: world_1
      <br class="ltx_break"/>
      Tables: city, sqlite_sequence, country, countrylanguage
      <br class="ltx_break"/>
      Primary Keys: city[‚ÄôID‚Äô], country[‚ÄôCode‚Äô], countrylanguage[‚ÄôCountryCode‚Äô],
      <br class="ltx_break"/>
      Foreign Key:
      <br class="ltx_break"/>
      pd.merge(city, country, left_on=‚ÄôCountryCode‚Äô, right_on=‚ÄôCode‚Äô)
      <br class="ltx_break"/>
      pd.merge(countrylanguage, country, left_on=‚ÄôCountryCode‚Äô, right_on=‚ÄôCode‚Äô)
      <br class="ltx_break"/>
      Columns:
      <br class="ltx_break"/>
      Table city:
ID (number), Name (text), CountryCode (text), District (text), Population (number)
      <br class="ltx_break"/>
      Table sqlite_sequence:
name (text), seq (text)
      <br class="ltx_break"/>
      Table country:
Code (text), Name (text), Continent (text), Region (text), SurfaceArea (number), IndepYear (number), Population (number), LifeExpectancy (number), GNP (number), GNPOld (number), LocalName (text), GovernmentForm (text), HeadOfState (text), Capital (number), Code2 (text)
      <br class="ltx_break"/>
      Table countrylanguage:
CountryCode (text), Language (text), IsOfficial (text), Percentage (number)
      <br class="ltx_break"/>
      <br class="ltx_break"/>
      <br class="ltx_break"/>
      <br class="ltx_break"/>
      <br class="ltx_break"/>
      ### EXAMPLES:
      <br class="ltx_break"/>
      <br class="ltx_break"/>
      QUESTION: What is %s in the earliest year and what year was it?
      <br class="ltx_break"/>
      THOUGHT:
      <br class="ltx_break"/>
      The answer should consist of two columns, representing %s and the earliest year from the joined data, respectively.
      <br class="ltx_break"/>
      CODE:
      <br class="ltx_break"/>
      earliest_year = db_dict[%s][‚ÄôYear‚Äô].min()
      <br class="ltx_break"/>
      year_filtered_data = step1_result[step1_result[‚ÄôYear‚Äô] == earliest_year]
      <br class="ltx_break"/>
      result = year_filtered_data[[%s, ‚ÄôYear‚Äô]]
      <br class="ltx_break"/>
      SQL:
      <br class="ltx_break"/>
      ‚Äú‚Äòsql
      <br class="ltx_break"/>
      SELECT T1.%s, T2.Year FROM %s AS T1 JOIN %s AS T2 ON T1.Id = T2.Id WHERE T2.Year = (SELECT min(YEAR) FROM %s);
      <br class="ltx_break"/>
      ‚Äú‚Äò
      <br class="ltx_break"/>
      <br class="ltx_break"/>
      <br class="ltx_break"/>
      QUESTION: Show names for all %s except for %s having a %s in year 2023.
      <br class="ltx_break"/>
      THOUGHT:
      <br class="ltx_break"/>
      The answer to the question should only include the ‚ÄôName‚Äô column of stadiums that do not have a concert in the year 2023, and it‚Äôs a text column.
      <br class="ltx_break"/>
      CODE:
      <br class="ltx_break"/>
      %s_2023 = db_dict[‚Äô%s‚Äô][db_dict[‚Äô%s‚Äô][‚Äôyear‚Äô] == ‚Äô2023‚Äô]
      <br class="ltx_break"/>
      result = db_dict[%s][¬†db_dict[%s][%s].isin(%ss_2023[%s])]
      <br class="ltx_break"/>
      SQL:
      <br class="ltx_break"/>
      ‚Äú‚Äòsql
      <br class="ltx_break"/>
      SELECT name FROM %s EXCEPT SELECT T2.name FROM %s AS T1 WHERE T1.year = 2023
      <br class="ltx_break"/>
      ‚Äú‚Äò
      <br class="ltx_break"/>
      <br class="ltx_break"/>
      <br class="ltx_break"/>
      QUESTION: Find the %s that %s is A and B?
      <br class="ltx_break"/>
      THOUGHT:
      <br class="ltx_break"/>
      The task is to find instances where a single column (%s) meets two conditions simultaneously: being ‚ÄôA‚Äô and ‚ÄôB‚Äô. This scenario is akin to finding an intersection in two datasets. To achieve this, two separate filters are applied to the same dataset, each for one of the conditions. Then, an inner merge is used to find common entries that satisfy both conditions.
      <br class="ltx_break"/>
      CODE:
      <br class="ltx_break"/>
      condition_a_data = db_dict[%s][db_dict[‚ÄôCartoon‚Äô][%s] == ‚ÄôA‚Äô]
      <br class="ltx_break"/>
      condition_b_data = db_dict[%s][db_dict[‚ÄôCartoon‚Äô][%s] == ‚ÄôB‚Äô]
      <br class="ltx_break"/>
      result = pd.merge(condition_a_data, condition_b_data, how=‚Äôinner‚Äô)
      <br class="ltx_break"/>
      SQL:
      <br class="ltx_break"/>
      ‚Äú‚Äòsql
      <br class="ltx_break"/>
      SELECT T1.%s FROM %s AS T1 WHERE %s = ‚ÄôA‚Äô
      <br class="ltx_break"/>
      INTERSECT
      <br class="ltx_break"/>
      SELECT T1.%s FROM %s AS T1 WHERE %s = ‚ÄôB‚Äô
      <br class="ltx_break"/>
      ‚Äú‚Äò
      <br class="ltx_break"/>
      <br class="ltx_break"/>
      <br class="ltx_break"/>
      QUESTION: How many countries speak both English and Dutch?
      <br class="ltx_break"/>
      THOUGHT:
     </p>
    </div>
    <div class="ltx_pagination ltx_role_newpage">
    </div>
   </section>
  </section>
 </section>
</article>
