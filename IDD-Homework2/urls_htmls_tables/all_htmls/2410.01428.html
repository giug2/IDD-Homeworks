<!DOCTYPE html>
<html lang="en">
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<title>Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks</title>
<!--Generated on Wed Oct  2 11:19:29 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv-fonts.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/latexml_styles.css" rel="stylesheet" type="text/css"/>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.3/html2canvas.min.js"></script>
<script src="/static/browse/0.3.4/js/addons_new.js"></script>
<script src="/static/browse/0.3.4/js/feedbackOverlay.js"></script>
<base href="/html/2410.01428v1/"/></head>
<body>
<nav class="ltx_page_navbar">
<nav class="ltx_TOC">
<ol class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S1" title="In Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1 </span>Introduction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S2" title="In Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2 </span>Critic-Guided Planning with Retrieval-Augmentation</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S2.SS1" title="In 2 Critic-Guided Planning with Retrieval-Augmentation ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.1 </span>Problem Formulation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S2.SS2" title="In 2 Critic-Guided Planning with Retrieval-Augmentation ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.2 </span>Inference of CR-Planner</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S2.SS2.SSS0.Px1" title="In 2.2 Inference of CR-Planner ‣ 2 Critic-Guided Planning with Retrieval-Augmentation ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title">Action selection using the critic models.</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S2.SS2.SSS0.Px2" title="In 2.2 Inference of CR-Planner ‣ 2 Critic-Guided Planning with Retrieval-Augmentation ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title">State transition with the selected action.</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S2.SS2.SSS0.Px3" title="In 2.2 Inference of CR-Planner ‣ 2 Critic-Guided Planning with Retrieval-Augmentation ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title">Termination conditions and the final answer.</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S2.SS3" title="In 2 Critic-Guided Planning with Retrieval-Augmentation ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.3 </span>The Critic Models</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S2.SS3.SSS0.Px1" title="In 2.3 The Critic Models ‣ 2 Critic-Guided Planning with Retrieval-Augmentation ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title">Collecting data via MCTS.</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S2.SS3.SSS0.Px2" title="In 2.3 The Critic Models ‣ 2 Critic-Guided Planning with Retrieval-Augmentation ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title">Training.</span></a></li>
</ol>
</li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S3" title="In Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3 </span>Experiments</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S3.SS1" title="In 3 Experiments ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.1 </span>Setup</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S3.SS1.SSS0.Px1" title="In 3.1 Setup ‣ 3 Experiments ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title">Models.</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S3.SS1.SSS0.Px2" title="In 3.1 Setup ‣ 3 Experiments ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title">Baselines.</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S3.SS2" title="In 3 Experiments ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.2 </span>Competitive Programming</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S3.SS2.SSS0.Px1" title="In 3.2 Competitive Programming ‣ 3 Experiments ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title">USACO benchmark.</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S3.SS2.SSS0.Px2" title="In 3.2 Competitive Programming ‣ 3 Experiments ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title">External knowledge.</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S3.SS2.SSS0.Px3" title="In 3.2 Competitive Programming ‣ 3 Experiments ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title">Results and observations.</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S3.SS3" title="In 3 Experiments ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.3 </span>Theorem-Driven Math Problems</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S3.SS3.SSS0.Px1" title="In 3.3 Theorem-Driven Math Problems ‣ 3 Experiments ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title">TheoremQA-Maths.</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S3.SS3.SSS0.Px2" title="In 3.3 Theorem-Driven Math Problems ‣ 3 Experiments ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title">External knowledge.</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S3.SS3.SSS0.Px3" title="In 3.3 Theorem-Driven Math Problems ‣ 3 Experiments ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title">Results and observation.</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S3.SS4" title="In 3 Experiments ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.4 </span>Reasoning-Heavy Domain Retrieval</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S3.SS4.SSS0.Px1" title="In 3.4 Reasoning-Heavy Domain Retrieval ‣ 3 Experiments ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title">StackBio and StackEcon.</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S3.SS4.SSS0.Px2" title="In 3.4 Reasoning-Heavy Domain Retrieval ‣ 3 Experiments ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title">External knowledge.</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S3.SS4.SSS0.Px3" title="In 3.4 Reasoning-Heavy Domain Retrieval ‣ 3 Experiments ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title">Results and observations.</span></a></li>
</ol>
</li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S4" title="In Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4 </span>Analysis</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S4.SS1" title="In 4 Analysis ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.1 </span>Domain-Specific Critic Models</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S4.SS2" title="In 4 Analysis ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.2 </span>Flexibility of Critic Models on Various Base Models</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S4.SS3" title="In 4 Analysis ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.3 </span>Retrieve or Not to Retrieve</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S4.SS4" title="In 4 Analysis ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.4 </span>Execution Sampling</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S5" title="In Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5 </span>Related Work</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S6" title="In Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">6 </span>Conclusions</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix">
<a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#A1" title="In Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A </span>Prompts Used in Different Methods</span></a>
<ol class="ltx_toclist ltx_toclist_appendix">
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#A1.SS1" title="In Appendix A Prompts Used in Different Methods ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.1 </span>RC-Planner (Competitive Programming)</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#A1.SS1.SSS1" title="In A.1 RC-Planner (Competitive Programming) ‣ Appendix A Prompts Used in Different Methods ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.1.1 </span>Instruction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#A1.SS1.SSS2" title="In A.1 RC-Planner (Competitive Programming) ‣ Appendix A Prompts Used in Different Methods ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.1.2 </span>SubGoal Selection</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#A1.SS1.SSS3" title="In A.1 RC-Planner (Competitive Programming) ‣ Appendix A Prompts Used in Different Methods ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.1.3 </span>Execution Selection - Rationale Sampling</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#A1.SS1.SSS4" title="In A.1 RC-Planner (Competitive Programming) ‣ Appendix A Prompts Used in Different Methods ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.1.4 </span>Execution Selection - Query Sampling</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#A1.SS2" title="In Appendix A Prompts Used in Different Methods ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.2 </span>CoT</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#A1.SS3" title="In Appendix A Prompts Used in Different Methods ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.3 </span>Chain-of-Knowledge</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#A1.SS3.SSS1" title="In A.3 Chain-of-Knowledge ‣ Appendix A Prompts Used in Different Methods ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.3.1 </span>Reasoning Generation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#A1.SS3.SSS2" title="In A.3 Chain-of-Knowledge ‣ Appendix A Prompts Used in Different Methods ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.3.2 </span>Rationale Correction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#A1.SS3.SSS3" title="In A.3 Chain-of-Knowledge ‣ Appendix A Prompts Used in Different Methods ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.3.3 </span>Next Rationale Generation</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#A1.SS4" title="In Appendix A Prompts Used in Different Methods ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.4 </span>Reflexion</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#A1.SS4.SSS1" title="In A.4 Reflexion ‣ Appendix A Prompts Used in Different Methods ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.4.1 </span>Actor</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#A1.SS4.SSS2" title="In A.4 Reflexion ‣ Appendix A Prompts Used in Different Methods ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.4.2 </span>Self-Reflection</span></a></li>
</ol>
</li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#A2" title="In Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">B </span>A Running Example</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#A3" title="In Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C </span>CR-Planner State Types and Action Spaces</span></a></li>
</ol></nav>
</nav>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line">
<h1 class="ltx_title ltx_title_document">Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Xingxuan Li<sup class="ltx_sup" id="id1.1.id1">1,2</sup> ,
Weiwen Xu<sup class="ltx_sup" id="id2.2.id2">1,3</sup>,
Ruochen Zhao<sup class="ltx_sup" id="id3.3.id3">1,3</sup>,
Fangkai Jiao<sup class="ltx_sup" id="id4.4.id4">2</sup>,
Shafiq Joty<sup class="ltx_sup" id="id5.5.id5">2,4</sup>,
Lidong Bing<sup class="ltx_sup" id="id6.6.id6">1,3</sup>
<br class="ltx_break"/><sup class="ltx_sup" id="id7.7.id7">1</sup>DAMO Academy, Alibaba Group, Singapore,
<sup class="ltx_sup" id="id8.8.id8">2</sup>Nanyang Technological University, 
<br class="ltx_break"/><sup class="ltx_sup" id="id9.9.id9">3</sup>Hupan Lab, 310023, Hangzhou, China,
<sup class="ltx_sup" id="id10.10.id10">4</sup>Salesforce Research
<br class="ltx_break"/><span class="ltx_text ltx_font_typewriter" id="id11.11.id11">{xingxuan.li, xuweiwen.xww, ruochen.zhao, l.bing}@alibaba-inc.com
<br class="ltx_break"/>{fangkai002, srjoty}@ntu.edu.sg</span>
</span><span class="ltx_author_notes">  Xingxuan Li is under the Joint Ph.D. Program between DAMO Academy and Nanyang Technological University.</span></span>
</div>
<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p class="ltx_p" id="id12.id1">State-of-the-art large language models (LLMs) exhibit impressive problem-solving capabilities but may struggle with complex reasoning and factual correctness. Existing methods harness the strengths of chain-of-thought (CoT) and retrieval-augmented generation (RAG) to decompose a complex problem into simpler steps and apply retrieval to improve factual correctness. These methods work well on straightforward reasoning tasks but often falter on challenging tasks such as competitive programming and mathematics, due to frequent reasoning errors and irrelevant knowledge retrieval. To address this, we introduce <span class="ltx_text ltx_font_bold" id="id12.id1.1">C</span>ritic-guided planning with <span class="ltx_text ltx_font_bold" id="id12.id1.2">R</span>etrieval-augmentation, CR-Planner, a novel framework that leverages fine-tuned critic models to guide both reasoning and retrieval processes through planning.
CR-Planner solves a problem by iteratively selecting and executing sub-goals. Initially, it identifies the most promising sub-goal from reasoning, query generation, and retrieval, guided by rewards given by a critic model named sub-goal critic. It then executes this sub-goal through sampling and selecting the optimal output based on evaluations from another critic model named execution critic.
This iterative process, informed by retrieved information and critic models, enables CR-Planner to effectively navigate the solution space towards the final answer.
We employ Monte Carlo Tree Search (MCTS) to collect the data for training the critic models, allowing for a systematic exploration of action sequences and their long-term impacts.
We validate CR-Planner on challenging domain-knowledge-intensive and reasoning-heavy tasks, including competitive programming, theorem-driven math reasoning, and complex domain retrieval problems. Our experiments demonstrate that CR-Planner significantly outperforms baselines, highlighting its effectiveness in addressing challenging problems by improving both reasoning and retrieval. <span class="ltx_note ltx_role_footnote" id="footnote1"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_tag ltx_tag_note">1</span>We will make our code and data publicly available.</span></span></span></p>
</div>
<section class="ltx_section" id="S1">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>Introduction</h2>
<div class="ltx_para ltx_noindent" id="S1.p1">
<p class="ltx_p" id="S1.p1.1">State-of-the-art large language models (LLMs), while demonstrating remarkable problem-solving capabilities <cite class="ltx_cite ltx_citemacro_citep">(OpenAI, <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib21" title="">2023</a>; Cheng et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib5" title="">2023</a>)</cite>, still face two key challenges: reasoning for complex tasks <cite class="ltx_cite ltx_citemacro_citep">(Huang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib12" title="">2024</a>)</cite> and domain-specific knowledge <cite class="ltx_cite ltx_citemacro_citep">(Zhao et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib36" title="">2023a</a>)</cite>.
Existing approaches <cite class="ltx_cite ltx_citemacro_citep">(Yao et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib34" title="">2023b</a>; Zhao et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib37" title="">2023b</a>; Li et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib17" title="">2024</a>)</cite> seek to harness the strengths of both chain-of-thought (CoT) reasoning <cite class="ltx_cite ltx_citemacro_citep">(Wei et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib31" title="">2022</a>)</cite> and retrieval-augmented generation (RAG) <cite class="ltx_cite ltx_citemacro_citep">(Lewis et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib15" title="">2020</a>)</cite> on knowledge-intensive
complex reasoning problems.
Specifically, instead of invoking RAG solely at the initial stage, these methods can potentially apply RAG at each reasoning step.
This integrated approach enhances both retrieval and reasoning, as the insights gained from reasoning enable the retrieval of more relevant information, while the retrieved knowledge improves the factuality of the subsequent reasoning steps of the model.
To better incorporate retrieval into reasoning, some methods, such as Self-RAG <cite class="ltx_cite ltx_citemacro_citep">(Asai et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib1" title="">2024</a>)</cite> and its variants <cite class="ltx_cite ltx_citemacro_citep">(Yan et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib32" title="">2024</a>; Islam et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib13" title="">2024</a>)</cite>, directly finetune LLMs to decide when to retrieve and whether to adopt the retrieved documents by adding special reflection tokens.</p>
</div>
<div class="ltx_para ltx_noindent" id="S1.p2">
<p class="ltx_p" id="S1.p2.2">While the above methods have shown prospects, they are generally limited to handling problems with relatively simple reasoning processes, such as answering two-hop questions like “What year was the Argentine actor who directed El Tio Disparate born?”
These methods often fail to solve <span class="ltx_text ltx_font_bold" id="S1.p2.2.1">domain-knowledge-intensive</span> and <span class="ltx_text ltx_font_bold" id="S1.p2.2.2">reasoning-heavy</span> problems, such as competitive programming problems <cite class="ltx_cite ltx_citemacro_citep">(Shi et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib26" title="">2024</a>)</cite> which require the model to possess rich algorithmic knowledge and strong reasoning capability.
Specifically, these methods often struggle with two significant types of errors, as shown in Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S1.F1" title="Figure 1 ‣ 1 Introduction ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_tag">1</span></a> (a).
The first is <span class="ltx_text ltx_font_bold" id="S1.p2.2.3">reasoning error</span>. When presented with the problem “Given a string <math alttext="\mathbf{s}" class="ltx_Math" display="inline" id="S1.p2.1.m1.1"><semantics id="S1.p2.1.m1.1a"><mi id="S1.p2.1.m1.1.1" xref="S1.p2.1.m1.1.1.cmml">𝐬</mi><annotation-xml encoding="MathML-Content" id="S1.p2.1.m1.1b"><ci id="S1.p2.1.m1.1.1.cmml" xref="S1.p2.1.m1.1.1">𝐬</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.p2.1.m1.1c">\mathbf{s}</annotation><annotation encoding="application/x-llamapun" id="S1.p2.1.m1.1d">bold_s</annotation></semantics></math>, find the length of the longest substring without repeating characters in optimal time complexity,” a CoT approach may incorrectly generate that “The optimal time complexity is <math alttext="O(n^{2})" class="ltx_Math" display="inline" id="S1.p2.2.m2.1"><semantics id="S1.p2.2.m2.1a"><mrow id="S1.p2.2.m2.1.1" xref="S1.p2.2.m2.1.1.cmml"><mi id="S1.p2.2.m2.1.1.3" xref="S1.p2.2.m2.1.1.3.cmml">O</mi><mo id="S1.p2.2.m2.1.1.2" xref="S1.p2.2.m2.1.1.2.cmml">⁢</mo><mrow id="S1.p2.2.m2.1.1.1.1" xref="S1.p2.2.m2.1.1.1.1.1.cmml"><mo id="S1.p2.2.m2.1.1.1.1.2" stretchy="false" xref="S1.p2.2.m2.1.1.1.1.1.cmml">(</mo><msup id="S1.p2.2.m2.1.1.1.1.1" xref="S1.p2.2.m2.1.1.1.1.1.cmml"><mi id="S1.p2.2.m2.1.1.1.1.1.2" xref="S1.p2.2.m2.1.1.1.1.1.2.cmml">n</mi><mn id="S1.p2.2.m2.1.1.1.1.1.3" xref="S1.p2.2.m2.1.1.1.1.1.3.cmml">2</mn></msup><mo id="S1.p2.2.m2.1.1.1.1.3" stretchy="false" xref="S1.p2.2.m2.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S1.p2.2.m2.1b"><apply id="S1.p2.2.m2.1.1.cmml" xref="S1.p2.2.m2.1.1"><times id="S1.p2.2.m2.1.1.2.cmml" xref="S1.p2.2.m2.1.1.2"></times><ci id="S1.p2.2.m2.1.1.3.cmml" xref="S1.p2.2.m2.1.1.3">𝑂</ci><apply id="S1.p2.2.m2.1.1.1.1.1.cmml" xref="S1.p2.2.m2.1.1.1.1"><csymbol cd="ambiguous" id="S1.p2.2.m2.1.1.1.1.1.1.cmml" xref="S1.p2.2.m2.1.1.1.1">superscript</csymbol><ci id="S1.p2.2.m2.1.1.1.1.1.2.cmml" xref="S1.p2.2.m2.1.1.1.1.1.2">𝑛</ci><cn id="S1.p2.2.m2.1.1.1.1.1.3.cmml" type="integer" xref="S1.p2.2.m2.1.1.1.1.1.3">2</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p2.2.m2.1c">O(n^{2})</annotation><annotation encoding="application/x-llamapun" id="S1.p2.2.m2.1d">italic_O ( italic_n start_POSTSUPERSCRIPT 2 end_POSTSUPERSCRIPT )</annotation></semantics></math>” in its initial reasoning step.
This erroneous reasoning step then cascades through subsequent steps, leading to an incorrect final answer.
The second type of error is <span class="ltx_text ltx_font_bold" id="S1.p2.2.4">retrieving error</span>.
The effectiveness of the retrieval process depends on the accuracy of the generated search queries and the selection of the retrieved documents. If the preceding reasoning step is flawed, the query generator could be misguided, leading the retriever to return misinformation, as shown in Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S1.F1" title="Figure 1 ‣ 1 Introduction ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_tag">1</span></a> (a).
Additionally, the selection of retrieved documents could be erroneous. Thus, the subsequent reasoning will be grounded on a wrong prior.</p>
</div>
<figure class="ltx_figure" id="S1.F1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="527" id="S1.F1.1.g1" src="x1.png" width="761"/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure">Figure 1: </span>
Comparison between (a) chain-of-thought reasoning <cite class="ltx_cite ltx_citemacro_citep">(Wei et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib31" title="">2022</a>)</cite> with retrieval-augmented generation <cite class="ltx_cite ltx_citemacro_citep">(Lewis et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib15" title="">2020</a>)</cite>
and (b) critic-guided planning with retrieval-augmentation or CR-Planner
(this work).
<span class="ltx_text ltx_font_bold ltx_font_italic" id="S1.F1.3.1">g(<math alttext="\cdot" class="ltx_Math" display="inline" id="S1.F1.3.1.m1.1"><semantics id="S1.F1.3.1.m1.1b"><mo id="S1.F1.3.1.m1.1.1" xref="S1.F1.3.1.m1.1.1.cmml">⋅</mo><annotation-xml encoding="MathML-Content" id="S1.F1.3.1.m1.1c"><ci id="S1.F1.3.1.m1.1.1.cmml" xref="S1.F1.3.1.m1.1.1">⋅</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.F1.3.1.m1.1d">\cdot</annotation><annotation encoding="application/x-llamapun" id="S1.F1.3.1.m1.1e">⋅</annotation></semantics></math>)</span> indicates the critic model (or value function) that assigns a reward (or value) to an action (see Equation <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S2.E2" title="In Action selection using the critic models. ‣ 2.2 Inference of CR-Planner ‣ 2 Critic-Guided Planning with Retrieval-Augmentation ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_tag">2</span></a>).
Texts in (b) highlighted in <span class="ltx_text" id="S1.F1.5.2" style="background-color:#B6D7A8;">green</span> are actions selected at each step.
For succinct presentation, only pivotal steps are shown in the figure.
</figcaption>
</figure>
<div class="ltx_para ltx_noindent" id="S1.p3">
<p class="ltx_p" id="S1.p3.1">To address these errors, we present critic-guided planning with retrieval-augmentation (CR-Planner),
a framework designed to tackle reasoning-heavy problems requiring extensive domain knowledge. CR-Planner systematically plans both reasoning and retrieval processes with specially fine-tuned critic models.
An example of CR-Planner in action is illustrated in Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S1.F1" title="Figure 1 ‣ 1 Introduction ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_tag">1</span></a> (b), using the question mentioned above.
CR-Planner begins with <span class="ltx_text ltx_font_bold" id="S1.p3.1.1">Sub-Goal Selection</span>, where it selects a sub-goal from three options: <span class="ltx_text ltx_font_smallcaps" id="S1.p3.1.2">Reason</span> (generating rationales), <span class="ltx_text ltx_font_smallcaps" id="S1.p3.1.3">GenQuery</span> (generating search queries), and <span class="ltx_text ltx_font_smallcaps" id="S1.p3.1.4">Retrieve</span> (retrieving documents), based on reward scores estimated by a critic model, <em class="ltx_emph ltx_font_italic" id="S1.p3.1.5">the sub-goal critic</em>.
After choosing the sub-goal of <span class="ltx_text ltx_font_smallcaps" id="S1.p3.1.6">Reason</span> in Step 1, CR-Planner proceeds to <span class="ltx_text ltx_font_bold" id="S1.p3.1.7">Execution Selection</span>, where it samples several candidate rationales for the next step. Another critic model, <em class="ltx_emph ltx_font_italic" id="S1.p3.1.8">the execution critic</em> is then employed to select the optimal rationale, which in this case is “The optimal time complexity is <math alttext="O(n)" class="ltx_Math" display="inline" id="S1.p3.1.m1.1"><semantics id="S1.p3.1.m1.1a"><mrow id="S1.p3.1.m1.1.2" xref="S1.p3.1.m1.1.2.cmml"><mi id="S1.p3.1.m1.1.2.2" xref="S1.p3.1.m1.1.2.2.cmml">O</mi><mo id="S1.p3.1.m1.1.2.1" xref="S1.p3.1.m1.1.2.1.cmml">⁢</mo><mrow id="S1.p3.1.m1.1.2.3.2" xref="S1.p3.1.m1.1.2.cmml"><mo id="S1.p3.1.m1.1.2.3.2.1" stretchy="false" xref="S1.p3.1.m1.1.2.cmml">(</mo><mi id="S1.p3.1.m1.1.1" xref="S1.p3.1.m1.1.1.cmml">n</mi><mo id="S1.p3.1.m1.1.2.3.2.2" stretchy="false" xref="S1.p3.1.m1.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S1.p3.1.m1.1b"><apply id="S1.p3.1.m1.1.2.cmml" xref="S1.p3.1.m1.1.2"><times id="S1.p3.1.m1.1.2.1.cmml" xref="S1.p3.1.m1.1.2.1"></times><ci id="S1.p3.1.m1.1.2.2.cmml" xref="S1.p3.1.m1.1.2.2">𝑂</ci><ci id="S1.p3.1.m1.1.1.cmml" xref="S1.p3.1.m1.1.1">𝑛</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p3.1.m1.1c">O(n)</annotation><annotation encoding="application/x-llamapun" id="S1.p3.1.m1.1d">italic_O ( italic_n )</annotation></semantics></math>.”
In Step 3, CR-Planner returns to sub-goal selection to determine the next best sub-goal.
This iterative process of alternating between sub-goal selection and execution selection continues until the final answer is reached, with each step effectively guided by the corresponding critic model.
Regarding the implementation, CR-Planner incorporates two types of LLMs: a large general generator model (<span class="ltx_text ltx_font_italic" id="S1.p3.1.9">e.g., </span>GPT-4) and small critic models (<span class="ltx_text ltx_font_italic" id="S1.p3.1.10">e.g., </span>Llama-3-8B) fine-tuned with domain-specific <em class="ltx_emph ltx_font_italic" id="S1.p3.1.11">(critiquing)</em> knowledge. Specifically, when executing a sub-goal, the generator model generates multiple candidate executions (<span class="ltx_text ltx_font_italic" id="S1.p3.1.12">e.g., </span>rationales or search queries, depending on the current sub-goal type). Then, an execution critic corresponding to the sub-goal type performs planning by selecting the most prospective option.
Such a design allows CR-Planner to leverage the generation and reasoning strengths of large generalist LLMs and meanwhile, its small critic models are easier to train with domain-specific <em class="ltx_emph ltx_font_italic" id="S1.p3.1.13">(critiquing)</em> knowledge.</p>
</div>
<div class="ltx_para ltx_noindent" id="S1.p4">
<p class="ltx_p" id="S1.p4.1">To optimize the planning performance for sub-goal and execution selection in each domain, we train the critic models separately.
The training process for these critic models requires the collection of reasoning and retrieval trajectories with step-wise reward labeling. However, the availability of such data is limited, and annotating it with humans poses significant costs <cite class="ltx_cite ltx_citemacro_citep">(Lightman et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib18" title="">2024</a>)</cite>. To address this data scarcity, we utilize Monte Carlo Tree Search (MCTS) <cite class="ltx_cite ltx_citemacro_citep">(Browne et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib2" title="">2012</a>)</cite> for efficient data collection.
MCTS estimates long-term expected rewards at each step by comparing simulated outcomes with gold labels and propagates the rewards back to the previous steps. By simulating multiple possible trajectories, we can get reliable rewards for each step, thereby effectively training the critic models to guide the reasoning and retrieval process at each step.</p>
</div>
<div class="ltx_para ltx_noindent" id="S1.p5">
<p class="ltx_p" id="S1.p5.1">In summary, our key contributions are:
(1) We introduce CR-Planner, a novel framework designed to tackle domain-knowledge-intensive and reasoning-heavy problems by employing specially fine-tuned critic models that guide both reasoning and retrieval processes through planning;
(2) We propose using MCTS to effectively collect training data for the critic models, enhancing their ability to estimate the long-term impact of an action.
(3) We perform extensive experiments on challenging tasks that require domain knowledge and complex reasoning, including competitive programming, math reasoning, and complex retrieval.
CR-Planner outperforms the baseline by 10.06% on average.
</p>
</div>
</section>
<section class="ltx_section" id="S2">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>Critic-Guided Planning with Retrieval-Augmentation</h2>
<div class="ltx_para ltx_noindent" id="S2.p1">
<p class="ltx_p" id="S2.p1.1">We introduce the critic-guided planning with retrieval-augmentation framework (CR-Planner)
 to address challenging tasks that are both domain-knowledge-intensive and reasoning-heavy.
 As shown in Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S2.F2" title="Figure 2 ‣ 2 Critic-Guided Planning with Retrieval-Augmentation ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_tag">2</span></a>, CR-Planner operates with two key components during inference:
<span class="ltx_text ltx_font_bold" id="S2.p1.1.1">(1) Sub-Goal Selection</span>: Given the current state, it employs a sub-goal critic model to determine the sub-goal among <span class="ltx_text ltx_font_smallcaps" id="S2.p1.1.2">Reason</span>, <span class="ltx_text ltx_font_smallcaps" id="S2.p1.1.3">GenQuery</span>, and <span class="ltx_text ltx_font_smallcaps" id="S2.p1.1.4">Retrieve</span> that leads towards the desired answer.
<span class="ltx_text ltx_font_bold" id="S2.p1.1.5">(2) Execution Selection</span>: Upon selecting a sub-goal, CR-Planner undertakes multiple possible executions to realize the sub-goal. For instance, it may generate multiple search queries to achieve the <span class="ltx_text ltx_font_smallcaps" id="S2.p1.1.6">GenQuery</span> sub-goal. Then, an execution critic model specifically designed to assess the executions for the sub-goal is employed to select the optimal execution among these candidates.
In the above process, a general generator model collaborates with multiple specialized critic models to address the task effectively. We leverage the strengths of the generator model to generate initial plans, while the specialized critic models are fine-tuned to guide optimal routing.
To ensure that the training data for the critic models is comprehensive and represents global reward information, we employ Monte Carlo Tree Search (MCTS) to collect the training data.</p>
</div>
<figure class="ltx_figure" id="S2.F2"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="385" id="S2.F2.1.g1" src="x2.png" width="761"/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure">Figure 2: </span>
The retrieval-augmented and critic-guided planning (CR-Planner) framework.
The figure illustrates training data collection via MCTS, critic model training, and inference.
For succinct presentation, <span class="ltx_text ltx_font_smallcaps" id="S2.F2.12.1">SubGoal</span> observations (<span class="ltx_text ltx_font_smallcaps" id="S2.F2.13.2">Reason</span>, <span class="ltx_text ltx_font_smallcaps" id="S2.F2.14.3">GenQuery</span>, and <span class="ltx_text ltx_font_smallcaps" id="S2.F2.15.4">Retrieve</span>) are shown as labeled rectangles and <span class="ltx_text ltx_font_smallcaps" id="S2.F2.16.5">Execution</span> observations (<span class="ltx_text ltx_font_smallcaps" id="S2.F2.17.6">Rationale</span>, <span class="ltx_text ltx_font_smallcaps" id="S2.F2.18.7">Query</span>, and <span class="ltx_text ltx_font_smallcaps" id="S2.F2.19.8">Doc</span>) as labeled circles.
A state <math alttext="s_{t}" class="ltx_Math" display="inline" id="S2.F2.3.m1.1"><semantics id="S2.F2.3.m1.1b"><msub id="S2.F2.3.m1.1.1" xref="S2.F2.3.m1.1.1.cmml"><mi id="S2.F2.3.m1.1.1.2" xref="S2.F2.3.m1.1.1.2.cmml">s</mi><mi id="S2.F2.3.m1.1.1.3" xref="S2.F2.3.m1.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S2.F2.3.m1.1c"><apply id="S2.F2.3.m1.1.1.cmml" xref="S2.F2.3.m1.1.1"><csymbol cd="ambiguous" id="S2.F2.3.m1.1.1.1.cmml" xref="S2.F2.3.m1.1.1">subscript</csymbol><ci id="S2.F2.3.m1.1.1.2.cmml" xref="S2.F2.3.m1.1.1.2">𝑠</ci><ci id="S2.F2.3.m1.1.1.3.cmml" xref="S2.F2.3.m1.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.F2.3.m1.1d">s_{t}</annotation><annotation encoding="application/x-llamapun" id="S2.F2.3.m1.1e">italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math> includes all preceding nodes (observations) and arrows (actions) up to the last node.
</figcaption>
</figure>
<section class="ltx_subsection" id="S2.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.1 </span>Problem Formulation</h3>
<div class="ltx_para ltx_noindent" id="S2.SS1.p1">
<p class="ltx_p" id="S2.SS1.p1.1">We formally define the associated planning environment of CR-Planner as a Markov Decision Process (MDP) represented by the tuple <math alttext="(\mathcal{S},\mathcal{A}_{s},\mathcal{P},\mathcal{R},T)" class="ltx_Math" display="inline" id="S2.SS1.p1.1.m1.5"><semantics id="S2.SS1.p1.1.m1.5a"><mrow id="S2.SS1.p1.1.m1.5.5.1" xref="S2.SS1.p1.1.m1.5.5.2.cmml"><mo id="S2.SS1.p1.1.m1.5.5.1.2" stretchy="false" xref="S2.SS1.p1.1.m1.5.5.2.cmml">(</mo><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p1.1.m1.1.1" xref="S2.SS1.p1.1.m1.1.1.cmml">𝒮</mi><mo id="S2.SS1.p1.1.m1.5.5.1.3" xref="S2.SS1.p1.1.m1.5.5.2.cmml">,</mo><msub id="S2.SS1.p1.1.m1.5.5.1.1" xref="S2.SS1.p1.1.m1.5.5.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p1.1.m1.5.5.1.1.2" xref="S2.SS1.p1.1.m1.5.5.1.1.2.cmml">𝒜</mi><mi id="S2.SS1.p1.1.m1.5.5.1.1.3" xref="S2.SS1.p1.1.m1.5.5.1.1.3.cmml">s</mi></msub><mo id="S2.SS1.p1.1.m1.5.5.1.4" xref="S2.SS1.p1.1.m1.5.5.2.cmml">,</mo><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p1.1.m1.2.2" xref="S2.SS1.p1.1.m1.2.2.cmml">𝒫</mi><mo id="S2.SS1.p1.1.m1.5.5.1.5" xref="S2.SS1.p1.1.m1.5.5.2.cmml">,</mo><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p1.1.m1.3.3" xref="S2.SS1.p1.1.m1.3.3.cmml">ℛ</mi><mo id="S2.SS1.p1.1.m1.5.5.1.6" xref="S2.SS1.p1.1.m1.5.5.2.cmml">,</mo><mi id="S2.SS1.p1.1.m1.4.4" xref="S2.SS1.p1.1.m1.4.4.cmml">T</mi><mo id="S2.SS1.p1.1.m1.5.5.1.7" stretchy="false" xref="S2.SS1.p1.1.m1.5.5.2.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.1.m1.5b"><vector id="S2.SS1.p1.1.m1.5.5.2.cmml" xref="S2.SS1.p1.1.m1.5.5.1"><ci id="S2.SS1.p1.1.m1.1.1.cmml" xref="S2.SS1.p1.1.m1.1.1">𝒮</ci><apply id="S2.SS1.p1.1.m1.5.5.1.1.cmml" xref="S2.SS1.p1.1.m1.5.5.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.1.m1.5.5.1.1.1.cmml" xref="S2.SS1.p1.1.m1.5.5.1.1">subscript</csymbol><ci id="S2.SS1.p1.1.m1.5.5.1.1.2.cmml" xref="S2.SS1.p1.1.m1.5.5.1.1.2">𝒜</ci><ci id="S2.SS1.p1.1.m1.5.5.1.1.3.cmml" xref="S2.SS1.p1.1.m1.5.5.1.1.3">𝑠</ci></apply><ci id="S2.SS1.p1.1.m1.2.2.cmml" xref="S2.SS1.p1.1.m1.2.2">𝒫</ci><ci id="S2.SS1.p1.1.m1.3.3.cmml" xref="S2.SS1.p1.1.m1.3.3">ℛ</ci><ci id="S2.SS1.p1.1.m1.4.4.cmml" xref="S2.SS1.p1.1.m1.4.4">𝑇</ci></vector></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.1.m1.5c">(\mathcal{S},\mathcal{A}_{s},\mathcal{P},\mathcal{R},T)</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.1.m1.5d">( caligraphic_S , caligraphic_A start_POSTSUBSCRIPT italic_s end_POSTSUBSCRIPT , caligraphic_P , caligraphic_R , italic_T )</annotation></semantics></math>, where:</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.SS1.p2">
<ul class="ltx_itemize" id="S2.I1">
<li class="ltx_item" id="S2.I1.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para ltx_noindent" id="S2.I1.i1.p1">
<p class="ltx_p" id="S2.I1.i1.p1.10"><math alttext="\mathcal{S}" class="ltx_Math" display="inline" id="S2.I1.i1.p1.1.m1.1"><semantics id="S2.I1.i1.p1.1.m1.1a"><mi class="ltx_font_mathcaligraphic" id="S2.I1.i1.p1.1.m1.1.1" xref="S2.I1.i1.p1.1.m1.1.1.cmml">𝒮</mi><annotation-xml encoding="MathML-Content" id="S2.I1.i1.p1.1.m1.1b"><ci id="S2.I1.i1.p1.1.m1.1.1.cmml" xref="S2.I1.i1.p1.1.m1.1.1">𝒮</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.I1.i1.p1.1.m1.1c">\mathcal{S}</annotation><annotation encoding="application/x-llamapun" id="S2.I1.i1.p1.1.m1.1d">caligraphic_S</annotation></semantics></math> represents the state space. Specifically, the state at timestamp <math alttext="t" class="ltx_Math" display="inline" id="S2.I1.i1.p1.2.m2.1"><semantics id="S2.I1.i1.p1.2.m2.1a"><mi id="S2.I1.i1.p1.2.m2.1.1" xref="S2.I1.i1.p1.2.m2.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S2.I1.i1.p1.2.m2.1b"><ci id="S2.I1.i1.p1.2.m2.1.1.cmml" xref="S2.I1.i1.p1.2.m2.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.I1.i1.p1.2.m2.1c">t</annotation><annotation encoding="application/x-llamapun" id="S2.I1.i1.p1.2.m2.1d">italic_t</annotation></semantics></math>, denoted by the random variable <math alttext="s_{t}" class="ltx_Math" display="inline" id="S2.I1.i1.p1.3.m3.1"><semantics id="S2.I1.i1.p1.3.m3.1a"><msub id="S2.I1.i1.p1.3.m3.1.1" xref="S2.I1.i1.p1.3.m3.1.1.cmml"><mi id="S2.I1.i1.p1.3.m3.1.1.2" xref="S2.I1.i1.p1.3.m3.1.1.2.cmml">s</mi><mi id="S2.I1.i1.p1.3.m3.1.1.3" xref="S2.I1.i1.p1.3.m3.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S2.I1.i1.p1.3.m3.1b"><apply id="S2.I1.i1.p1.3.m3.1.1.cmml" xref="S2.I1.i1.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S2.I1.i1.p1.3.m3.1.1.1.cmml" xref="S2.I1.i1.p1.3.m3.1.1">subscript</csymbol><ci id="S2.I1.i1.p1.3.m3.1.1.2.cmml" xref="S2.I1.i1.p1.3.m3.1.1.2">𝑠</ci><ci id="S2.I1.i1.p1.3.m3.1.1.3.cmml" xref="S2.I1.i1.p1.3.m3.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.I1.i1.p1.3.m3.1c">s_{t}</annotation><annotation encoding="application/x-llamapun" id="S2.I1.i1.p1.3.m3.1d">italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math>, comprises a action-observation trajectory history <math alttext="(o_{0},a_{0},...,a_{t-1},o_{t})" class="ltx_Math" display="inline" id="S2.I1.i1.p1.4.m4.5"><semantics id="S2.I1.i1.p1.4.m4.5a"><mrow id="S2.I1.i1.p1.4.m4.5.5.4" xref="S2.I1.i1.p1.4.m4.5.5.5.cmml"><mo id="S2.I1.i1.p1.4.m4.5.5.4.5" stretchy="false" xref="S2.I1.i1.p1.4.m4.5.5.5.cmml">(</mo><msub id="S2.I1.i1.p1.4.m4.2.2.1.1" xref="S2.I1.i1.p1.4.m4.2.2.1.1.cmml"><mi id="S2.I1.i1.p1.4.m4.2.2.1.1.2" xref="S2.I1.i1.p1.4.m4.2.2.1.1.2.cmml">o</mi><mn id="S2.I1.i1.p1.4.m4.2.2.1.1.3" xref="S2.I1.i1.p1.4.m4.2.2.1.1.3.cmml">0</mn></msub><mo id="S2.I1.i1.p1.4.m4.5.5.4.6" xref="S2.I1.i1.p1.4.m4.5.5.5.cmml">,</mo><msub id="S2.I1.i1.p1.4.m4.3.3.2.2" xref="S2.I1.i1.p1.4.m4.3.3.2.2.cmml"><mi id="S2.I1.i1.p1.4.m4.3.3.2.2.2" xref="S2.I1.i1.p1.4.m4.3.3.2.2.2.cmml">a</mi><mn id="S2.I1.i1.p1.4.m4.3.3.2.2.3" xref="S2.I1.i1.p1.4.m4.3.3.2.2.3.cmml">0</mn></msub><mo id="S2.I1.i1.p1.4.m4.5.5.4.7" xref="S2.I1.i1.p1.4.m4.5.5.5.cmml">,</mo><mi id="S2.I1.i1.p1.4.m4.1.1" mathvariant="normal" xref="S2.I1.i1.p1.4.m4.1.1.cmml">…</mi><mo id="S2.I1.i1.p1.4.m4.5.5.4.8" xref="S2.I1.i1.p1.4.m4.5.5.5.cmml">,</mo><msub id="S2.I1.i1.p1.4.m4.4.4.3.3" xref="S2.I1.i1.p1.4.m4.4.4.3.3.cmml"><mi id="S2.I1.i1.p1.4.m4.4.4.3.3.2" xref="S2.I1.i1.p1.4.m4.4.4.3.3.2.cmml">a</mi><mrow id="S2.I1.i1.p1.4.m4.4.4.3.3.3" xref="S2.I1.i1.p1.4.m4.4.4.3.3.3.cmml"><mi id="S2.I1.i1.p1.4.m4.4.4.3.3.3.2" xref="S2.I1.i1.p1.4.m4.4.4.3.3.3.2.cmml">t</mi><mo id="S2.I1.i1.p1.4.m4.4.4.3.3.3.1" xref="S2.I1.i1.p1.4.m4.4.4.3.3.3.1.cmml">−</mo><mn id="S2.I1.i1.p1.4.m4.4.4.3.3.3.3" xref="S2.I1.i1.p1.4.m4.4.4.3.3.3.3.cmml">1</mn></mrow></msub><mo id="S2.I1.i1.p1.4.m4.5.5.4.9" xref="S2.I1.i1.p1.4.m4.5.5.5.cmml">,</mo><msub id="S2.I1.i1.p1.4.m4.5.5.4.4" xref="S2.I1.i1.p1.4.m4.5.5.4.4.cmml"><mi id="S2.I1.i1.p1.4.m4.5.5.4.4.2" xref="S2.I1.i1.p1.4.m4.5.5.4.4.2.cmml">o</mi><mi id="S2.I1.i1.p1.4.m4.5.5.4.4.3" xref="S2.I1.i1.p1.4.m4.5.5.4.4.3.cmml">t</mi></msub><mo id="S2.I1.i1.p1.4.m4.5.5.4.10" stretchy="false" xref="S2.I1.i1.p1.4.m4.5.5.5.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.I1.i1.p1.4.m4.5b"><vector id="S2.I1.i1.p1.4.m4.5.5.5.cmml" xref="S2.I1.i1.p1.4.m4.5.5.4"><apply id="S2.I1.i1.p1.4.m4.2.2.1.1.cmml" xref="S2.I1.i1.p1.4.m4.2.2.1.1"><csymbol cd="ambiguous" id="S2.I1.i1.p1.4.m4.2.2.1.1.1.cmml" xref="S2.I1.i1.p1.4.m4.2.2.1.1">subscript</csymbol><ci id="S2.I1.i1.p1.4.m4.2.2.1.1.2.cmml" xref="S2.I1.i1.p1.4.m4.2.2.1.1.2">𝑜</ci><cn id="S2.I1.i1.p1.4.m4.2.2.1.1.3.cmml" type="integer" xref="S2.I1.i1.p1.4.m4.2.2.1.1.3">0</cn></apply><apply id="S2.I1.i1.p1.4.m4.3.3.2.2.cmml" xref="S2.I1.i1.p1.4.m4.3.3.2.2"><csymbol cd="ambiguous" id="S2.I1.i1.p1.4.m4.3.3.2.2.1.cmml" xref="S2.I1.i1.p1.4.m4.3.3.2.2">subscript</csymbol><ci id="S2.I1.i1.p1.4.m4.3.3.2.2.2.cmml" xref="S2.I1.i1.p1.4.m4.3.3.2.2.2">𝑎</ci><cn id="S2.I1.i1.p1.4.m4.3.3.2.2.3.cmml" type="integer" xref="S2.I1.i1.p1.4.m4.3.3.2.2.3">0</cn></apply><ci id="S2.I1.i1.p1.4.m4.1.1.cmml" xref="S2.I1.i1.p1.4.m4.1.1">…</ci><apply id="S2.I1.i1.p1.4.m4.4.4.3.3.cmml" xref="S2.I1.i1.p1.4.m4.4.4.3.3"><csymbol cd="ambiguous" id="S2.I1.i1.p1.4.m4.4.4.3.3.1.cmml" xref="S2.I1.i1.p1.4.m4.4.4.3.3">subscript</csymbol><ci id="S2.I1.i1.p1.4.m4.4.4.3.3.2.cmml" xref="S2.I1.i1.p1.4.m4.4.4.3.3.2">𝑎</ci><apply id="S2.I1.i1.p1.4.m4.4.4.3.3.3.cmml" xref="S2.I1.i1.p1.4.m4.4.4.3.3.3"><minus id="S2.I1.i1.p1.4.m4.4.4.3.3.3.1.cmml" xref="S2.I1.i1.p1.4.m4.4.4.3.3.3.1"></minus><ci id="S2.I1.i1.p1.4.m4.4.4.3.3.3.2.cmml" xref="S2.I1.i1.p1.4.m4.4.4.3.3.3.2">𝑡</ci><cn id="S2.I1.i1.p1.4.m4.4.4.3.3.3.3.cmml" type="integer" xref="S2.I1.i1.p1.4.m4.4.4.3.3.3.3">1</cn></apply></apply><apply id="S2.I1.i1.p1.4.m4.5.5.4.4.cmml" xref="S2.I1.i1.p1.4.m4.5.5.4.4"><csymbol cd="ambiguous" id="S2.I1.i1.p1.4.m4.5.5.4.4.1.cmml" xref="S2.I1.i1.p1.4.m4.5.5.4.4">subscript</csymbol><ci id="S2.I1.i1.p1.4.m4.5.5.4.4.2.cmml" xref="S2.I1.i1.p1.4.m4.5.5.4.4.2">𝑜</ci><ci id="S2.I1.i1.p1.4.m4.5.5.4.4.3.cmml" xref="S2.I1.i1.p1.4.m4.5.5.4.4.3">𝑡</ci></apply></vector></annotation-xml><annotation encoding="application/x-tex" id="S2.I1.i1.p1.4.m4.5c">(o_{0},a_{0},...,a_{t-1},o_{t})</annotation><annotation encoding="application/x-llamapun" id="S2.I1.i1.p1.4.m4.5d">( italic_o start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT , italic_a start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT , … , italic_a start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT , italic_o start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT )</annotation></semantics></math>, where <math alttext="a_{t-1}" class="ltx_Math" display="inline" id="S2.I1.i1.p1.5.m5.1"><semantics id="S2.I1.i1.p1.5.m5.1a"><msub id="S2.I1.i1.p1.5.m5.1.1" xref="S2.I1.i1.p1.5.m5.1.1.cmml"><mi id="S2.I1.i1.p1.5.m5.1.1.2" xref="S2.I1.i1.p1.5.m5.1.1.2.cmml">a</mi><mrow id="S2.I1.i1.p1.5.m5.1.1.3" xref="S2.I1.i1.p1.5.m5.1.1.3.cmml"><mi id="S2.I1.i1.p1.5.m5.1.1.3.2" xref="S2.I1.i1.p1.5.m5.1.1.3.2.cmml">t</mi><mo id="S2.I1.i1.p1.5.m5.1.1.3.1" xref="S2.I1.i1.p1.5.m5.1.1.3.1.cmml">−</mo><mn id="S2.I1.i1.p1.5.m5.1.1.3.3" xref="S2.I1.i1.p1.5.m5.1.1.3.3.cmml">1</mn></mrow></msub><annotation-xml encoding="MathML-Content" id="S2.I1.i1.p1.5.m5.1b"><apply id="S2.I1.i1.p1.5.m5.1.1.cmml" xref="S2.I1.i1.p1.5.m5.1.1"><csymbol cd="ambiguous" id="S2.I1.i1.p1.5.m5.1.1.1.cmml" xref="S2.I1.i1.p1.5.m5.1.1">subscript</csymbol><ci id="S2.I1.i1.p1.5.m5.1.1.2.cmml" xref="S2.I1.i1.p1.5.m5.1.1.2">𝑎</ci><apply id="S2.I1.i1.p1.5.m5.1.1.3.cmml" xref="S2.I1.i1.p1.5.m5.1.1.3"><minus id="S2.I1.i1.p1.5.m5.1.1.3.1.cmml" xref="S2.I1.i1.p1.5.m5.1.1.3.1"></minus><ci id="S2.I1.i1.p1.5.m5.1.1.3.2.cmml" xref="S2.I1.i1.p1.5.m5.1.1.3.2">𝑡</ci><cn id="S2.I1.i1.p1.5.m5.1.1.3.3.cmml" type="integer" xref="S2.I1.i1.p1.5.m5.1.1.3.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.I1.i1.p1.5.m5.1c">a_{t-1}</annotation><annotation encoding="application/x-llamapun" id="S2.I1.i1.p1.5.m5.1d">italic_a start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT</annotation></semantics></math> is the action taken at timestep <math alttext="t-1" class="ltx_Math" display="inline" id="S2.I1.i1.p1.6.m6.1"><semantics id="S2.I1.i1.p1.6.m6.1a"><mrow id="S2.I1.i1.p1.6.m6.1.1" xref="S2.I1.i1.p1.6.m6.1.1.cmml"><mi id="S2.I1.i1.p1.6.m6.1.1.2" xref="S2.I1.i1.p1.6.m6.1.1.2.cmml">t</mi><mo id="S2.I1.i1.p1.6.m6.1.1.1" xref="S2.I1.i1.p1.6.m6.1.1.1.cmml">−</mo><mn id="S2.I1.i1.p1.6.m6.1.1.3" xref="S2.I1.i1.p1.6.m6.1.1.3.cmml">1</mn></mrow><annotation-xml encoding="MathML-Content" id="S2.I1.i1.p1.6.m6.1b"><apply id="S2.I1.i1.p1.6.m6.1.1.cmml" xref="S2.I1.i1.p1.6.m6.1.1"><minus id="S2.I1.i1.p1.6.m6.1.1.1.cmml" xref="S2.I1.i1.p1.6.m6.1.1.1"></minus><ci id="S2.I1.i1.p1.6.m6.1.1.2.cmml" xref="S2.I1.i1.p1.6.m6.1.1.2">𝑡</ci><cn id="S2.I1.i1.p1.6.m6.1.1.3.cmml" type="integer" xref="S2.I1.i1.p1.6.m6.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.I1.i1.p1.6.m6.1c">t-1</annotation><annotation encoding="application/x-llamapun" id="S2.I1.i1.p1.6.m6.1d">italic_t - 1</annotation></semantics></math>, and <math alttext="o_{t}" class="ltx_Math" display="inline" id="S2.I1.i1.p1.7.m7.1"><semantics id="S2.I1.i1.p1.7.m7.1a"><msub id="S2.I1.i1.p1.7.m7.1.1" xref="S2.I1.i1.p1.7.m7.1.1.cmml"><mi id="S2.I1.i1.p1.7.m7.1.1.2" xref="S2.I1.i1.p1.7.m7.1.1.2.cmml">o</mi><mi id="S2.I1.i1.p1.7.m7.1.1.3" xref="S2.I1.i1.p1.7.m7.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S2.I1.i1.p1.7.m7.1b"><apply id="S2.I1.i1.p1.7.m7.1.1.cmml" xref="S2.I1.i1.p1.7.m7.1.1"><csymbol cd="ambiguous" id="S2.I1.i1.p1.7.m7.1.1.1.cmml" xref="S2.I1.i1.p1.7.m7.1.1">subscript</csymbol><ci id="S2.I1.i1.p1.7.m7.1.1.2.cmml" xref="S2.I1.i1.p1.7.m7.1.1.2">𝑜</ci><ci id="S2.I1.i1.p1.7.m7.1.1.3.cmml" xref="S2.I1.i1.p1.7.m7.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.I1.i1.p1.7.m7.1c">o_{t}</annotation><annotation encoding="application/x-llamapun" id="S2.I1.i1.p1.7.m7.1d">italic_o start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math> is the observation made after that.
The observation <math alttext="o" class="ltx_Math" display="inline" id="S2.I1.i1.p1.8.m8.1"><semantics id="S2.I1.i1.p1.8.m8.1a"><mi id="S2.I1.i1.p1.8.m8.1.1" xref="S2.I1.i1.p1.8.m8.1.1.cmml">o</mi><annotation-xml encoding="MathML-Content" id="S2.I1.i1.p1.8.m8.1b"><ci id="S2.I1.i1.p1.8.m8.1.1.cmml" xref="S2.I1.i1.p1.8.m8.1.1">𝑜</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.I1.i1.p1.8.m8.1c">o</annotation><annotation encoding="application/x-llamapun" id="S2.I1.i1.p1.8.m8.1d">italic_o</annotation></semantics></math> can be <span class="ltx_text ltx_font_smallcaps" id="S2.I1.i1.p1.10.1">Reason</span>, <span class="ltx_text ltx_font_smallcaps" id="S2.I1.i1.p1.10.2">GenQuery</span>, or <span class="ltx_text ltx_font_smallcaps" id="S2.I1.i1.p1.10.3">Retrieve</span> in sub-goal selection stage, and <span class="ltx_text ltx_font_smallcaps" id="S2.I1.i1.p1.10.4">Rationale</span>, <span class="ltx_text ltx_font_smallcaps" id="S2.I1.i1.p1.10.5">Query</span>, or <span class="ltx_text ltx_font_smallcaps" id="S2.I1.i1.p1.10.6">Doc</span> in execution selection stage. Additionally, a state is named after its last observation, <span class="ltx_text ltx_font_italic" id="S2.I1.i1.p1.10.7">e.g., <span class="ltx_text ltx_font_smallcaps" id="S2.I1.i1.p1.10.7.1">Rationale</span></span> state <math alttext="s_{t}" class="ltx_Math" display="inline" id="S2.I1.i1.p1.9.m9.1"><semantics id="S2.I1.i1.p1.9.m9.1a"><msub id="S2.I1.i1.p1.9.m9.1.1" xref="S2.I1.i1.p1.9.m9.1.1.cmml"><mi id="S2.I1.i1.p1.9.m9.1.1.2" xref="S2.I1.i1.p1.9.m9.1.1.2.cmml">s</mi><mi id="S2.I1.i1.p1.9.m9.1.1.3" xref="S2.I1.i1.p1.9.m9.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S2.I1.i1.p1.9.m9.1b"><apply id="S2.I1.i1.p1.9.m9.1.1.cmml" xref="S2.I1.i1.p1.9.m9.1.1"><csymbol cd="ambiguous" id="S2.I1.i1.p1.9.m9.1.1.1.cmml" xref="S2.I1.i1.p1.9.m9.1.1">subscript</csymbol><ci id="S2.I1.i1.p1.9.m9.1.1.2.cmml" xref="S2.I1.i1.p1.9.m9.1.1.2">𝑠</ci><ci id="S2.I1.i1.p1.9.m9.1.1.3.cmml" xref="S2.I1.i1.p1.9.m9.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.I1.i1.p1.9.m9.1c">s_{t}</annotation><annotation encoding="application/x-llamapun" id="S2.I1.i1.p1.9.m9.1d">italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math> means <math alttext="o_{t}" class="ltx_Math" display="inline" id="S2.I1.i1.p1.10.m10.1"><semantics id="S2.I1.i1.p1.10.m10.1a"><msub id="S2.I1.i1.p1.10.m10.1.1" xref="S2.I1.i1.p1.10.m10.1.1.cmml"><mi id="S2.I1.i1.p1.10.m10.1.1.2" xref="S2.I1.i1.p1.10.m10.1.1.2.cmml">o</mi><mi id="S2.I1.i1.p1.10.m10.1.1.3" xref="S2.I1.i1.p1.10.m10.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S2.I1.i1.p1.10.m10.1b"><apply id="S2.I1.i1.p1.10.m10.1.1.cmml" xref="S2.I1.i1.p1.10.m10.1.1"><csymbol cd="ambiguous" id="S2.I1.i1.p1.10.m10.1.1.1.cmml" xref="S2.I1.i1.p1.10.m10.1.1">subscript</csymbol><ci id="S2.I1.i1.p1.10.m10.1.1.2.cmml" xref="S2.I1.i1.p1.10.m10.1.1.2">𝑜</ci><ci id="S2.I1.i1.p1.10.m10.1.1.3.cmml" xref="S2.I1.i1.p1.10.m10.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.I1.i1.p1.10.m10.1c">o_{t}</annotation><annotation encoding="application/x-llamapun" id="S2.I1.i1.p1.10.m10.1d">italic_o start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math> is a <span class="ltx_text ltx_font_smallcaps" id="S2.I1.i1.p1.10.8">Rationale</span>.</p>
</div>
</li>
<li class="ltx_item" id="S2.I1.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para ltx_noindent" id="S2.I1.i2.p1">
<p class="ltx_p" id="S2.I1.i2.p1.1"><math alttext="\mathcal{A}_{s}" class="ltx_Math" display="inline" id="S2.I1.i2.p1.1.m1.1"><semantics id="S2.I1.i2.p1.1.m1.1a"><msub id="S2.I1.i2.p1.1.m1.1.1" xref="S2.I1.i2.p1.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.I1.i2.p1.1.m1.1.1.2" xref="S2.I1.i2.p1.1.m1.1.1.2.cmml">𝒜</mi><mi id="S2.I1.i2.p1.1.m1.1.1.3" xref="S2.I1.i2.p1.1.m1.1.1.3.cmml">s</mi></msub><annotation-xml encoding="MathML-Content" id="S2.I1.i2.p1.1.m1.1b"><apply id="S2.I1.i2.p1.1.m1.1.1.cmml" xref="S2.I1.i2.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S2.I1.i2.p1.1.m1.1.1.1.cmml" xref="S2.I1.i2.p1.1.m1.1.1">subscript</csymbol><ci id="S2.I1.i2.p1.1.m1.1.1.2.cmml" xref="S2.I1.i2.p1.1.m1.1.1.2">𝒜</ci><ci id="S2.I1.i2.p1.1.m1.1.1.3.cmml" xref="S2.I1.i2.p1.1.m1.1.1.3">𝑠</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.I1.i2.p1.1.m1.1c">\mathcal{A}_{s}</annotation><annotation encoding="application/x-llamapun" id="S2.I1.i2.p1.1.m1.1d">caligraphic_A start_POSTSUBSCRIPT italic_s end_POSTSUBSCRIPT</annotation></semantics></math> represents the actions available at each state. For example, the actions available at the sub-goal selection stage, <span class="ltx_text ltx_font_italic" id="S2.I1.i2.p1.1.1">i.e., </span>at the <span class="ltx_text ltx_font_typewriter" id="S2.I1.i2.p1.1.2">Root</span> state or after observing an outcome of an execution selection are: <em class="ltx_emph ltx_font_italic" id="S2.I1.i2.p1.1.3">reasoning</em>, <em class="ltx_emph ltx_font_italic" id="S2.I1.i2.p1.1.4">querying</em>, and <em class="ltx_emph ltx_font_italic" id="S2.I1.i2.p1.1.5">retrieving</em>.
The possible actions available at the execution selection stage arise from the sampling for the corresponding sub-goal (<span class="ltx_text ltx_font_italic" id="S2.I1.i2.p1.1.6">i.e., </span>temperature sampling for <span class="ltx_text ltx_font_smallcaps" id="S2.I1.i2.p1.1.7">Reason</span> and <span class="ltx_text ltx_font_smallcaps" id="S2.I1.i2.p1.1.8">GenQuery</span>, and top-k candidates for <span class="ltx_text ltx_font_smallcaps" id="S2.I1.i2.p1.1.9">Retrieve</span>). For example, Steps 1 and 2 in Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S1.F1" title="Figure 1 ‣ 1 Introduction ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_tag">1</span></a> (b) illustrate the <span class="ltx_text ltx_font_smallcaps" id="S2.I1.i2.p1.1.10">Reason</span> and <span class="ltx_text ltx_font_smallcaps" id="S2.I1.i2.p1.1.11">Rationale</span> observations generated following the sub-goal selection and execution selection stages, respectively.</p>
</div>
</li>
<li class="ltx_item" id="S2.I1.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para ltx_noindent" id="S2.I1.i3.p1">
<p class="ltx_p" id="S2.I1.i3.p1.4">The state transition <math alttext="\mathcal{P}" class="ltx_Math" display="inline" id="S2.I1.i3.p1.1.m1.1"><semantics id="S2.I1.i3.p1.1.m1.1a"><mi class="ltx_font_mathcaligraphic" id="S2.I1.i3.p1.1.m1.1.1" xref="S2.I1.i3.p1.1.m1.1.1.cmml">𝒫</mi><annotation-xml encoding="MathML-Content" id="S2.I1.i3.p1.1.m1.1b"><ci id="S2.I1.i3.p1.1.m1.1.1.cmml" xref="S2.I1.i3.p1.1.m1.1.1">𝒫</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.I1.i3.p1.1.m1.1c">\mathcal{P}</annotation><annotation encoding="application/x-llamapun" id="S2.I1.i3.p1.1.m1.1d">caligraphic_P</annotation></semantics></math> defines how the states evolve after an action is taken. In our context, state transitions are determined and handled by different functions depending on the current state.
During the execution selection stage, a <span class="ltx_text ltx_font_smallcaps" id="S2.I1.i3.p1.4.1">Reason</span> or <span class="ltx_text ltx_font_smallcaps" id="S2.I1.i3.p1.4.2">GenQuery</span> state transits to the respective <span class="ltx_text ltx_font_smallcaps" id="S2.I1.i3.p1.4.3">Rationale</span> or <span class="ltx_text ltx_font_smallcaps" id="S2.I1.i3.p1.4.4">Query</span> execution outcomes via the distribution defined by a large general generator model <math alttext="f_{gen}(\cdot)" class="ltx_Math" display="inline" id="S2.I1.i3.p1.2.m2.1"><semantics id="S2.I1.i3.p1.2.m2.1a"><mrow id="S2.I1.i3.p1.2.m2.1.2" xref="S2.I1.i3.p1.2.m2.1.2.cmml"><msub id="S2.I1.i3.p1.2.m2.1.2.2" xref="S2.I1.i3.p1.2.m2.1.2.2.cmml"><mi id="S2.I1.i3.p1.2.m2.1.2.2.2" xref="S2.I1.i3.p1.2.m2.1.2.2.2.cmml">f</mi><mrow id="S2.I1.i3.p1.2.m2.1.2.2.3" xref="S2.I1.i3.p1.2.m2.1.2.2.3.cmml"><mi id="S2.I1.i3.p1.2.m2.1.2.2.3.2" xref="S2.I1.i3.p1.2.m2.1.2.2.3.2.cmml">g</mi><mo id="S2.I1.i3.p1.2.m2.1.2.2.3.1" xref="S2.I1.i3.p1.2.m2.1.2.2.3.1.cmml">⁢</mo><mi id="S2.I1.i3.p1.2.m2.1.2.2.3.3" xref="S2.I1.i3.p1.2.m2.1.2.2.3.3.cmml">e</mi><mo id="S2.I1.i3.p1.2.m2.1.2.2.3.1a" xref="S2.I1.i3.p1.2.m2.1.2.2.3.1.cmml">⁢</mo><mi id="S2.I1.i3.p1.2.m2.1.2.2.3.4" xref="S2.I1.i3.p1.2.m2.1.2.2.3.4.cmml">n</mi></mrow></msub><mo id="S2.I1.i3.p1.2.m2.1.2.1" xref="S2.I1.i3.p1.2.m2.1.2.1.cmml">⁢</mo><mrow id="S2.I1.i3.p1.2.m2.1.2.3.2" xref="S2.I1.i3.p1.2.m2.1.2.cmml"><mo id="S2.I1.i3.p1.2.m2.1.2.3.2.1" stretchy="false" xref="S2.I1.i3.p1.2.m2.1.2.cmml">(</mo><mo id="S2.I1.i3.p1.2.m2.1.1" lspace="0em" rspace="0em" xref="S2.I1.i3.p1.2.m2.1.1.cmml">⋅</mo><mo id="S2.I1.i3.p1.2.m2.1.2.3.2.2" stretchy="false" xref="S2.I1.i3.p1.2.m2.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.I1.i3.p1.2.m2.1b"><apply id="S2.I1.i3.p1.2.m2.1.2.cmml" xref="S2.I1.i3.p1.2.m2.1.2"><times id="S2.I1.i3.p1.2.m2.1.2.1.cmml" xref="S2.I1.i3.p1.2.m2.1.2.1"></times><apply id="S2.I1.i3.p1.2.m2.1.2.2.cmml" xref="S2.I1.i3.p1.2.m2.1.2.2"><csymbol cd="ambiguous" id="S2.I1.i3.p1.2.m2.1.2.2.1.cmml" xref="S2.I1.i3.p1.2.m2.1.2.2">subscript</csymbol><ci id="S2.I1.i3.p1.2.m2.1.2.2.2.cmml" xref="S2.I1.i3.p1.2.m2.1.2.2.2">𝑓</ci><apply id="S2.I1.i3.p1.2.m2.1.2.2.3.cmml" xref="S2.I1.i3.p1.2.m2.1.2.2.3"><times id="S2.I1.i3.p1.2.m2.1.2.2.3.1.cmml" xref="S2.I1.i3.p1.2.m2.1.2.2.3.1"></times><ci id="S2.I1.i3.p1.2.m2.1.2.2.3.2.cmml" xref="S2.I1.i3.p1.2.m2.1.2.2.3.2">𝑔</ci><ci id="S2.I1.i3.p1.2.m2.1.2.2.3.3.cmml" xref="S2.I1.i3.p1.2.m2.1.2.2.3.3">𝑒</ci><ci id="S2.I1.i3.p1.2.m2.1.2.2.3.4.cmml" xref="S2.I1.i3.p1.2.m2.1.2.2.3.4">𝑛</ci></apply></apply><ci id="S2.I1.i3.p1.2.m2.1.1.cmml" xref="S2.I1.i3.p1.2.m2.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.I1.i3.p1.2.m2.1c">f_{gen}(\cdot)</annotation><annotation encoding="application/x-llamapun" id="S2.I1.i3.p1.2.m2.1d">italic_f start_POSTSUBSCRIPT italic_g italic_e italic_n end_POSTSUBSCRIPT ( ⋅ )</annotation></semantics></math>. Similarly, a <span class="ltx_text ltx_font_smallcaps" id="S2.I1.i3.p1.4.5">Retrieve</span> state transits to a <span class="ltx_text ltx_font_smallcaps" id="S2.I1.i3.p1.4.6">Doc</span> state via a retriever <math alttext="f_{retr}(\cdot)" class="ltx_Math" display="inline" id="S2.I1.i3.p1.3.m3.1"><semantics id="S2.I1.i3.p1.3.m3.1a"><mrow id="S2.I1.i3.p1.3.m3.1.2" xref="S2.I1.i3.p1.3.m3.1.2.cmml"><msub id="S2.I1.i3.p1.3.m3.1.2.2" xref="S2.I1.i3.p1.3.m3.1.2.2.cmml"><mi id="S2.I1.i3.p1.3.m3.1.2.2.2" xref="S2.I1.i3.p1.3.m3.1.2.2.2.cmml">f</mi><mrow id="S2.I1.i3.p1.3.m3.1.2.2.3" xref="S2.I1.i3.p1.3.m3.1.2.2.3.cmml"><mi id="S2.I1.i3.p1.3.m3.1.2.2.3.2" xref="S2.I1.i3.p1.3.m3.1.2.2.3.2.cmml">r</mi><mo id="S2.I1.i3.p1.3.m3.1.2.2.3.1" xref="S2.I1.i3.p1.3.m3.1.2.2.3.1.cmml">⁢</mo><mi id="S2.I1.i3.p1.3.m3.1.2.2.3.3" xref="S2.I1.i3.p1.3.m3.1.2.2.3.3.cmml">e</mi><mo id="S2.I1.i3.p1.3.m3.1.2.2.3.1a" xref="S2.I1.i3.p1.3.m3.1.2.2.3.1.cmml">⁢</mo><mi id="S2.I1.i3.p1.3.m3.1.2.2.3.4" xref="S2.I1.i3.p1.3.m3.1.2.2.3.4.cmml">t</mi><mo id="S2.I1.i3.p1.3.m3.1.2.2.3.1b" xref="S2.I1.i3.p1.3.m3.1.2.2.3.1.cmml">⁢</mo><mi id="S2.I1.i3.p1.3.m3.1.2.2.3.5" xref="S2.I1.i3.p1.3.m3.1.2.2.3.5.cmml">r</mi></mrow></msub><mo id="S2.I1.i3.p1.3.m3.1.2.1" xref="S2.I1.i3.p1.3.m3.1.2.1.cmml">⁢</mo><mrow id="S2.I1.i3.p1.3.m3.1.2.3.2" xref="S2.I1.i3.p1.3.m3.1.2.cmml"><mo id="S2.I1.i3.p1.3.m3.1.2.3.2.1" stretchy="false" xref="S2.I1.i3.p1.3.m3.1.2.cmml">(</mo><mo id="S2.I1.i3.p1.3.m3.1.1" lspace="0em" rspace="0em" xref="S2.I1.i3.p1.3.m3.1.1.cmml">⋅</mo><mo id="S2.I1.i3.p1.3.m3.1.2.3.2.2" stretchy="false" xref="S2.I1.i3.p1.3.m3.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.I1.i3.p1.3.m3.1b"><apply id="S2.I1.i3.p1.3.m3.1.2.cmml" xref="S2.I1.i3.p1.3.m3.1.2"><times id="S2.I1.i3.p1.3.m3.1.2.1.cmml" xref="S2.I1.i3.p1.3.m3.1.2.1"></times><apply id="S2.I1.i3.p1.3.m3.1.2.2.cmml" xref="S2.I1.i3.p1.3.m3.1.2.2"><csymbol cd="ambiguous" id="S2.I1.i3.p1.3.m3.1.2.2.1.cmml" xref="S2.I1.i3.p1.3.m3.1.2.2">subscript</csymbol><ci id="S2.I1.i3.p1.3.m3.1.2.2.2.cmml" xref="S2.I1.i3.p1.3.m3.1.2.2.2">𝑓</ci><apply id="S2.I1.i3.p1.3.m3.1.2.2.3.cmml" xref="S2.I1.i3.p1.3.m3.1.2.2.3"><times id="S2.I1.i3.p1.3.m3.1.2.2.3.1.cmml" xref="S2.I1.i3.p1.3.m3.1.2.2.3.1"></times><ci id="S2.I1.i3.p1.3.m3.1.2.2.3.2.cmml" xref="S2.I1.i3.p1.3.m3.1.2.2.3.2">𝑟</ci><ci id="S2.I1.i3.p1.3.m3.1.2.2.3.3.cmml" xref="S2.I1.i3.p1.3.m3.1.2.2.3.3">𝑒</ci><ci id="S2.I1.i3.p1.3.m3.1.2.2.3.4.cmml" xref="S2.I1.i3.p1.3.m3.1.2.2.3.4">𝑡</ci><ci id="S2.I1.i3.p1.3.m3.1.2.2.3.5.cmml" xref="S2.I1.i3.p1.3.m3.1.2.2.3.5">𝑟</ci></apply></apply><ci id="S2.I1.i3.p1.3.m3.1.1.cmml" xref="S2.I1.i3.p1.3.m3.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.I1.i3.p1.3.m3.1c">f_{retr}(\cdot)</annotation><annotation encoding="application/x-llamapun" id="S2.I1.i3.p1.3.m3.1d">italic_f start_POSTSUBSCRIPT italic_r italic_e italic_t italic_r end_POSTSUBSCRIPT ( ⋅ )</annotation></semantics></math>.
During the sub-goal selection stage, the transition is more straightforward and done via a rule-based function <math alttext="f_{rule}(\cdot)" class="ltx_Math" display="inline" id="S2.I1.i3.p1.4.m4.1"><semantics id="S2.I1.i3.p1.4.m4.1a"><mrow id="S2.I1.i3.p1.4.m4.1.2" xref="S2.I1.i3.p1.4.m4.1.2.cmml"><msub id="S2.I1.i3.p1.4.m4.1.2.2" xref="S2.I1.i3.p1.4.m4.1.2.2.cmml"><mi id="S2.I1.i3.p1.4.m4.1.2.2.2" xref="S2.I1.i3.p1.4.m4.1.2.2.2.cmml">f</mi><mrow id="S2.I1.i3.p1.4.m4.1.2.2.3" xref="S2.I1.i3.p1.4.m4.1.2.2.3.cmml"><mi id="S2.I1.i3.p1.4.m4.1.2.2.3.2" xref="S2.I1.i3.p1.4.m4.1.2.2.3.2.cmml">r</mi><mo id="S2.I1.i3.p1.4.m4.1.2.2.3.1" xref="S2.I1.i3.p1.4.m4.1.2.2.3.1.cmml">⁢</mo><mi id="S2.I1.i3.p1.4.m4.1.2.2.3.3" xref="S2.I1.i3.p1.4.m4.1.2.2.3.3.cmml">u</mi><mo id="S2.I1.i3.p1.4.m4.1.2.2.3.1a" xref="S2.I1.i3.p1.4.m4.1.2.2.3.1.cmml">⁢</mo><mi id="S2.I1.i3.p1.4.m4.1.2.2.3.4" xref="S2.I1.i3.p1.4.m4.1.2.2.3.4.cmml">l</mi><mo id="S2.I1.i3.p1.4.m4.1.2.2.3.1b" xref="S2.I1.i3.p1.4.m4.1.2.2.3.1.cmml">⁢</mo><mi id="S2.I1.i3.p1.4.m4.1.2.2.3.5" xref="S2.I1.i3.p1.4.m4.1.2.2.3.5.cmml">e</mi></mrow></msub><mo id="S2.I1.i3.p1.4.m4.1.2.1" xref="S2.I1.i3.p1.4.m4.1.2.1.cmml">⁢</mo><mrow id="S2.I1.i3.p1.4.m4.1.2.3.2" xref="S2.I1.i3.p1.4.m4.1.2.cmml"><mo id="S2.I1.i3.p1.4.m4.1.2.3.2.1" stretchy="false" xref="S2.I1.i3.p1.4.m4.1.2.cmml">(</mo><mo id="S2.I1.i3.p1.4.m4.1.1" lspace="0em" rspace="0em" xref="S2.I1.i3.p1.4.m4.1.1.cmml">⋅</mo><mo id="S2.I1.i3.p1.4.m4.1.2.3.2.2" stretchy="false" xref="S2.I1.i3.p1.4.m4.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.I1.i3.p1.4.m4.1b"><apply id="S2.I1.i3.p1.4.m4.1.2.cmml" xref="S2.I1.i3.p1.4.m4.1.2"><times id="S2.I1.i3.p1.4.m4.1.2.1.cmml" xref="S2.I1.i3.p1.4.m4.1.2.1"></times><apply id="S2.I1.i3.p1.4.m4.1.2.2.cmml" xref="S2.I1.i3.p1.4.m4.1.2.2"><csymbol cd="ambiguous" id="S2.I1.i3.p1.4.m4.1.2.2.1.cmml" xref="S2.I1.i3.p1.4.m4.1.2.2">subscript</csymbol><ci id="S2.I1.i3.p1.4.m4.1.2.2.2.cmml" xref="S2.I1.i3.p1.4.m4.1.2.2.2">𝑓</ci><apply id="S2.I1.i3.p1.4.m4.1.2.2.3.cmml" xref="S2.I1.i3.p1.4.m4.1.2.2.3"><times id="S2.I1.i3.p1.4.m4.1.2.2.3.1.cmml" xref="S2.I1.i3.p1.4.m4.1.2.2.3.1"></times><ci id="S2.I1.i3.p1.4.m4.1.2.2.3.2.cmml" xref="S2.I1.i3.p1.4.m4.1.2.2.3.2">𝑟</ci><ci id="S2.I1.i3.p1.4.m4.1.2.2.3.3.cmml" xref="S2.I1.i3.p1.4.m4.1.2.2.3.3">𝑢</ci><ci id="S2.I1.i3.p1.4.m4.1.2.2.3.4.cmml" xref="S2.I1.i3.p1.4.m4.1.2.2.3.4">𝑙</ci><ci id="S2.I1.i3.p1.4.m4.1.2.2.3.5.cmml" xref="S2.I1.i3.p1.4.m4.1.2.2.3.5">𝑒</ci></apply></apply><ci id="S2.I1.i3.p1.4.m4.1.1.cmml" xref="S2.I1.i3.p1.4.m4.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.I1.i3.p1.4.m4.1c">f_{rule}(\cdot)</annotation><annotation encoding="application/x-llamapun" id="S2.I1.i3.p1.4.m4.1d">italic_f start_POSTSUBSCRIPT italic_r italic_u italic_l italic_e end_POSTSUBSCRIPT ( ⋅ )</annotation></semantics></math>, <span class="ltx_text ltx_font_italic" id="S2.I1.i3.p1.4.7">e.g., </span>selecting <em class="ltx_emph ltx_font_italic" id="S2.I1.i3.p1.4.8">reasoning</em> action transits to a <span class="ltx_text ltx_font_smallcaps" id="S2.I1.i3.p1.4.9">Reason</span> state.</p>
</div>
</li>
<li class="ltx_item" id="S2.I1.i4" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para ltx_noindent" id="S2.I1.i4.p1">
<p class="ltx_p" id="S2.I1.i4.p1.3">The reward function <math alttext="\mathcal{R}(s_{t},a)" class="ltx_Math" display="inline" id="S2.I1.i4.p1.1.m1.2"><semantics id="S2.I1.i4.p1.1.m1.2a"><mrow id="S2.I1.i4.p1.1.m1.2.2" xref="S2.I1.i4.p1.1.m1.2.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.I1.i4.p1.1.m1.2.2.3" xref="S2.I1.i4.p1.1.m1.2.2.3.cmml">ℛ</mi><mo id="S2.I1.i4.p1.1.m1.2.2.2" xref="S2.I1.i4.p1.1.m1.2.2.2.cmml">⁢</mo><mrow id="S2.I1.i4.p1.1.m1.2.2.1.1" xref="S2.I1.i4.p1.1.m1.2.2.1.2.cmml"><mo id="S2.I1.i4.p1.1.m1.2.2.1.1.2" stretchy="false" xref="S2.I1.i4.p1.1.m1.2.2.1.2.cmml">(</mo><msub id="S2.I1.i4.p1.1.m1.2.2.1.1.1" xref="S2.I1.i4.p1.1.m1.2.2.1.1.1.cmml"><mi id="S2.I1.i4.p1.1.m1.2.2.1.1.1.2" xref="S2.I1.i4.p1.1.m1.2.2.1.1.1.2.cmml">s</mi><mi id="S2.I1.i4.p1.1.m1.2.2.1.1.1.3" xref="S2.I1.i4.p1.1.m1.2.2.1.1.1.3.cmml">t</mi></msub><mo id="S2.I1.i4.p1.1.m1.2.2.1.1.3" xref="S2.I1.i4.p1.1.m1.2.2.1.2.cmml">,</mo><mi id="S2.I1.i4.p1.1.m1.1.1" xref="S2.I1.i4.p1.1.m1.1.1.cmml">a</mi><mo id="S2.I1.i4.p1.1.m1.2.2.1.1.4" stretchy="false" xref="S2.I1.i4.p1.1.m1.2.2.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.I1.i4.p1.1.m1.2b"><apply id="S2.I1.i4.p1.1.m1.2.2.cmml" xref="S2.I1.i4.p1.1.m1.2.2"><times id="S2.I1.i4.p1.1.m1.2.2.2.cmml" xref="S2.I1.i4.p1.1.m1.2.2.2"></times><ci id="S2.I1.i4.p1.1.m1.2.2.3.cmml" xref="S2.I1.i4.p1.1.m1.2.2.3">ℛ</ci><interval closure="open" id="S2.I1.i4.p1.1.m1.2.2.1.2.cmml" xref="S2.I1.i4.p1.1.m1.2.2.1.1"><apply id="S2.I1.i4.p1.1.m1.2.2.1.1.1.cmml" xref="S2.I1.i4.p1.1.m1.2.2.1.1.1"><csymbol cd="ambiguous" id="S2.I1.i4.p1.1.m1.2.2.1.1.1.1.cmml" xref="S2.I1.i4.p1.1.m1.2.2.1.1.1">subscript</csymbol><ci id="S2.I1.i4.p1.1.m1.2.2.1.1.1.2.cmml" xref="S2.I1.i4.p1.1.m1.2.2.1.1.1.2">𝑠</ci><ci id="S2.I1.i4.p1.1.m1.2.2.1.1.1.3.cmml" xref="S2.I1.i4.p1.1.m1.2.2.1.1.1.3">𝑡</ci></apply><ci id="S2.I1.i4.p1.1.m1.1.1.cmml" xref="S2.I1.i4.p1.1.m1.1.1">𝑎</ci></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.I1.i4.p1.1.m1.2c">\mathcal{R}(s_{t},a)</annotation><annotation encoding="application/x-llamapun" id="S2.I1.i4.p1.1.m1.2d">caligraphic_R ( italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT , italic_a )</annotation></semantics></math> specifies the expected reward received after taking an action <math alttext="a_{t}" class="ltx_Math" display="inline" id="S2.I1.i4.p1.2.m2.1"><semantics id="S2.I1.i4.p1.2.m2.1a"><msub id="S2.I1.i4.p1.2.m2.1.1" xref="S2.I1.i4.p1.2.m2.1.1.cmml"><mi id="S2.I1.i4.p1.2.m2.1.1.2" xref="S2.I1.i4.p1.2.m2.1.1.2.cmml">a</mi><mi id="S2.I1.i4.p1.2.m2.1.1.3" xref="S2.I1.i4.p1.2.m2.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S2.I1.i4.p1.2.m2.1b"><apply id="S2.I1.i4.p1.2.m2.1.1.cmml" xref="S2.I1.i4.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S2.I1.i4.p1.2.m2.1.1.1.cmml" xref="S2.I1.i4.p1.2.m2.1.1">subscript</csymbol><ci id="S2.I1.i4.p1.2.m2.1.1.2.cmml" xref="S2.I1.i4.p1.2.m2.1.1.2">𝑎</ci><ci id="S2.I1.i4.p1.2.m2.1.1.3.cmml" xref="S2.I1.i4.p1.2.m2.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.I1.i4.p1.2.m2.1c">a_{t}</annotation><annotation encoding="application/x-llamapun" id="S2.I1.i4.p1.2.m2.1d">italic_a start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math> at state <math alttext="s_{t}" class="ltx_Math" display="inline" id="S2.I1.i4.p1.3.m3.1"><semantics id="S2.I1.i4.p1.3.m3.1a"><msub id="S2.I1.i4.p1.3.m3.1.1" xref="S2.I1.i4.p1.3.m3.1.1.cmml"><mi id="S2.I1.i4.p1.3.m3.1.1.2" xref="S2.I1.i4.p1.3.m3.1.1.2.cmml">s</mi><mi id="S2.I1.i4.p1.3.m3.1.1.3" xref="S2.I1.i4.p1.3.m3.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S2.I1.i4.p1.3.m3.1b"><apply id="S2.I1.i4.p1.3.m3.1.1.cmml" xref="S2.I1.i4.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S2.I1.i4.p1.3.m3.1.1.1.cmml" xref="S2.I1.i4.p1.3.m3.1.1">subscript</csymbol><ci id="S2.I1.i4.p1.3.m3.1.1.2.cmml" xref="S2.I1.i4.p1.3.m3.1.1.2">𝑠</ci><ci id="S2.I1.i4.p1.3.m3.1.1.3.cmml" xref="S2.I1.i4.p1.3.m3.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.I1.i4.p1.3.m3.1c">s_{t}</annotation><annotation encoding="application/x-llamapun" id="S2.I1.i4.p1.3.m3.1d">italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math>.
In our context, fine-tuned critic models estimate the rewards and guide the decision-making process by encouraging actions that contribute the most towards solving the MDP. Details of the critic models are provided in Section <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S2.SS2" title="2.2 Inference of CR-Planner ‣ 2 Critic-Guided Planning with Retrieval-Augmentation ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_tag">2.2</span></a>.</p>
</div>
</li>
<li class="ltx_item" id="S2.I1.i5" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para ltx_noindent" id="S2.I1.i5.p1">
<p class="ltx_p" id="S2.I1.i5.p1.1">Lastly, <math alttext="T" class="ltx_Math" display="inline" id="S2.I1.i5.p1.1.m1.1"><semantics id="S2.I1.i5.p1.1.m1.1a"><mi id="S2.I1.i5.p1.1.m1.1.1" xref="S2.I1.i5.p1.1.m1.1.1.cmml">T</mi><annotation-xml encoding="MathML-Content" id="S2.I1.i5.p1.1.m1.1b"><ci id="S2.I1.i5.p1.1.m1.1.1.cmml" xref="S2.I1.i5.p1.1.m1.1.1">𝑇</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.I1.i5.p1.1.m1.1c">T</annotation><annotation encoding="application/x-llamapun" id="S2.I1.i5.p1.1.m1.1d">italic_T</annotation></semantics></math> represents the maximum number of steps that can occur within the MDP.</p>
</div>
</li>
</ul>
</div>
<div class="ltx_para ltx_noindent" id="S2.SS1.p3">
<p class="ltx_p" id="S2.SS1.p3.1">Solving the MDP requires generating an optimal plan in the form of a trajectory: <math alttext="\tau*=(s_{0},a_{0},...,s_{t},a_{t},...,s_{T-1},a_{T-1},s_{T})" class="ltx_math_unparsed" display="inline" id="S2.SS1.p3.1.m1.1"><semantics id="S2.SS1.p3.1.m1.1a"><mrow id="S2.SS1.p3.1.m1.1b"><mi id="S2.SS1.p3.1.m1.1.1">τ</mi><mo id="S2.SS1.p3.1.m1.1.2" lspace="0.222em" rspace="0em">∗</mo><mo id="S2.SS1.p3.1.m1.1.3" lspace="0em">=</mo><mrow id="S2.SS1.p3.1.m1.1.4"><mo id="S2.SS1.p3.1.m1.1.4.1" stretchy="false">(</mo><msub id="S2.SS1.p3.1.m1.1.4.2"><mi id="S2.SS1.p3.1.m1.1.4.2.2">s</mi><mn id="S2.SS1.p3.1.m1.1.4.2.3">0</mn></msub><mo id="S2.SS1.p3.1.m1.1.4.3">,</mo><msub id="S2.SS1.p3.1.m1.1.4.4"><mi id="S2.SS1.p3.1.m1.1.4.4.2">a</mi><mn id="S2.SS1.p3.1.m1.1.4.4.3">0</mn></msub><mo id="S2.SS1.p3.1.m1.1.4.5">,</mo><mi id="S2.SS1.p3.1.m1.1.4.6" mathvariant="normal">…</mi><mo id="S2.SS1.p3.1.m1.1.4.7">,</mo><msub id="S2.SS1.p3.1.m1.1.4.8"><mi id="S2.SS1.p3.1.m1.1.4.8.2">s</mi><mi id="S2.SS1.p3.1.m1.1.4.8.3">t</mi></msub><mo id="S2.SS1.p3.1.m1.1.4.9">,</mo><msub id="S2.SS1.p3.1.m1.1.4.10"><mi id="S2.SS1.p3.1.m1.1.4.10.2">a</mi><mi id="S2.SS1.p3.1.m1.1.4.10.3">t</mi></msub><mo id="S2.SS1.p3.1.m1.1.4.11">,</mo><mi id="S2.SS1.p3.1.m1.1.4.12" mathvariant="normal">…</mi><mo id="S2.SS1.p3.1.m1.1.4.13">,</mo><msub id="S2.SS1.p3.1.m1.1.4.14"><mi id="S2.SS1.p3.1.m1.1.4.14.2">s</mi><mrow id="S2.SS1.p3.1.m1.1.4.14.3"><mi id="S2.SS1.p3.1.m1.1.4.14.3.2">T</mi><mo id="S2.SS1.p3.1.m1.1.4.14.3.1">−</mo><mn id="S2.SS1.p3.1.m1.1.4.14.3.3">1</mn></mrow></msub><mo id="S2.SS1.p3.1.m1.1.4.15">,</mo><msub id="S2.SS1.p3.1.m1.1.4.16"><mi id="S2.SS1.p3.1.m1.1.4.16.2">a</mi><mrow id="S2.SS1.p3.1.m1.1.4.16.3"><mi id="S2.SS1.p3.1.m1.1.4.16.3.2">T</mi><mo id="S2.SS1.p3.1.m1.1.4.16.3.1">−</mo><mn id="S2.SS1.p3.1.m1.1.4.16.3.3">1</mn></mrow></msub><mo id="S2.SS1.p3.1.m1.1.4.17">,</mo><msub id="S2.SS1.p3.1.m1.1.4.18"><mi id="S2.SS1.p3.1.m1.1.4.18.2">s</mi><mi id="S2.SS1.p3.1.m1.1.4.18.3">T</mi></msub><mo id="S2.SS1.p3.1.m1.1.4.19" stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex" id="S2.SS1.p3.1.m1.1c">\tau*=(s_{0},a_{0},...,s_{t},a_{t},...,s_{T-1},a_{T-1},s_{T})</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p3.1.m1.1d">italic_τ ∗ = ( italic_s start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT , italic_a start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT , … , italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT , italic_a start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT , … , italic_s start_POSTSUBSCRIPT italic_T - 1 end_POSTSUBSCRIPT , italic_a start_POSTSUBSCRIPT italic_T - 1 end_POSTSUBSCRIPT , italic_s start_POSTSUBSCRIPT italic_T end_POSTSUBSCRIPT )</annotation></semantics></math> that maximizes the total expected rewards. <span class="ltx_note ltx_role_footnote" id="footnote2"><sup class="ltx_note_mark">2</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">2</sup><span class="ltx_tag ltx_tag_note">2</span>Details of state types and action spaces are in Appendix <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#A3" title="Appendix C CR-Planner State Types and Action Spaces ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_tag">C</span></a> Table <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#A2.T6" title="Table 6 ‣ Appendix B A Running Example ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_tag">6</span></a>.</span></span></span></p>
</div>
</section>
<section class="ltx_subsection" id="S2.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.2 </span>Inference of CR-Planner</h3>
<div class="ltx_para ltx_noindent" id="S2.SS2.p1">
<p class="ltx_p" id="S2.SS2.p1.5">When tackling domain-knowledge-intensive and reasoning-heavy problems, errors may occur during the reasoning process, which can then propagate to subsequent steps. Therefore, ensuring accuracy at each step of the process from the very beginning is essential. Additionally, external information is not always necessary in the problem-solving process. In fact, deciding when to access external sources is a critical decision <cite class="ltx_cite ltx_citemacro_citep">(Asai et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib1" title="">2024</a>)</cite>. Furthermore, as highlighted by <cite class="ltx_cite ltx_citemacro_citet">Li et al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib17" title="">2024</a>)</cite>, a significant challenge in RAG is the accuracy of the retrieval process itself. Consequently, it is crucial to ensure both the quality of search queries and the selection of retrieved documents. To address these challenges, our method employs critic models at each time step to guide the decision-making process. Specifically, at time step <math alttext="t" class="ltx_Math" display="inline" id="S2.SS2.p1.1.m1.1"><semantics id="S2.SS2.p1.1.m1.1a"><mi id="S2.SS2.p1.1.m1.1.1" xref="S2.SS2.p1.1.m1.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.1.m1.1b"><ci id="S2.SS2.p1.1.m1.1.1.cmml" xref="S2.SS2.p1.1.m1.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.1.m1.1c">t</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.1.m1.1d">italic_t</annotation></semantics></math>, given the current state <math alttext="s_{t}" class="ltx_Math" display="inline" id="S2.SS2.p1.2.m2.1"><semantics id="S2.SS2.p1.2.m2.1a"><msub id="S2.SS2.p1.2.m2.1.1" xref="S2.SS2.p1.2.m2.1.1.cmml"><mi id="S2.SS2.p1.2.m2.1.1.2" xref="S2.SS2.p1.2.m2.1.1.2.cmml">s</mi><mi id="S2.SS2.p1.2.m2.1.1.3" xref="S2.SS2.p1.2.m2.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.2.m2.1b"><apply id="S2.SS2.p1.2.m2.1.1.cmml" xref="S2.SS2.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S2.SS2.p1.2.m2.1.1.1.cmml" xref="S2.SS2.p1.2.m2.1.1">subscript</csymbol><ci id="S2.SS2.p1.2.m2.1.1.2.cmml" xref="S2.SS2.p1.2.m2.1.1.2">𝑠</ci><ci id="S2.SS2.p1.2.m2.1.1.3.cmml" xref="S2.SS2.p1.2.m2.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.2.m2.1c">s_{t}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.2.m2.1d">italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math>, the critic model <math alttext="g" class="ltx_Math" display="inline" id="S2.SS2.p1.3.m3.1"><semantics id="S2.SS2.p1.3.m3.1a"><mi id="S2.SS2.p1.3.m3.1.1" xref="S2.SS2.p1.3.m3.1.1.cmml">g</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.3.m3.1b"><ci id="S2.SS2.p1.3.m3.1.1.cmml" xref="S2.SS2.p1.3.m3.1.1">𝑔</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.3.m3.1c">g</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.3.m3.1d">italic_g</annotation></semantics></math> assesses the available actions <math alttext="\mathcal{A}_{s_{t}}" class="ltx_Math" display="inline" id="S2.SS2.p1.4.m4.1"><semantics id="S2.SS2.p1.4.m4.1a"><msub id="S2.SS2.p1.4.m4.1.1" xref="S2.SS2.p1.4.m4.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS2.p1.4.m4.1.1.2" xref="S2.SS2.p1.4.m4.1.1.2.cmml">𝒜</mi><msub id="S2.SS2.p1.4.m4.1.1.3" xref="S2.SS2.p1.4.m4.1.1.3.cmml"><mi id="S2.SS2.p1.4.m4.1.1.3.2" xref="S2.SS2.p1.4.m4.1.1.3.2.cmml">s</mi><mi id="S2.SS2.p1.4.m4.1.1.3.3" xref="S2.SS2.p1.4.m4.1.1.3.3.cmml">t</mi></msub></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.4.m4.1b"><apply id="S2.SS2.p1.4.m4.1.1.cmml" xref="S2.SS2.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S2.SS2.p1.4.m4.1.1.1.cmml" xref="S2.SS2.p1.4.m4.1.1">subscript</csymbol><ci id="S2.SS2.p1.4.m4.1.1.2.cmml" xref="S2.SS2.p1.4.m4.1.1.2">𝒜</ci><apply id="S2.SS2.p1.4.m4.1.1.3.cmml" xref="S2.SS2.p1.4.m4.1.1.3"><csymbol cd="ambiguous" id="S2.SS2.p1.4.m4.1.1.3.1.cmml" xref="S2.SS2.p1.4.m4.1.1.3">subscript</csymbol><ci id="S2.SS2.p1.4.m4.1.1.3.2.cmml" xref="S2.SS2.p1.4.m4.1.1.3.2">𝑠</ci><ci id="S2.SS2.p1.4.m4.1.1.3.3.cmml" xref="S2.SS2.p1.4.m4.1.1.3.3">𝑡</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.4.m4.1c">\mathcal{A}_{s_{t}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.4.m4.1d">caligraphic_A start_POSTSUBSCRIPT italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math> and helps select an action <math alttext="a_{t}" class="ltx_Math" display="inline" id="S2.SS2.p1.5.m5.1"><semantics id="S2.SS2.p1.5.m5.1a"><msub id="S2.SS2.p1.5.m5.1.1" xref="S2.SS2.p1.5.m5.1.1.cmml"><mi id="S2.SS2.p1.5.m5.1.1.2" xref="S2.SS2.p1.5.m5.1.1.2.cmml">a</mi><mi id="S2.SS2.p1.5.m5.1.1.3" xref="S2.SS2.p1.5.m5.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.5.m5.1b"><apply id="S2.SS2.p1.5.m5.1.1.cmml" xref="S2.SS2.p1.5.m5.1.1"><csymbol cd="ambiguous" id="S2.SS2.p1.5.m5.1.1.1.cmml" xref="S2.SS2.p1.5.m5.1.1">subscript</csymbol><ci id="S2.SS2.p1.5.m5.1.1.2.cmml" xref="S2.SS2.p1.5.m5.1.1.2">𝑎</ci><ci id="S2.SS2.p1.5.m5.1.1.3.cmml" xref="S2.SS2.p1.5.m5.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.5.m5.1c">a_{t}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.5.m5.1d">italic_a start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math> that maximizes the expected reward.</p>
</div>
<section class="ltx_paragraph" id="S2.SS2.SSS0.Px1">
<h5 class="ltx_title ltx_title_paragraph">Action selection using the critic models.</h5>
<div class="ltx_para ltx_noindent" id="S2.SS2.SSS0.Px1.p1">
<p class="ltx_p" id="S2.SS2.SSS0.Px1.p1.2">At timestamp <math alttext="t" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px1.p1.1.m1.1"><semantics id="S2.SS2.SSS0.Px1.p1.1.m1.1a"><mi id="S2.SS2.SSS0.Px1.p1.1.m1.1.1" xref="S2.SS2.SSS0.Px1.p1.1.m1.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px1.p1.1.m1.1b"><ci id="S2.SS2.SSS0.Px1.p1.1.m1.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.1.m1.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px1.p1.1.m1.1c">t</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px1.p1.1.m1.1d">italic_t</annotation></semantics></math>, the policy model <math alttext="\pi" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px1.p1.2.m2.1"><semantics id="S2.SS2.SSS0.Px1.p1.2.m2.1a"><mi id="S2.SS2.SSS0.Px1.p1.2.m2.1.1" xref="S2.SS2.SSS0.Px1.p1.2.m2.1.1.cmml">π</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px1.p1.2.m2.1b"><ci id="S2.SS2.SSS0.Px1.p1.2.m2.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.2.m2.1.1">𝜋</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px1.p1.2.m2.1c">\pi</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px1.p1.2.m2.1d">italic_π</annotation></semantics></math> determines the next action as:</p>
<table class="ltx_equation ltx_eqn_table" id="S2.E1">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="a_{t}=\pi(s_{t})=\arg\max_{a\in\mathcal{A}_{s_{t}}}\mathcal{R}(s_{t},a)." class="ltx_Math" display="block" id="S2.E1.m1.2"><semantics id="S2.E1.m1.2a"><mrow id="S2.E1.m1.2.2.1" xref="S2.E1.m1.2.2.1.1.cmml"><mrow id="S2.E1.m1.2.2.1.1" xref="S2.E1.m1.2.2.1.1.cmml"><msub id="S2.E1.m1.2.2.1.1.4" xref="S2.E1.m1.2.2.1.1.4.cmml"><mi id="S2.E1.m1.2.2.1.1.4.2" xref="S2.E1.m1.2.2.1.1.4.2.cmml">a</mi><mi id="S2.E1.m1.2.2.1.1.4.3" xref="S2.E1.m1.2.2.1.1.4.3.cmml">t</mi></msub><mo id="S2.E1.m1.2.2.1.1.5" xref="S2.E1.m1.2.2.1.1.5.cmml">=</mo><mrow id="S2.E1.m1.2.2.1.1.1" xref="S2.E1.m1.2.2.1.1.1.cmml"><mi id="S2.E1.m1.2.2.1.1.1.3" xref="S2.E1.m1.2.2.1.1.1.3.cmml">π</mi><mo id="S2.E1.m1.2.2.1.1.1.2" xref="S2.E1.m1.2.2.1.1.1.2.cmml">⁢</mo><mrow id="S2.E1.m1.2.2.1.1.1.1.1" xref="S2.E1.m1.2.2.1.1.1.1.1.1.cmml"><mo id="S2.E1.m1.2.2.1.1.1.1.1.2" stretchy="false" xref="S2.E1.m1.2.2.1.1.1.1.1.1.cmml">(</mo><msub id="S2.E1.m1.2.2.1.1.1.1.1.1" xref="S2.E1.m1.2.2.1.1.1.1.1.1.cmml"><mi id="S2.E1.m1.2.2.1.1.1.1.1.1.2" xref="S2.E1.m1.2.2.1.1.1.1.1.1.2.cmml">s</mi><mi id="S2.E1.m1.2.2.1.1.1.1.1.1.3" xref="S2.E1.m1.2.2.1.1.1.1.1.1.3.cmml">t</mi></msub><mo id="S2.E1.m1.2.2.1.1.1.1.1.3" stretchy="false" xref="S2.E1.m1.2.2.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S2.E1.m1.2.2.1.1.6" xref="S2.E1.m1.2.2.1.1.6.cmml">=</mo><mrow id="S2.E1.m1.2.2.1.1.2" xref="S2.E1.m1.2.2.1.1.2.cmml"><mrow id="S2.E1.m1.2.2.1.1.2.3" xref="S2.E1.m1.2.2.1.1.2.3.cmml"><mi id="S2.E1.m1.2.2.1.1.2.3.1" xref="S2.E1.m1.2.2.1.1.2.3.1.cmml">arg</mi><mo id="S2.E1.m1.2.2.1.1.2.3a" lspace="0.167em" xref="S2.E1.m1.2.2.1.1.2.3.cmml">⁡</mo><mrow id="S2.E1.m1.2.2.1.1.2.3.2" xref="S2.E1.m1.2.2.1.1.2.3.2.cmml"><munder id="S2.E1.m1.2.2.1.1.2.3.2.1" xref="S2.E1.m1.2.2.1.1.2.3.2.1.cmml"><mi id="S2.E1.m1.2.2.1.1.2.3.2.1.2" xref="S2.E1.m1.2.2.1.1.2.3.2.1.2.cmml">max</mi><mrow id="S2.E1.m1.2.2.1.1.2.3.2.1.3" xref="S2.E1.m1.2.2.1.1.2.3.2.1.3.cmml"><mi id="S2.E1.m1.2.2.1.1.2.3.2.1.3.2" xref="S2.E1.m1.2.2.1.1.2.3.2.1.3.2.cmml">a</mi><mo id="S2.E1.m1.2.2.1.1.2.3.2.1.3.1" xref="S2.E1.m1.2.2.1.1.2.3.2.1.3.1.cmml">∈</mo><msub id="S2.E1.m1.2.2.1.1.2.3.2.1.3.3" xref="S2.E1.m1.2.2.1.1.2.3.2.1.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E1.m1.2.2.1.1.2.3.2.1.3.3.2" xref="S2.E1.m1.2.2.1.1.2.3.2.1.3.3.2.cmml">𝒜</mi><msub id="S2.E1.m1.2.2.1.1.2.3.2.1.3.3.3" xref="S2.E1.m1.2.2.1.1.2.3.2.1.3.3.3.cmml"><mi id="S2.E1.m1.2.2.1.1.2.3.2.1.3.3.3.2" xref="S2.E1.m1.2.2.1.1.2.3.2.1.3.3.3.2.cmml">s</mi><mi id="S2.E1.m1.2.2.1.1.2.3.2.1.3.3.3.3" xref="S2.E1.m1.2.2.1.1.2.3.2.1.3.3.3.3.cmml">t</mi></msub></msub></mrow></munder><mo id="S2.E1.m1.2.2.1.1.2.3.2a" lspace="0.167em" xref="S2.E1.m1.2.2.1.1.2.3.2.cmml">⁡</mo><mi class="ltx_font_mathcaligraphic" id="S2.E1.m1.2.2.1.1.2.3.2.2" xref="S2.E1.m1.2.2.1.1.2.3.2.2.cmml">ℛ</mi></mrow></mrow><mo id="S2.E1.m1.2.2.1.1.2.2" xref="S2.E1.m1.2.2.1.1.2.2.cmml">⁢</mo><mrow id="S2.E1.m1.2.2.1.1.2.1.1" xref="S2.E1.m1.2.2.1.1.2.1.2.cmml"><mo id="S2.E1.m1.2.2.1.1.2.1.1.2" stretchy="false" xref="S2.E1.m1.2.2.1.1.2.1.2.cmml">(</mo><msub id="S2.E1.m1.2.2.1.1.2.1.1.1" xref="S2.E1.m1.2.2.1.1.2.1.1.1.cmml"><mi id="S2.E1.m1.2.2.1.1.2.1.1.1.2" xref="S2.E1.m1.2.2.1.1.2.1.1.1.2.cmml">s</mi><mi id="S2.E1.m1.2.2.1.1.2.1.1.1.3" xref="S2.E1.m1.2.2.1.1.2.1.1.1.3.cmml">t</mi></msub><mo id="S2.E1.m1.2.2.1.1.2.1.1.3" xref="S2.E1.m1.2.2.1.1.2.1.2.cmml">,</mo><mi id="S2.E1.m1.1.1" xref="S2.E1.m1.1.1.cmml">a</mi><mo id="S2.E1.m1.2.2.1.1.2.1.1.4" stretchy="false" xref="S2.E1.m1.2.2.1.1.2.1.2.cmml">)</mo></mrow></mrow></mrow><mo id="S2.E1.m1.2.2.1.2" lspace="0em" xref="S2.E1.m1.2.2.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.E1.m1.2b"><apply id="S2.E1.m1.2.2.1.1.cmml" xref="S2.E1.m1.2.2.1"><and id="S2.E1.m1.2.2.1.1a.cmml" xref="S2.E1.m1.2.2.1"></and><apply id="S2.E1.m1.2.2.1.1b.cmml" xref="S2.E1.m1.2.2.1"><eq id="S2.E1.m1.2.2.1.1.5.cmml" xref="S2.E1.m1.2.2.1.1.5"></eq><apply id="S2.E1.m1.2.2.1.1.4.cmml" xref="S2.E1.m1.2.2.1.1.4"><csymbol cd="ambiguous" id="S2.E1.m1.2.2.1.1.4.1.cmml" xref="S2.E1.m1.2.2.1.1.4">subscript</csymbol><ci id="S2.E1.m1.2.2.1.1.4.2.cmml" xref="S2.E1.m1.2.2.1.1.4.2">𝑎</ci><ci id="S2.E1.m1.2.2.1.1.4.3.cmml" xref="S2.E1.m1.2.2.1.1.4.3">𝑡</ci></apply><apply id="S2.E1.m1.2.2.1.1.1.cmml" xref="S2.E1.m1.2.2.1.1.1"><times id="S2.E1.m1.2.2.1.1.1.2.cmml" xref="S2.E1.m1.2.2.1.1.1.2"></times><ci id="S2.E1.m1.2.2.1.1.1.3.cmml" xref="S2.E1.m1.2.2.1.1.1.3">𝜋</ci><apply id="S2.E1.m1.2.2.1.1.1.1.1.1.cmml" xref="S2.E1.m1.2.2.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.E1.m1.2.2.1.1.1.1.1.1.1.cmml" xref="S2.E1.m1.2.2.1.1.1.1.1">subscript</csymbol><ci id="S2.E1.m1.2.2.1.1.1.1.1.1.2.cmml" xref="S2.E1.m1.2.2.1.1.1.1.1.1.2">𝑠</ci><ci id="S2.E1.m1.2.2.1.1.1.1.1.1.3.cmml" xref="S2.E1.m1.2.2.1.1.1.1.1.1.3">𝑡</ci></apply></apply></apply><apply id="S2.E1.m1.2.2.1.1c.cmml" xref="S2.E1.m1.2.2.1"><eq id="S2.E1.m1.2.2.1.1.6.cmml" xref="S2.E1.m1.2.2.1.1.6"></eq><share href="https://arxiv.org/html/2410.01428v1#S2.E1.m1.2.2.1.1.1.cmml" id="S2.E1.m1.2.2.1.1d.cmml" xref="S2.E1.m1.2.2.1"></share><apply id="S2.E1.m1.2.2.1.1.2.cmml" xref="S2.E1.m1.2.2.1.1.2"><times id="S2.E1.m1.2.2.1.1.2.2.cmml" xref="S2.E1.m1.2.2.1.1.2.2"></times><apply id="S2.E1.m1.2.2.1.1.2.3.cmml" xref="S2.E1.m1.2.2.1.1.2.3"><arg id="S2.E1.m1.2.2.1.1.2.3.1.cmml" xref="S2.E1.m1.2.2.1.1.2.3.1"></arg><apply id="S2.E1.m1.2.2.1.1.2.3.2.cmml" xref="S2.E1.m1.2.2.1.1.2.3.2"><apply id="S2.E1.m1.2.2.1.1.2.3.2.1.cmml" xref="S2.E1.m1.2.2.1.1.2.3.2.1"><csymbol cd="ambiguous" id="S2.E1.m1.2.2.1.1.2.3.2.1.1.cmml" xref="S2.E1.m1.2.2.1.1.2.3.2.1">subscript</csymbol><max id="S2.E1.m1.2.2.1.1.2.3.2.1.2.cmml" xref="S2.E1.m1.2.2.1.1.2.3.2.1.2"></max><apply id="S2.E1.m1.2.2.1.1.2.3.2.1.3.cmml" xref="S2.E1.m1.2.2.1.1.2.3.2.1.3"><in id="S2.E1.m1.2.2.1.1.2.3.2.1.3.1.cmml" xref="S2.E1.m1.2.2.1.1.2.3.2.1.3.1"></in><ci id="S2.E1.m1.2.2.1.1.2.3.2.1.3.2.cmml" xref="S2.E1.m1.2.2.1.1.2.3.2.1.3.2">𝑎</ci><apply id="S2.E1.m1.2.2.1.1.2.3.2.1.3.3.cmml" xref="S2.E1.m1.2.2.1.1.2.3.2.1.3.3"><csymbol cd="ambiguous" id="S2.E1.m1.2.2.1.1.2.3.2.1.3.3.1.cmml" xref="S2.E1.m1.2.2.1.1.2.3.2.1.3.3">subscript</csymbol><ci id="S2.E1.m1.2.2.1.1.2.3.2.1.3.3.2.cmml" xref="S2.E1.m1.2.2.1.1.2.3.2.1.3.3.2">𝒜</ci><apply id="S2.E1.m1.2.2.1.1.2.3.2.1.3.3.3.cmml" xref="S2.E1.m1.2.2.1.1.2.3.2.1.3.3.3"><csymbol cd="ambiguous" id="S2.E1.m1.2.2.1.1.2.3.2.1.3.3.3.1.cmml" xref="S2.E1.m1.2.2.1.1.2.3.2.1.3.3.3">subscript</csymbol><ci id="S2.E1.m1.2.2.1.1.2.3.2.1.3.3.3.2.cmml" xref="S2.E1.m1.2.2.1.1.2.3.2.1.3.3.3.2">𝑠</ci><ci id="S2.E1.m1.2.2.1.1.2.3.2.1.3.3.3.3.cmml" xref="S2.E1.m1.2.2.1.1.2.3.2.1.3.3.3.3">𝑡</ci></apply></apply></apply></apply><ci id="S2.E1.m1.2.2.1.1.2.3.2.2.cmml" xref="S2.E1.m1.2.2.1.1.2.3.2.2">ℛ</ci></apply></apply><interval closure="open" id="S2.E1.m1.2.2.1.1.2.1.2.cmml" xref="S2.E1.m1.2.2.1.1.2.1.1"><apply id="S2.E1.m1.2.2.1.1.2.1.1.1.cmml" xref="S2.E1.m1.2.2.1.1.2.1.1.1"><csymbol cd="ambiguous" id="S2.E1.m1.2.2.1.1.2.1.1.1.1.cmml" xref="S2.E1.m1.2.2.1.1.2.1.1.1">subscript</csymbol><ci id="S2.E1.m1.2.2.1.1.2.1.1.1.2.cmml" xref="S2.E1.m1.2.2.1.1.2.1.1.1.2">𝑠</ci><ci id="S2.E1.m1.2.2.1.1.2.1.1.1.3.cmml" xref="S2.E1.m1.2.2.1.1.2.1.1.1.3">𝑡</ci></apply><ci id="S2.E1.m1.1.1.cmml" xref="S2.E1.m1.1.1">𝑎</ci></interval></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E1.m1.2c">a_{t}=\pi(s_{t})=\arg\max_{a\in\mathcal{A}_{s_{t}}}\mathcal{R}(s_{t},a).</annotation><annotation encoding="application/x-llamapun" id="S2.E1.m1.2d">italic_a start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT = italic_π ( italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT ) = roman_arg roman_max start_POSTSUBSCRIPT italic_a ∈ caligraphic_A start_POSTSUBSCRIPT italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT end_POSTSUBSCRIPT end_POSTSUBSCRIPT caligraphic_R ( italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT , italic_a ) .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(1)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S2.SS2.SSS0.Px1.p1.7">The action space <math alttext="\mathcal{A}_{s_{t}}" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px1.p1.3.m1.1"><semantics id="S2.SS2.SSS0.Px1.p1.3.m1.1a"><msub id="S2.SS2.SSS0.Px1.p1.3.m1.1.1" xref="S2.SS2.SSS0.Px1.p1.3.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS2.SSS0.Px1.p1.3.m1.1.1.2" xref="S2.SS2.SSS0.Px1.p1.3.m1.1.1.2.cmml">𝒜</mi><msub id="S2.SS2.SSS0.Px1.p1.3.m1.1.1.3" xref="S2.SS2.SSS0.Px1.p1.3.m1.1.1.3.cmml"><mi id="S2.SS2.SSS0.Px1.p1.3.m1.1.1.3.2" xref="S2.SS2.SSS0.Px1.p1.3.m1.1.1.3.2.cmml">s</mi><mi id="S2.SS2.SSS0.Px1.p1.3.m1.1.1.3.3" xref="S2.SS2.SSS0.Px1.p1.3.m1.1.1.3.3.cmml">t</mi></msub></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px1.p1.3.m1.1b"><apply id="S2.SS2.SSS0.Px1.p1.3.m1.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.3.m1.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px1.p1.3.m1.1.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.3.m1.1.1">subscript</csymbol><ci id="S2.SS2.SSS0.Px1.p1.3.m1.1.1.2.cmml" xref="S2.SS2.SSS0.Px1.p1.3.m1.1.1.2">𝒜</ci><apply id="S2.SS2.SSS0.Px1.p1.3.m1.1.1.3.cmml" xref="S2.SS2.SSS0.Px1.p1.3.m1.1.1.3"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px1.p1.3.m1.1.1.3.1.cmml" xref="S2.SS2.SSS0.Px1.p1.3.m1.1.1.3">subscript</csymbol><ci id="S2.SS2.SSS0.Px1.p1.3.m1.1.1.3.2.cmml" xref="S2.SS2.SSS0.Px1.p1.3.m1.1.1.3.2">𝑠</ci><ci id="S2.SS2.SSS0.Px1.p1.3.m1.1.1.3.3.cmml" xref="S2.SS2.SSS0.Px1.p1.3.m1.1.1.3.3">𝑡</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px1.p1.3.m1.1c">\mathcal{A}_{s_{t}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px1.p1.3.m1.1d">caligraphic_A start_POSTSUBSCRIPT italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math> varies depending on <math alttext="s_{t}" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px1.p1.4.m2.1"><semantics id="S2.SS2.SSS0.Px1.p1.4.m2.1a"><msub id="S2.SS2.SSS0.Px1.p1.4.m2.1.1" xref="S2.SS2.SSS0.Px1.p1.4.m2.1.1.cmml"><mi id="S2.SS2.SSS0.Px1.p1.4.m2.1.1.2" xref="S2.SS2.SSS0.Px1.p1.4.m2.1.1.2.cmml">s</mi><mi id="S2.SS2.SSS0.Px1.p1.4.m2.1.1.3" xref="S2.SS2.SSS0.Px1.p1.4.m2.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px1.p1.4.m2.1b"><apply id="S2.SS2.SSS0.Px1.p1.4.m2.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.4.m2.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px1.p1.4.m2.1.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.4.m2.1.1">subscript</csymbol><ci id="S2.SS2.SSS0.Px1.p1.4.m2.1.1.2.cmml" xref="S2.SS2.SSS0.Px1.p1.4.m2.1.1.2">𝑠</ci><ci id="S2.SS2.SSS0.Px1.p1.4.m2.1.1.3.cmml" xref="S2.SS2.SSS0.Px1.p1.4.m2.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px1.p1.4.m2.1c">s_{t}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px1.p1.4.m2.1d">italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math>.
As previously discussed in Section <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S2.SS1" title="2.1 Problem Formulation ‣ 2 Critic-Guided Planning with Retrieval-Augmentation ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_tag">2.1</span></a> and outlined in Table <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#A2.T6" title="Table 6 ‣ Appendix B A Running Example ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_tag">6</span></a>, for a state in the sub-goal stage, the action space leads to possible executions of that sub-goal, while for a state in the execution stage, the action space leads to the possible subsequent sub-goals.
<math alttext="\mathcal{R}(s_{t},a)" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px1.p1.5.m3.2"><semantics id="S2.SS2.SSS0.Px1.p1.5.m3.2a"><mrow id="S2.SS2.SSS0.Px1.p1.5.m3.2.2" xref="S2.SS2.SSS0.Px1.p1.5.m3.2.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS2.SSS0.Px1.p1.5.m3.2.2.3" xref="S2.SS2.SSS0.Px1.p1.5.m3.2.2.3.cmml">ℛ</mi><mo id="S2.SS2.SSS0.Px1.p1.5.m3.2.2.2" xref="S2.SS2.SSS0.Px1.p1.5.m3.2.2.2.cmml">⁢</mo><mrow id="S2.SS2.SSS0.Px1.p1.5.m3.2.2.1.1" xref="S2.SS2.SSS0.Px1.p1.5.m3.2.2.1.2.cmml"><mo id="S2.SS2.SSS0.Px1.p1.5.m3.2.2.1.1.2" stretchy="false" xref="S2.SS2.SSS0.Px1.p1.5.m3.2.2.1.2.cmml">(</mo><msub id="S2.SS2.SSS0.Px1.p1.5.m3.2.2.1.1.1" xref="S2.SS2.SSS0.Px1.p1.5.m3.2.2.1.1.1.cmml"><mi id="S2.SS2.SSS0.Px1.p1.5.m3.2.2.1.1.1.2" xref="S2.SS2.SSS0.Px1.p1.5.m3.2.2.1.1.1.2.cmml">s</mi><mi id="S2.SS2.SSS0.Px1.p1.5.m3.2.2.1.1.1.3" xref="S2.SS2.SSS0.Px1.p1.5.m3.2.2.1.1.1.3.cmml">t</mi></msub><mo id="S2.SS2.SSS0.Px1.p1.5.m3.2.2.1.1.3" xref="S2.SS2.SSS0.Px1.p1.5.m3.2.2.1.2.cmml">,</mo><mi id="S2.SS2.SSS0.Px1.p1.5.m3.1.1" xref="S2.SS2.SSS0.Px1.p1.5.m3.1.1.cmml">a</mi><mo id="S2.SS2.SSS0.Px1.p1.5.m3.2.2.1.1.4" stretchy="false" xref="S2.SS2.SSS0.Px1.p1.5.m3.2.2.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px1.p1.5.m3.2b"><apply id="S2.SS2.SSS0.Px1.p1.5.m3.2.2.cmml" xref="S2.SS2.SSS0.Px1.p1.5.m3.2.2"><times id="S2.SS2.SSS0.Px1.p1.5.m3.2.2.2.cmml" xref="S2.SS2.SSS0.Px1.p1.5.m3.2.2.2"></times><ci id="S2.SS2.SSS0.Px1.p1.5.m3.2.2.3.cmml" xref="S2.SS2.SSS0.Px1.p1.5.m3.2.2.3">ℛ</ci><interval closure="open" id="S2.SS2.SSS0.Px1.p1.5.m3.2.2.1.2.cmml" xref="S2.SS2.SSS0.Px1.p1.5.m3.2.2.1.1"><apply id="S2.SS2.SSS0.Px1.p1.5.m3.2.2.1.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.5.m3.2.2.1.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px1.p1.5.m3.2.2.1.1.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.5.m3.2.2.1.1.1">subscript</csymbol><ci id="S2.SS2.SSS0.Px1.p1.5.m3.2.2.1.1.1.2.cmml" xref="S2.SS2.SSS0.Px1.p1.5.m3.2.2.1.1.1.2">𝑠</ci><ci id="S2.SS2.SSS0.Px1.p1.5.m3.2.2.1.1.1.3.cmml" xref="S2.SS2.SSS0.Px1.p1.5.m3.2.2.1.1.1.3">𝑡</ci></apply><ci id="S2.SS2.SSS0.Px1.p1.5.m3.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.5.m3.1.1">𝑎</ci></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px1.p1.5.m3.2c">\mathcal{R}(s_{t},a)</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px1.p1.5.m3.2d">caligraphic_R ( italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT , italic_a )</annotation></semantics></math> is the expected reward when taking action <math alttext="a" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px1.p1.6.m4.1"><semantics id="S2.SS2.SSS0.Px1.p1.6.m4.1a"><mi id="S2.SS2.SSS0.Px1.p1.6.m4.1.1" xref="S2.SS2.SSS0.Px1.p1.6.m4.1.1.cmml">a</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px1.p1.6.m4.1b"><ci id="S2.SS2.SSS0.Px1.p1.6.m4.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.6.m4.1.1">𝑎</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px1.p1.6.m4.1c">a</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px1.p1.6.m4.1d">italic_a</annotation></semantics></math> in state <math alttext="s_{t}" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px1.p1.7.m5.1"><semantics id="S2.SS2.SSS0.Px1.p1.7.m5.1a"><msub id="S2.SS2.SSS0.Px1.p1.7.m5.1.1" xref="S2.SS2.SSS0.Px1.p1.7.m5.1.1.cmml"><mi id="S2.SS2.SSS0.Px1.p1.7.m5.1.1.2" xref="S2.SS2.SSS0.Px1.p1.7.m5.1.1.2.cmml">s</mi><mi id="S2.SS2.SSS0.Px1.p1.7.m5.1.1.3" xref="S2.SS2.SSS0.Px1.p1.7.m5.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px1.p1.7.m5.1b"><apply id="S2.SS2.SSS0.Px1.p1.7.m5.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.7.m5.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px1.p1.7.m5.1.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.7.m5.1.1">subscript</csymbol><ci id="S2.SS2.SSS0.Px1.p1.7.m5.1.1.2.cmml" xref="S2.SS2.SSS0.Px1.p1.7.m5.1.1.2">𝑠</ci><ci id="S2.SS2.SSS0.Px1.p1.7.m5.1.1.3.cmml" xref="S2.SS2.SSS0.Px1.p1.7.m5.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px1.p1.7.m5.1c">s_{t}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px1.p1.7.m5.1d">italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math> and estimated by the critic models:</p>
<table class="ltx_equation ltx_eqn_table" id="S2.E2">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\mathcal{R}(s_{t},a)=\begin{cases}g^{e}_{\textsc{Rationale}}(s_{t},a),&amp;\text{%
if }s_{t}=\textsc{Reason}\text{ state}\\
g^{e}_{\textsc{Query}}(s_{t},a),&amp;\text{if }s_{t}=\textsc{GenQuery}\text{ state%
}\\
g^{e}_{\textsc{Doc}}(s_{t},a),&amp;\text{if }s_{t}=\textsc{Retrieve}\text{ state}%
\\
g^{g}(s_{t},a),&amp;\text{otherwise.}\end{cases}" class="ltx_Math" display="block" id="S2.E2.m1.10"><semantics id="S2.E2.m1.10a"><mrow id="S2.E2.m1.10.10" xref="S2.E2.m1.10.10.cmml"><mrow id="S2.E2.m1.10.10.1" xref="S2.E2.m1.10.10.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E2.m1.10.10.1.3" xref="S2.E2.m1.10.10.1.3.cmml">ℛ</mi><mo id="S2.E2.m1.10.10.1.2" xref="S2.E2.m1.10.10.1.2.cmml">⁢</mo><mrow id="S2.E2.m1.10.10.1.1.1" xref="S2.E2.m1.10.10.1.1.2.cmml"><mo id="S2.E2.m1.10.10.1.1.1.2" stretchy="false" xref="S2.E2.m1.10.10.1.1.2.cmml">(</mo><msub id="S2.E2.m1.10.10.1.1.1.1" xref="S2.E2.m1.10.10.1.1.1.1.cmml"><mi id="S2.E2.m1.10.10.1.1.1.1.2" xref="S2.E2.m1.10.10.1.1.1.1.2.cmml">s</mi><mi id="S2.E2.m1.10.10.1.1.1.1.3" xref="S2.E2.m1.10.10.1.1.1.1.3.cmml">t</mi></msub><mo id="S2.E2.m1.10.10.1.1.1.3" xref="S2.E2.m1.10.10.1.1.2.cmml">,</mo><mi id="S2.E2.m1.9.9" xref="S2.E2.m1.9.9.cmml">a</mi><mo id="S2.E2.m1.10.10.1.1.1.4" stretchy="false" xref="S2.E2.m1.10.10.1.1.2.cmml">)</mo></mrow></mrow><mo id="S2.E2.m1.10.10.2" xref="S2.E2.m1.10.10.2.cmml">=</mo><mrow id="S2.E2.m1.8.8" xref="S2.E2.m1.10.10.3.1.cmml"><mo id="S2.E2.m1.8.8.9" xref="S2.E2.m1.10.10.3.1.1.cmml">{</mo><mtable columnspacing="5pt" displaystyle="true" id="S2.E2.m1.8.8.8" rowspacing="0pt" xref="S2.E2.m1.10.10.3.1.cmml"><mtr id="S2.E2.m1.8.8.8a" xref="S2.E2.m1.10.10.3.1.cmml"><mtd class="ltx_align_left" columnalign="left" id="S2.E2.m1.8.8.8b" xref="S2.E2.m1.10.10.3.1.cmml"><mrow id="S2.E2.m1.1.1.1.1.1.1.2" xref="S2.E2.m1.1.1.1.1.1.1.2.1.cmml"><mrow id="S2.E2.m1.1.1.1.1.1.1.2.1" xref="S2.E2.m1.1.1.1.1.1.1.2.1.cmml"><msubsup id="S2.E2.m1.1.1.1.1.1.1.2.1.3" xref="S2.E2.m1.1.1.1.1.1.1.2.1.3.cmml"><mi id="S2.E2.m1.1.1.1.1.1.1.2.1.3.2.2" xref="S2.E2.m1.1.1.1.1.1.1.2.1.3.2.2.cmml">g</mi><mtext class="ltx_font_smallcaps" id="S2.E2.m1.1.1.1.1.1.1.2.1.3.3" xref="S2.E2.m1.1.1.1.1.1.1.2.1.3.3a.cmml">Rationale</mtext><mi id="S2.E2.m1.1.1.1.1.1.1.2.1.3.2.3" xref="S2.E2.m1.1.1.1.1.1.1.2.1.3.2.3.cmml">e</mi></msubsup><mo id="S2.E2.m1.1.1.1.1.1.1.2.1.2" xref="S2.E2.m1.1.1.1.1.1.1.2.1.2.cmml">⁢</mo><mrow id="S2.E2.m1.1.1.1.1.1.1.2.1.1.1" xref="S2.E2.m1.1.1.1.1.1.1.2.1.1.2.cmml"><mo id="S2.E2.m1.1.1.1.1.1.1.2.1.1.1.2" stretchy="false" xref="S2.E2.m1.1.1.1.1.1.1.2.1.1.2.cmml">(</mo><msub id="S2.E2.m1.1.1.1.1.1.1.2.1.1.1.1" xref="S2.E2.m1.1.1.1.1.1.1.2.1.1.1.1.cmml"><mi id="S2.E2.m1.1.1.1.1.1.1.2.1.1.1.1.2" xref="S2.E2.m1.1.1.1.1.1.1.2.1.1.1.1.2.cmml">s</mi><mi id="S2.E2.m1.1.1.1.1.1.1.2.1.1.1.1.3" xref="S2.E2.m1.1.1.1.1.1.1.2.1.1.1.1.3.cmml">t</mi></msub><mo id="S2.E2.m1.1.1.1.1.1.1.2.1.1.1.3" xref="S2.E2.m1.1.1.1.1.1.1.2.1.1.2.cmml">,</mo><mi id="S2.E2.m1.1.1.1.1.1.1.1" xref="S2.E2.m1.1.1.1.1.1.1.1.cmml">a</mi><mo id="S2.E2.m1.1.1.1.1.1.1.2.1.1.1.4" stretchy="false" xref="S2.E2.m1.1.1.1.1.1.1.2.1.1.2.cmml">)</mo></mrow></mrow><mo id="S2.E2.m1.1.1.1.1.1.1.2.2" xref="S2.E2.m1.1.1.1.1.1.1.2.1.cmml">,</mo></mrow></mtd><mtd class="ltx_align_left" columnalign="left" id="S2.E2.m1.8.8.8c" xref="S2.E2.m1.10.10.3.1.cmml"><mrow id="S2.E2.m1.2.2.2.2.2.1" xref="S2.E2.m1.2.2.2.2.2.1.cmml"><mrow id="S2.E2.m1.2.2.2.2.2.1.2" xref="S2.E2.m1.2.2.2.2.2.1.2.cmml"><mtext id="S2.E2.m1.2.2.2.2.2.1.2.2" xref="S2.E2.m1.2.2.2.2.2.1.2.2a.cmml">if </mtext><mo id="S2.E2.m1.2.2.2.2.2.1.2.1" xref="S2.E2.m1.2.2.2.2.2.1.2.1.cmml">⁢</mo><msub id="S2.E2.m1.2.2.2.2.2.1.2.3" xref="S2.E2.m1.2.2.2.2.2.1.2.3.cmml"><mi id="S2.E2.m1.2.2.2.2.2.1.2.3.2" xref="S2.E2.m1.2.2.2.2.2.1.2.3.2.cmml">s</mi><mi id="S2.E2.m1.2.2.2.2.2.1.2.3.3" xref="S2.E2.m1.2.2.2.2.2.1.2.3.3.cmml">t</mi></msub></mrow><mo id="S2.E2.m1.2.2.2.2.2.1.1" xref="S2.E2.m1.2.2.2.2.2.1.1.cmml">=</mo><mrow id="S2.E2.m1.2.2.2.2.2.1.3" xref="S2.E2.m1.2.2.2.2.2.1.3c.cmml"><mtext class="ltx_font_smallcaps" id="S2.E2.m1.2.2.2.2.2.1.3a" xref="S2.E2.m1.2.2.2.2.2.1.3c.cmml">Reason</mtext><mtext id="S2.E2.m1.2.2.2.2.2.1.3b" xref="S2.E2.m1.2.2.2.2.2.1.3c.cmml"> state</mtext></mrow></mrow></mtd></mtr><mtr id="S2.E2.m1.8.8.8d" xref="S2.E2.m1.10.10.3.1.cmml"><mtd class="ltx_align_left" columnalign="left" id="S2.E2.m1.8.8.8e" xref="S2.E2.m1.10.10.3.1.cmml"><mrow id="S2.E2.m1.3.3.3.3.1.1.2" xref="S2.E2.m1.3.3.3.3.1.1.2.1.cmml"><mrow id="S2.E2.m1.3.3.3.3.1.1.2.1" xref="S2.E2.m1.3.3.3.3.1.1.2.1.cmml"><msubsup id="S2.E2.m1.3.3.3.3.1.1.2.1.3" xref="S2.E2.m1.3.3.3.3.1.1.2.1.3.cmml"><mi id="S2.E2.m1.3.3.3.3.1.1.2.1.3.2.2" xref="S2.E2.m1.3.3.3.3.1.1.2.1.3.2.2.cmml">g</mi><mtext class="ltx_font_smallcaps" id="S2.E2.m1.3.3.3.3.1.1.2.1.3.3" xref="S2.E2.m1.3.3.3.3.1.1.2.1.3.3a.cmml">Query</mtext><mi id="S2.E2.m1.3.3.3.3.1.1.2.1.3.2.3" xref="S2.E2.m1.3.3.3.3.1.1.2.1.3.2.3.cmml">e</mi></msubsup><mo id="S2.E2.m1.3.3.3.3.1.1.2.1.2" xref="S2.E2.m1.3.3.3.3.1.1.2.1.2.cmml">⁢</mo><mrow id="S2.E2.m1.3.3.3.3.1.1.2.1.1.1" xref="S2.E2.m1.3.3.3.3.1.1.2.1.1.2.cmml"><mo id="S2.E2.m1.3.3.3.3.1.1.2.1.1.1.2" stretchy="false" xref="S2.E2.m1.3.3.3.3.1.1.2.1.1.2.cmml">(</mo><msub id="S2.E2.m1.3.3.3.3.1.1.2.1.1.1.1" xref="S2.E2.m1.3.3.3.3.1.1.2.1.1.1.1.cmml"><mi id="S2.E2.m1.3.3.3.3.1.1.2.1.1.1.1.2" xref="S2.E2.m1.3.3.3.3.1.1.2.1.1.1.1.2.cmml">s</mi><mi id="S2.E2.m1.3.3.3.3.1.1.2.1.1.1.1.3" xref="S2.E2.m1.3.3.3.3.1.1.2.1.1.1.1.3.cmml">t</mi></msub><mo id="S2.E2.m1.3.3.3.3.1.1.2.1.1.1.3" xref="S2.E2.m1.3.3.3.3.1.1.2.1.1.2.cmml">,</mo><mi id="S2.E2.m1.3.3.3.3.1.1.1" xref="S2.E2.m1.3.3.3.3.1.1.1.cmml">a</mi><mo id="S2.E2.m1.3.3.3.3.1.1.2.1.1.1.4" stretchy="false" xref="S2.E2.m1.3.3.3.3.1.1.2.1.1.2.cmml">)</mo></mrow></mrow><mo id="S2.E2.m1.3.3.3.3.1.1.2.2" xref="S2.E2.m1.3.3.3.3.1.1.2.1.cmml">,</mo></mrow></mtd><mtd class="ltx_align_left" columnalign="left" id="S2.E2.m1.8.8.8f" xref="S2.E2.m1.10.10.3.1.cmml"><mrow id="S2.E2.m1.4.4.4.4.2.1" xref="S2.E2.m1.4.4.4.4.2.1.cmml"><mrow id="S2.E2.m1.4.4.4.4.2.1.2" xref="S2.E2.m1.4.4.4.4.2.1.2.cmml"><mtext id="S2.E2.m1.4.4.4.4.2.1.2.2" xref="S2.E2.m1.4.4.4.4.2.1.2.2a.cmml">if </mtext><mo id="S2.E2.m1.4.4.4.4.2.1.2.1" xref="S2.E2.m1.4.4.4.4.2.1.2.1.cmml">⁢</mo><msub id="S2.E2.m1.4.4.4.4.2.1.2.3" xref="S2.E2.m1.4.4.4.4.2.1.2.3.cmml"><mi id="S2.E2.m1.4.4.4.4.2.1.2.3.2" xref="S2.E2.m1.4.4.4.4.2.1.2.3.2.cmml">s</mi><mi id="S2.E2.m1.4.4.4.4.2.1.2.3.3" xref="S2.E2.m1.4.4.4.4.2.1.2.3.3.cmml">t</mi></msub></mrow><mo id="S2.E2.m1.4.4.4.4.2.1.1" xref="S2.E2.m1.4.4.4.4.2.1.1.cmml">=</mo><mrow id="S2.E2.m1.4.4.4.4.2.1.3" xref="S2.E2.m1.4.4.4.4.2.1.3c.cmml"><mtext class="ltx_font_smallcaps" id="S2.E2.m1.4.4.4.4.2.1.3a" xref="S2.E2.m1.4.4.4.4.2.1.3c.cmml">GenQuery</mtext><mtext id="S2.E2.m1.4.4.4.4.2.1.3b" xref="S2.E2.m1.4.4.4.4.2.1.3c.cmml"> state</mtext></mrow></mrow></mtd></mtr><mtr id="S2.E2.m1.8.8.8g" xref="S2.E2.m1.10.10.3.1.cmml"><mtd class="ltx_align_left" columnalign="left" id="S2.E2.m1.8.8.8h" xref="S2.E2.m1.10.10.3.1.cmml"><mrow id="S2.E2.m1.5.5.5.5.1.1.2" xref="S2.E2.m1.5.5.5.5.1.1.2.1.cmml"><mrow id="S2.E2.m1.5.5.5.5.1.1.2.1" xref="S2.E2.m1.5.5.5.5.1.1.2.1.cmml"><msubsup id="S2.E2.m1.5.5.5.5.1.1.2.1.3" xref="S2.E2.m1.5.5.5.5.1.1.2.1.3.cmml"><mi id="S2.E2.m1.5.5.5.5.1.1.2.1.3.2.2" xref="S2.E2.m1.5.5.5.5.1.1.2.1.3.2.2.cmml">g</mi><mtext class="ltx_font_smallcaps" id="S2.E2.m1.5.5.5.5.1.1.2.1.3.3" xref="S2.E2.m1.5.5.5.5.1.1.2.1.3.3a.cmml">Doc</mtext><mi id="S2.E2.m1.5.5.5.5.1.1.2.1.3.2.3" xref="S2.E2.m1.5.5.5.5.1.1.2.1.3.2.3.cmml">e</mi></msubsup><mo id="S2.E2.m1.5.5.5.5.1.1.2.1.2" xref="S2.E2.m1.5.5.5.5.1.1.2.1.2.cmml">⁢</mo><mrow id="S2.E2.m1.5.5.5.5.1.1.2.1.1.1" xref="S2.E2.m1.5.5.5.5.1.1.2.1.1.2.cmml"><mo id="S2.E2.m1.5.5.5.5.1.1.2.1.1.1.2" stretchy="false" xref="S2.E2.m1.5.5.5.5.1.1.2.1.1.2.cmml">(</mo><msub id="S2.E2.m1.5.5.5.5.1.1.2.1.1.1.1" xref="S2.E2.m1.5.5.5.5.1.1.2.1.1.1.1.cmml"><mi id="S2.E2.m1.5.5.5.5.1.1.2.1.1.1.1.2" xref="S2.E2.m1.5.5.5.5.1.1.2.1.1.1.1.2.cmml">s</mi><mi id="S2.E2.m1.5.5.5.5.1.1.2.1.1.1.1.3" xref="S2.E2.m1.5.5.5.5.1.1.2.1.1.1.1.3.cmml">t</mi></msub><mo id="S2.E2.m1.5.5.5.5.1.1.2.1.1.1.3" xref="S2.E2.m1.5.5.5.5.1.1.2.1.1.2.cmml">,</mo><mi id="S2.E2.m1.5.5.5.5.1.1.1" xref="S2.E2.m1.5.5.5.5.1.1.1.cmml">a</mi><mo id="S2.E2.m1.5.5.5.5.1.1.2.1.1.1.4" stretchy="false" xref="S2.E2.m1.5.5.5.5.1.1.2.1.1.2.cmml">)</mo></mrow></mrow><mo id="S2.E2.m1.5.5.5.5.1.1.2.2" xref="S2.E2.m1.5.5.5.5.1.1.2.1.cmml">,</mo></mrow></mtd><mtd class="ltx_align_left" columnalign="left" id="S2.E2.m1.8.8.8i" xref="S2.E2.m1.10.10.3.1.cmml"><mrow id="S2.E2.m1.6.6.6.6.2.1" xref="S2.E2.m1.6.6.6.6.2.1.cmml"><mrow id="S2.E2.m1.6.6.6.6.2.1.2" xref="S2.E2.m1.6.6.6.6.2.1.2.cmml"><mtext id="S2.E2.m1.6.6.6.6.2.1.2.2" xref="S2.E2.m1.6.6.6.6.2.1.2.2a.cmml">if </mtext><mo id="S2.E2.m1.6.6.6.6.2.1.2.1" xref="S2.E2.m1.6.6.6.6.2.1.2.1.cmml">⁢</mo><msub id="S2.E2.m1.6.6.6.6.2.1.2.3" xref="S2.E2.m1.6.6.6.6.2.1.2.3.cmml"><mi id="S2.E2.m1.6.6.6.6.2.1.2.3.2" xref="S2.E2.m1.6.6.6.6.2.1.2.3.2.cmml">s</mi><mi id="S2.E2.m1.6.6.6.6.2.1.2.3.3" xref="S2.E2.m1.6.6.6.6.2.1.2.3.3.cmml">t</mi></msub></mrow><mo id="S2.E2.m1.6.6.6.6.2.1.1" xref="S2.E2.m1.6.6.6.6.2.1.1.cmml">=</mo><mrow id="S2.E2.m1.6.6.6.6.2.1.3" xref="S2.E2.m1.6.6.6.6.2.1.3c.cmml"><mtext class="ltx_font_smallcaps" id="S2.E2.m1.6.6.6.6.2.1.3a" xref="S2.E2.m1.6.6.6.6.2.1.3c.cmml">Retrieve</mtext><mtext id="S2.E2.m1.6.6.6.6.2.1.3b" xref="S2.E2.m1.6.6.6.6.2.1.3c.cmml"> state</mtext></mrow></mrow></mtd></mtr><mtr id="S2.E2.m1.8.8.8j" xref="S2.E2.m1.10.10.3.1.cmml"><mtd class="ltx_align_left" columnalign="left" id="S2.E2.m1.8.8.8k" xref="S2.E2.m1.10.10.3.1.cmml"><mrow id="S2.E2.m1.7.7.7.7.1.1.2" xref="S2.E2.m1.7.7.7.7.1.1.2.1.cmml"><mrow id="S2.E2.m1.7.7.7.7.1.1.2.1" xref="S2.E2.m1.7.7.7.7.1.1.2.1.cmml"><msup id="S2.E2.m1.7.7.7.7.1.1.2.1.3" xref="S2.E2.m1.7.7.7.7.1.1.2.1.3.cmml"><mi id="S2.E2.m1.7.7.7.7.1.1.2.1.3.2" xref="S2.E2.m1.7.7.7.7.1.1.2.1.3.2.cmml">g</mi><mi id="S2.E2.m1.7.7.7.7.1.1.2.1.3.3" xref="S2.E2.m1.7.7.7.7.1.1.2.1.3.3.cmml">g</mi></msup><mo id="S2.E2.m1.7.7.7.7.1.1.2.1.2" xref="S2.E2.m1.7.7.7.7.1.1.2.1.2.cmml">⁢</mo><mrow id="S2.E2.m1.7.7.7.7.1.1.2.1.1.1" xref="S2.E2.m1.7.7.7.7.1.1.2.1.1.2.cmml"><mo id="S2.E2.m1.7.7.7.7.1.1.2.1.1.1.2" stretchy="false" xref="S2.E2.m1.7.7.7.7.1.1.2.1.1.2.cmml">(</mo><msub id="S2.E2.m1.7.7.7.7.1.1.2.1.1.1.1" xref="S2.E2.m1.7.7.7.7.1.1.2.1.1.1.1.cmml"><mi id="S2.E2.m1.7.7.7.7.1.1.2.1.1.1.1.2" xref="S2.E2.m1.7.7.7.7.1.1.2.1.1.1.1.2.cmml">s</mi><mi id="S2.E2.m1.7.7.7.7.1.1.2.1.1.1.1.3" xref="S2.E2.m1.7.7.7.7.1.1.2.1.1.1.1.3.cmml">t</mi></msub><mo id="S2.E2.m1.7.7.7.7.1.1.2.1.1.1.3" xref="S2.E2.m1.7.7.7.7.1.1.2.1.1.2.cmml">,</mo><mi id="S2.E2.m1.7.7.7.7.1.1.1" xref="S2.E2.m1.7.7.7.7.1.1.1.cmml">a</mi><mo id="S2.E2.m1.7.7.7.7.1.1.2.1.1.1.4" stretchy="false" xref="S2.E2.m1.7.7.7.7.1.1.2.1.1.2.cmml">)</mo></mrow></mrow><mo id="S2.E2.m1.7.7.7.7.1.1.2.2" xref="S2.E2.m1.7.7.7.7.1.1.2.1.cmml">,</mo></mrow></mtd><mtd class="ltx_align_left" columnalign="left" id="S2.E2.m1.8.8.8l" xref="S2.E2.m1.10.10.3.1.cmml"><mtext id="S2.E2.m1.8.8.8.8.2.1" xref="S2.E2.m1.8.8.8.8.2.1a.cmml">otherwise.</mtext></mtd></mtr></mtable></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.E2.m1.10b"><apply id="S2.E2.m1.10.10.cmml" xref="S2.E2.m1.10.10"><eq id="S2.E2.m1.10.10.2.cmml" xref="S2.E2.m1.10.10.2"></eq><apply id="S2.E2.m1.10.10.1.cmml" xref="S2.E2.m1.10.10.1"><times id="S2.E2.m1.10.10.1.2.cmml" xref="S2.E2.m1.10.10.1.2"></times><ci id="S2.E2.m1.10.10.1.3.cmml" xref="S2.E2.m1.10.10.1.3">ℛ</ci><interval closure="open" id="S2.E2.m1.10.10.1.1.2.cmml" xref="S2.E2.m1.10.10.1.1.1"><apply id="S2.E2.m1.10.10.1.1.1.1.cmml" xref="S2.E2.m1.10.10.1.1.1.1"><csymbol cd="ambiguous" id="S2.E2.m1.10.10.1.1.1.1.1.cmml" xref="S2.E2.m1.10.10.1.1.1.1">subscript</csymbol><ci id="S2.E2.m1.10.10.1.1.1.1.2.cmml" xref="S2.E2.m1.10.10.1.1.1.1.2">𝑠</ci><ci id="S2.E2.m1.10.10.1.1.1.1.3.cmml" xref="S2.E2.m1.10.10.1.1.1.1.3">𝑡</ci></apply><ci id="S2.E2.m1.9.9.cmml" xref="S2.E2.m1.9.9">𝑎</ci></interval></apply><apply id="S2.E2.m1.10.10.3.1.cmml" xref="S2.E2.m1.8.8"><csymbol cd="latexml" id="S2.E2.m1.10.10.3.1.1.cmml" xref="S2.E2.m1.8.8.9">cases</csymbol><apply id="S2.E2.m1.1.1.1.1.1.1.2.1.cmml" xref="S2.E2.m1.1.1.1.1.1.1.2"><times id="S2.E2.m1.1.1.1.1.1.1.2.1.2.cmml" xref="S2.E2.m1.1.1.1.1.1.1.2.1.2"></times><apply id="S2.E2.m1.1.1.1.1.1.1.2.1.3.cmml" xref="S2.E2.m1.1.1.1.1.1.1.2.1.3"><csymbol cd="ambiguous" id="S2.E2.m1.1.1.1.1.1.1.2.1.3.1.cmml" xref="S2.E2.m1.1.1.1.1.1.1.2.1.3">subscript</csymbol><apply id="S2.E2.m1.1.1.1.1.1.1.2.1.3.2.cmml" xref="S2.E2.m1.1.1.1.1.1.1.2.1.3"><csymbol cd="ambiguous" id="S2.E2.m1.1.1.1.1.1.1.2.1.3.2.1.cmml" xref="S2.E2.m1.1.1.1.1.1.1.2.1.3">superscript</csymbol><ci id="S2.E2.m1.1.1.1.1.1.1.2.1.3.2.2.cmml" xref="S2.E2.m1.1.1.1.1.1.1.2.1.3.2.2">𝑔</ci><ci id="S2.E2.m1.1.1.1.1.1.1.2.1.3.2.3.cmml" xref="S2.E2.m1.1.1.1.1.1.1.2.1.3.2.3">𝑒</ci></apply><ci id="S2.E2.m1.1.1.1.1.1.1.2.1.3.3a.cmml" xref="S2.E2.m1.1.1.1.1.1.1.2.1.3.3"><mtext class="ltx_font_smallcaps" id="S2.E2.m1.1.1.1.1.1.1.2.1.3.3.cmml" mathsize="70%" xref="S2.E2.m1.1.1.1.1.1.1.2.1.3.3">Rationale</mtext></ci></apply><interval closure="open" id="S2.E2.m1.1.1.1.1.1.1.2.1.1.2.cmml" xref="S2.E2.m1.1.1.1.1.1.1.2.1.1.1"><apply id="S2.E2.m1.1.1.1.1.1.1.2.1.1.1.1.cmml" xref="S2.E2.m1.1.1.1.1.1.1.2.1.1.1.1"><csymbol cd="ambiguous" id="S2.E2.m1.1.1.1.1.1.1.2.1.1.1.1.1.cmml" xref="S2.E2.m1.1.1.1.1.1.1.2.1.1.1.1">subscript</csymbol><ci id="S2.E2.m1.1.1.1.1.1.1.2.1.1.1.1.2.cmml" xref="S2.E2.m1.1.1.1.1.1.1.2.1.1.1.1.2">𝑠</ci><ci id="S2.E2.m1.1.1.1.1.1.1.2.1.1.1.1.3.cmml" xref="S2.E2.m1.1.1.1.1.1.1.2.1.1.1.1.3">𝑡</ci></apply><ci id="S2.E2.m1.1.1.1.1.1.1.1.cmml" xref="S2.E2.m1.1.1.1.1.1.1.1">𝑎</ci></interval></apply><apply id="S2.E2.m1.2.2.2.2.2.1.cmml" xref="S2.E2.m1.2.2.2.2.2.1"><eq id="S2.E2.m1.2.2.2.2.2.1.1.cmml" xref="S2.E2.m1.2.2.2.2.2.1.1"></eq><apply id="S2.E2.m1.2.2.2.2.2.1.2.cmml" xref="S2.E2.m1.2.2.2.2.2.1.2"><times id="S2.E2.m1.2.2.2.2.2.1.2.1.cmml" xref="S2.E2.m1.2.2.2.2.2.1.2.1"></times><ci id="S2.E2.m1.2.2.2.2.2.1.2.2a.cmml" xref="S2.E2.m1.2.2.2.2.2.1.2.2"><mtext id="S2.E2.m1.2.2.2.2.2.1.2.2.cmml" xref="S2.E2.m1.2.2.2.2.2.1.2.2">if </mtext></ci><apply id="S2.E2.m1.2.2.2.2.2.1.2.3.cmml" xref="S2.E2.m1.2.2.2.2.2.1.2.3"><csymbol cd="ambiguous" id="S2.E2.m1.2.2.2.2.2.1.2.3.1.cmml" xref="S2.E2.m1.2.2.2.2.2.1.2.3">subscript</csymbol><ci id="S2.E2.m1.2.2.2.2.2.1.2.3.2.cmml" xref="S2.E2.m1.2.2.2.2.2.1.2.3.2">𝑠</ci><ci id="S2.E2.m1.2.2.2.2.2.1.2.3.3.cmml" xref="S2.E2.m1.2.2.2.2.2.1.2.3.3">𝑡</ci></apply></apply><ci id="S2.E2.m1.2.2.2.2.2.1.3c.cmml" xref="S2.E2.m1.2.2.2.2.2.1.3"><mrow id="S2.E2.m1.2.2.2.2.2.1.3.cmml" xref="S2.E2.m1.2.2.2.2.2.1.3"><mtext class="ltx_font_smallcaps" id="S2.E2.m1.2.2.2.2.2.1.3a.cmml" xref="S2.E2.m1.2.2.2.2.2.1.3">Reason</mtext><mtext id="S2.E2.m1.2.2.2.2.2.1.3b.cmml" xref="S2.E2.m1.2.2.2.2.2.1.3"> state</mtext></mrow></ci></apply><apply id="S2.E2.m1.3.3.3.3.1.1.2.1.cmml" xref="S2.E2.m1.3.3.3.3.1.1.2"><times id="S2.E2.m1.3.3.3.3.1.1.2.1.2.cmml" xref="S2.E2.m1.3.3.3.3.1.1.2.1.2"></times><apply id="S2.E2.m1.3.3.3.3.1.1.2.1.3.cmml" xref="S2.E2.m1.3.3.3.3.1.1.2.1.3"><csymbol cd="ambiguous" id="S2.E2.m1.3.3.3.3.1.1.2.1.3.1.cmml" xref="S2.E2.m1.3.3.3.3.1.1.2.1.3">subscript</csymbol><apply id="S2.E2.m1.3.3.3.3.1.1.2.1.3.2.cmml" xref="S2.E2.m1.3.3.3.3.1.1.2.1.3"><csymbol cd="ambiguous" id="S2.E2.m1.3.3.3.3.1.1.2.1.3.2.1.cmml" xref="S2.E2.m1.3.3.3.3.1.1.2.1.3">superscript</csymbol><ci id="S2.E2.m1.3.3.3.3.1.1.2.1.3.2.2.cmml" xref="S2.E2.m1.3.3.3.3.1.1.2.1.3.2.2">𝑔</ci><ci id="S2.E2.m1.3.3.3.3.1.1.2.1.3.2.3.cmml" xref="S2.E2.m1.3.3.3.3.1.1.2.1.3.2.3">𝑒</ci></apply><ci id="S2.E2.m1.3.3.3.3.1.1.2.1.3.3a.cmml" xref="S2.E2.m1.3.3.3.3.1.1.2.1.3.3"><mtext class="ltx_font_smallcaps" id="S2.E2.m1.3.3.3.3.1.1.2.1.3.3.cmml" mathsize="70%" xref="S2.E2.m1.3.3.3.3.1.1.2.1.3.3">Query</mtext></ci></apply><interval closure="open" id="S2.E2.m1.3.3.3.3.1.1.2.1.1.2.cmml" xref="S2.E2.m1.3.3.3.3.1.1.2.1.1.1"><apply id="S2.E2.m1.3.3.3.3.1.1.2.1.1.1.1.cmml" xref="S2.E2.m1.3.3.3.3.1.1.2.1.1.1.1"><csymbol cd="ambiguous" id="S2.E2.m1.3.3.3.3.1.1.2.1.1.1.1.1.cmml" xref="S2.E2.m1.3.3.3.3.1.1.2.1.1.1.1">subscript</csymbol><ci id="S2.E2.m1.3.3.3.3.1.1.2.1.1.1.1.2.cmml" xref="S2.E2.m1.3.3.3.3.1.1.2.1.1.1.1.2">𝑠</ci><ci id="S2.E2.m1.3.3.3.3.1.1.2.1.1.1.1.3.cmml" xref="S2.E2.m1.3.3.3.3.1.1.2.1.1.1.1.3">𝑡</ci></apply><ci id="S2.E2.m1.3.3.3.3.1.1.1.cmml" xref="S2.E2.m1.3.3.3.3.1.1.1">𝑎</ci></interval></apply><apply id="S2.E2.m1.4.4.4.4.2.1.cmml" xref="S2.E2.m1.4.4.4.4.2.1"><eq id="S2.E2.m1.4.4.4.4.2.1.1.cmml" xref="S2.E2.m1.4.4.4.4.2.1.1"></eq><apply id="S2.E2.m1.4.4.4.4.2.1.2.cmml" xref="S2.E2.m1.4.4.4.4.2.1.2"><times id="S2.E2.m1.4.4.4.4.2.1.2.1.cmml" xref="S2.E2.m1.4.4.4.4.2.1.2.1"></times><ci id="S2.E2.m1.4.4.4.4.2.1.2.2a.cmml" xref="S2.E2.m1.4.4.4.4.2.1.2.2"><mtext id="S2.E2.m1.4.4.4.4.2.1.2.2.cmml" xref="S2.E2.m1.4.4.4.4.2.1.2.2">if </mtext></ci><apply id="S2.E2.m1.4.4.4.4.2.1.2.3.cmml" xref="S2.E2.m1.4.4.4.4.2.1.2.3"><csymbol cd="ambiguous" id="S2.E2.m1.4.4.4.4.2.1.2.3.1.cmml" xref="S2.E2.m1.4.4.4.4.2.1.2.3">subscript</csymbol><ci id="S2.E2.m1.4.4.4.4.2.1.2.3.2.cmml" xref="S2.E2.m1.4.4.4.4.2.1.2.3.2">𝑠</ci><ci id="S2.E2.m1.4.4.4.4.2.1.2.3.3.cmml" xref="S2.E2.m1.4.4.4.4.2.1.2.3.3">𝑡</ci></apply></apply><ci id="S2.E2.m1.4.4.4.4.2.1.3c.cmml" xref="S2.E2.m1.4.4.4.4.2.1.3"><mrow id="S2.E2.m1.4.4.4.4.2.1.3.cmml" xref="S2.E2.m1.4.4.4.4.2.1.3"><mtext class="ltx_font_smallcaps" id="S2.E2.m1.4.4.4.4.2.1.3a.cmml" xref="S2.E2.m1.4.4.4.4.2.1.3">GenQuery</mtext><mtext id="S2.E2.m1.4.4.4.4.2.1.3b.cmml" xref="S2.E2.m1.4.4.4.4.2.1.3"> state</mtext></mrow></ci></apply><apply id="S2.E2.m1.5.5.5.5.1.1.2.1.cmml" xref="S2.E2.m1.5.5.5.5.1.1.2"><times id="S2.E2.m1.5.5.5.5.1.1.2.1.2.cmml" xref="S2.E2.m1.5.5.5.5.1.1.2.1.2"></times><apply id="S2.E2.m1.5.5.5.5.1.1.2.1.3.cmml" xref="S2.E2.m1.5.5.5.5.1.1.2.1.3"><csymbol cd="ambiguous" id="S2.E2.m1.5.5.5.5.1.1.2.1.3.1.cmml" xref="S2.E2.m1.5.5.5.5.1.1.2.1.3">subscript</csymbol><apply id="S2.E2.m1.5.5.5.5.1.1.2.1.3.2.cmml" xref="S2.E2.m1.5.5.5.5.1.1.2.1.3"><csymbol cd="ambiguous" id="S2.E2.m1.5.5.5.5.1.1.2.1.3.2.1.cmml" xref="S2.E2.m1.5.5.5.5.1.1.2.1.3">superscript</csymbol><ci id="S2.E2.m1.5.5.5.5.1.1.2.1.3.2.2.cmml" xref="S2.E2.m1.5.5.5.5.1.1.2.1.3.2.2">𝑔</ci><ci id="S2.E2.m1.5.5.5.5.1.1.2.1.3.2.3.cmml" xref="S2.E2.m1.5.5.5.5.1.1.2.1.3.2.3">𝑒</ci></apply><ci id="S2.E2.m1.5.5.5.5.1.1.2.1.3.3a.cmml" xref="S2.E2.m1.5.5.5.5.1.1.2.1.3.3"><mtext class="ltx_font_smallcaps" id="S2.E2.m1.5.5.5.5.1.1.2.1.3.3.cmml" mathsize="70%" xref="S2.E2.m1.5.5.5.5.1.1.2.1.3.3">Doc</mtext></ci></apply><interval closure="open" id="S2.E2.m1.5.5.5.5.1.1.2.1.1.2.cmml" xref="S2.E2.m1.5.5.5.5.1.1.2.1.1.1"><apply id="S2.E2.m1.5.5.5.5.1.1.2.1.1.1.1.cmml" xref="S2.E2.m1.5.5.5.5.1.1.2.1.1.1.1"><csymbol cd="ambiguous" id="S2.E2.m1.5.5.5.5.1.1.2.1.1.1.1.1.cmml" xref="S2.E2.m1.5.5.5.5.1.1.2.1.1.1.1">subscript</csymbol><ci id="S2.E2.m1.5.5.5.5.1.1.2.1.1.1.1.2.cmml" xref="S2.E2.m1.5.5.5.5.1.1.2.1.1.1.1.2">𝑠</ci><ci id="S2.E2.m1.5.5.5.5.1.1.2.1.1.1.1.3.cmml" xref="S2.E2.m1.5.5.5.5.1.1.2.1.1.1.1.3">𝑡</ci></apply><ci id="S2.E2.m1.5.5.5.5.1.1.1.cmml" xref="S2.E2.m1.5.5.5.5.1.1.1">𝑎</ci></interval></apply><apply id="S2.E2.m1.6.6.6.6.2.1.cmml" xref="S2.E2.m1.6.6.6.6.2.1"><eq id="S2.E2.m1.6.6.6.6.2.1.1.cmml" xref="S2.E2.m1.6.6.6.6.2.1.1"></eq><apply id="S2.E2.m1.6.6.6.6.2.1.2.cmml" xref="S2.E2.m1.6.6.6.6.2.1.2"><times id="S2.E2.m1.6.6.6.6.2.1.2.1.cmml" xref="S2.E2.m1.6.6.6.6.2.1.2.1"></times><ci id="S2.E2.m1.6.6.6.6.2.1.2.2a.cmml" xref="S2.E2.m1.6.6.6.6.2.1.2.2"><mtext id="S2.E2.m1.6.6.6.6.2.1.2.2.cmml" xref="S2.E2.m1.6.6.6.6.2.1.2.2">if </mtext></ci><apply id="S2.E2.m1.6.6.6.6.2.1.2.3.cmml" xref="S2.E2.m1.6.6.6.6.2.1.2.3"><csymbol cd="ambiguous" id="S2.E2.m1.6.6.6.6.2.1.2.3.1.cmml" xref="S2.E2.m1.6.6.6.6.2.1.2.3">subscript</csymbol><ci id="S2.E2.m1.6.6.6.6.2.1.2.3.2.cmml" xref="S2.E2.m1.6.6.6.6.2.1.2.3.2">𝑠</ci><ci id="S2.E2.m1.6.6.6.6.2.1.2.3.3.cmml" xref="S2.E2.m1.6.6.6.6.2.1.2.3.3">𝑡</ci></apply></apply><ci id="S2.E2.m1.6.6.6.6.2.1.3c.cmml" xref="S2.E2.m1.6.6.6.6.2.1.3"><mrow id="S2.E2.m1.6.6.6.6.2.1.3.cmml" xref="S2.E2.m1.6.6.6.6.2.1.3"><mtext class="ltx_font_smallcaps" id="S2.E2.m1.6.6.6.6.2.1.3a.cmml" xref="S2.E2.m1.6.6.6.6.2.1.3">Retrieve</mtext><mtext id="S2.E2.m1.6.6.6.6.2.1.3b.cmml" xref="S2.E2.m1.6.6.6.6.2.1.3"> state</mtext></mrow></ci></apply><apply id="S2.E2.m1.7.7.7.7.1.1.2.1.cmml" xref="S2.E2.m1.7.7.7.7.1.1.2"><times id="S2.E2.m1.7.7.7.7.1.1.2.1.2.cmml" xref="S2.E2.m1.7.7.7.7.1.1.2.1.2"></times><apply id="S2.E2.m1.7.7.7.7.1.1.2.1.3.cmml" xref="S2.E2.m1.7.7.7.7.1.1.2.1.3"><csymbol cd="ambiguous" id="S2.E2.m1.7.7.7.7.1.1.2.1.3.1.cmml" xref="S2.E2.m1.7.7.7.7.1.1.2.1.3">superscript</csymbol><ci id="S2.E2.m1.7.7.7.7.1.1.2.1.3.2.cmml" xref="S2.E2.m1.7.7.7.7.1.1.2.1.3.2">𝑔</ci><ci id="S2.E2.m1.7.7.7.7.1.1.2.1.3.3.cmml" xref="S2.E2.m1.7.7.7.7.1.1.2.1.3.3">𝑔</ci></apply><interval closure="open" id="S2.E2.m1.7.7.7.7.1.1.2.1.1.2.cmml" xref="S2.E2.m1.7.7.7.7.1.1.2.1.1.1"><apply id="S2.E2.m1.7.7.7.7.1.1.2.1.1.1.1.cmml" xref="S2.E2.m1.7.7.7.7.1.1.2.1.1.1.1"><csymbol cd="ambiguous" id="S2.E2.m1.7.7.7.7.1.1.2.1.1.1.1.1.cmml" xref="S2.E2.m1.7.7.7.7.1.1.2.1.1.1.1">subscript</csymbol><ci id="S2.E2.m1.7.7.7.7.1.1.2.1.1.1.1.2.cmml" xref="S2.E2.m1.7.7.7.7.1.1.2.1.1.1.1.2">𝑠</ci><ci id="S2.E2.m1.7.7.7.7.1.1.2.1.1.1.1.3.cmml" xref="S2.E2.m1.7.7.7.7.1.1.2.1.1.1.1.3">𝑡</ci></apply><ci id="S2.E2.m1.7.7.7.7.1.1.1.cmml" xref="S2.E2.m1.7.7.7.7.1.1.1">𝑎</ci></interval></apply><ci id="S2.E2.m1.8.8.8.8.2.1a.cmml" xref="S2.E2.m1.8.8.8.8.2.1"><mtext id="S2.E2.m1.8.8.8.8.2.1.cmml" xref="S2.E2.m1.8.8.8.8.2.1">otherwise.</mtext></ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E2.m1.10c">\mathcal{R}(s_{t},a)=\begin{cases}g^{e}_{\textsc{Rationale}}(s_{t},a),&amp;\text{%
if }s_{t}=\textsc{Reason}\text{ state}\\
g^{e}_{\textsc{Query}}(s_{t},a),&amp;\text{if }s_{t}=\textsc{GenQuery}\text{ state%
}\\
g^{e}_{\textsc{Doc}}(s_{t},a),&amp;\text{if }s_{t}=\textsc{Retrieve}\text{ state}%
\\
g^{g}(s_{t},a),&amp;\text{otherwise.}\end{cases}</annotation><annotation encoding="application/x-llamapun" id="S2.E2.m1.10d">caligraphic_R ( italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT , italic_a ) = { start_ROW start_CELL italic_g start_POSTSUPERSCRIPT italic_e end_POSTSUPERSCRIPT start_POSTSUBSCRIPT Rationale end_POSTSUBSCRIPT ( italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT , italic_a ) , end_CELL start_CELL if italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT = smallcaps_Reason state end_CELL end_ROW start_ROW start_CELL italic_g start_POSTSUPERSCRIPT italic_e end_POSTSUPERSCRIPT start_POSTSUBSCRIPT Query end_POSTSUBSCRIPT ( italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT , italic_a ) , end_CELL start_CELL if italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT = smallcaps_GenQuery state end_CELL end_ROW start_ROW start_CELL italic_g start_POSTSUPERSCRIPT italic_e end_POSTSUPERSCRIPT start_POSTSUBSCRIPT Doc end_POSTSUBSCRIPT ( italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT , italic_a ) , end_CELL start_CELL if italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT = smallcaps_Retrieve state end_CELL end_ROW start_ROW start_CELL italic_g start_POSTSUPERSCRIPT italic_g end_POSTSUPERSCRIPT ( italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT , italic_a ) , end_CELL start_CELL otherwise. end_CELL end_ROW</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(2)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S2.SS2.SSS0.Px1.p1.13">Specifically, distinct critic models are utilized for different state types:
<math alttext="g^{g}(\cdot)" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px1.p1.8.m1.1"><semantics id="S2.SS2.SSS0.Px1.p1.8.m1.1a"><mrow id="S2.SS2.SSS0.Px1.p1.8.m1.1.2" xref="S2.SS2.SSS0.Px1.p1.8.m1.1.2.cmml"><msup id="S2.SS2.SSS0.Px1.p1.8.m1.1.2.2" xref="S2.SS2.SSS0.Px1.p1.8.m1.1.2.2.cmml"><mi id="S2.SS2.SSS0.Px1.p1.8.m1.1.2.2.2" xref="S2.SS2.SSS0.Px1.p1.8.m1.1.2.2.2.cmml">g</mi><mi id="S2.SS2.SSS0.Px1.p1.8.m1.1.2.2.3" xref="S2.SS2.SSS0.Px1.p1.8.m1.1.2.2.3.cmml">g</mi></msup><mo id="S2.SS2.SSS0.Px1.p1.8.m1.1.2.1" xref="S2.SS2.SSS0.Px1.p1.8.m1.1.2.1.cmml">⁢</mo><mrow id="S2.SS2.SSS0.Px1.p1.8.m1.1.2.3.2" xref="S2.SS2.SSS0.Px1.p1.8.m1.1.2.cmml"><mo id="S2.SS2.SSS0.Px1.p1.8.m1.1.2.3.2.1" stretchy="false" xref="S2.SS2.SSS0.Px1.p1.8.m1.1.2.cmml">(</mo><mo id="S2.SS2.SSS0.Px1.p1.8.m1.1.1" lspace="0em" rspace="0em" xref="S2.SS2.SSS0.Px1.p1.8.m1.1.1.cmml">⋅</mo><mo id="S2.SS2.SSS0.Px1.p1.8.m1.1.2.3.2.2" stretchy="false" xref="S2.SS2.SSS0.Px1.p1.8.m1.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px1.p1.8.m1.1b"><apply id="S2.SS2.SSS0.Px1.p1.8.m1.1.2.cmml" xref="S2.SS2.SSS0.Px1.p1.8.m1.1.2"><times id="S2.SS2.SSS0.Px1.p1.8.m1.1.2.1.cmml" xref="S2.SS2.SSS0.Px1.p1.8.m1.1.2.1"></times><apply id="S2.SS2.SSS0.Px1.p1.8.m1.1.2.2.cmml" xref="S2.SS2.SSS0.Px1.p1.8.m1.1.2.2"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px1.p1.8.m1.1.2.2.1.cmml" xref="S2.SS2.SSS0.Px1.p1.8.m1.1.2.2">superscript</csymbol><ci id="S2.SS2.SSS0.Px1.p1.8.m1.1.2.2.2.cmml" xref="S2.SS2.SSS0.Px1.p1.8.m1.1.2.2.2">𝑔</ci><ci id="S2.SS2.SSS0.Px1.p1.8.m1.1.2.2.3.cmml" xref="S2.SS2.SSS0.Px1.p1.8.m1.1.2.2.3">𝑔</ci></apply><ci id="S2.SS2.SSS0.Px1.p1.8.m1.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.8.m1.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px1.p1.8.m1.1c">g^{g}(\cdot)</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px1.p1.8.m1.1d">italic_g start_POSTSUPERSCRIPT italic_g end_POSTSUPERSCRIPT ( ⋅ )</annotation></semantics></math> is for determining the next sub-goal at the current execution state (<span class="ltx_text ltx_font_italic" id="S2.SS2.SSS0.Px1.p1.13.1">i.e., </span>the inference Steps 1 in Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S2.F2" title="Figure 2 ‣ 2 Critic-Guided Planning with Retrieval-Augmentation ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_tag">2</span></a>), and <math alttext="g^{e}(\cdot)" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px1.p1.9.m2.1"><semantics id="S2.SS2.SSS0.Px1.p1.9.m2.1a"><mrow id="S2.SS2.SSS0.Px1.p1.9.m2.1.2" xref="S2.SS2.SSS0.Px1.p1.9.m2.1.2.cmml"><msup id="S2.SS2.SSS0.Px1.p1.9.m2.1.2.2" xref="S2.SS2.SSS0.Px1.p1.9.m2.1.2.2.cmml"><mi id="S2.SS2.SSS0.Px1.p1.9.m2.1.2.2.2" xref="S2.SS2.SSS0.Px1.p1.9.m2.1.2.2.2.cmml">g</mi><mi id="S2.SS2.SSS0.Px1.p1.9.m2.1.2.2.3" xref="S2.SS2.SSS0.Px1.p1.9.m2.1.2.2.3.cmml">e</mi></msup><mo id="S2.SS2.SSS0.Px1.p1.9.m2.1.2.1" xref="S2.SS2.SSS0.Px1.p1.9.m2.1.2.1.cmml">⁢</mo><mrow id="S2.SS2.SSS0.Px1.p1.9.m2.1.2.3.2" xref="S2.SS2.SSS0.Px1.p1.9.m2.1.2.cmml"><mo id="S2.SS2.SSS0.Px1.p1.9.m2.1.2.3.2.1" stretchy="false" xref="S2.SS2.SSS0.Px1.p1.9.m2.1.2.cmml">(</mo><mo id="S2.SS2.SSS0.Px1.p1.9.m2.1.1" lspace="0em" rspace="0em" xref="S2.SS2.SSS0.Px1.p1.9.m2.1.1.cmml">⋅</mo><mo id="S2.SS2.SSS0.Px1.p1.9.m2.1.2.3.2.2" stretchy="false" xref="S2.SS2.SSS0.Px1.p1.9.m2.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px1.p1.9.m2.1b"><apply id="S2.SS2.SSS0.Px1.p1.9.m2.1.2.cmml" xref="S2.SS2.SSS0.Px1.p1.9.m2.1.2"><times id="S2.SS2.SSS0.Px1.p1.9.m2.1.2.1.cmml" xref="S2.SS2.SSS0.Px1.p1.9.m2.1.2.1"></times><apply id="S2.SS2.SSS0.Px1.p1.9.m2.1.2.2.cmml" xref="S2.SS2.SSS0.Px1.p1.9.m2.1.2.2"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px1.p1.9.m2.1.2.2.1.cmml" xref="S2.SS2.SSS0.Px1.p1.9.m2.1.2.2">superscript</csymbol><ci id="S2.SS2.SSS0.Px1.p1.9.m2.1.2.2.2.cmml" xref="S2.SS2.SSS0.Px1.p1.9.m2.1.2.2.2">𝑔</ci><ci id="S2.SS2.SSS0.Px1.p1.9.m2.1.2.2.3.cmml" xref="S2.SS2.SSS0.Px1.p1.9.m2.1.2.2.3">𝑒</ci></apply><ci id="S2.SS2.SSS0.Px1.p1.9.m2.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.9.m2.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px1.p1.9.m2.1c">g^{e}(\cdot)</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px1.p1.9.m2.1d">italic_g start_POSTSUPERSCRIPT italic_e end_POSTSUPERSCRIPT ( ⋅ )</annotation></semantics></math> is for evaluating different execution candidates at the current sub-goal state (<span class="ltx_text ltx_font_italic" id="S2.SS2.SSS0.Px1.p1.13.2">i.e., </span>the inference Step 2 in Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S2.F2" title="Figure 2 ‣ 2 Critic-Guided Planning with Retrieval-Augmentation ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_tag">2</span></a>).
Additionally, according to the sub-goal states,
<math alttext="g^{e}(\cdot)" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px1.p1.10.m3.1"><semantics id="S2.SS2.SSS0.Px1.p1.10.m3.1a"><mrow id="S2.SS2.SSS0.Px1.p1.10.m3.1.2" xref="S2.SS2.SSS0.Px1.p1.10.m3.1.2.cmml"><msup id="S2.SS2.SSS0.Px1.p1.10.m3.1.2.2" xref="S2.SS2.SSS0.Px1.p1.10.m3.1.2.2.cmml"><mi id="S2.SS2.SSS0.Px1.p1.10.m3.1.2.2.2" xref="S2.SS2.SSS0.Px1.p1.10.m3.1.2.2.2.cmml">g</mi><mi id="S2.SS2.SSS0.Px1.p1.10.m3.1.2.2.3" xref="S2.SS2.SSS0.Px1.p1.10.m3.1.2.2.3.cmml">e</mi></msup><mo id="S2.SS2.SSS0.Px1.p1.10.m3.1.2.1" xref="S2.SS2.SSS0.Px1.p1.10.m3.1.2.1.cmml">⁢</mo><mrow id="S2.SS2.SSS0.Px1.p1.10.m3.1.2.3.2" xref="S2.SS2.SSS0.Px1.p1.10.m3.1.2.cmml"><mo id="S2.SS2.SSS0.Px1.p1.10.m3.1.2.3.2.1" stretchy="false" xref="S2.SS2.SSS0.Px1.p1.10.m3.1.2.cmml">(</mo><mo id="S2.SS2.SSS0.Px1.p1.10.m3.1.1" lspace="0em" rspace="0em" xref="S2.SS2.SSS0.Px1.p1.10.m3.1.1.cmml">⋅</mo><mo id="S2.SS2.SSS0.Px1.p1.10.m3.1.2.3.2.2" stretchy="false" xref="S2.SS2.SSS0.Px1.p1.10.m3.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px1.p1.10.m3.1b"><apply id="S2.SS2.SSS0.Px1.p1.10.m3.1.2.cmml" xref="S2.SS2.SSS0.Px1.p1.10.m3.1.2"><times id="S2.SS2.SSS0.Px1.p1.10.m3.1.2.1.cmml" xref="S2.SS2.SSS0.Px1.p1.10.m3.1.2.1"></times><apply id="S2.SS2.SSS0.Px1.p1.10.m3.1.2.2.cmml" xref="S2.SS2.SSS0.Px1.p1.10.m3.1.2.2"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px1.p1.10.m3.1.2.2.1.cmml" xref="S2.SS2.SSS0.Px1.p1.10.m3.1.2.2">superscript</csymbol><ci id="S2.SS2.SSS0.Px1.p1.10.m3.1.2.2.2.cmml" xref="S2.SS2.SSS0.Px1.p1.10.m3.1.2.2.2">𝑔</ci><ci id="S2.SS2.SSS0.Px1.p1.10.m3.1.2.2.3.cmml" xref="S2.SS2.SSS0.Px1.p1.10.m3.1.2.2.3">𝑒</ci></apply><ci id="S2.SS2.SSS0.Px1.p1.10.m3.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.10.m3.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px1.p1.10.m3.1c">g^{e}(\cdot)</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px1.p1.10.m3.1d">italic_g start_POSTSUPERSCRIPT italic_e end_POSTSUPERSCRIPT ( ⋅ )</annotation></semantics></math> has three variants <math alttext="g^{e}_{\textsc{Rationale}}" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px1.p1.11.m4.1"><semantics id="S2.SS2.SSS0.Px1.p1.11.m4.1a"><msubsup id="S2.SS2.SSS0.Px1.p1.11.m4.1.1" xref="S2.SS2.SSS0.Px1.p1.11.m4.1.1.cmml"><mi id="S2.SS2.SSS0.Px1.p1.11.m4.1.1.2.2" xref="S2.SS2.SSS0.Px1.p1.11.m4.1.1.2.2.cmml">g</mi><mtext class="ltx_font_smallcaps" id="S2.SS2.SSS0.Px1.p1.11.m4.1.1.3" xref="S2.SS2.SSS0.Px1.p1.11.m4.1.1.3a.cmml">Rationale</mtext><mi id="S2.SS2.SSS0.Px1.p1.11.m4.1.1.2.3" xref="S2.SS2.SSS0.Px1.p1.11.m4.1.1.2.3.cmml">e</mi></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px1.p1.11.m4.1b"><apply id="S2.SS2.SSS0.Px1.p1.11.m4.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.11.m4.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px1.p1.11.m4.1.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.11.m4.1.1">subscript</csymbol><apply id="S2.SS2.SSS0.Px1.p1.11.m4.1.1.2.cmml" xref="S2.SS2.SSS0.Px1.p1.11.m4.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px1.p1.11.m4.1.1.2.1.cmml" xref="S2.SS2.SSS0.Px1.p1.11.m4.1.1">superscript</csymbol><ci id="S2.SS2.SSS0.Px1.p1.11.m4.1.1.2.2.cmml" xref="S2.SS2.SSS0.Px1.p1.11.m4.1.1.2.2">𝑔</ci><ci id="S2.SS2.SSS0.Px1.p1.11.m4.1.1.2.3.cmml" xref="S2.SS2.SSS0.Px1.p1.11.m4.1.1.2.3">𝑒</ci></apply><ci id="S2.SS2.SSS0.Px1.p1.11.m4.1.1.3a.cmml" xref="S2.SS2.SSS0.Px1.p1.11.m4.1.1.3"><mtext class="ltx_font_smallcaps" id="S2.SS2.SSS0.Px1.p1.11.m4.1.1.3.cmml" mathsize="70%" xref="S2.SS2.SSS0.Px1.p1.11.m4.1.1.3">Rationale</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px1.p1.11.m4.1c">g^{e}_{\textsc{Rationale}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px1.p1.11.m4.1d">italic_g start_POSTSUPERSCRIPT italic_e end_POSTSUPERSCRIPT start_POSTSUBSCRIPT Rationale end_POSTSUBSCRIPT</annotation></semantics></math>, <math alttext="g^{e}_{\textsc{Query}}" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px1.p1.12.m5.1"><semantics id="S2.SS2.SSS0.Px1.p1.12.m5.1a"><msubsup id="S2.SS2.SSS0.Px1.p1.12.m5.1.1" xref="S2.SS2.SSS0.Px1.p1.12.m5.1.1.cmml"><mi id="S2.SS2.SSS0.Px1.p1.12.m5.1.1.2.2" xref="S2.SS2.SSS0.Px1.p1.12.m5.1.1.2.2.cmml">g</mi><mtext class="ltx_font_smallcaps" id="S2.SS2.SSS0.Px1.p1.12.m5.1.1.3" xref="S2.SS2.SSS0.Px1.p1.12.m5.1.1.3a.cmml">Query</mtext><mi id="S2.SS2.SSS0.Px1.p1.12.m5.1.1.2.3" xref="S2.SS2.SSS0.Px1.p1.12.m5.1.1.2.3.cmml">e</mi></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px1.p1.12.m5.1b"><apply id="S2.SS2.SSS0.Px1.p1.12.m5.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.12.m5.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px1.p1.12.m5.1.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.12.m5.1.1">subscript</csymbol><apply id="S2.SS2.SSS0.Px1.p1.12.m5.1.1.2.cmml" xref="S2.SS2.SSS0.Px1.p1.12.m5.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px1.p1.12.m5.1.1.2.1.cmml" xref="S2.SS2.SSS0.Px1.p1.12.m5.1.1">superscript</csymbol><ci id="S2.SS2.SSS0.Px1.p1.12.m5.1.1.2.2.cmml" xref="S2.SS2.SSS0.Px1.p1.12.m5.1.1.2.2">𝑔</ci><ci id="S2.SS2.SSS0.Px1.p1.12.m5.1.1.2.3.cmml" xref="S2.SS2.SSS0.Px1.p1.12.m5.1.1.2.3">𝑒</ci></apply><ci id="S2.SS2.SSS0.Px1.p1.12.m5.1.1.3a.cmml" xref="S2.SS2.SSS0.Px1.p1.12.m5.1.1.3"><mtext class="ltx_font_smallcaps" id="S2.SS2.SSS0.Px1.p1.12.m5.1.1.3.cmml" mathsize="70%" xref="S2.SS2.SSS0.Px1.p1.12.m5.1.1.3">Query</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px1.p1.12.m5.1c">g^{e}_{\textsc{Query}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px1.p1.12.m5.1d">italic_g start_POSTSUPERSCRIPT italic_e end_POSTSUPERSCRIPT start_POSTSUBSCRIPT Query end_POSTSUBSCRIPT</annotation></semantics></math>, and <math alttext="g^{e}_{\textsc{Doc}}" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px1.p1.13.m6.1"><semantics id="S2.SS2.SSS0.Px1.p1.13.m6.1a"><msubsup id="S2.SS2.SSS0.Px1.p1.13.m6.1.1" xref="S2.SS2.SSS0.Px1.p1.13.m6.1.1.cmml"><mi id="S2.SS2.SSS0.Px1.p1.13.m6.1.1.2.2" xref="S2.SS2.SSS0.Px1.p1.13.m6.1.1.2.2.cmml">g</mi><mtext class="ltx_font_smallcaps" id="S2.SS2.SSS0.Px1.p1.13.m6.1.1.3" xref="S2.SS2.SSS0.Px1.p1.13.m6.1.1.3a.cmml">Doc</mtext><mi id="S2.SS2.SSS0.Px1.p1.13.m6.1.1.2.3" xref="S2.SS2.SSS0.Px1.p1.13.m6.1.1.2.3.cmml">e</mi></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px1.p1.13.m6.1b"><apply id="S2.SS2.SSS0.Px1.p1.13.m6.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.13.m6.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px1.p1.13.m6.1.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.13.m6.1.1">subscript</csymbol><apply id="S2.SS2.SSS0.Px1.p1.13.m6.1.1.2.cmml" xref="S2.SS2.SSS0.Px1.p1.13.m6.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px1.p1.13.m6.1.1.2.1.cmml" xref="S2.SS2.SSS0.Px1.p1.13.m6.1.1">superscript</csymbol><ci id="S2.SS2.SSS0.Px1.p1.13.m6.1.1.2.2.cmml" xref="S2.SS2.SSS0.Px1.p1.13.m6.1.1.2.2">𝑔</ci><ci id="S2.SS2.SSS0.Px1.p1.13.m6.1.1.2.3.cmml" xref="S2.SS2.SSS0.Px1.p1.13.m6.1.1.2.3">𝑒</ci></apply><ci id="S2.SS2.SSS0.Px1.p1.13.m6.1.1.3a.cmml" xref="S2.SS2.SSS0.Px1.p1.13.m6.1.1.3"><mtext class="ltx_font_smallcaps" id="S2.SS2.SSS0.Px1.p1.13.m6.1.1.3.cmml" mathsize="70%" xref="S2.SS2.SSS0.Px1.p1.13.m6.1.1.3">Doc</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px1.p1.13.m6.1c">g^{e}_{\textsc{Doc}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px1.p1.13.m6.1d">italic_g start_POSTSUPERSCRIPT italic_e end_POSTSUPERSCRIPT start_POSTSUBSCRIPT Doc end_POSTSUBSCRIPT</annotation></semantics></math>, correspondingly evaluating rationales, queries and the retrieved documents.</p>
</div>
</section>
<section class="ltx_paragraph" id="S2.SS2.SSS0.Px2">
<h5 class="ltx_title ltx_title_paragraph">State transition with the selected action.</h5>
<div class="ltx_para ltx_noindent" id="S2.SS2.SSS0.Px2.p1">
<p class="ltx_p" id="S2.SS2.SSS0.Px2.p1.3">Once <math alttext="a_{t}" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px2.p1.1.m1.1"><semantics id="S2.SS2.SSS0.Px2.p1.1.m1.1a"><msub id="S2.SS2.SSS0.Px2.p1.1.m1.1.1" xref="S2.SS2.SSS0.Px2.p1.1.m1.1.1.cmml"><mi id="S2.SS2.SSS0.Px2.p1.1.m1.1.1.2" xref="S2.SS2.SSS0.Px2.p1.1.m1.1.1.2.cmml">a</mi><mi id="S2.SS2.SSS0.Px2.p1.1.m1.1.1.3" xref="S2.SS2.SSS0.Px2.p1.1.m1.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px2.p1.1.m1.1b"><apply id="S2.SS2.SSS0.Px2.p1.1.m1.1.1.cmml" xref="S2.SS2.SSS0.Px2.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px2.p1.1.m1.1.1.1.cmml" xref="S2.SS2.SSS0.Px2.p1.1.m1.1.1">subscript</csymbol><ci id="S2.SS2.SSS0.Px2.p1.1.m1.1.1.2.cmml" xref="S2.SS2.SSS0.Px2.p1.1.m1.1.1.2">𝑎</ci><ci id="S2.SS2.SSS0.Px2.p1.1.m1.1.1.3.cmml" xref="S2.SS2.SSS0.Px2.p1.1.m1.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px2.p1.1.m1.1c">a_{t}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px2.p1.1.m1.1d">italic_a start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math> is determined and executed, the state is then transited from <math alttext="s_{t}" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px2.p1.2.m2.1"><semantics id="S2.SS2.SSS0.Px2.p1.2.m2.1a"><msub id="S2.SS2.SSS0.Px2.p1.2.m2.1.1" xref="S2.SS2.SSS0.Px2.p1.2.m2.1.1.cmml"><mi id="S2.SS2.SSS0.Px2.p1.2.m2.1.1.2" xref="S2.SS2.SSS0.Px2.p1.2.m2.1.1.2.cmml">s</mi><mi id="S2.SS2.SSS0.Px2.p1.2.m2.1.1.3" xref="S2.SS2.SSS0.Px2.p1.2.m2.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px2.p1.2.m2.1b"><apply id="S2.SS2.SSS0.Px2.p1.2.m2.1.1.cmml" xref="S2.SS2.SSS0.Px2.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px2.p1.2.m2.1.1.1.cmml" xref="S2.SS2.SSS0.Px2.p1.2.m2.1.1">subscript</csymbol><ci id="S2.SS2.SSS0.Px2.p1.2.m2.1.1.2.cmml" xref="S2.SS2.SSS0.Px2.p1.2.m2.1.1.2">𝑠</ci><ci id="S2.SS2.SSS0.Px2.p1.2.m2.1.1.3.cmml" xref="S2.SS2.SSS0.Px2.p1.2.m2.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px2.p1.2.m2.1c">s_{t}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px2.p1.2.m2.1d">italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math> to <math alttext="s_{t+1}=(s_{t},a_{t},o_{t+1})" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px2.p1.3.m3.3"><semantics id="S2.SS2.SSS0.Px2.p1.3.m3.3a"><mrow id="S2.SS2.SSS0.Px2.p1.3.m3.3.3" xref="S2.SS2.SSS0.Px2.p1.3.m3.3.3.cmml"><msub id="S2.SS2.SSS0.Px2.p1.3.m3.3.3.5" xref="S2.SS2.SSS0.Px2.p1.3.m3.3.3.5.cmml"><mi id="S2.SS2.SSS0.Px2.p1.3.m3.3.3.5.2" xref="S2.SS2.SSS0.Px2.p1.3.m3.3.3.5.2.cmml">s</mi><mrow id="S2.SS2.SSS0.Px2.p1.3.m3.3.3.5.3" xref="S2.SS2.SSS0.Px2.p1.3.m3.3.3.5.3.cmml"><mi id="S2.SS2.SSS0.Px2.p1.3.m3.3.3.5.3.2" xref="S2.SS2.SSS0.Px2.p1.3.m3.3.3.5.3.2.cmml">t</mi><mo id="S2.SS2.SSS0.Px2.p1.3.m3.3.3.5.3.1" xref="S2.SS2.SSS0.Px2.p1.3.m3.3.3.5.3.1.cmml">+</mo><mn id="S2.SS2.SSS0.Px2.p1.3.m3.3.3.5.3.3" xref="S2.SS2.SSS0.Px2.p1.3.m3.3.3.5.3.3.cmml">1</mn></mrow></msub><mo id="S2.SS2.SSS0.Px2.p1.3.m3.3.3.4" xref="S2.SS2.SSS0.Px2.p1.3.m3.3.3.4.cmml">=</mo><mrow id="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.3" xref="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.4.cmml"><mo id="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.3.4" stretchy="false" xref="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.4.cmml">(</mo><msub id="S2.SS2.SSS0.Px2.p1.3.m3.1.1.1.1.1" xref="S2.SS2.SSS0.Px2.p1.3.m3.1.1.1.1.1.cmml"><mi id="S2.SS2.SSS0.Px2.p1.3.m3.1.1.1.1.1.2" xref="S2.SS2.SSS0.Px2.p1.3.m3.1.1.1.1.1.2.cmml">s</mi><mi id="S2.SS2.SSS0.Px2.p1.3.m3.1.1.1.1.1.3" xref="S2.SS2.SSS0.Px2.p1.3.m3.1.1.1.1.1.3.cmml">t</mi></msub><mo id="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.3.5" xref="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.4.cmml">,</mo><msub id="S2.SS2.SSS0.Px2.p1.3.m3.2.2.2.2.2" xref="S2.SS2.SSS0.Px2.p1.3.m3.2.2.2.2.2.cmml"><mi id="S2.SS2.SSS0.Px2.p1.3.m3.2.2.2.2.2.2" xref="S2.SS2.SSS0.Px2.p1.3.m3.2.2.2.2.2.2.cmml">a</mi><mi id="S2.SS2.SSS0.Px2.p1.3.m3.2.2.2.2.2.3" xref="S2.SS2.SSS0.Px2.p1.3.m3.2.2.2.2.2.3.cmml">t</mi></msub><mo id="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.3.6" xref="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.4.cmml">,</mo><msub id="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.3.3" xref="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.3.3.cmml"><mi id="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.3.3.2" xref="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.3.3.2.cmml">o</mi><mrow id="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.3.3.3" xref="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.3.3.3.cmml"><mi id="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.3.3.3.2" xref="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.3.3.3.2.cmml">t</mi><mo id="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.3.3.3.1" xref="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.3.3.3.1.cmml">+</mo><mn id="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.3.3.3.3" xref="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.3.3.3.3.cmml">1</mn></mrow></msub><mo id="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.3.7" stretchy="false" xref="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.4.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px2.p1.3.m3.3b"><apply id="S2.SS2.SSS0.Px2.p1.3.m3.3.3.cmml" xref="S2.SS2.SSS0.Px2.p1.3.m3.3.3"><eq id="S2.SS2.SSS0.Px2.p1.3.m3.3.3.4.cmml" xref="S2.SS2.SSS0.Px2.p1.3.m3.3.3.4"></eq><apply id="S2.SS2.SSS0.Px2.p1.3.m3.3.3.5.cmml" xref="S2.SS2.SSS0.Px2.p1.3.m3.3.3.5"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px2.p1.3.m3.3.3.5.1.cmml" xref="S2.SS2.SSS0.Px2.p1.3.m3.3.3.5">subscript</csymbol><ci id="S2.SS2.SSS0.Px2.p1.3.m3.3.3.5.2.cmml" xref="S2.SS2.SSS0.Px2.p1.3.m3.3.3.5.2">𝑠</ci><apply id="S2.SS2.SSS0.Px2.p1.3.m3.3.3.5.3.cmml" xref="S2.SS2.SSS0.Px2.p1.3.m3.3.3.5.3"><plus id="S2.SS2.SSS0.Px2.p1.3.m3.3.3.5.3.1.cmml" xref="S2.SS2.SSS0.Px2.p1.3.m3.3.3.5.3.1"></plus><ci id="S2.SS2.SSS0.Px2.p1.3.m3.3.3.5.3.2.cmml" xref="S2.SS2.SSS0.Px2.p1.3.m3.3.3.5.3.2">𝑡</ci><cn id="S2.SS2.SSS0.Px2.p1.3.m3.3.3.5.3.3.cmml" type="integer" xref="S2.SS2.SSS0.Px2.p1.3.m3.3.3.5.3.3">1</cn></apply></apply><vector id="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.4.cmml" xref="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.3"><apply id="S2.SS2.SSS0.Px2.p1.3.m3.1.1.1.1.1.cmml" xref="S2.SS2.SSS0.Px2.p1.3.m3.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px2.p1.3.m3.1.1.1.1.1.1.cmml" xref="S2.SS2.SSS0.Px2.p1.3.m3.1.1.1.1.1">subscript</csymbol><ci id="S2.SS2.SSS0.Px2.p1.3.m3.1.1.1.1.1.2.cmml" xref="S2.SS2.SSS0.Px2.p1.3.m3.1.1.1.1.1.2">𝑠</ci><ci id="S2.SS2.SSS0.Px2.p1.3.m3.1.1.1.1.1.3.cmml" xref="S2.SS2.SSS0.Px2.p1.3.m3.1.1.1.1.1.3">𝑡</ci></apply><apply id="S2.SS2.SSS0.Px2.p1.3.m3.2.2.2.2.2.cmml" xref="S2.SS2.SSS0.Px2.p1.3.m3.2.2.2.2.2"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px2.p1.3.m3.2.2.2.2.2.1.cmml" xref="S2.SS2.SSS0.Px2.p1.3.m3.2.2.2.2.2">subscript</csymbol><ci id="S2.SS2.SSS0.Px2.p1.3.m3.2.2.2.2.2.2.cmml" xref="S2.SS2.SSS0.Px2.p1.3.m3.2.2.2.2.2.2">𝑎</ci><ci id="S2.SS2.SSS0.Px2.p1.3.m3.2.2.2.2.2.3.cmml" xref="S2.SS2.SSS0.Px2.p1.3.m3.2.2.2.2.2.3">𝑡</ci></apply><apply id="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.3.3.cmml" xref="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.3.3"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.3.3.1.cmml" xref="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.3.3">subscript</csymbol><ci id="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.3.3.2.cmml" xref="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.3.3.2">𝑜</ci><apply id="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.3.3.3.cmml" xref="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.3.3.3"><plus id="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.3.3.3.1.cmml" xref="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.3.3.3.1"></plus><ci id="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.3.3.3.2.cmml" xref="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.3.3.3.2">𝑡</ci><cn id="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.3.3.3.3.cmml" type="integer" xref="S2.SS2.SSS0.Px2.p1.3.m3.3.3.3.3.3.3.3">1</cn></apply></apply></vector></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px2.p1.3.m3.3c">s_{t+1}=(s_{t},a_{t},o_{t+1})</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px2.p1.3.m3.3d">italic_s start_POSTSUBSCRIPT italic_t + 1 end_POSTSUBSCRIPT = ( italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT , italic_a start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT , italic_o start_POSTSUBSCRIPT italic_t + 1 end_POSTSUBSCRIPT )</annotation></semantics></math>, where</p>
<table class="ltx_equation ltx_eqn_table" id="S2.E3">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="o_{t+1}=\begin{cases}f_{gen}(s_{t},a_{t}),&amp;\text{if }s_{t}=\textsc{Reason}%
\text{ or }\textsc{GenQuery}\text{ state}\\
f_{retr}(s_{t},a_{t}),&amp;\text{if }s_{t}=\textsc{Retrieve}\text{ state}\\
f_{rule}(s_{t},a_{t}),&amp;\text{otherwise.}\\
\end{cases}" class="ltx_Math" display="block" id="S2.E3.m1.6"><semantics id="S2.E3.m1.6a"><mrow id="S2.E3.m1.6.7" xref="S2.E3.m1.6.7.cmml"><msub id="S2.E3.m1.6.7.2" xref="S2.E3.m1.6.7.2.cmml"><mi id="S2.E3.m1.6.7.2.2" xref="S2.E3.m1.6.7.2.2.cmml">o</mi><mrow id="S2.E3.m1.6.7.2.3" xref="S2.E3.m1.6.7.2.3.cmml"><mi id="S2.E3.m1.6.7.2.3.2" xref="S2.E3.m1.6.7.2.3.2.cmml">t</mi><mo id="S2.E3.m1.6.7.2.3.1" xref="S2.E3.m1.6.7.2.3.1.cmml">+</mo><mn id="S2.E3.m1.6.7.2.3.3" xref="S2.E3.m1.6.7.2.3.3.cmml">1</mn></mrow></msub><mo id="S2.E3.m1.6.7.1" xref="S2.E3.m1.6.7.1.cmml">=</mo><mrow id="S2.E3.m1.6.6" xref="S2.E3.m1.6.7.3.1.cmml"><mo id="S2.E3.m1.6.6.7" xref="S2.E3.m1.6.7.3.1.1.cmml">{</mo><mtable columnspacing="5pt" displaystyle="true" id="S2.E3.m1.6.6.6" rowspacing="0pt" xref="S2.E3.m1.6.7.3.1.cmml"><mtr id="S2.E3.m1.6.6.6a" xref="S2.E3.m1.6.7.3.1.cmml"><mtd class="ltx_align_left" columnalign="left" id="S2.E3.m1.6.6.6b" xref="S2.E3.m1.6.7.3.1.cmml"><mrow id="S2.E3.m1.1.1.1.1.1.1.1" xref="S2.E3.m1.1.1.1.1.1.1.1.1.cmml"><mrow id="S2.E3.m1.1.1.1.1.1.1.1.1" xref="S2.E3.m1.1.1.1.1.1.1.1.1.cmml"><msub id="S2.E3.m1.1.1.1.1.1.1.1.1.4" xref="S2.E3.m1.1.1.1.1.1.1.1.1.4.cmml"><mi id="S2.E3.m1.1.1.1.1.1.1.1.1.4.2" xref="S2.E3.m1.1.1.1.1.1.1.1.1.4.2.cmml">f</mi><mrow id="S2.E3.m1.1.1.1.1.1.1.1.1.4.3" xref="S2.E3.m1.1.1.1.1.1.1.1.1.4.3.cmml"><mi id="S2.E3.m1.1.1.1.1.1.1.1.1.4.3.2" xref="S2.E3.m1.1.1.1.1.1.1.1.1.4.3.2.cmml">g</mi><mo id="S2.E3.m1.1.1.1.1.1.1.1.1.4.3.1" xref="S2.E3.m1.1.1.1.1.1.1.1.1.4.3.1.cmml">⁢</mo><mi id="S2.E3.m1.1.1.1.1.1.1.1.1.4.3.3" xref="S2.E3.m1.1.1.1.1.1.1.1.1.4.3.3.cmml">e</mi><mo id="S2.E3.m1.1.1.1.1.1.1.1.1.4.3.1a" xref="S2.E3.m1.1.1.1.1.1.1.1.1.4.3.1.cmml">⁢</mo><mi id="S2.E3.m1.1.1.1.1.1.1.1.1.4.3.4" xref="S2.E3.m1.1.1.1.1.1.1.1.1.4.3.4.cmml">n</mi></mrow></msub><mo id="S2.E3.m1.1.1.1.1.1.1.1.1.3" xref="S2.E3.m1.1.1.1.1.1.1.1.1.3.cmml">⁢</mo><mrow id="S2.E3.m1.1.1.1.1.1.1.1.1.2.2" xref="S2.E3.m1.1.1.1.1.1.1.1.1.2.3.cmml"><mo id="S2.E3.m1.1.1.1.1.1.1.1.1.2.2.3" stretchy="false" xref="S2.E3.m1.1.1.1.1.1.1.1.1.2.3.cmml">(</mo><msub id="S2.E3.m1.1.1.1.1.1.1.1.1.1.1.1" xref="S2.E3.m1.1.1.1.1.1.1.1.1.1.1.1.cmml"><mi id="S2.E3.m1.1.1.1.1.1.1.1.1.1.1.1.2" xref="S2.E3.m1.1.1.1.1.1.1.1.1.1.1.1.2.cmml">s</mi><mi id="S2.E3.m1.1.1.1.1.1.1.1.1.1.1.1.3" xref="S2.E3.m1.1.1.1.1.1.1.1.1.1.1.1.3.cmml">t</mi></msub><mo id="S2.E3.m1.1.1.1.1.1.1.1.1.2.2.4" xref="S2.E3.m1.1.1.1.1.1.1.1.1.2.3.cmml">,</mo><msub id="S2.E3.m1.1.1.1.1.1.1.1.1.2.2.2" xref="S2.E3.m1.1.1.1.1.1.1.1.1.2.2.2.cmml"><mi id="S2.E3.m1.1.1.1.1.1.1.1.1.2.2.2.2" xref="S2.E3.m1.1.1.1.1.1.1.1.1.2.2.2.2.cmml">a</mi><mi id="S2.E3.m1.1.1.1.1.1.1.1.1.2.2.2.3" xref="S2.E3.m1.1.1.1.1.1.1.1.1.2.2.2.3.cmml">t</mi></msub><mo id="S2.E3.m1.1.1.1.1.1.1.1.1.2.2.5" stretchy="false" xref="S2.E3.m1.1.1.1.1.1.1.1.1.2.3.cmml">)</mo></mrow></mrow><mo id="S2.E3.m1.1.1.1.1.1.1.1.2" xref="S2.E3.m1.1.1.1.1.1.1.1.1.cmml">,</mo></mrow></mtd><mtd class="ltx_align_left" columnalign="left" id="S2.E3.m1.6.6.6c" xref="S2.E3.m1.6.7.3.1.cmml"><mrow id="S2.E3.m1.2.2.2.2.2.1" xref="S2.E3.m1.2.2.2.2.2.1.cmml"><mrow id="S2.E3.m1.2.2.2.2.2.1.2" xref="S2.E3.m1.2.2.2.2.2.1.2.cmml"><mtext id="S2.E3.m1.2.2.2.2.2.1.2.2" xref="S2.E3.m1.2.2.2.2.2.1.2.2a.cmml">if </mtext><mo id="S2.E3.m1.2.2.2.2.2.1.2.1" xref="S2.E3.m1.2.2.2.2.2.1.2.1.cmml">⁢</mo><msub id="S2.E3.m1.2.2.2.2.2.1.2.3" xref="S2.E3.m1.2.2.2.2.2.1.2.3.cmml"><mi id="S2.E3.m1.2.2.2.2.2.1.2.3.2" xref="S2.E3.m1.2.2.2.2.2.1.2.3.2.cmml">s</mi><mi id="S2.E3.m1.2.2.2.2.2.1.2.3.3" xref="S2.E3.m1.2.2.2.2.2.1.2.3.3.cmml">t</mi></msub></mrow><mo id="S2.E3.m1.2.2.2.2.2.1.1" xref="S2.E3.m1.2.2.2.2.2.1.1.cmml">=</mo><mrow id="S2.E3.m1.2.2.2.2.2.1.3" xref="S2.E3.m1.2.2.2.2.2.1.3e.cmml"><mtext class="ltx_font_smallcaps" id="S2.E3.m1.2.2.2.2.2.1.3a" xref="S2.E3.m1.2.2.2.2.2.1.3e.cmml">Reason</mtext><mtext id="S2.E3.m1.2.2.2.2.2.1.3b" xref="S2.E3.m1.2.2.2.2.2.1.3e.cmml"> or </mtext><mtext class="ltx_font_smallcaps" id="S2.E3.m1.2.2.2.2.2.1.3c" xref="S2.E3.m1.2.2.2.2.2.1.3e.cmml">GenQuery</mtext><mtext id="S2.E3.m1.2.2.2.2.2.1.3d" xref="S2.E3.m1.2.2.2.2.2.1.3e.cmml"> state</mtext></mrow></mrow></mtd></mtr><mtr id="S2.E3.m1.6.6.6d" xref="S2.E3.m1.6.7.3.1.cmml"><mtd class="ltx_align_left" columnalign="left" id="S2.E3.m1.6.6.6e" xref="S2.E3.m1.6.7.3.1.cmml"><mrow id="S2.E3.m1.3.3.3.3.1.1.1" xref="S2.E3.m1.3.3.3.3.1.1.1.1.cmml"><mrow id="S2.E3.m1.3.3.3.3.1.1.1.1" xref="S2.E3.m1.3.3.3.3.1.1.1.1.cmml"><msub id="S2.E3.m1.3.3.3.3.1.1.1.1.4" xref="S2.E3.m1.3.3.3.3.1.1.1.1.4.cmml"><mi id="S2.E3.m1.3.3.3.3.1.1.1.1.4.2" xref="S2.E3.m1.3.3.3.3.1.1.1.1.4.2.cmml">f</mi><mrow id="S2.E3.m1.3.3.3.3.1.1.1.1.4.3" xref="S2.E3.m1.3.3.3.3.1.1.1.1.4.3.cmml"><mi id="S2.E3.m1.3.3.3.3.1.1.1.1.4.3.2" xref="S2.E3.m1.3.3.3.3.1.1.1.1.4.3.2.cmml">r</mi><mo id="S2.E3.m1.3.3.3.3.1.1.1.1.4.3.1" xref="S2.E3.m1.3.3.3.3.1.1.1.1.4.3.1.cmml">⁢</mo><mi id="S2.E3.m1.3.3.3.3.1.1.1.1.4.3.3" xref="S2.E3.m1.3.3.3.3.1.1.1.1.4.3.3.cmml">e</mi><mo id="S2.E3.m1.3.3.3.3.1.1.1.1.4.3.1a" xref="S2.E3.m1.3.3.3.3.1.1.1.1.4.3.1.cmml">⁢</mo><mi id="S2.E3.m1.3.3.3.3.1.1.1.1.4.3.4" xref="S2.E3.m1.3.3.3.3.1.1.1.1.4.3.4.cmml">t</mi><mo id="S2.E3.m1.3.3.3.3.1.1.1.1.4.3.1b" xref="S2.E3.m1.3.3.3.3.1.1.1.1.4.3.1.cmml">⁢</mo><mi id="S2.E3.m1.3.3.3.3.1.1.1.1.4.3.5" xref="S2.E3.m1.3.3.3.3.1.1.1.1.4.3.5.cmml">r</mi></mrow></msub><mo id="S2.E3.m1.3.3.3.3.1.1.1.1.3" xref="S2.E3.m1.3.3.3.3.1.1.1.1.3.cmml">⁢</mo><mrow id="S2.E3.m1.3.3.3.3.1.1.1.1.2.2" xref="S2.E3.m1.3.3.3.3.1.1.1.1.2.3.cmml"><mo id="S2.E3.m1.3.3.3.3.1.1.1.1.2.2.3" stretchy="false" xref="S2.E3.m1.3.3.3.3.1.1.1.1.2.3.cmml">(</mo><msub id="S2.E3.m1.3.3.3.3.1.1.1.1.1.1.1" xref="S2.E3.m1.3.3.3.3.1.1.1.1.1.1.1.cmml"><mi id="S2.E3.m1.3.3.3.3.1.1.1.1.1.1.1.2" xref="S2.E3.m1.3.3.3.3.1.1.1.1.1.1.1.2.cmml">s</mi><mi id="S2.E3.m1.3.3.3.3.1.1.1.1.1.1.1.3" xref="S2.E3.m1.3.3.3.3.1.1.1.1.1.1.1.3.cmml">t</mi></msub><mo id="S2.E3.m1.3.3.3.3.1.1.1.1.2.2.4" xref="S2.E3.m1.3.3.3.3.1.1.1.1.2.3.cmml">,</mo><msub id="S2.E3.m1.3.3.3.3.1.1.1.1.2.2.2" xref="S2.E3.m1.3.3.3.3.1.1.1.1.2.2.2.cmml"><mi id="S2.E3.m1.3.3.3.3.1.1.1.1.2.2.2.2" xref="S2.E3.m1.3.3.3.3.1.1.1.1.2.2.2.2.cmml">a</mi><mi id="S2.E3.m1.3.3.3.3.1.1.1.1.2.2.2.3" xref="S2.E3.m1.3.3.3.3.1.1.1.1.2.2.2.3.cmml">t</mi></msub><mo id="S2.E3.m1.3.3.3.3.1.1.1.1.2.2.5" stretchy="false" xref="S2.E3.m1.3.3.3.3.1.1.1.1.2.3.cmml">)</mo></mrow></mrow><mo id="S2.E3.m1.3.3.3.3.1.1.1.2" xref="S2.E3.m1.3.3.3.3.1.1.1.1.cmml">,</mo></mrow></mtd><mtd class="ltx_align_left" columnalign="left" id="S2.E3.m1.6.6.6f" xref="S2.E3.m1.6.7.3.1.cmml"><mrow id="S2.E3.m1.4.4.4.4.2.1" xref="S2.E3.m1.4.4.4.4.2.1.cmml"><mrow id="S2.E3.m1.4.4.4.4.2.1.2" xref="S2.E3.m1.4.4.4.4.2.1.2.cmml"><mtext id="S2.E3.m1.4.4.4.4.2.1.2.2" xref="S2.E3.m1.4.4.4.4.2.1.2.2a.cmml">if </mtext><mo id="S2.E3.m1.4.4.4.4.2.1.2.1" xref="S2.E3.m1.4.4.4.4.2.1.2.1.cmml">⁢</mo><msub id="S2.E3.m1.4.4.4.4.2.1.2.3" xref="S2.E3.m1.4.4.4.4.2.1.2.3.cmml"><mi id="S2.E3.m1.4.4.4.4.2.1.2.3.2" xref="S2.E3.m1.4.4.4.4.2.1.2.3.2.cmml">s</mi><mi id="S2.E3.m1.4.4.4.4.2.1.2.3.3" xref="S2.E3.m1.4.4.4.4.2.1.2.3.3.cmml">t</mi></msub></mrow><mo id="S2.E3.m1.4.4.4.4.2.1.1" xref="S2.E3.m1.4.4.4.4.2.1.1.cmml">=</mo><mrow id="S2.E3.m1.4.4.4.4.2.1.3" xref="S2.E3.m1.4.4.4.4.2.1.3c.cmml"><mtext class="ltx_font_smallcaps" id="S2.E3.m1.4.4.4.4.2.1.3a" xref="S2.E3.m1.4.4.4.4.2.1.3c.cmml">Retrieve</mtext><mtext id="S2.E3.m1.4.4.4.4.2.1.3b" xref="S2.E3.m1.4.4.4.4.2.1.3c.cmml"> state</mtext></mrow></mrow></mtd></mtr><mtr id="S2.E3.m1.6.6.6g" xref="S2.E3.m1.6.7.3.1.cmml"><mtd class="ltx_align_left" columnalign="left" id="S2.E3.m1.6.6.6h" xref="S2.E3.m1.6.7.3.1.cmml"><mrow id="S2.E3.m1.5.5.5.5.1.1.1" xref="S2.E3.m1.5.5.5.5.1.1.1.1.cmml"><mrow id="S2.E3.m1.5.5.5.5.1.1.1.1" xref="S2.E3.m1.5.5.5.5.1.1.1.1.cmml"><msub id="S2.E3.m1.5.5.5.5.1.1.1.1.4" xref="S2.E3.m1.5.5.5.5.1.1.1.1.4.cmml"><mi id="S2.E3.m1.5.5.5.5.1.1.1.1.4.2" xref="S2.E3.m1.5.5.5.5.1.1.1.1.4.2.cmml">f</mi><mrow id="S2.E3.m1.5.5.5.5.1.1.1.1.4.3" xref="S2.E3.m1.5.5.5.5.1.1.1.1.4.3.cmml"><mi id="S2.E3.m1.5.5.5.5.1.1.1.1.4.3.2" xref="S2.E3.m1.5.5.5.5.1.1.1.1.4.3.2.cmml">r</mi><mo id="S2.E3.m1.5.5.5.5.1.1.1.1.4.3.1" xref="S2.E3.m1.5.5.5.5.1.1.1.1.4.3.1.cmml">⁢</mo><mi id="S2.E3.m1.5.5.5.5.1.1.1.1.4.3.3" xref="S2.E3.m1.5.5.5.5.1.1.1.1.4.3.3.cmml">u</mi><mo id="S2.E3.m1.5.5.5.5.1.1.1.1.4.3.1a" xref="S2.E3.m1.5.5.5.5.1.1.1.1.4.3.1.cmml">⁢</mo><mi id="S2.E3.m1.5.5.5.5.1.1.1.1.4.3.4" xref="S2.E3.m1.5.5.5.5.1.1.1.1.4.3.4.cmml">l</mi><mo id="S2.E3.m1.5.5.5.5.1.1.1.1.4.3.1b" xref="S2.E3.m1.5.5.5.5.1.1.1.1.4.3.1.cmml">⁢</mo><mi id="S2.E3.m1.5.5.5.5.1.1.1.1.4.3.5" xref="S2.E3.m1.5.5.5.5.1.1.1.1.4.3.5.cmml">e</mi></mrow></msub><mo id="S2.E3.m1.5.5.5.5.1.1.1.1.3" xref="S2.E3.m1.5.5.5.5.1.1.1.1.3.cmml">⁢</mo><mrow id="S2.E3.m1.5.5.5.5.1.1.1.1.2.2" xref="S2.E3.m1.5.5.5.5.1.1.1.1.2.3.cmml"><mo id="S2.E3.m1.5.5.5.5.1.1.1.1.2.2.3" stretchy="false" xref="S2.E3.m1.5.5.5.5.1.1.1.1.2.3.cmml">(</mo><msub id="S2.E3.m1.5.5.5.5.1.1.1.1.1.1.1" xref="S2.E3.m1.5.5.5.5.1.1.1.1.1.1.1.cmml"><mi id="S2.E3.m1.5.5.5.5.1.1.1.1.1.1.1.2" xref="S2.E3.m1.5.5.5.5.1.1.1.1.1.1.1.2.cmml">s</mi><mi id="S2.E3.m1.5.5.5.5.1.1.1.1.1.1.1.3" xref="S2.E3.m1.5.5.5.5.1.1.1.1.1.1.1.3.cmml">t</mi></msub><mo id="S2.E3.m1.5.5.5.5.1.1.1.1.2.2.4" xref="S2.E3.m1.5.5.5.5.1.1.1.1.2.3.cmml">,</mo><msub id="S2.E3.m1.5.5.5.5.1.1.1.1.2.2.2" xref="S2.E3.m1.5.5.5.5.1.1.1.1.2.2.2.cmml"><mi id="S2.E3.m1.5.5.5.5.1.1.1.1.2.2.2.2" xref="S2.E3.m1.5.5.5.5.1.1.1.1.2.2.2.2.cmml">a</mi><mi id="S2.E3.m1.5.5.5.5.1.1.1.1.2.2.2.3" xref="S2.E3.m1.5.5.5.5.1.1.1.1.2.2.2.3.cmml">t</mi></msub><mo id="S2.E3.m1.5.5.5.5.1.1.1.1.2.2.5" stretchy="false" xref="S2.E3.m1.5.5.5.5.1.1.1.1.2.3.cmml">)</mo></mrow></mrow><mo id="S2.E3.m1.5.5.5.5.1.1.1.2" xref="S2.E3.m1.5.5.5.5.1.1.1.1.cmml">,</mo></mrow></mtd><mtd class="ltx_align_left" columnalign="left" id="S2.E3.m1.6.6.6i" xref="S2.E3.m1.6.7.3.1.cmml"><mtext id="S2.E3.m1.6.6.6.6.2.1" xref="S2.E3.m1.6.6.6.6.2.1a.cmml">otherwise.</mtext></mtd></mtr></mtable></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.E3.m1.6b"><apply id="S2.E3.m1.6.7.cmml" xref="S2.E3.m1.6.7"><eq id="S2.E3.m1.6.7.1.cmml" xref="S2.E3.m1.6.7.1"></eq><apply id="S2.E3.m1.6.7.2.cmml" xref="S2.E3.m1.6.7.2"><csymbol cd="ambiguous" id="S2.E3.m1.6.7.2.1.cmml" xref="S2.E3.m1.6.7.2">subscript</csymbol><ci id="S2.E3.m1.6.7.2.2.cmml" xref="S2.E3.m1.6.7.2.2">𝑜</ci><apply id="S2.E3.m1.6.7.2.3.cmml" xref="S2.E3.m1.6.7.2.3"><plus id="S2.E3.m1.6.7.2.3.1.cmml" xref="S2.E3.m1.6.7.2.3.1"></plus><ci id="S2.E3.m1.6.7.2.3.2.cmml" xref="S2.E3.m1.6.7.2.3.2">𝑡</ci><cn id="S2.E3.m1.6.7.2.3.3.cmml" type="integer" xref="S2.E3.m1.6.7.2.3.3">1</cn></apply></apply><apply id="S2.E3.m1.6.7.3.1.cmml" xref="S2.E3.m1.6.6"><csymbol cd="latexml" id="S2.E3.m1.6.7.3.1.1.cmml" xref="S2.E3.m1.6.6.7">cases</csymbol><apply id="S2.E3.m1.1.1.1.1.1.1.1.1.cmml" xref="S2.E3.m1.1.1.1.1.1.1.1"><times id="S2.E3.m1.1.1.1.1.1.1.1.1.3.cmml" xref="S2.E3.m1.1.1.1.1.1.1.1.1.3"></times><apply id="S2.E3.m1.1.1.1.1.1.1.1.1.4.cmml" xref="S2.E3.m1.1.1.1.1.1.1.1.1.4"><csymbol cd="ambiguous" id="S2.E3.m1.1.1.1.1.1.1.1.1.4.1.cmml" xref="S2.E3.m1.1.1.1.1.1.1.1.1.4">subscript</csymbol><ci id="S2.E3.m1.1.1.1.1.1.1.1.1.4.2.cmml" xref="S2.E3.m1.1.1.1.1.1.1.1.1.4.2">𝑓</ci><apply id="S2.E3.m1.1.1.1.1.1.1.1.1.4.3.cmml" xref="S2.E3.m1.1.1.1.1.1.1.1.1.4.3"><times id="S2.E3.m1.1.1.1.1.1.1.1.1.4.3.1.cmml" xref="S2.E3.m1.1.1.1.1.1.1.1.1.4.3.1"></times><ci id="S2.E3.m1.1.1.1.1.1.1.1.1.4.3.2.cmml" xref="S2.E3.m1.1.1.1.1.1.1.1.1.4.3.2">𝑔</ci><ci id="S2.E3.m1.1.1.1.1.1.1.1.1.4.3.3.cmml" xref="S2.E3.m1.1.1.1.1.1.1.1.1.4.3.3">𝑒</ci><ci id="S2.E3.m1.1.1.1.1.1.1.1.1.4.3.4.cmml" xref="S2.E3.m1.1.1.1.1.1.1.1.1.4.3.4">𝑛</ci></apply></apply><interval closure="open" id="S2.E3.m1.1.1.1.1.1.1.1.1.2.3.cmml" xref="S2.E3.m1.1.1.1.1.1.1.1.1.2.2"><apply id="S2.E3.m1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S2.E3.m1.1.1.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.E3.m1.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S2.E3.m1.1.1.1.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S2.E3.m1.1.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S2.E3.m1.1.1.1.1.1.1.1.1.1.1.1.2">𝑠</ci><ci id="S2.E3.m1.1.1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S2.E3.m1.1.1.1.1.1.1.1.1.1.1.1.3">𝑡</ci></apply><apply id="S2.E3.m1.1.1.1.1.1.1.1.1.2.2.2.cmml" xref="S2.E3.m1.1.1.1.1.1.1.1.1.2.2.2"><csymbol cd="ambiguous" id="S2.E3.m1.1.1.1.1.1.1.1.1.2.2.2.1.cmml" xref="S2.E3.m1.1.1.1.1.1.1.1.1.2.2.2">subscript</csymbol><ci id="S2.E3.m1.1.1.1.1.1.1.1.1.2.2.2.2.cmml" xref="S2.E3.m1.1.1.1.1.1.1.1.1.2.2.2.2">𝑎</ci><ci id="S2.E3.m1.1.1.1.1.1.1.1.1.2.2.2.3.cmml" xref="S2.E3.m1.1.1.1.1.1.1.1.1.2.2.2.3">𝑡</ci></apply></interval></apply><apply id="S2.E3.m1.2.2.2.2.2.1.cmml" xref="S2.E3.m1.2.2.2.2.2.1"><eq id="S2.E3.m1.2.2.2.2.2.1.1.cmml" xref="S2.E3.m1.2.2.2.2.2.1.1"></eq><apply id="S2.E3.m1.2.2.2.2.2.1.2.cmml" xref="S2.E3.m1.2.2.2.2.2.1.2"><times id="S2.E3.m1.2.2.2.2.2.1.2.1.cmml" xref="S2.E3.m1.2.2.2.2.2.1.2.1"></times><ci id="S2.E3.m1.2.2.2.2.2.1.2.2a.cmml" xref="S2.E3.m1.2.2.2.2.2.1.2.2"><mtext id="S2.E3.m1.2.2.2.2.2.1.2.2.cmml" xref="S2.E3.m1.2.2.2.2.2.1.2.2">if </mtext></ci><apply id="S2.E3.m1.2.2.2.2.2.1.2.3.cmml" xref="S2.E3.m1.2.2.2.2.2.1.2.3"><csymbol cd="ambiguous" id="S2.E3.m1.2.2.2.2.2.1.2.3.1.cmml" xref="S2.E3.m1.2.2.2.2.2.1.2.3">subscript</csymbol><ci id="S2.E3.m1.2.2.2.2.2.1.2.3.2.cmml" xref="S2.E3.m1.2.2.2.2.2.1.2.3.2">𝑠</ci><ci id="S2.E3.m1.2.2.2.2.2.1.2.3.3.cmml" xref="S2.E3.m1.2.2.2.2.2.1.2.3.3">𝑡</ci></apply></apply><ci id="S2.E3.m1.2.2.2.2.2.1.3e.cmml" xref="S2.E3.m1.2.2.2.2.2.1.3"><mrow id="S2.E3.m1.2.2.2.2.2.1.3.cmml" xref="S2.E3.m1.2.2.2.2.2.1.3"><mtext class="ltx_font_smallcaps" id="S2.E3.m1.2.2.2.2.2.1.3a.cmml" xref="S2.E3.m1.2.2.2.2.2.1.3">Reason</mtext><mtext id="S2.E3.m1.2.2.2.2.2.1.3b.cmml" xref="S2.E3.m1.2.2.2.2.2.1.3"> or </mtext><mtext class="ltx_font_smallcaps" id="S2.E3.m1.2.2.2.2.2.1.3c.cmml" xref="S2.E3.m1.2.2.2.2.2.1.3">GenQuery</mtext><mtext id="S2.E3.m1.2.2.2.2.2.1.3d.cmml" xref="S2.E3.m1.2.2.2.2.2.1.3"> state</mtext></mrow></ci></apply><apply id="S2.E3.m1.3.3.3.3.1.1.1.1.cmml" xref="S2.E3.m1.3.3.3.3.1.1.1"><times id="S2.E3.m1.3.3.3.3.1.1.1.1.3.cmml" xref="S2.E3.m1.3.3.3.3.1.1.1.1.3"></times><apply id="S2.E3.m1.3.3.3.3.1.1.1.1.4.cmml" xref="S2.E3.m1.3.3.3.3.1.1.1.1.4"><csymbol cd="ambiguous" id="S2.E3.m1.3.3.3.3.1.1.1.1.4.1.cmml" xref="S2.E3.m1.3.3.3.3.1.1.1.1.4">subscript</csymbol><ci id="S2.E3.m1.3.3.3.3.1.1.1.1.4.2.cmml" xref="S2.E3.m1.3.3.3.3.1.1.1.1.4.2">𝑓</ci><apply id="S2.E3.m1.3.3.3.3.1.1.1.1.4.3.cmml" xref="S2.E3.m1.3.3.3.3.1.1.1.1.4.3"><times id="S2.E3.m1.3.3.3.3.1.1.1.1.4.3.1.cmml" xref="S2.E3.m1.3.3.3.3.1.1.1.1.4.3.1"></times><ci id="S2.E3.m1.3.3.3.3.1.1.1.1.4.3.2.cmml" xref="S2.E3.m1.3.3.3.3.1.1.1.1.4.3.2">𝑟</ci><ci id="S2.E3.m1.3.3.3.3.1.1.1.1.4.3.3.cmml" xref="S2.E3.m1.3.3.3.3.1.1.1.1.4.3.3">𝑒</ci><ci id="S2.E3.m1.3.3.3.3.1.1.1.1.4.3.4.cmml" xref="S2.E3.m1.3.3.3.3.1.1.1.1.4.3.4">𝑡</ci><ci id="S2.E3.m1.3.3.3.3.1.1.1.1.4.3.5.cmml" xref="S2.E3.m1.3.3.3.3.1.1.1.1.4.3.5">𝑟</ci></apply></apply><interval closure="open" id="S2.E3.m1.3.3.3.3.1.1.1.1.2.3.cmml" xref="S2.E3.m1.3.3.3.3.1.1.1.1.2.2"><apply id="S2.E3.m1.3.3.3.3.1.1.1.1.1.1.1.cmml" xref="S2.E3.m1.3.3.3.3.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.E3.m1.3.3.3.3.1.1.1.1.1.1.1.1.cmml" xref="S2.E3.m1.3.3.3.3.1.1.1.1.1.1.1">subscript</csymbol><ci id="S2.E3.m1.3.3.3.3.1.1.1.1.1.1.1.2.cmml" xref="S2.E3.m1.3.3.3.3.1.1.1.1.1.1.1.2">𝑠</ci><ci id="S2.E3.m1.3.3.3.3.1.1.1.1.1.1.1.3.cmml" xref="S2.E3.m1.3.3.3.3.1.1.1.1.1.1.1.3">𝑡</ci></apply><apply id="S2.E3.m1.3.3.3.3.1.1.1.1.2.2.2.cmml" xref="S2.E3.m1.3.3.3.3.1.1.1.1.2.2.2"><csymbol cd="ambiguous" id="S2.E3.m1.3.3.3.3.1.1.1.1.2.2.2.1.cmml" xref="S2.E3.m1.3.3.3.3.1.1.1.1.2.2.2">subscript</csymbol><ci id="S2.E3.m1.3.3.3.3.1.1.1.1.2.2.2.2.cmml" xref="S2.E3.m1.3.3.3.3.1.1.1.1.2.2.2.2">𝑎</ci><ci id="S2.E3.m1.3.3.3.3.1.1.1.1.2.2.2.3.cmml" xref="S2.E3.m1.3.3.3.3.1.1.1.1.2.2.2.3">𝑡</ci></apply></interval></apply><apply id="S2.E3.m1.4.4.4.4.2.1.cmml" xref="S2.E3.m1.4.4.4.4.2.1"><eq id="S2.E3.m1.4.4.4.4.2.1.1.cmml" xref="S2.E3.m1.4.4.4.4.2.1.1"></eq><apply id="S2.E3.m1.4.4.4.4.2.1.2.cmml" xref="S2.E3.m1.4.4.4.4.2.1.2"><times id="S2.E3.m1.4.4.4.4.2.1.2.1.cmml" xref="S2.E3.m1.4.4.4.4.2.1.2.1"></times><ci id="S2.E3.m1.4.4.4.4.2.1.2.2a.cmml" xref="S2.E3.m1.4.4.4.4.2.1.2.2"><mtext id="S2.E3.m1.4.4.4.4.2.1.2.2.cmml" xref="S2.E3.m1.4.4.4.4.2.1.2.2">if </mtext></ci><apply id="S2.E3.m1.4.4.4.4.2.1.2.3.cmml" xref="S2.E3.m1.4.4.4.4.2.1.2.3"><csymbol cd="ambiguous" id="S2.E3.m1.4.4.4.4.2.1.2.3.1.cmml" xref="S2.E3.m1.4.4.4.4.2.1.2.3">subscript</csymbol><ci id="S2.E3.m1.4.4.4.4.2.1.2.3.2.cmml" xref="S2.E3.m1.4.4.4.4.2.1.2.3.2">𝑠</ci><ci id="S2.E3.m1.4.4.4.4.2.1.2.3.3.cmml" xref="S2.E3.m1.4.4.4.4.2.1.2.3.3">𝑡</ci></apply></apply><ci id="S2.E3.m1.4.4.4.4.2.1.3c.cmml" xref="S2.E3.m1.4.4.4.4.2.1.3"><mrow id="S2.E3.m1.4.4.4.4.2.1.3.cmml" xref="S2.E3.m1.4.4.4.4.2.1.3"><mtext class="ltx_font_smallcaps" id="S2.E3.m1.4.4.4.4.2.1.3a.cmml" xref="S2.E3.m1.4.4.4.4.2.1.3">Retrieve</mtext><mtext id="S2.E3.m1.4.4.4.4.2.1.3b.cmml" xref="S2.E3.m1.4.4.4.4.2.1.3"> state</mtext></mrow></ci></apply><apply id="S2.E3.m1.5.5.5.5.1.1.1.1.cmml" xref="S2.E3.m1.5.5.5.5.1.1.1"><times id="S2.E3.m1.5.5.5.5.1.1.1.1.3.cmml" xref="S2.E3.m1.5.5.5.5.1.1.1.1.3"></times><apply id="S2.E3.m1.5.5.5.5.1.1.1.1.4.cmml" xref="S2.E3.m1.5.5.5.5.1.1.1.1.4"><csymbol cd="ambiguous" id="S2.E3.m1.5.5.5.5.1.1.1.1.4.1.cmml" xref="S2.E3.m1.5.5.5.5.1.1.1.1.4">subscript</csymbol><ci id="S2.E3.m1.5.5.5.5.1.1.1.1.4.2.cmml" xref="S2.E3.m1.5.5.5.5.1.1.1.1.4.2">𝑓</ci><apply id="S2.E3.m1.5.5.5.5.1.1.1.1.4.3.cmml" xref="S2.E3.m1.5.5.5.5.1.1.1.1.4.3"><times id="S2.E3.m1.5.5.5.5.1.1.1.1.4.3.1.cmml" xref="S2.E3.m1.5.5.5.5.1.1.1.1.4.3.1"></times><ci id="S2.E3.m1.5.5.5.5.1.1.1.1.4.3.2.cmml" xref="S2.E3.m1.5.5.5.5.1.1.1.1.4.3.2">𝑟</ci><ci id="S2.E3.m1.5.5.5.5.1.1.1.1.4.3.3.cmml" xref="S2.E3.m1.5.5.5.5.1.1.1.1.4.3.3">𝑢</ci><ci id="S2.E3.m1.5.5.5.5.1.1.1.1.4.3.4.cmml" xref="S2.E3.m1.5.5.5.5.1.1.1.1.4.3.4">𝑙</ci><ci id="S2.E3.m1.5.5.5.5.1.1.1.1.4.3.5.cmml" xref="S2.E3.m1.5.5.5.5.1.1.1.1.4.3.5">𝑒</ci></apply></apply><interval closure="open" id="S2.E3.m1.5.5.5.5.1.1.1.1.2.3.cmml" xref="S2.E3.m1.5.5.5.5.1.1.1.1.2.2"><apply id="S2.E3.m1.5.5.5.5.1.1.1.1.1.1.1.cmml" xref="S2.E3.m1.5.5.5.5.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.E3.m1.5.5.5.5.1.1.1.1.1.1.1.1.cmml" xref="S2.E3.m1.5.5.5.5.1.1.1.1.1.1.1">subscript</csymbol><ci id="S2.E3.m1.5.5.5.5.1.1.1.1.1.1.1.2.cmml" xref="S2.E3.m1.5.5.5.5.1.1.1.1.1.1.1.2">𝑠</ci><ci id="S2.E3.m1.5.5.5.5.1.1.1.1.1.1.1.3.cmml" xref="S2.E3.m1.5.5.5.5.1.1.1.1.1.1.1.3">𝑡</ci></apply><apply id="S2.E3.m1.5.5.5.5.1.1.1.1.2.2.2.cmml" xref="S2.E3.m1.5.5.5.5.1.1.1.1.2.2.2"><csymbol cd="ambiguous" id="S2.E3.m1.5.5.5.5.1.1.1.1.2.2.2.1.cmml" xref="S2.E3.m1.5.5.5.5.1.1.1.1.2.2.2">subscript</csymbol><ci id="S2.E3.m1.5.5.5.5.1.1.1.1.2.2.2.2.cmml" xref="S2.E3.m1.5.5.5.5.1.1.1.1.2.2.2.2">𝑎</ci><ci id="S2.E3.m1.5.5.5.5.1.1.1.1.2.2.2.3.cmml" xref="S2.E3.m1.5.5.5.5.1.1.1.1.2.2.2.3">𝑡</ci></apply></interval></apply><ci id="S2.E3.m1.6.6.6.6.2.1a.cmml" xref="S2.E3.m1.6.6.6.6.2.1"><mtext id="S2.E3.m1.6.6.6.6.2.1.cmml" xref="S2.E3.m1.6.6.6.6.2.1">otherwise.</mtext></ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E3.m1.6c">o_{t+1}=\begin{cases}f_{gen}(s_{t},a_{t}),&amp;\text{if }s_{t}=\textsc{Reason}%
\text{ or }\textsc{GenQuery}\text{ state}\\
f_{retr}(s_{t},a_{t}),&amp;\text{if }s_{t}=\textsc{Retrieve}\text{ state}\\
f_{rule}(s_{t},a_{t}),&amp;\text{otherwise.}\\
\end{cases}</annotation><annotation encoding="application/x-llamapun" id="S2.E3.m1.6d">italic_o start_POSTSUBSCRIPT italic_t + 1 end_POSTSUBSCRIPT = { start_ROW start_CELL italic_f start_POSTSUBSCRIPT italic_g italic_e italic_n end_POSTSUBSCRIPT ( italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT , italic_a start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT ) , end_CELL start_CELL if italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT = smallcaps_Reason or smallcaps_GenQuery state end_CELL end_ROW start_ROW start_CELL italic_f start_POSTSUBSCRIPT italic_r italic_e italic_t italic_r end_POSTSUBSCRIPT ( italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT , italic_a start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT ) , end_CELL start_CELL if italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT = smallcaps_Retrieve state end_CELL end_ROW start_ROW start_CELL italic_f start_POSTSUBSCRIPT italic_r italic_u italic_l italic_e end_POSTSUBSCRIPT ( italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT , italic_a start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT ) , end_CELL start_CELL otherwise. end_CELL end_ROW</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(3)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S2.SS2.SSS0.Px2.p1.8">As mentioned in Section <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S2.SS1" title="2.1 Problem Formulation ‣ 2 Critic-Guided Planning with Retrieval-Augmentation ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_tag">2.1</span></a>, given the current state <math alttext="s_{t}" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px2.p1.4.m1.1"><semantics id="S2.SS2.SSS0.Px2.p1.4.m1.1a"><msub id="S2.SS2.SSS0.Px2.p1.4.m1.1.1" xref="S2.SS2.SSS0.Px2.p1.4.m1.1.1.cmml"><mi id="S2.SS2.SSS0.Px2.p1.4.m1.1.1.2" xref="S2.SS2.SSS0.Px2.p1.4.m1.1.1.2.cmml">s</mi><mi id="S2.SS2.SSS0.Px2.p1.4.m1.1.1.3" xref="S2.SS2.SSS0.Px2.p1.4.m1.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px2.p1.4.m1.1b"><apply id="S2.SS2.SSS0.Px2.p1.4.m1.1.1.cmml" xref="S2.SS2.SSS0.Px2.p1.4.m1.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px2.p1.4.m1.1.1.1.cmml" xref="S2.SS2.SSS0.Px2.p1.4.m1.1.1">subscript</csymbol><ci id="S2.SS2.SSS0.Px2.p1.4.m1.1.1.2.cmml" xref="S2.SS2.SSS0.Px2.p1.4.m1.1.1.2">𝑠</ci><ci id="S2.SS2.SSS0.Px2.p1.4.m1.1.1.3.cmml" xref="S2.SS2.SSS0.Px2.p1.4.m1.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px2.p1.4.m1.1c">s_{t}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px2.p1.4.m1.1d">italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math> and action <math alttext="a_{t}" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px2.p1.5.m2.1"><semantics id="S2.SS2.SSS0.Px2.p1.5.m2.1a"><msub id="S2.SS2.SSS0.Px2.p1.5.m2.1.1" xref="S2.SS2.SSS0.Px2.p1.5.m2.1.1.cmml"><mi id="S2.SS2.SSS0.Px2.p1.5.m2.1.1.2" xref="S2.SS2.SSS0.Px2.p1.5.m2.1.1.2.cmml">a</mi><mi id="S2.SS2.SSS0.Px2.p1.5.m2.1.1.3" xref="S2.SS2.SSS0.Px2.p1.5.m2.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px2.p1.5.m2.1b"><apply id="S2.SS2.SSS0.Px2.p1.5.m2.1.1.cmml" xref="S2.SS2.SSS0.Px2.p1.5.m2.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px2.p1.5.m2.1.1.1.cmml" xref="S2.SS2.SSS0.Px2.p1.5.m2.1.1">subscript</csymbol><ci id="S2.SS2.SSS0.Px2.p1.5.m2.1.1.2.cmml" xref="S2.SS2.SSS0.Px2.p1.5.m2.1.1.2">𝑎</ci><ci id="S2.SS2.SSS0.Px2.p1.5.m2.1.1.3.cmml" xref="S2.SS2.SSS0.Px2.p1.5.m2.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px2.p1.5.m2.1c">a_{t}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px2.p1.5.m2.1d">italic_a start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math>, we employ three specific functions to generate different types of outcomes.
The generator <math alttext="f_{gen}(\cdot)" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px2.p1.6.m3.1"><semantics id="S2.SS2.SSS0.Px2.p1.6.m3.1a"><mrow id="S2.SS2.SSS0.Px2.p1.6.m3.1.2" xref="S2.SS2.SSS0.Px2.p1.6.m3.1.2.cmml"><msub id="S2.SS2.SSS0.Px2.p1.6.m3.1.2.2" xref="S2.SS2.SSS0.Px2.p1.6.m3.1.2.2.cmml"><mi id="S2.SS2.SSS0.Px2.p1.6.m3.1.2.2.2" xref="S2.SS2.SSS0.Px2.p1.6.m3.1.2.2.2.cmml">f</mi><mrow id="S2.SS2.SSS0.Px2.p1.6.m3.1.2.2.3" xref="S2.SS2.SSS0.Px2.p1.6.m3.1.2.2.3.cmml"><mi id="S2.SS2.SSS0.Px2.p1.6.m3.1.2.2.3.2" xref="S2.SS2.SSS0.Px2.p1.6.m3.1.2.2.3.2.cmml">g</mi><mo id="S2.SS2.SSS0.Px2.p1.6.m3.1.2.2.3.1" xref="S2.SS2.SSS0.Px2.p1.6.m3.1.2.2.3.1.cmml">⁢</mo><mi id="S2.SS2.SSS0.Px2.p1.6.m3.1.2.2.3.3" xref="S2.SS2.SSS0.Px2.p1.6.m3.1.2.2.3.3.cmml">e</mi><mo id="S2.SS2.SSS0.Px2.p1.6.m3.1.2.2.3.1a" xref="S2.SS2.SSS0.Px2.p1.6.m3.1.2.2.3.1.cmml">⁢</mo><mi id="S2.SS2.SSS0.Px2.p1.6.m3.1.2.2.3.4" xref="S2.SS2.SSS0.Px2.p1.6.m3.1.2.2.3.4.cmml">n</mi></mrow></msub><mo id="S2.SS2.SSS0.Px2.p1.6.m3.1.2.1" xref="S2.SS2.SSS0.Px2.p1.6.m3.1.2.1.cmml">⁢</mo><mrow id="S2.SS2.SSS0.Px2.p1.6.m3.1.2.3.2" xref="S2.SS2.SSS0.Px2.p1.6.m3.1.2.cmml"><mo id="S2.SS2.SSS0.Px2.p1.6.m3.1.2.3.2.1" stretchy="false" xref="S2.SS2.SSS0.Px2.p1.6.m3.1.2.cmml">(</mo><mo id="S2.SS2.SSS0.Px2.p1.6.m3.1.1" lspace="0em" rspace="0em" xref="S2.SS2.SSS0.Px2.p1.6.m3.1.1.cmml">⋅</mo><mo id="S2.SS2.SSS0.Px2.p1.6.m3.1.2.3.2.2" stretchy="false" xref="S2.SS2.SSS0.Px2.p1.6.m3.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px2.p1.6.m3.1b"><apply id="S2.SS2.SSS0.Px2.p1.6.m3.1.2.cmml" xref="S2.SS2.SSS0.Px2.p1.6.m3.1.2"><times id="S2.SS2.SSS0.Px2.p1.6.m3.1.2.1.cmml" xref="S2.SS2.SSS0.Px2.p1.6.m3.1.2.1"></times><apply id="S2.SS2.SSS0.Px2.p1.6.m3.1.2.2.cmml" xref="S2.SS2.SSS0.Px2.p1.6.m3.1.2.2"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px2.p1.6.m3.1.2.2.1.cmml" xref="S2.SS2.SSS0.Px2.p1.6.m3.1.2.2">subscript</csymbol><ci id="S2.SS2.SSS0.Px2.p1.6.m3.1.2.2.2.cmml" xref="S2.SS2.SSS0.Px2.p1.6.m3.1.2.2.2">𝑓</ci><apply id="S2.SS2.SSS0.Px2.p1.6.m3.1.2.2.3.cmml" xref="S2.SS2.SSS0.Px2.p1.6.m3.1.2.2.3"><times id="S2.SS2.SSS0.Px2.p1.6.m3.1.2.2.3.1.cmml" xref="S2.SS2.SSS0.Px2.p1.6.m3.1.2.2.3.1"></times><ci id="S2.SS2.SSS0.Px2.p1.6.m3.1.2.2.3.2.cmml" xref="S2.SS2.SSS0.Px2.p1.6.m3.1.2.2.3.2">𝑔</ci><ci id="S2.SS2.SSS0.Px2.p1.6.m3.1.2.2.3.3.cmml" xref="S2.SS2.SSS0.Px2.p1.6.m3.1.2.2.3.3">𝑒</ci><ci id="S2.SS2.SSS0.Px2.p1.6.m3.1.2.2.3.4.cmml" xref="S2.SS2.SSS0.Px2.p1.6.m3.1.2.2.3.4">𝑛</ci></apply></apply><ci id="S2.SS2.SSS0.Px2.p1.6.m3.1.1.cmml" xref="S2.SS2.SSS0.Px2.p1.6.m3.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px2.p1.6.m3.1c">f_{gen}(\cdot)</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px2.p1.6.m3.1d">italic_f start_POSTSUBSCRIPT italic_g italic_e italic_n end_POSTSUBSCRIPT ( ⋅ )</annotation></semantics></math> generates either a <span class="ltx_text ltx_font_smallcaps" id="S2.SS2.SSS0.Px2.p1.8.1">Rationale</span> or <span class="ltx_text ltx_font_smallcaps" id="S2.SS2.SSS0.Px2.p1.8.2">Query</span>. The retriever <math alttext="f_{retr}(\cdot)" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px2.p1.7.m4.1"><semantics id="S2.SS2.SSS0.Px2.p1.7.m4.1a"><mrow id="S2.SS2.SSS0.Px2.p1.7.m4.1.2" xref="S2.SS2.SSS0.Px2.p1.7.m4.1.2.cmml"><msub id="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2" xref="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2.cmml"><mi id="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2.2" xref="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2.2.cmml">f</mi><mrow id="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2.3" xref="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2.3.cmml"><mi id="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2.3.2" xref="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2.3.2.cmml">r</mi><mo id="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2.3.1" xref="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2.3.1.cmml">⁢</mo><mi id="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2.3.3" xref="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2.3.3.cmml">e</mi><mo id="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2.3.1a" xref="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2.3.1.cmml">⁢</mo><mi id="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2.3.4" xref="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2.3.4.cmml">t</mi><mo id="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2.3.1b" xref="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2.3.1.cmml">⁢</mo><mi id="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2.3.5" xref="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2.3.5.cmml">r</mi></mrow></msub><mo id="S2.SS2.SSS0.Px2.p1.7.m4.1.2.1" xref="S2.SS2.SSS0.Px2.p1.7.m4.1.2.1.cmml">⁢</mo><mrow id="S2.SS2.SSS0.Px2.p1.7.m4.1.2.3.2" xref="S2.SS2.SSS0.Px2.p1.7.m4.1.2.cmml"><mo id="S2.SS2.SSS0.Px2.p1.7.m4.1.2.3.2.1" stretchy="false" xref="S2.SS2.SSS0.Px2.p1.7.m4.1.2.cmml">(</mo><mo id="S2.SS2.SSS0.Px2.p1.7.m4.1.1" lspace="0em" rspace="0em" xref="S2.SS2.SSS0.Px2.p1.7.m4.1.1.cmml">⋅</mo><mo id="S2.SS2.SSS0.Px2.p1.7.m4.1.2.3.2.2" stretchy="false" xref="S2.SS2.SSS0.Px2.p1.7.m4.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px2.p1.7.m4.1b"><apply id="S2.SS2.SSS0.Px2.p1.7.m4.1.2.cmml" xref="S2.SS2.SSS0.Px2.p1.7.m4.1.2"><times id="S2.SS2.SSS0.Px2.p1.7.m4.1.2.1.cmml" xref="S2.SS2.SSS0.Px2.p1.7.m4.1.2.1"></times><apply id="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2.cmml" xref="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2.1.cmml" xref="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2">subscript</csymbol><ci id="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2.2.cmml" xref="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2.2">𝑓</ci><apply id="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2.3.cmml" xref="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2.3"><times id="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2.3.1.cmml" xref="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2.3.1"></times><ci id="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2.3.2.cmml" xref="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2.3.2">𝑟</ci><ci id="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2.3.3.cmml" xref="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2.3.3">𝑒</ci><ci id="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2.3.4.cmml" xref="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2.3.4">𝑡</ci><ci id="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2.3.5.cmml" xref="S2.SS2.SSS0.Px2.p1.7.m4.1.2.2.3.5">𝑟</ci></apply></apply><ci id="S2.SS2.SSS0.Px2.p1.7.m4.1.1.cmml" xref="S2.SS2.SSS0.Px2.p1.7.m4.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px2.p1.7.m4.1c">f_{retr}(\cdot)</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px2.p1.7.m4.1d">italic_f start_POSTSUBSCRIPT italic_r italic_e italic_t italic_r end_POSTSUBSCRIPT ( ⋅ )</annotation></semantics></math> outputs a <span class="ltx_text ltx_font_smallcaps" id="S2.SS2.SSS0.Px2.p1.8.3">Doc</span>.
Last but not least, the rule-based function <math alttext="f_{rule}(\cdot)" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px2.p1.8.m5.1"><semantics id="S2.SS2.SSS0.Px2.p1.8.m5.1a"><mrow id="S2.SS2.SSS0.Px2.p1.8.m5.1.2" xref="S2.SS2.SSS0.Px2.p1.8.m5.1.2.cmml"><msub id="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2" xref="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2.cmml"><mi id="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2.2" xref="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2.2.cmml">f</mi><mrow id="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2.3" xref="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2.3.cmml"><mi id="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2.3.2" xref="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2.3.2.cmml">r</mi><mo id="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2.3.1" xref="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2.3.1.cmml">⁢</mo><mi id="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2.3.3" xref="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2.3.3.cmml">u</mi><mo id="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2.3.1a" xref="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2.3.1.cmml">⁢</mo><mi id="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2.3.4" xref="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2.3.4.cmml">l</mi><mo id="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2.3.1b" xref="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2.3.1.cmml">⁢</mo><mi id="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2.3.5" xref="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2.3.5.cmml">e</mi></mrow></msub><mo id="S2.SS2.SSS0.Px2.p1.8.m5.1.2.1" xref="S2.SS2.SSS0.Px2.p1.8.m5.1.2.1.cmml">⁢</mo><mrow id="S2.SS2.SSS0.Px2.p1.8.m5.1.2.3.2" xref="S2.SS2.SSS0.Px2.p1.8.m5.1.2.cmml"><mo id="S2.SS2.SSS0.Px2.p1.8.m5.1.2.3.2.1" stretchy="false" xref="S2.SS2.SSS0.Px2.p1.8.m5.1.2.cmml">(</mo><mo id="S2.SS2.SSS0.Px2.p1.8.m5.1.1" lspace="0em" rspace="0em" xref="S2.SS2.SSS0.Px2.p1.8.m5.1.1.cmml">⋅</mo><mo id="S2.SS2.SSS0.Px2.p1.8.m5.1.2.3.2.2" stretchy="false" xref="S2.SS2.SSS0.Px2.p1.8.m5.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px2.p1.8.m5.1b"><apply id="S2.SS2.SSS0.Px2.p1.8.m5.1.2.cmml" xref="S2.SS2.SSS0.Px2.p1.8.m5.1.2"><times id="S2.SS2.SSS0.Px2.p1.8.m5.1.2.1.cmml" xref="S2.SS2.SSS0.Px2.p1.8.m5.1.2.1"></times><apply id="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2.cmml" xref="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2.1.cmml" xref="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2">subscript</csymbol><ci id="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2.2.cmml" xref="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2.2">𝑓</ci><apply id="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2.3.cmml" xref="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2.3"><times id="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2.3.1.cmml" xref="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2.3.1"></times><ci id="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2.3.2.cmml" xref="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2.3.2">𝑟</ci><ci id="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2.3.3.cmml" xref="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2.3.3">𝑢</ci><ci id="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2.3.4.cmml" xref="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2.3.4">𝑙</ci><ci id="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2.3.5.cmml" xref="S2.SS2.SSS0.Px2.p1.8.m5.1.2.2.3.5">𝑒</ci></apply></apply><ci id="S2.SS2.SSS0.Px2.p1.8.m5.1.1.cmml" xref="S2.SS2.SSS0.Px2.p1.8.m5.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px2.p1.8.m5.1c">f_{rule}(\cdot)</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px2.p1.8.m5.1d">italic_f start_POSTSUBSCRIPT italic_r italic_u italic_l italic_e end_POSTSUBSCRIPT ( ⋅ )</annotation></semantics></math> outputs a <span class="ltx_text ltx_font_smallcaps" id="S2.SS2.SSS0.Px2.p1.8.4">SubGoal</span>.
The <span class="ltx_text ltx_font_smallcaps" id="S2.SS2.SSS0.Px2.p1.8.5">SubGoal</span> is a predefined natural language. For example, a <span class="ltx_text ltx_font_smallcaps" id="S2.SS2.SSS0.Px2.p1.8.6">Reason</span> thought is “The next step is to generate a rationale”.</p>
</div>
</section>
<section class="ltx_paragraph" id="S2.SS2.SSS0.Px3">
<h5 class="ltx_title ltx_title_paragraph">Termination conditions and the final answer.</h5>
<div class="ltx_para ltx_noindent" id="S2.SS2.SSS0.Px3.p1">
<p class="ltx_p" id="S2.SS2.SSS0.Px3.p1.5">This process continues until one of two conditions is met. The process ends at step <math alttext="t" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px3.p1.1.m1.1"><semantics id="S2.SS2.SSS0.Px3.p1.1.m1.1a"><mi id="S2.SS2.SSS0.Px3.p1.1.m1.1.1" xref="S2.SS2.SSS0.Px3.p1.1.m1.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px3.p1.1.m1.1b"><ci id="S2.SS2.SSS0.Px3.p1.1.m1.1.1.cmml" xref="S2.SS2.SSS0.Px3.p1.1.m1.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px3.p1.1.m1.1c">t</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px3.p1.1.m1.1d">italic_t</annotation></semantics></math> if the observation <math alttext="o_{t}" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px3.p1.2.m2.1"><semantics id="S2.SS2.SSS0.Px3.p1.2.m2.1a"><msub id="S2.SS2.SSS0.Px3.p1.2.m2.1.1" xref="S2.SS2.SSS0.Px3.p1.2.m2.1.1.cmml"><mi id="S2.SS2.SSS0.Px3.p1.2.m2.1.1.2" xref="S2.SS2.SSS0.Px3.p1.2.m2.1.1.2.cmml">o</mi><mi id="S2.SS2.SSS0.Px3.p1.2.m2.1.1.3" xref="S2.SS2.SSS0.Px3.p1.2.m2.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px3.p1.2.m2.1b"><apply id="S2.SS2.SSS0.Px3.p1.2.m2.1.1.cmml" xref="S2.SS2.SSS0.Px3.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px3.p1.2.m2.1.1.1.cmml" xref="S2.SS2.SSS0.Px3.p1.2.m2.1.1">subscript</csymbol><ci id="S2.SS2.SSS0.Px3.p1.2.m2.1.1.2.cmml" xref="S2.SS2.SSS0.Px3.p1.2.m2.1.1.2">𝑜</ci><ci id="S2.SS2.SSS0.Px3.p1.2.m2.1.1.3.cmml" xref="S2.SS2.SSS0.Px3.p1.2.m2.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px3.p1.2.m2.1c">o_{t}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px3.p1.2.m2.1d">italic_o start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math> includes the complete answer.
Otherwise, if <math alttext="t" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px3.p1.3.m3.1"><semantics id="S2.SS2.SSS0.Px3.p1.3.m3.1a"><mi id="S2.SS2.SSS0.Px3.p1.3.m3.1.1" xref="S2.SS2.SSS0.Px3.p1.3.m3.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px3.p1.3.m3.1b"><ci id="S2.SS2.SSS0.Px3.p1.3.m3.1.1.cmml" xref="S2.SS2.SSS0.Px3.p1.3.m3.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px3.p1.3.m3.1c">t</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px3.p1.3.m3.1d">italic_t</annotation></semantics></math> equals <math alttext="T" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px3.p1.4.m4.1"><semantics id="S2.SS2.SSS0.Px3.p1.4.m4.1a"><mi id="S2.SS2.SSS0.Px3.p1.4.m4.1.1" xref="S2.SS2.SSS0.Px3.p1.4.m4.1.1.cmml">T</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px3.p1.4.m4.1b"><ci id="S2.SS2.SSS0.Px3.p1.4.m4.1.1.cmml" xref="S2.SS2.SSS0.Px3.p1.4.m4.1.1">𝑇</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px3.p1.4.m4.1c">T</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px3.p1.4.m4.1d">italic_T</annotation></semantics></math> and <math alttext="o_{t}" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px3.p1.5.m5.1"><semantics id="S2.SS2.SSS0.Px3.p1.5.m5.1a"><msub id="S2.SS2.SSS0.Px3.p1.5.m5.1.1" xref="S2.SS2.SSS0.Px3.p1.5.m5.1.1.cmml"><mi id="S2.SS2.SSS0.Px3.p1.5.m5.1.1.2" xref="S2.SS2.SSS0.Px3.p1.5.m5.1.1.2.cmml">o</mi><mi id="S2.SS2.SSS0.Px3.p1.5.m5.1.1.3" xref="S2.SS2.SSS0.Px3.p1.5.m5.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px3.p1.5.m5.1b"><apply id="S2.SS2.SSS0.Px3.p1.5.m5.1.1.cmml" xref="S2.SS2.SSS0.Px3.p1.5.m5.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px3.p1.5.m5.1.1.1.cmml" xref="S2.SS2.SSS0.Px3.p1.5.m5.1.1">subscript</csymbol><ci id="S2.SS2.SSS0.Px3.p1.5.m5.1.1.2.cmml" xref="S2.SS2.SSS0.Px3.p1.5.m5.1.1.2">𝑜</ci><ci id="S2.SS2.SSS0.Px3.p1.5.m5.1.1.3.cmml" xref="S2.SS2.SSS0.Px3.p1.5.m5.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px3.p1.5.m5.1c">o_{t}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px3.p1.5.m5.1d">italic_o start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math> does not contain the final answer, an extra step occurs to force the model to conclude the answer.
In this case, a concluding answer is generated using an LLM.</p>
</div>
</section>
</section>
<section class="ltx_subsection" id="S2.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.3 </span>The Critic Models</h3>
<div class="ltx_para ltx_noindent" id="S2.SS3.p1">
<p class="ltx_p" id="S2.SS3.p1.1">The CR-Planner framework relies heavily on its critic models as key components. These models evaluate actions and steer the overall process of sub-goal and execution selection.
To fulfill this role effectively, the critic models must accurately assess each action based on its potential contribution to the entire problem-solving process.
As such, the collection of training data for the critic models is crucial, for which we utilize Monte Carlo Tree Search (MCTS).
MCTS is particularly well-suited for generating training data for the critic models due to its ability to explore the long-term impacts of potential actions while balancing exploration and exploitation. By simulating numerous possible action-observation trajectories, MCTS can provide a rich dataset of both successful and unsuccessful trajectories, helping the critic model learn to differentiate effective actions from suboptimal ones.</p>
</div>
<section class="ltx_paragraph" id="S2.SS3.SSS0.Px1">
<h5 class="ltx_title ltx_title_paragraph">Collecting data via MCTS.</h5>
<div class="ltx_para ltx_noindent" id="S2.SS3.SSS0.Px1.p1">
<p class="ltx_p" id="S2.SS3.SSS0.Px1.p1.32">As shown in Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S2.F2" title="Figure 2 ‣ 2 Critic-Guided Planning with Retrieval-Augmentation ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_tag">2</span></a>, MCTS consists of the four key steps:
<span class="ltx_text ltx_font_bold" id="S2.SS3.SSS0.Px1.p1.32.1">(1) Selection.</span>
Starting from the <span class="ltx_text ltx_font_typewriter" id="S2.SS3.SSS0.Px1.p1.32.2">root</span> state <math alttext="s_{0}" class="ltx_Math" display="inline" id="S2.SS3.SSS0.Px1.p1.1.m1.1"><semantics id="S2.SS3.SSS0.Px1.p1.1.m1.1a"><msub id="S2.SS3.SSS0.Px1.p1.1.m1.1.1" xref="S2.SS3.SSS0.Px1.p1.1.m1.1.1.cmml"><mi id="S2.SS3.SSS0.Px1.p1.1.m1.1.1.2" xref="S2.SS3.SSS0.Px1.p1.1.m1.1.1.2.cmml">s</mi><mn id="S2.SS3.SSS0.Px1.p1.1.m1.1.1.3" xref="S2.SS3.SSS0.Px1.p1.1.m1.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS0.Px1.p1.1.m1.1b"><apply id="S2.SS3.SSS0.Px1.p1.1.m1.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.1.m1.1.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.1.m1.1.1">subscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.1.m1.1.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.1.m1.1.1.2">𝑠</ci><cn id="S2.SS3.SSS0.Px1.p1.1.m1.1.1.3.cmml" type="integer" xref="S2.SS3.SSS0.Px1.p1.1.m1.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS0.Px1.p1.1.m1.1c">s_{0}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.SSS0.Px1.p1.1.m1.1d">italic_s start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT</annotation></semantics></math>, the algorithm selects child node (with observation) recursively based on the Upper Confidence Bound (UCB1) that balances exploration and exploitation.
The UCB1 value for <math alttext="o_{i}" class="ltx_Math" display="inline" id="S2.SS3.SSS0.Px1.p1.2.m2.1"><semantics id="S2.SS3.SSS0.Px1.p1.2.m2.1a"><msub id="S2.SS3.SSS0.Px1.p1.2.m2.1.1" xref="S2.SS3.SSS0.Px1.p1.2.m2.1.1.cmml"><mi id="S2.SS3.SSS0.Px1.p1.2.m2.1.1.2" xref="S2.SS3.SSS0.Px1.p1.2.m2.1.1.2.cmml">o</mi><mi id="S2.SS3.SSS0.Px1.p1.2.m2.1.1.3" xref="S2.SS3.SSS0.Px1.p1.2.m2.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS0.Px1.p1.2.m2.1b"><apply id="S2.SS3.SSS0.Px1.p1.2.m2.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.2.m2.1.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.2.m2.1.1">subscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.2.m2.1.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.2.m2.1.1.2">𝑜</ci><ci id="S2.SS3.SSS0.Px1.p1.2.m2.1.1.3.cmml" xref="S2.SS3.SSS0.Px1.p1.2.m2.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS0.Px1.p1.2.m2.1c">o_{i}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.SSS0.Px1.p1.2.m2.1d">italic_o start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> is computed as <math alttext="\frac{v_{i}}{n_{i}}+c\sqrt{\frac{\ln n_{p}}{n_{i}}}" class="ltx_Math" display="inline" id="S2.SS3.SSS0.Px1.p1.3.m3.1"><semantics id="S2.SS3.SSS0.Px1.p1.3.m3.1a"><mrow id="S2.SS3.SSS0.Px1.p1.3.m3.1.1" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.cmml"><mfrac id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.2" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.2.cmml"><msub id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.2.2" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.2.2.cmml"><mi id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.2.2.2" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.2.2.2.cmml">v</mi><mi id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.2.2.3" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.2.2.3.cmml">i</mi></msub><msub id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.2.3" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.2.3.cmml"><mi id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.2.3.2" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.2.3.2.cmml">n</mi><mi id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.2.3.3" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.2.3.3.cmml">i</mi></msub></mfrac><mo id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.1" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.1.cmml">+</mo><mrow id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.cmml"><mi id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.2" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.2.cmml">c</mi><mo id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.1" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.1.cmml">⁢</mo><msqrt id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.cmml"><mfrac id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.cmml"><mrow id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.2" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.2.cmml"><mi id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.2.1" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.2.1.cmml">ln</mi><mo id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.2a" lspace="0.167em" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.2.cmml">⁡</mo><msub id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.2.2" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.2.2.cmml"><mi id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.2.2.2" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.2.2.2.cmml">n</mi><mi id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.2.2.3" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.2.2.3.cmml">p</mi></msub></mrow><msub id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.3" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.3.cmml"><mi id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.3.2" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.3.2.cmml">n</mi><mi id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.3.3" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.3.3.cmml">i</mi></msub></mfrac></msqrt></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS0.Px1.p1.3.m3.1b"><apply id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1"><plus id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.1"></plus><apply id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.2"><divide id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.2.1.cmml" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.2"></divide><apply id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.2.2"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.2.2.1.cmml" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.2.2">subscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.2.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.2.2.2">𝑣</ci><ci id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.2.2.3.cmml" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.2.2.3">𝑖</ci></apply><apply id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.2.3.cmml" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.2.3"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.2.3.1.cmml" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.2.3">subscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.2.3.2.cmml" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.2.3.2">𝑛</ci><ci id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.2.3.3.cmml" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.2.3.3">𝑖</ci></apply></apply><apply id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.cmml" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3"><times id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.1.cmml" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.1"></times><ci id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.2.cmml" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.2">𝑐</ci><apply id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.cmml" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3"><root id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3a.cmml" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3"></root><apply id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.cmml" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2"><divide id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.1.cmml" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2"></divide><apply id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.2"><ln id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.2.1.cmml" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.2.1"></ln><apply id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.2.2"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.2.2.1.cmml" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.2.2">subscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.2.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.2.2.2">𝑛</ci><ci id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.2.2.3.cmml" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.2.2.3">𝑝</ci></apply></apply><apply id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.3.cmml" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.3"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.3.1.cmml" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.3">subscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.3.2.cmml" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.3.2">𝑛</ci><ci id="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.3.3.cmml" xref="S2.SS3.SSS0.Px1.p1.3.m3.1.1.3.3.2.3.3">𝑖</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS0.Px1.p1.3.m3.1c">\frac{v_{i}}{n_{i}}+c\sqrt{\frac{\ln n_{p}}{n_{i}}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.SSS0.Px1.p1.3.m3.1d">divide start_ARG italic_v start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT end_ARG start_ARG italic_n start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT end_ARG + italic_c square-root start_ARG divide start_ARG roman_ln italic_n start_POSTSUBSCRIPT italic_p end_POSTSUBSCRIPT end_ARG start_ARG italic_n start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT end_ARG end_ARG</annotation></semantics></math>, where <math alttext="v_{i}" class="ltx_Math" display="inline" id="S2.SS3.SSS0.Px1.p1.4.m4.1"><semantics id="S2.SS3.SSS0.Px1.p1.4.m4.1a"><msub id="S2.SS3.SSS0.Px1.p1.4.m4.1.1" xref="S2.SS3.SSS0.Px1.p1.4.m4.1.1.cmml"><mi id="S2.SS3.SSS0.Px1.p1.4.m4.1.1.2" xref="S2.SS3.SSS0.Px1.p1.4.m4.1.1.2.cmml">v</mi><mi id="S2.SS3.SSS0.Px1.p1.4.m4.1.1.3" xref="S2.SS3.SSS0.Px1.p1.4.m4.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS0.Px1.p1.4.m4.1b"><apply id="S2.SS3.SSS0.Px1.p1.4.m4.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.4.m4.1.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.4.m4.1.1">subscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.4.m4.1.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.4.m4.1.1.2">𝑣</ci><ci id="S2.SS3.SSS0.Px1.p1.4.m4.1.1.3.cmml" xref="S2.SS3.SSS0.Px1.p1.4.m4.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS0.Px1.p1.4.m4.1c">v_{i}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.SSS0.Px1.p1.4.m4.1d">italic_v start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> is the cumulative rewards of <math alttext="o_{i}" class="ltx_Math" display="inline" id="S2.SS3.SSS0.Px1.p1.5.m5.1"><semantics id="S2.SS3.SSS0.Px1.p1.5.m5.1a"><msub id="S2.SS3.SSS0.Px1.p1.5.m5.1.1" xref="S2.SS3.SSS0.Px1.p1.5.m5.1.1.cmml"><mi id="S2.SS3.SSS0.Px1.p1.5.m5.1.1.2" xref="S2.SS3.SSS0.Px1.p1.5.m5.1.1.2.cmml">o</mi><mi id="S2.SS3.SSS0.Px1.p1.5.m5.1.1.3" xref="S2.SS3.SSS0.Px1.p1.5.m5.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS0.Px1.p1.5.m5.1b"><apply id="S2.SS3.SSS0.Px1.p1.5.m5.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.5.m5.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.5.m5.1.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.5.m5.1.1">subscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.5.m5.1.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.5.m5.1.1.2">𝑜</ci><ci id="S2.SS3.SSS0.Px1.p1.5.m5.1.1.3.cmml" xref="S2.SS3.SSS0.Px1.p1.5.m5.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS0.Px1.p1.5.m5.1c">o_{i}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.SSS0.Px1.p1.5.m5.1d">italic_o start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>, <math alttext="n_{i}" class="ltx_Math" display="inline" id="S2.SS3.SSS0.Px1.p1.6.m6.1"><semantics id="S2.SS3.SSS0.Px1.p1.6.m6.1a"><msub id="S2.SS3.SSS0.Px1.p1.6.m6.1.1" xref="S2.SS3.SSS0.Px1.p1.6.m6.1.1.cmml"><mi id="S2.SS3.SSS0.Px1.p1.6.m6.1.1.2" xref="S2.SS3.SSS0.Px1.p1.6.m6.1.1.2.cmml">n</mi><mi id="S2.SS3.SSS0.Px1.p1.6.m6.1.1.3" xref="S2.SS3.SSS0.Px1.p1.6.m6.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS0.Px1.p1.6.m6.1b"><apply id="S2.SS3.SSS0.Px1.p1.6.m6.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.6.m6.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.6.m6.1.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.6.m6.1.1">subscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.6.m6.1.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.6.m6.1.1.2">𝑛</ci><ci id="S2.SS3.SSS0.Px1.p1.6.m6.1.1.3.cmml" xref="S2.SS3.SSS0.Px1.p1.6.m6.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS0.Px1.p1.6.m6.1c">n_{i}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.SSS0.Px1.p1.6.m6.1d">italic_n start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> is the number of times <math alttext="o_{i}" class="ltx_Math" display="inline" id="S2.SS3.SSS0.Px1.p1.7.m7.1"><semantics id="S2.SS3.SSS0.Px1.p1.7.m7.1a"><msub id="S2.SS3.SSS0.Px1.p1.7.m7.1.1" xref="S2.SS3.SSS0.Px1.p1.7.m7.1.1.cmml"><mi id="S2.SS3.SSS0.Px1.p1.7.m7.1.1.2" xref="S2.SS3.SSS0.Px1.p1.7.m7.1.1.2.cmml">o</mi><mi id="S2.SS3.SSS0.Px1.p1.7.m7.1.1.3" xref="S2.SS3.SSS0.Px1.p1.7.m7.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS0.Px1.p1.7.m7.1b"><apply id="S2.SS3.SSS0.Px1.p1.7.m7.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.7.m7.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.7.m7.1.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.7.m7.1.1">subscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.7.m7.1.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.7.m7.1.1.2">𝑜</ci><ci id="S2.SS3.SSS0.Px1.p1.7.m7.1.1.3.cmml" xref="S2.SS3.SSS0.Px1.p1.7.m7.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS0.Px1.p1.7.m7.1c">o_{i}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.SSS0.Px1.p1.7.m7.1d">italic_o start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> has been visited, and <math alttext="n_{p}" class="ltx_Math" display="inline" id="S2.SS3.SSS0.Px1.p1.8.m8.1"><semantics id="S2.SS3.SSS0.Px1.p1.8.m8.1a"><msub id="S2.SS3.SSS0.Px1.p1.8.m8.1.1" xref="S2.SS3.SSS0.Px1.p1.8.m8.1.1.cmml"><mi id="S2.SS3.SSS0.Px1.p1.8.m8.1.1.2" xref="S2.SS3.SSS0.Px1.p1.8.m8.1.1.2.cmml">n</mi><mi id="S2.SS3.SSS0.Px1.p1.8.m8.1.1.3" xref="S2.SS3.SSS0.Px1.p1.8.m8.1.1.3.cmml">p</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS0.Px1.p1.8.m8.1b"><apply id="S2.SS3.SSS0.Px1.p1.8.m8.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.8.m8.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.8.m8.1.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.8.m8.1.1">subscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.8.m8.1.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.8.m8.1.1.2">𝑛</ci><ci id="S2.SS3.SSS0.Px1.p1.8.m8.1.1.3.cmml" xref="S2.SS3.SSS0.Px1.p1.8.m8.1.1.3">𝑝</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS0.Px1.p1.8.m8.1c">n_{p}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.SSS0.Px1.p1.8.m8.1d">italic_n start_POSTSUBSCRIPT italic_p end_POSTSUBSCRIPT</annotation></semantics></math> denotes the number of visits to the parent thought of <math alttext="o_{i}" class="ltx_Math" display="inline" id="S2.SS3.SSS0.Px1.p1.9.m9.1"><semantics id="S2.SS3.SSS0.Px1.p1.9.m9.1a"><msub id="S2.SS3.SSS0.Px1.p1.9.m9.1.1" xref="S2.SS3.SSS0.Px1.p1.9.m9.1.1.cmml"><mi id="S2.SS3.SSS0.Px1.p1.9.m9.1.1.2" xref="S2.SS3.SSS0.Px1.p1.9.m9.1.1.2.cmml">o</mi><mi id="S2.SS3.SSS0.Px1.p1.9.m9.1.1.3" xref="S2.SS3.SSS0.Px1.p1.9.m9.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS0.Px1.p1.9.m9.1b"><apply id="S2.SS3.SSS0.Px1.p1.9.m9.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.9.m9.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.9.m9.1.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.9.m9.1.1">subscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.9.m9.1.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.9.m9.1.1.2">𝑜</ci><ci id="S2.SS3.SSS0.Px1.p1.9.m9.1.1.3.cmml" xref="S2.SS3.SSS0.Px1.p1.9.m9.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS0.Px1.p1.9.m9.1c">o_{i}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.SSS0.Px1.p1.9.m9.1d">italic_o start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>.
This process continues until it reaches a node that is not fully expanded or a terminal node.
<span class="ltx_text ltx_font_bold" id="S2.SS3.SSS0.Px1.p1.32.3">(2) Expansion.</span>
If the selected <math alttext="o_{i}" class="ltx_Math" display="inline" id="S2.SS3.SSS0.Px1.p1.10.m10.1"><semantics id="S2.SS3.SSS0.Px1.p1.10.m10.1a"><msub id="S2.SS3.SSS0.Px1.p1.10.m10.1.1" xref="S2.SS3.SSS0.Px1.p1.10.m10.1.1.cmml"><mi id="S2.SS3.SSS0.Px1.p1.10.m10.1.1.2" xref="S2.SS3.SSS0.Px1.p1.10.m10.1.1.2.cmml">o</mi><mi id="S2.SS3.SSS0.Px1.p1.10.m10.1.1.3" xref="S2.SS3.SSS0.Px1.p1.10.m10.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS0.Px1.p1.10.m10.1b"><apply id="S2.SS3.SSS0.Px1.p1.10.m10.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.10.m10.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.10.m10.1.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.10.m10.1.1">subscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.10.m10.1.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.10.m10.1.1.2">𝑜</ci><ci id="S2.SS3.SSS0.Px1.p1.10.m10.1.1.3.cmml" xref="S2.SS3.SSS0.Px1.p1.10.m10.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS0.Px1.p1.10.m10.1c">o_{i}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.SSS0.Px1.p1.10.m10.1d">italic_o start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> is not terminal and has unexplored child nodes, MCTS expands the tree by adding one or more of these unexplored child nodes. This represents exploring new actions available from the current action space <math alttext="\mathcal{A}_{s_{t}}" class="ltx_Math" display="inline" id="S2.SS3.SSS0.Px1.p1.11.m11.1"><semantics id="S2.SS3.SSS0.Px1.p1.11.m11.1a"><msub id="S2.SS3.SSS0.Px1.p1.11.m11.1.1" xref="S2.SS3.SSS0.Px1.p1.11.m11.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS3.SSS0.Px1.p1.11.m11.1.1.2" xref="S2.SS3.SSS0.Px1.p1.11.m11.1.1.2.cmml">𝒜</mi><msub id="S2.SS3.SSS0.Px1.p1.11.m11.1.1.3" xref="S2.SS3.SSS0.Px1.p1.11.m11.1.1.3.cmml"><mi id="S2.SS3.SSS0.Px1.p1.11.m11.1.1.3.2" xref="S2.SS3.SSS0.Px1.p1.11.m11.1.1.3.2.cmml">s</mi><mi id="S2.SS3.SSS0.Px1.p1.11.m11.1.1.3.3" xref="S2.SS3.SSS0.Px1.p1.11.m11.1.1.3.3.cmml">t</mi></msub></msub><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS0.Px1.p1.11.m11.1b"><apply id="S2.SS3.SSS0.Px1.p1.11.m11.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.11.m11.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.11.m11.1.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.11.m11.1.1">subscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.11.m11.1.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.11.m11.1.1.2">𝒜</ci><apply id="S2.SS3.SSS0.Px1.p1.11.m11.1.1.3.cmml" xref="S2.SS3.SSS0.Px1.p1.11.m11.1.1.3"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.11.m11.1.1.3.1.cmml" xref="S2.SS3.SSS0.Px1.p1.11.m11.1.1.3">subscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.11.m11.1.1.3.2.cmml" xref="S2.SS3.SSS0.Px1.p1.11.m11.1.1.3.2">𝑠</ci><ci id="S2.SS3.SSS0.Px1.p1.11.m11.1.1.3.3.cmml" xref="S2.SS3.SSS0.Px1.p1.11.m11.1.1.3.3">𝑡</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS0.Px1.p1.11.m11.1c">\mathcal{A}_{s_{t}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.SSS0.Px1.p1.11.m11.1d">caligraphic_A start_POSTSUBSCRIPT italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math>.
<span class="ltx_text ltx_font_bold" id="S2.SS3.SSS0.Px1.p1.32.4">(3) Simulation.</span>
From the newly added observation, MCTS simulates a playthrough to a terminal state by employing a generative model <math alttext="f_{gen}(\cdot)" class="ltx_Math" display="inline" id="S2.SS3.SSS0.Px1.p1.12.m12.1"><semantics id="S2.SS3.SSS0.Px1.p1.12.m12.1a"><mrow id="S2.SS3.SSS0.Px1.p1.12.m12.1.2" xref="S2.SS3.SSS0.Px1.p1.12.m12.1.2.cmml"><msub id="S2.SS3.SSS0.Px1.p1.12.m12.1.2.2" xref="S2.SS3.SSS0.Px1.p1.12.m12.1.2.2.cmml"><mi id="S2.SS3.SSS0.Px1.p1.12.m12.1.2.2.2" xref="S2.SS3.SSS0.Px1.p1.12.m12.1.2.2.2.cmml">f</mi><mrow id="S2.SS3.SSS0.Px1.p1.12.m12.1.2.2.3" xref="S2.SS3.SSS0.Px1.p1.12.m12.1.2.2.3.cmml"><mi id="S2.SS3.SSS0.Px1.p1.12.m12.1.2.2.3.2" xref="S2.SS3.SSS0.Px1.p1.12.m12.1.2.2.3.2.cmml">g</mi><mo id="S2.SS3.SSS0.Px1.p1.12.m12.1.2.2.3.1" xref="S2.SS3.SSS0.Px1.p1.12.m12.1.2.2.3.1.cmml">⁢</mo><mi id="S2.SS3.SSS0.Px1.p1.12.m12.1.2.2.3.3" xref="S2.SS3.SSS0.Px1.p1.12.m12.1.2.2.3.3.cmml">e</mi><mo id="S2.SS3.SSS0.Px1.p1.12.m12.1.2.2.3.1a" xref="S2.SS3.SSS0.Px1.p1.12.m12.1.2.2.3.1.cmml">⁢</mo><mi id="S2.SS3.SSS0.Px1.p1.12.m12.1.2.2.3.4" xref="S2.SS3.SSS0.Px1.p1.12.m12.1.2.2.3.4.cmml">n</mi></mrow></msub><mo id="S2.SS3.SSS0.Px1.p1.12.m12.1.2.1" xref="S2.SS3.SSS0.Px1.p1.12.m12.1.2.1.cmml">⁢</mo><mrow id="S2.SS3.SSS0.Px1.p1.12.m12.1.2.3.2" xref="S2.SS3.SSS0.Px1.p1.12.m12.1.2.cmml"><mo id="S2.SS3.SSS0.Px1.p1.12.m12.1.2.3.2.1" stretchy="false" xref="S2.SS3.SSS0.Px1.p1.12.m12.1.2.cmml">(</mo><mo id="S2.SS3.SSS0.Px1.p1.12.m12.1.1" lspace="0em" rspace="0em" xref="S2.SS3.SSS0.Px1.p1.12.m12.1.1.cmml">⋅</mo><mo id="S2.SS3.SSS0.Px1.p1.12.m12.1.2.3.2.2" stretchy="false" xref="S2.SS3.SSS0.Px1.p1.12.m12.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS0.Px1.p1.12.m12.1b"><apply id="S2.SS3.SSS0.Px1.p1.12.m12.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.12.m12.1.2"><times id="S2.SS3.SSS0.Px1.p1.12.m12.1.2.1.cmml" xref="S2.SS3.SSS0.Px1.p1.12.m12.1.2.1"></times><apply id="S2.SS3.SSS0.Px1.p1.12.m12.1.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.12.m12.1.2.2"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.12.m12.1.2.2.1.cmml" xref="S2.SS3.SSS0.Px1.p1.12.m12.1.2.2">subscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.12.m12.1.2.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.12.m12.1.2.2.2">𝑓</ci><apply id="S2.SS3.SSS0.Px1.p1.12.m12.1.2.2.3.cmml" xref="S2.SS3.SSS0.Px1.p1.12.m12.1.2.2.3"><times id="S2.SS3.SSS0.Px1.p1.12.m12.1.2.2.3.1.cmml" xref="S2.SS3.SSS0.Px1.p1.12.m12.1.2.2.3.1"></times><ci id="S2.SS3.SSS0.Px1.p1.12.m12.1.2.2.3.2.cmml" xref="S2.SS3.SSS0.Px1.p1.12.m12.1.2.2.3.2">𝑔</ci><ci id="S2.SS3.SSS0.Px1.p1.12.m12.1.2.2.3.3.cmml" xref="S2.SS3.SSS0.Px1.p1.12.m12.1.2.2.3.3">𝑒</ci><ci id="S2.SS3.SSS0.Px1.p1.12.m12.1.2.2.3.4.cmml" xref="S2.SS3.SSS0.Px1.p1.12.m12.1.2.2.3.4">𝑛</ci></apply></apply><ci id="S2.SS3.SSS0.Px1.p1.12.m12.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.12.m12.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS0.Px1.p1.12.m12.1c">f_{gen}(\cdot)</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.SSS0.Px1.p1.12.m12.1d">italic_f start_POSTSUBSCRIPT italic_g italic_e italic_n end_POSTSUBSCRIPT ( ⋅ )</annotation></semantics></math> to generate the final answer based on existing observations. This simulation estimates the potential outcome from the observation.
<span class="ltx_text ltx_font_bold" id="S2.SS3.SSS0.Px1.p1.32.5">(4) Backpropagation.</span>
The result of the simulation is then propagated back up the tree. Each node along the path to the root updates its statistics, including visit counts and total reward, which informs future selection decisions by reflecting the observed outcomes.
For each data point in the training dataset, we run MCTS for <math alttext="N" class="ltx_Math" display="inline" id="S2.SS3.SSS0.Px1.p1.13.m13.1"><semantics id="S2.SS3.SSS0.Px1.p1.13.m13.1a"><mi id="S2.SS3.SSS0.Px1.p1.13.m13.1.1" xref="S2.SS3.SSS0.Px1.p1.13.m13.1.1.cmml">N</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS0.Px1.p1.13.m13.1b"><ci id="S2.SS3.SSS0.Px1.p1.13.m13.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.13.m13.1.1">𝑁</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS0.Px1.p1.13.m13.1c">N</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.SSS0.Px1.p1.13.m13.1d">italic_N</annotation></semantics></math> steps and collect pairwise data from the final state for each observation type.
In particular, a chosen observation <math alttext="o_{i}" class="ltx_Math" display="inline" id="S2.SS3.SSS0.Px1.p1.14.m14.1"><semantics id="S2.SS3.SSS0.Px1.p1.14.m14.1a"><msub id="S2.SS3.SSS0.Px1.p1.14.m14.1.1" xref="S2.SS3.SSS0.Px1.p1.14.m14.1.1.cmml"><mi id="S2.SS3.SSS0.Px1.p1.14.m14.1.1.2" xref="S2.SS3.SSS0.Px1.p1.14.m14.1.1.2.cmml">o</mi><mi id="S2.SS3.SSS0.Px1.p1.14.m14.1.1.3" xref="S2.SS3.SSS0.Px1.p1.14.m14.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS0.Px1.p1.14.m14.1b"><apply id="S2.SS3.SSS0.Px1.p1.14.m14.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.14.m14.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.14.m14.1.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.14.m14.1.1">subscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.14.m14.1.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.14.m14.1.1.2">𝑜</ci><ci id="S2.SS3.SSS0.Px1.p1.14.m14.1.1.3.cmml" xref="S2.SS3.SSS0.Px1.p1.14.m14.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS0.Px1.p1.14.m14.1c">o_{i}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.SSS0.Px1.p1.14.m14.1d">italic_o start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> is the one with the highest score, while a rejected observation <math alttext="o_{i}^{\prime}" class="ltx_Math" display="inline" id="S2.SS3.SSS0.Px1.p1.15.m15.1"><semantics id="S2.SS3.SSS0.Px1.p1.15.m15.1a"><msubsup id="S2.SS3.SSS0.Px1.p1.15.m15.1.1" xref="S2.SS3.SSS0.Px1.p1.15.m15.1.1.cmml"><mi id="S2.SS3.SSS0.Px1.p1.15.m15.1.1.2.2" xref="S2.SS3.SSS0.Px1.p1.15.m15.1.1.2.2.cmml">o</mi><mi id="S2.SS3.SSS0.Px1.p1.15.m15.1.1.2.3" xref="S2.SS3.SSS0.Px1.p1.15.m15.1.1.2.3.cmml">i</mi><mo id="S2.SS3.SSS0.Px1.p1.15.m15.1.1.3" xref="S2.SS3.SSS0.Px1.p1.15.m15.1.1.3.cmml">′</mo></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS0.Px1.p1.15.m15.1b"><apply id="S2.SS3.SSS0.Px1.p1.15.m15.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.15.m15.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.15.m15.1.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.15.m15.1.1">superscript</csymbol><apply id="S2.SS3.SSS0.Px1.p1.15.m15.1.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.15.m15.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.15.m15.1.1.2.1.cmml" xref="S2.SS3.SSS0.Px1.p1.15.m15.1.1">subscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.15.m15.1.1.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.15.m15.1.1.2.2">𝑜</ci><ci id="S2.SS3.SSS0.Px1.p1.15.m15.1.1.2.3.cmml" xref="S2.SS3.SSS0.Px1.p1.15.m15.1.1.2.3">𝑖</ci></apply><ci id="S2.SS3.SSS0.Px1.p1.15.m15.1.1.3.cmml" xref="S2.SS3.SSS0.Px1.p1.15.m15.1.1.3">′</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS0.Px1.p1.15.m15.1c">o_{i}^{\prime}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.SSS0.Px1.p1.15.m15.1d">italic_o start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT</annotation></semantics></math> is one of the observations sharing the same parent node but a lower score.
For critic model <math alttext="g^{e}_{\textsc{Rationale}}(\cdot)" class="ltx_Math" display="inline" id="S2.SS3.SSS0.Px1.p1.16.m16.1"><semantics id="S2.SS3.SSS0.Px1.p1.16.m16.1a"><mrow id="S2.SS3.SSS0.Px1.p1.16.m16.1.2" xref="S2.SS3.SSS0.Px1.p1.16.m16.1.2.cmml"><msubsup id="S2.SS3.SSS0.Px1.p1.16.m16.1.2.2" xref="S2.SS3.SSS0.Px1.p1.16.m16.1.2.2.cmml"><mi id="S2.SS3.SSS0.Px1.p1.16.m16.1.2.2.2.2" xref="S2.SS3.SSS0.Px1.p1.16.m16.1.2.2.2.2.cmml">g</mi><mtext class="ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.16.m16.1.2.2.3" xref="S2.SS3.SSS0.Px1.p1.16.m16.1.2.2.3a.cmml">Rationale</mtext><mi id="S2.SS3.SSS0.Px1.p1.16.m16.1.2.2.2.3" xref="S2.SS3.SSS0.Px1.p1.16.m16.1.2.2.2.3.cmml">e</mi></msubsup><mo id="S2.SS3.SSS0.Px1.p1.16.m16.1.2.1" xref="S2.SS3.SSS0.Px1.p1.16.m16.1.2.1.cmml">⁢</mo><mrow id="S2.SS3.SSS0.Px1.p1.16.m16.1.2.3.2" xref="S2.SS3.SSS0.Px1.p1.16.m16.1.2.cmml"><mo id="S2.SS3.SSS0.Px1.p1.16.m16.1.2.3.2.1" stretchy="false" xref="S2.SS3.SSS0.Px1.p1.16.m16.1.2.cmml">(</mo><mo id="S2.SS3.SSS0.Px1.p1.16.m16.1.1" lspace="0em" rspace="0em" xref="S2.SS3.SSS0.Px1.p1.16.m16.1.1.cmml">⋅</mo><mo id="S2.SS3.SSS0.Px1.p1.16.m16.1.2.3.2.2" stretchy="false" xref="S2.SS3.SSS0.Px1.p1.16.m16.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS0.Px1.p1.16.m16.1b"><apply id="S2.SS3.SSS0.Px1.p1.16.m16.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.16.m16.1.2"><times id="S2.SS3.SSS0.Px1.p1.16.m16.1.2.1.cmml" xref="S2.SS3.SSS0.Px1.p1.16.m16.1.2.1"></times><apply id="S2.SS3.SSS0.Px1.p1.16.m16.1.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.16.m16.1.2.2"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.16.m16.1.2.2.1.cmml" xref="S2.SS3.SSS0.Px1.p1.16.m16.1.2.2">subscript</csymbol><apply id="S2.SS3.SSS0.Px1.p1.16.m16.1.2.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.16.m16.1.2.2"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.16.m16.1.2.2.2.1.cmml" xref="S2.SS3.SSS0.Px1.p1.16.m16.1.2.2">superscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.16.m16.1.2.2.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.16.m16.1.2.2.2.2">𝑔</ci><ci id="S2.SS3.SSS0.Px1.p1.16.m16.1.2.2.2.3.cmml" xref="S2.SS3.SSS0.Px1.p1.16.m16.1.2.2.2.3">𝑒</ci></apply><ci id="S2.SS3.SSS0.Px1.p1.16.m16.1.2.2.3a.cmml" xref="S2.SS3.SSS0.Px1.p1.16.m16.1.2.2.3"><mtext class="ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.16.m16.1.2.2.3.cmml" mathsize="70%" xref="S2.SS3.SSS0.Px1.p1.16.m16.1.2.2.3">Rationale</mtext></ci></apply><ci id="S2.SS3.SSS0.Px1.p1.16.m16.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.16.m16.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS0.Px1.p1.16.m16.1c">g^{e}_{\textsc{Rationale}}(\cdot)</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.SSS0.Px1.p1.16.m16.1d">italic_g start_POSTSUPERSCRIPT italic_e end_POSTSUPERSCRIPT start_POSTSUBSCRIPT Rationale end_POSTSUBSCRIPT ( ⋅ )</annotation></semantics></math>, we collect <math alttext="\mathcal{D}^{\textsc{Rationale}}=\{(O^{\textsc{Rationale}}_{i},o_{i},o_{i}^{%
\prime})...\}" class="ltx_Math" display="inline" id="S2.SS3.SSS0.Px1.p1.17.m17.1"><semantics id="S2.SS3.SSS0.Px1.p1.17.m17.1a"><mrow id="S2.SS3.SSS0.Px1.p1.17.m17.1.1" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.cmml"><msup id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.3" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.3.2" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.3.2.cmml">𝒟</mi><mtext class="ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.3.3" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.3.3a.cmml">Rationale</mtext></msup><mo id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.2" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.2.cmml">=</mo><mrow id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.2.cmml"><mo id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.2" stretchy="false" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.2.cmml">{</mo><mrow id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.cmml"><mrow id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.3.3" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.3.4.cmml"><mo id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.3.3.4" stretchy="false" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.3.4.cmml">(</mo><msubsup id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.1.1.1" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.1.1.1.cmml"><mi id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.1.1.1.2.2" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.1.1.1.2.2.cmml">O</mi><mi id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.1.1.1.3" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.1.1.1.3.cmml">i</mi><mtext class="ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.1.1.1.2.3" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.1.1.1.2.3a.cmml">Rationale</mtext></msubsup><mo id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.3.3.5" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.3.4.cmml">,</mo><msub id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.2.2.2" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.2.2.2.cmml"><mi id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.2.2.2.2" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.2.2.2.2.cmml">o</mi><mi id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.2.2.2.3" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.2.2.2.3.cmml">i</mi></msub><mo id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.3.3.6" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.3.4.cmml">,</mo><msubsup id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.3.3.3" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.3.3.3.cmml"><mi id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.3.3.3.2.2" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.3.3.3.2.2.cmml">o</mi><mi id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.3.3.3.2.3" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.3.3.3.2.3.cmml">i</mi><mo id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.3.3.3.3" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.3.3.3.3.cmml">′</mo></msubsup><mo id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.3.3.7" stretchy="false" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.3.4.cmml">)</mo></mrow><mo id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.4" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.4.cmml">⁢</mo><mi id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.5" mathvariant="normal" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.5.cmml">…</mi></mrow><mo id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.3" stretchy="false" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.2.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS0.Px1.p1.17.m17.1b"><apply id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1"><eq id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.2"></eq><apply id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.3.cmml" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.3"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.3.1.cmml" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.3">superscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.3.2.cmml" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.3.2">𝒟</ci><ci id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.3.3a.cmml" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.3.3"><mtext class="ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.3.3.cmml" mathsize="70%" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.3.3">Rationale</mtext></ci></apply><set id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1"><apply id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1"><times id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.4.cmml" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.4"></times><vector id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.3.4.cmml" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.3.3"><apply id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.1.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.1.1.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.1.1.1">subscript</csymbol><apply id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.1.1.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.1.1.1.2.1.cmml" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.1.1.1">superscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.1.1.1.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.1.1.1.2.2">𝑂</ci><ci id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.1.1.1.2.3a.cmml" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.1.1.1.2.3"><mtext class="ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.1.1.1.2.3.cmml" mathsize="70%" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.1.1.1.2.3">Rationale</mtext></ci></apply><ci id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.1.1.1.3.cmml" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.1.1.1.3">𝑖</ci></apply><apply id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.2.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.2.2.2"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.2.2.2.1.cmml" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.2.2.2">subscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.2.2.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.2.2.2.2">𝑜</ci><ci id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.2.2.2.3.cmml" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.2.2.2.3">𝑖</ci></apply><apply id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.3.3.3.cmml" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.3.3.3"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.3.3.3.1.cmml" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.3.3.3">superscript</csymbol><apply id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.3.3.3.2.cmml" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.3.3.3"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.3.3.3.2.1.cmml" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.3.3.3">subscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.3.3.3.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.3.3.3.2.2">𝑜</ci><ci id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.3.3.3.2.3.cmml" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.3.3.3.2.3">𝑖</ci></apply><ci id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.3.3.3.3.cmml" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.3.3.3.3">′</ci></apply></vector><ci id="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.5.cmml" xref="S2.SS3.SSS0.Px1.p1.17.m17.1.1.1.1.1.5">…</ci></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS0.Px1.p1.17.m17.1c">\mathcal{D}^{\textsc{Rationale}}=\{(O^{\textsc{Rationale}}_{i},o_{i},o_{i}^{%
\prime})...\}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.SSS0.Px1.p1.17.m17.1d">caligraphic_D start_POSTSUPERSCRIPT Rationale end_POSTSUPERSCRIPT = { ( italic_O start_POSTSUPERSCRIPT Rationale end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_o start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_o start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT ) … }</annotation></semantics></math>, where <math alttext="O^{\textsc{Rationale}}_{i}" class="ltx_Math" display="inline" id="S2.SS3.SSS0.Px1.p1.18.m18.1"><semantics id="S2.SS3.SSS0.Px1.p1.18.m18.1a"><msubsup id="S2.SS3.SSS0.Px1.p1.18.m18.1.1" xref="S2.SS3.SSS0.Px1.p1.18.m18.1.1.cmml"><mi id="S2.SS3.SSS0.Px1.p1.18.m18.1.1.2.2" xref="S2.SS3.SSS0.Px1.p1.18.m18.1.1.2.2.cmml">O</mi><mi id="S2.SS3.SSS0.Px1.p1.18.m18.1.1.3" xref="S2.SS3.SSS0.Px1.p1.18.m18.1.1.3.cmml">i</mi><mtext class="ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.18.m18.1.1.2.3" xref="S2.SS3.SSS0.Px1.p1.18.m18.1.1.2.3a.cmml">Rationale</mtext></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS0.Px1.p1.18.m18.1b"><apply id="S2.SS3.SSS0.Px1.p1.18.m18.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.18.m18.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.18.m18.1.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.18.m18.1.1">subscript</csymbol><apply id="S2.SS3.SSS0.Px1.p1.18.m18.1.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.18.m18.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.18.m18.1.1.2.1.cmml" xref="S2.SS3.SSS0.Px1.p1.18.m18.1.1">superscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.18.m18.1.1.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.18.m18.1.1.2.2">𝑂</ci><ci id="S2.SS3.SSS0.Px1.p1.18.m18.1.1.2.3a.cmml" xref="S2.SS3.SSS0.Px1.p1.18.m18.1.1.2.3"><mtext class="ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.18.m18.1.1.2.3.cmml" mathsize="70%" xref="S2.SS3.SSS0.Px1.p1.18.m18.1.1.2.3">Rationale</mtext></ci></apply><ci id="S2.SS3.SSS0.Px1.p1.18.m18.1.1.3.cmml" xref="S2.SS3.SSS0.Px1.p1.18.m18.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS0.Px1.p1.18.m18.1c">O^{\textsc{Rationale}}_{i}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.SSS0.Px1.p1.18.m18.1d">italic_O start_POSTSUPERSCRIPT Rationale end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> represents previous <span class="ltx_text ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.32.6">Rationale</span>s along the trajectory before the current <span class="ltx_text ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.32.7">Rationale</span> <math alttext="o_{i}" class="ltx_Math" display="inline" id="S2.SS3.SSS0.Px1.p1.19.m19.1"><semantics id="S2.SS3.SSS0.Px1.p1.19.m19.1a"><msub id="S2.SS3.SSS0.Px1.p1.19.m19.1.1" xref="S2.SS3.SSS0.Px1.p1.19.m19.1.1.cmml"><mi id="S2.SS3.SSS0.Px1.p1.19.m19.1.1.2" xref="S2.SS3.SSS0.Px1.p1.19.m19.1.1.2.cmml">o</mi><mi id="S2.SS3.SSS0.Px1.p1.19.m19.1.1.3" xref="S2.SS3.SSS0.Px1.p1.19.m19.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS0.Px1.p1.19.m19.1b"><apply id="S2.SS3.SSS0.Px1.p1.19.m19.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.19.m19.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.19.m19.1.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.19.m19.1.1">subscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.19.m19.1.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.19.m19.1.1.2">𝑜</ci><ci id="S2.SS3.SSS0.Px1.p1.19.m19.1.1.3.cmml" xref="S2.SS3.SSS0.Px1.p1.19.m19.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS0.Px1.p1.19.m19.1c">o_{i}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.SSS0.Px1.p1.19.m19.1d">italic_o start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>.
It is crucial to evaluate <math alttext="o_{i}" class="ltx_Math" display="inline" id="S2.SS3.SSS0.Px1.p1.20.m20.1"><semantics id="S2.SS3.SSS0.Px1.p1.20.m20.1a"><msub id="S2.SS3.SSS0.Px1.p1.20.m20.1.1" xref="S2.SS3.SSS0.Px1.p1.20.m20.1.1.cmml"><mi id="S2.SS3.SSS0.Px1.p1.20.m20.1.1.2" xref="S2.SS3.SSS0.Px1.p1.20.m20.1.1.2.cmml">o</mi><mi id="S2.SS3.SSS0.Px1.p1.20.m20.1.1.3" xref="S2.SS3.SSS0.Px1.p1.20.m20.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS0.Px1.p1.20.m20.1b"><apply id="S2.SS3.SSS0.Px1.p1.20.m20.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.20.m20.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.20.m20.1.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.20.m20.1.1">subscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.20.m20.1.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.20.m20.1.1.2">𝑜</ci><ci id="S2.SS3.SSS0.Px1.p1.20.m20.1.1.3.cmml" xref="S2.SS3.SSS0.Px1.p1.20.m20.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS0.Px1.p1.20.m20.1c">o_{i}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.SSS0.Px1.p1.20.m20.1d">italic_o start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> considering all prior rationales.
The critic model <math alttext="g^{e}_{\textsc{Query}}(\cdot)" class="ltx_Math" display="inline" id="S2.SS3.SSS0.Px1.p1.21.m21.1"><semantics id="S2.SS3.SSS0.Px1.p1.21.m21.1a"><mrow id="S2.SS3.SSS0.Px1.p1.21.m21.1.2" xref="S2.SS3.SSS0.Px1.p1.21.m21.1.2.cmml"><msubsup id="S2.SS3.SSS0.Px1.p1.21.m21.1.2.2" xref="S2.SS3.SSS0.Px1.p1.21.m21.1.2.2.cmml"><mi id="S2.SS3.SSS0.Px1.p1.21.m21.1.2.2.2.2" xref="S2.SS3.SSS0.Px1.p1.21.m21.1.2.2.2.2.cmml">g</mi><mtext class="ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.21.m21.1.2.2.3" xref="S2.SS3.SSS0.Px1.p1.21.m21.1.2.2.3a.cmml">Query</mtext><mi id="S2.SS3.SSS0.Px1.p1.21.m21.1.2.2.2.3" xref="S2.SS3.SSS0.Px1.p1.21.m21.1.2.2.2.3.cmml">e</mi></msubsup><mo id="S2.SS3.SSS0.Px1.p1.21.m21.1.2.1" xref="S2.SS3.SSS0.Px1.p1.21.m21.1.2.1.cmml">⁢</mo><mrow id="S2.SS3.SSS0.Px1.p1.21.m21.1.2.3.2" xref="S2.SS3.SSS0.Px1.p1.21.m21.1.2.cmml"><mo id="S2.SS3.SSS0.Px1.p1.21.m21.1.2.3.2.1" stretchy="false" xref="S2.SS3.SSS0.Px1.p1.21.m21.1.2.cmml">(</mo><mo id="S2.SS3.SSS0.Px1.p1.21.m21.1.1" lspace="0em" rspace="0em" xref="S2.SS3.SSS0.Px1.p1.21.m21.1.1.cmml">⋅</mo><mo id="S2.SS3.SSS0.Px1.p1.21.m21.1.2.3.2.2" stretchy="false" xref="S2.SS3.SSS0.Px1.p1.21.m21.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS0.Px1.p1.21.m21.1b"><apply id="S2.SS3.SSS0.Px1.p1.21.m21.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.21.m21.1.2"><times id="S2.SS3.SSS0.Px1.p1.21.m21.1.2.1.cmml" xref="S2.SS3.SSS0.Px1.p1.21.m21.1.2.1"></times><apply id="S2.SS3.SSS0.Px1.p1.21.m21.1.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.21.m21.1.2.2"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.21.m21.1.2.2.1.cmml" xref="S2.SS3.SSS0.Px1.p1.21.m21.1.2.2">subscript</csymbol><apply id="S2.SS3.SSS0.Px1.p1.21.m21.1.2.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.21.m21.1.2.2"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.21.m21.1.2.2.2.1.cmml" xref="S2.SS3.SSS0.Px1.p1.21.m21.1.2.2">superscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.21.m21.1.2.2.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.21.m21.1.2.2.2.2">𝑔</ci><ci id="S2.SS3.SSS0.Px1.p1.21.m21.1.2.2.2.3.cmml" xref="S2.SS3.SSS0.Px1.p1.21.m21.1.2.2.2.3">𝑒</ci></apply><ci id="S2.SS3.SSS0.Px1.p1.21.m21.1.2.2.3a.cmml" xref="S2.SS3.SSS0.Px1.p1.21.m21.1.2.2.3"><mtext class="ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.21.m21.1.2.2.3.cmml" mathsize="70%" xref="S2.SS3.SSS0.Px1.p1.21.m21.1.2.2.3">Query</mtext></ci></apply><ci id="S2.SS3.SSS0.Px1.p1.21.m21.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.21.m21.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS0.Px1.p1.21.m21.1c">g^{e}_{\textsc{Query}}(\cdot)</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.SSS0.Px1.p1.21.m21.1d">italic_g start_POSTSUPERSCRIPT italic_e end_POSTSUPERSCRIPT start_POSTSUBSCRIPT Query end_POSTSUBSCRIPT ( ⋅ )</annotation></semantics></math> uses <math alttext="\mathcal{D}^{\textsc{Query}}=\{(o^{\textsc{Rationale}}_{i},o_{i},o_{i}^{\prime%
})...\}" class="ltx_Math" display="inline" id="S2.SS3.SSS0.Px1.p1.22.m22.1"><semantics id="S2.SS3.SSS0.Px1.p1.22.m22.1a"><mrow id="S2.SS3.SSS0.Px1.p1.22.m22.1.1" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.cmml"><msup id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.3" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.3.2" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.3.2.cmml">𝒟</mi><mtext class="ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.3.3" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.3.3a.cmml">Query</mtext></msup><mo id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.2" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.2.cmml">=</mo><mrow id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.2.cmml"><mo id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.2" stretchy="false" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.2.cmml">{</mo><mrow id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.cmml"><mrow id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.3.3" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.3.4.cmml"><mo id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.3.3.4" stretchy="false" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.3.4.cmml">(</mo><msubsup id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.1.1.1" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.1.1.1.cmml"><mi id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.1.1.1.2.2" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.1.1.1.2.2.cmml">o</mi><mi id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.1.1.1.3" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.1.1.1.3.cmml">i</mi><mtext class="ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.1.1.1.2.3" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.1.1.1.2.3a.cmml">Rationale</mtext></msubsup><mo id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.3.3.5" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.3.4.cmml">,</mo><msub id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.2.2.2" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.2.2.2.cmml"><mi id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.2.2.2.2" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.2.2.2.2.cmml">o</mi><mi id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.2.2.2.3" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.2.2.2.3.cmml">i</mi></msub><mo id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.3.3.6" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.3.4.cmml">,</mo><msubsup id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.3.3.3" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.3.3.3.cmml"><mi id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.3.3.3.2.2" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.3.3.3.2.2.cmml">o</mi><mi id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.3.3.3.2.3" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.3.3.3.2.3.cmml">i</mi><mo id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.3.3.3.3" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.3.3.3.3.cmml">′</mo></msubsup><mo id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.3.3.7" stretchy="false" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.3.4.cmml">)</mo></mrow><mo id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.4" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.4.cmml">⁢</mo><mi id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.5" mathvariant="normal" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.5.cmml">…</mi></mrow><mo id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.3" stretchy="false" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.2.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS0.Px1.p1.22.m22.1b"><apply id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1"><eq id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.2"></eq><apply id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.3.cmml" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.3"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.3.1.cmml" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.3">superscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.3.2.cmml" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.3.2">𝒟</ci><ci id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.3.3a.cmml" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.3.3"><mtext class="ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.3.3.cmml" mathsize="70%" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.3.3">Query</mtext></ci></apply><set id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1"><apply id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1"><times id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.4.cmml" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.4"></times><vector id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.3.4.cmml" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.3.3"><apply id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.1.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.1.1.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.1.1.1">subscript</csymbol><apply id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.1.1.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.1.1.1.2.1.cmml" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.1.1.1">superscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.1.1.1.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.1.1.1.2.2">𝑜</ci><ci id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.1.1.1.2.3a.cmml" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.1.1.1.2.3"><mtext class="ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.1.1.1.2.3.cmml" mathsize="70%" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.1.1.1.2.3">Rationale</mtext></ci></apply><ci id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.1.1.1.3.cmml" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.1.1.1.3">𝑖</ci></apply><apply id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.2.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.2.2.2"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.2.2.2.1.cmml" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.2.2.2">subscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.2.2.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.2.2.2.2">𝑜</ci><ci id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.2.2.2.3.cmml" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.2.2.2.3">𝑖</ci></apply><apply id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.3.3.3.cmml" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.3.3.3"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.3.3.3.1.cmml" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.3.3.3">superscript</csymbol><apply id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.3.3.3.2.cmml" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.3.3.3"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.3.3.3.2.1.cmml" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.3.3.3">subscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.3.3.3.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.3.3.3.2.2">𝑜</ci><ci id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.3.3.3.2.3.cmml" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.3.3.3.2.3">𝑖</ci></apply><ci id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.3.3.3.3.cmml" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.3.3.3.3">′</ci></apply></vector><ci id="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.5.cmml" xref="S2.SS3.SSS0.Px1.p1.22.m22.1.1.1.1.1.5">…</ci></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS0.Px1.p1.22.m22.1c">\mathcal{D}^{\textsc{Query}}=\{(o^{\textsc{Rationale}}_{i},o_{i},o_{i}^{\prime%
})...\}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.SSS0.Px1.p1.22.m22.1d">caligraphic_D start_POSTSUPERSCRIPT Query end_POSTSUPERSCRIPT = { ( italic_o start_POSTSUPERSCRIPT Rationale end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_o start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_o start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT ) … }</annotation></semantics></math>, where <math alttext="o^{\textsc{Rationale}}_{i}" class="ltx_Math" display="inline" id="S2.SS3.SSS0.Px1.p1.23.m23.1"><semantics id="S2.SS3.SSS0.Px1.p1.23.m23.1a"><msubsup id="S2.SS3.SSS0.Px1.p1.23.m23.1.1" xref="S2.SS3.SSS0.Px1.p1.23.m23.1.1.cmml"><mi id="S2.SS3.SSS0.Px1.p1.23.m23.1.1.2.2" xref="S2.SS3.SSS0.Px1.p1.23.m23.1.1.2.2.cmml">o</mi><mi id="S2.SS3.SSS0.Px1.p1.23.m23.1.1.3" xref="S2.SS3.SSS0.Px1.p1.23.m23.1.1.3.cmml">i</mi><mtext class="ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.23.m23.1.1.2.3" xref="S2.SS3.SSS0.Px1.p1.23.m23.1.1.2.3a.cmml">Rationale</mtext></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS0.Px1.p1.23.m23.1b"><apply id="S2.SS3.SSS0.Px1.p1.23.m23.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.23.m23.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.23.m23.1.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.23.m23.1.1">subscript</csymbol><apply id="S2.SS3.SSS0.Px1.p1.23.m23.1.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.23.m23.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.23.m23.1.1.2.1.cmml" xref="S2.SS3.SSS0.Px1.p1.23.m23.1.1">superscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.23.m23.1.1.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.23.m23.1.1.2.2">𝑜</ci><ci id="S2.SS3.SSS0.Px1.p1.23.m23.1.1.2.3a.cmml" xref="S2.SS3.SSS0.Px1.p1.23.m23.1.1.2.3"><mtext class="ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.23.m23.1.1.2.3.cmml" mathsize="70%" xref="S2.SS3.SSS0.Px1.p1.23.m23.1.1.2.3">Rationale</mtext></ci></apply><ci id="S2.SS3.SSS0.Px1.p1.23.m23.1.1.3.cmml" xref="S2.SS3.SSS0.Px1.p1.23.m23.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS0.Px1.p1.23.m23.1c">o^{\textsc{Rationale}}_{i}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.SSS0.Px1.p1.23.m23.1d">italic_o start_POSTSUPERSCRIPT Rationale end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> is one immediately preceding <span class="ltx_text ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.32.8">Rationale</span> of <span class="ltx_text ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.32.9">Query</span> <math alttext="o_{i}" class="ltx_Math" display="inline" id="S2.SS3.SSS0.Px1.p1.24.m24.1"><semantics id="S2.SS3.SSS0.Px1.p1.24.m24.1a"><msub id="S2.SS3.SSS0.Px1.p1.24.m24.1.1" xref="S2.SS3.SSS0.Px1.p1.24.m24.1.1.cmml"><mi id="S2.SS3.SSS0.Px1.p1.24.m24.1.1.2" xref="S2.SS3.SSS0.Px1.p1.24.m24.1.1.2.cmml">o</mi><mi id="S2.SS3.SSS0.Px1.p1.24.m24.1.1.3" xref="S2.SS3.SSS0.Px1.p1.24.m24.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS0.Px1.p1.24.m24.1b"><apply id="S2.SS3.SSS0.Px1.p1.24.m24.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.24.m24.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.24.m24.1.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.24.m24.1.1">subscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.24.m24.1.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.24.m24.1.1.2">𝑜</ci><ci id="S2.SS3.SSS0.Px1.p1.24.m24.1.1.3.cmml" xref="S2.SS3.SSS0.Px1.p1.24.m24.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS0.Px1.p1.24.m24.1c">o_{i}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.SSS0.Px1.p1.24.m24.1d">italic_o start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>.
For the critic model <math alttext="g^{e}_{\textsc{Doc}}(\cdot)" class="ltx_Math" display="inline" id="S2.SS3.SSS0.Px1.p1.25.m25.1"><semantics id="S2.SS3.SSS0.Px1.p1.25.m25.1a"><mrow id="S2.SS3.SSS0.Px1.p1.25.m25.1.2" xref="S2.SS3.SSS0.Px1.p1.25.m25.1.2.cmml"><msubsup id="S2.SS3.SSS0.Px1.p1.25.m25.1.2.2" xref="S2.SS3.SSS0.Px1.p1.25.m25.1.2.2.cmml"><mi id="S2.SS3.SSS0.Px1.p1.25.m25.1.2.2.2.2" xref="S2.SS3.SSS0.Px1.p1.25.m25.1.2.2.2.2.cmml">g</mi><mtext class="ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.25.m25.1.2.2.3" xref="S2.SS3.SSS0.Px1.p1.25.m25.1.2.2.3a.cmml">Doc</mtext><mi id="S2.SS3.SSS0.Px1.p1.25.m25.1.2.2.2.3" xref="S2.SS3.SSS0.Px1.p1.25.m25.1.2.2.2.3.cmml">e</mi></msubsup><mo id="S2.SS3.SSS0.Px1.p1.25.m25.1.2.1" xref="S2.SS3.SSS0.Px1.p1.25.m25.1.2.1.cmml">⁢</mo><mrow id="S2.SS3.SSS0.Px1.p1.25.m25.1.2.3.2" xref="S2.SS3.SSS0.Px1.p1.25.m25.1.2.cmml"><mo id="S2.SS3.SSS0.Px1.p1.25.m25.1.2.3.2.1" stretchy="false" xref="S2.SS3.SSS0.Px1.p1.25.m25.1.2.cmml">(</mo><mo id="S2.SS3.SSS0.Px1.p1.25.m25.1.1" lspace="0em" rspace="0em" xref="S2.SS3.SSS0.Px1.p1.25.m25.1.1.cmml">⋅</mo><mo id="S2.SS3.SSS0.Px1.p1.25.m25.1.2.3.2.2" stretchy="false" xref="S2.SS3.SSS0.Px1.p1.25.m25.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS0.Px1.p1.25.m25.1b"><apply id="S2.SS3.SSS0.Px1.p1.25.m25.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.25.m25.1.2"><times id="S2.SS3.SSS0.Px1.p1.25.m25.1.2.1.cmml" xref="S2.SS3.SSS0.Px1.p1.25.m25.1.2.1"></times><apply id="S2.SS3.SSS0.Px1.p1.25.m25.1.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.25.m25.1.2.2"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.25.m25.1.2.2.1.cmml" xref="S2.SS3.SSS0.Px1.p1.25.m25.1.2.2">subscript</csymbol><apply id="S2.SS3.SSS0.Px1.p1.25.m25.1.2.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.25.m25.1.2.2"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.25.m25.1.2.2.2.1.cmml" xref="S2.SS3.SSS0.Px1.p1.25.m25.1.2.2">superscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.25.m25.1.2.2.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.25.m25.1.2.2.2.2">𝑔</ci><ci id="S2.SS3.SSS0.Px1.p1.25.m25.1.2.2.2.3.cmml" xref="S2.SS3.SSS0.Px1.p1.25.m25.1.2.2.2.3">𝑒</ci></apply><ci id="S2.SS3.SSS0.Px1.p1.25.m25.1.2.2.3a.cmml" xref="S2.SS3.SSS0.Px1.p1.25.m25.1.2.2.3"><mtext class="ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.25.m25.1.2.2.3.cmml" mathsize="70%" xref="S2.SS3.SSS0.Px1.p1.25.m25.1.2.2.3">Doc</mtext></ci></apply><ci id="S2.SS3.SSS0.Px1.p1.25.m25.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.25.m25.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS0.Px1.p1.25.m25.1c">g^{e}_{\textsc{Doc}}(\cdot)</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.SSS0.Px1.p1.25.m25.1d">italic_g start_POSTSUPERSCRIPT italic_e end_POSTSUPERSCRIPT start_POSTSUBSCRIPT Doc end_POSTSUBSCRIPT ( ⋅ )</annotation></semantics></math>, we have <math alttext="\mathcal{D}^{\textsc{Doc}}_{i}=\{(o^{\textsc{Rationale}}_{i},o^{\textsc{Query}%
}_{i},o_{i},o_{i}^{\prime})...\}" class="ltx_Math" display="inline" id="S2.SS3.SSS0.Px1.p1.26.m26.1"><semantics id="S2.SS3.SSS0.Px1.p1.26.m26.1a"><mrow id="S2.SS3.SSS0.Px1.p1.26.m26.1.1" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.cmml"><msubsup id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.3" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.3.2.2" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.3.2.2.cmml">𝒟</mi><mi id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.3.3" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.3.3.cmml">i</mi><mtext class="ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.3.2.3" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.3.2.3a.cmml">Doc</mtext></msubsup><mo id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.2" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.2.cmml">=</mo><mrow id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.2.cmml"><mo id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.2" stretchy="false" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.2.cmml">{</mo><mrow id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.cmml"><mrow id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.4.4" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.4.5.cmml"><mo id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.4.4.5" stretchy="false" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.4.5.cmml">(</mo><msubsup id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.1.1.1" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.1.1.1.cmml"><mi id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.1.1.1.2.2" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.1.1.1.2.2.cmml">o</mi><mi id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.1.1.1.3" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.1.1.1.3.cmml">i</mi><mtext class="ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.1.1.1.2.3" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.1.1.1.2.3a.cmml">Rationale</mtext></msubsup><mo id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.4.4.6" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.4.5.cmml">,</mo><msubsup id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.2.2.2" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.2.2.2.cmml"><mi id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.2.2.2.2.2" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.2.2.2.2.2.cmml">o</mi><mi id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.2.2.2.3" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.2.2.2.3.cmml">i</mi><mtext class="ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.2.2.2.2.3" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.2.2.2.2.3a.cmml">Query</mtext></msubsup><mo id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.4.4.7" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.4.5.cmml">,</mo><msub id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.3.3.3" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.3.3.3.cmml"><mi id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.3.3.3.2" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.3.3.3.2.cmml">o</mi><mi id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.3.3.3.3" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.3.3.3.3.cmml">i</mi></msub><mo id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.4.4.8" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.4.5.cmml">,</mo><msubsup id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.4.4.4" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.4.4.4.cmml"><mi id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.4.4.4.2.2" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.4.4.4.2.2.cmml">o</mi><mi id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.4.4.4.2.3" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.4.4.4.2.3.cmml">i</mi><mo id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.4.4.4.3" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.4.4.4.3.cmml">′</mo></msubsup><mo id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.4.4.9" stretchy="false" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.4.5.cmml">)</mo></mrow><mo id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.5" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.5.cmml">⁢</mo><mi id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.6" mathvariant="normal" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.6.cmml">…</mi></mrow><mo id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.3" stretchy="false" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.2.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS0.Px1.p1.26.m26.1b"><apply id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1"><eq id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.2"></eq><apply id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.3.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.3"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.3.1.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.3">subscript</csymbol><apply id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.3.2.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.3"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.3.2.1.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.3">superscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.3.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.3.2.2">𝒟</ci><ci id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.3.2.3a.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.3.2.3"><mtext class="ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.3.2.3.cmml" mathsize="70%" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.3.2.3">Doc</mtext></ci></apply><ci id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.3.3.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.3.3">𝑖</ci></apply><set id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1"><apply id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1"><times id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.5.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.5"></times><vector id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.4.5.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.4.4"><apply id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.1.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.1.1.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.1.1.1">subscript</csymbol><apply id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.1.1.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.1.1.1.2.1.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.1.1.1">superscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.1.1.1.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.1.1.1.2.2">𝑜</ci><ci id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.1.1.1.2.3a.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.1.1.1.2.3"><mtext class="ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.1.1.1.2.3.cmml" mathsize="70%" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.1.1.1.2.3">Rationale</mtext></ci></apply><ci id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.1.1.1.3.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.1.1.1.3">𝑖</ci></apply><apply id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.2.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.2.2.2"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.2.2.2.1.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.2.2.2">subscript</csymbol><apply id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.2.2.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.2.2.2"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.2.2.2.2.1.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.2.2.2">superscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.2.2.2.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.2.2.2.2.2">𝑜</ci><ci id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.2.2.2.2.3a.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.2.2.2.2.3"><mtext class="ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.2.2.2.2.3.cmml" mathsize="70%" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.2.2.2.2.3">Query</mtext></ci></apply><ci id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.2.2.2.3.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.2.2.2.3">𝑖</ci></apply><apply id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.3.3.3.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.3.3.3"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.3.3.3.1.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.3.3.3">subscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.3.3.3.2.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.3.3.3.2">𝑜</ci><ci id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.3.3.3.3.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.3.3.3.3">𝑖</ci></apply><apply id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.4.4.4.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.4.4.4"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.4.4.4.1.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.4.4.4">superscript</csymbol><apply id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.4.4.4.2.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.4.4.4"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.4.4.4.2.1.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.4.4.4">subscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.4.4.4.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.4.4.4.2.2">𝑜</ci><ci id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.4.4.4.2.3.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.4.4.4.2.3">𝑖</ci></apply><ci id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.4.4.4.3.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.4.4.4.3">′</ci></apply></vector><ci id="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.6.cmml" xref="S2.SS3.SSS0.Px1.p1.26.m26.1.1.1.1.1.6">…</ci></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS0.Px1.p1.26.m26.1c">\mathcal{D}^{\textsc{Doc}}_{i}=\{(o^{\textsc{Rationale}}_{i},o^{\textsc{Query}%
}_{i},o_{i},o_{i}^{\prime})...\}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.SSS0.Px1.p1.26.m26.1d">caligraphic_D start_POSTSUPERSCRIPT Doc end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT = { ( italic_o start_POSTSUPERSCRIPT Rationale end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_o start_POSTSUPERSCRIPT Query end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_o start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_o start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT ) … }</annotation></semantics></math>, where <math alttext="o^{\textsc{Rationale}}_{i}" class="ltx_Math" display="inline" id="S2.SS3.SSS0.Px1.p1.27.m27.1"><semantics id="S2.SS3.SSS0.Px1.p1.27.m27.1a"><msubsup id="S2.SS3.SSS0.Px1.p1.27.m27.1.1" xref="S2.SS3.SSS0.Px1.p1.27.m27.1.1.cmml"><mi id="S2.SS3.SSS0.Px1.p1.27.m27.1.1.2.2" xref="S2.SS3.SSS0.Px1.p1.27.m27.1.1.2.2.cmml">o</mi><mi id="S2.SS3.SSS0.Px1.p1.27.m27.1.1.3" xref="S2.SS3.SSS0.Px1.p1.27.m27.1.1.3.cmml">i</mi><mtext class="ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.27.m27.1.1.2.3" xref="S2.SS3.SSS0.Px1.p1.27.m27.1.1.2.3a.cmml">Rationale</mtext></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS0.Px1.p1.27.m27.1b"><apply id="S2.SS3.SSS0.Px1.p1.27.m27.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.27.m27.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.27.m27.1.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.27.m27.1.1">subscript</csymbol><apply id="S2.SS3.SSS0.Px1.p1.27.m27.1.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.27.m27.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.27.m27.1.1.2.1.cmml" xref="S2.SS3.SSS0.Px1.p1.27.m27.1.1">superscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.27.m27.1.1.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.27.m27.1.1.2.2">𝑜</ci><ci id="S2.SS3.SSS0.Px1.p1.27.m27.1.1.2.3a.cmml" xref="S2.SS3.SSS0.Px1.p1.27.m27.1.1.2.3"><mtext class="ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.27.m27.1.1.2.3.cmml" mathsize="70%" xref="S2.SS3.SSS0.Px1.p1.27.m27.1.1.2.3">Rationale</mtext></ci></apply><ci id="S2.SS3.SSS0.Px1.p1.27.m27.1.1.3.cmml" xref="S2.SS3.SSS0.Px1.p1.27.m27.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS0.Px1.p1.27.m27.1c">o^{\textsc{Rationale}}_{i}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.SSS0.Px1.p1.27.m27.1d">italic_o start_POSTSUPERSCRIPT Rationale end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> and <math alttext="o^{\textsc{Query}}_{i}" class="ltx_Math" display="inline" id="S2.SS3.SSS0.Px1.p1.28.m28.1"><semantics id="S2.SS3.SSS0.Px1.p1.28.m28.1a"><msubsup id="S2.SS3.SSS0.Px1.p1.28.m28.1.1" xref="S2.SS3.SSS0.Px1.p1.28.m28.1.1.cmml"><mi id="S2.SS3.SSS0.Px1.p1.28.m28.1.1.2.2" xref="S2.SS3.SSS0.Px1.p1.28.m28.1.1.2.2.cmml">o</mi><mi id="S2.SS3.SSS0.Px1.p1.28.m28.1.1.3" xref="S2.SS3.SSS0.Px1.p1.28.m28.1.1.3.cmml">i</mi><mtext class="ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.28.m28.1.1.2.3" xref="S2.SS3.SSS0.Px1.p1.28.m28.1.1.2.3a.cmml">Query</mtext></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS0.Px1.p1.28.m28.1b"><apply id="S2.SS3.SSS0.Px1.p1.28.m28.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.28.m28.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.28.m28.1.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.28.m28.1.1">subscript</csymbol><apply id="S2.SS3.SSS0.Px1.p1.28.m28.1.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.28.m28.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.28.m28.1.1.2.1.cmml" xref="S2.SS3.SSS0.Px1.p1.28.m28.1.1">superscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.28.m28.1.1.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.28.m28.1.1.2.2">𝑜</ci><ci id="S2.SS3.SSS0.Px1.p1.28.m28.1.1.2.3a.cmml" xref="S2.SS3.SSS0.Px1.p1.28.m28.1.1.2.3"><mtext class="ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.28.m28.1.1.2.3.cmml" mathsize="70%" xref="S2.SS3.SSS0.Px1.p1.28.m28.1.1.2.3">Query</mtext></ci></apply><ci id="S2.SS3.SSS0.Px1.p1.28.m28.1.1.3.cmml" xref="S2.SS3.SSS0.Px1.p1.28.m28.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS0.Px1.p1.28.m28.1c">o^{\textsc{Query}}_{i}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.SSS0.Px1.p1.28.m28.1d">italic_o start_POSTSUPERSCRIPT Query end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> are the immediately preceding <span class="ltx_text ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.32.10">Rationale</span> and <span class="ltx_text ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.32.11">Query</span> of <span class="ltx_text ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.32.12">Doc</span> <math alttext="o_{i}" class="ltx_Math" display="inline" id="S2.SS3.SSS0.Px1.p1.29.m29.1"><semantics id="S2.SS3.SSS0.Px1.p1.29.m29.1a"><msub id="S2.SS3.SSS0.Px1.p1.29.m29.1.1" xref="S2.SS3.SSS0.Px1.p1.29.m29.1.1.cmml"><mi id="S2.SS3.SSS0.Px1.p1.29.m29.1.1.2" xref="S2.SS3.SSS0.Px1.p1.29.m29.1.1.2.cmml">o</mi><mi id="S2.SS3.SSS0.Px1.p1.29.m29.1.1.3" xref="S2.SS3.SSS0.Px1.p1.29.m29.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS0.Px1.p1.29.m29.1b"><apply id="S2.SS3.SSS0.Px1.p1.29.m29.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.29.m29.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.29.m29.1.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.29.m29.1.1">subscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.29.m29.1.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.29.m29.1.1.2">𝑜</ci><ci id="S2.SS3.SSS0.Px1.p1.29.m29.1.1.3.cmml" xref="S2.SS3.SSS0.Px1.p1.29.m29.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS0.Px1.p1.29.m29.1c">o_{i}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.SSS0.Px1.p1.29.m29.1d">italic_o start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>.
Lastly, the <span class="ltx_text ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.32.13">SubGoal</span> critic model <math alttext="g^{g}(\cdot)" class="ltx_Math" display="inline" id="S2.SS3.SSS0.Px1.p1.30.m30.1"><semantics id="S2.SS3.SSS0.Px1.p1.30.m30.1a"><mrow id="S2.SS3.SSS0.Px1.p1.30.m30.1.2" xref="S2.SS3.SSS0.Px1.p1.30.m30.1.2.cmml"><msup id="S2.SS3.SSS0.Px1.p1.30.m30.1.2.2" xref="S2.SS3.SSS0.Px1.p1.30.m30.1.2.2.cmml"><mi id="S2.SS3.SSS0.Px1.p1.30.m30.1.2.2.2" xref="S2.SS3.SSS0.Px1.p1.30.m30.1.2.2.2.cmml">g</mi><mi id="S2.SS3.SSS0.Px1.p1.30.m30.1.2.2.3" xref="S2.SS3.SSS0.Px1.p1.30.m30.1.2.2.3.cmml">g</mi></msup><mo id="S2.SS3.SSS0.Px1.p1.30.m30.1.2.1" xref="S2.SS3.SSS0.Px1.p1.30.m30.1.2.1.cmml">⁢</mo><mrow id="S2.SS3.SSS0.Px1.p1.30.m30.1.2.3.2" xref="S2.SS3.SSS0.Px1.p1.30.m30.1.2.cmml"><mo id="S2.SS3.SSS0.Px1.p1.30.m30.1.2.3.2.1" stretchy="false" xref="S2.SS3.SSS0.Px1.p1.30.m30.1.2.cmml">(</mo><mo id="S2.SS3.SSS0.Px1.p1.30.m30.1.1" lspace="0em" rspace="0em" xref="S2.SS3.SSS0.Px1.p1.30.m30.1.1.cmml">⋅</mo><mo id="S2.SS3.SSS0.Px1.p1.30.m30.1.2.3.2.2" stretchy="false" xref="S2.SS3.SSS0.Px1.p1.30.m30.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS0.Px1.p1.30.m30.1b"><apply id="S2.SS3.SSS0.Px1.p1.30.m30.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.30.m30.1.2"><times id="S2.SS3.SSS0.Px1.p1.30.m30.1.2.1.cmml" xref="S2.SS3.SSS0.Px1.p1.30.m30.1.2.1"></times><apply id="S2.SS3.SSS0.Px1.p1.30.m30.1.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.30.m30.1.2.2"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.30.m30.1.2.2.1.cmml" xref="S2.SS3.SSS0.Px1.p1.30.m30.1.2.2">superscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.30.m30.1.2.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.30.m30.1.2.2.2">𝑔</ci><ci id="S2.SS3.SSS0.Px1.p1.30.m30.1.2.2.3.cmml" xref="S2.SS3.SSS0.Px1.p1.30.m30.1.2.2.3">𝑔</ci></apply><ci id="S2.SS3.SSS0.Px1.p1.30.m30.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.30.m30.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS0.Px1.p1.30.m30.1c">g^{g}(\cdot)</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.SSS0.Px1.p1.30.m30.1d">italic_g start_POSTSUPERSCRIPT italic_g end_POSTSUPERSCRIPT ( ⋅ )</annotation></semantics></math> uses <math alttext="\mathcal{D}^{\textsc{SubGoal}}=\{(O_{i},o_{i},o_{i}^{\prime})...\}" class="ltx_Math" display="inline" id="S2.SS3.SSS0.Px1.p1.31.m31.1"><semantics id="S2.SS3.SSS0.Px1.p1.31.m31.1a"><mrow id="S2.SS3.SSS0.Px1.p1.31.m31.1.1" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.cmml"><msup id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.3" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.3.2" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.3.2.cmml">𝒟</mi><mtext class="ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.3.3" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.3.3a.cmml">SubGoal</mtext></msup><mo id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.2" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.2.cmml">=</mo><mrow id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.2.cmml"><mo id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.2" stretchy="false" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.2.cmml">{</mo><mrow id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.cmml"><mrow id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.3.3" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.3.4.cmml"><mo id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.3.3.4" stretchy="false" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.3.4.cmml">(</mo><msub id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.1.1.1" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.1.1.1.cmml"><mi id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.1.1.1.2" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.1.1.1.2.cmml">O</mi><mi id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.1.1.1.3" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.3.3.5" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.3.4.cmml">,</mo><msub id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.2.2.2" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.2.2.2.cmml"><mi id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.2.2.2.2" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.2.2.2.2.cmml">o</mi><mi id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.2.2.2.3" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.2.2.2.3.cmml">i</mi></msub><mo id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.3.3.6" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.3.4.cmml">,</mo><msubsup id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.3.3.3" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.3.3.3.cmml"><mi id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.3.3.3.2.2" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.3.3.3.2.2.cmml">o</mi><mi id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.3.3.3.2.3" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.3.3.3.2.3.cmml">i</mi><mo id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.3.3.3.3" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.3.3.3.3.cmml">′</mo></msubsup><mo id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.3.3.7" stretchy="false" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.3.4.cmml">)</mo></mrow><mo id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.4" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.4.cmml">⁢</mo><mi id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.5" mathvariant="normal" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.5.cmml">…</mi></mrow><mo id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.3" stretchy="false" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.2.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS0.Px1.p1.31.m31.1b"><apply id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1"><eq id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.2"></eq><apply id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.3.cmml" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.3"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.3.1.cmml" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.3">superscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.3.2.cmml" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.3.2">𝒟</ci><ci id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.3.3a.cmml" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.3.3"><mtext class="ltx_font_smallcaps" id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.3.3.cmml" mathsize="70%" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.3.3">SubGoal</mtext></ci></apply><set id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1"><apply id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1"><times id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.4.cmml" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.4"></times><vector id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.3.4.cmml" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.3.3"><apply id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.1.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.1.1.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.1.1.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.1.1.1.2">𝑂</ci><ci id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.1.1.1.3.cmml" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.1.1.1.3">𝑖</ci></apply><apply id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.2.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.2.2.2"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.2.2.2.1.cmml" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.2.2.2">subscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.2.2.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.2.2.2.2">𝑜</ci><ci id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.2.2.2.3.cmml" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.2.2.2.3">𝑖</ci></apply><apply id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.3.3.3.cmml" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.3.3.3"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.3.3.3.1.cmml" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.3.3.3">superscript</csymbol><apply id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.3.3.3.2.cmml" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.3.3.3"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.3.3.3.2.1.cmml" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.3.3.3">subscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.3.3.3.2.2.cmml" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.3.3.3.2.2">𝑜</ci><ci id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.3.3.3.2.3.cmml" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.3.3.3.2.3">𝑖</ci></apply><ci id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.3.3.3.3.cmml" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.3.3.3.3">′</ci></apply></vector><ci id="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.5.cmml" xref="S2.SS3.SSS0.Px1.p1.31.m31.1.1.1.1.1.5">…</ci></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS0.Px1.p1.31.m31.1c">\mathcal{D}^{\textsc{SubGoal}}=\{(O_{i},o_{i},o_{i}^{\prime})...\}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.SSS0.Px1.p1.31.m31.1d">caligraphic_D start_POSTSUPERSCRIPT SubGoal end_POSTSUPERSCRIPT = { ( italic_O start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_o start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_o start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT ) … }</annotation></semantics></math>, where <math alttext="O_{i}" class="ltx_Math" display="inline" id="S2.SS3.SSS0.Px1.p1.32.m32.1"><semantics id="S2.SS3.SSS0.Px1.p1.32.m32.1a"><msub id="S2.SS3.SSS0.Px1.p1.32.m32.1.1" xref="S2.SS3.SSS0.Px1.p1.32.m32.1.1.cmml"><mi id="S2.SS3.SSS0.Px1.p1.32.m32.1.1.2" xref="S2.SS3.SSS0.Px1.p1.32.m32.1.1.2.cmml">O</mi><mi id="S2.SS3.SSS0.Px1.p1.32.m32.1.1.3" xref="S2.SS3.SSS0.Px1.p1.32.m32.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS3.SSS0.Px1.p1.32.m32.1b"><apply id="S2.SS3.SSS0.Px1.p1.32.m32.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.32.m32.1.1"><csymbol cd="ambiguous" id="S2.SS3.SSS0.Px1.p1.32.m32.1.1.1.cmml" xref="S2.SS3.SSS0.Px1.p1.32.m32.1.1">subscript</csymbol><ci id="S2.SS3.SSS0.Px1.p1.32.m32.1.1.2.cmml" xref="S2.SS3.SSS0.Px1.p1.32.m32.1.1.2">𝑂</ci><ci id="S2.SS3.SSS0.Px1.p1.32.m32.1.1.3.cmml" xref="S2.SS3.SSS0.Px1.p1.32.m32.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.SSS0.Px1.p1.32.m32.1c">O_{i}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.SSS0.Px1.p1.32.m32.1d">italic_O start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> represents all previous observations of any type along the trajectory.</p>
</div>
</section>
<section class="ltx_paragraph" id="S2.SS3.SSS0.Px2">
<h5 class="ltx_title ltx_title_paragraph">Training.</h5>
<div class="ltx_para ltx_noindent" id="S2.SS3.SSS0.Px2.p1">
<p class="ltx_p" id="S2.SS3.SSS0.Px2.p1.1">For each of the collected training datasets described above, we train a dedicated critic model as shown in Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S2.F2" title="Figure 2 ‣ 2 Critic-Guided Planning with Retrieval-Augmentation ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_tag">2</span></a>.
Following <cite class="ltx_cite ltx_citemacro_citet">Burges et al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib3" title="">2005</a>)</cite> and <cite class="ltx_cite ltx_citemacro_citet">Ouyang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib22" title="">2022</a>)</cite>, we employ pairwise ranking loss to optimize the parameters.</p>
</div>
</section>
</section>
</section>
<section class="ltx_section" id="S3">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span>Experiments</h2>
<section class="ltx_subsection" id="S3.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.1 </span>Setup</h3>
<section class="ltx_paragraph" id="S3.SS1.SSS0.Px1">
<h5 class="ltx_title ltx_title_paragraph">Models.</h5>
<div class="ltx_para ltx_noindent" id="S3.SS1.SSS0.Px1.p1">
<p class="ltx_p" id="S3.SS1.SSS0.Px1.p1.1">In our experiments, we employ GPT-4 (<span class="ltx_text ltx_font_typewriter" id="S3.SS1.SSS0.Px1.p1.1.1">gpt-4o-2024-05-13</span>) as the black-box LLM for generation during both inference and training data collection.
Since CR-Planner requires the sampling of diverse <span class="ltx_text ltx_font_smallcaps" id="S3.SS1.SSS0.Px1.p1.1.2">Rationale</span> and <span class="ltx_text ltx_font_smallcaps" id="S3.SS1.SSS0.Px1.p1.1.3">Query</span>, we set the decoding temperature to 0.7.
To ensure training and inference efficiency, we limit the sampling to three instances due to cost concerns.
For the critic models, we fine-tune <span class="ltx_text ltx_font_typewriter" id="S3.SS1.SSS0.Px1.p1.1.4">Skywork-Reward-Llama-3.1-8B</span> <cite class="ltx_cite ltx_citemacro_citep">(Skywork, <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib29" title="">2024</a>)</cite> with LoRA <cite class="ltx_cite ltx_citemacro_citep">(Hu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib9" title="">2021</a>)</cite>, which was trained as a sequence classifier with the Skywork Reward Data Collection and excels at scoring in complex scenarios, such as mathematics and coding.
The first logit value of the model output is used as the reward score of our critic models.</p>
</div>
</section>
<section class="ltx_paragraph" id="S3.SS1.SSS0.Px2">
<h5 class="ltx_title ltx_title_paragraph">Baselines.</h5>
<div class="ltx_para ltx_noindent" id="S3.SS1.SSS0.Px2.p1">
<p class="ltx_p" id="S3.SS1.SSS0.Px2.p1.1">We compare CR-Planner with both commonly used baselines and state-of-the-art methods to offer a comprehensive evaluation:
<span class="ltx_text ltx_font_bold" id="S3.SS1.SSS0.Px2.p1.1.1">(1) Standard prompting (Standard)</span> <cite class="ltx_cite ltx_citemacro_citep">(Ouyang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib22" title="">2022</a>)</cite>, which directly generates the answer.
<span class="ltx_text ltx_font_bold" id="S3.SS1.SSS0.Px2.p1.1.2">(2) Chain-of-Thought (CoT)</span> <cite class="ltx_cite ltx_citemacro_citep">(Wei et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib31" title="">2022</a>)</cite>, which generates multiple rationales before the final answer to enhance the models’ reasoning ability.
<span class="ltx_text ltx_font_bold" id="S3.SS1.SSS0.Px2.p1.1.3">(3) Reflexion</span> <cite class="ltx_cite ltx_citemacro_citep">(Shinn et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib28" title="">2023</a>)</cite>, a framework uses linguistic feedback to further improve models’ reasoning.
<span class="ltx_text ltx_font_bold" id="S3.SS1.SSS0.Px2.p1.1.4">(4) Standard retrieval-augmented generation (RAG)</span> <cite class="ltx_cite ltx_citemacro_citep">(Lewis et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib15" title="">2020</a>)</cite>, which retrieves relevant knowledge based on the problem itself and then lets the model to generate the final answer using both the problem and the retrieved knowledge.
<span class="ltx_text ltx_font_bold" id="S3.SS1.SSS0.Px2.p1.1.5">(5) Chain-of-Knoweldge (CoK)</span> <cite class="ltx_cite ltx_citemacro_citep">(Li et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib17" title="">2024</a>)</cite>, a state-of-the-art CoT-based framework designed to enhance prediction accuracy by retrieving and post-editing rationale at each step.
<span class="ltx_note ltx_role_footnote" id="footnote3"><sup class="ltx_note_mark">3</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">3</sup><span class="ltx_tag ltx_tag_note">3</span>We exclude Self-RAG as a baseline because it requires training the base model, which is not feasible in our setup. This further highlights the flexibility of CR-Planner.</span></span></span>
All methods are zero-shot by default unless otherwise specified.</p>
</div>
</section>
</section>
<section class="ltx_subsection" id="S3.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.2 </span>Competitive Programming</h3>
<section class="ltx_paragraph" id="S3.SS2.SSS0.Px1">
<h5 class="ltx_title ltx_title_paragraph">USACO benchmark.</h5>
<div class="ltx_para ltx_noindent" id="S3.SS2.SSS0.Px1.p1">
<p class="ltx_p" id="S3.SS2.SSS0.Px1.p1.1">Computing Olympiads require complex algorithmic reasoning, puzzle-solving skills, and the ability to generate efficient code.
Furthermore, retrieving knowledge from programming textbooks and similar problems from a problem bank can aid in solving these problems.
In this sub-section, we employ the USACO benchmark <cite class="ltx_cite ltx_citemacro_citep">(Shi et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib26" title="">2024</a>)</cite>, which includes 307 problems from the USA Computing Olympiad, to evaluate the performance of CR-Planner and baseline methods in the domain of competitive programming.
USACO problems are categorized into four difficulty levels (<span class="ltx_text ltx_font_italic" id="S3.SS2.SSS0.Px1.p1.1.1">i.e., </span>123 bronze, 100 silver, 63 gold, and 21 platinum problems) and test various core skills, including complete search, binary search, and segment tree implementation.
Typically, solving a USACO problem involves several steps: restating the problem in simple terms since many are framed within real-world contexts; retrieving relevant knowledge from textbooks or similar problems from a problem bank; conceptualizing the solution in plain English; drafting a pseudocode solution; and finally, producing the complete Python solution with comments.
Thus, the USACO benchmark is an ideal fit for evaluating both the complex reasoning and retrieval capabilities of the models, making it highly relevant to this paper.</p>
</div>
</section>
<section class="ltx_paragraph" id="S3.SS2.SSS0.Px2">
<h5 class="ltx_title ltx_title_paragraph">External knowledge.</h5>
<div class="ltx_para ltx_noindent" id="S3.SS2.SSS0.Px2.p1">
<p class="ltx_p" id="S3.SS2.SSS0.Px2.p1.1">Following the baseline methods outlined in the USACO benchmark <cite class="ltx_cite ltx_citemacro_citep">(Shi et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib26" title="">2024</a>)</cite>, we use both textbooks and a problem bank as external knowledge sources.
The textbooks consist of 30 human-written chapters covering algorithmic concepts tailored specifically for the USA Computing Olympiad.
The problem bank includes all other USACO problems except for the one currently being solved.
Following <cite class="ltx_cite ltx_citemacro_citet">Shi et al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib26" title="">2024</a>)</cite>, we employ both textbooks and the problem bank as external sources for all methods.
Additionally, we employ a BM25 retriever to execute the retrieval process, obtaining relevant information from external knowledge sources.</p>
</div>
</section>
<section class="ltx_paragraph" id="S3.SS2.SSS0.Px3">
<h5 class="ltx_title ltx_title_paragraph">Results and observations.</h5>
<figure class="ltx_table ltx_align_floatright" id="S3.T1">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table 1: </span>Pass@1 performances on USACO. The <span class="ltx_text ltx_font_italic" id="S3.T1.2.1">Retrieval+Reflection*</span> result is from <cite class="ltx_cite ltx_citemacro_citet">Shi et al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib26" title="">2024</a>)</cite>.</figcaption>
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="S3.T1.3" style="width:218.6pt;height:108.8pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(-53.5pt,26.6pt) scale(0.67146426853123,0.67146426853123) ;">
<table class="ltx_tabular ltx_align_middle" id="S3.T1.3.1">
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S3.T1.3.1.1.1">
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T1.3.1.1.1.1"><span class="ltx_text ltx_font_bold" id="S3.T1.3.1.1.1.1.1">Method</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T1.3.1.1.1.2"><span class="ltx_text ltx_font_bold" id="S3.T1.3.1.1.1.2.1">Bronze</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T1.3.1.1.1.3"><span class="ltx_text ltx_font_bold" id="S3.T1.3.1.1.1.3.1">Silver</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T1.3.1.1.1.4"><span class="ltx_text ltx_font_bold" id="S3.T1.3.1.1.1.4.1">Gold</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T1.3.1.1.1.5"><span class="ltx_text ltx_font_bold" id="S3.T1.3.1.1.1.5.1">Platinum</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T1.3.1.1.1.6"><span class="ltx_text ltx_font_bold" id="S3.T1.3.1.1.1.6.1">Overall</span></td>
</tr>
<tr class="ltx_tr" id="S3.T1.3.1.2.2">
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.3.1.2.2.1">Standard</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.3.1.2.2.2">18.70</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.3.1.2.2.3">6.00</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.3.1.2.2.4">3.17</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.3.1.2.2.5">0.00</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.3.1.2.2.6">10.10</td>
</tr>
<tr class="ltx_tr" id="S3.T1.3.1.3.3">
<td class="ltx_td ltx_align_center" id="S3.T1.3.1.3.3.1">CoT</td>
<td class="ltx_td ltx_align_center" id="S3.T1.3.1.3.3.2">21.95</td>
<td class="ltx_td ltx_align_center" id="S3.T1.3.1.3.3.3">8.00</td>
<td class="ltx_td ltx_align_center" id="S3.T1.3.1.3.3.4">4.76</td>
<td class="ltx_td ltx_align_center" id="S3.T1.3.1.3.3.5">0.00</td>
<td class="ltx_td ltx_align_center" id="S3.T1.3.1.3.3.6">12.38</td>
</tr>
<tr class="ltx_tr" id="S3.T1.3.1.4.4">
<td class="ltx_td ltx_align_center" id="S3.T1.3.1.4.4.1">RAG</td>
<td class="ltx_td ltx_align_center" id="S3.T1.3.1.4.4.2">17.07</td>
<td class="ltx_td ltx_align_center" id="S3.T1.3.1.4.4.3">4.00</td>
<td class="ltx_td ltx_align_center" id="S3.T1.3.1.4.4.4">1.59</td>
<td class="ltx_td ltx_align_center" id="S3.T1.3.1.4.4.5">0.00</td>
<td class="ltx_td ltx_align_center" id="S3.T1.3.1.4.4.6">8.47</td>
</tr>
<tr class="ltx_tr" id="S3.T1.3.1.5.5">
<td class="ltx_td ltx_align_center" id="S3.T1.3.1.5.5.1">CoK</td>
<td class="ltx_td ltx_align_center" id="S3.T1.3.1.5.5.2">15.45</td>
<td class="ltx_td ltx_align_center" id="S3.T1.3.1.5.5.3">5.00</td>
<td class="ltx_td ltx_align_center" id="S3.T1.3.1.5.5.4">1.59</td>
<td class="ltx_td ltx_align_center" id="S3.T1.3.1.5.5.5">0.00</td>
<td class="ltx_td ltx_align_center" id="S3.T1.3.1.5.5.6">8.14</td>
</tr>
<tr class="ltx_tr" id="S3.T1.3.1.6.6">
<td class="ltx_td ltx_align_center" id="S3.T1.3.1.6.6.1">CR-Planner</td>
<td class="ltx_td ltx_align_center" id="S3.T1.3.1.6.6.2"><span class="ltx_text ltx_font_bold" id="S3.T1.3.1.6.6.2.1">26.02</span></td>
<td class="ltx_td ltx_align_center" id="S3.T1.3.1.6.6.3"><span class="ltx_text ltx_font_bold" id="S3.T1.3.1.6.6.3.1">10.00</span></td>
<td class="ltx_td ltx_align_center" id="S3.T1.3.1.6.6.4"><span class="ltx_text ltx_font_bold" id="S3.T1.3.1.6.6.4.1">14.29</span></td>
<td class="ltx_td ltx_align_center" id="S3.T1.3.1.6.6.5"><span class="ltx_text ltx_font_bold" id="S3.T1.3.1.6.6.5.1">14.29</span></td>
<td class="ltx_td ltx_align_center" id="S3.T1.3.1.6.6.6"><span class="ltx_text ltx_font_bold" id="S3.T1.3.1.6.6.6.1">17.59</span></td>
</tr>
<tr class="ltx_tr" id="S3.T1.3.1.7.7">
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.3.1.7.7.1">Reflexion</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.3.1.7.7.2">23.58</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.3.1.7.7.3">9.00</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.3.1.7.7.4">4.76</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.3.1.7.7.5">0.00</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.3.1.7.7.6">13.36</td>
</tr>
<tr class="ltx_tr" id="S3.T1.3.1.8.8">
<td class="ltx_td ltx_align_center" id="S3.T1.3.1.8.8.1"><span class="ltx_text ltx_font_italic" id="S3.T1.3.1.8.8.1.1">Retrieval+Reflexion*</span></td>
<td class="ltx_td ltx_align_center" id="S3.T1.3.1.8.8.2">-</td>
<td class="ltx_td ltx_align_center" id="S3.T1.3.1.8.8.3">-</td>
<td class="ltx_td ltx_align_center" id="S3.T1.3.1.8.8.4">-</td>
<td class="ltx_td ltx_align_center" id="S3.T1.3.1.8.8.5">-</td>
<td class="ltx_td ltx_align_center" id="S3.T1.3.1.8.8.6"><span class="ltx_text ltx_font_italic" id="S3.T1.3.1.8.8.6.1">18.05</span></td>
</tr>
<tr class="ltx_tr" id="S3.T1.3.1.9.9">
<td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T1.3.1.9.9.1">CR-Planner+Reflexion</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T1.3.1.9.9.2"><span class="ltx_text ltx_font_bold" id="S3.T1.3.1.9.9.2.1">34.15</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T1.3.1.9.9.3"><span class="ltx_text ltx_font_bold" id="S3.T1.3.1.9.9.3.1">16.00</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T1.3.1.9.9.4"><span class="ltx_text ltx_font_bold" id="S3.T1.3.1.9.9.4.1">14.29</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T1.3.1.9.9.5"><span class="ltx_text ltx_font_bold" id="S3.T1.3.1.9.9.5.1">14.29</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T1.3.1.9.9.6"><span class="ltx_text ltx_font_bold" id="S3.T1.3.1.9.9.6.1">22.80</span></td>
</tr>
</tbody>
</table>
</span></div>
</figure>
<div class="ltx_para ltx_noindent" id="S3.SS2.SSS0.Px3.p1">
<p class="ltx_p" id="S3.SS2.SSS0.Px3.p1.1"><span class="ltx_text ltx_font_bold" id="S3.SS2.SSS0.Px3.p1.1.1">(1) CR-Planner outperforms all baselines consistently.</span>
Table <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S3.T1" title="Table 1 ‣ Results and observations. ‣ 3.2 Competitive Programming ‣ 3 Experiments ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_tag">1</span></a> presents the results for USACO using various methods.
CR-Planner significantly outperforms all baseline methods, achieving a 7.49% improvement in overall performance compared to standard prompting.
This highlights the effectiveness of CR-Planner.
<span class="ltx_text ltx_font_bold" id="S3.SS2.SSS0.Px3.p1.1.2">(2) Reasoning-driven methods offer limited improvements.</span>
We observe that reasoning-driven methods like CoT and Reflexion do improve the performances of the standard prompting method on bronze, silver, and gold problems, reaffirming that intermediate rationales and critique-based reasoning aid in solving reasoning tasks <cite class="ltx_cite ltx_citemacro_citep">(Wei et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib31" title="">2022</a>; Shinn et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib28" title="">2023</a>)</cite>.
However, the improvements are trivial, and these methods fail to improve performance on platinum-level problems.
We attribute this to the model’s limited knowledge of the tasks or the generation of faulty rationales and critiques.
<span class="ltx_text ltx_font_bold" id="S3.SS2.SSS0.Px3.p1.1.3">(3) Faulty retrieval hinders performance.</span>
We observe that both standard RAG and CoK perform worse than the standard prompting method, consistent with the findings of <cite class="ltx_cite ltx_citemacro_citet">Yao et al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib34" title="">2023b</a>)</cite> and <cite class="ltx_cite ltx_citemacro_citet">Shi et al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib26" title="">2024</a>)</cite>.
This decline in performance can be attributed to the quality of retrieval. As demonstrated in Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S1.F1" title="Figure 1 ‣ 1 Introduction ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_tag">1</span></a>, if the retrieved example is irrelevant to the original problem, it may mislead the model into generating an incorrect answer.
Additionally, we notice that CoK performs worse than RAG due to its reliance on multiple retrievals at individual steps, increasing the likelihood of misleading information being introduced and leading to a faulty final answer.
<span class="ltx_text ltx_font_bold" id="S3.SS2.SSS0.Px3.p1.1.4">(4) CR-Planner improves harder problems.</span>
CR-Planner notably boosts the performances on gold- and platinum-level problems. As aforementioned, while CoT offers minor improvements, it falls short on more difficult problems, and retrieval can hinder performance due to irrelevant knowledge.
In contrast, CR-Planner employs critic models to guide both the reasoning and retrieval through the process, leading to non-trivial improvements at the two highest levels of programming problems.
<span class="ltx_text ltx_font_bold" id="S3.SS2.SSS0.Px3.p1.1.5">(5) CR-Planner is orthogonal with other methods.</span>
Reflexion executes the initially generated code and uses the execution results of a few test cases as linguistic feedback to revise the code. CR-Planner works orthogonal with such methods, leading to a significant improvement of 9.44%, further highlighting the effectiveness of critic-guided planning with retrieval-augmentation.</p>
</div>
</section>
</section>
<section class="ltx_subsection" id="S3.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.3 </span>Theorem-Driven Math Problems</h3>
<section class="ltx_paragraph" id="S3.SS3.SSS0.Px1">
<h5 class="ltx_title ltx_title_paragraph">TheoremQA-Maths.</h5>
<div class="ltx_para ltx_noindent" id="S3.SS3.SSS0.Px1.p1">
<p class="ltx_p" id="S3.SS3.SSS0.Px1.p1.1">When tackling a new theorem-driven math problem, people often reference solved problems with similar reasoning logic.
However, finding such problems can be challenging because even if two problems share similar reasoning logic, they might appear very different on the surface.
Moreover, in theorem-driven math problems, the reasoning process is critical. A single flawed step in the logic can lead to wrong subsequent rationales and finally an incorrect final answer.
In this sub-section, we use the rewritten Math set from TheoremQA <cite class="ltx_cite ltx_citemacro_citep">(Chen et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib4" title="">2023</a>)</cite>, named TheoremQA-Math, as introduced in the BRIGHT dataset <cite class="ltx_cite ltx_citemacro_citep">(Su et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib30" title="">2024</a>)</cite>.
TheoremQA-Math consists of 206 solvable questions that have been improved for fluency and coherence, with all questions requiring the application of math theorems (<span class="ltx_text ltx_font_italic" id="S3.SS3.SSS0.Px1.p1.1.1">e.g., </span>the binomial theorems).
To solve a problem in the TheoremQA-Math dataset, the process typically involves the following steps: understanding and restating the problem in simple terms; retrieving relevant knowledge from solved problems; conceptualizing the solution in plain English; and finally, generating the solution.
Solving problems from TheoremQA-Math requires both complex reasoning and knowledge of Math theorems, making it pertinent to this paper.</p>
</div>
</section>
<section class="ltx_paragraph" id="S3.SS3.SSS0.Px2">
<h5 class="ltx_title ltx_title_paragraph">External knowledge.</h5>
<div class="ltx_para ltx_noindent" id="S3.SS3.SSS0.Px2.p1">
<p class="ltx_p" id="S3.SS3.SSS0.Px2.p1.1">Following the BRIGHT benchmark <cite class="ltx_cite ltx_citemacro_citep">(Su et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib30" title="">2024</a>)</cite>, we employ a collection of processed documents sourced from high-quality STEM datasets, including GSM8K <cite class="ltx_cite ltx_citemacro_citep">(Cobbe et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib6" title="">2021</a>)</cite>, GSM8K-RFT <cite class="ltx_cite ltx_citemacro_citep">(Yuan et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib35" title="">2023</a>)</cite>, MATH <cite class="ltx_cite ltx_citemacro_citep">(Hendrycks et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib8" title="">2021</a>)</cite>, AQuA-RAT <cite class="ltx_cite ltx_citemacro_citep">(Ling et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib19" title="">2017</a>)</cite>, TheoremQA <cite class="ltx_cite ltx_citemacro_citep">(Chen et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib4" title="">2023</a>)</cite> and CAMEL-MATH <cite class="ltx_cite ltx_citemacro_citep">(Li et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib16" title="">2023</a>)</cite>.
To ensure efficient retrieval during both the training data collection and inference stages, we opt for the term-based retrieval method BM25, similar to what is used in competitive programming.</p>
</div>
</section>
<section class="ltx_paragraph" id="S3.SS3.SSS0.Px3">
<h5 class="ltx_title ltx_title_paragraph">Results and observation.</h5>
<figure class="ltx_table ltx_align_floatright" id="S3.T2">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table 2: </span>Results (accuracy) on TheoremQA-Math. </figcaption>
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="S3.T2.1" style="width:99.4pt;height:76.4pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(-32.2pt,24.8pt) scale(0.606743501287016,0.606743501287016) ;">
<table class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="S3.T2.1.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S3.T2.1.1.1.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S3.T2.1.1.1.1.1"><span class="ltx_text ltx_font_bold" id="S3.T2.1.1.1.1.1.1">Method</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S3.T2.1.1.1.1.2"><span class="ltx_text ltx_font_bold" id="S3.T2.1.1.1.1.2.1">TheoremQA-Math</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S3.T2.1.1.2.1">
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T2.1.1.2.1.1">Standard</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T2.1.1.2.1.2">39.81</td>
</tr>
<tr class="ltx_tr" id="S3.T2.1.1.3.2">
<td class="ltx_td ltx_align_center" id="S3.T2.1.1.3.2.1">CoT</td>
<td class="ltx_td ltx_align_center" id="S3.T2.1.1.3.2.2">41.75</td>
</tr>
<tr class="ltx_tr" id="S3.T2.1.1.4.3">
<td class="ltx_td ltx_align_center" id="S3.T2.1.1.4.3.1">Reflexion</td>
<td class="ltx_td ltx_align_center" id="S3.T2.1.1.4.3.2">40.29</td>
</tr>
<tr class="ltx_tr" id="S3.T2.1.1.5.4">
<td class="ltx_td ltx_align_center" id="S3.T2.1.1.5.4.1">RAG</td>
<td class="ltx_td ltx_align_center" id="S3.T2.1.1.5.4.2">44.17</td>
</tr>
<tr class="ltx_tr" id="S3.T2.1.1.6.5">
<td class="ltx_td ltx_align_center" id="S3.T2.1.1.6.5.1">CoK</td>
<td class="ltx_td ltx_align_center" id="S3.T2.1.1.6.5.2">45.15</td>
</tr>
<tr class="ltx_tr" id="S3.T2.1.1.7.6">
<td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T2.1.1.7.6.1">CR-Planner</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T2.1.1.7.6.2"><span class="ltx_text ltx_font_bold" id="S3.T2.1.1.7.6.2.1">53.40</span></td>
</tr>
</tbody>
</table>
</span></div>
</figure>
<div class="ltx_para ltx_noindent" id="S3.SS3.SSS0.Px3.p1">
<p class="ltx_p" id="S3.SS3.SSS0.Px3.p1.1">Similar to competitive programming, as shown in Table <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S3.T2" title="Table 2 ‣ Results and observation. ‣ 3.3 Theorem-Driven Math Problems ‣ 3 Experiments ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_tag">2</span></a>, we observe a notable performance improvement from CR-Planner, with 13.59% on TheoremQA-Math compared to standard prompting method.
This further demonstrates the effectiveness of CR-Planner in tasks requiring knowledge retrieval and complex reasoning.
Furthermore, in contrast to their behavior in the USACO benchmark, retrieval methods, such as standard RAG and CoK, do enhance performance in this task.
We attribute this to the shorter context of the retrieved documents in the math domain. With shorter retrieved documents, the base model is easier to determine which information to incorporate or discard.
Nevertheless, CR-Planner maximizes the benefits of both retrieval and reasoning, leading to the greatest performance improvement.
</p>
</div>
</section>
</section>
<section class="ltx_subsection" id="S3.SS4">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.4 </span>Reasoning-Heavy Domain Retrieval</h3>
<section class="ltx_paragraph" id="S3.SS4.SSS0.Px1">
<h5 class="ltx_title ltx_title_paragraph">StackBio and StackEcon.</h5>
<figure class="ltx_table ltx_align_floatright" id="S3.T3">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table 3: </span>Results on complex domain retrieval.</figcaption>
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="S3.T3.1" style="width:127.2pt;height:73.6pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(-29.8pt,17.2pt) scale(0.681214705020697,0.681214705020697) ;">
<table class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="S3.T3.1.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S3.T3.1.1.1.1">
<th class="ltx_td ltx_th ltx_th_row ltx_border_tt" id="S3.T3.1.1.1.1.1"></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S3.T3.1.1.1.1.2"><span class="ltx_text ltx_font_bold" id="S3.T3.1.1.1.1.2.1">StackBio</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S3.T3.1.1.1.1.3"><span class="ltx_text ltx_font_bold" id="S3.T3.1.1.1.1.3.1">StackEcon</span></th>
</tr>
<tr class="ltx_tr" id="S3.T3.1.1.2.2">
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row" id="S3.T3.1.1.2.2.1"><span class="ltx_text ltx_font_bold" id="S3.T3.1.1.2.2.1.1">Method</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S3.T3.1.1.2.2.2"><span class="ltx_text ltx_font_bold" id="S3.T3.1.1.2.2.2.1">nDCG@10</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S3.T3.1.1.2.2.3"><span class="ltx_text ltx_font_bold" id="S3.T3.1.1.2.2.3.1">nDCG@10</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S3.T3.1.1.3.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" id="S3.T3.1.1.3.1.1">BM25</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T3.1.1.3.1.2">19.20</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T3.1.1.3.1.3">14.90</td>
</tr>
<tr class="ltx_tr" id="S3.T3.1.1.4.2">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="S3.T3.1.1.4.2.1">CoT</th>
<td class="ltx_td ltx_align_center" id="S3.T3.1.1.4.2.2">21.06</td>
<td class="ltx_td ltx_align_center" id="S3.T3.1.1.4.2.3">16.33</td>
</tr>
<tr class="ltx_tr" id="S3.T3.1.1.5.3">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="S3.T3.1.1.5.3.1">CoK</th>
<td class="ltx_td ltx_align_center" id="S3.T3.1.1.5.3.2">20.82</td>
<td class="ltx_td ltx_align_center" id="S3.T3.1.1.5.3.3">17.45</td>
</tr>
<tr class="ltx_tr" id="S3.T3.1.1.6.4">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_bb" id="S3.T3.1.1.6.4.1">CR-Planner</th>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T3.1.1.6.4.2"><span class="ltx_text ltx_font_bold" id="S3.T3.1.1.6.4.2.1">29.51</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T3.1.1.6.4.3"><span class="ltx_text ltx_font_bold" id="S3.T3.1.1.6.4.3.1">22.80</span></td>
</tr>
</tbody>
</table>
</span></div>
</figure>
<div class="ltx_para ltx_noindent" id="S3.SS4.SSS0.Px1.p1">
<p class="ltx_p" id="S3.SS4.SSS0.Px1.p1.1">Complex domain queries often demand in-depth reasoning to identify relevant documents that go beyond simple surface-level matching.
To evaluate models’ ability in reasoning-heavy domain retrieval, we use biology- and economics-related queries from the BRIGHT benchmark <cite class="ltx_cite ltx_citemacro_citep">(Su et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib30" title="">2024</a>)</cite>, specifically StackBio and StackEcon.
Both StackBio and StackEcon contain 103 questions sourced from StackExchange, with the gold labels being the documents cited in the answers.
As the evaluation metric is nDCG@10, which requires the top 10 documents, we set the number of retrieved documents to 10 when PC-Planner performs the final retrieval.</p>
</div>
</section>
<section class="ltx_paragraph" id="S3.SS4.SSS0.Px2">
<h5 class="ltx_title ltx_title_paragraph">External knowledge.</h5>
<div class="ltx_para ltx_noindent" id="S3.SS4.SSS0.Px2.p1">
<p class="ltx_p" id="S3.SS4.SSS0.Px2.p1.1">In line with the BRIGHT benchmark <cite class="ltx_cite ltx_citemacro_citep">(Su et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib30" title="">2024</a>)</cite>, external sources can include any accessible web content such as articles, tutorials, news, blogs, and reports.
Since this information has already been gathered and incorporated into the benchmark, we employ BM25 for document retrieval to ensure efficiency.</p>
</div>
</section>
<section class="ltx_paragraph" id="S3.SS4.SSS0.Px3">
<h5 class="ltx_title ltx_title_paragraph">Results and observations.</h5>
<div class="ltx_para ltx_noindent" id="S3.SS4.SSS0.Px3.p1">
<p class="ltx_p" id="S3.SS4.SSS0.Px3.p1.1">As shown in Table <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S3.T3" title="Table 3 ‣ StackBio and StackEcon. ‣ 3.4 Reasoning-Heavy Domain Retrieval ‣ 3 Experiments ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_tag">3</span></a>, CR-Planner consistently improves over the standard BM25 method by 10.31% and 7.9% on StackBio and StackEcon, respectively.
CoK improves the standard BM25 method, which indicates that reasoning before retrieval is crucial in such reasoning-heavy domain retrieval tasks.
However, CoK does not consistently enhance performance; for instance, it performs worse than CoT on StackBio.
We attribute this to the potential noise introduced by multiple suboptimal retrieval results.
These observations further highlight the effectiveness of the critic models in RC-Planner.

</p>
</div>
</section>
</section>
</section>
<section class="ltx_section" id="S4">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span>Analysis</h2>
<section class="ltx_subsection" id="S4.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.1 </span>Domain-Specific Critic Models</h3>
<figure class="ltx_figure ltx_align_floatright" id="S4.F3"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="161" id="S4.F3.1.g1" src="x3.png" width="266"/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure">Figure 3: </span>Performances of different critic models vs. baseline.
</figcaption>
</figure>
<div class="ltx_para ltx_noindent" id="S4.SS1.p1">
<p class="ltx_p" id="S4.SS1.p1.1">The critic models play a key role in CR-Planner by guiding the selection of sub-goals and executions through inference.
Previous works often adopt proprietary LLMs as critic models (<span class="ltx_text ltx_font_italic" id="S4.SS1.p1.1.1">e.g., </span>GPT-4 and Claude), utilizing in-context learning to evaluate actions <cite class="ltx_cite ltx_citemacro_citep">(Gou et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib7" title="">2024</a>; Zhao et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib38" title="">2024</a>)</cite>.
In this sub-section, we compare CR-Planner’s performance when using either fine-tuned models or GPT-4 (<span class="ltx_text ltx_font_typewriter" id="S4.SS1.p1.1.2">gpt-4o-2024-05-13</span>) as critics on the USACO and StackBio datasets.
The results are presented in Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S4.F3" title="Figure 3 ‣ 4.1 Domain-Specific Critic Models ‣ 4 Analysis ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_tag">3</span></a>.
Although employing GPT-4 as the critic yields improvements over the baseline, CR-Planner consistently performs better with fine-tuned critic models.
Notably, the fine-tuned critic models lead to larger gains in tasks that require domain knowledge, such as StackBio.
This underscores the significance of domain-specific fine-tuning and the rationale behind CR-Planner’s use of fine-tuned critic models.</p>
</div>
</section>
<section class="ltx_subsection" id="S4.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.2 </span>Flexibility of Critic Models on Various Base Models</h3>
<figure class="ltx_table ltx_align_floatleft" id="S4.T4">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table 4: </span>CR-Planner with various base models.</figcaption>
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="S4.T4.1" style="width:119.2pt;height:59.6pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(-30.4pt,15.2pt) scale(0.661969968656398,0.661969968656398) ;">
<table class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="S4.T4.1.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S4.T4.1.1.1.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T4.1.1.1.1.1"><span class="ltx_text ltx_font_bold" id="S4.T4.1.1.1.1.1.1">Method</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T4.1.1.1.1.2"><span class="ltx_text ltx_font_bold" id="S4.T4.1.1.1.1.2.1">USACO</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.T4.1.1.2.1">
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.1.1.2.1.1">Claude-3.5</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.1.1.2.1.2">9.12</td>
</tr>
<tr class="ltx_tr" id="S4.T4.1.1.3.2">
<td class="ltx_td ltx_align_center" id="S4.T4.1.1.3.2.1">CR-Planner w/ Claude-3.5</td>
<td class="ltx_td ltx_align_center" id="S4.T4.1.1.3.2.2">13.68</td>
</tr>
<tr class="ltx_tr" id="S4.T4.1.1.4.3">
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.1.1.4.3.1">Llama-3.1</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.1.1.4.3.2">7.49</td>
</tr>
<tr class="ltx_tr" id="S4.T4.1.1.5.4">
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T4.1.1.5.4.1">CR-Planner w/ Llama-3.1</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T4.1.1.5.4.2">10.10</td>
</tr>
</tbody>
</table>
</span></div>
</figure>
<div class="ltx_para ltx_noindent" id="S4.SS2.p1">
<p class="ltx_p" id="S4.SS2.p1.1">Compared to previous methods like Self-RAG <cite class="ltx_cite ltx_citemacro_citep">(Asai et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib1" title="">2024</a>)</cite>, CR-Planner does not require fine-tuning the base model.
This flexibility allows CR-Planner to be applied across various base models, whether open-source or closed-source.
In this subsection, we showcase the effectiveness of our critic models on another closed-source model, Claude-3.5 (<span class="ltx_text ltx_font_typewriter" id="S4.SS2.p1.1.1">claude-3-5-sonnet</span>), and an open-source model, Llama-3.1 (<span class="ltx_text ltx_font_typewriter" id="S4.SS2.p1.1.2">Llama-3.1-70B-Instruct</span>).
As demonstrated in Table <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S4.T4" title="Table 4 ‣ 4.2 Flexibility of Critic Models on Various Base Models ‣ 4 Analysis ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_tag">4</span></a>, CR-Planner enhances both Claude-3.5 and Llama-3.1.
However, the improvements, 4.56% for Claude-3.5 and 2.61% for Llama-3.1, are smaller compared to the 7.49% boost seen with GPT-4.
We believe this is due to the critic models being trained on data collected from GPT-4, making them more attuned to GPT-4 during inference and potentially less optimized for other models.
Nonetheless, the plug-and-play nature of critic models in our CR-Planner presents a promising approach to distill planning capabilities from powerful LLMs. This planning ability can be utilized to directly guide smaller LLMs, which lack the strength to generate high-quality MCTS trajectories on their own.</p>
</div>
</section>
<section class="ltx_subsection" id="S4.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.3 </span>Retrieve or Not to Retrieve</h3>
<figure class="ltx_table ltx_align_floatright" id="S4.T5">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table 5: </span>CR-Planner with and without retrieval.</figcaption>
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="S4.T5.1" style="width:119.2pt;height:48.3pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(-29.3pt,11.9pt) scale(0.670656993013024,0.670656993013024) ;">
<table class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="S4.T5.1.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S4.T5.1.1.1.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T5.1.1.1.1.1"><span class="ltx_text ltx_font_bold" id="S4.T5.1.1.1.1.1.1">Method</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T5.1.1.1.1.2"><span class="ltx_text ltx_font_bold" id="S4.T5.1.1.1.1.2.1">USACO</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.T5.1.1.2.1">
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T5.1.1.2.1.1">Standard</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T5.1.1.2.1.2">10.10</td>
</tr>
<tr class="ltx_tr" id="S4.T5.1.1.3.2">
<td class="ltx_td ltx_align_center" id="S4.T5.1.1.3.2.1">CR-Planner w/o Retrieval</td>
<td class="ltx_td ltx_align_center" id="S4.T5.1.1.3.2.2">14.33</td>
</tr>
<tr class="ltx_tr" id="S4.T5.1.1.4.3">
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T5.1.1.4.3.1">CR-Planner</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T5.1.1.4.3.2">17.59</td>
</tr>
</tbody>
</table>
</span></div>
</figure>
<div class="ltx_para ltx_noindent" id="S4.SS3.p1">
<p class="ltx_p" id="S4.SS3.p1.1">Tackling challenging domain-specific tasks such as competitive programming requires extensive reasoning as well as advanced algorithmic knowledge, which base models may not inherently possess.
In this section, we examine the importance of accurately retrieving external knowledge to assist in solving competitive programming problems.
We instruct the model to concentrate solely on reasoning, employing the reasoning critic model <math alttext="g^{g}_{\textsc{Reason}}" class="ltx_Math" display="inline" id="S4.SS3.p1.1.m1.1"><semantics id="S4.SS3.p1.1.m1.1a"><msubsup id="S4.SS3.p1.1.m1.1.1" xref="S4.SS3.p1.1.m1.1.1.cmml"><mi id="S4.SS3.p1.1.m1.1.1.2.2" xref="S4.SS3.p1.1.m1.1.1.2.2.cmml">g</mi><mtext class="ltx_font_smallcaps" id="S4.SS3.p1.1.m1.1.1.3" xref="S4.SS3.p1.1.m1.1.1.3a.cmml">Reason</mtext><mi id="S4.SS3.p1.1.m1.1.1.2.3" xref="S4.SS3.p1.1.m1.1.1.2.3.cmml">g</mi></msubsup><annotation-xml encoding="MathML-Content" id="S4.SS3.p1.1.m1.1b"><apply id="S4.SS3.p1.1.m1.1.1.cmml" xref="S4.SS3.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S4.SS3.p1.1.m1.1.1.1.cmml" xref="S4.SS3.p1.1.m1.1.1">subscript</csymbol><apply id="S4.SS3.p1.1.m1.1.1.2.cmml" xref="S4.SS3.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S4.SS3.p1.1.m1.1.1.2.1.cmml" xref="S4.SS3.p1.1.m1.1.1">superscript</csymbol><ci id="S4.SS3.p1.1.m1.1.1.2.2.cmml" xref="S4.SS3.p1.1.m1.1.1.2.2">𝑔</ci><ci id="S4.SS3.p1.1.m1.1.1.2.3.cmml" xref="S4.SS3.p1.1.m1.1.1.2.3">𝑔</ci></apply><ci id="S4.SS3.p1.1.m1.1.1.3a.cmml" xref="S4.SS3.p1.1.m1.1.1.3"><mtext class="ltx_font_smallcaps" id="S4.SS3.p1.1.m1.1.1.3.cmml" mathsize="70%" xref="S4.SS3.p1.1.m1.1.1.3">Reason</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p1.1.m1.1c">g^{g}_{\textsc{Reason}}</annotation><annotation encoding="application/x-llamapun" id="S4.SS3.p1.1.m1.1d">italic_g start_POSTSUPERSCRIPT italic_g end_POSTSUPERSCRIPT start_POSTSUBSCRIPT Reason end_POSTSUBSCRIPT</annotation></semantics></math> to select a rationale for each reasoning step.
As shown in Table <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S4.T5" title="Table 5 ‣ 4.3 Retrieve or Not to Retrieve ‣ 4 Analysis ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_tag">5</span></a>, the performance without retrieval is lower. However, as discussed in Section <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S3.SS2" title="3.2 Competitive Programming ‣ 3 Experiments ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_tag">3.2</span></a> and by <cite class="ltx_cite ltx_citemacro_citet">Shi et al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib26" title="">2024</a>)</cite>, inaccurate retrieval could impair performance. This emphasizes the critical role of accurate retrieval and the overall effectiveness of CR-Planner.</p>
</div>
</section>
<section class="ltx_subsection" id="S4.SS4">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.4 </span>Execution Sampling</h3>
<figure class="ltx_figure ltx_align_floatright" id="S4.F4"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="151" id="S4.F4.1.g1" src="x4.png" width="266"/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure">Figure 4: </span>Performances of various execution sampling.
</figcaption>
</figure>
<div class="ltx_para ltx_noindent" id="S4.SS4.p1">
<p class="ltx_p" id="S4.SS4.p1.1">Throughout both the training and inference phases of CR-Planner, executing sub-goals involves sampling several possible candidates.
By increasing the number of candidates, the likelihood of identifying a better option may improve.
In this subsection, we study how changing the number of candidates sampled for sub-goal execution during inference affects performance.
However, due to cost concerns, we do not conduct ablation studies for the training phase.
As illustrated in Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#S4.F4" title="Figure 4 ‣ 4.4 Execution Sampling ‣ 4 Analysis ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_tag">4</span></a>, the improvements on USACO are substantial when increasing from one to two, but converge around three. We believe this is due to the limitations of the generator model’s reasoning capabilities and the retriever’s accuracy. Without fine-tuning both generator and retriever models,
further performance gains would be challenging to achieve.
Therefore, to balance between performance and cost, we select three as the sampling number for the inference of main experiments.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S5">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">5 </span>Related Work</h2>
<div class="ltx_para ltx_noindent" id="S5.p1">
<p class="ltx_p" id="S5.p1.1">LLMs have demonstrated inherent reasoning capabilities, showing promising performance in most logical reasoning datasets <cite class="ltx_cite ltx_citemacro_citep">(Liu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib20" title="">2023</a>; Qin et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib24" title="">2023</a>)</cite>. However, using standard LLMs directly often fall short in complex reasoning tasks that require structured thinking or planning <cite class="ltx_cite ltx_citemacro_citep">(Huang &amp; Chang, <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib10" title="">2023</a>)</cite>. Therefore, researchers have been attempting to develop more sophisticated reasoning schemes.
Chain-of-Thought (CoT) prompting <cite class="ltx_cite ltx_citemacro_citep">(Wei et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib31" title="">2022</a>)</cite> prompts LLMs to articulate the reasoning processes step by step, improving reasoning performances on complex tasks. Tree-of-Thought <cite class="ltx_cite ltx_citemacro_citep">(Yao et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib33" title="">2023a</a>)</cite> then generalizes further by breaking down a CoT into coherent units of “thoughts”, thus enabling the LLM to consider multiple reasoning paths and self-evaluate to decide the next course of action.</p>
</div>
<div class="ltx_para ltx_noindent" id="S5.p2">
<p class="ltx_p" id="S5.p2.1">To further improve LLMs in planning-based reasoning, research finds that process supervision shows a promising way forward.
RAP <cite class="ltx_cite ltx_citemacro_citep">(Lightman et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib18" title="">2024</a>)</cite> uses a world model to estimate future rewards of reasoning steps, providing step-wise guidance for reasoning processes.
<cite class="ltx_cite ltx_citemacro_citet">Jiao et al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib14" title="">2024</a>)</cite> learns planning-based reasoning through direct preference optimization (DPO) <cite class="ltx_cite ltx_citemacro_citep">(Rafailov et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib25" title="">2023</a>)</cite> on collected trajectories, which are ranked according to synthesized process rewards. As a result, tuned 7B models can surpass GPT-3.5-Turbo.
However, this method requires training the base model, which limits its applicability to larger and closed-source models. In comparison, CR-Planner trains external critic models, which offers flexibility for use with any base model.</p>
</div>
<div class="ltx_para ltx_noindent" id="S5.p3">
<p class="ltx_p" id="S5.p3.1">Besides reasoning improvements, retrieval augmented generation (RAG) can effectively reduce hallucinations <cite class="ltx_cite ltx_citemacro_citep">(Huang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib11" title="">2023</a>)</cite> by introducing external knowledge.
Specifically, the RAG process can be divided into 3 sub-tasks: pre-retrieval analysis, query generation and rewriting, and document selection. Currently, most methods attempt to optimize the subtasks seperately. Self-ask <cite class="ltx_cite ltx_citemacro_citep">(Press et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib23" title="">2023</a>)</cite> optimizes pre-retrieval analysis by breaking down the original problem into sub-problems. Chain of Knowledge <cite class="ltx_cite ltx_citemacro_citep">(Li et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib17" title="">2024</a>)</cite> rewrites natural-language questions to database queries for more precise retrieval with structured knowledge. RePlug <cite class="ltx_cite ltx_citemacro_citep">(Shi et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#bib.bib27" title="">2023</a>)</cite> improves document selection with a fine-tuned retriever.
As these methods optimize sub-tasks locally, the single-task improvements may not constitute the globally optimal solution. In comparison, CR-Planner trains the critic model by learning the rewards of each individual action for overall performance.</p>
</div>
</section>
<section class="ltx_section" id="S6">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">6 </span>Conclusions</h2>
<div class="ltx_para ltx_noindent" id="S6.p1">
<p class="ltx_p" id="S6.p1.1">In this paper, we present critic-guided planning with retrieval-augmentation (CR-Planner), a novel framework for handling domain-knowledge-specific and reasoning-heavy tasks by leveraging fine-tuned critic models to guide both the reasoning and retrieval processes.
We further employ the Monte Carlo Tree Search for systematic data collection to enhance the training of the critic models.
Our approach, validated across challenging domains like competitive programming, math reasoning, and complex domain retrieval tasks, has shown substantial performance improvements over existing methods.
By combining the strengths of large generalist models with domain-specific fine-tuned critics, CR-Planner offers a flexible and scalable solution for solving problems that require both intricate reasoning and accurate knowledge retrieval.</p>
</div>
</section>
<section class="ltx_bibliography" id="bib">
<h2 class="ltx_title ltx_title_bibliography">References</h2>
<ul class="ltx_biblist">
<li class="ltx_bibitem" id="bib.bib1">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Asai et al. (2024)</span>
<span class="ltx_bibblock">
Akari Asai, Zeqiu Wu, Yizhong Wang, Avirup Sil, and Hannaneh Hajishirzi.

</span>
<span class="ltx_bibblock">Self-rag: Learning to retrieve, generate, and critique through self-reflection.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib1.1.1">Proceedings of ICLR</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib2">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Browne et al. (2012)</span>
<span class="ltx_bibblock">
Cameron Browne, Edward Powley, Daniel Whitehouse, Simon Lucas, Peter Cowling, Philipp Rohlfshagen, Stephen Tavener, Diego Perez, Spyridon Samothrakis, and Simon Colton.

</span>
<span class="ltx_bibblock">A survey of monte carlo tree search methods.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib2.1.1">IEEE Transactions on Computational Intelligence and AI in Games</em>, 2012.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib3">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Burges et al. (2005)</span>
<span class="ltx_bibblock">
Chris Burges, Tal Shaked, Erin Renshaw, Ari Lazier, Matt Deeds, Nicole Hamilton, and Greg Hullender.

</span>
<span class="ltx_bibblock">Learning to rank using gradient descent.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib3.1.1">Proceedings of ICML</em>, 2005.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib4">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Chen et al. (2023)</span>
<span class="ltx_bibblock">
Wenhu Chen, Ming Yin, Max Ku, Pan Lu, Yixin Wan, Xueguang Ma, Jianyu Xu, Xinyi Wang, and Tony Xia.

</span>
<span class="ltx_bibblock">Theoremqa: A theorem-driven question answering dataset.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib4.1.1">Proceedings of EMNLP</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib5">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Cheng et al. (2023)</span>
<span class="ltx_bibblock">
Liying Cheng, Xingxuan Li, and Lidong Bing.

</span>
<span class="ltx_bibblock">Is gpt-4 a good data analyst?

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib5.1.1">arXiv preprint arXiv:2305.15038</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib6">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Cobbe et al. (2021)</span>
<span class="ltx_bibblock">
Karl Cobbe, Vineet Kosaraju, Mohammad Bavarian, Mark Chen, Heewoo Jun, Lukasz Kaiser, Matthias Plappert, Jerry Tworek, Jacob Hilton, Reiichiro Nakano, Christopher Hesse, and John Schulman.

</span>
<span class="ltx_bibblock">Training verifiers to solve math word problems.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib6.1.1">arXiv preprint arXiv:2110.14168</em>, 2021.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib7">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Gou et al. (2024)</span>
<span class="ltx_bibblock">
Zhibin Gou, Zhihong Shao, Yeyun Gong, Yelong Shen, Yujiu Yang, Nan Duan, and Weizhu Chen.

</span>
<span class="ltx_bibblock">Critic: Large language models can self-correct with tool-interactive critiquing.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib7.1.1">Proceedings of ICLR</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib8">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Hendrycks et al. (2021)</span>
<span class="ltx_bibblock">
Dan Hendrycks, Collin Burns, Saurav Kadavath, Akul Arora, Steven Basart, Eric Tang, Dawn Song, and Jacob Steinhardt.

</span>
<span class="ltx_bibblock">Measuring mathematical problem solving with the math dataset.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib8.1.1">arXiv preprint arXiv:2103.03874</em>, 2021.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib9">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Hu et al. (2021)</span>
<span class="ltx_bibblock">
Edward J. Hu, Yelong Shen, Phillip Wallis, Zeyuan Allen-Zhu, Yuanzhi Li, Shean Wang, Lu Wang, and Weizhu Chen.

</span>
<span class="ltx_bibblock">Lora: Low-rank adaptation of large language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib9.1.1">arXiv preprint arXiv:2106.09685</em>, 2021.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib10">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Huang &amp; Chang (2023)</span>
<span class="ltx_bibblock">
Jie Huang and Kevin Chen-Chuan Chang.

</span>
<span class="ltx_bibblock">Towards reasoning in large language models: A survey.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib10.1.1">Proceedings of ACL</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib11">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Huang et al. (2023)</span>
<span class="ltx_bibblock">
Lei Huang, Weijiang Yu, Weitao Ma, Weihong Zhong, Zhangyin Feng, Haotian Wang, Qianglong Chen, Weihua Peng, Xiaocheng Feng, Bing Qin, and Ting Liu.

</span>
<span class="ltx_bibblock">A survey on hallucination in large language models: Principles, taxonomy, challenges, and open questions.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib11.1.1">arXiv preprint arXiv:2311.05232</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib12">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Huang et al. (2024)</span>
<span class="ltx_bibblock">
Zhen Huang, Zengzhi Wang, Shijie Xia, Xuefeng Li, Haoyang Zou, Ruijie Xu, Run-Ze Fan, Lyumanshan Ye, Ethan Chern, Yixin Ye, Yikai Zhang, Yuqing Yang, Ting Wu, Binjie Wang, Shichao Sun, Yang Xiao, Yiyuan Li, Fan Zhou, Steffi Chern, Yiwei Qin, Yan Ma, Jiadi Su, Yixiu Liu, Yuxiang Zheng, Shaoting Zhang, Dahua Lin, Yu Qiao, and Pengfei Liu.

</span>
<span class="ltx_bibblock">Olympicarena: Benchmarking multi-discipline cognitive reasoning for superintelligent ai.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib12.1.1">arXiv preprint arXiv:2406.12753</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib13">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Islam et al. (2024)</span>
<span class="ltx_bibblock">
Shayekh Islam, Md Rahman, K Hossain, Enamul Hoque, Shafiq Joty, and Md Parvez.

</span>
<span class="ltx_bibblock">Open-RAG: Enhanced Retrieval Augmented Reasoning with Open-Source Large Language Models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib13.1.1">Findings of EMNLP</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib14">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Jiao et al. (2024)</span>
<span class="ltx_bibblock">
Fangkai Jiao, Chengwei Qin, Zhengyuan Liu, Nancy F. Chen, and Shafiq Joty.

</span>
<span class="ltx_bibblock">Learning planning-based reasoning by trajectories collection and process reward synthesizing.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib14.1.1">Proceedings of EMNLP</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib15">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lewis et al. (2020)</span>
<span class="ltx_bibblock">
Patrick Lewis, Ethan Perez, Aleksandra Piktus, Fabio Petroni, Vladimir Karpukhin, Naman Goyal, Heinrich Küttler, Mike Lewis, Wen-tau Yih, Tim Rocktäschel, Sebastian Riedel, and Douwe Kiela.

</span>
<span class="ltx_bibblock">Retrieval-augmented generation for knowledge-intensive nlp tasks.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib15.1.1">Proceedings of NIPS</em>, 2020.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib16">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Li et al. (2023)</span>
<span class="ltx_bibblock">
Guohao Li, Hasan Abed Al Kader Hammoud, Hani Itani, Dmitrii Khizbullin, and Bernard Ghanem.

</span>
<span class="ltx_bibblock">Camel: Communicative agents for ”mind” exploration of large language model society.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib16.1.1">arXiv preprint arXiv:2303.17760</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib17">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Li et al. (2024)</span>
<span class="ltx_bibblock">
Xingxuan Li, Ruochen Zhao, Yew Ken Chia, Bosheng Ding, Shafiq Joty, Soujanya Poria, and Lidong Bing.

</span>
<span class="ltx_bibblock">Chain-of-knowledge: Grounding large language models via dynamic knowledge adapting over heterogeneous sources.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib17.1.1">Proceedings of ICLR</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib18">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lightman et al. (2024)</span>
<span class="ltx_bibblock">
Hunter Lightman, Vineet Kosaraju, Yuri Burda, Harrison Edwards, Bowen Baker, Teddy Lee, Jan Leike, John Schulman, Ilya Sutskever, and Karl Cobbe.

</span>
<span class="ltx_bibblock">Let’s verify step by step.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib18.1.1">Proceedings of ICLR</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib19">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ling et al. (2017)</span>
<span class="ltx_bibblock">
Wang Ling, Dani Yogatama, Chris Dyer, and Phil Blunsom.

</span>
<span class="ltx_bibblock">Program induction by rationale generation: Learning to solve and explain algebraic word problems.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib19.1.1">Proceedings of ACL</em>, 2017.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib20">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Liu et al. (2023)</span>
<span class="ltx_bibblock">
Hanmeng Liu, Ruoxi Ning, Zhiyang Teng, Jian Liu, Qiji Zhou, and Yue Zhang.

</span>
<span class="ltx_bibblock">Evaluating the logical reasoning ability of chatgpt and gpt-4.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib20.1.1">arXiv preprint arXiv:2304.03439</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib21">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">OpenAI (2023)</span>
<span class="ltx_bibblock">
OpenAI.

</span>
<span class="ltx_bibblock">Gpt-4 technical report.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib21.1.1">arXiv preprint arXiv:2303.08774</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib22">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ouyang et al. (2022)</span>
<span class="ltx_bibblock">
Long Ouyang, Jeff Wu, Xu Jiang, Diogo Almeida, Carroll L. Wainwright, Pamela Mishkin, Chong Zhang, Sandhini Agarwal, Katarina Slama, Alex Ray, John Schulman, Jacob Hilton, Fraser Kelton, Luke Miller, Maddie Simens, Amanda Askell, Peter Welinder, Paul Christiano, Jan Leike, and Ryan Lowe.

</span>
<span class="ltx_bibblock">Training language models to follow instructions with human feedback.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib22.1.1">arXiv preprint arXiv:2203.02155</em>, 2022.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib23">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Press et al. (2023)</span>
<span class="ltx_bibblock">
Ofir Press, Muru Zhang, Sewon Min, Ludwig Schmidt, Noah A. Smith, and Mike Lewis.

</span>
<span class="ltx_bibblock">Measuring and narrowing the compositionality gap in language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib23.1.1">arXiv preprint arXiv:2210.03350</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib24">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Qin et al. (2023)</span>
<span class="ltx_bibblock">
Chengwei Qin, Aston Zhang, Zhuosheng Zhang, Jiaao Chen, Michihiro Yasunaga, and Diyi Yang.

</span>
<span class="ltx_bibblock">Is ChatGPT a general-purpose natural language processing task solver?

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib24.1.1">Proceedings of EMNLP</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib25">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Rafailov et al. (2023)</span>
<span class="ltx_bibblock">
Rafael Rafailov, Archit Sharma, Eric Mitchell, Christopher D Manning, Stefano Ermon, and Chelsea Finn.

</span>
<span class="ltx_bibblock">Direct preference optimization: Your language model is secretly a reward model.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib25.1.1">Proceedings of NIPS</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib26">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Shi et al. (2024)</span>
<span class="ltx_bibblock">
Quan Shi, Michael Tang, Karthik Narasimhan, and Shunyu Yao.

</span>
<span class="ltx_bibblock">Can language models solve olympiad programming?

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib26.1.1">arXiv preprint arXiv:2404.10952</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib27">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Shi et al. (2023)</span>
<span class="ltx_bibblock">
Weijia Shi, Sewon Min, Michihiro Yasunaga, Minjoon Seo, Rich James, Mike Lewis, Luke Zettlemoyer, and Wen tau Yih.

</span>
<span class="ltx_bibblock">Replug: Retrieval-augmented black-box language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib27.1.1">arXiv preprint arXiv:2301.12652</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib28">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Shinn et al. (2023)</span>
<span class="ltx_bibblock">
Noah Shinn, Federico Cassano, Edward Berman, Ashwin Gopinath, Karthik Narasimhan, and Shunyu Yao.

</span>
<span class="ltx_bibblock">Reflexion: Language agents with verbal reinforcement learning.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib28.1.1">arXiv preprint arXiv:2303.11366</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib29">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Skywork (2024)</span>
<span class="ltx_bibblock">
Skywork.

</span>
<span class="ltx_bibblock">Skywork reward model series.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib29.1.1">HuggingFace</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib30">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Su et al. (2024)</span>
<span class="ltx_bibblock">
Hongjin Su, Howard Yen, Mengzhou Xia, Weijia Shi, Niklas Muennighoff, Han yu Wang, Haisu Liu, Quan Shi, Zachary S. Siegel, Michael Tang, Ruoxi Sun, Jinsung Yoon, Sercan O. Arik, Danqi Chen, and Tao Yu.

</span>
<span class="ltx_bibblock">Bright: A realistic and challenging benchmark for reasoning-intensive retrieval.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib30.1.1">arXiv preprint arXiv:2407.12883</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib31">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wei et al. (2022)</span>
<span class="ltx_bibblock">
Jason Wei, Xuezhi Wang, Dale Schuurmans, Maarten Bosma, Brian Ichter, Fei Xia, Ed Chi, Quoc Le, and Denny Zhou.

</span>
<span class="ltx_bibblock">Chain-of-thought prompting elicits reasoning in large language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib31.1.1">Proceedings of NIPS</em>, 2022.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib32">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yan et al. (2024)</span>
<span class="ltx_bibblock">
Shi-Qi Yan, Jia-Chen Gu, Yun Zhu, and Zhen-Hua Ling.

</span>
<span class="ltx_bibblock">Corrective Retrieval Augmented Generation.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib32.1.1">arXiv preprint arXiv:2401.15884</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib33">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yao et al. (2023a)</span>
<span class="ltx_bibblock">
Shunyu Yao, Dian Yu, Jeffrey Zhao, Izhak Shafran, Thomas L. Griffiths, Yuan Cao, and Karthik R Narasimhan.

</span>
<span class="ltx_bibblock">Tree of thoughts: Deliberate problem solving with large language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib33.1.1">Proceedings of NIPS</em>, 2023a.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib34">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yao et al. (2023b)</span>
<span class="ltx_bibblock">
Shunyu Yao, Jeffrey Zhao, Dian Yu, Nan Du, Izhak Shafran, Karthik Narasimhan, and Yuan Cao.

</span>
<span class="ltx_bibblock">React: Synergizing reasoning and acting in language models.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib34.1.1">Proceedings of ICLR</em>, 2023b.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib35">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yuan et al. (2023)</span>
<span class="ltx_bibblock">
Zheng Yuan, Hongyi Yuan, Chengpeng Li, Guanting Dong, Keming Lu, Chuanqi Tan, Chang Zhou, and Jingren Zhou.

</span>
<span class="ltx_bibblock">Scaling relationship on learning mathematical reasoning with large language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib35.1.1">arXiv preprint arXiv:2308.01825</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib36">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhao et al. (2023a)</span>
<span class="ltx_bibblock">
Ruochen Zhao, Xingxuan Li, Yew Ken Chia, Bosheng Ding, and Lidong Bing.

</span>
<span class="ltx_bibblock">Can chatgpt-like generative models guarantee factual accuracy? on the mistakes of new generation search engines.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib36.1.1">arXiv preprint arXiv:2304.11076</em>, 2023a.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib37">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhao et al. (2023b)</span>
<span class="ltx_bibblock">
Ruochen Zhao, Xingxuan Li, Shafiq Joty, Chengwei Qin, and Lidong Bing.

</span>
<span class="ltx_bibblock">Verify-and-edit: A knowledge-enhanced chain-of-thought framework.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib37.1.1">Proceedings of ACL</em>, 2023b.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib38">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhao et al. (2024)</span>
<span class="ltx_bibblock">
Ruochen Zhao, Wenxuan Zhang, Yew Ken Chia, Deli Zhao, and Lidong Bing.

</span>
<span class="ltx_bibblock">Auto arena of llms: Automating llm evaluations with agent peer-battles and committee discussions.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib38.1.1">arXiv preprint arXiv:2405.20267</em>, 2024.

</span>
</li>
</ul>
</section>
<div class="ltx_pagination ltx_role_newpage"></div>
<section class="ltx_appendix" id="A1">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix A </span>Prompts Used in Different Methods</h2>
<section class="ltx_subsection" id="A1.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.1 </span>RC-Planner (Competitive Programming)</h3>
<section class="ltx_subsubsection" id="A1.SS1.SSS1">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">A.1.1 </span>Instruction</h4>
<div class="ltx_para ltx_noindent" id="A1.SS1.SSS1.p1">
<p class="ltx_p" id="A1.SS1.SSS1.p1.1">Reason through the problem and think step by step. Specifically:
<br class="ltx_break"/>1. Restate the problem in plain English.
<br class="ltx_break"/>2. Conceptualize a solution first in plain English.
<br class="ltx_break"/>3. Write a pseudocode solution
<br class="ltx_break"/>4. Output the Python 3 solution to the problem. Make sure to wrap your code in “‘python and ”’ Markdown delimiters, and include exactly one block of code with the entire solution.
<br class="ltx_break"/>No outside libraries are allowed.</p>
</div>
<div class="ltx_para ltx_noindent" id="A1.SS1.SSS1.p2">
<p class="ltx_p" id="A1.SS1.SSS1.p2.1">[BEGIN PROBLEM]
<br class="ltx_break"/></p>
</div>
<div class="ltx_para ltx_noindent" id="A1.SS1.SSS1.p3">
<p class="ltx_p" id="A1.SS1.SSS1.p3.1">[END PROBLEM]</p>
</div>
</section>
<section class="ltx_subsubsection" id="A1.SS1.SSS2">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">A.1.2 </span>SubGoal Selection</h4>
<div class="ltx_para ltx_noindent" id="A1.SS1.SSS2.p1">
<p class="ltx_p" id="A1.SS1.SSS2.p1.1">To proceed, below are the available actions:</p>
</div>
<div class="ltx_para ltx_noindent" id="A1.SS1.SSS2.p2">
<p class="ltx_p" id="A1.SS1.SSS2.p2.1">[REASON] - Provide a reasoning step.</p>
</div>
<div class="ltx_para ltx_noindent" id="A1.SS1.SSS2.p3">
<p class="ltx_p" id="A1.SS1.SSS2.p3.1">[GENQUERY] - Generate a query to retrieve information from external knowledge sources.</p>
</div>
<div class="ltx_para ltx_noindent" id="A1.SS1.SSS2.p4">
<p class="ltx_p" id="A1.SS1.SSS2.p4.1">[RETRIEVE] - Retrieve documents using the query.</p>
</div>
<div class="ltx_para ltx_noindent" id="A1.SS1.SSS2.p5">
<p class="ltx_p" id="A1.SS1.SSS2.p5.1">The next step is [].</p>
</div>
</section>
<section class="ltx_subsubsection" id="A1.SS1.SSS3">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">A.1.3 </span>Execution Selection - Rationale Sampling</h4>
<div class="ltx_para ltx_noindent" id="A1.SS1.SSS3.p1">
<p class="ltx_p" id="A1.SS1.SSS3.p1.1">Reason through the problem and think step by step. Specifically:
<br class="ltx_break"/>1. Restate the problem in plain English.
<br class="ltx_break"/>2. Conceptualize a solution first in plain English.
<br class="ltx_break"/>3. Write a pseudocode solution
<br class="ltx_break"/>4. Output the Python 3 solution to the problem. Make sure to wrap your code in “‘python and ”’ Markdown delimiters, and include exactly one block of code with the entire solution.
<br class="ltx_break"/>No outside libraries are allowed.</p>
</div>
<div class="ltx_para ltx_noindent" id="A1.SS1.SSS3.p2">
<p class="ltx_p" id="A1.SS1.SSS3.p2.1">[BEGIN PROBLEM]
<br class="ltx_break"/></p>
</div>
<div class="ltx_para ltx_noindent" id="A1.SS1.SSS3.p3">
<p class="ltx_p" id="A1.SS1.SSS3.p3.1">[END PROBLEM]</p>
</div>
<div class="ltx_para ltx_noindent" id="A1.SS1.SSS3.p4">
<p class="ltx_p" id="A1.SS1.SSS3.p4.1">Generate one next reasoning step (<span class="ltx_text ltx_font_italic" id="A1.SS1.SSS3.p4.1.1">e.g., </span>[BEGIN REASON] Restate the problem: … [END REASON]). It starts with [BEGIN REASON] and ends with [END REASON]. Do not include the subsequent reasoning steps.</p>
</div>
</section>
<section class="ltx_subsubsection" id="A1.SS1.SSS4">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">A.1.4 </span>Execution Selection - Query Sampling</h4>
<div class="ltx_para ltx_noindent" id="A1.SS1.SSS4.p1">
<p class="ltx_p" id="A1.SS1.SSS4.p1.1">To verify or solve the reasoning step, I need additional information from external knowledge sources (<span class="ltx_text ltx_font_italic" id="A1.SS1.SSS4.p1.1.1">e.g., </span>textbook). And I need to generate a query to get that information. The query needs to be conceptual but relevant to the reasoning step. The query should not contain any specific numbers or entities of the reasoning step. The query starts with [BEGIN QUERY] and ends with [END QUERY]. Stop the generation when the query is completed.</p>
</div>
<div class="ltx_para ltx_noindent" id="A1.SS1.SSS4.p2">
<p class="ltx_p" id="A1.SS1.SSS4.p2.1">[BEGIN REASON]
<br class="ltx_break"/></p>
</div>
<div class="ltx_para ltx_noindent" id="A1.SS1.SSS4.p3">
<p class="ltx_p" id="A1.SS1.SSS4.p3.1">[END REASON]</p>
</div>
</section>
</section>
<section class="ltx_subsection" id="A1.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.2 </span>CoT</h3>
<div class="ltx_para ltx_noindent" id="A1.SS2.p1">
<p class="ltx_p" id="A1.SS2.p1.1">Reason through the problem and think step by step. Specifically:
<br class="ltx_break"/>1. Restate the problem in plain English.
<br class="ltx_break"/>2. Conceptualize a solution first in plain English.
<br class="ltx_break"/>3. Write a pseudocode solution
<br class="ltx_break"/>4. Output the Python 3 solution to the problem. Make sure to wrap your code in “‘python and ”’ Markdown delimiters, and include exactly one block of code with the entire solution.
<br class="ltx_break"/>No outside libraries are allowed.</p>
</div>
<div class="ltx_para ltx_noindent" id="A1.SS2.p2">
<p class="ltx_p" id="A1.SS2.p2.1">[BEGIN PROBLEM]
<br class="ltx_break"/></p>
</div>
<div class="ltx_para ltx_noindent" id="A1.SS2.p3">
<p class="ltx_p" id="A1.SS2.p3.1">[END PROBLEM]</p>
</div>
</section>
<section class="ltx_subsection" id="A1.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.3 </span>Chain-of-Knowledge</h3>
<section class="ltx_subsubsection" id="A1.SS3.SSS1">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">A.3.1 </span>Reasoning Generation</h4>
<div class="ltx_para ltx_noindent" id="A1.SS3.SSS1.p1">
<p class="ltx_p" id="A1.SS3.SSS1.p1.1">Reason through the problem and think step by step. Specifically:
<br class="ltx_break"/>1. Restate the problem in plain English.
<br class="ltx_break"/>2. Conceptualize a solution first in plain English.
<br class="ltx_break"/>3. Write a pseudocode solution
<br class="ltx_break"/>4. Output the Python 3 solution to the problem. Make sure to wrap your code in “‘python and ”’ Markdown delimiters, and include exactly one block of code with the entire solution.
<br class="ltx_break"/>No outside libraries are allowed.</p>
</div>
<div class="ltx_para ltx_noindent" id="A1.SS3.SSS1.p2">
<p class="ltx_p" id="A1.SS3.SSS1.p2.1">[BEGIN PROBLEM]
<br class="ltx_break"/></p>
</div>
<div class="ltx_para ltx_noindent" id="A1.SS3.SSS1.p3">
<p class="ltx_p" id="A1.SS3.SSS1.p3.1">[END PROBLEM]</p>
</div>
</section>
<section class="ltx_subsubsection" id="A1.SS3.SSS2">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">A.3.2 </span>Rationale Correction</h4>
<div class="ltx_para ltx_noindent" id="A1.SS3.SSS2.p1">
<p class="ltx_p" id="A1.SS3.SSS2.p1.1">The given sentence may have errors, please correct them based on the given external knowledge.</p>
</div>
<div class="ltx_para ltx_noindent" id="A1.SS3.SSS2.p2">
<p class="ltx_p" id="A1.SS3.SSS2.p2.1">Sentence: [Rationale]
<br class="ltx_break"/>Knowledge: [Knowledge]
<br class="ltx_break"/>Edited sentence:</p>
</div>
</section>
<section class="ltx_subsubsection" id="A1.SS3.SSS3">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">A.3.3 </span>Next Rationale Generation</h4>
<div class="ltx_para ltx_noindent" id="A1.SS3.SSS3.p1">
<p class="ltx_p" id="A1.SS3.SSS3.p1.1">Reason through the problem and think step by step. Specifically:
<br class="ltx_break"/>1. Restate the problem in plain English.
<br class="ltx_break"/>2. Conceptualize a solution first in plain English.
<br class="ltx_break"/>3. Write a pseudocode solution
<br class="ltx_break"/>4. Output the Python 3 solution to the problem. Make sure to wrap your code in “‘python and ”’ Markdown delimiters, and include exactly one block of code with the entire solution.
<br class="ltx_break"/>No outside libraries are allowed.</p>
</div>
<div class="ltx_para ltx_noindent" id="A1.SS3.SSS3.p2">
<p class="ltx_p" id="A1.SS3.SSS3.p2.1">[BEGIN PROBLEM]
<br class="ltx_break"/></p>
</div>
<div class="ltx_para ltx_noindent" id="A1.SS3.SSS3.p3">
<p class="ltx_p" id="A1.SS3.SSS3.p3.1">[END PROBLEM]
<br class="ltx_break"/></p>
</div>
<div class="ltx_para ltx_noindent" id="A1.SS3.SSS3.p4">
<p class="ltx_p" id="A1.SS3.SSS3.p4.1">[START PRECEDING RATIONALES]
<br class="ltx_break"/></p>
</div>
<div class="ltx_para ltx_noindent" id="A1.SS3.SSS3.p5">
<p class="ltx_p" id="A1.SS3.SSS3.p5.1">[END PRECEDING RATIONALES]</p>
</div>
</section>
</section>
<section class="ltx_subsection" id="A1.SS4">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.4 </span>Reflexion</h3>
<section class="ltx_subsubsection" id="A1.SS4.SSS1">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">A.4.1 </span>Actor</h4>
<div class="ltx_para ltx_noindent" id="A1.SS4.SSS1.p1">
<p class="ltx_p" id="A1.SS4.SSS1.p1.1">You are a Python writing assistant. You will be given your previous implementation of a function, a series of unit tests results, and your self-reflection on your previous implementation. Apply the necessary changes below by responding only with the improved body of the function. Do not include the signature in your response. The first line of your response should have 4 spaces of indentation so that it fits syntactically with the user provided signature.</p>
</div>
<div class="ltx_para ltx_noindent" id="A1.SS4.SSS1.p2">
<p class="ltx_p" id="A1.SS4.SSS1.p2.1">Reflexion Actor generations follow the form:</p>
</div>
<div class="ltx_para ltx_noindent" id="A1.SS4.SSS1.p3">
<p class="ltx_p" id="A1.SS4.SSS1.p3.1">[Instruction]</p>
</div>
<div class="ltx_para ltx_noindent" id="A1.SS4.SSS1.p4">
<p class="ltx_p" id="A1.SS4.SSS1.p4.1">[Function implementation]</p>
</div>
<div class="ltx_para ltx_noindent" id="A1.SS4.SSS1.p5">
<p class="ltx_p" id="A1.SS4.SSS1.p5.1">[Unit test feedback]</p>
</div>
<div class="ltx_para ltx_noindent" id="A1.SS4.SSS1.p6">
<p class="ltx_p" id="A1.SS4.SSS1.p6.1">[Self-reflection]</p>
</div>
<div class="ltx_para ltx_noindent" id="A1.SS4.SSS1.p7">
<p class="ltx_p" id="A1.SS4.SSS1.p7.1">[Instruction for next function implementation]</p>
</div>
</section>
<section class="ltx_subsubsection" id="A1.SS4.SSS2">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">A.4.2 </span>Self-Reflection</h4>
<div class="ltx_para ltx_noindent" id="A1.SS4.SSS2.p1">
<p class="ltx_p" id="A1.SS4.SSS2.p1.1">You are a Python writing assistant. You will be given your previous implementation of a function, a series of unit tests results, and your self-reflection on your previous implementation. Apply the necessary changes below by responding only with the improved body of the function. Do not include
the signature in your response. The first line of your response should have 4 spaces of indentation so that it fits syntactically with the user provided signature.</p>
</div>
<div class="ltx_para ltx_noindent" id="A1.SS4.SSS2.p2">
<p class="ltx_p" id="A1.SS4.SSS2.p2.1">Reflexion Self-Reflection generations follow the form:</p>
</div>
<div class="ltx_para ltx_noindent" id="A1.SS4.SSS2.p3">
<p class="ltx_p" id="A1.SS4.SSS2.p3.1">[Instruction]</p>
</div>
<div class="ltx_para ltx_noindent" id="A1.SS4.SSS2.p4">
<p class="ltx_p" id="A1.SS4.SSS2.p4.1">[Function implementation]</p>
</div>
<div class="ltx_para ltx_noindent" id="A1.SS4.SSS2.p5">
<p class="ltx_p" id="A1.SS4.SSS2.p5.1">[Unit test feedback]</p>
</div>
</section>
</section>
</section>
<section class="ltx_appendix" id="A2">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix B </span>A Running Example</h2>
<div class="ltx_para ltx_noindent" id="A2.p1">
<p class="ltx_p" id="A2.p1.1">Below is a running example of CR-Planner. Selected action for each step is highlighted in <span class="ltx_text" id="A2.p1.1.1" style="background-color:#B6D7A8;">green</span>:</p>
</div>
<div class="ltx_para ltx_noindent" id="A2.p2">
<p class="ltx_p" id="A2.p2.1"><span class="ltx_text ltx_font_bold" id="A2.p2.1.1">Problem:</span> Given a string <math alttext="s" class="ltx_Math" display="inline" id="A2.p2.1.m1.1"><semantics id="A2.p2.1.m1.1a"><mi id="A2.p2.1.m1.1.1" xref="A2.p2.1.m1.1.1.cmml">s</mi><annotation-xml encoding="MathML-Content" id="A2.p2.1.m1.1b"><ci id="A2.p2.1.m1.1.1.cmml" xref="A2.p2.1.m1.1.1">𝑠</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.p2.1.m1.1c">s</annotation><annotation encoding="application/x-llamapun" id="A2.p2.1.m1.1d">italic_s</annotation></semantics></math>, find the length of the longest substring without repeating characters in optimal time complexity.</p>
</div>
<div class="ltx_para ltx_noindent" id="A2.p3">
<p class="ltx_p" id="A2.p3.1"><span class="ltx_text ltx_font_bold" id="A2.p3.1.1">Instruction:</span> Reason through the problem and think step by step. Specifically:
<br class="ltx_break"/>1. Restate the problem in plain English.
<br class="ltx_break"/>2. Conceptualize a solution first in plain English.
<br class="ltx_break"/>3. Write a pseudocode solution
<br class="ltx_break"/>4. Output the Python 3 solution to the problem. Make sure to wrap your code in “‘python and ”’ Markdown delimiters, and include exactly one block of code with the entire solution.
<br class="ltx_break"/>No outside libraries are allowed.</p>
</div>
<div class="ltx_para ltx_noindent" id="A2.p4">
<p class="ltx_p" id="A2.p4.1"><span class="ltx_text ltx_font_bold" id="A2.p4.1.1">Step 1 (Sub-Goal Selection):</span> <span class="ltx_text ltx_font_smallcaps" id="A2.p4.1.2" style="background-color:#B6D7A8;">Reason</span>: The next step is to generate a rationale; <span class="ltx_text ltx_font_smallcaps" id="A2.p4.1.3">GenQuery</span>: The next step is to generate a query; <span class="ltx_text ltx_font_smallcaps" id="A2.p4.1.4">Retrieve</span>: The next step is to retrieve a document.</p>
</div>
<div class="ltx_para ltx_noindent" id="A2.p5">
<p class="ltx_p" id="A2.p5.3"><span class="ltx_text ltx_font_bold" id="A2.p5.3.1">Step 2 (Execution Selection):</span> <span class="ltx_text ltx_font_smallcaps" id="A2.p5.3.2">Rationale</span> 1: The optimal time complexity is <math alttext="O(n^{2})" class="ltx_Math" display="inline" id="A2.p5.1.m1.1"><semantics id="A2.p5.1.m1.1a"><mrow id="A2.p5.1.m1.1.1" xref="A2.p5.1.m1.1.1.cmml"><mi id="A2.p5.1.m1.1.1.3" xref="A2.p5.1.m1.1.1.3.cmml">O</mi><mo id="A2.p5.1.m1.1.1.2" xref="A2.p5.1.m1.1.1.2.cmml">⁢</mo><mrow id="A2.p5.1.m1.1.1.1.1" xref="A2.p5.1.m1.1.1.1.1.1.cmml"><mo id="A2.p5.1.m1.1.1.1.1.2" stretchy="false" xref="A2.p5.1.m1.1.1.1.1.1.cmml">(</mo><msup id="A2.p5.1.m1.1.1.1.1.1" xref="A2.p5.1.m1.1.1.1.1.1.cmml"><mi id="A2.p5.1.m1.1.1.1.1.1.2" xref="A2.p5.1.m1.1.1.1.1.1.2.cmml">n</mi><mn id="A2.p5.1.m1.1.1.1.1.1.3" xref="A2.p5.1.m1.1.1.1.1.1.3.cmml">2</mn></msup><mo id="A2.p5.1.m1.1.1.1.1.3" stretchy="false" xref="A2.p5.1.m1.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="A2.p5.1.m1.1b"><apply id="A2.p5.1.m1.1.1.cmml" xref="A2.p5.1.m1.1.1"><times id="A2.p5.1.m1.1.1.2.cmml" xref="A2.p5.1.m1.1.1.2"></times><ci id="A2.p5.1.m1.1.1.3.cmml" xref="A2.p5.1.m1.1.1.3">𝑂</ci><apply id="A2.p5.1.m1.1.1.1.1.1.cmml" xref="A2.p5.1.m1.1.1.1.1"><csymbol cd="ambiguous" id="A2.p5.1.m1.1.1.1.1.1.1.cmml" xref="A2.p5.1.m1.1.1.1.1">superscript</csymbol><ci id="A2.p5.1.m1.1.1.1.1.1.2.cmml" xref="A2.p5.1.m1.1.1.1.1.1.2">𝑛</ci><cn id="A2.p5.1.m1.1.1.1.1.1.3.cmml" type="integer" xref="A2.p5.1.m1.1.1.1.1.1.3">2</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.p5.1.m1.1c">O(n^{2})</annotation><annotation encoding="application/x-llamapun" id="A2.p5.1.m1.1d">italic_O ( italic_n start_POSTSUPERSCRIPT 2 end_POSTSUPERSCRIPT )</annotation></semantics></math>; <span class="ltx_text ltx_font_smallcaps" id="A2.p5.3.3" style="background-color:#B6D7A8;">Rationale<span class="ltx_text ltx_font_upright" id="A2.p5.3.3.1"> 2</span></span>: The optimal time complexity is <math alttext="O(n)" class="ltx_Math" display="inline" id="A2.p5.2.m2.1"><semantics id="A2.p5.2.m2.1a"><mrow id="A2.p5.2.m2.1.2" xref="A2.p5.2.m2.1.2.cmml"><mi id="A2.p5.2.m2.1.2.2" xref="A2.p5.2.m2.1.2.2.cmml">O</mi><mo id="A2.p5.2.m2.1.2.1" xref="A2.p5.2.m2.1.2.1.cmml">⁢</mo><mrow id="A2.p5.2.m2.1.2.3.2" xref="A2.p5.2.m2.1.2.cmml"><mo id="A2.p5.2.m2.1.2.3.2.1" stretchy="false" xref="A2.p5.2.m2.1.2.cmml">(</mo><mi id="A2.p5.2.m2.1.1" xref="A2.p5.2.m2.1.1.cmml">n</mi><mo id="A2.p5.2.m2.1.2.3.2.2" stretchy="false" xref="A2.p5.2.m2.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="A2.p5.2.m2.1b"><apply id="A2.p5.2.m2.1.2.cmml" xref="A2.p5.2.m2.1.2"><times id="A2.p5.2.m2.1.2.1.cmml" xref="A2.p5.2.m2.1.2.1"></times><ci id="A2.p5.2.m2.1.2.2.cmml" xref="A2.p5.2.m2.1.2.2">𝑂</ci><ci id="A2.p5.2.m2.1.1.cmml" xref="A2.p5.2.m2.1.1">𝑛</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.p5.2.m2.1c">O(n)</annotation><annotation encoding="application/x-llamapun" id="A2.p5.2.m2.1d">italic_O ( italic_n )</annotation></semantics></math>; <span class="ltx_text ltx_font_smallcaps" id="A2.p5.3.4">Rationale</span> 3: The optimal time complexity is <math alttext="O(n^{3})" class="ltx_Math" display="inline" id="A2.p5.3.m3.1"><semantics id="A2.p5.3.m3.1a"><mrow id="A2.p5.3.m3.1.1" xref="A2.p5.3.m3.1.1.cmml"><mi id="A2.p5.3.m3.1.1.3" xref="A2.p5.3.m3.1.1.3.cmml">O</mi><mo id="A2.p5.3.m3.1.1.2" xref="A2.p5.3.m3.1.1.2.cmml">⁢</mo><mrow id="A2.p5.3.m3.1.1.1.1" xref="A2.p5.3.m3.1.1.1.1.1.cmml"><mo id="A2.p5.3.m3.1.1.1.1.2" stretchy="false" xref="A2.p5.3.m3.1.1.1.1.1.cmml">(</mo><msup id="A2.p5.3.m3.1.1.1.1.1" xref="A2.p5.3.m3.1.1.1.1.1.cmml"><mi id="A2.p5.3.m3.1.1.1.1.1.2" xref="A2.p5.3.m3.1.1.1.1.1.2.cmml">n</mi><mn id="A2.p5.3.m3.1.1.1.1.1.3" xref="A2.p5.3.m3.1.1.1.1.1.3.cmml">3</mn></msup><mo id="A2.p5.3.m3.1.1.1.1.3" stretchy="false" xref="A2.p5.3.m3.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="A2.p5.3.m3.1b"><apply id="A2.p5.3.m3.1.1.cmml" xref="A2.p5.3.m3.1.1"><times id="A2.p5.3.m3.1.1.2.cmml" xref="A2.p5.3.m3.1.1.2"></times><ci id="A2.p5.3.m3.1.1.3.cmml" xref="A2.p5.3.m3.1.1.3">𝑂</ci><apply id="A2.p5.3.m3.1.1.1.1.1.cmml" xref="A2.p5.3.m3.1.1.1.1"><csymbol cd="ambiguous" id="A2.p5.3.m3.1.1.1.1.1.1.cmml" xref="A2.p5.3.m3.1.1.1.1">superscript</csymbol><ci id="A2.p5.3.m3.1.1.1.1.1.2.cmml" xref="A2.p5.3.m3.1.1.1.1.1.2">𝑛</ci><cn id="A2.p5.3.m3.1.1.1.1.1.3.cmml" type="integer" xref="A2.p5.3.m3.1.1.1.1.1.3">3</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.p5.3.m3.1c">O(n^{3})</annotation><annotation encoding="application/x-llamapun" id="A2.p5.3.m3.1d">italic_O ( italic_n start_POSTSUPERSCRIPT 3 end_POSTSUPERSCRIPT )</annotation></semantics></math>.</p>
</div>
<div class="ltx_para ltx_noindent" id="A2.p6">
<p class="ltx_p" id="A2.p6.1"><span class="ltx_text ltx_font_bold" id="A2.p6.1.1">Step 3 (Sub-Goal Selection):</span> <span class="ltx_text ltx_font_smallcaps" id="A2.p6.1.2">Reason</span>: The next step is to generate a rationale; <span class="ltx_text ltx_font_smallcaps" id="A2.p6.1.3" style="background-color:#B6D7A8;">GenQuery</span>: The next step is to generate a query; <span class="ltx_text ltx_font_smallcaps" id="A2.p6.1.4">Retrieve</span>: The next step is to retrieve a document.</p>
</div>
<div class="ltx_para ltx_noindent" id="A2.p7">
<p class="ltx_p" id="A2.p7.2"><span class="ltx_text ltx_font_bold" id="A2.p7.2.1">Step 4 (Execution Selection):</span> <span class="ltx_text ltx_font_smallcaps" id="A2.p7.2.2">Query</span> 1: Given a string <math alttext="s" class="ltx_Math" display="inline" id="A2.p7.1.m1.1"><semantics id="A2.p7.1.m1.1a"><mi id="A2.p7.1.m1.1.1" xref="A2.p7.1.m1.1.1.cmml">s</mi><annotation-xml encoding="MathML-Content" id="A2.p7.1.m1.1b"><ci id="A2.p7.1.m1.1.1.cmml" xref="A2.p7.1.m1.1.1">𝑠</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.p7.1.m1.1c">s</annotation><annotation encoding="application/x-llamapun" id="A2.p7.1.m1.1d">italic_s</annotation></semantics></math>, find the length of the longest substring without repeating characters in optimal time complexity; <span class="ltx_text ltx_font_smallcaps" id="A2.p7.2.3">Query</span> 2: Sliding window technique string problems; <span class="ltx_text ltx_font_smallcaps" id="A2.p7.2.4" style="background-color:#B6D7A8;">Query<span class="ltx_text ltx_font_upright" id="A2.p7.2.4.1"> 3</span></span>: Max length substring with unique characters with <math alttext="O(n)" class="ltx_Math" display="inline" id="A2.p7.2.m2.1"><semantics id="A2.p7.2.m2.1a"><mrow id="A2.p7.2.m2.1.2" xref="A2.p7.2.m2.1.2.cmml"><mi id="A2.p7.2.m2.1.2.2" xref="A2.p7.2.m2.1.2.2.cmml">O</mi><mo id="A2.p7.2.m2.1.2.1" xref="A2.p7.2.m2.1.2.1.cmml">⁢</mo><mrow id="A2.p7.2.m2.1.2.3.2" xref="A2.p7.2.m2.1.2.cmml"><mo id="A2.p7.2.m2.1.2.3.2.1" stretchy="false" xref="A2.p7.2.m2.1.2.cmml">(</mo><mi id="A2.p7.2.m2.1.1" xref="A2.p7.2.m2.1.1.cmml">n</mi><mo id="A2.p7.2.m2.1.2.3.2.2" stretchy="false" xref="A2.p7.2.m2.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="A2.p7.2.m2.1b"><apply id="A2.p7.2.m2.1.2.cmml" xref="A2.p7.2.m2.1.2"><times id="A2.p7.2.m2.1.2.1.cmml" xref="A2.p7.2.m2.1.2.1"></times><ci id="A2.p7.2.m2.1.2.2.cmml" xref="A2.p7.2.m2.1.2.2">𝑂</ci><ci id="A2.p7.2.m2.1.1.cmml" xref="A2.p7.2.m2.1.1">𝑛</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.p7.2.m2.1c">O(n)</annotation><annotation encoding="application/x-llamapun" id="A2.p7.2.m2.1d">italic_O ( italic_n )</annotation></semantics></math> complexity.</p>
</div>
<div class="ltx_para ltx_noindent" id="A2.p8">
<p class="ltx_p" id="A2.p8.1"><span class="ltx_text ltx_font_bold" id="A2.p8.1.1">Step 5 (Sub-Goal Selection):</span> <span class="ltx_text ltx_font_smallcaps" id="A2.p8.1.2">Reason</span>: The next step is to generate a rationale; <span class="ltx_text ltx_font_smallcaps" id="A2.p8.1.3">GenQuery</span>: The next step is to generate a query; <span class="ltx_text ltx_font_smallcaps" id="A2.p8.1.4" style="background-color:#B6D7A8;">Retrieve</span>: The next step is to retrieve a document.</p>
</div>
<div class="ltx_para ltx_noindent" id="A2.p9">
<p class="ltx_p" id="A2.p9.1"><span class="ltx_text ltx_font_bold" id="A2.p9.1.1">Step 6 (Execution Selection):</span>
<span class="ltx_text ltx_font_smallcaps" id="A2.p9.1.2">Doc</span> 1: Given a string s, find the length of the longest substring without repeating characters.
Examples:
Input: “ABCBC”
Output: 3
Explanation: The longest substring without repeating characters is “ABC”
Input: “AAA”
Output: 1
Explanation: The longest substring without repeating characters is “A”
Input: “GEEKSFORGEEKS”
Output: 7
Explanation: The longest substrings without repeating characters are “EKSFORG” and “KSFORGE” with lengths of 7;
<span class="ltx_text ltx_font_smallcaps" id="A2.p9.1.3">Doc</span> 2: To deal with time complexity problems, it always helps to scale the problem up and think of a massive case.
If your string was thousands of characters long, we still only have one start pointer and one end pointer. The key thing is that both the pointers will only ever move forward (along the string). Therefore, the complexity of this is definitely <math alttext="O(n)" class="ltx_Math" display="inline" id="A2.p9.1.m1.1"><semantics id="A2.p9.1.m1.1a"><mrow id="A2.p9.1.m1.1.2" xref="A2.p9.1.m1.1.2.cmml"><mi id="A2.p9.1.m1.1.2.2" xref="A2.p9.1.m1.1.2.2.cmml">O</mi><mo id="A2.p9.1.m1.1.2.1" xref="A2.p9.1.m1.1.2.1.cmml">⁢</mo><mrow id="A2.p9.1.m1.1.2.3.2" xref="A2.p9.1.m1.1.2.cmml"><mo id="A2.p9.1.m1.1.2.3.2.1" stretchy="false" xref="A2.p9.1.m1.1.2.cmml">(</mo><mi id="A2.p9.1.m1.1.1" xref="A2.p9.1.m1.1.1.cmml">n</mi><mo id="A2.p9.1.m1.1.2.3.2.2" stretchy="false" xref="A2.p9.1.m1.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="A2.p9.1.m1.1b"><apply id="A2.p9.1.m1.1.2.cmml" xref="A2.p9.1.m1.1.2"><times id="A2.p9.1.m1.1.2.1.cmml" xref="A2.p9.1.m1.1.2.1"></times><ci id="A2.p9.1.m1.1.2.2.cmml" xref="A2.p9.1.m1.1.2.2">𝑂</ci><ci id="A2.p9.1.m1.1.1.cmml" xref="A2.p9.1.m1.1.1">𝑛</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.p9.1.m1.1c">O(n)</annotation><annotation encoding="application/x-llamapun" id="A2.p9.1.m1.1d">italic_O ( italic_n )</annotation></semantics></math> since they are only moving forward together through the string - so the time this process would take is proportional to the length of the string (the time it takes to get to the end);
<span class="ltx_text ltx_font_smallcaps" id="A2.p9.1.4" style="background-color:#B6D7A8;">Doc<span class="ltx_text ltx_font_upright" id="A2.p9.1.4.1"> 3</span></span>: The intuition behind the solution is to iteratively find the longest substring without repeating characters by maintaining a sliding window approach. We use two pointers (left and right) to represent the boundaries of the current substring. As we iterate through the string, we update the pointers and adjust the window to accommodate new unique characters and eliminate repeating characters.</p>
</div>
<div class="ltx_para ltx_noindent" id="A2.p10">
<p class="ltx_p" id="A2.p10.1"><span class="ltx_text ltx_font_bold" id="A2.p10.1.1">Step 7 (Sub-Goal Selection):</span> <span class="ltx_text ltx_font_smallcaps" id="A2.p10.1.2" style="background-color:#B6D7A8;">Reason</span>: The next step is to generate a rationale; <span class="ltx_text ltx_font_smallcaps" id="A2.p10.1.3">GenQuery</span>: The next step is to generate a query; <span class="ltx_text ltx_font_smallcaps" id="A2.p10.1.4">Retrieve</span>: The next step is to retrieve a document.</p>
</div>
<div class="ltx_para ltx_noindent" id="A2.p11">
<p class="ltx_p" id="A2.p11.1"><span class="ltx_text ltx_font_bold" id="A2.p11.1.1">Step 8 (Execution Selection):</span>
<span class="ltx_text ltx_font_smallcaps" id="A2.p11.1.2">Rationale</span> 1: The retrieved document is not sufficient for solving the problem. Therefore, a second-level retrieval is required;
<span class="ltx_text ltx_font_smallcaps" id="A2.p11.1.3" style="background-color:#B6D7A8;">Rationale<span class="ltx_text ltx_font_upright" id="A2.p11.1.3.1"> 2</span></span>: To solve the problem efficiently, use a sliding window technique:
1. Initialize a Window: Start with a window at the beginning of the string, which represents the current substring without repeating characters.
2. Expand the Window: Move through the string one character at a time, adding each character to a data structure (like a set or dictionary) that keeps track of characters in the current window.
3. Check for Repeats: If you encounter a character that is already in the data structure, it means there’s a repetition within the current window.
4. Adjust the Window: Move the start of the window forward, removing characters until the repeated character is excluded from the window. This ensures the window contains only unique characters.
5. Update Maximum Length: Keep track of the maximum size of the window throughout the process. This represents the length of the longest substring without repeating characters.
6. Continue Until End of String: Repeat the expand and adjust steps until you have traversed the entire string.
This approach ensures that you examine each character at most twice (once when added and once when removed), resulting in optimal linear time complexity;
<span class="ltx_text ltx_font_smallcaps" id="A2.p11.1.4">Rationale</span> 3: Here is the code:</p>
</div>
<div class="ltx_para ltx_noindent" id="A2.p12">
<div class="ltx_listing ltx_lst_language_Python ltx_lstlisting ltx_listing" id="A2.p12.1" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a download="" href="data:text/plain;base64,ZGVmIGxlbmd0aF9vZl9sb25nZXN0X3N1YnN0cmluZyhzKToKICAgIGNoYXJfaW5kZXggPSB7fQogICAgbWF4X2xlbmd0aCA9IDAKICAgIHN0YXJ0ID0gMAoKICAgIGZvciBpZHgsIGNoYXIgaW4gZW51bWVyYXRlKHMpOgogICAgICAgIGlmIGNoYXIgaW4gY2hhcl9pbmRleDoKICAgICAgICAgICAgc3RhcnQgPSBjaGFyX2luZGV4W2NoYXJdCiAgICAgICAgY2hhcl9pbmRleFtjaGFyXSA9IGlkeAogICAgICAgIGN1cnJlbnRfbGVuZ3RoID0gaWR4IC0gc3RhcnQKICAgICAgICBpZiBjdXJyZW50X2xlbmd0aCA+IG1heF9sZW5ndGg6CiAgICAgICAgICAgIG1heF9sZW5ndGggPSBjdXJyZW50X2xlbmd0aAoKICAgIHJldHVybiBtYXhfbGVuZ3Ro">⬇</a></div>
<div class="ltx_listingline" id="lstnumberx1">
<span class="ltx_text ltx_lst_keyword ltx_font_typewriter" id="lstnumberx1.1"><span class="ltx_text ltx_font_bold" id="lstnumberx1.1.1" style="color:#0000FF;">def</span></span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx1.2"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx1.3">length_of_longest_substring</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx1.4">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx1.5">s</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx1.6">):</span>
</div>
<div class="ltx_listingline" id="lstnumberx2">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.1"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.2">char_index</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.3"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx2.4">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.5"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx2.6">{}</span>
</div>
<div class="ltx_listingline" id="lstnumberx3">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx3.1"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx3.2">max_length</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx3.3"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx3.4">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx3.5"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx3.6">0</span>
</div>
<div class="ltx_listingline" id="lstnumberx4">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx4.1"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx4.2">start</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx4.3"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx4.4">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx4.5"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx4.6">0</span>
</div>
<div class="ltx_listingline" id="lstnumberx5">
</div>
<div class="ltx_listingline" id="lstnumberx6">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx6.1"> </span><span class="ltx_text ltx_lst_keyword ltx_font_typewriter" id="lstnumberx6.2"><span class="ltx_text ltx_font_bold" id="lstnumberx6.2.1" style="color:#0000FF;">for</span></span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx6.3"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx6.4">idx</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx6.5">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx6.6"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx6.7">char</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx6.8"> </span><span class="ltx_text ltx_lst_keyword ltx_font_typewriter" id="lstnumberx6.9"><span class="ltx_text ltx_font_bold" id="lstnumberx6.9.1" style="color:#0000FF;">in</span></span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx6.10"> </span><span class="ltx_text ltx_lst_keyword ltx_lst_keywords2 ltx_font_typewriter" id="lstnumberx6.11"><span class="ltx_text ltx_font_bold" id="lstnumberx6.11.1" style="color:#0000FF;">enumerate</span></span><span class="ltx_text ltx_font_typewriter" id="lstnumberx6.12">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx6.13">s</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx6.14">):</span>
</div>
<div class="ltx_listingline" id="lstnumberx7">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx7.1"> </span><span class="ltx_text ltx_lst_keyword ltx_font_typewriter" id="lstnumberx7.2"><span class="ltx_text ltx_font_bold" id="lstnumberx7.2.1" style="color:#0000FF;">if</span></span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx7.3"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx7.4">char</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx7.5"> </span><span class="ltx_text ltx_lst_keyword ltx_font_typewriter" id="lstnumberx7.6"><span class="ltx_text ltx_font_bold" id="lstnumberx7.6.1" style="color:#0000FF;">in</span></span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx7.7"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx7.8">char_index</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx7.9">:</span>
</div>
<div class="ltx_listingline" id="lstnumberx8">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx8.1"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx8.2">start</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx8.3"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx8.4">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx8.5"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx8.6">char_index</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx8.7">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx8.8">char</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx8.9">]</span>
</div>
<div class="ltx_listingline" id="lstnumberx9">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx9.1"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx9.2">char_index</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx9.3">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx9.4">char</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx9.5">]</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx9.6"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx9.7">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx9.8"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx9.9">idx</span>
</div>
<div class="ltx_listingline" id="lstnumberx10">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx10.1"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx10.2">current_length</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx10.3"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx10.4">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx10.5"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx10.6">idx</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx10.7"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx10.8">-</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx10.9"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx10.10">start</span>
</div>
<div class="ltx_listingline" id="lstnumberx11">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx11.1"> </span><span class="ltx_text ltx_lst_keyword ltx_font_typewriter" id="lstnumberx11.2"><span class="ltx_text ltx_font_bold" id="lstnumberx11.2.1" style="color:#0000FF;">if</span></span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx11.3"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx11.4">current_length</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx11.5"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx11.6">&gt;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx11.7"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx11.8">max_length</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx11.9">:</span>
</div>
<div class="ltx_listingline" id="lstnumberx12">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx12.1"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx12.2">max_length</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx12.3"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx12.4">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx12.5"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx12.6">current_length</span>
</div>
<div class="ltx_listingline" id="lstnumberx13">
</div>
<div class="ltx_listingline" id="lstnumberx14">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx14.1"> </span><span class="ltx_text ltx_lst_keyword ltx_font_typewriter" id="lstnumberx14.2"><span class="ltx_text ltx_font_bold" id="lstnumberx14.2.1" style="color:#0000FF;">return</span></span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx14.3"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx14.4">max_length</span>
</div>
</div>
</div>
<div class="ltx_para ltx_noindent" id="A2.p13">
<p class="ltx_p" id="A2.p13.1"><span class="ltx_text ltx_font_bold" id="A2.p13.1.1">Step 9 (Sub-Goal Selection):</span> <span class="ltx_text ltx_font_smallcaps" id="A2.p13.1.2" style="background-color:#B6D7A8;">Reason</span>: The next step is to generate a rationale; <span class="ltx_text ltx_font_smallcaps" id="A2.p13.1.3">GenQuery</span>: The next step is to generate a query; <span class="ltx_text ltx_font_smallcaps" id="A2.p13.1.4">Retrieve</span>: The next step is to retrieve a document.</p>
</div>
<div class="ltx_para ltx_noindent" id="A2.p14">
<p class="ltx_p" id="A2.p14.1"><span class="ltx_text ltx_font_bold" id="A2.p14.1.1">Step 10 (Execution Selection):</span>
<span class="ltx_text ltx_font_smallcaps" id="A2.p14.1.2">Rationale</span> 1: Here’s a step-by-step plan:
Initialize Pointers:
Start with two pointers, left and right, both at the beginning of the string. These pointers define the current window of unique characters.
Create a Character Map:
Use a hash map (or an array if dealing with a limited character set like ASCII) to keep track of characters and their latest indices in the string.
Iterate Through the String:
Move the right pointer through the string one character at a time.
a. Check for Repeats:
For each character s[right], check if it exists in the character map and if its last recorded index is on or after the left pointer. This indicates a repeating character within the current window.
b. Adjust the Left Pointer:
If a repeat is found, move the left pointer to one position after the last occurrence of the current character. This effectively skips the repeated character and shortens the window from the left side.
c. Update the Character Map:
Record or update the index of the current character s[right] in the character map with the current right index.
d. Calculate the Maximum Length:
Compute the length of the current window as current_length = right - left + 1.
Update a variable max_length if current_length is greater than the previously recorded maximum.
Continue Until End of String:
Repeat step 3 until the right pointer reaches the end of the string.
Return the Result:
After the loop ends, max_length will contain the length of the longest substring without repeating characters;
<span class="ltx_text ltx_font_smallcaps" id="A2.p14.1.3" style="background-color:#B6D7A8;">Rationale<span class="ltx_text ltx_font_upright" id="A2.p14.1.3.1"> 2</span></span>: Here is the code:</p>
<div class="ltx_listing ltx_lst_language_Python ltx_lstlisting ltx_listing" id="A2.p14.2" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a download="" href="data:text/plain;base64,ZGVmIGxlbmd0aF9vZl9sb25nZXN0X3N1YnN0cmluZyhzKToKICAgIGNoYXJfaW5kZXggPSB7fQogICAgbWF4X2xlbmd0aCA9IDAKICAgIHN0YXJ0ID0gMAoKICAgIGZvciBpZHgsIGNoYXIgaW4gZW51bWVyYXRlKHMpOgogICAgICAgIGlmIGNoYXIgaW4gY2hhcl9pbmRleCBhbmQgY2hhcl9pbmRleFtjaGFyXSA+PSBzdGFydDoKICAgICAgICAgICAgc3RhcnQgPSBjaGFyX2luZGV4W2NoYXJdICsgMQogICAgICAgIGNoYXJfaW5kZXhbY2hhcl0gPSBpZHgKICAgICAgICBtYXhfbGVuZ3RoID0gbWF4KG1heF9sZW5ndGgsIGlkeCAtIHN0YXJ0ICsgMSkKCiAgICByZXR1cm4gbWF4X2xlbmd0aA==">⬇</a></div>
<div class="ltx_listingline" id="lstnumberx15">
<span class="ltx_text ltx_lst_keyword ltx_font_typewriter" id="lstnumberx15.1"><span class="ltx_text ltx_font_bold" id="lstnumberx15.1.1" style="color:#0000FF;">def</span></span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx15.2"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx15.3">length_of_longest_substring</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx15.4">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx15.5">s</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx15.6">):</span>
</div>
<div class="ltx_listingline" id="lstnumberx16">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx16.1"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx16.2">char_index</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx16.3"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx16.4">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx16.5"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx16.6">{}</span>
</div>
<div class="ltx_listingline" id="lstnumberx17">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx17.1"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx17.2">max_length</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx17.3"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx17.4">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx17.5"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx17.6">0</span>
</div>
<div class="ltx_listingline" id="lstnumberx18">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx18.1"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx18.2">start</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx18.3"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx18.4">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx18.5"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx18.6">0</span>
</div>
<div class="ltx_listingline" id="lstnumberx19">
</div>
<div class="ltx_listingline" id="lstnumberx20">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.1"> </span><span class="ltx_text ltx_lst_keyword ltx_font_typewriter" id="lstnumberx20.2"><span class="ltx_text ltx_font_bold" id="lstnumberx20.2.1" style="color:#0000FF;">for</span></span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.3"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.4">idx</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx20.5">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.6"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.7">char</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.8"> </span><span class="ltx_text ltx_lst_keyword ltx_font_typewriter" id="lstnumberx20.9"><span class="ltx_text ltx_font_bold" id="lstnumberx20.9.1" style="color:#0000FF;">in</span></span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.10"> </span><span class="ltx_text ltx_lst_keyword ltx_lst_keywords2 ltx_font_typewriter" id="lstnumberx20.11"><span class="ltx_text ltx_font_bold" id="lstnumberx20.11.1" style="color:#0000FF;">enumerate</span></span><span class="ltx_text ltx_font_typewriter" id="lstnumberx20.12">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.13">s</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx20.14">):</span>
</div>
<div class="ltx_listingline" id="lstnumberx21">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx21.1"> </span><span class="ltx_text ltx_lst_keyword ltx_font_typewriter" id="lstnumberx21.2"><span class="ltx_text ltx_font_bold" id="lstnumberx21.2.1" style="color:#0000FF;">if</span></span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx21.3"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx21.4">char</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx21.5"> </span><span class="ltx_text ltx_lst_keyword ltx_font_typewriter" id="lstnumberx21.6"><span class="ltx_text ltx_font_bold" id="lstnumberx21.6.1" style="color:#0000FF;">in</span></span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx21.7"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx21.8">char_index</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx21.9"> </span><span class="ltx_text ltx_lst_keyword ltx_font_typewriter" id="lstnumberx21.10"><span class="ltx_text ltx_font_bold" id="lstnumberx21.10.1" style="color:#0000FF;">and</span></span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx21.11"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx21.12">char_index</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx21.13">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx21.14">char</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx21.15">]</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx21.16"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx21.17">&gt;=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx21.18"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx21.19">start</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx21.20">:</span>
</div>
<div class="ltx_listingline" id="lstnumberx22">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx22.1"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx22.2">start</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx22.3"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx22.4">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx22.5"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx22.6">char_index</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx22.7">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx22.8">char</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx22.9">]</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx22.10"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx22.11">+</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx22.12"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx22.13">1</span>
</div>
<div class="ltx_listingline" id="lstnumberx23">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx23.1"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx23.2">char_index</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx23.3">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx23.4">char</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx23.5">]</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx23.6"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx23.7">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx23.8"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx23.9">idx</span>
</div>
<div class="ltx_listingline" id="lstnumberx24">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx24.1"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx24.2">max_length</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx24.3"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx24.4">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx24.5"> </span><span class="ltx_text ltx_lst_keyword ltx_lst_keywords2 ltx_font_typewriter" id="lstnumberx24.6"><span class="ltx_text ltx_font_bold" id="lstnumberx24.6.1" style="color:#0000FF;">max</span></span><span class="ltx_text ltx_font_typewriter" id="lstnumberx24.7">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx24.8">max_length</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx24.9">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx24.10"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx24.11">idx</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx24.12"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx24.13">-</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx24.14"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx24.15">start</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx24.16"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx24.17">+</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx24.18"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx24.19">1)</span>
</div>
<div class="ltx_listingline" id="lstnumberx25">
</div>
<div class="ltx_listingline" id="lstnumberx26">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx26.1"> </span><span class="ltx_text ltx_lst_keyword ltx_font_typewriter" id="lstnumberx26.2"><span class="ltx_text ltx_font_bold" id="lstnumberx26.2.1" style="color:#0000FF;">return</span></span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx26.3"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx26.4">max_length</span>
</div>
</div>
<p class="ltx_p" id="A2.p14.3"><span class="ltx_text ltx_font_smallcaps" id="A2.p14.3.1">Rationale</span> 3: Here is the code:</p>
<div class="ltx_listing ltx_lst_language_Python ltx_lstlisting ltx_listing" id="A2.p14.4" style="background-color:#FFFFFF;">
<div class="ltx_listing_data"><a download="" href="data:text/plain;base64,ZGVmIGxlbmd0aF9vZl9sb25nZXN0X3N1YnN0cmluZyhzKToKICAgIGNoYXJfc2V0ID0gc2V0KCkKICAgIGxlZnQgPSAwCiAgICBtYXhfbGVuZ3RoID0gMAoKICAgIGZvciByaWdodCBpbiByYW5nZShsZW4ocykpOgogICAgICAgIGlmIHNbcmlnaHRdIGluIGNoYXJfc2V0OgogICAgICAgICAgICBjaGFyX3NldC5jbGVhcigpCiAgICAgICAgICAgIGxlZnQgPSByaWdodCArIDEKICAgICAgICBjaGFyX3NldC5hZGQoc1tyaWdodF0pCiAgICAgICAgbWF4X2xlbmd0aCA9IG1heChtYXhfbGVuZ3RoLCByaWdodCAtIGxlZnQgKyAxKQoKICAgIHJldHVybiBtYXhfbGVuZ3Ro">⬇</a></div>
<div class="ltx_listingline" id="lstnumberx27">
<span class="ltx_text ltx_lst_keyword ltx_font_typewriter" id="lstnumberx27.1"><span class="ltx_text ltx_font_bold" id="lstnumberx27.1.1" style="color:#0000FF;">def</span></span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx27.2"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx27.3">length_of_longest_substring</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx27.4">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx27.5">s</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx27.6">):</span>
</div>
<div class="ltx_listingline" id="lstnumberx28">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx28.1"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx28.2">char_set</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx28.3"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx28.4">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx28.5"> </span><span class="ltx_text ltx_lst_keyword ltx_lst_keywords2 ltx_font_typewriter" id="lstnumberx28.6"><span class="ltx_text ltx_font_bold" id="lstnumberx28.6.1" style="color:#0000FF;">set</span></span><span class="ltx_text ltx_font_typewriter" id="lstnumberx28.7">()</span>
</div>
<div class="ltx_listingline" id="lstnumberx29">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx29.1"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx29.2">left</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx29.3"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx29.4">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx29.5"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx29.6">0</span>
</div>
<div class="ltx_listingline" id="lstnumberx30">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx30.1"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx30.2">max_length</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx30.3"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx30.4">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx30.5"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx30.6">0</span>
</div>
<div class="ltx_listingline" id="lstnumberx31">
</div>
<div class="ltx_listingline" id="lstnumberx32">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx32.1"> </span><span class="ltx_text ltx_lst_keyword ltx_font_typewriter" id="lstnumberx32.2"><span class="ltx_text ltx_font_bold" id="lstnumberx32.2.1" style="color:#0000FF;">for</span></span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx32.3"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx32.4">right</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx32.5"> </span><span class="ltx_text ltx_lst_keyword ltx_font_typewriter" id="lstnumberx32.6"><span class="ltx_text ltx_font_bold" id="lstnumberx32.6.1" style="color:#0000FF;">in</span></span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx32.7"> </span><span class="ltx_text ltx_lst_keyword ltx_lst_keywords2 ltx_font_typewriter" id="lstnumberx32.8"><span class="ltx_text ltx_font_bold" id="lstnumberx32.8.1" style="color:#0000FF;">range</span></span><span class="ltx_text ltx_font_typewriter" id="lstnumberx32.9">(</span><span class="ltx_text ltx_lst_keyword ltx_lst_keywords2 ltx_font_typewriter" id="lstnumberx32.10"><span class="ltx_text ltx_font_bold" id="lstnumberx32.10.1" style="color:#0000FF;">len</span></span><span class="ltx_text ltx_font_typewriter" id="lstnumberx32.11">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx32.12">s</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx32.13">)):</span>
</div>
<div class="ltx_listingline" id="lstnumberx33">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx33.1"> </span><span class="ltx_text ltx_lst_keyword ltx_font_typewriter" id="lstnumberx33.2"><span class="ltx_text ltx_font_bold" id="lstnumberx33.2.1" style="color:#0000FF;">if</span></span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx33.3"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx33.4">s</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx33.5">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx33.6">right</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx33.7">]</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx33.8"> </span><span class="ltx_text ltx_lst_keyword ltx_font_typewriter" id="lstnumberx33.9"><span class="ltx_text ltx_font_bold" id="lstnumberx33.9.1" style="color:#0000FF;">in</span></span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx33.10"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx33.11">char_set</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx33.12">:</span>
</div>
<div class="ltx_listingline" id="lstnumberx34">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx34.1"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx34.2">char_set</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx34.3">.</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx34.4">clear</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx34.5">()</span>
</div>
<div class="ltx_listingline" id="lstnumberx35">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx35.1"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx35.2">left</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx35.3"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx35.4">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx35.5"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx35.6">right</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx35.7"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx35.8">+</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx35.9"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx35.10">1</span>
</div>
<div class="ltx_listingline" id="lstnumberx36">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx36.1"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx36.2">char_set</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx36.3">.</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx36.4">add</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx36.5">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx36.6">s</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx36.7">[</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx36.8">right</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx36.9">])</span>
</div>
<div class="ltx_listingline" id="lstnumberx37">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx37.1"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx37.2">max_length</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx37.3"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx37.4">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx37.5"> </span><span class="ltx_text ltx_lst_keyword ltx_lst_keywords2 ltx_font_typewriter" id="lstnumberx37.6"><span class="ltx_text ltx_font_bold" id="lstnumberx37.6.1" style="color:#0000FF;">max</span></span><span class="ltx_text ltx_font_typewriter" id="lstnumberx37.7">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx37.8">max_length</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx37.9">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx37.10"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx37.11">right</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx37.12"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx37.13">-</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx37.14"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx37.15">left</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx37.16"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx37.17">+</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx37.18"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx37.19">1)</span>
</div>
<div class="ltx_listingline" id="lstnumberx38">
</div>
<div class="ltx_listingline" id="lstnumberx39">
<span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx39.1"> </span><span class="ltx_text ltx_lst_keyword ltx_font_typewriter" id="lstnumberx39.2"><span class="ltx_text ltx_font_bold" id="lstnumberx39.2.1" style="color:#0000FF;">return</span></span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx39.3"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx39.4">max_length</span>
</div>
</div>
</div>
<figure class="ltx_table" id="A2.T6">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 6: </span>Details of state types and action spaces.</figcaption>
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="A2.T6.3" style="width:318.0pt;height:104.8pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(-32.1pt,10.6pt) scale(0.831823306391209,0.831823306391209) ;">
<table class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="A2.T6.3.3">
<thead class="ltx_thead">
<tr class="ltx_tr" id="A2.T6.3.3.3">
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="A2.T6.1.1.1.1">Current State <math alttext="s_{t}" class="ltx_Math" display="inline" id="A2.T6.1.1.1.1.m1.1"><semantics id="A2.T6.1.1.1.1.m1.1a"><msub id="A2.T6.1.1.1.1.m1.1.1" xref="A2.T6.1.1.1.1.m1.1.1.cmml"><mi id="A2.T6.1.1.1.1.m1.1.1.2" xref="A2.T6.1.1.1.1.m1.1.1.2.cmml">s</mi><mi id="A2.T6.1.1.1.1.m1.1.1.3" xref="A2.T6.1.1.1.1.m1.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="A2.T6.1.1.1.1.m1.1b"><apply id="A2.T6.1.1.1.1.m1.1.1.cmml" xref="A2.T6.1.1.1.1.m1.1.1"><csymbol cd="ambiguous" id="A2.T6.1.1.1.1.m1.1.1.1.cmml" xref="A2.T6.1.1.1.1.m1.1.1">subscript</csymbol><ci id="A2.T6.1.1.1.1.m1.1.1.2.cmml" xref="A2.T6.1.1.1.1.m1.1.1.2">𝑠</ci><ci id="A2.T6.1.1.1.1.m1.1.1.3.cmml" xref="A2.T6.1.1.1.1.m1.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.T6.1.1.1.1.m1.1c">s_{t}</annotation><annotation encoding="application/x-llamapun" id="A2.T6.1.1.1.1.m1.1d">italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="A2.T6.2.2.2.2">Action Space <math alttext="\mathcal{A}_{s_{t}}" class="ltx_Math" display="inline" id="A2.T6.2.2.2.2.m1.1"><semantics id="A2.T6.2.2.2.2.m1.1a"><msub id="A2.T6.2.2.2.2.m1.1.1" xref="A2.T6.2.2.2.2.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.T6.2.2.2.2.m1.1.1.2" xref="A2.T6.2.2.2.2.m1.1.1.2.cmml">𝒜</mi><msub id="A2.T6.2.2.2.2.m1.1.1.3" xref="A2.T6.2.2.2.2.m1.1.1.3.cmml"><mi id="A2.T6.2.2.2.2.m1.1.1.3.2" xref="A2.T6.2.2.2.2.m1.1.1.3.2.cmml">s</mi><mi id="A2.T6.2.2.2.2.m1.1.1.3.3" xref="A2.T6.2.2.2.2.m1.1.1.3.3.cmml">t</mi></msub></msub><annotation-xml encoding="MathML-Content" id="A2.T6.2.2.2.2.m1.1b"><apply id="A2.T6.2.2.2.2.m1.1.1.cmml" xref="A2.T6.2.2.2.2.m1.1.1"><csymbol cd="ambiguous" id="A2.T6.2.2.2.2.m1.1.1.1.cmml" xref="A2.T6.2.2.2.2.m1.1.1">subscript</csymbol><ci id="A2.T6.2.2.2.2.m1.1.1.2.cmml" xref="A2.T6.2.2.2.2.m1.1.1.2">𝒜</ci><apply id="A2.T6.2.2.2.2.m1.1.1.3.cmml" xref="A2.T6.2.2.2.2.m1.1.1.3"><csymbol cd="ambiguous" id="A2.T6.2.2.2.2.m1.1.1.3.1.cmml" xref="A2.T6.2.2.2.2.m1.1.1.3">subscript</csymbol><ci id="A2.T6.2.2.2.2.m1.1.1.3.2.cmml" xref="A2.T6.2.2.2.2.m1.1.1.3.2">𝑠</ci><ci id="A2.T6.2.2.2.2.m1.1.1.3.3.cmml" xref="A2.T6.2.2.2.2.m1.1.1.3.3">𝑡</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.T6.2.2.2.2.m1.1c">\mathcal{A}_{s_{t}}</annotation><annotation encoding="application/x-llamapun" id="A2.T6.2.2.2.2.m1.1d">caligraphic_A start_POSTSUBSCRIPT italic_s start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="A2.T6.3.3.3.3">Next State <math alttext="s_{t+1}" class="ltx_Math" display="inline" id="A2.T6.3.3.3.3.m1.1"><semantics id="A2.T6.3.3.3.3.m1.1a"><msub id="A2.T6.3.3.3.3.m1.1.1" xref="A2.T6.3.3.3.3.m1.1.1.cmml"><mi id="A2.T6.3.3.3.3.m1.1.1.2" xref="A2.T6.3.3.3.3.m1.1.1.2.cmml">s</mi><mrow id="A2.T6.3.3.3.3.m1.1.1.3" xref="A2.T6.3.3.3.3.m1.1.1.3.cmml"><mi id="A2.T6.3.3.3.3.m1.1.1.3.2" xref="A2.T6.3.3.3.3.m1.1.1.3.2.cmml">t</mi><mo id="A2.T6.3.3.3.3.m1.1.1.3.1" xref="A2.T6.3.3.3.3.m1.1.1.3.1.cmml">+</mo><mn id="A2.T6.3.3.3.3.m1.1.1.3.3" xref="A2.T6.3.3.3.3.m1.1.1.3.3.cmml">1</mn></mrow></msub><annotation-xml encoding="MathML-Content" id="A2.T6.3.3.3.3.m1.1b"><apply id="A2.T6.3.3.3.3.m1.1.1.cmml" xref="A2.T6.3.3.3.3.m1.1.1"><csymbol cd="ambiguous" id="A2.T6.3.3.3.3.m1.1.1.1.cmml" xref="A2.T6.3.3.3.3.m1.1.1">subscript</csymbol><ci id="A2.T6.3.3.3.3.m1.1.1.2.cmml" xref="A2.T6.3.3.3.3.m1.1.1.2">𝑠</ci><apply id="A2.T6.3.3.3.3.m1.1.1.3.cmml" xref="A2.T6.3.3.3.3.m1.1.1.3"><plus id="A2.T6.3.3.3.3.m1.1.1.3.1.cmml" xref="A2.T6.3.3.3.3.m1.1.1.3.1"></plus><ci id="A2.T6.3.3.3.3.m1.1.1.3.2.cmml" xref="A2.T6.3.3.3.3.m1.1.1.3.2">𝑡</ci><cn id="A2.T6.3.3.3.3.m1.1.1.3.3.cmml" type="integer" xref="A2.T6.3.3.3.3.m1.1.1.3.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.T6.3.3.3.3.m1.1c">s_{t+1}</annotation><annotation encoding="application/x-llamapun" id="A2.T6.3.3.3.3.m1.1d">italic_s start_POSTSUBSCRIPT italic_t + 1 end_POSTSUBSCRIPT</annotation></semantics></math>
</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A2.T6.3.3.4.1">
<td class="ltx_td ltx_align_center ltx_border_t" id="A2.T6.3.3.4.1.1"><span class="ltx_text ltx_font_smallcaps" id="A2.T6.3.3.4.1.1.1">Reason</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A2.T6.3.3.4.1.2">temperature sampling</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A2.T6.3.3.4.1.3"><span class="ltx_text ltx_font_smallcaps" id="A2.T6.3.3.4.1.3.1">Rationale</span></td>
</tr>
<tr class="ltx_tr" id="A2.T6.3.3.5.2">
<td class="ltx_td ltx_align_center" id="A2.T6.3.3.5.2.1"><span class="ltx_text ltx_font_smallcaps" id="A2.T6.3.3.5.2.1.1">GenQuery</span></td>
<td class="ltx_td ltx_align_center" id="A2.T6.3.3.5.2.2">temperature sampling</td>
<td class="ltx_td ltx_align_center" id="A2.T6.3.3.5.2.3"><span class="ltx_text ltx_font_smallcaps" id="A2.T6.3.3.5.2.3.1">Query</span></td>
</tr>
<tr class="ltx_tr" id="A2.T6.3.3.6.3">
<td class="ltx_td ltx_align_center" id="A2.T6.3.3.6.3.1"><span class="ltx_text ltx_font_smallcaps" id="A2.T6.3.3.6.3.1.1">Retrieve</span></td>
<td class="ltx_td ltx_align_center" id="A2.T6.3.3.6.3.2">top-k candidates</td>
<td class="ltx_td ltx_align_center" id="A2.T6.3.3.6.3.3"><span class="ltx_text ltx_font_smallcaps" id="A2.T6.3.3.6.3.3.1">Doc</span></td>
</tr>
<tr class="ltx_tr" id="A2.T6.3.3.7.4">
<td class="ltx_td ltx_align_center" id="A2.T6.3.3.7.4.1"><span class="ltx_text ltx_font_smallcaps" id="A2.T6.3.3.7.4.1.1">Rationale</span></td>
<td class="ltx_td ltx_align_center" id="A2.T6.3.3.7.4.2">reasoning, querying, retrieving</td>
<td class="ltx_td ltx_align_center" id="A2.T6.3.3.7.4.3">
<span class="ltx_text ltx_font_smallcaps" id="A2.T6.3.3.7.4.3.1">Reason</span> / <span class="ltx_text ltx_font_smallcaps" id="A2.T6.3.3.7.4.3.2">GenQuery</span> / <span class="ltx_text ltx_font_smallcaps" id="A2.T6.3.3.7.4.3.3">Retrieve</span>
</td>
</tr>
<tr class="ltx_tr" id="A2.T6.3.3.8.5">
<td class="ltx_td ltx_align_center" id="A2.T6.3.3.8.5.1"><span class="ltx_text ltx_font_smallcaps" id="A2.T6.3.3.8.5.1.1">Query</span></td>
<td class="ltx_td ltx_align_center" id="A2.T6.3.3.8.5.2">reasoning, querying, retrieving</td>
<td class="ltx_td ltx_align_center" id="A2.T6.3.3.8.5.3">
<span class="ltx_text ltx_font_smallcaps" id="A2.T6.3.3.8.5.3.1">Reason</span> / <span class="ltx_text ltx_font_smallcaps" id="A2.T6.3.3.8.5.3.2">GenQuery</span> / <span class="ltx_text ltx_font_smallcaps" id="A2.T6.3.3.8.5.3.3">Retrieve</span>
</td>
</tr>
<tr class="ltx_tr" id="A2.T6.3.3.9.6">
<td class="ltx_td ltx_align_center ltx_border_bb" id="A2.T6.3.3.9.6.1"><span class="ltx_text ltx_font_smallcaps" id="A2.T6.3.3.9.6.1.1">Doc</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="A2.T6.3.3.9.6.2">reasoning, querying, retrieving</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="A2.T6.3.3.9.6.3">
<span class="ltx_text ltx_font_smallcaps" id="A2.T6.3.3.9.6.3.1">Reason</span> / <span class="ltx_text ltx_font_smallcaps" id="A2.T6.3.3.9.6.3.2">GenQuery</span> / <span class="ltx_text ltx_font_smallcaps" id="A2.T6.3.3.9.6.3.3">Retrieve</span>
</td>
</tr>
</tbody>
</table>
</span></div>
</figure>
</section>
<section class="ltx_appendix" id="A3">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix C </span>CR-Planner State Types and Action Spaces</h2>
<div class="ltx_para ltx_noindent" id="A3.p1">
<p class="ltx_p" id="A3.p1.1">We provide detailed information on state types and action spaces for CR-Planner in Table <a class="ltx_ref" href="https://arxiv.org/html/2410.01428v1#A2.T6" title="Table 6 ‣ Appendix B A Running Example ‣ Can We Further Elicit Reasoning in LLMs? Critic-Guided Planning with Retrieval-Augmentation for Solving Challenging Tasks"><span class="ltx_text ltx_ref_tag">6</span></a>.</p>
</div>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
</article>
</div>
<footer class="ltx_page_footer">
<div class="ltx_page_logo">Generated  on Wed Oct  2 11:19:29 2024 by <a class="ltx_LaTeXML_logo" href="http://dlmf.nist.gov/LaTeXML/"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img alt="Mascot Sammy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg=="/></a>
</div></footer>
</div>
</body>
</html>
