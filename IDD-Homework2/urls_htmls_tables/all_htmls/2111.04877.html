<!DOCTYPE html><html prefix="dcterms: http://purl.org/dc/terms/" lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>[2111.04877] 1 Introduction</title><meta property="og:description" content="Cross-device Federated Learning (FL) is a distributed learning paradigm with several challenges that differentiate it from traditional distributed learning, variability in the system characteristics on each device, and…">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="1 Introduction">
<meta name="twitter:image:src" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta name="twitter:image:alt" content="ar5iv logo">
<meta property="og:title" content="1 Introduction">
<meta property="og:site_name" content="ar5iv">
<meta property="og:image" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta property="og:type" content="article">
<meta property="og:url" content="https://ar5iv.labs.arxiv.org/html/2111.04877">

<!--Generated on Sat Mar  2 02:56:00 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<script>
  function detectColorScheme(){
    var theme="light";
    var current_theme = localStorage.getItem("ar5iv_theme");
    if(current_theme){
      if(current_theme == "dark"){
        theme = "dark";
      } }
    else if(!window.matchMedia) { return false; }
    else if(window.matchMedia("(prefers-color-scheme: dark)").matches) {
      theme = "dark"; }
    if (theme=="dark") {
      document.documentElement.setAttribute("data-theme", "dark");
    } else {
      document.documentElement.setAttribute("data-theme", "light"); } }

  detectColorScheme();

  function toggleColorScheme(){
    var current_theme = localStorage.getItem("ar5iv_theme");
    if (current_theme) {
      if (current_theme == "light") {
        localStorage.setItem("ar5iv_theme", "dark"); }
      else {
        localStorage.setItem("ar5iv_theme", "light"); } }
    else {
        localStorage.setItem("ar5iv_theme", "dark"); }
    detectColorScheme(); }
</script>
<link media="all" rel="stylesheet" href="/assets/ar5iv-fonts.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv-site.0.2.2.css">
</head>
<body>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document">
<div id="p1" class="ltx_para">
<p id="p1.1" class="ltx_p">marginparsep has been altered.
<br class="ltx_break">topmargin has been altered.
<br class="ltx_break">marginparwidth has been altered.
<br class="ltx_break">marginparpush has been altered.
<br class="ltx_break"><span id="p1.1.1" class="ltx_text ltx_font_bold ltx_font_italic">The page layout violates the ICML style.</span>
Please do not change the page layout, or include packages like geometry,
savetrees, or fullpage, which change it for you.
We’re not able to reliably undo arbitrary changes to the style. Please remove
the offending package(s), or layout-changing commands and try again.</p>
</div>
<div id="p3" class="ltx_para ltx_align_center">
<p id="p3.1" class="ltx_p"><span class="ltx_rule" style="width:100%;height:2.0pt;background:black;display:inline-block;"> </span></p>
</div>
<div id="p4" class="ltx_para ltx_align_center">
<p id="p4.1" class="ltx_p"><span id="p4.1.1" class="ltx_text ltx_font_smallcaps">Papaya: Practical, Private, and Scalable Federated Learning</span></p>
</div>
<div id="p5" class="ltx_para ltx_align_center">
<p id="p5.1" class="ltx_p"><span class="ltx_rule" style="width:100%;height:1.0pt;background:black;display:inline-block;"> </span></p>
</div>
<div id="p6" class="ltx_para">
<p id="p6.1" class="ltx_p ltx_align_center"><span id="p6.1.1" class="ltx_text ltx_font_bold">Anonymous Authors</span><sup id="p6.1.2" class="ltx_sup">1 </sup></p>
</div>
<div id="p7" class="ltx_para ltx_noindent">
<br class="ltx_break">
</div>
<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p id="id2.2" class="ltx_p">Cross-device Federated Learning (FL) is a distributed learning paradigm with several challenges that differentiate it from traditional distributed learning, variability in the system characteristics on each device, and millions of clients coordinating with a central server being primary ones. Most FL systems described in the literature are synchronous – they perform a synchronized aggregation of model updates from individual clients. Scaling synchronous FL is challenging since increasing the number of clients training in parallel leads to diminishing returns in training speed, analogous to large-batch training. Moreover, stragglers hinder synchronous FL training. In this work, we outline a production asynchronous FL system design. Our work tackles the aforementioned issues, sketches of some of the system design challenges and their solutions, and touches upon principles that emerged from building a production FL system for millions of clients. Empirically, we demonstrate that asynchronous FL converges faster than synchronous FL when training across nearly one hundred million devices. In particular, in high concurrency settings, asynchronous FL is 5<math id="id1.1.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="id1.1.m1.1a"><mo id="id1.1.m1.1.1" xref="id1.1.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="id1.1.m1.1b"><times id="id1.1.m1.1.1.cmml" xref="id1.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="id1.1.m1.1c">\times</annotation></semantics></math> faster and has nearly 8<math id="id2.2.m2.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="id2.2.m2.1a"><mo id="id2.2.m2.1.1" xref="id2.2.m2.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="id2.2.m2.1b"><times id="id2.2.m2.1.1.cmml" xref="id2.2.m2.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="id2.2.m2.1c">\times</annotation></semantics></math> less communication overhead than synchronous FL.</p>
</div>
<span id="footnotex1" class="ltx_note ltx_role_footnotetext"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">footnotetext: </span>
<sup id="footnotex1.1" class="ltx_sup">1</sup>Anonymous Institution, Anonymous City, Anonymous Region, Anonymous Country.
Correspondence to: Anonymous Author &lt;anon.email@domain.com&gt;.
 
<br class="ltx_break">Preliminary work. Under review by the
Machine Learning and Systems (MLSys) Conference. Do not distribute.</span></span></span>
<section id="S1" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>Introduction</h2>

<div id="S1.p1" class="ltx_para ltx_noindent">
<p id="S1.p1.1" class="ltx_p">Cross-device <em id="S1.p1.1.1" class="ltx_emph ltx_font_italic">federated learning</em> (FL) is a distributed learning paradigm where a large collection of clients collaborate to train a machine learning model while the raw training data stays on client devices. FL promises to train high-quality models by leveraging data from massive client populations, while ensuring security and privacy of client data.</p>
</div>
<div id="S1.p2" class="ltx_para ltx_noindent">
<p id="S1.p2.1" class="ltx_p">In traditional parallel systems, <em id="S1.p2.1.1" class="ltx_emph ltx_font_italic">concurrency</em> refers to the number of processors running a parallel application, and <em id="S1.p2.1.2" class="ltx_emph ltx_font_italic">utilization</em> refers to the fraction of processors actively computing at any time. In this paper we focus on the scalability of FL systems: <span id="S1.p2.1.3" class="ltx_text ltx_font_italic">“a measure of [their] capacity to effectively utilize an increasing number of processors”</span> <cite class="ltx_cite ltx_citemacro_cite">Kumar &amp; Gupta (<a href="#bib.bib20" title="" class="ltx_ref">1994</a>)</cite>. In the context of FL, concurrency refers to the number of clients training simultaneously, and our aim is to develop systems that can accelerate training by training concurrently on more clients. Companies like Apple, Meta, Google, and others have the potential to scale FL training to <span id="S1.p2.1.4" class="ltx_text ltx_font_italic">hundreds of millions or billions of clients</span>.</p>
</div>
<div id="S1.p3" class="ltx_para ltx_noindent">
<p id="S1.p3.1" class="ltx_p">Prior work describing FL systems has focused on synchronous training <cite class="ltx_cite ltx_citemacro_cite">Bonawitz et al. (<a href="#bib.bib5" title="" class="ltx_ref">2019</a>); Paulik et al. (<a href="#bib.bib27" title="" class="ltx_ref">2021</a>); Ludwig et al. (<a href="#bib.bib21" title="" class="ltx_ref">2020</a>); <a href="#bib.bib25" title="" class="ltx_ref">NVIDIA </a>; <a href="#bib.bib32" title="" class="ltx_ref">WeBank </a></cite>. Synchronous FL (SyncFL) training proceeds in rounds, as illustrated in Figure <a href="#S1.F1" title="Figure 1 ‣ 1 Introduction" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>. The number of clients participating in each round corresponds to the concurrency.<span id="footnote1" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_tag ltx_tag_note">1</span>In the SyncFL literature, concurrency is also referred to as <span id="footnote1.1" class="ltx_text ltx_font_italic">clients per round</span> <cite class="ltx_cite ltx_citemacro_cite">McMahan et al. (<a href="#bib.bib22" title="" class="ltx_ref">2016</a>)</cite>.</span></span></span> In each round, clients download the current server model, train this model locally on their respective data, and report a model update back to the server. Once all client updates are ready, they are aggregated, and then the server computes the new model using the aggregated updates.</p>
</div>
<figure id="S1.F1" class="ltx_figure"><img src="/html/2111.04877/assets/x1.png" id="S1.F1.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="415" height="255" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1: </span>Example of SyncFL with a concurrency of 4; i.e., up to 4 devices can train in parallel. The server model is updated once all clients are ready (once the <em id="S1.F1.4.1" class="ltx_emph ltx_font_italic">aggregation goal</em> is achieved), so concurrency determines how frequently a new server model is produced. If one client drops out mid-round (e.g., Device E), a new client, (e.g., Device C) is selected to take its place. Utilization decreases once some devices have returned updates, and the round completion time depends on the slowest-returning device — the straggler. To overcome stragglers, <em id="S1.F1.5.2" class="ltx_emph ltx_font_italic">over-selection</em> is often used, in which case the concurrency may be higher than the aggregation goal, and once the aggregation goal is achieved, updates from other devices still processing are discarded. Note that mid-round client replacement, like Device C replacing Device E, is not possible in some other SyncFL Systems <cite class="ltx_cite ltx_citemacro_cite">Bonawitz et al. (<a href="#bib.bib5" title="" class="ltx_ref">2019</a>)</cite>, but is possible in <span id="S1.F1.6.3" class="ltx_text ltx_font_smallcaps">Papaya</span>’s implementation of SyncFL. We see up to 10% of clients drop.</figcaption>
</figure>
<div id="S1.p4" class="ltx_para ltx_noindent">
<p id="S1.p4.1" class="ltx_p">SyncFL faces two main challenges when scaling. First, there are many sources of heterogeneity in cross-device FL <cite class="ltx_cite ltx_citemacro_cite">Kairouz et al. (<a href="#bib.bib15" title="" class="ltx_ref">2019</a>)</cite>: clients have different hardware capabilities (processor speeds, memory sizes), and data can be highly imbalanced across clients, with some clients having multiple orders of magnitude more data than others. In synchronous systems, heterogeneity results in <em id="S1.p4.1.1" class="ltx_emph ltx_font_italic">stragglers</em> — clients in the tail take much longer to complete local training and prolong the time to complete each round of training, hampering utilization. Over-selection is commonly used to reduce the impact of stragglers on the runtime of SyncFL methods <cite class="ltx_cite ltx_citemacro_cite">Bonawitz et al. (<a href="#bib.bib5" title="" class="ltx_ref">2019</a>)</cite>. Over-selection results in discarding updates from the slowest-responding clients selected in each round, and it has been noted that this may bias the trained model against slow-responding clients.</p>
</div>
<div id="S1.p5" class="ltx_para ltx_noindent">
<p id="S1.p5.1" class="ltx_p">The second challenge SyncFL faces is that increasing concurrency in synchronous training corresponds to using larger cohorts (group of clients participating in a round); i.e., more user updates averaged before performing a server update. This leads to similar effects as using large batches in traditional data-parallel training <cite class="ltx_cite ltx_citemacro_cite">Keskar et al. (<a href="#bib.bib18" title="" class="ltx_ref">2017</a>)</cite>. Large-cohort training has been found to make inefficient use of client updates <cite class="ltx_cite ltx_citemacro_cite">Bonawitz et al. (<a href="#bib.bib5" title="" class="ltx_ref">2019</a>); Charles et al. (<a href="#bib.bib9" title="" class="ltx_ref">2021</a>)</cite>. Consequently, increasing cohort size does not reduce wall-clock training time proportionally.</p>
</div>
<div id="S1.p6" class="ltx_para ltx_noindent">
<p id="S1.p6.1" class="ltx_p">Asynchronous FL (AsyncFL, see Section <a href="#S3" title="3 Proposed Design" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a>) can potentially alleviate these challenges. In AsyncFL, clients return updates to be aggregated as soon as the updates are ready, and a new client may then begin computing updates immediately. Client training is decoupled from server model updates. Consequently, AsyncFL is not impacted by stragglers and utilization can be kept high (essentially at 100%) throughout training. However, as with all asynchronous systems, AsyncFL must handle <em id="S1.p6.1.1" class="ltx_emph ltx_font_italic">staleness</em> — updates from clients, especially slow-responding clients, based on a server model that has been updated many times in the interim, and hence may not provide useful information for training <cite class="ltx_cite ltx_citemacro_cite">Bertsekas &amp; Tsitsiklis (<a href="#bib.bib4" title="" class="ltx_ref">1989</a>)</cite>. AsyncFL methods have been previously explored <cite class="ltx_cite ltx_citemacro_cite">Xie et al. (<a href="#bib.bib34" title="" class="ltx_ref">2019</a>); Nguyen et al. (<a href="#bib.bib24" title="" class="ltx_ref">2021</a>); Xu et al. (<a href="#bib.bib35" title="" class="ltx_ref">2021</a>)</cite>, but none has yet been demonstrated and evaluated at scale.</p>
</div>
<div id="S1.p7" class="ltx_para ltx_noindent">
<p id="S1.p7.1" class="ltx_p"><span id="S1.p7.1.1" class="ltx_text ltx_font_bold">Contributions.</span> This paper presents <span id="S1.p7.1.2" class="ltx_text ltx_font_smallcaps">Papaya</span>,<span id="footnote2" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">2</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">2</sup><span class="ltx_tag ltx_tag_note">2</span>Why <span id="footnote2.1" class="ltx_text ltx_font_smallcaps">Papaya</span>? Say “privacy-preserving AI” five times in a row, fast.</span></span></span> <span id="S1.p7.1.3" class="ltx_text ltx_font_bold ltx_font_italic">the first production FL system to support asynchronous and synchronous training at scale.</span> We introduce a novel asynchronous secure aggregation protocol, allowing clients to communicate updates to the server in a cryptographically secure manner without needing to wait until other clients are ready to perform secure aggregation. This enables the implementation of FL with buffered asynchronous aggregation that has been recently introduced in <cite class="ltx_cite ltx_citemacro_cite">Nguyen et al. (<a href="#bib.bib24" title="" class="ltx_ref">2021</a>)</cite>.</p>
</div>
<div id="S1.p8" class="ltx_para ltx_noindent">
<p id="S1.p8.2" class="ltx_p">We evaluate <span id="S1.p8.2.3" class="ltx_text ltx_font_smallcaps">Papaya</span> in Section <a href="#S7" title="7 Evaluation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">7</span></a> by training a language model for next-word prediction on a population of <span id="S1.p8.2.4" class="ltx_text ltx_font_italic">millions</span> of devices in the field. We demonstrate that AsyncFL is substantially more scalable than SyncFL. Although asynchronous execution results in some stale client responses, staleness in AsyncFL can be controlled by choosing an appropriate <em id="S1.p8.2.5" class="ltx_emph ltx_font_italic">aggregation goal</em> in buffered asynchronous aggregation <cite class="ltx_cite ltx_citemacro_cite">Nguyen et al. (<a href="#bib.bib24" title="" class="ltx_ref">2021</a>)</cite>. The aggregation goal is the number of client updates that need to be received before the server performs a model update.
Consequently, AsyncFL can compute many more server updates than SyncFL in a fixed amount of time, leading to much better scaling than SyncFL. Moreover, with AsyncFL, the number of server updates per unit time increases nearly linearly with concurrency. When comparing both approaches in terms of wall-clock time to reach a target test loss, <span id="S1.p8.2.2" class="ltx_text ltx_font_bold ltx_font_italic">we show that AsyncFL is almost 5<math id="S1.p8.1.1.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="S1.p8.1.1.m1.1a"><mo id="S1.p8.1.1.m1.1.1" xref="S1.p8.1.1.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="S1.p8.1.1.m1.1b"><times id="S1.p8.1.1.m1.1.1.cmml" xref="S1.p8.1.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S1.p8.1.1.m1.1c">\times</annotation></semantics></math> faster
and 8<math id="S1.p8.2.2.m2.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="S1.p8.2.2.m2.1a"><mo id="S1.p8.2.2.m2.1.1" xref="S1.p8.2.2.m2.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="S1.p8.2.2.m2.1b"><times id="S1.p8.2.2.m2.1.1.cmml" xref="S1.p8.2.2.m2.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S1.p8.2.2.m2.1c">\times</annotation></semantics></math> more communication-efficient than SyncFL.</span></p>
</div>
<div id="S1.p9" class="ltx_para ltx_noindent">
<p id="S1.p9.1" class="ltx_p">Finally, <span id="S1.p9.1.1" class="ltx_text ltx_font_bold ltx_font_italic">we demonstrate that AsyncFL achieves more fair models than SyncFL with over-selection</span>. We observe very high correlation between slow devices and devices with many training samples. Discarding the updates from slow devices results in biasing the model trained using SyncFL with over-selection: the test perplexity for clients in the 99th percentile increases by 53% when enabling over-selection. This bias is not introduced when training with AsyncFL.</p>
</div>
</section>
<section id="S2" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>Understanding the landscape of federated learning at-scale</h2>

<figure id="S2.F2" class="ltx_figure">
<div id="S2.F2.1" class="ltx_block ltx_minipage ltx_align_center ltx_align_top" style="width:433.6pt;">
<img src="/html/2111.04877/assets/x2.png" id="S2.F2.1.g1" class="ltx_graphics ltx_img_landscape" width="461" height="307" alt="Refer to caption">
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 2: </span>Histogram of client execution times (note: x-axis is on a logarithmic scale). Because of stragglers, the mean round duration of SyncFL with concurrency set to 1000 is much larger than the mean client execution time.</figcaption>
</figure>
<div id="S2.p1" class="ltx_para ltx_noindent">
<p id="S2.p1.1" class="ltx_p">Building a robust federated learning system faces key design challenges:</p>
<ul id="S2.I1" class="ltx_itemize">
<li id="S2.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S2.I1.i1.p1" class="ltx_para">
<p id="S2.I1.i1.p1.1" class="ltx_p"><span id="S2.I1.i1.p1.1.1" class="ltx_text ltx_font_italic">System and data heterogeneity</span>, where client devices participating in FL exhibit different system characteristics and possess different amounts of training data, leading to large differences in training time, and</p>
</div>
</li>
<li id="S2.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S2.I1.i2.p1" class="ltx_para ltx_noindent">
<p id="S2.I1.i2.p1.1" class="ltx_p"><span id="S2.I1.i2.p1.1.1" class="ltx_text ltx_font_italic">Scalability</span>, where the training time speedup with higher degree of concurrency experiences diminishing return and plateaus quickly.</p>
</div>
</li>
</ul>
</div>
<div id="S2.p2" class="ltx_para ltx_noindent">
<p id="S2.p2.1" class="ltx_p">To demonstrate the impact of the aforementioned challenges faced by FL, we begin by examining the degree of data and system heterogeneity observed in production when <span id="S2.p2.1.1" class="ltx_text ltx_font_italic">hundreds of millions</span> of client devices jointly train a global model. To understand the limit of SyncFL approaches, we take a data-driven approach to demonstrate the impact of <span id="S2.p2.1.2" class="ltx_text ltx_font_italic">scale</span> on the state-of-the-art synchronous model aggregation protocol.</p>
</div>
<div id="S2.p3" class="ltx_para ltx_noindent">
<p id="S2.p3.1" class="ltx_p"><span id="S2.p3.1.1" class="ltx_text ltx_font_bold">System and Data Heterogeneity.</span>
Compute capabilities of mobile devices in the field differ by an order of magnitude  <cite class="ltx_cite ltx_citemacro_cite">Wu et al. (<a href="#bib.bib33" title="" class="ltx_ref">2019</a>)</cite>. Moreover, the number of training examples also varies widely across users <cite class="ltx_cite ltx_citemacro_cite">Caldas et al. (<a href="#bib.bib7" title="" class="ltx_ref">2018</a>)</cite>. In combination, system and data heterogeneity can result in large differences in training time. Variance in training time results in <span id="S2.p3.1.2" class="ltx_text ltx_font_italic">stragglers</span> that slow down the overall training time in SyncFL.</p>
</div>
<div id="S2.p4" class="ltx_para ltx_noindent">
<p id="S2.p4.1" class="ltx_p">Figure <a href="#S2.F2" title="Figure 2 ‣ 2 Understanding the landscape of federated learning at-scale" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a> shows the distribution of training times across millions of clients for a common FL application (language model training, Section <a href="#S7" title="7 Evaluation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">7</span></a>). The per-client training time distribution spans more than two orders of magnitude. When running SyncFL with concurrency and aggregation goal set to 1000, the average round completion time is <math id="S2.p4.1.m1.1" class="ltx_math_unparsed" alttext="21\times" display="inline"><semantics id="S2.p4.1.m1.1a"><mrow id="S2.p4.1.m1.1b"><mn id="S2.p4.1.m1.1.1">21</mn><mo lspace="0.222em" id="S2.p4.1.m1.1.2">×</mo></mrow><annotation encoding="application/x-tex" id="S2.p4.1.m1.1c">21\times</annotation></semantics></math> larger than the mean client training time.</p>
</div>
<div id="S2.p5" class="ltx_para ltx_noindent">
<p id="S2.p5.1" class="ltx_p">To mitigate the impact of stragglers in SyncFL, some systems use over-selection <cite class="ltx_cite ltx_citemacro_cite">Bonawitz et al. (<a href="#bib.bib5" title="" class="ltx_ref">2019</a>)</cite>. In Section <a href="#S7.SS4" title="7.4 Analysis of Sampling Bias from Over-Selection ‣ 7 Evaluation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">7.4</span></a>, we show that over-selection causes sampling bias, thus producing models that are unfair to stragglers.</p>
</div>
<figure id="S2.F3" class="ltx_figure">
<div id="S2.F3.1" class="ltx_block ltx_minipage ltx_align_center ltx_align_top" style="width:433.6pt;">
<img src="/html/2111.04877/assets/x3.png" id="S2.F3.1.g1" class="ltx_graphics ltx_img_square" width="461" height="467" alt="Refer to caption">
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 3: </span>
We use SyncFL to train a language model until it reaches a target accuracy, while varying the concurrency from 130 to 2600 in Section <a href="#S7" title="7 Evaluation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">7</span></a>. The client population is around 100 million
(Top) As concurrency increases, training time decreases rapidly at first, but then plateaus. (Bottom) As concurrency increases, SyncFL becomes communication inefficient. Communication trips refers to the number of client updates received at the server.</figcaption>
</figure>
<div id="S2.p6" class="ltx_para ltx_noindent">
<p id="S2.p6.1" class="ltx_p"><span id="S2.p6.1.1" class="ltx_text ltx_font_bold">Scalability.</span> To further minimize the training time to convergence, a straightforward approach is to scale up the overall training throughput of the FL system by increasing the degree of training concurrency.
Figure <a href="#S2.F3" title="Figure 3 ‣ 2 Understanding the landscape of federated learning at-scale" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a> illustrates the training time to convergence and the communication overhead for the SyncFL method FedAdam <cite class="ltx_cite ltx_citemacro_cite">Reddi et al. (<a href="#bib.bib28" title="" class="ltx_ref">2020</a>)</cite> as the number of concurrently training users increases from 130 to 2600.
As concurrency increases, training time decreases slowly, while communication resource consumption increases much faster. For example, doubling the concurrency from 1300 to 2600 decreases the overall training time by only 17% while increasing communication costs by 73%.</p>
</div>
<div id="S2.p7" class="ltx_para ltx_noindent">
<p id="S2.p7.1" class="ltx_p">We need resilient solutions that handle <span id="S2.p7.1.1" class="ltx_text ltx_font_italic">data</span> and <span id="S2.p7.1.2" class="ltx_text ltx_font_italic">system heterogeneity</span> at scale. At the same time, as shown in Figure <a href="#S2.F3" title="Figure 3 ‣ 2 Understanding the landscape of federated learning at-scale" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a>, we are at the scaling limit of synchronous model aggregation. To build FL suitable for billions of clients, we need a fundamentally different model aggregation protocol that is resilient to heterogeneity (client independence), scalable to large cohort sizes (beyond the order of hundreds), and secure (asynchronous secure aggregation).
Next we describe the proposed design of <span id="S2.p7.1.3" class="ltx_text ltx_font_smallcaps">Papaya</span> and demonstrate how AsyncFL can improve large-scale FL by improving scalability and straggler resilience.</p>
</div>
</section>
<section id="S3" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span>Proposed Design</h2>

<div id="S3.p1" class="ltx_para ltx_noindent">
<p id="S3.p1.1" class="ltx_p">In this section, we first describe the AsyncFL algorithm <span id="S3.p1.1.1" class="ltx_text ltx_font_smallcaps">Papaya</span> uses. Next, we discuss the challenges in implementing AsyncFL in a large-scale production system.</p>
</div>
<section id="S3.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.1 </span>AsyncFL Algorithm</h3>

<div id="S3.SS1.p1" class="ltx_para ltx_noindent">
<p id="S3.SS1.p1.1" class="ltx_p"><span id="S3.SS1.p1.1.1" class="ltx_text ltx_font_smallcaps">Papaya</span> implements a recently proposed AsyncFL algorithm, FedBuff <cite class="ltx_cite ltx_citemacro_cite">Nguyen et al. (<a href="#bib.bib24" title="" class="ltx_ref">2021</a>)</cite>. In FedBuff, there is no notion of rounds: clients download, train, and upload updates asynchronously (Figure <a href="#S3.F4" title="Figure 4 ‣ 3.1 AsyncFL Algorithm ‣ 3 Proposed Design" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4</span></a>). After a client finishes local training, it uploads the model update (difference between the trained local model and initial model it received from the server before training).
The aggregator tracks progress towards an <em id="S3.SS1.p1.1.2" class="ltx_emph ltx_font_italic">aggregation goal</em>, the number of client updates that need to be received before the server performs a model update.
As soon as the aggregation goal has been achieved, the aggregated update is released and the server model update is performed.
Each client update is weighted by the number of examples the client trained on and a factor depending on the staleness of the update. <em id="S3.SS1.p1.1.3" class="ltx_emph ltx_font_italic">Staleness</em> is defined as the difference between the model version that a client uses to start local training and the server model version at the time when a client uploads its model update. For example, Figure <a href="#S3.F4" title="Figure 4 ‣ 3.1 AsyncFL Algorithm ‣ 3 Proposed Design" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4</span></a> shows FedBuff with 4 concurrent users and an aggregation goal of 2. Device A’s update has a staleness of 1 since the server model was updated once while Device A was training.
In the rest of the paper, AsyncFL refers to our implementation of the FedBuff algorithm in <span id="S3.SS1.p1.1.4" class="ltx_text ltx_font_smallcaps">Papaya</span>.</p>
</div>
<figure id="S3.F4" class="ltx_figure"><img src="/html/2111.04877/assets/x4.png" id="S3.F4.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="415" height="256" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 4: </span>Example of AsyncFL with concurrency of 4, and where the aggregation goal is 2. In SyncFL with over-selection, the aggregation goal is less than the concurrency to reduce the straggler effect, but this results in wasted client effort and can lead to model bias. In contrast, running AsyncFL with aggregation goal less than concurrency does not result in wasted client effort, but rather some updates may be <em id="S3.F4.2.1" class="ltx_emph ltx_font_italic">stale</em>. However, staleness can be controlled by increasing the aggregation goal, and utilization remains high throughout training.</figcaption>
</figure>
<div id="S3.SS1.p2" class="ltx_para ltx_noindent">
<p id="S3.SS1.p2.1" class="ltx_p">We show in Section <a href="#S7" title="7 Evaluation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">7</span></a> that in a large-scale production setting with system and data heterogeneity, AsyncFL is faster and more resource efficient than SyncFL.
However, AsyncFL brings a unique set of challenges that require careful system design.</p>
</div>
</section>
<section id="S3.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.2 </span>System Design challenges in AsyncFL</h3>

<div id="S3.SS2.p1" class="ltx_para ltx_noindent">
<p id="S3.SS2.p1.1" class="ltx_p">Existing large-scale FL systems are designed to run SyncFL <cite class="ltx_cite ltx_citemacro_cite">Bonawitz et al. (<a href="#bib.bib5" title="" class="ltx_ref">2019</a>); Paulik et al. (<a href="#bib.bib27" title="" class="ltx_ref">2021</a>)</cite>. Hence, their architectures are not compatible with asynchronous training. There are four main reasons for this incompatibility, which we discuss next.</p>
</div>
<div id="S3.SS2.p2" class="ltx_para ltx_noindent">
<p id="S3.SS2.p2.1" class="ltx_p"><span id="S3.SS2.p2.1.1" class="ltx_text ltx_font_bold">Client Selection. </span> Client selection in SyncFL is based on forming synchronous cohorts. For example, in <cite class="ltx_cite ltx_citemacro_citet">Bonawitz et al. (<a href="#bib.bib5" title="" class="ltx_ref">2019</a>)</cite> a client cannot begin training until the entire cohort of clients has been selected. To support AsyncFL, we design a client selection mechanism that avoids any inter-client dependencies (Section <a href="#S6.SS1" title="6.1 Client Independence ‣ 6 System Design" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6.1</span></a>).</p>
</div>
<div id="S3.SS2.p3" class="ltx_para ltx_noindent">
<p id="S3.SS2.p3.1" class="ltx_p"><span id="S3.SS2.p3.1.1" class="ltx_text ltx_font_bold">Secure Aggregation. </span> Secure Aggregation (SecAgg) improves the privacy of FL algorithms by hiding individual client model updates ensuring that the server can only view the final aggregation of all model updates. Most FL systems implement SecAgg based on secure multi-party computation (SMPC) <cite class="ltx_cite ltx_citemacro_cite">Bonawitz et al. (<a href="#bib.bib6" title="" class="ltx_ref">2016</a>); So et al. (<a href="#bib.bib31" title="" class="ltx_ref">2021b</a>)</cite>. SMPC-based SecAgg requires clients participating in a round to form a cohort and run a multi-leg protocol through the duration of the round. These requirements are not compatible with asynchronous training.</p>
</div>
<div id="S3.SS2.p4" class="ltx_para ltx_noindent">
<p id="S3.SS2.p4.1" class="ltx_p">Motivated by these challenges, we propose a novel incremental Asynchronous Secure Aggregation algorithm that uses a Trusted Execution Environment  <cite class="ltx_cite ltx_citemacro_cite">Karl et al. (<a href="#bib.bib17" title="" class="ltx_ref">2020b</a>)</cite> in Section <a href="#S5" title="5 Secure Aggregation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5</span></a>.</p>
</div>
<div id="S3.SS2.p5" class="ltx_para ltx_noindent">
<p id="S3.SS2.p5.1" class="ltx_p"><span id="S3.SS2.p5.1.1" class="ltx_text ltx_font_bold">Client Replacement for High Utilization. </span> Cohort-based SyncFL systems do not replace clients in the middle of a round <cite class="ltx_cite ltx_citemacro_citep">(Bonawitz et al., <a href="#bib.bib5" title="" class="ltx_ref">2019</a>)</cite>. However, AsyncFL requires continuous replacement of clients that have finished training or have failed. We describe a fast client replacement mechanism that enables our AsyncFL implementation to achieve close to 100% client utilization, significantly higher than SyncFL (Section <a href="#S6.SS2" title="6.2 High Client Utilization ‣ 6 System Design" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6.2</span></a>).</p>
</div>
<div id="S3.SS2.p6" class="ltx_para ltx_noindent">
<p id="S3.SS2.p6.1" class="ltx_p"><span id="S3.SS2.p6.1.1" class="ltx_text ltx_font_bold">Support for Fast Model Aggregation. </span> AsyncFL generates up to 30<math id="S3.SS2.p6.1.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="S3.SS2.p6.1.m1.1a"><mo id="S3.SS2.p6.1.m1.1.1" xref="S3.SS2.p6.1.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="S3.SS2.p6.1.m1.1b"><times id="S3.SS2.p6.1.m1.1.1.cmml" xref="S3.SS2.p6.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p6.1.m1.1c">\times</annotation></semantics></math> more server model updates per unit time than SyncFL, as shown below in Figure <a href="#S6.F8" title="Figure 8 ‣ 6.3 Fast Model Aggregation ‣ 6 System Design" class="ltx_ref"><span class="ltx_text ltx_ref_tag">8</span></a>. We design our system for fast model aggregation that can support much higher throughput of server model updates (Section <a href="#S6.SS3" title="6.3 Fast Model Aggregation ‣ 6 System Design" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6.3</span></a>) than what typical SyncFL systems can achieve.</p>
</div>
<div id="S3.SS2.p7" class="ltx_para ltx_noindent">
<p id="S3.SS2.p7.1" class="ltx_p">In the next sections, we describe the design of our production system and explain how it supports the four requirements above.</p>
</div>
</section>
</section>
<section id="S4" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span>System Components</h2>

<figure id="S4.F5" class="ltx_figure">
<div id="S4.F5.1" class="ltx_block ltx_minipage ltx_align_center ltx_align_top" style="width:433.6pt;">
<img src="/html/2111.04877/assets/figures/system.png" id="S4.F5.1.g1" class="ltx_graphics ltx_img_landscape" width="598" height="435" alt="Refer to caption">
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 5: </span><span id="S4.F5.3.1" class="ltx_text ltx_font_smallcaps">Papaya</span> high-level architecture.</figcaption>
</figure>
<div id="S4.p1" class="ltx_para ltx_noindent">
<p id="S4.p1.1" class="ltx_p">The <span id="S4.p1.1.1" class="ltx_text ltx_font_smallcaps">Papaya</span> high-level design involves two applications: a server application that runs on a server in the data center, and the client application that runs on end-user devices. The server has three main components: Coordinator, Selector, and Aggregator. While the number of Selectors and Aggregators can scale elastically based on the workload demand, there is only one Coordinator; see Figure <a href="#S4.F5" title="Figure 5 ‣ 4 System Components" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5</span></a>.</p>
</div>
<div id="S4.p2" class="ltx_para ltx_noindent">
<p id="S4.p2.1" class="ltx_p"><span id="S4.p2.1.1" class="ltx_text ltx_font_smallcaps">Papaya</span>’s system architecture is influenced by the Google FL stack (GFL) described in <cite class="ltx_cite ltx_citemacro_citet">Bonawitz et al. (<a href="#bib.bib5" title="" class="ltx_ref">2019</a>)</cite>. We use the same names for the main components, and their functions are similar to those of GFL. However, their implementation and interactions are substantially different. GFL supports only SyncFL, whereas <span id="S4.p2.1.2" class="ltx_text ltx_font_smallcaps">Papaya</span> supports both SyncFL and AsyncFL. As a result, our design has fundamental differences in the protocol, execution, and scalability which enable it to achieve faster model convergence and straggler resilience; these differences are discussed further in Section <a href="#S8" title="8 Related Work" class="ltx_ref"><span class="ltx_text ltx_ref_tag">8</span></a>. First, we briefly describe the responsibilities of the main components and their interactions.</p>
</div>
<div id="S4.p3" class="ltx_para ltx_noindent">
<p id="S4.p3.1" class="ltx_p"><span id="S4.p3.1.1" class="ltx_text ltx_font_bold">Coordinator.</span> The Coordinator performs three main functions. First, it assigns FL tasks to Aggregators, as discussed in Section <a href="#S6.SS3" title="6.3 Fast Model Aggregation ‣ 6 System Design" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6.3</span></a>. Second, the Coordinator assigns clients to FL tasks, as described in Section <a href="#S6.SS1" title="6.1 Client Independence ‣ 6 System Design" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6.1</span></a>. Finally, it provides centralized coordination and ensures that tasks progress in the face of Aggregator failures.</p>
</div>
<div id="S4.p4" class="ltx_para ltx_noindent">
<p id="S4.p4.1" class="ltx_p"><span id="S4.p4.1.1" class="ltx_text ltx_font_bold">Selector. </span> The Selector is the only component that directly communicates with clients. When necessary, it forwards client requests to other components. The Selector has two main responsibilities. For client selection, it advertises available tasks to clients, and summarizes current client availability for the Coordinator, as described in Section <a href="#S6.SS2" title="6.2 High Client Utilization ‣ 6 System Design" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6.2</span></a>. For client participation, the Selector routes client requests to the corresponding Aggregator, as described in Section <a href="#S6.SS3" title="6.3 Fast Model Aggregation ‣ 6 System Design" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6.3</span></a>.</p>
</div>
<div id="S4.p5" class="ltx_para ltx_noindent">
<p id="S4.p5.1" class="ltx_p"><span id="S4.p5.1.1" class="ltx_text ltx_font_bold">Aggregator. </span> Every task is assigned to a single Aggregator for the duration of the task (apart from failures and network partitions), as described in <a href="#S6.SS3" title="6.3 Fast Model Aggregation ‣ 6 System Design" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Section</span> <span class="ltx_text ltx_ref_tag">6.3</span></a>. The Aggregator has three main responsibilities. First, it aggregates client model updates to produce new versions of the server model. Second, it drives participating clients to run the client execution protocol, as described in <a href="#S6.SS1" title="6.1 Client Independence ‣ 6 System Design" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Section</span> <span class="ltx_text ltx_ref_tag">6.1</span></a>. Finally, it tracks whether or not a task needs more clients and reports this to the Coordinator, as discussed in <a href="#S6.SS2" title="6.2 High Client Utilization ‣ 6 System Design" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Section</span> <span class="ltx_text ltx_ref_tag">6.2</span></a>.</p>
</div>
<div id="S4.p6" class="ltx_para ltx_noindent">
<p id="S4.p6.1" class="ltx_p"><span id="S4.p6.1.1" class="ltx_text ltx_font_bold">Client Runtime.</span> The client runs on end-user devices and monitors training eligibility criteria such as whether or not the device is idle. It also tracks prior participation history to enable fair and unbiased client selection. If a client is eligible for training, the client checks in with the server to execute the FL client protocol as described in <a href="#S6.SS1" title="6.1 Client Independence ‣ 6 System Design" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Section</span> <span class="ltx_text ltx_ref_tag">6.1</span></a>.</p>
</div>
</section>
<section id="S5" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">5 </span>Secure Aggregation</h2>

<figure id="S5.F6" class="ltx_figure"><img src="/html/2111.04877/assets/x5.png" id="S5.F6.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="369" height="215" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 6: </span>Data transfer time versus aggregation goal to transfer data across boundary into TEE for a 20MB model. We ran a benchmark to obtain the data transfer time for <math id="S5.F6.3.m1.1" class="ltx_Math" alttext="K=1" display="inline"><semantics id="S5.F6.3.m1.1b"><mrow id="S5.F6.3.m1.1.1" xref="S5.F6.3.m1.1.1.cmml"><mi id="S5.F6.3.m1.1.1.2" xref="S5.F6.3.m1.1.1.2.cmml">K</mi><mo id="S5.F6.3.m1.1.1.1" xref="S5.F6.3.m1.1.1.1.cmml">=</mo><mn id="S5.F6.3.m1.1.1.3" xref="S5.F6.3.m1.1.1.3.cmml">1</mn></mrow><annotation-xml encoding="MathML-Content" id="S5.F6.3.m1.1c"><apply id="S5.F6.3.m1.1.1.cmml" xref="S5.F6.3.m1.1.1"><eq id="S5.F6.3.m1.1.1.1.cmml" xref="S5.F6.3.m1.1.1.1"></eq><ci id="S5.F6.3.m1.1.1.2.cmml" xref="S5.F6.3.m1.1.1.2">𝐾</ci><cn type="integer" id="S5.F6.3.m1.1.1.3.cmml" xref="S5.F6.3.m1.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.F6.3.m1.1d">K=1</annotation></semantics></math> and use that to extrapolate other points in this figure, as naive TEE’s data transmission is linear in <math id="S5.F6.4.m2.1" class="ltx_Math" alttext="K" display="inline"><semantics id="S5.F6.4.m2.1b"><mi id="S5.F6.4.m2.1.1" xref="S5.F6.4.m2.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S5.F6.4.m2.1c"><ci id="S5.F6.4.m2.1.1.cmml" xref="S5.F6.4.m2.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.F6.4.m2.1d">K</annotation></semantics></math>. Transferring the full model from each client to the TEE (Naive TSA) would take around 6500 milliseconds just for data transfer (when aggregation goal is 1000). In AsyncSecAgg each client only sends a 16-byte seed to the TEE, independent of model size.
In this figure, the trusted hardware resides in the same machine as server. The latency is potentially greater if the trusted hardware is through a cloud provider. </figcaption>
</figure>
<div id="S5.p1" class="ltx_para ltx_noindent">
<p id="S5.p1.1" class="ltx_p">In this section, we summarize our SecAgg mechanism to enable AsyncFL. In an honest-but-curious threat model, SecAgg allows the server to compute aggregated client updates without observing individual client updates. There are two main approaches for implementing SecAgg: using Secure Multiparty Computation (SMPC) or a Trusted Execution Environment (TEE).</p>
</div>
<div id="S5.p2" class="ltx_para ltx_noindent">
<p id="S5.p2.1" class="ltx_p">Existing SMPC-based SecAgg approaches <cite class="ltx_cite ltx_citemacro_cite">Bonawitz et al. (<a href="#bib.bib6" title="" class="ltx_ref">2016</a>); Bell et al. (<a href="#bib.bib3" title="" class="ltx_ref">2020</a>); So et al. (<a href="#bib.bib31" title="" class="ltx_ref">2021b</a>)</cite> hinder asynchronous training, as they require cohort formulation and inter-client communication in each round.<span id="footnote3" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">3</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">3</sup><span class="ltx_tag ltx_tag_note">3</span>A concurrent work  <cite class="ltx_cite ltx_citemacro_cite">So et al. (<a href="#bib.bib30" title="" class="ltx_ref">2021a</a>)</cite> describes an SMPC method that may overcome some of these issues. This approach could be an alternative to the TEE-based approach described here.</span></span></span> Meanwhile, AsyncFL does not have a discrete notion of rounds; clients join and finish training asynchronously.</p>
</div>
<div id="S5.p3" class="ltx_para ltx_noindent">
<p id="S5.p3.4" class="ltx_p">On the other hand, naive TEE aggregation is unscalable. Asymptotically, this approach transmits <math id="S5.p3.1.m1.1" class="ltx_Math" alttext="O(K\cdot m)" display="inline"><semantics id="S5.p3.1.m1.1a"><mrow id="S5.p3.1.m1.1.1" xref="S5.p3.1.m1.1.1.cmml"><mi id="S5.p3.1.m1.1.1.3" xref="S5.p3.1.m1.1.1.3.cmml">O</mi><mo lspace="0em" rspace="0em" id="S5.p3.1.m1.1.1.2" xref="S5.p3.1.m1.1.1.2.cmml">​</mo><mrow id="S5.p3.1.m1.1.1.1.1" xref="S5.p3.1.m1.1.1.1.1.1.cmml"><mo stretchy="false" id="S5.p3.1.m1.1.1.1.1.2" xref="S5.p3.1.m1.1.1.1.1.1.cmml">(</mo><mrow id="S5.p3.1.m1.1.1.1.1.1" xref="S5.p3.1.m1.1.1.1.1.1.cmml"><mi id="S5.p3.1.m1.1.1.1.1.1.2" xref="S5.p3.1.m1.1.1.1.1.1.2.cmml">K</mi><mo lspace="0.222em" rspace="0.222em" id="S5.p3.1.m1.1.1.1.1.1.1" xref="S5.p3.1.m1.1.1.1.1.1.1.cmml">⋅</mo><mi id="S5.p3.1.m1.1.1.1.1.1.3" xref="S5.p3.1.m1.1.1.1.1.1.3.cmml">m</mi></mrow><mo stretchy="false" id="S5.p3.1.m1.1.1.1.1.3" xref="S5.p3.1.m1.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S5.p3.1.m1.1b"><apply id="S5.p3.1.m1.1.1.cmml" xref="S5.p3.1.m1.1.1"><times id="S5.p3.1.m1.1.1.2.cmml" xref="S5.p3.1.m1.1.1.2"></times><ci id="S5.p3.1.m1.1.1.3.cmml" xref="S5.p3.1.m1.1.1.3">𝑂</ci><apply id="S5.p3.1.m1.1.1.1.1.1.cmml" xref="S5.p3.1.m1.1.1.1.1"><ci id="S5.p3.1.m1.1.1.1.1.1.1.cmml" xref="S5.p3.1.m1.1.1.1.1.1.1">⋅</ci><ci id="S5.p3.1.m1.1.1.1.1.1.2.cmml" xref="S5.p3.1.m1.1.1.1.1.1.2">𝐾</ci><ci id="S5.p3.1.m1.1.1.1.1.1.3.cmml" xref="S5.p3.1.m1.1.1.1.1.1.3">𝑚</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.p3.1.m1.1c">O(K\cdot m)</annotation></semantics></math> data across the host-TEE boundary, where <math id="S5.p3.2.m2.1" class="ltx_Math" alttext="K" display="inline"><semantics id="S5.p3.2.m2.1a"><mi id="S5.p3.2.m2.1.1" xref="S5.p3.2.m2.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S5.p3.2.m2.1b"><ci id="S5.p3.2.m2.1.1.cmml" xref="S5.p3.2.m2.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.p3.2.m2.1c">K</annotation></semantics></math> is the aggregation goal and <math id="S5.p3.3.m3.1" class="ltx_Math" alttext="m" display="inline"><semantics id="S5.p3.3.m3.1a"><mi id="S5.p3.3.m3.1.1" xref="S5.p3.3.m3.1.1.cmml">m</mi><annotation-xml encoding="MathML-Content" id="S5.p3.3.m3.1b"><ci id="S5.p3.3.m3.1.1.cmml" xref="S5.p3.3.m3.1.1">𝑚</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.p3.3.m3.1c">m</annotation></semantics></math> is the model size. Transferring data across the TEE boundary is time-consuming (<a href="#S5.F6" title="In 5 Secure Aggregation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">6</span></a>): taking nearly 650 milliseconds for 100 clients (<math id="S5.p3.4.m4.1" class="ltx_Math" alttext="K=100" display="inline"><semantics id="S5.p3.4.m4.1a"><mrow id="S5.p3.4.m4.1.1" xref="S5.p3.4.m4.1.1.cmml"><mi id="S5.p3.4.m4.1.1.2" xref="S5.p3.4.m4.1.1.2.cmml">K</mi><mo id="S5.p3.4.m4.1.1.1" xref="S5.p3.4.m4.1.1.1.cmml">=</mo><mn id="S5.p3.4.m4.1.1.3" xref="S5.p3.4.m4.1.1.3.cmml">100</mn></mrow><annotation-xml encoding="MathML-Content" id="S5.p3.4.m4.1b"><apply id="S5.p3.4.m4.1.1.cmml" xref="S5.p3.4.m4.1.1"><eq id="S5.p3.4.m4.1.1.1.cmml" xref="S5.p3.4.m4.1.1.1"></eq><ci id="S5.p3.4.m4.1.1.2.cmml" xref="S5.p3.4.m4.1.1.2">𝐾</ci><cn type="integer" id="S5.p3.4.m4.1.1.3.cmml" xref="S5.p3.4.m4.1.1.3">100</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.p3.4.m4.1c">K=100</annotation></semantics></math>), each with a 20MB model. This data transfer time increases with aggregation goal. Trusted hardware trades performance for security guarantees.</p>
</div>
<div id="S5.p4" class="ltx_para ltx_noindent">
<p id="S5.p4.1" class="ltx_p">Motivated by these challenges, we propose an <em id="S5.p4.1.1" class="ltx_emph ltx_font_italic">Asynchronous SecAgg</em> mechanism, relying on a TEE and an attestation mechanism; ensuring the Trusted Secure Aggregator (TSA) has not been tampered with. In this approach, <span id="S5.p4.1.2" class="ltx_text ltx_font_italic">random masking</span> relies on an additive one-time-pad to protect client updates and utilizes the TSA to generate aggregated random masks, unmasking aggregated client updates. The overall mechanism depends on a secure virtual channel established between each client and the TSA using the Diffie-Hellman key exchange protocol <cite class="ltx_cite ltx_citemacro_citep">(Merkle, <a href="#bib.bib23" title="" class="ltx_ref">1978</a>)</cite>. Then, the mechanism leverages the TSA’s ability to regenerate a random <em id="S5.p4.1.3" class="ltx_emph ltx_font_italic">unmask</em> based on the clients’ secret received by the TSA over the secure channel.</p>
</div>
<div id="S5.p5" class="ltx_para ltx_noindent">
<p id="S5.p5.1" class="ltx_p">Asynchronous SecAgg empowers client independence and fast incremental aggregation. The protocol consists of the following steps: (1) A participating client establishes a secure virtual channel with the TSA and validates the secure aggregation configuration and integrity of the TSA; (2) The client shares the masked model update with a corresponding Aggregator and the random seed used to generate the mask with the TSA; (3) The aggregator incrementally aggregates masked model updates; (4) The aggregator requests the TSA to generate the unmasking vector once the configured aggregation goal is reached; (5) The aggregator unmasks the aggregated model updates using the unmasking vector and creates a new server model.</p>
</div>
<div id="S5.p6" class="ltx_para ltx_noindent">
<p id="S5.p6.1" class="ltx_p">The random seed, usually 16 bytes shared between each client and the TSA, allows the two parties to share an as-large-as-the-model mask at a constant cost. Asymptotically, this approach only transmits <math id="S5.p6.1.m1.1" class="ltx_Math" alttext="O(K+m)" display="inline"><semantics id="S5.p6.1.m1.1a"><mrow id="S5.p6.1.m1.1.1" xref="S5.p6.1.m1.1.1.cmml"><mi id="S5.p6.1.m1.1.1.3" xref="S5.p6.1.m1.1.1.3.cmml">O</mi><mo lspace="0em" rspace="0em" id="S5.p6.1.m1.1.1.2" xref="S5.p6.1.m1.1.1.2.cmml">​</mo><mrow id="S5.p6.1.m1.1.1.1.1" xref="S5.p6.1.m1.1.1.1.1.1.cmml"><mo stretchy="false" id="S5.p6.1.m1.1.1.1.1.2" xref="S5.p6.1.m1.1.1.1.1.1.cmml">(</mo><mrow id="S5.p6.1.m1.1.1.1.1.1" xref="S5.p6.1.m1.1.1.1.1.1.cmml"><mi id="S5.p6.1.m1.1.1.1.1.1.2" xref="S5.p6.1.m1.1.1.1.1.1.2.cmml">K</mi><mo id="S5.p6.1.m1.1.1.1.1.1.1" xref="S5.p6.1.m1.1.1.1.1.1.1.cmml">+</mo><mi id="S5.p6.1.m1.1.1.1.1.1.3" xref="S5.p6.1.m1.1.1.1.1.1.3.cmml">m</mi></mrow><mo stretchy="false" id="S5.p6.1.m1.1.1.1.1.3" xref="S5.p6.1.m1.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S5.p6.1.m1.1b"><apply id="S5.p6.1.m1.1.1.cmml" xref="S5.p6.1.m1.1.1"><times id="S5.p6.1.m1.1.1.2.cmml" xref="S5.p6.1.m1.1.1.2"></times><ci id="S5.p6.1.m1.1.1.3.cmml" xref="S5.p6.1.m1.1.1.3">𝑂</ci><apply id="S5.p6.1.m1.1.1.1.1.1.cmml" xref="S5.p6.1.m1.1.1.1.1"><plus id="S5.p6.1.m1.1.1.1.1.1.1.cmml" xref="S5.p6.1.m1.1.1.1.1.1.1"></plus><ci id="S5.p6.1.m1.1.1.1.1.1.2.cmml" xref="S5.p6.1.m1.1.1.1.1.1.2">𝐾</ci><ci id="S5.p6.1.m1.1.1.1.1.1.3.cmml" xref="S5.p6.1.m1.1.1.1.1.1.3">𝑚</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.p6.1.m1.1c">O(K+m)</annotation></semantics></math> data across the boundary of the TSA. Appendix <a href="#A2" title="Appendix B Protocol Design and Security Proof" class="ltx_ref"><span class="ltx_text ltx_ref_tag">B</span></a> presents more details about our secure aggregation protocol, including a security proof.</p>
</div>
</section>
<section id="S6" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">6 </span>System Design</h2>

<div id="S6.p1" class="ltx_para ltx_noindent">
<p id="S6.p1.1" class="ltx_p">In this section, we describe the system requirements to run AsyncFL at scale and the design choices we made to fulfill these requirements. We focus on the three most important requirements for AsyncFL outside of Asynchronous SecAgg (discussed in Section <a href="#S5" title="5 Secure Aggregation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5</span></a>). For completeness, other requirements for running AsyncFL are described in Appendix <a href="#A5" title="Appendix E Additional System Design Details" class="ltx_ref"><span class="ltx_text ltx_ref_tag">E</span></a>.</p>
</div>
<div id="S6.p2" class="ltx_para ltx_noindent">
<p id="S6.p2.1" class="ltx_p">There are three main requirements. First, AsyncFL relies on clients training asynchronously. Hence, the client protocol must not introduce any dependence between clients. Second, AsyncFL can support higher client utilization than SyncFL. To enable this, our system must perform fast client replacement. Third, AsyncFL takes many more server model steps than SyncFL per unit time. Hence, our system must support fast model aggregation.</p>
</div>
<section id="S6.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">6.1 </span>Client Independence</h3>

<div id="S6.SS1.p1" class="ltx_para ltx_noindent">
<p id="S6.SS1.p1.1" class="ltx_p">To enable asynchronous training, <span id="S6.SS1.p1.1.1" class="ltx_text ltx_font_smallcaps">Papaya</span>’s client protocol deliberately avoids any inter-client dependency. Moreover, transient client failures do not cause clients to dropout because the client protocol is based on virtual sessions instead of persistent connections. At a high level, the protocol can be split into two phases: selection and participation. To explain the selection process, we first define <span id="S6.SS1.p1.1.2" class="ltx_text ltx_font_italic">client demand</span> for a task as the difference between the target concurrency and the number of users already participating in the training of the task.</p>
</div>
<div id="S6.SS1.p2" class="ltx_para ltx_noindent">
<p id="S6.SS1.p2.1" class="ltx_p"><span id="S6.SS1.p2.1.1" class="ltx_text ltx_font_bold">Selection.</span> For a client, the goal of the selection phase is to find a task with positive client demand. Thus, a client can complete the selection phase with either <span id="S6.SS1.p2.1.2" class="ltx_text ltx_font_italic">acceptance</span> (client is accepted for participation) or <span id="S6.SS1.p2.1.3" class="ltx_text ltx_font_italic">rejection</span> (client will try to participate at another time).</p>
</div>
<div id="S6.SS1.p3" class="ltx_para ltx_noindent">
<p id="S6.SS1.p3.1" class="ltx_p"><span id="S6.SS1.p3.1.1" class="ltx_text ltx_font_bold">Participation.</span> Once a client is accepted, the goal of the participation phase is for a client to share a trained model with the server. Participation consists of four stages. 1. A client first <span id="S6.SS1.p3.1.2" class="ltx_text ltx_font_italic">downloads</span> model parameters, model code and configuration from a content delivery network. 2. Next, the client <span id="S6.SS1.p3.1.3" class="ltx_text">trains</span> the downloaded model on its local data. 3. Once the training finishes, the client <span id="S6.SS1.p3.1.4" class="ltx_text ltx_font_italic">reports</span> its status to the server. The server shares an upload configuration with the client and, if enabled, the SecAgg configuration. 4. In the final stage, the client <span id="S6.SS1.p3.1.5" class="ltx_text ltx_font_italic">uploads</span> the model in chunks, potentially after masking the model if SecAgg is enabled. All stages happen within a virtual session established during selection.</p>
</div>
<figure id="S6.F7" class="ltx_figure"><img src="/html/2111.04877/assets/x6.png" id="S6.F7.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="368" height="205" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 7: </span>AsyncFL achieves high client utilization while SyncFL client utilization fluctuates. SyncFL proceeds in <em id="S6.F7.2.1" class="ltx_emph ltx_font_italic">rounds</em>. The number of active clients (client utilization) increases at the beginning of a round as clients join the cohort, and it falls gradually towards the end of the round due to stragglers. In AsyncFL, the number of active clients stays relatively constant over time; as clients finish training and upload their results, other clients take their place. Both configurations in the figure have max concurrency of 1300. SyncFL uses 30% over-selection.</figcaption>
</figure>
</section>
<section id="S6.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">6.2 </span>High Client Utilization</h3>

<div id="S6.SS2.p1" class="ltx_para ltx_noindent">
<p id="S6.SS2.p1.1" class="ltx_p">AsyncFL is capable of higher client utilization compared to SyncFL. This is mainly because in SyncFL the number of active clients increases at the beginning of a round as clients join the cohort, and it falls gradually towards the end of the round as the server waits for all clients to finish training (<a href="#S6.F7" title="In 6.1 Client Independence ‣ 6 System Design" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">7</span></a>). On the contrary, in AsyncFL there is no cohort formation; as soon as one client completes training or fails, a new one is selected. Thus AsyncFL achieves high utilization throughout training. We show in <a href="#S6.F7" title="In 6.1 Client Independence ‣ 6 System Design" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">7</span></a> that utilization in our AsyncFL implementation is close to 100% throughout training.
To realize high utilization, an AsyncFL system needs to replace completed and failed clients quickly. Achieving high utilization is especially challenging in a multi-tenant FL system, where multiple FL tasks are running in parallel, and a single client may be compatible with many tasks.</p>
</div>
<div id="S6.SS2.p2" class="ltx_para ltx_noindent">
<p id="S6.SS2.p2.1" class="ltx_p">We now describe the client assignment process which is responsible for maintaining high utilization. There are three important steps to assigning clients to tasks: tracking client demand for each task, tracking task eligibility for each client, and performing the actual assignment.</p>
</div>
<div id="S6.SS2.p3" class="ltx_para ltx_noindent">
<p id="S6.SS2.p3.1" class="ltx_p"><span id="S6.SS2.p3.1.1" class="ltx_text ltx_font_bold">Tracking client demand for each task.</span> First, each Aggregator tracks client demand for the tasks that are assigned to it. When a client finishes training or fails, the Aggregator increases client demand for the associated task. Next, the Coordinator pools together information from all Aggregators into a consolidated view of client demand for every task in the system. Note that the Coordinator must explicitly account for clients that have been assigned to a task, but have not yet confirmed the assignment.</p>
</div>
<div id="S6.SS2.p4" class="ltx_para ltx_noindent">
<p id="S6.SS2.p4.1" class="ltx_p"><span id="S6.SS2.p4.1.1" class="ltx_text ltx_font_bold">Tracking task eligibility for each client.</span> For each available client, the Coordinator constructs a list of eligible tasks. A task is eligible if the client is compatible with its requirements (e.g., can train the model of the task), and if the task has positive client demand.</p>
</div>
<div id="S6.SS2.p5" class="ltx_para ltx_noindent">
<p id="S6.SS2.p5.1" class="ltx_p"><span id="S6.SS2.p5.1.1" class="ltx_text ltx_font_bold">Task assignment.</span> Once an eligible task list is constructed for a client, the Coordinator randomly assigns the client to an eligible task. Concretely, the Coordinator instructs Selectors to forward the client to the Aggregator responsible for the task.</p>
</div>
</section>
<section id="S6.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">6.3 </span>Fast Model Aggregation</h3>

<div id="S6.SS3.p1" class="ltx_para ltx_noindent">
<p id="S6.SS3.p1.1" class="ltx_p">As shown in Figure <a href="#S6.F8" title="Figure 8 ‣ 6.3 Fast Model Aggregation ‣ 6 System Design" class="ltx_ref"><span class="ltx_text ltx_ref_tag">8</span></a>, AsyncFL generates server model updates up to 30<math id="S6.SS3.p1.1.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="S6.SS3.p1.1.m1.1a"><mo id="S6.SS3.p1.1.m1.1.1" xref="S6.SS3.p1.1.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="S6.SS3.p1.1.m1.1b"><times id="S6.SS3.p1.1.m1.1.1.cmml" xref="S6.SS3.p1.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.SS3.p1.1.m1.1c">\times</annotation></semantics></math> more frequently than SyncFL. Thus, fast model aggregation in a scalable AsyncFL system is critical. In this section, we describe how <span id="S6.SS3.p1.1.1" class="ltx_text ltx_font_smallcaps">Papaya</span> efficiently aggregates client updates.</p>
</div>
<figure id="S6.F8" class="ltx_figure"><img src="/html/2111.04877/assets/x7.png" id="S6.F8.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="369" height="201" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 8: </span> Server Model Updates per hour with concurrency. At a concurrency of <math id="S6.F8.3.m1.2" class="ltx_Math" alttext="2{,}300" display="inline"><semantics id="S6.F8.3.m1.2b"><mrow id="S6.F8.3.m1.2.3.2" xref="S6.F8.3.m1.2.3.1.cmml"><mn id="S6.F8.3.m1.1.1" xref="S6.F8.3.m1.1.1.cmml">2</mn><mo id="S6.F8.3.m1.2.3.2.1" xref="S6.F8.3.m1.2.3.1.cmml">,</mo><mn id="S6.F8.3.m1.2.2" xref="S6.F8.3.m1.2.2.cmml">300</mn></mrow><annotation-xml encoding="MathML-Content" id="S6.F8.3.m1.2c"><list id="S6.F8.3.m1.2.3.1.cmml" xref="S6.F8.3.m1.2.3.2"><cn type="integer" id="S6.F8.3.m1.1.1.cmml" xref="S6.F8.3.m1.1.1">2</cn><cn type="integer" id="S6.F8.3.m1.2.2.cmml" xref="S6.F8.3.m1.2.2">300</cn></list></annotation-xml><annotation encoding="application/x-tex" id="S6.F8.3.m1.2d">2{,}300</annotation></semantics></math>, AsyncFL generates roughly 30<math id="S6.F8.4.m2.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="S6.F8.4.m2.1b"><mo id="S6.F8.4.m2.1.1" xref="S6.F8.4.m2.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="S6.F8.4.m2.1c"><times id="S6.F8.4.m2.1.1.cmml" xref="S6.F8.4.m2.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.F8.4.m2.1d">\times</annotation></semantics></math> more server model updates per hour. The aggregation goal for AsyncFL is fixed at 100.</figcaption>
</figure>
<div id="S6.SS3.p2" class="ltx_para ltx_noindent">
<p id="S6.SS3.p2.1" class="ltx_p"><span id="S6.SS3.p2.1.1" class="ltx_text ltx_font_bold">Persistent Aggregator.</span> In our system, Aggregators are persistent and stateful because creating a new Aggregator for each task incurs a substantial overhead. Therefore, the Coordinator moves tasks between Aggregators only when it detects failed or overloaded Aggregators. The Coordinator evenly distributes tasks among available Aggregators using the estimated workload of a task. The Coordinator estimates this workload using the task concurrency and model size.</p>
</div>
<div id="S6.SS3.p3" class="ltx_para ltx_noindent">
<p id="S6.SS3.p3.1" class="ltx_p"><span id="S6.SS3.p3.1.1" class="ltx_text ltx_font_bold">Parallel Model Aggregation.</span> Once a client completes training, it uploads the trained serialized model update to the server. This update is then pushed into an in-memory queue on the Aggregator. A different thread drains the queue by de-serializing the updates into trainable parameters and aggregating them. To speed up this aggregation, we parallelize the aggregation process across available cores. To reduce lock contention, the ID of the thread performing intermediate aggregation is hashed to choose one of the intermediate aggregates. Once the cumulative number of aggregated model updates reaches the aggregation goal, the final aggregation is performed and a new server model is generated. Note that the aggregation goal in SyncFL is typically <math id="S6.SS3.p3.1.m1.1" class="ltx_math_unparsed" alttext="1.3\times" display="inline"><semantics id="S6.SS3.p3.1.m1.1a"><mrow id="S6.SS3.p3.1.m1.1b"><mn id="S6.SS3.p3.1.m1.1.1">1.3</mn><mo lspace="0.222em" id="S6.SS3.p3.1.m1.1.2">×</mo></mrow><annotation encoding="application/x-tex" id="S6.SS3.p3.1.m1.1c">1.3\times</annotation></semantics></math> concurrency (30% over-selection), while in AsyncFL it is independent of concurrency.</p>
</div>
</section>
</section>
<section id="S7" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">7 </span>Evaluation</h2>

<figure id="S7.F9" class="ltx_figure">
<div id="S7.F9.3" class="ltx_block ltx_minipage ltx_align_center ltx_align_top" style="width:487.8pt;">
<img src="/html/2111.04877/assets/x8.png" id="S7.F9.1.g1" class="ltx_graphics ltx_img_landscape" width="171" height="117" alt="Refer to caption"><img src="/html/2111.04877/assets/x9.png" id="S7.F9.2.g2" class="ltx_graphics ltx_img_landscape" width="171" height="122" alt="Refer to caption"><img src="/html/2111.04877/assets/x10.png" id="S7.F9.3.g3" class="ltx_graphics ltx_img_landscape" width="171" height="117" alt="Refer to caption">
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 9: </span>(left) Number of hours to reach a target loss. For AsyncFL, a server update is produced every 100 client updates, <math id="S7.F9.5.m1.1" class="ltx_Math" alttext="K" display="inline"><semantics id="S7.F9.5.m1.1b"><mi id="S7.F9.5.m1.1.1" xref="S7.F9.5.m1.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S7.F9.5.m1.1c"><ci id="S7.F9.5.m1.1.1.cmml" xref="S7.F9.5.m1.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S7.F9.5.m1.1d">K</annotation></semantics></math> = 100. For SyncFL, we use 30% over-selection as in <cite class="ltx_cite ltx_citemacro_cite">Bonawitz et al. (<a href="#bib.bib5" title="" class="ltx_ref">2019</a>)</cite> to mitigate stragglers. (middle) Speed up of AsyncFL relative to SyncFL. AsyncFL is 5x faster than SyncFL. (right) As concurrency increases, AsyncFL outperforms SyncFL by increasingly larger amounts. </figcaption>
</figure>
<div id="S7.p1" class="ltx_para ltx_noindent">
<p id="S7.p1.1" class="ltx_p">In this section, we present evaluation results for AsyncFL. We first compare the convergence speed, scalability, and communication efficiency of AsyncFL with SyncFL. Next, we analyze the source of AsyncFL’s speed up. We then show that SyncFL can be either straggler resilient (with over-selection) or be unbiased (without over-selection), but not both simultaneously. In contrast, AsyncFL is straggler resilient without introducing bias.</p>
</div>
<section id="S7.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">7.1 </span>Experimental Setup</h3>

<div id="S7.SS1.p1" class="ltx_para ltx_noindent">
<p id="S7.SS1.p1.1" class="ltx_p">To study the performance of AsyncFL, we train an LSTM-based language model <cite class="ltx_cite ltx_citemacro_cite">Kim et al. (<a href="#bib.bib19" title="" class="ltx_ref">2015</a>)</cite>, a common FL application <cite class="ltx_cite ltx_citemacro_cite">Hard et al. (<a href="#bib.bib13" title="" class="ltx_ref">2019</a>)</cite>, on a population of nearly 100 million Android phones. We repeat each experiment 3 times, each at the same time of the day, and report the average. AsyncFL and SyncFL are run at the same time, so they have access to the same client population.</p>
</div>
<div id="S7.SS1.p2" class="ltx_para ltx_noindent">
<p id="S7.SS1.p2.1" class="ltx_p">Following the requirements in <cite class="ltx_cite ltx_citemacro_citet">Hard et al. (<a href="#bib.bib13" title="" class="ltx_ref">2019</a>)</cite>, a client device can participate in FL training only when idle, charging, and on an unmetered network. Similar to <cite class="ltx_cite ltx_citemacro_citet">Bonawitz et al. (<a href="#bib.bib5" title="" class="ltx_ref">2019</a>)</cite>, a timeout is imposed to limit the client training time; we set the timeout to 4 minutes. The distribution of client execution times is analyzed in Section <a href="#S7.SS4" title="7.4 Analysis of Sampling Bias from Over-Selection ‣ 7 Evaluation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">7.4</span></a>.</p>
</div>
<div id="S7.SS1.p3" class="ltx_para ltx_noindent">
<p id="S7.SS1.p3.1" class="ltx_p">For both SyncFL and AsyncFL, we use SGD on the client and FedAdam <cite class="ltx_cite ltx_citemacro_cite">Reddi et al. (<a href="#bib.bib28" title="" class="ltx_ref">2020</a>)</cite> on the server. For the server optimizer, we use Adam’s default learning rate and tune the first-moment parameter in simulation. We run hyperparameter sweeps in simulation, using a representative dataset, for the client optimizer to find the best client learning rate. Each client runs one local epoch of training with batch size <math id="S7.SS1.p3.1.m1.1" class="ltx_Math" alttext="B=32" display="inline"><semantics id="S7.SS1.p3.1.m1.1a"><mrow id="S7.SS1.p3.1.m1.1.1" xref="S7.SS1.p3.1.m1.1.1.cmml"><mi id="S7.SS1.p3.1.m1.1.1.2" xref="S7.SS1.p3.1.m1.1.1.2.cmml">B</mi><mo id="S7.SS1.p3.1.m1.1.1.1" xref="S7.SS1.p3.1.m1.1.1.1.cmml">=</mo><mn id="S7.SS1.p3.1.m1.1.1.3" xref="S7.SS1.p3.1.m1.1.1.3.cmml">32</mn></mrow><annotation-xml encoding="MathML-Content" id="S7.SS1.p3.1.m1.1b"><apply id="S7.SS1.p3.1.m1.1.1.cmml" xref="S7.SS1.p3.1.m1.1.1"><eq id="S7.SS1.p3.1.m1.1.1.1.cmml" xref="S7.SS1.p3.1.m1.1.1.1"></eq><ci id="S7.SS1.p3.1.m1.1.1.2.cmml" xref="S7.SS1.p3.1.m1.1.1.2">𝐵</ci><cn type="integer" id="S7.SS1.p3.1.m1.1.1.3.cmml" xref="S7.SS1.p3.1.m1.1.1.3">32</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S7.SS1.p3.1.m1.1c">B=32</annotation></semantics></math>. We partition each client’s data into train, test, and validation sets randomly.</p>
</div>
<div id="S7.SS1.p4" class="ltx_para ltx_noindent">
<p id="S7.SS1.p4.3" class="ltx_p">Our system has two configuration parameters. First, for both SyncFL and AsyncFL tasks, concurrency specifies the maximum number of concurrently participating devices. Second, for AsyncFL tasks, <math id="S7.SS1.p4.1.m1.1" class="ltx_Math" alttext="K" display="inline"><semantics id="S7.SS1.p4.1.m1.1a"><mi id="S7.SS1.p4.1.m1.1.1" xref="S7.SS1.p4.1.m1.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S7.SS1.p4.1.m1.1b"><ci id="S7.SS1.p4.1.m1.1.1.cmml" xref="S7.SS1.p4.1.m1.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S7.SS1.p4.1.m1.1c">K</annotation></semantics></math> is the aggregation goal, controlling the size and frequency of server update. The server produces a new model every <math id="S7.SS1.p4.2.m2.1" class="ltx_Math" alttext="K" display="inline"><semantics id="S7.SS1.p4.2.m2.1a"><mi id="S7.SS1.p4.2.m2.1.1" xref="S7.SS1.p4.2.m2.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S7.SS1.p4.2.m2.1b"><ci id="S7.SS1.p4.2.m2.1.1.cmml" xref="S7.SS1.p4.2.m2.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S7.SS1.p4.2.m2.1c">K</annotation></semantics></math> client model updates. In our experience, we find that choosing <math id="S7.SS1.p4.3.m3.1" class="ltx_Math" alttext="K" display="inline"><semantics id="S7.SS1.p4.3.m3.1a"><mi id="S7.SS1.p4.3.m3.1.1" xref="S7.SS1.p4.3.m3.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S7.SS1.p4.3.m3.1b"><ci id="S7.SS1.p4.3.m3.1.1.cmml" xref="S7.SS1.p4.3.m3.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S7.SS1.p4.3.m3.1c">K</annotation></semantics></math> to be 10-30% of concurrency works well in practice. Finally, unless otherwise stated, we use 30% over-selection with SyncFL to alleviate the impact stragglers, as proposed in <cite class="ltx_cite ltx_citemacro_citet">Bonawitz et al. (<a href="#bib.bib5" title="" class="ltx_ref">2019</a>)</cite>.</p>
</div>
</section>
<section id="S7.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">7.2 </span>Results on Convergence Time and Scalability</h3>

<figure id="S7.F10" class="ltx_figure">
<div id="S7.F10.1" class="ltx_block ltx_minipage ltx_align_center ltx_align_top" style="width:433.6pt;">
<img src="/html/2111.04877/assets/x11.png" id="S7.F10.1.g1" class="ltx_graphics ltx_img_landscape" width="461" height="316" alt="Refer to caption">
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 10: </span>(top) Number of hours to reach a target perplexity of 60 with concurrency <math id="S7.F10.6.m1.2" class="ltx_Math" alttext="=1{,}300" display="inline"><semantics id="S7.F10.6.m1.2b"><mrow id="S7.F10.6.m1.2.3" xref="S7.F10.6.m1.2.3.cmml"><mi id="S7.F10.6.m1.2.3.2" xref="S7.F10.6.m1.2.3.2.cmml"></mi><mo id="S7.F10.6.m1.2.3.1" xref="S7.F10.6.m1.2.3.1.cmml">=</mo><mrow id="S7.F10.6.m1.2.3.3.2" xref="S7.F10.6.m1.2.3.3.1.cmml"><mn id="S7.F10.6.m1.1.1" xref="S7.F10.6.m1.1.1.cmml">1</mn><mo id="S7.F10.6.m1.2.3.3.2.1" xref="S7.F10.6.m1.2.3.3.1.cmml">,</mo><mn id="S7.F10.6.m1.2.2" xref="S7.F10.6.m1.2.2.cmml">300</mn></mrow></mrow><annotation-xml encoding="MathML-Content" id="S7.F10.6.m1.2c"><apply id="S7.F10.6.m1.2.3.cmml" xref="S7.F10.6.m1.2.3"><eq id="S7.F10.6.m1.2.3.1.cmml" xref="S7.F10.6.m1.2.3.1"></eq><csymbol cd="latexml" id="S7.F10.6.m1.2.3.2.cmml" xref="S7.F10.6.m1.2.3.2">absent</csymbol><list id="S7.F10.6.m1.2.3.3.1.cmml" xref="S7.F10.6.m1.2.3.3.2"><cn type="integer" id="S7.F10.6.m1.1.1.cmml" xref="S7.F10.6.m1.1.1">1</cn><cn type="integer" id="S7.F10.6.m1.2.2.cmml" xref="S7.F10.6.m1.2.2">300</cn></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S7.F10.6.m1.2d">=1{,}300</annotation></semantics></math> and varying values of <math id="S7.F10.7.m2.1" class="ltx_Math" alttext="K" display="inline"><semantics id="S7.F10.7.m2.1b"><mi id="S7.F10.7.m2.1.1" xref="S7.F10.7.m2.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S7.F10.7.m2.1c"><ci id="S7.F10.7.m2.1.1.cmml" xref="S7.F10.7.m2.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S7.F10.7.m2.1d">K</annotation></semantics></math>. (bottom) Server Model Updates per hour at concurrency <math id="S7.F10.8.m3.2" class="ltx_Math" alttext="=1{,}300" display="inline"><semantics id="S7.F10.8.m3.2b"><mrow id="S7.F10.8.m3.2.3" xref="S7.F10.8.m3.2.3.cmml"><mi id="S7.F10.8.m3.2.3.2" xref="S7.F10.8.m3.2.3.2.cmml"></mi><mo id="S7.F10.8.m3.2.3.1" xref="S7.F10.8.m3.2.3.1.cmml">=</mo><mrow id="S7.F10.8.m3.2.3.3.2" xref="S7.F10.8.m3.2.3.3.1.cmml"><mn id="S7.F10.8.m3.1.1" xref="S7.F10.8.m3.1.1.cmml">1</mn><mo id="S7.F10.8.m3.2.3.3.2.1" xref="S7.F10.8.m3.2.3.3.1.cmml">,</mo><mn id="S7.F10.8.m3.2.2" xref="S7.F10.8.m3.2.2.cmml">300</mn></mrow></mrow><annotation-xml encoding="MathML-Content" id="S7.F10.8.m3.2c"><apply id="S7.F10.8.m3.2.3.cmml" xref="S7.F10.8.m3.2.3"><eq id="S7.F10.8.m3.2.3.1.cmml" xref="S7.F10.8.m3.2.3.1"></eq><csymbol cd="latexml" id="S7.F10.8.m3.2.3.2.cmml" xref="S7.F10.8.m3.2.3.2">absent</csymbol><list id="S7.F10.8.m3.2.3.3.1.cmml" xref="S7.F10.8.m3.2.3.3.2"><cn type="integer" id="S7.F10.8.m3.1.1.cmml" xref="S7.F10.8.m3.1.1">1</cn><cn type="integer" id="S7.F10.8.m3.2.2.cmml" xref="S7.F10.8.m3.2.2">300</cn></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S7.F10.8.m3.2d">=1{,}300</annotation></semantics></math> and varying values of aggregation goal <math id="S7.F10.9.m4.1" class="ltx_Math" alttext="K" display="inline"><semantics id="S7.F10.9.m4.1b"><mi id="S7.F10.9.m4.1.1" xref="S7.F10.9.m4.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S7.F10.9.m4.1c"><ci id="S7.F10.9.m4.1.1.cmml" xref="S7.F10.9.m4.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S7.F10.9.m4.1d">K</annotation></semantics></math>.</figcaption>
</figure>
<div id="S7.SS2.p1" class="ltx_para ltx_noindent">
<p id="S7.SS2.p1.4" class="ltx_p">To begin, we evaluate the training time performance and scalability of AsyncFL and SyncFL. We measure the convergence time as the wall-clock training time to reach a target loss. To measure scalability, we compare AsyncFL and SyncFL in terms of their speedup and the number of communication trips with increasing concurrency. <a href="#S7.F9" title="In 7 Evaluation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">9</span></a> shows (left) the time taken by the two algorithms to reach a target loss for varying levels of concurrency, (middle) the speedup of AsyncFL over SyncFL, and (right) the number of communication trips to reach a target loss. As <a href="#S7.F9" title="In 7 Evaluation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">9</span></a> (left and middle) illustrates, the speedup gap widens as concurrency increases, from <math id="S7.SS2.p1.1.m1.1" class="ltx_math_unparsed" alttext="2\times" display="inline"><semantics id="S7.SS2.p1.1.m1.1a"><mrow id="S7.SS2.p1.1.m1.1b"><mn id="S7.SS2.p1.1.m1.1.1">2</mn><mo lspace="0.222em" id="S7.SS2.p1.1.m1.1.2">×</mo></mrow><annotation encoding="application/x-tex" id="S7.SS2.p1.1.m1.1c">2\times</annotation></semantics></math> to <math id="S7.SS2.p1.2.m2.1" class="ltx_math_unparsed" alttext="5\times" display="inline"><semantics id="S7.SS2.p1.2.m2.1a"><mrow id="S7.SS2.p1.2.m2.1b"><mn id="S7.SS2.p1.2.m2.1.1">5</mn><mo lspace="0.222em" id="S7.SS2.p1.2.m2.1.2">×</mo></mrow><annotation encoding="application/x-tex" id="S7.SS2.p1.2.m2.1c">5\times</annotation></semantics></math>.
Furthermore, the SyncFL communication efficiency worsens. The overall communication efficiency gain of AsyncFL increases from <math id="S7.SS2.p1.3.m3.1" class="ltx_math_unparsed" alttext="2\times" display="inline"><semantics id="S7.SS2.p1.3.m3.1a"><mrow id="S7.SS2.p1.3.m3.1b"><mn id="S7.SS2.p1.3.m3.1.1">2</mn><mo lspace="0.222em" id="S7.SS2.p1.3.m3.1.2">×</mo></mrow><annotation encoding="application/x-tex" id="S7.SS2.p1.3.m3.1c">2\times</annotation></semantics></math> to <math id="S7.SS2.p1.4.m4.1" class="ltx_math_unparsed" alttext="8\times" display="inline"><semantics id="S7.SS2.p1.4.m4.1a"><mrow id="S7.SS2.p1.4.m4.1b"><mn id="S7.SS2.p1.4.m4.1.1">8</mn><mo lspace="0.222em" id="S7.SS2.p1.4.m4.1.2">×</mo></mrow><annotation encoding="application/x-tex" id="S7.SS2.p1.4.m4.1c">8\times</annotation></semantics></math> as concurrency increases. The evaluation results demonstrate that AsyncFL handles the system heterogeneity and scalability challenges more effectively than SyncFL. In the following sections, we unravel why our AsyncFL system is more suitable for scaling FL training to hundreds of millions of clients.</p>
</div>
</section>
<section id="S7.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">7.3 </span>Analysis of Server-Model Step Frequency</h3>

<div id="S7.SS3.p1" class="ltx_para ltx_noindent">
<p id="S7.SS3.p1.5" class="ltx_p">To understand the performance of our AsyncFL implementation in detail, we study how the aggregation goal impacts convergence. The aggregation goal determines how many client updates contribute to each server model update, and for a fixed concurrency, it also affects the frequency of server model updates. We fix concurrency to be 1300 and vary aggregation goal (<math id="S7.SS3.p1.1.m1.1" class="ltx_Math" alttext="K" display="inline"><semantics id="S7.SS3.p1.1.m1.1a"><mi id="S7.SS3.p1.1.m1.1.1" xref="S7.SS3.p1.1.m1.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S7.SS3.p1.1.m1.1b"><ci id="S7.SS3.p1.1.m1.1.1.cmml" xref="S7.SS3.p1.1.m1.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S7.SS3.p1.1.m1.1c">K</annotation></semantics></math>) from 100 to 1300. <a href="#S7.F10" title="In 7.2 Results on Convergence Time and Scalability ‣ 7 Evaluation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">10</span></a> (top) depicts the time for each configuration to reach a target loss, while <a href="#S7.F10" title="In 7.2 Results on Convergence Time and Scalability ‣ 7 Evaluation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">10</span></a> (bottom) describes the server-model step frequency per hour. As <math id="S7.SS3.p1.2.m2.1" class="ltx_Math" alttext="K" display="inline"><semantics id="S7.SS3.p1.2.m2.1a"><mi id="S7.SS3.p1.2.m2.1.1" xref="S7.SS3.p1.2.m2.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S7.SS3.p1.2.m2.1b"><ci id="S7.SS3.p1.2.m2.1.1.cmml" xref="S7.SS3.p1.2.m2.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S7.SS3.p1.2.m2.1c">K</annotation></semantics></math> increases, the batch size increases, and the server takes less frequent model steps. Thus, the larger the <math id="S7.SS3.p1.3.m3.1" class="ltx_Math" alttext="K" display="inline"><semantics id="S7.SS3.p1.3.m3.1a"><mi id="S7.SS3.p1.3.m3.1.1" xref="S7.SS3.p1.3.m3.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S7.SS3.p1.3.m3.1b"><ci id="S7.SS3.p1.3.m3.1.1.cmml" xref="S7.SS3.p1.3.m3.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S7.SS3.p1.3.m3.1c">K</annotation></semantics></math> is, the slower the convergence time.
It is natural to ask if convergence time could be further reduced for <math id="S7.SS3.p1.4.m4.1" class="ltx_Math" alttext="K" display="inline"><semantics id="S7.SS3.p1.4.m4.1a"><mi id="S7.SS3.p1.4.m4.1.1" xref="S7.SS3.p1.4.m4.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S7.SS3.p1.4.m4.1b"><ci id="S7.SS3.p1.4.m4.1.1.cmml" xref="S7.SS3.p1.4.m4.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S7.SS3.p1.4.m4.1c">K</annotation></semantics></math> smaller than 100.
However, <cite class="ltx_cite ltx_citemacro_citet">Nguyen et al. (<a href="#bib.bib24" title="" class="ltx_ref">2021</a>)</cite> found that moderate values of <math id="S7.SS3.p1.5.m5.1" class="ltx_Math" alttext="K" display="inline"><semantics id="S7.SS3.p1.5.m5.1a"><mi id="S7.SS3.p1.5.m5.1.1" xref="S7.SS3.p1.5.m5.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S7.SS3.p1.5.m5.1b"><ci id="S7.SS3.p1.5.m5.1.1.cmml" xref="S7.SS3.p1.5.m5.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S7.SS3.p1.5.m5.1c">K</annotation></semantics></math> can lead to more stable convergence.
Moreover, the frequency of server updates is limited by the system’s write bandwidth. Thus, we cannot create a new server model too often. We leave improvements to overcome write bandwidth limitations as future work.</p>
</div>
</section>
<section id="S7.SS4" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">7.4 </span>Analysis of Sampling Bias from Over-Selection</h3>

<figure id="S7.T1" class="ltx_table">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 1: </span>Test perplexity (lower is better) after 1 million client updates. Perplexity is a measure of language model accuracy. We partition clients into percentiles, based on the training data volume. All signifies all clients; 75% and 99% represent clients with data volume in the 75th and 99th percentiles, respectively. SyncFL w/o OS denotes SyncFL without over-selection and SyncFL w/ OS denotes SyncFL with over-selection</figcaption>
<table id="S7.T1.1" class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="S7.T1.1.1.1" class="ltx_tr">
<th id="S7.T1.1.1.1.1" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_tt">Method</th>
<th id="S7.T1.1.1.1.2" class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_tt">All</th>
<th id="S7.T1.1.1.1.3" class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_tt">75%</th>
<th id="S7.T1.1.1.1.4" class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_tt">99%</th>
<th id="S7.T1.1.1.1.5" class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_tt">Time (hour)</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="S7.T1.1.2.1" class="ltx_tr">
<th id="S7.T1.1.2.1.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t">SyncFL w/o OS</th>
<td id="S7.T1.1.2.1.2" class="ltx_td ltx_align_right ltx_border_t">68.38</td>
<td id="S7.T1.1.2.1.3" class="ltx_td ltx_align_right ltx_border_t">66.64</td>
<td id="S7.T1.1.2.1.4" class="ltx_td ltx_align_right ltx_border_t">47.82</td>
<td id="S7.T1.1.2.1.5" class="ltx_td ltx_align_right ltx_border_t">130.60</td>
</tr>
<tr id="S7.T1.1.3.2" class="ltx_tr">
<th id="S7.T1.1.3.2.1" class="ltx_td ltx_align_left ltx_th ltx_th_row">SyncFL with OS</th>
<td id="S7.T1.1.3.2.2" class="ltx_td ltx_align_right">72.97</td>
<td id="S7.T1.1.3.2.3" class="ltx_td ltx_align_right">73.10</td>
<td id="S7.T1.1.3.2.4" class="ltx_td ltx_align_right">73.24</td>
<td id="S7.T1.1.3.2.5" class="ltx_td ltx_align_right">18.63</td>
</tr>
<tr id="S7.T1.1.4.3" class="ltx_tr">
<th id="S7.T1.1.4.3.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb">AsyncFL</th>
<td id="S7.T1.1.4.3.2" class="ltx_td ltx_align_right ltx_border_bb">57.32</td>
<td id="S7.T1.1.4.3.3" class="ltx_td ltx_align_right ltx_border_bb">55.71</td>
<td id="S7.T1.1.4.3.4" class="ltx_td ltx_align_right ltx_border_bb">38.51</td>
<td id="S7.T1.1.4.3.5" class="ltx_td ltx_align_right ltx_border_bb">18.28</td>
</tr>
</tbody>
</table>
</figure>
<figure id="S7.F11" class="ltx_figure">
<div id="S7.F11.1" class="ltx_block ltx_minipage ltx_align_center ltx_align_top" style="width:433.6pt;">
<img src="/html/2111.04877/assets/x12.png" id="S7.F11.1.g1" class="ltx_graphics ltx_img_landscape" width="461" height="307" alt="Refer to caption">
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 11: </span>(top) Participating client execution time and normalized number of examples for SyncFL with over-selection and SyncFL without over-selection. (bottom) Histogram of number of training examples for participating clients for SyncFL and AsyncFL. In the right figure, SyncFL with 30% selection drops the slowest clients. The slowest clients are often the ones with many training examples, as illustrated in the right figure.</figcaption>
</figure>
<div id="S7.SS4.p1" class="ltx_para ltx_noindent">
<p id="S7.SS4.p1.1" class="ltx_p">To compare the effectiveness of over-selection and asynchronous training in combating stragglers, we examine the distribution of participating clients, their execution time, and the number of training examples. <a href="#S7.F11" title="In 7.4 Analysis of Sampling Bias from Over-Selection ‣ 7 Evaluation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">11</span></a> illustrates the discrepancy between the client execution time distribution of SyncFL with and without over-selection. Since over-selection discards updates from some clients, the distribution of SyncFL without over-selection should be considered representative of the entire client population. <a href="#S7.F11" title="In 7.4 Analysis of Sampling Bias from Over-Selection ‣ 7 Evaluation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">11</span></a> (top-left) shows that over-selection drops slow clients, as desired. However, as illustrated in <a href="#S7.F11" title="In 7.4 Analysis of Sampling Bias from Over-Selection ‣ 7 Evaluation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">11</span></a> (top-right), the slowest clients often have more training examples.</p>
</div>
<div id="S7.SS4.p2" class="ltx_para ltx_noindent">
<p id="S7.SS4.p2.4" class="ltx_p">To rigorously assess the difference, we perform a two-sample Kolmogorov-Smirnov test <cite class="ltx_cite ltx_citemacro_cite">Chakravarti et al. (<a href="#bib.bib8" title="" class="ltx_ref">1967</a>)</cite> to measure the goodness of fit between AsyncFL, SyncFL with over-selection, and the ground truth distribution (SyncFL without over-selection). We find that the D-statistic, representing the absolute max distance between the cumulative distribution functions of the two samples, for AsyncFL and the ground truth is <math id="S7.SS4.p2.1.m1.1" class="ltx_Math" alttext="8.8\times 10^{-4}" display="inline"><semantics id="S7.SS4.p2.1.m1.1a"><mrow id="S7.SS4.p2.1.m1.1.1" xref="S7.SS4.p2.1.m1.1.1.cmml"><mn id="S7.SS4.p2.1.m1.1.1.2" xref="S7.SS4.p2.1.m1.1.1.2.cmml">8.8</mn><mo lspace="0.222em" rspace="0.222em" id="S7.SS4.p2.1.m1.1.1.1" xref="S7.SS4.p2.1.m1.1.1.1.cmml">×</mo><msup id="S7.SS4.p2.1.m1.1.1.3" xref="S7.SS4.p2.1.m1.1.1.3.cmml"><mn id="S7.SS4.p2.1.m1.1.1.3.2" xref="S7.SS4.p2.1.m1.1.1.3.2.cmml">10</mn><mrow id="S7.SS4.p2.1.m1.1.1.3.3" xref="S7.SS4.p2.1.m1.1.1.3.3.cmml"><mo id="S7.SS4.p2.1.m1.1.1.3.3a" xref="S7.SS4.p2.1.m1.1.1.3.3.cmml">−</mo><mn id="S7.SS4.p2.1.m1.1.1.3.3.2" xref="S7.SS4.p2.1.m1.1.1.3.3.2.cmml">4</mn></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S7.SS4.p2.1.m1.1b"><apply id="S7.SS4.p2.1.m1.1.1.cmml" xref="S7.SS4.p2.1.m1.1.1"><times id="S7.SS4.p2.1.m1.1.1.1.cmml" xref="S7.SS4.p2.1.m1.1.1.1"></times><cn type="float" id="S7.SS4.p2.1.m1.1.1.2.cmml" xref="S7.SS4.p2.1.m1.1.1.2">8.8</cn><apply id="S7.SS4.p2.1.m1.1.1.3.cmml" xref="S7.SS4.p2.1.m1.1.1.3"><csymbol cd="ambiguous" id="S7.SS4.p2.1.m1.1.1.3.1.cmml" xref="S7.SS4.p2.1.m1.1.1.3">superscript</csymbol><cn type="integer" id="S7.SS4.p2.1.m1.1.1.3.2.cmml" xref="S7.SS4.p2.1.m1.1.1.3.2">10</cn><apply id="S7.SS4.p2.1.m1.1.1.3.3.cmml" xref="S7.SS4.p2.1.m1.1.1.3.3"><minus id="S7.SS4.p2.1.m1.1.1.3.3.1.cmml" xref="S7.SS4.p2.1.m1.1.1.3.3"></minus><cn type="integer" id="S7.SS4.p2.1.m1.1.1.3.3.2.cmml" xref="S7.SS4.p2.1.m1.1.1.3.3.2">4</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S7.SS4.p2.1.m1.1c">8.8\times 10^{-4}</annotation></semantics></math> (<math id="S7.SS4.p2.2.m2.1" class="ltx_Math" alttext="p" display="inline"><semantics id="S7.SS4.p2.2.m2.1a"><mi id="S7.SS4.p2.2.m2.1.1" xref="S7.SS4.p2.2.m2.1.1.cmml">p</mi><annotation-xml encoding="MathML-Content" id="S7.SS4.p2.2.m2.1b"><ci id="S7.SS4.p2.2.m2.1.1.cmml" xref="S7.SS4.p2.2.m2.1.1">𝑝</ci></annotation-xml><annotation encoding="application/x-tex" id="S7.SS4.p2.2.m2.1c">p</annotation></semantics></math>-value = 0.98). In comparison, the D-statistic for SyncFL with over-selection and the ground truth is <math id="S7.SS4.p2.3.m3.1" class="ltx_Math" alttext="6.6\times 10^{-2}" display="inline"><semantics id="S7.SS4.p2.3.m3.1a"><mrow id="S7.SS4.p2.3.m3.1.1" xref="S7.SS4.p2.3.m3.1.1.cmml"><mn id="S7.SS4.p2.3.m3.1.1.2" xref="S7.SS4.p2.3.m3.1.1.2.cmml">6.6</mn><mo lspace="0.222em" rspace="0.222em" id="S7.SS4.p2.3.m3.1.1.1" xref="S7.SS4.p2.3.m3.1.1.1.cmml">×</mo><msup id="S7.SS4.p2.3.m3.1.1.3" xref="S7.SS4.p2.3.m3.1.1.3.cmml"><mn id="S7.SS4.p2.3.m3.1.1.3.2" xref="S7.SS4.p2.3.m3.1.1.3.2.cmml">10</mn><mrow id="S7.SS4.p2.3.m3.1.1.3.3" xref="S7.SS4.p2.3.m3.1.1.3.3.cmml"><mo id="S7.SS4.p2.3.m3.1.1.3.3a" xref="S7.SS4.p2.3.m3.1.1.3.3.cmml">−</mo><mn id="S7.SS4.p2.3.m3.1.1.3.3.2" xref="S7.SS4.p2.3.m3.1.1.3.3.2.cmml">2</mn></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S7.SS4.p2.3.m3.1b"><apply id="S7.SS4.p2.3.m3.1.1.cmml" xref="S7.SS4.p2.3.m3.1.1"><times id="S7.SS4.p2.3.m3.1.1.1.cmml" xref="S7.SS4.p2.3.m3.1.1.1"></times><cn type="float" id="S7.SS4.p2.3.m3.1.1.2.cmml" xref="S7.SS4.p2.3.m3.1.1.2">6.6</cn><apply id="S7.SS4.p2.3.m3.1.1.3.cmml" xref="S7.SS4.p2.3.m3.1.1.3"><csymbol cd="ambiguous" id="S7.SS4.p2.3.m3.1.1.3.1.cmml" xref="S7.SS4.p2.3.m3.1.1.3">superscript</csymbol><cn type="integer" id="S7.SS4.p2.3.m3.1.1.3.2.cmml" xref="S7.SS4.p2.3.m3.1.1.3.2">10</cn><apply id="S7.SS4.p2.3.m3.1.1.3.3.cmml" xref="S7.SS4.p2.3.m3.1.1.3.3"><minus id="S7.SS4.p2.3.m3.1.1.3.3.1.cmml" xref="S7.SS4.p2.3.m3.1.1.3.3"></minus><cn type="integer" id="S7.SS4.p2.3.m3.1.1.3.3.2.cmml" xref="S7.SS4.p2.3.m3.1.1.3.3.2">2</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S7.SS4.p2.3.m3.1c">6.6\times 10^{-2}</annotation></semantics></math> (<math id="S7.SS4.p2.4.m4.1" class="ltx_Math" alttext="p" display="inline"><semantics id="S7.SS4.p2.4.m4.1a"><mi id="S7.SS4.p2.4.m4.1.1" xref="S7.SS4.p2.4.m4.1.1.cmml">p</mi><annotation-xml encoding="MathML-Content" id="S7.SS4.p2.4.m4.1b"><ci id="S7.SS4.p2.4.m4.1.1.cmml" xref="S7.SS4.p2.4.m4.1.1">𝑝</ci></annotation-xml><annotation encoding="application/x-tex" id="S7.SS4.p2.4.m4.1c">p</annotation></semantics></math>-value = 0.0). This result shows that AsyncFL and the ground truth have similar distributions while SyncFL with over-selection does not.
Thus, over-selection introduces sampling bias while AsyncFL does not. The sampling probability is conditioned on the client’s device speed or the number of training examples. Next, we show that sampling bias hurts model performance, especially for clients with more training examples.</p>
</div>
<div id="S7.SS4.p3" class="ltx_para ltx_noindent">
<p id="S7.SS4.p3.1" class="ltx_p"><a href="#S7.T1" title="In 7.4 Analysis of Sampling Bias from Over-Selection ‣ 7 Evaluation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Table</span> <span class="ltx_text ltx_ref_tag">1</span></a> reports the model quality in test perplexity for all clients and those with data volume in the 75% and 99% percentile. Perplexity is a measure of language model accuracy (lower is better). The sampling bias from over-selection in SyncFL causes a 6% drop in model quality overall and a 50% drop in model quality for clients with more examples. Although SyncFL without over-selection is unbiased, it is also 10<math id="S7.SS4.p3.1.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="S7.SS4.p3.1.m1.1a"><mo id="S7.SS4.p3.1.m1.1.1" xref="S7.SS4.p3.1.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="S7.SS4.p3.1.m1.1b"><times id="S7.SS4.p3.1.m1.1.1.cmml" xref="S7.SS4.p3.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S7.SS4.p3.1.m1.1c">\times</annotation></semantics></math> slower. On the other hand, AsyncFL combines fast training with high model quality and no sampling bias. Meanwhile, SyncFL with over-selection has to choose between sampling bias or straggler resilence. In summary, AsyncFL is a more desirable method to address the impact of stragglers.</p>
</div>
<figure id="S7.F12" class="ltx_figure">
<div id="S7.F12.1" class="ltx_block ltx_minipage ltx_align_center ltx_align_top" style="width:433.6pt;">
<img src="/html/2111.04877/assets/x13.png" id="S7.F12.1.g1" class="ltx_graphics ltx_img_landscape" width="461" height="322" alt="Refer to caption">
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 12: </span>Training curves for different FL configuration at aggregation goal <math id="S7.F12.4.m1.2" class="ltx_Math" alttext="=1{,}000" display="inline"><semantics id="S7.F12.4.m1.2b"><mrow id="S7.F12.4.m1.2.3" xref="S7.F12.4.m1.2.3.cmml"><mi id="S7.F12.4.m1.2.3.2" xref="S7.F12.4.m1.2.3.2.cmml"></mi><mo id="S7.F12.4.m1.2.3.1" xref="S7.F12.4.m1.2.3.1.cmml">=</mo><mrow id="S7.F12.4.m1.2.3.3.2" xref="S7.F12.4.m1.2.3.3.1.cmml"><mn id="S7.F12.4.m1.1.1" xref="S7.F12.4.m1.1.1.cmml">1</mn><mo id="S7.F12.4.m1.2.3.3.2.1" xref="S7.F12.4.m1.2.3.3.1.cmml">,</mo><mn id="S7.F12.4.m1.2.2" xref="S7.F12.4.m1.2.2.cmml">000</mn></mrow></mrow><annotation-xml encoding="MathML-Content" id="S7.F12.4.m1.2c"><apply id="S7.F12.4.m1.2.3.cmml" xref="S7.F12.4.m1.2.3"><eq id="S7.F12.4.m1.2.3.1.cmml" xref="S7.F12.4.m1.2.3.1"></eq><csymbol cd="latexml" id="S7.F12.4.m1.2.3.2.cmml" xref="S7.F12.4.m1.2.3.2">absent</csymbol><list id="S7.F12.4.m1.2.3.3.1.cmml" xref="S7.F12.4.m1.2.3.3.2"><cn type="integer" id="S7.F12.4.m1.1.1.cmml" xref="S7.F12.4.m1.1.1">1</cn><cn type="integer" id="S7.F12.4.m1.2.2.cmml" xref="S7.F12.4.m1.2.2">000</cn></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S7.F12.4.m1.2d">=1{,}000</annotation></semantics></math>. We set concurrency <math id="S7.F12.5.m2.2" class="ltx_Math" alttext="=1{,}300" display="inline"><semantics id="S7.F12.5.m2.2b"><mrow id="S7.F12.5.m2.2.3" xref="S7.F12.5.m2.2.3.cmml"><mi id="S7.F12.5.m2.2.3.2" xref="S7.F12.5.m2.2.3.2.cmml"></mi><mo id="S7.F12.5.m2.2.3.1" xref="S7.F12.5.m2.2.3.1.cmml">=</mo><mrow id="S7.F12.5.m2.2.3.3.2" xref="S7.F12.5.m2.2.3.3.1.cmml"><mn id="S7.F12.5.m2.1.1" xref="S7.F12.5.m2.1.1.cmml">1</mn><mo id="S7.F12.5.m2.2.3.3.2.1" xref="S7.F12.5.m2.2.3.3.1.cmml">,</mo><mn id="S7.F12.5.m2.2.2" xref="S7.F12.5.m2.2.2.cmml">300</mn></mrow></mrow><annotation-xml encoding="MathML-Content" id="S7.F12.5.m2.2c"><apply id="S7.F12.5.m2.2.3.cmml" xref="S7.F12.5.m2.2.3"><eq id="S7.F12.5.m2.2.3.1.cmml" xref="S7.F12.5.m2.2.3.1"></eq><csymbol cd="latexml" id="S7.F12.5.m2.2.3.2.cmml" xref="S7.F12.5.m2.2.3.2">absent</csymbol><list id="S7.F12.5.m2.2.3.3.1.cmml" xref="S7.F12.5.m2.2.3.3.2"><cn type="integer" id="S7.F12.5.m2.1.1.cmml" xref="S7.F12.5.m2.1.1">1</cn><cn type="integer" id="S7.F12.5.m2.2.2.cmml" xref="S7.F12.5.m2.2.2">300</cn></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S7.F12.5.m2.2d">=1{,}300</annotation></semantics></math> for AsyncFL, SyncFL with over-selection. For SyncFL without over-selection, we set concurrency equal to aggregation goal.</figcaption>
</figure>
<figure id="S7.F13" class="ltx_figure">
<div id="S7.F13.1" class="ltx_block ltx_minipage ltx_align_center ltx_align_top" style="width:433.6pt;">
<img src="/html/2111.04877/assets/x14.png" id="S7.F13.1.g1" class="ltx_graphics ltx_img_landscape" width="461" height="246" alt="Refer to caption">
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 13: </span>Number of hours to reach a target loss for different FL design configurations. </figcaption>
</figure>
</section>
<section id="S7.SS5" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">7.5 </span>Understanding AsyncFL Advantages</h3>

<div id="S7.SS5.p1" class="ltx_para ltx_noindent">
<p id="S7.SS5.p1.1" class="ltx_p">The previous sections showed that AsyncFL has two main advantages over SyncFL: better scalability because of more frequent model steps and straggler resilience without adding sampling bias.
To quantify the benefits from these two properties, we present the training curves for AsyncFL alongside the current state-of-art SyncFL. We remove the frequent update advantage of AsyncFL by increasing the aggregation goal for AsyncFL to be the same as SyncFL.</p>
</div>
<div id="S7.SS5.p2" class="ltx_para ltx_noindent">
<p id="S7.SS5.p2.5" class="ltx_p"><a href="#S7.F12" title="In 7.4 Analysis of Sampling Bias from Over-Selection ‣ 7 Evaluation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">12</span></a> depicts production training curves for the best synchronous setup, SyncFL with over-selection (orange), and two AsyncFL configurations: aggregation goal <math id="S7.SS5.p2.1.m1.1" class="ltx_Math" alttext="K" display="inline"><semantics id="S7.SS5.p2.1.m1.1a"><mi id="S7.SS5.p2.1.m1.1.1" xref="S7.SS5.p2.1.m1.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S7.SS5.p2.1.m1.1b"><ci id="S7.SS5.p2.1.m1.1.1.cmml" xref="S7.SS5.p2.1.m1.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S7.SS5.p2.1.m1.1c">K</annotation></semantics></math> = 100 (red) and <math id="S7.SS5.p2.2.m2.1" class="ltx_Math" alttext="K" display="inline"><semantics id="S7.SS5.p2.2.m2.1a"><mi id="S7.SS5.p2.2.m2.1.1" xref="S7.SS5.p2.2.m2.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S7.SS5.p2.2.m2.1b"><ci id="S7.SS5.p2.2.m2.1.1.cmml" xref="S7.SS5.p2.2.m2.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S7.SS5.p2.2.m2.1c">K</annotation></semantics></math> = 1000 (blue). All three use concurrency 1,300. Note that overall, AsyncFL with <math id="S7.SS5.p2.3.m3.1" class="ltx_Math" alttext="K" display="inline"><semantics id="S7.SS5.p2.3.m3.1a"><mi id="S7.SS5.p2.3.m3.1.1" xref="S7.SS5.p2.3.m3.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S7.SS5.p2.3.m3.1b"><ci id="S7.SS5.p2.3.m3.1.1.cmml" xref="S7.SS5.p2.3.m3.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S7.SS5.p2.3.m3.1c">K</annotation></semantics></math> = 100 is 4.3<math id="S7.SS5.p2.4.m4.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="S7.SS5.p2.4.m4.1a"><mo id="S7.SS5.p2.4.m4.1.1" xref="S7.SS5.p2.4.m4.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="S7.SS5.p2.4.m4.1b"><times id="S7.SS5.p2.4.m4.1.1.cmml" xref="S7.SS5.p2.4.m4.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S7.SS5.p2.4.m4.1c">\times</annotation></semantics></math> faster than SyncFL with over-selection, as shown in <a href="#S7.F13" title="In 7.4 Analysis of Sampling Bias from Over-Selection ‣ 7 Evaluation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">13</span></a>. We find that about half of this speedup comes from using smaller <math id="S7.SS5.p2.5.m5.1" class="ltx_Math" alttext="K" display="inline"><semantics id="S7.SS5.p2.5.m5.1a"><mi id="S7.SS5.p2.5.m5.1.1" xref="S7.SS5.p2.5.m5.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S7.SS5.p2.5.m5.1b"><ci id="S7.SS5.p2.5.m5.1.1.cmml" xref="S7.SS5.p2.5.m5.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S7.SS5.p2.5.m5.1c">K</annotation></semantics></math> and the rest from avoiding sampling bias (i.e., using AsyncFL rather than SyncFL with over-selection).</p>
</div>
<div id="S7.SS5.p3" class="ltx_para ltx_noindent">
<p id="S7.SS5.p3.2" class="ltx_p">To read Figure <a href="#S7.F12" title="Figure 12 ‣ 7.4 Analysis of Sampling Bias from Over-Selection ‣ 7 Evaluation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">12</span></a>, start with AsyncFL with <math id="S7.SS5.p3.1.m1.1" class="ltx_Math" alttext="K" display="inline"><semantics id="S7.SS5.p3.1.m1.1a"><mi id="S7.SS5.p3.1.m1.1.1" xref="S7.SS5.p3.1.m1.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S7.SS5.p3.1.m1.1b"><ci id="S7.SS5.p3.1.m1.1.1.cmml" xref="S7.SS5.p3.1.m1.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S7.SS5.p3.1.m1.1c">K</annotation></semantics></math> = 100 (red), which is the best configuration since it takes more frequent server model steps and is resilient to stragglers. Next, see AsyncFL with <math id="S7.SS5.p3.2.m2.1" class="ltx_Math" alttext="K" display="inline"><semantics id="S7.SS5.p3.2.m2.1a"><mi id="S7.SS5.p3.2.m2.1.1" xref="S7.SS5.p3.2.m2.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S7.SS5.p3.2.m2.1b"><ci id="S7.SS5.p3.2.m2.1.1.cmml" xref="S7.SS5.p3.2.m2.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S7.SS5.p3.2.m2.1c">K</annotation></semantics></math> = 1000 (blue), which is straggler resilient but takes less frequent model steps. Finally, move to SyncFL with over-selection (orange), which adds sampling bias.</p>
</div>
<div id="S7.SS5.p4" class="ltx_para ltx_noindent">
<p id="S7.SS5.p4.1" class="ltx_p">The figure also shows SyncFL without over-selection (green) for reference, using concurrency 1000. The large gap between this configuration and AsyncFL with <math id="S7.SS5.p4.1.m1.1" class="ltx_Math" alttext="K" display="inline"><semantics id="S7.SS5.p4.1.m1.1a"><mi id="S7.SS5.p4.1.m1.1.1" xref="S7.SS5.p4.1.m1.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S7.SS5.p4.1.m1.1b"><ci id="S7.SS5.p4.1.m1.1.1.cmml" xref="S7.SS5.p4.1.m1.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S7.SS5.p4.1.m1.1c">K</annotation></semantics></math> = 1000 is attributable to stragglers.</p>
</div>
<div id="S7.SS5.p5" class="ltx_para ltx_noindent">
<p id="S7.SS5.p5.2" class="ltx_p">It is instructive to compare the training loss at a fixed point, e.g., at the 10-hour mark. By minimizing sampling bias, AsyncFL with <math id="S7.SS5.p5.1.m1.1" class="ltx_Math" alttext="K" display="inline"><semantics id="S7.SS5.p5.1.m1.1a"><mi id="S7.SS5.p5.1.m1.1.1" xref="S7.SS5.p5.1.m1.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S7.SS5.p5.1.m1.1b"><ci id="S7.SS5.p5.1.m1.1.1.cmml" xref="S7.SS5.p5.1.m1.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S7.SS5.p5.1.m1.1c">K</annotation></semantics></math> = 1000 reduces training loss by 3.4% compared to SyncFL with over-selection. Taking more frequent server-model steps (<math id="S7.SS5.p5.2.m2.1" class="ltx_Math" alttext="K" display="inline"><semantics id="S7.SS5.p5.2.m2.1a"><mi id="S7.SS5.p5.2.m2.1.1" xref="S7.SS5.p5.2.m2.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S7.SS5.p5.2.m2.1b"><ci id="S7.SS5.p5.2.m2.1.1.cmml" xref="S7.SS5.p5.2.m2.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S7.SS5.p5.2.m2.1c">K</annotation></semantics></math> = 100) in AsyncFL decreases training loss by an additional 3.5%.</p>
</div>
</section>
</section>
<section id="S8" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">8 </span>Related Work</h2>

<div id="S8.p1" class="ltx_para ltx_noindent">
<p id="S8.p1.1" class="ltx_p">The <span id="S8.p1.1.1" class="ltx_text ltx_font_smallcaps">Papaya</span> system described in this paper is inspired by the GFL system <cite class="ltx_cite ltx_citemacro_cite">Bonawitz et al. (<a href="#bib.bib5" title="" class="ltx_ref">2019</a>)</cite>. Another FL system is described by Apple (AFL) in <cite class="ltx_cite ltx_citemacro_cite">Paulik et al. (<a href="#bib.bib27" title="" class="ltx_ref">2021</a>)</cite>. We focus on comparison with GFL and AFL given the similarity of production scale. At a high level, both GFL and AFL only implement SyncFL, while <span id="S8.p1.1.2" class="ltx_text ltx_font_smallcaps">Papaya</span> implements both SyncFL and AsyncFL. Diving deeper we find similarities and differences in how clients are selected for participation, client availability and participation outcome impact on model training progress, model update aggregation and privacy mechanisms. <span id="S8.p1.1.3" class="ltx_text ltx_font_smallcaps">Papaya</span> actively (through the Coordinator) selects available clients for participation at any point in time based on demand by active tasks (driven by desired task concurrency), unlike GFL which actively selects clients before the rounds starts, and AFL which uses passive probabilistic selection. <span id="S8.p1.1.4" class="ltx_text ltx_font_smallcaps">Papaya</span> enables incremental progress by making participating clients independent and replaceable whenever they complete or drop out, unlike GFL where no client can join after a round has started, potentially leading to failed rounds, and similar to AFL where clients can contribute as long as the model version is the same. <span id="S8.p1.1.5" class="ltx_text ltx_font_smallcaps">Papaya</span> moves tasks between long living Aggregators only when failure or load imbalance is detected to minimize client progress loss and reduce placement overhead, unlike GFL where tasks are dynamically placed to ephemeral Aggregators every round and AFL where aggregation is performed by an offline service. <span id="S8.p1.1.6" class="ltx_text ltx_font_smallcaps">Papaya</span> implements Asynchronous SecAgg based on TEEs, whereas GFL uses SMPC-based Synchronous SecAgg and AFL does not report using SecAgg.</p>
</div>
<div id="S8.p2" class="ltx_para ltx_noindent">
<p id="S8.p2.1" class="ltx_p">Another line of related work is the FL software tool kits, offered by other technology companies. Notable among these are Clara <cite class="ltx_cite ltx_citemacro_cite"><a href="#bib.bib25" title="" class="ltx_ref">NVIDIA </a></cite>, IBM-FL <cite class="ltx_cite ltx_citemacro_cite"><a href="#bib.bib14" title="" class="ltx_ref">IBM </a></cite>, OpenFL  <cite class="ltx_cite ltx_citemacro_cite">Reina et al. (<a href="#bib.bib29" title="" class="ltx_ref">2021</a>)</cite> and FATE <cite class="ltx_cite ltx_citemacro_cite"><a href="#bib.bib32" title="" class="ltx_ref">WeBank </a></cite>. While related to the <span id="S8.p2.1.1" class="ltx_text ltx_font_smallcaps">Papaya</span> system described in this paper, these software tools are distinct from production FL systems training across hundreds of millions of devices, which is the focus of this paper.</p>
</div>
</section>
<section id="S9" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">9 </span>Conclusions</h2>

<div id="S9.p1" class="ltx_para ltx_noindent">
<p id="S9.p1.2" class="ltx_p">We presented our design of a production asynchronous FL system for training at scale. Designing for a production FL system, <span id="S9.p1.2.1" class="ltx_text ltx_font_smallcaps">Papaya</span>, we find that AsyncFL is faster, more straggler resilient, and provides better model quality than SyncFL. <span id="S9.p1.2.2" class="ltx_text ltx_font_smallcaps">Papaya</span> is flexible and supports both synchronous and asynchronous FL. Empirically, we demonstrated that in high concurrency settings, asynchronous FL achieves 5<math id="S9.p1.1.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="S9.p1.1.m1.1a"><mo id="S9.p1.1.m1.1.1" xref="S9.p1.1.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="S9.p1.1.m1.1b"><times id="S9.p1.1.m1.1.1.cmml" xref="S9.p1.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S9.p1.1.m1.1c">\times</annotation></semantics></math> faster speed up and conserves nearly 8<math id="S9.p1.2.m2.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="S9.p1.2.m2.1a"><mo id="S9.p1.2.m2.1.1" xref="S9.p1.2.m2.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="S9.p1.2.m2.1b"><times id="S9.p1.2.m2.1.1.cmml" xref="S9.p1.2.m2.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S9.p1.2.m2.1c">\times</annotation></semantics></math> more resources than synchronous FL. Finally, <span id="S9.p1.2.3" class="ltx_text ltx_font_smallcaps">Papaya</span> can be extended with features to enable differential privacy, which we leave as future work.</p>
</div>
</section>
<section id="Sx1" class="ltx_section">
<h2 class="ltx_title ltx_title_section">Acknowledgements</h2>

<div id="Sx1.p1" class="ltx_para ltx_noindent">
<p id="Sx1.p1.1" class="ltx_p">We thank Ilya Mironov and Rachad Alao for meaningful discussions and their valuable support which significantly improved the quality of this paper.</p>
</div>
</section>
<section id="bib" class="ltx_bibliography">
<h2 class="ltx_title ltx_title_bibliography">References</h2>

<ul class="ltx_biblist">
<li id="bib.bib1" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">(1)</span>
<span class="ltx_bibblock">
Trillian: General transparency.

</span>
<span class="ltx_bibblock">URL <a target="_blank" href="https://github.com/google/trillian" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://github.com/google/trillian</a>.

</span>
</li>
<li id="bib.bib2" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">(2)</span>
<span class="ltx_bibblock">
Verifiable data structures.

</span>
<span class="ltx_bibblock">URL <a target="_blank" href="https://transparency.dev/verifiable-data-structures/" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://transparency.dev/verifiable-data-structures/</a>.

</span>
</li>
<li id="bib.bib3" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Bell et al. (2020)</span>
<span class="ltx_bibblock">
Bell, J. H., Bonawitz, K. A., Gascón, A., Lepoint, T., and Raykova, M.

</span>
<span class="ltx_bibblock">Secure single-server aggregation with (poly) logarithmic overhead.

</span>
<span class="ltx_bibblock">In <em id="bib.bib3.1.1" class="ltx_emph ltx_font_italic">Proceedings of the 2020 ACM SIGSAC Conference on Computer
and Communications Security</em>, pp.  1253–1269, 2020.

</span>
</li>
<li id="bib.bib4" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Bertsekas &amp; Tsitsiklis (1989)</span>
<span class="ltx_bibblock">
Bertsekas, D. P. and Tsitsiklis, J. N.

</span>
<span class="ltx_bibblock"><em id="bib.bib4.1.1" class="ltx_emph ltx_font_italic">Parallel and Distributed Computation: Numerical Methods</em>.

</span>
<span class="ltx_bibblock">Prentice-Hall, 1989.

</span>
</li>
<li id="bib.bib5" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Bonawitz et al. (2019)</span>
<span class="ltx_bibblock">
Bonawitz, K., Eichner, H., Grieskamp, W., Huba, D., Ingerman, A., Ivanov, V.,
Kiddon, C., Konečnỳ, J., Mazzocchi, S., McMahan, H. B., et al.

</span>
<span class="ltx_bibblock">Towards federated learning at scale: System design.

</span>
<span class="ltx_bibblock"><em id="bib.bib5.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:1902.01046</em>, 2019.

</span>
</li>
<li id="bib.bib6" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Bonawitz et al. (2016)</span>
<span class="ltx_bibblock">
Bonawitz, K. A., Ivanov, V., Kreuter, B., Marcedone, A., McMahan, H. B., Patel,
S., Ramage, D., Segal, A., and Seth, K.

</span>
<span class="ltx_bibblock">Practical secure aggregation for federated learning on user-held
data.

</span>
<span class="ltx_bibblock">In <em id="bib.bib6.1.1" class="ltx_emph ltx_font_italic">NIPS Workshop on Private Multi-Party Machine Learning</em>,
2016.

</span>
<span class="ltx_bibblock">URL <a target="_blank" href="https://arxiv.org/abs/1611.04482" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://arxiv.org/abs/1611.04482</a>.

</span>
</li>
<li id="bib.bib7" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Caldas et al. (2018)</span>
<span class="ltx_bibblock">
Caldas, S., Duddu, S. M. K., Wu, P., Li, T., Konečnỳ, J., McMahan,
H. B., Smith, V., and Talwalkar, A.

</span>
<span class="ltx_bibblock">Leaf: A benchmark for federated settings.

</span>
<span class="ltx_bibblock"><em id="bib.bib7.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:1812.01097</em>, 2018.

</span>
</li>
<li id="bib.bib8" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Chakravarti et al. (1967)</span>
<span class="ltx_bibblock">
Chakravarti, I., Laha, R., and Roy, J.

</span>
<span class="ltx_bibblock">Handbook of methods of applied statistics. volume i: Techniques of
computation descriptive methods, and statistical inference. volume ii:
Planning of surveys and experiments, 1967.

</span>
</li>
<li id="bib.bib9" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Charles et al. (2021)</span>
<span class="ltx_bibblock">
Charles, Z., Garrett, Z., Huo, Z., Shmulyian, S., and Smith, V.

</span>
<span class="ltx_bibblock">On large-cohort training for federated learning.

</span>
<span class="ltx_bibblock"><em id="bib.bib9.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2106.07820</em>, 2021.

</span>
</li>
<li id="bib.bib10" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Cohen &amp; Fischer (1985)</span>
<span class="ltx_bibblock">
Cohen, J. D. and Fischer, M. J.

</span>
<span class="ltx_bibblock"><em id="bib.bib10.1.1" class="ltx_emph ltx_font_italic">A robust and verifiable cryptographically secure election
scheme</em>.

</span>
<span class="ltx_bibblock">Yale University. Department of Computer Science, 1985.

</span>
</li>
<li id="bib.bib11" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">ElGamal (1985)</span>
<span class="ltx_bibblock">
ElGamal, T.

</span>
<span class="ltx_bibblock">A public key cryptosystem and a signature scheme based on discrete
logarithms.

</span>
<span class="ltx_bibblock"><em id="bib.bib11.1.1" class="ltx_emph ltx_font_italic">IEEE transactions on information theory</em>, 31(4):469–472, 1985.

</span>
</li>
<li id="bib.bib12" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Goldwasser &amp; Micali (1982)</span>
<span class="ltx_bibblock">
Goldwasser, S. and Micali, S.

</span>
<span class="ltx_bibblock">Probabilistic encryption &amp; how to play mental poker keeping secret
all partial information.

</span>
<span class="ltx_bibblock">In <em id="bib.bib12.1.1" class="ltx_emph ltx_font_italic">Proceedings of the Fourteenth Annual ACM Symposium on Theory
of Computing</em>, pp.  365–377, 1982.

</span>
</li>
<li id="bib.bib13" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Hard et al. (2019)</span>
<span class="ltx_bibblock">
Hard, A., Rao, K., Mathews, R., Ramaswamy, S., Beaufays, F., Augenstein, S.,
Eichner, H., Kiddon, C., and Ramage, D.

</span>
<span class="ltx_bibblock">Federated learning for mobile keyboard prediction, 2019.

</span>
</li>
<li id="bib.bib14" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">(14)</span>
<span class="ltx_bibblock">
IBM.

</span>
<span class="ltx_bibblock">Ibm federated learning.

</span>
<span class="ltx_bibblock"><a target="_blank" href="https://ibmfl.mybluemix.net" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://ibmfl.mybluemix.net</a>.

</span>
</li>
<li id="bib.bib15" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Kairouz et al. (2019)</span>
<span class="ltx_bibblock">
Kairouz, P., McMahan, H. B., Avent, B., Bellet, A., Bennis, M., Bhagoji, A. N.,
Bonawitz, K., Charles, Z., Cormode, G., Cummings, R., et al.

</span>
<span class="ltx_bibblock">Advances and open problems in federated learning.

</span>
<span class="ltx_bibblock"><em id="bib.bib15.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:1912.04977</em>, 2019.

</span>
</li>
<li id="bib.bib16" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Karl et al. (2020a)</span>
<span class="ltx_bibblock">
Karl, R., Takeshita, J., and Jung, T.

</span>
<span class="ltx_bibblock">Cryptonite: A framework for flexible time-series secure aggregation
with non-interactive fault recovery.

</span>
<span class="ltx_bibblock">2020a.

</span>
</li>
<li id="bib.bib17" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Karl et al. (2020b)</span>
<span class="ltx_bibblock">
Karl, R., Takeshita, J., and Jung, T.

</span>
<span class="ltx_bibblock">Cryptonite: A framework for flexible time-series secure aggregation
with online fault tolerance.

</span>
<span class="ltx_bibblock">2020b.

</span>
<span class="ltx_bibblock"><a target="_blank" href="https://eprint.iacr.org/2020/1561" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://eprint.iacr.org/2020/1561</a>.

</span>
</li>
<li id="bib.bib18" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Keskar et al. (2017)</span>
<span class="ltx_bibblock">
Keskar, N. S., Mudigere, D., Nocedal, J., Smelyanskiy, M., and Tang, P. T. P.

</span>
<span class="ltx_bibblock">On large-batch training for deep learning: Generalization gap and
sharp minima.

</span>
<span class="ltx_bibblock">In <em id="bib.bib18.1.1" class="ltx_emph ltx_font_italic">ICLR</em>, 2017.

</span>
</li>
<li id="bib.bib19" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Kim et al. (2015)</span>
<span class="ltx_bibblock">
Kim, Y., Jernite, Y., Sontag, D. A., and Rush, A. M.

</span>
<span class="ltx_bibblock">Character-aware neural language models.

</span>
<span class="ltx_bibblock"><em id="bib.bib19.1.1" class="ltx_emph ltx_font_italic">CoRR</em>, abs/1508.06615, 2015.

</span>
<span class="ltx_bibblock">URL <a target="_blank" href="http://arxiv.org/abs/1508.06615" title="" class="ltx_ref ltx_url ltx_font_typewriter">http://arxiv.org/abs/1508.06615</a>.

</span>
</li>
<li id="bib.bib20" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Kumar &amp; Gupta (1994)</span>
<span class="ltx_bibblock">
Kumar, V. and Gupta, A.

</span>
<span class="ltx_bibblock">Analyzing scalability of parallel algorithms and architectures.

</span>
<span class="ltx_bibblock"><em id="bib.bib20.1.1" class="ltx_emph ltx_font_italic">Journal of Parallel and Distributed Computing</em>, 22(3):379–391, 1994.

</span>
<span class="ltx_bibblock">ISSN 0743-7315.

</span>
<span class="ltx_bibblock">doi: <span class="ltx_ref ltx_nolink ltx_Url ltx_ref_self">https://doi.org/10.1006/jpdc.1994.1099</span>.

</span>
<span class="ltx_bibblock">URL
<a target="_blank" href="https://www.sciencedirect.com/science/article/pii/S0743731584710999" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://www.sciencedirect.com/science/article/pii/S0743731584710999</a>.

</span>
</li>
<li id="bib.bib21" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ludwig et al. (2020)</span>
<span class="ltx_bibblock">
Ludwig, H., Baracaldo, N., Thomas, G., Zhou, Y., Anwar, A., Rajamoni, S., Ong,
Y., Radhakrishnan, J., Verma, A., Sinn, M., et al.

</span>
<span class="ltx_bibblock">Ibm federated learning: an enterprise framework white paper v0. 1.

</span>
<span class="ltx_bibblock"><em id="bib.bib21.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2007.10987</em>, 2020.

</span>
</li>
<li id="bib.bib22" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">McMahan et al. (2016)</span>
<span class="ltx_bibblock">
McMahan, H. B., Moore, E., Ramage, D., and Agüera y Arcas, B.

</span>
<span class="ltx_bibblock">Federated learning of deep networks using model averaging.

</span>
<span class="ltx_bibblock"><em id="bib.bib22.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:1602.05629</em>, 2016.

</span>
</li>
<li id="bib.bib23" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Merkle (1978)</span>
<span class="ltx_bibblock">
Merkle, R. C.

</span>
<span class="ltx_bibblock">Secure communications over insecure channels.

</span>
<span class="ltx_bibblock"><em id="bib.bib23.1.1" class="ltx_emph ltx_font_italic">Communications of the ACM</em>, 21(4):294–299,
1978.

</span>
</li>
<li id="bib.bib24" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Nguyen et al. (2021)</span>
<span class="ltx_bibblock">
Nguyen, J., Malik, K., Zhan, H., Yousefpour, A., Rabbat, M., Esmaeili, M. M.,
and Huba, D.

</span>
<span class="ltx_bibblock">Federated learning with buffered asynchronous aggregation.

</span>
<span class="ltx_bibblock"><em id="bib.bib24.1.1" class="ltx_emph ltx_font_italic">International Workshop on Federated Learning for User Privacy
and Data Confidentiality in Conjunction with ICML</em>, 2021.

</span>
</li>
<li id="bib.bib25" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">(25)</span>
<span class="ltx_bibblock">
NVIDIA.

</span>
<span class="ltx_bibblock">Clara train sdk.

</span>
<span class="ltx_bibblock"><a target="_blank" href="https://docs.nvidia.com/clara/clara-train-sdk/index.html" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://docs.nvidia.com/clara/clara-train-sdk/index.html</a>.

</span>
</li>
<li id="bib.bib26" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Paillier (1999)</span>
<span class="ltx_bibblock">
Paillier, P.

</span>
<span class="ltx_bibblock">Public-key cryptosystems based on composite degree residuosity
classes.

</span>
<span class="ltx_bibblock">In <em id="bib.bib26.1.1" class="ltx_emph ltx_font_italic">International conference on the theory and applications of
cryptographic techniques</em>, pp.  223–238. Springer, 1999.

</span>
</li>
<li id="bib.bib27" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Paulik et al. (2021)</span>
<span class="ltx_bibblock">
Paulik, M., Seigel, M., Mason, H., Telaar, D., Kluivers, J., van Dalen, R. C.,
Lau, C. W., Carlson, L., Granqvist, F., Vandevelde, C., Agarwal, S.,
Freudiger, J., Byde, A., Bhowmick, A., Kapoor, G., Beaumont, S., Cahill,
Á., Hughes, D., Javidbakht, O., Dong, F., Rishi, R., and Hung, S.

</span>
<span class="ltx_bibblock">Federated evaluation and tuning for on-device personalization: System
design &amp; applications.

</span>
<span class="ltx_bibblock"><em id="bib.bib27.1.1" class="ltx_emph ltx_font_italic">CoRR</em>, abs/2102.08503, 2021.

</span>
<span class="ltx_bibblock">URL <a target="_blank" href="https://arxiv.org/abs/2102.08503" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://arxiv.org/abs/2102.08503</a>.

</span>
</li>
<li id="bib.bib28" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Reddi et al. (2020)</span>
<span class="ltx_bibblock">
Reddi, S., Charles, Z., Zaheer, M., Garrett, Z., Rush, K., Konečnỳ,
J., Kumar, S., and McMahan, H. B.

</span>
<span class="ltx_bibblock">Adaptive federated optimization.

</span>
<span class="ltx_bibblock"><em id="bib.bib28.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2003.00295</em>, 2020.

</span>
</li>
<li id="bib.bib29" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Reina et al. (2021)</span>
<span class="ltx_bibblock">
Reina, G. A., Gruzdev, A., Foley, P., Perepelkina, O., Sharma, M., Davidyuk,
I., Trushkin, I., Radionov, M., Mokrov, A., Agapov, D., Martin, J., Edwards,
B., Sheller, M. J., Pati, S., Moorthy, P. N., Wang, S., Shah, P., and Bakas,
S.

</span>
<span class="ltx_bibblock">OpenFL: An open-source framework for federated learning, 2021.

</span>
</li>
<li id="bib.bib30" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">So et al. (2021a)</span>
<span class="ltx_bibblock">
So, J., Ali, R. E., Güler, B., and Avestimehr, A. S.

</span>
<span class="ltx_bibblock">Secure aggregation for buffered asynchronous federated learning.

</span>
<span class="ltx_bibblock"><em id="bib.bib30.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2110.02177</em>, 2021a.

</span>
</li>
<li id="bib.bib31" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">So et al. (2021b)</span>
<span class="ltx_bibblock">
So, J., Güler, B., and Avestimehr, A. S.

</span>
<span class="ltx_bibblock">Turbo-aggregate: Breaking the quadratic aggregation barrier in secure
federated learning.

</span>
<span class="ltx_bibblock"><em id="bib.bib31.1.1" class="ltx_emph ltx_font_italic">IEEE Journal on Selected Areas in Information Theory</em>,
2(1):479–489, 2021b.

</span>
</li>
<li id="bib.bib32" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">(32)</span>
<span class="ltx_bibblock">
WeBank.

</span>
<span class="ltx_bibblock">Fate (federated ai technology enabler).

</span>
<span class="ltx_bibblock"><a target="_blank" href="https://fate.fedai.org" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://fate.fedai.org</a>.

</span>
</li>
<li id="bib.bib33" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wu et al. (2019)</span>
<span class="ltx_bibblock">
Wu, C.-J., Brooks, D., Chen, K., Chen, D., Choudhury, S., Dukhan, M.,
Hazelwood, K., Isaac, E., Jia, Y., Jia, B., Leyvand, T., Lu, H., Lu, Y.,
Qiao, L., Reagen, B., Spisak, J., Sun, F., Tulloch, A., Vajda, P., Wang, X.,
Wang, Y., Wasti, B., Wu, Y., Xian, R., Yoo, S., and Zhang, P.

</span>
<span class="ltx_bibblock">Machine learning at facebook: Understanding inference at the edge.

</span>
<span class="ltx_bibblock">pp.  331–344, 2019.

</span>
<span class="ltx_bibblock">doi: <span class="ltx_ref ltx_nolink ltx_Url ltx_ref_self">10.1109/HPCA.2019.00048</span>.

</span>
</li>
<li id="bib.bib34" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Xie et al. (2019)</span>
<span class="ltx_bibblock">
Xie, C., Koyejo, S., and Gupta, I.

</span>
<span class="ltx_bibblock">Asynchronous federated optimization.

</span>
<span class="ltx_bibblock"><em id="bib.bib34.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:1903.03934</em>, 2019.

</span>
</li>
<li id="bib.bib35" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Xu et al. (2021)</span>
<span class="ltx_bibblock">
Xu, C., Qu, Y., Xiang, Y., and Gao, L.

</span>
<span class="ltx_bibblock">Asynchronous federated learning on heterogeneous devices: A survey.

</span>
<span class="ltx_bibblock"><em id="bib.bib35.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2109.04269</em>, 2021.

</span>
</li>
</ul>
</section>
<div class="ltx_pagination ltx_role_newpage"></div>
<section id="Ax1" class="ltx_appendix">
<h2 class="ltx_title ltx_title_appendix">Supplementary Material</h2>

</section>
<section id="A1" class="ltx_appendix">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix A </span>Cryptographic Primitives</h2>

<section id="A1.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.1 </span>Diffie–Hellman Key Exchange Protocol</h3>

<div id="A1.SS1.p1" class="ltx_para ltx_noindent">
<p id="A1.SS1.p1.1" class="ltx_p">Diffie–Hellman key exchange protocol allows two parties to securely agree on a randomly-generated shared secret via an untrusted communication channel. Viewed in the server-client setting, the protocol consists of an initial message from one party (server) and a completing message as a response from the other one (client). The server can prepare the initial messages in advance, without knowing the identities of the clients. The client can solely determine the shared secret once it receives the initial message. The client needs to interact with the server only once to finish the protocol by sending the completing message.</p>
</div>
</section>
<section id="A1.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.2 </span>Additive One-time pad (OTP)</h3>

<div id="A1.SS2.p1" class="ltx_para ltx_noindent">
<p id="A1.SS2.p1.1" class="ltx_p">There are many existing additive homomorphic encryption schemes such as the works in <cite class="ltx_cite ltx_citemacro_cite">ElGamal (<a href="#bib.bib11" title="" class="ltx_ref">1985</a>); Goldwasser &amp; Micali (<a href="#bib.bib12" title="" class="ltx_ref">1982</a>); Paillier (<a href="#bib.bib26" title="" class="ltx_ref">1999</a>); Cohen &amp; Fischer (<a href="#bib.bib10" title="" class="ltx_ref">1985</a>)</cite>. The complexity of the decryption algorithms in these protocols is usually linear in the ciphertext size and is independent of the number of additions. However, these schemes often operate on a large finite group whose elements can be as large as 1024–3072 bits. Such requirement inflates the ciphertext size even if the plaintext space is much smaller (e.g., 32 bit integers). Such blow-up makes these schemes less desirable when ciphertexts are transmitted via network and traffic is at a premium, for example, on mobile devices.</p>
</div>
<div id="A1.SS2.p2" class="ltx_para ltx_noindent">
<p id="A1.SS2.p2.1" class="ltx_p">A PRNG-generated additive one-time pad (OTP) is a good alternative to avoid the expansion of the ciphertext. The protocol is summarized in <a href="#A1.F14" title="In A.2 Additive One-time pad (OTP) ‣ Appendix A Cryptographic Primitives" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">14</span></a>.</p>
</div>
<div id="A1.SS2.p3" class="ltx_para ltx_noindent">
<p id="A1.SS2.p3.1" class="ltx_p">The additively homomorphic encryption scheme in <a href="#A1.F14" title="In A.2 Additive One-time pad (OTP) ‣ Appendix A Cryptographic Primitives" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">14</span></a> can operate over any finite Abelian group (e.g., <math id="A1.SS2.p3.1.m1.1" class="ltx_Math" alttext="\mathbb{Z}_{2^{32}}" display="inline"><semantics id="A1.SS2.p3.1.m1.1a"><msub id="A1.SS2.p3.1.m1.1.1" xref="A1.SS2.p3.1.m1.1.1.cmml"><mi id="A1.SS2.p3.1.m1.1.1.2" xref="A1.SS2.p3.1.m1.1.1.2.cmml">ℤ</mi><msup id="A1.SS2.p3.1.m1.1.1.3" xref="A1.SS2.p3.1.m1.1.1.3.cmml"><mn id="A1.SS2.p3.1.m1.1.1.3.2" xref="A1.SS2.p3.1.m1.1.1.3.2.cmml">2</mn><mn id="A1.SS2.p3.1.m1.1.1.3.3" xref="A1.SS2.p3.1.m1.1.1.3.3.cmml">32</mn></msup></msub><annotation-xml encoding="MathML-Content" id="A1.SS2.p3.1.m1.1b"><apply id="A1.SS2.p3.1.m1.1.1.cmml" xref="A1.SS2.p3.1.m1.1.1"><csymbol cd="ambiguous" id="A1.SS2.p3.1.m1.1.1.1.cmml" xref="A1.SS2.p3.1.m1.1.1">subscript</csymbol><ci id="A1.SS2.p3.1.m1.1.1.2.cmml" xref="A1.SS2.p3.1.m1.1.1.2">ℤ</ci><apply id="A1.SS2.p3.1.m1.1.1.3.cmml" xref="A1.SS2.p3.1.m1.1.1.3"><csymbol cd="ambiguous" id="A1.SS2.p3.1.m1.1.1.3.1.cmml" xref="A1.SS2.p3.1.m1.1.1.3">superscript</csymbol><cn type="integer" id="A1.SS2.p3.1.m1.1.1.3.2.cmml" xref="A1.SS2.p3.1.m1.1.1.3.2">2</cn><cn type="integer" id="A1.SS2.p3.1.m1.1.1.3.3.cmml" xref="A1.SS2.p3.1.m1.1.1.3.3">32</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.SS2.p3.1.m1.1c">\mathbb{Z}_{2^{32}}</annotation></semantics></math>). Therefore the ciphertext can be in the same space as plaintext. The downside is that the complexity of the decryption algorithm scales up linearly with number of additions performed, in contrast to a constant in other encryption schemes. We argue that trading in decryption workload for a more compact ciphertext is an acceptable trade-off in settings with mobile devices if the decryption is performed server-side for the following reasons:</p>
<ol id="A1.I1" class="ltx_enumerate">
<li id="A1.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span> 
<div id="A1.I1.i1.p1" class="ltx_para">
<p id="A1.I1.i1.p1.1" class="ltx_p">Mobile devices are often restricted in both computation power and communication bandwidth. An additive OTP is more efficient in both computation and bandwidth cost, compared to the group operations needed in other encryption schemes.</p>
</div>
</li>
<li id="A1.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span> 
<div id="A1.I1.i2.p1" class="ltx_para ltx_noindent">
<p id="A1.I1.i2.p1.1" class="ltx_p">The server usually has much more computation resources to perform the relatively more expensive decryption. Furthermore, hardware acceleration optimizations are often available server-side, reducing the costs of the decryption algorithm.</p>
</div>
</li>
</ol>
</div>
<figure id="A1.F14" class="ltx_figure">
<p id="A1.F14.1" class="ltx_p ltx_align_center">
<span id="A1.F14.1.1.1" class="ltx_inline-block ltx_minipage ltx_align_middle ltx_framed ltx_framed_rectangle" style="width:411.9pt;">
<span id="A1.F14.1.1.1.1" class="ltx_p"><span id="A1.F14.1.1.1.1.1" class="ltx_text ltx_font_bold">Public parameters:</span> finite Abelian group <math id="A1.F14.1.1.1.1.m1.1" class="ltx_Math" alttext="\mathbb{G}" display="inline"><semantics id="A1.F14.1.1.1.1.m1.1a"><mi id="A1.F14.1.1.1.1.m1.1.1" xref="A1.F14.1.1.1.1.m1.1.1.cmml">𝔾</mi><annotation-xml encoding="MathML-Content" id="A1.F14.1.1.1.1.m1.1b"><ci id="A1.F14.1.1.1.1.m1.1.1.cmml" xref="A1.F14.1.1.1.1.m1.1.1">𝔾</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.F14.1.1.1.1.m1.1c">\mathbb{G}</annotation></semantics></math></span>
<span id="A1.I2" class="ltx_itemize">
<span id="A1.I2.i1" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">•</span> 
<span id="A1.I2.i1.p1" class="ltx_para ltx_noindent">
<span id="A1.I2.i1.p1.6" class="ltx_p"><math id="A1.I2.i1.p1.1.m1.1" class="ltx_Math" alttext="\mathbf{Enc_{k}(v)}" display="inline"><semantics id="A1.I2.i1.p1.1.m1.1a"><mrow id="A1.I2.i1.p1.1.m1.1.2" xref="A1.I2.i1.p1.1.m1.1.2.cmml"><msub id="A1.I2.i1.p1.1.m1.1.2.2" xref="A1.I2.i1.p1.1.m1.1.2.2.cmml"><mi id="A1.I2.i1.p1.1.m1.1.2.2.2" xref="A1.I2.i1.p1.1.m1.1.2.2.2.cmml">𝐄𝐧𝐜</mi><mi id="A1.I2.i1.p1.1.m1.1.2.2.3" xref="A1.I2.i1.p1.1.m1.1.2.2.3.cmml">𝐤</mi></msub><mo lspace="0em" rspace="0em" id="A1.I2.i1.p1.1.m1.1.2.1" xref="A1.I2.i1.p1.1.m1.1.2.1.cmml">​</mo><mrow id="A1.I2.i1.p1.1.m1.1.2.3.2" xref="A1.I2.i1.p1.1.m1.1.2.cmml"><mo stretchy="false" id="A1.I2.i1.p1.1.m1.1.2.3.2.1" xref="A1.I2.i1.p1.1.m1.1.2.cmml">(</mo><mi id="A1.I2.i1.p1.1.m1.1.1" xref="A1.I2.i1.p1.1.m1.1.1.cmml">𝐯</mi><mo stretchy="false" id="A1.I2.i1.p1.1.m1.1.2.3.2.2" xref="A1.I2.i1.p1.1.m1.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="A1.I2.i1.p1.1.m1.1b"><apply id="A1.I2.i1.p1.1.m1.1.2.cmml" xref="A1.I2.i1.p1.1.m1.1.2"><times id="A1.I2.i1.p1.1.m1.1.2.1.cmml" xref="A1.I2.i1.p1.1.m1.1.2.1"></times><apply id="A1.I2.i1.p1.1.m1.1.2.2.cmml" xref="A1.I2.i1.p1.1.m1.1.2.2"><csymbol cd="ambiguous" id="A1.I2.i1.p1.1.m1.1.2.2.1.cmml" xref="A1.I2.i1.p1.1.m1.1.2.2">subscript</csymbol><ci id="A1.I2.i1.p1.1.m1.1.2.2.2.cmml" xref="A1.I2.i1.p1.1.m1.1.2.2.2">𝐄𝐧𝐜</ci><ci id="A1.I2.i1.p1.1.m1.1.2.2.3.cmml" xref="A1.I2.i1.p1.1.m1.1.2.2.3">𝐤</ci></apply><ci id="A1.I2.i1.p1.1.m1.1.1.cmml" xref="A1.I2.i1.p1.1.m1.1.1">𝐯</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.I2.i1.p1.1.m1.1c">\mathbf{Enc_{k}(v)}</annotation></semantics></math><span id="A1.I2.i1.p1.6.1" class="ltx_text ltx_font_bold">:</span> To encrypt a vector <math id="A1.I2.i1.p1.2.m2.1" class="ltx_Math" alttext="v\in\mathbb{G}^{\ell}" display="inline"><semantics id="A1.I2.i1.p1.2.m2.1a"><mrow id="A1.I2.i1.p1.2.m2.1.1" xref="A1.I2.i1.p1.2.m2.1.1.cmml"><mi id="A1.I2.i1.p1.2.m2.1.1.2" xref="A1.I2.i1.p1.2.m2.1.1.2.cmml">v</mi><mo id="A1.I2.i1.p1.2.m2.1.1.1" xref="A1.I2.i1.p1.2.m2.1.1.1.cmml">∈</mo><msup id="A1.I2.i1.p1.2.m2.1.1.3" xref="A1.I2.i1.p1.2.m2.1.1.3.cmml"><mi id="A1.I2.i1.p1.2.m2.1.1.3.2" xref="A1.I2.i1.p1.2.m2.1.1.3.2.cmml">𝔾</mi><mi mathvariant="normal" id="A1.I2.i1.p1.2.m2.1.1.3.3" xref="A1.I2.i1.p1.2.m2.1.1.3.3.cmml">ℓ</mi></msup></mrow><annotation-xml encoding="MathML-Content" id="A1.I2.i1.p1.2.m2.1b"><apply id="A1.I2.i1.p1.2.m2.1.1.cmml" xref="A1.I2.i1.p1.2.m2.1.1"><in id="A1.I2.i1.p1.2.m2.1.1.1.cmml" xref="A1.I2.i1.p1.2.m2.1.1.1"></in><ci id="A1.I2.i1.p1.2.m2.1.1.2.cmml" xref="A1.I2.i1.p1.2.m2.1.1.2">𝑣</ci><apply id="A1.I2.i1.p1.2.m2.1.1.3.cmml" xref="A1.I2.i1.p1.2.m2.1.1.3"><csymbol cd="ambiguous" id="A1.I2.i1.p1.2.m2.1.1.3.1.cmml" xref="A1.I2.i1.p1.2.m2.1.1.3">superscript</csymbol><ci id="A1.I2.i1.p1.2.m2.1.1.3.2.cmml" xref="A1.I2.i1.p1.2.m2.1.1.3.2">𝔾</ci><ci id="A1.I2.i1.p1.2.m2.1.1.3.3.cmml" xref="A1.I2.i1.p1.2.m2.1.1.3.3">ℓ</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.I2.i1.p1.2.m2.1c">v\in\mathbb{G}^{\ell}</annotation></semantics></math>, a cryptographically secure PRNG is used to generate a vector <math id="A1.I2.i1.p1.3.m3.1" class="ltx_Math" alttext="m\leftarrow\mathbf{PRNG}(k)" display="inline"><semantics id="A1.I2.i1.p1.3.m3.1a"><mrow id="A1.I2.i1.p1.3.m3.1.2" xref="A1.I2.i1.p1.3.m3.1.2.cmml"><mi id="A1.I2.i1.p1.3.m3.1.2.2" xref="A1.I2.i1.p1.3.m3.1.2.2.cmml">m</mi><mo stretchy="false" id="A1.I2.i1.p1.3.m3.1.2.1" xref="A1.I2.i1.p1.3.m3.1.2.1.cmml">←</mo><mrow id="A1.I2.i1.p1.3.m3.1.2.3" xref="A1.I2.i1.p1.3.m3.1.2.3.cmml"><mi id="A1.I2.i1.p1.3.m3.1.2.3.2" xref="A1.I2.i1.p1.3.m3.1.2.3.2.cmml">𝐏𝐑𝐍𝐆</mi><mo lspace="0em" rspace="0em" id="A1.I2.i1.p1.3.m3.1.2.3.1" xref="A1.I2.i1.p1.3.m3.1.2.3.1.cmml">​</mo><mrow id="A1.I2.i1.p1.3.m3.1.2.3.3.2" xref="A1.I2.i1.p1.3.m3.1.2.3.cmml"><mo stretchy="false" id="A1.I2.i1.p1.3.m3.1.2.3.3.2.1" xref="A1.I2.i1.p1.3.m3.1.2.3.cmml">(</mo><mi id="A1.I2.i1.p1.3.m3.1.1" xref="A1.I2.i1.p1.3.m3.1.1.cmml">k</mi><mo stretchy="false" id="A1.I2.i1.p1.3.m3.1.2.3.3.2.2" xref="A1.I2.i1.p1.3.m3.1.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="A1.I2.i1.p1.3.m3.1b"><apply id="A1.I2.i1.p1.3.m3.1.2.cmml" xref="A1.I2.i1.p1.3.m3.1.2"><ci id="A1.I2.i1.p1.3.m3.1.2.1.cmml" xref="A1.I2.i1.p1.3.m3.1.2.1">←</ci><ci id="A1.I2.i1.p1.3.m3.1.2.2.cmml" xref="A1.I2.i1.p1.3.m3.1.2.2">𝑚</ci><apply id="A1.I2.i1.p1.3.m3.1.2.3.cmml" xref="A1.I2.i1.p1.3.m3.1.2.3"><times id="A1.I2.i1.p1.3.m3.1.2.3.1.cmml" xref="A1.I2.i1.p1.3.m3.1.2.3.1"></times><ci id="A1.I2.i1.p1.3.m3.1.2.3.2.cmml" xref="A1.I2.i1.p1.3.m3.1.2.3.2">𝐏𝐑𝐍𝐆</ci><ci id="A1.I2.i1.p1.3.m3.1.1.cmml" xref="A1.I2.i1.p1.3.m3.1.1">𝑘</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.I2.i1.p1.3.m3.1c">m\leftarrow\mathbf{PRNG}(k)</annotation></semantics></math> where <math id="A1.I2.i1.p1.4.m4.1" class="ltx_Math" alttext="m\in\mathbb{G}^{\ell}" display="inline"><semantics id="A1.I2.i1.p1.4.m4.1a"><mrow id="A1.I2.i1.p1.4.m4.1.1" xref="A1.I2.i1.p1.4.m4.1.1.cmml"><mi id="A1.I2.i1.p1.4.m4.1.1.2" xref="A1.I2.i1.p1.4.m4.1.1.2.cmml">m</mi><mo id="A1.I2.i1.p1.4.m4.1.1.1" xref="A1.I2.i1.p1.4.m4.1.1.1.cmml">∈</mo><msup id="A1.I2.i1.p1.4.m4.1.1.3" xref="A1.I2.i1.p1.4.m4.1.1.3.cmml"><mi id="A1.I2.i1.p1.4.m4.1.1.3.2" xref="A1.I2.i1.p1.4.m4.1.1.3.2.cmml">𝔾</mi><mi mathvariant="normal" id="A1.I2.i1.p1.4.m4.1.1.3.3" xref="A1.I2.i1.p1.4.m4.1.1.3.3.cmml">ℓ</mi></msup></mrow><annotation-xml encoding="MathML-Content" id="A1.I2.i1.p1.4.m4.1b"><apply id="A1.I2.i1.p1.4.m4.1.1.cmml" xref="A1.I2.i1.p1.4.m4.1.1"><in id="A1.I2.i1.p1.4.m4.1.1.1.cmml" xref="A1.I2.i1.p1.4.m4.1.1.1"></in><ci id="A1.I2.i1.p1.4.m4.1.1.2.cmml" xref="A1.I2.i1.p1.4.m4.1.1.2">𝑚</ci><apply id="A1.I2.i1.p1.4.m4.1.1.3.cmml" xref="A1.I2.i1.p1.4.m4.1.1.3"><csymbol cd="ambiguous" id="A1.I2.i1.p1.4.m4.1.1.3.1.cmml" xref="A1.I2.i1.p1.4.m4.1.1.3">superscript</csymbol><ci id="A1.I2.i1.p1.4.m4.1.1.3.2.cmml" xref="A1.I2.i1.p1.4.m4.1.1.3.2">𝔾</ci><ci id="A1.I2.i1.p1.4.m4.1.1.3.3.cmml" xref="A1.I2.i1.p1.4.m4.1.1.3.3">ℓ</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.I2.i1.p1.4.m4.1c">m\in\mathbb{G}^{\ell}</annotation></semantics></math>. The ciphertext <math id="A1.I2.i1.p1.5.m5.1" class="ltx_Math" alttext="c" display="inline"><semantics id="A1.I2.i1.p1.5.m5.1a"><mi id="A1.I2.i1.p1.5.m5.1.1" xref="A1.I2.i1.p1.5.m5.1.1.cmml">c</mi><annotation-xml encoding="MathML-Content" id="A1.I2.i1.p1.5.m5.1b"><ci id="A1.I2.i1.p1.5.m5.1.1.cmml" xref="A1.I2.i1.p1.5.m5.1.1">𝑐</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.I2.i1.p1.5.m5.1c">c</annotation></semantics></math> is defined as the element-wise sum <math id="A1.I2.i1.p1.6.m6.1" class="ltx_Math" alttext="v+m" display="inline"><semantics id="A1.I2.i1.p1.6.m6.1a"><mrow id="A1.I2.i1.p1.6.m6.1.1" xref="A1.I2.i1.p1.6.m6.1.1.cmml"><mi id="A1.I2.i1.p1.6.m6.1.1.2" xref="A1.I2.i1.p1.6.m6.1.1.2.cmml">v</mi><mo id="A1.I2.i1.p1.6.m6.1.1.1" xref="A1.I2.i1.p1.6.m6.1.1.1.cmml">+</mo><mi id="A1.I2.i1.p1.6.m6.1.1.3" xref="A1.I2.i1.p1.6.m6.1.1.3.cmml">m</mi></mrow><annotation-xml encoding="MathML-Content" id="A1.I2.i1.p1.6.m6.1b"><apply id="A1.I2.i1.p1.6.m6.1.1.cmml" xref="A1.I2.i1.p1.6.m6.1.1"><plus id="A1.I2.i1.p1.6.m6.1.1.1.cmml" xref="A1.I2.i1.p1.6.m6.1.1.1"></plus><ci id="A1.I2.i1.p1.6.m6.1.1.2.cmml" xref="A1.I2.i1.p1.6.m6.1.1.2">𝑣</ci><ci id="A1.I2.i1.p1.6.m6.1.1.3.cmml" xref="A1.I2.i1.p1.6.m6.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.I2.i1.p1.6.m6.1c">v+m</annotation></semantics></math>.</span>
</span></span>
<span id="A1.I2.i2" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">•</span> 
<span id="A1.I2.i2.p1" class="ltx_para ltx_noindent">
<span id="A1.I2.i2.p1.2" class="ltx_p"><span id="A1.I2.i2.p1.2.1" class="ltx_text ltx_font_bold">Addition:</span> Two ciphertexts <math id="A1.I2.i2.p1.1.m1.1" class="ltx_Math" alttext="c_{1}" display="inline"><semantics id="A1.I2.i2.p1.1.m1.1a"><msub id="A1.I2.i2.p1.1.m1.1.1" xref="A1.I2.i2.p1.1.m1.1.1.cmml"><mi id="A1.I2.i2.p1.1.m1.1.1.2" xref="A1.I2.i2.p1.1.m1.1.1.2.cmml">c</mi><mn id="A1.I2.i2.p1.1.m1.1.1.3" xref="A1.I2.i2.p1.1.m1.1.1.3.cmml">1</mn></msub><annotation-xml encoding="MathML-Content" id="A1.I2.i2.p1.1.m1.1b"><apply id="A1.I2.i2.p1.1.m1.1.1.cmml" xref="A1.I2.i2.p1.1.m1.1.1"><csymbol cd="ambiguous" id="A1.I2.i2.p1.1.m1.1.1.1.cmml" xref="A1.I2.i2.p1.1.m1.1.1">subscript</csymbol><ci id="A1.I2.i2.p1.1.m1.1.1.2.cmml" xref="A1.I2.i2.p1.1.m1.1.1.2">𝑐</ci><cn type="integer" id="A1.I2.i2.p1.1.m1.1.1.3.cmml" xref="A1.I2.i2.p1.1.m1.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.I2.i2.p1.1.m1.1c">c_{1}</annotation></semantics></math> and <math id="A1.I2.i2.p1.2.m2.1" class="ltx_Math" alttext="c_{2}" display="inline"><semantics id="A1.I2.i2.p1.2.m2.1a"><msub id="A1.I2.i2.p1.2.m2.1.1" xref="A1.I2.i2.p1.2.m2.1.1.cmml"><mi id="A1.I2.i2.p1.2.m2.1.1.2" xref="A1.I2.i2.p1.2.m2.1.1.2.cmml">c</mi><mn id="A1.I2.i2.p1.2.m2.1.1.3" xref="A1.I2.i2.p1.2.m2.1.1.3.cmml">2</mn></msub><annotation-xml encoding="MathML-Content" id="A1.I2.i2.p1.2.m2.1b"><apply id="A1.I2.i2.p1.2.m2.1.1.cmml" xref="A1.I2.i2.p1.2.m2.1.1"><csymbol cd="ambiguous" id="A1.I2.i2.p1.2.m2.1.1.1.cmml" xref="A1.I2.i2.p1.2.m2.1.1">subscript</csymbol><ci id="A1.I2.i2.p1.2.m2.1.1.2.cmml" xref="A1.I2.i2.p1.2.m2.1.1.2">𝑐</ci><cn type="integer" id="A1.I2.i2.p1.2.m2.1.1.3.cmml" xref="A1.I2.i2.p1.2.m2.1.1.3">2</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.I2.i2.p1.2.m2.1c">c_{2}</annotation></semantics></math> can be added together element-wise.</span>
</span></span>
<span id="A1.I2.i3" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">•</span> 
<span id="A1.I2.i3.p1" class="ltx_para ltx_noindent">
<span id="A1.I2.i3.p1.2" class="ltx_p"><span id="A1.I2.i3.p1.2.1" class="ltx_text ltx_font_bold">Decryption:</span> An (aggregated) ciphertext <math id="A1.I2.i3.p1.1.m1.1" class="ltx_Math" alttext="c\coloneqq\sum\mathbf{Enc}_{k_{i}}(v_{i})" display="inline"><semantics id="A1.I2.i3.p1.1.m1.1a"><mrow id="A1.I2.i3.p1.1.m1.1.1" xref="A1.I2.i3.p1.1.m1.1.1.cmml"><mi id="A1.I2.i3.p1.1.m1.1.1.3" xref="A1.I2.i3.p1.1.m1.1.1.3.cmml">c</mi><mo rspace="0.111em" id="A1.I2.i3.p1.1.m1.1.1.2" xref="A1.I2.i3.p1.1.m1.1.1.2.cmml">≔</mo><mrow id="A1.I2.i3.p1.1.m1.1.1.1" xref="A1.I2.i3.p1.1.m1.1.1.1.cmml"><mo id="A1.I2.i3.p1.1.m1.1.1.1.2" xref="A1.I2.i3.p1.1.m1.1.1.1.2.cmml">∑</mo><mrow id="A1.I2.i3.p1.1.m1.1.1.1.1" xref="A1.I2.i3.p1.1.m1.1.1.1.1.cmml"><msub id="A1.I2.i3.p1.1.m1.1.1.1.1.3" xref="A1.I2.i3.p1.1.m1.1.1.1.1.3.cmml"><mi id="A1.I2.i3.p1.1.m1.1.1.1.1.3.2" xref="A1.I2.i3.p1.1.m1.1.1.1.1.3.2.cmml">𝐄𝐧𝐜</mi><msub id="A1.I2.i3.p1.1.m1.1.1.1.1.3.3" xref="A1.I2.i3.p1.1.m1.1.1.1.1.3.3.cmml"><mi id="A1.I2.i3.p1.1.m1.1.1.1.1.3.3.2" xref="A1.I2.i3.p1.1.m1.1.1.1.1.3.3.2.cmml">k</mi><mi id="A1.I2.i3.p1.1.m1.1.1.1.1.3.3.3" xref="A1.I2.i3.p1.1.m1.1.1.1.1.3.3.3.cmml">i</mi></msub></msub><mo lspace="0em" rspace="0em" id="A1.I2.i3.p1.1.m1.1.1.1.1.2" xref="A1.I2.i3.p1.1.m1.1.1.1.1.2.cmml">​</mo><mrow id="A1.I2.i3.p1.1.m1.1.1.1.1.1.1" xref="A1.I2.i3.p1.1.m1.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="A1.I2.i3.p1.1.m1.1.1.1.1.1.1.2" xref="A1.I2.i3.p1.1.m1.1.1.1.1.1.1.1.cmml">(</mo><msub id="A1.I2.i3.p1.1.m1.1.1.1.1.1.1.1" xref="A1.I2.i3.p1.1.m1.1.1.1.1.1.1.1.cmml"><mi id="A1.I2.i3.p1.1.m1.1.1.1.1.1.1.1.2" xref="A1.I2.i3.p1.1.m1.1.1.1.1.1.1.1.2.cmml">v</mi><mi id="A1.I2.i3.p1.1.m1.1.1.1.1.1.1.1.3" xref="A1.I2.i3.p1.1.m1.1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo stretchy="false" id="A1.I2.i3.p1.1.m1.1.1.1.1.1.1.3" xref="A1.I2.i3.p1.1.m1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="A1.I2.i3.p1.1.m1.1b"><apply id="A1.I2.i3.p1.1.m1.1.1.cmml" xref="A1.I2.i3.p1.1.m1.1.1"><ci id="A1.I2.i3.p1.1.m1.1.1.2.cmml" xref="A1.I2.i3.p1.1.m1.1.1.2">≔</ci><ci id="A1.I2.i3.p1.1.m1.1.1.3.cmml" xref="A1.I2.i3.p1.1.m1.1.1.3">𝑐</ci><apply id="A1.I2.i3.p1.1.m1.1.1.1.cmml" xref="A1.I2.i3.p1.1.m1.1.1.1"><sum id="A1.I2.i3.p1.1.m1.1.1.1.2.cmml" xref="A1.I2.i3.p1.1.m1.1.1.1.2"></sum><apply id="A1.I2.i3.p1.1.m1.1.1.1.1.cmml" xref="A1.I2.i3.p1.1.m1.1.1.1.1"><times id="A1.I2.i3.p1.1.m1.1.1.1.1.2.cmml" xref="A1.I2.i3.p1.1.m1.1.1.1.1.2"></times><apply id="A1.I2.i3.p1.1.m1.1.1.1.1.3.cmml" xref="A1.I2.i3.p1.1.m1.1.1.1.1.3"><csymbol cd="ambiguous" id="A1.I2.i3.p1.1.m1.1.1.1.1.3.1.cmml" xref="A1.I2.i3.p1.1.m1.1.1.1.1.3">subscript</csymbol><ci id="A1.I2.i3.p1.1.m1.1.1.1.1.3.2.cmml" xref="A1.I2.i3.p1.1.m1.1.1.1.1.3.2">𝐄𝐧𝐜</ci><apply id="A1.I2.i3.p1.1.m1.1.1.1.1.3.3.cmml" xref="A1.I2.i3.p1.1.m1.1.1.1.1.3.3"><csymbol cd="ambiguous" id="A1.I2.i3.p1.1.m1.1.1.1.1.3.3.1.cmml" xref="A1.I2.i3.p1.1.m1.1.1.1.1.3.3">subscript</csymbol><ci id="A1.I2.i3.p1.1.m1.1.1.1.1.3.3.2.cmml" xref="A1.I2.i3.p1.1.m1.1.1.1.1.3.3.2">𝑘</ci><ci id="A1.I2.i3.p1.1.m1.1.1.1.1.3.3.3.cmml" xref="A1.I2.i3.p1.1.m1.1.1.1.1.3.3.3">𝑖</ci></apply></apply><apply id="A1.I2.i3.p1.1.m1.1.1.1.1.1.1.1.cmml" xref="A1.I2.i3.p1.1.m1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="A1.I2.i3.p1.1.m1.1.1.1.1.1.1.1.1.cmml" xref="A1.I2.i3.p1.1.m1.1.1.1.1.1.1">subscript</csymbol><ci id="A1.I2.i3.p1.1.m1.1.1.1.1.1.1.1.2.cmml" xref="A1.I2.i3.p1.1.m1.1.1.1.1.1.1.1.2">𝑣</ci><ci id="A1.I2.i3.p1.1.m1.1.1.1.1.1.1.1.3.cmml" xref="A1.I2.i3.p1.1.m1.1.1.1.1.1.1.1.3">𝑖</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.I2.i3.p1.1.m1.1c">c\coloneqq\sum\mathbf{Enc}_{k_{i}}(v_{i})</annotation></semantics></math> can be decrypted as <math id="A1.I2.i3.p1.2.m2.1" class="ltx_Math" alttext="\sum v_{i}=c-\sum\mathbf{PRNG}(k_{i})" display="inline"><semantics id="A1.I2.i3.p1.2.m2.1a"><mrow id="A1.I2.i3.p1.2.m2.1.1" xref="A1.I2.i3.p1.2.m2.1.1.cmml"><mrow id="A1.I2.i3.p1.2.m2.1.1.3" xref="A1.I2.i3.p1.2.m2.1.1.3.cmml"><mo id="A1.I2.i3.p1.2.m2.1.1.3.1" xref="A1.I2.i3.p1.2.m2.1.1.3.1.cmml">∑</mo><msub id="A1.I2.i3.p1.2.m2.1.1.3.2" xref="A1.I2.i3.p1.2.m2.1.1.3.2.cmml"><mi id="A1.I2.i3.p1.2.m2.1.1.3.2.2" xref="A1.I2.i3.p1.2.m2.1.1.3.2.2.cmml">v</mi><mi id="A1.I2.i3.p1.2.m2.1.1.3.2.3" xref="A1.I2.i3.p1.2.m2.1.1.3.2.3.cmml">i</mi></msub></mrow><mo id="A1.I2.i3.p1.2.m2.1.1.2" xref="A1.I2.i3.p1.2.m2.1.1.2.cmml">=</mo><mrow id="A1.I2.i3.p1.2.m2.1.1.1" xref="A1.I2.i3.p1.2.m2.1.1.1.cmml"><mi id="A1.I2.i3.p1.2.m2.1.1.1.3" xref="A1.I2.i3.p1.2.m2.1.1.1.3.cmml">c</mi><mo rspace="0.055em" id="A1.I2.i3.p1.2.m2.1.1.1.2" xref="A1.I2.i3.p1.2.m2.1.1.1.2.cmml">−</mo><mrow id="A1.I2.i3.p1.2.m2.1.1.1.1" xref="A1.I2.i3.p1.2.m2.1.1.1.1.cmml"><mo id="A1.I2.i3.p1.2.m2.1.1.1.1.2" xref="A1.I2.i3.p1.2.m2.1.1.1.1.2.cmml">∑</mo><mrow id="A1.I2.i3.p1.2.m2.1.1.1.1.1" xref="A1.I2.i3.p1.2.m2.1.1.1.1.1.cmml"><mi id="A1.I2.i3.p1.2.m2.1.1.1.1.1.3" xref="A1.I2.i3.p1.2.m2.1.1.1.1.1.3.cmml">𝐏𝐑𝐍𝐆</mi><mo lspace="0em" rspace="0em" id="A1.I2.i3.p1.2.m2.1.1.1.1.1.2" xref="A1.I2.i3.p1.2.m2.1.1.1.1.1.2.cmml">​</mo><mrow id="A1.I2.i3.p1.2.m2.1.1.1.1.1.1.1" xref="A1.I2.i3.p1.2.m2.1.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="A1.I2.i3.p1.2.m2.1.1.1.1.1.1.1.2" xref="A1.I2.i3.p1.2.m2.1.1.1.1.1.1.1.1.cmml">(</mo><msub id="A1.I2.i3.p1.2.m2.1.1.1.1.1.1.1.1" xref="A1.I2.i3.p1.2.m2.1.1.1.1.1.1.1.1.cmml"><mi id="A1.I2.i3.p1.2.m2.1.1.1.1.1.1.1.1.2" xref="A1.I2.i3.p1.2.m2.1.1.1.1.1.1.1.1.2.cmml">k</mi><mi id="A1.I2.i3.p1.2.m2.1.1.1.1.1.1.1.1.3" xref="A1.I2.i3.p1.2.m2.1.1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo stretchy="false" id="A1.I2.i3.p1.2.m2.1.1.1.1.1.1.1.3" xref="A1.I2.i3.p1.2.m2.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="A1.I2.i3.p1.2.m2.1b"><apply id="A1.I2.i3.p1.2.m2.1.1.cmml" xref="A1.I2.i3.p1.2.m2.1.1"><eq id="A1.I2.i3.p1.2.m2.1.1.2.cmml" xref="A1.I2.i3.p1.2.m2.1.1.2"></eq><apply id="A1.I2.i3.p1.2.m2.1.1.3.cmml" xref="A1.I2.i3.p1.2.m2.1.1.3"><sum id="A1.I2.i3.p1.2.m2.1.1.3.1.cmml" xref="A1.I2.i3.p1.2.m2.1.1.3.1"></sum><apply id="A1.I2.i3.p1.2.m2.1.1.3.2.cmml" xref="A1.I2.i3.p1.2.m2.1.1.3.2"><csymbol cd="ambiguous" id="A1.I2.i3.p1.2.m2.1.1.3.2.1.cmml" xref="A1.I2.i3.p1.2.m2.1.1.3.2">subscript</csymbol><ci id="A1.I2.i3.p1.2.m2.1.1.3.2.2.cmml" xref="A1.I2.i3.p1.2.m2.1.1.3.2.2">𝑣</ci><ci id="A1.I2.i3.p1.2.m2.1.1.3.2.3.cmml" xref="A1.I2.i3.p1.2.m2.1.1.3.2.3">𝑖</ci></apply></apply><apply id="A1.I2.i3.p1.2.m2.1.1.1.cmml" xref="A1.I2.i3.p1.2.m2.1.1.1"><minus id="A1.I2.i3.p1.2.m2.1.1.1.2.cmml" xref="A1.I2.i3.p1.2.m2.1.1.1.2"></minus><ci id="A1.I2.i3.p1.2.m2.1.1.1.3.cmml" xref="A1.I2.i3.p1.2.m2.1.1.1.3">𝑐</ci><apply id="A1.I2.i3.p1.2.m2.1.1.1.1.cmml" xref="A1.I2.i3.p1.2.m2.1.1.1.1"><sum id="A1.I2.i3.p1.2.m2.1.1.1.1.2.cmml" xref="A1.I2.i3.p1.2.m2.1.1.1.1.2"></sum><apply id="A1.I2.i3.p1.2.m2.1.1.1.1.1.cmml" xref="A1.I2.i3.p1.2.m2.1.1.1.1.1"><times id="A1.I2.i3.p1.2.m2.1.1.1.1.1.2.cmml" xref="A1.I2.i3.p1.2.m2.1.1.1.1.1.2"></times><ci id="A1.I2.i3.p1.2.m2.1.1.1.1.1.3.cmml" xref="A1.I2.i3.p1.2.m2.1.1.1.1.1.3">𝐏𝐑𝐍𝐆</ci><apply id="A1.I2.i3.p1.2.m2.1.1.1.1.1.1.1.1.cmml" xref="A1.I2.i3.p1.2.m2.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="A1.I2.i3.p1.2.m2.1.1.1.1.1.1.1.1.1.cmml" xref="A1.I2.i3.p1.2.m2.1.1.1.1.1.1.1">subscript</csymbol><ci id="A1.I2.i3.p1.2.m2.1.1.1.1.1.1.1.1.2.cmml" xref="A1.I2.i3.p1.2.m2.1.1.1.1.1.1.1.1.2">𝑘</ci><ci id="A1.I2.i3.p1.2.m2.1.1.1.1.1.1.1.1.3.cmml" xref="A1.I2.i3.p1.2.m2.1.1.1.1.1.1.1.1.3">𝑖</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.I2.i3.p1.2.m2.1c">\sum v_{i}=c-\sum\mathbf{PRNG}(k_{i})</annotation></semantics></math>.</span>
</span></span>
</span>
</span>
</p>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 14: </span>Additive one-time pads.</figcaption>
</figure>
</section>
</section>
<section id="A2" class="ltx_appendix">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix B </span>Protocol Design and Security Proof</h2>

<div id="A2.p1" class="ltx_para ltx_noindent">
<p id="A2.p1.1" class="ltx_p">In this section we will go over the detailed design of our protocol and formally prove its security. We adopt the same strategy from Cryptonite <cite class="ltx_cite ltx_citemacro_cite">Karl et al. (<a href="#bib.bib16" title="" class="ltx_ref">2020a</a>)</cite>. A trusted party realized by trusted hardware (e.g., Intel SGX) will assist with the procedure and help make up for the dropped clients. With the assistance of the trusted hardware, clients no longer rely on each other to protect their own private inputs or mitigate the dropout of their peers. Without client interdependence, clients no longer need to communicate with each other via the server and no longer need to know about each others’ identities. The absence of interdependency requirement among clients allows
them to participate asynchronously, making our protocol compatible with FedBuff <cite class="ltx_cite ltx_citemacro_cite">Nguyen et al. (<a href="#bib.bib24" title="" class="ltx_ref">2021</a>)</cite>.</p>
</div>
<section id="A2.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">B.1 </span>Problem Setup and Threat Model</h3>

<div id="A2.SS1.p1" class="ltx_para ltx_noindent">
<p id="A2.SS1.p1.1" class="ltx_p">The thread model is composed of a server, a trusted third party and <math id="A2.SS1.p1.1.m1.1" class="ltx_Math" alttext="n" display="inline"><semantics id="A2.SS1.p1.1.m1.1a"><mi id="A2.SS1.p1.1.m1.1.1" xref="A2.SS1.p1.1.m1.1.1.cmml">n</mi><annotation-xml encoding="MathML-Content" id="A2.SS1.p1.1.m1.1b"><ci id="A2.SS1.p1.1.m1.1.1.cmml" xref="A2.SS1.p1.1.m1.1.1">𝑛</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.SS1.p1.1.m1.1c">n</annotation></semantics></math> clients. The trusted third party and the clients can only communicate directly with the server. The clients can choose to participate in the protocol at any time, not necessarily in the beginning. Instead, they will check-in with the server when they become available. Clients may have limited availability. The availability of any two clients may have no overlap on the timeline.</p>
</div>
<div id="A2.SS1.p2" class="ltx_para ltx_noindent">
<p id="A2.SS1.p2.5" class="ltx_p">Each client has a private <math id="A2.SS1.p2.1.m1.1" class="ltx_Math" alttext="\ell" display="inline"><semantics id="A2.SS1.p2.1.m1.1a"><mi mathvariant="normal" id="A2.SS1.p2.1.m1.1.1" xref="A2.SS1.p2.1.m1.1.1.cmml">ℓ</mi><annotation-xml encoding="MathML-Content" id="A2.SS1.p2.1.m1.1b"><ci id="A2.SS1.p2.1.m1.1.1.cmml" xref="A2.SS1.p2.1.m1.1.1">ℓ</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.SS1.p2.1.m1.1c">\ell</annotation></semantics></math>-element array of group elements of a finite group <math id="A2.SS1.p2.2.m2.1" class="ltx_Math" alttext="G" display="inline"><semantics id="A2.SS1.p2.2.m2.1a"><mi id="A2.SS1.p2.2.m2.1.1" xref="A2.SS1.p2.2.m2.1.1.cmml">G</mi><annotation-xml encoding="MathML-Content" id="A2.SS1.p2.2.m2.1b"><ci id="A2.SS1.p2.2.m2.1.1.cmml" xref="A2.SS1.p2.2.m2.1.1">𝐺</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.SS1.p2.2.m2.1c">G</annotation></semantics></math>, where <math id="A2.SS1.p2.3.m3.1" class="ltx_Math" alttext="\ell" display="inline"><semantics id="A2.SS1.p2.3.m3.1a"><mi mathvariant="normal" id="A2.SS1.p2.3.m3.1.1" xref="A2.SS1.p2.3.m3.1.1.cmml">ℓ</mi><annotation-xml encoding="MathML-Content" id="A2.SS1.p2.3.m3.1b"><ci id="A2.SS1.p2.3.m3.1.1.cmml" xref="A2.SS1.p2.3.m3.1.1">ℓ</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.SS1.p2.3.m3.1c">\ell</annotation></semantics></math> and <math id="A2.SS1.p2.4.m4.1" class="ltx_Math" alttext="G" display="inline"><semantics id="A2.SS1.p2.4.m4.1a"><mi id="A2.SS1.p2.4.m4.1.1" xref="A2.SS1.p2.4.m4.1.1.cmml">G</mi><annotation-xml encoding="MathML-Content" id="A2.SS1.p2.4.m4.1b"><ci id="A2.SS1.p2.4.m4.1.1.cmml" xref="A2.SS1.p2.4.m4.1.1">𝐺</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.SS1.p2.4.m4.1c">G</annotation></semantics></math> are public parameters. The trusted party’s public key is available to all clients. The server and the trusted third party have no private inputs. The parties wish to collaborate and reveal the position-to-position aggregation result across at least <math id="A2.SS1.p2.5.m5.1" class="ltx_Math" alttext="t" display="inline"><semantics id="A2.SS1.p2.5.m5.1a"><mi id="A2.SS1.p2.5.m5.1.1" xref="A2.SS1.p2.5.m5.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="A2.SS1.p2.5.m5.1b"><ci id="A2.SS1.p2.5.m5.1.1.cmml" xref="A2.SS1.p2.5.m5.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.SS1.p2.5.m5.1c">t</annotation></semantics></math> clients’ private array but any individuals’ inputs should remain private. A malicious adversary may corrupt the server and number of clients.</p>
</div>
<div id="A2.SS1.p3" class="ltx_para">
<p id="A2.SS1.p3.1" class="ltx_p">The ideal functionality is summarized in <a href="#A2.F15" title="In B.1 Problem Setup and Threat Model ‣ Appendix B Protocol Design and Security Proof" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">15</span></a>.</p>
</div>
<figure id="A2.F15" class="ltx_figure">
<p id="A2.F15.5" class="ltx_p ltx_align_center">
<span id="A2.F15.5.5.5" class="ltx_inline-block ltx_minipage ltx_align_middle ltx_framed ltx_framed_rectangle" style="width:411.9pt;">
<span id="A2.F15.3.3.3.3" class="ltx_p"><span id="A2.F15.3.3.3.3.1" class="ltx_text ltx_font_bold">Public inputs:</span>
The group <math id="A2.F15.1.1.1.1.m1.1" class="ltx_Math" alttext="G" display="inline"><semantics id="A2.F15.1.1.1.1.m1.1a"><mi id="A2.F15.1.1.1.1.m1.1.1" xref="A2.F15.1.1.1.1.m1.1.1.cmml">G</mi><annotation-xml encoding="MathML-Content" id="A2.F15.1.1.1.1.m1.1b"><ci id="A2.F15.1.1.1.1.m1.1.1.cmml" xref="A2.F15.1.1.1.1.m1.1.1">𝐺</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.F15.1.1.1.1.m1.1c">G</annotation></semantics></math>, the vector length <math id="A2.F15.2.2.2.2.m2.1" class="ltx_Math" alttext="\ell" display="inline"><semantics id="A2.F15.2.2.2.2.m2.1a"><mi mathvariant="normal" id="A2.F15.2.2.2.2.m2.1.1" xref="A2.F15.2.2.2.2.m2.1.1.cmml">ℓ</mi><annotation-xml encoding="MathML-Content" id="A2.F15.2.2.2.2.m2.1b"><ci id="A2.F15.2.2.2.2.m2.1.1.cmml" xref="A2.F15.2.2.2.2.m2.1.1">ℓ</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.F15.2.2.2.2.m2.1c">\ell</annotation></semantics></math> and threshold <math id="A2.F15.3.3.3.3.m3.1" class="ltx_Math" alttext="t" display="inline"><semantics id="A2.F15.3.3.3.3.m3.1a"><mi id="A2.F15.3.3.3.3.m3.1.1" xref="A2.F15.3.3.3.3.m3.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="A2.F15.3.3.3.3.m3.1b"><ci id="A2.F15.3.3.3.3.m3.1.1.cmml" xref="A2.F15.3.3.3.3.m3.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.F15.3.3.3.3.m3.1c">t</annotation></semantics></math>.</span>
<span id="A2.F15.5.5.5.5" class="ltx_p"><span id="A2.F15.5.5.5.5.1" class="ltx_text ltx_font_bold">Private inputs:</span>
Client <math id="A2.F15.4.4.4.4.m1.1" class="ltx_Math" alttext="i" display="inline"><semantics id="A2.F15.4.4.4.4.m1.1a"><mi id="A2.F15.4.4.4.4.m1.1.1" xref="A2.F15.4.4.4.4.m1.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="A2.F15.4.4.4.4.m1.1b"><ci id="A2.F15.4.4.4.4.m1.1.1.cmml" xref="A2.F15.4.4.4.4.m1.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.F15.4.4.4.4.m1.1c">i</annotation></semantics></math> has input <math id="A2.F15.5.5.5.5.m2.1" class="ltx_Math" alttext="v_{i}\in G^{\ell}" display="inline"><semantics id="A2.F15.5.5.5.5.m2.1a"><mrow id="A2.F15.5.5.5.5.m2.1.1" xref="A2.F15.5.5.5.5.m2.1.1.cmml"><msub id="A2.F15.5.5.5.5.m2.1.1.2" xref="A2.F15.5.5.5.5.m2.1.1.2.cmml"><mi id="A2.F15.5.5.5.5.m2.1.1.2.2" xref="A2.F15.5.5.5.5.m2.1.1.2.2.cmml">v</mi><mi id="A2.F15.5.5.5.5.m2.1.1.2.3" xref="A2.F15.5.5.5.5.m2.1.1.2.3.cmml">i</mi></msub><mo id="A2.F15.5.5.5.5.m2.1.1.1" xref="A2.F15.5.5.5.5.m2.1.1.1.cmml">∈</mo><msup id="A2.F15.5.5.5.5.m2.1.1.3" xref="A2.F15.5.5.5.5.m2.1.1.3.cmml"><mi id="A2.F15.5.5.5.5.m2.1.1.3.2" xref="A2.F15.5.5.5.5.m2.1.1.3.2.cmml">G</mi><mi mathvariant="normal" id="A2.F15.5.5.5.5.m2.1.1.3.3" xref="A2.F15.5.5.5.5.m2.1.1.3.3.cmml">ℓ</mi></msup></mrow><annotation-xml encoding="MathML-Content" id="A2.F15.5.5.5.5.m2.1b"><apply id="A2.F15.5.5.5.5.m2.1.1.cmml" xref="A2.F15.5.5.5.5.m2.1.1"><in id="A2.F15.5.5.5.5.m2.1.1.1.cmml" xref="A2.F15.5.5.5.5.m2.1.1.1"></in><apply id="A2.F15.5.5.5.5.m2.1.1.2.cmml" xref="A2.F15.5.5.5.5.m2.1.1.2"><csymbol cd="ambiguous" id="A2.F15.5.5.5.5.m2.1.1.2.1.cmml" xref="A2.F15.5.5.5.5.m2.1.1.2">subscript</csymbol><ci id="A2.F15.5.5.5.5.m2.1.1.2.2.cmml" xref="A2.F15.5.5.5.5.m2.1.1.2.2">𝑣</ci><ci id="A2.F15.5.5.5.5.m2.1.1.2.3.cmml" xref="A2.F15.5.5.5.5.m2.1.1.2.3">𝑖</ci></apply><apply id="A2.F15.5.5.5.5.m2.1.1.3.cmml" xref="A2.F15.5.5.5.5.m2.1.1.3"><csymbol cd="ambiguous" id="A2.F15.5.5.5.5.m2.1.1.3.1.cmml" xref="A2.F15.5.5.5.5.m2.1.1.3">superscript</csymbol><ci id="A2.F15.5.5.5.5.m2.1.1.3.2.cmml" xref="A2.F15.5.5.5.5.m2.1.1.3.2">𝐺</ci><ci id="A2.F15.5.5.5.5.m2.1.1.3.3.cmml" xref="A2.F15.5.5.5.5.m2.1.1.3.3">ℓ</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.F15.5.5.5.5.m2.1c">v_{i}\in G^{\ell}</annotation></semantics></math>. The server has no inputs.</span>
<span id="A2.I1" class="ltx_enumerate">
<span id="A2.I1.i1" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">1.</span> 
<span id="A2.I1.i1.p1" class="ltx_para">
<span id="A2.I1.i1.p1.2" class="ltx_p">The clients send their secret <math id="A2.I1.i1.p1.1.m1.1" class="ltx_Math" alttext="v_{i}" display="inline"><semantics id="A2.I1.i1.p1.1.m1.1a"><msub id="A2.I1.i1.p1.1.m1.1.1" xref="A2.I1.i1.p1.1.m1.1.1.cmml"><mi id="A2.I1.i1.p1.1.m1.1.1.2" xref="A2.I1.i1.p1.1.m1.1.1.2.cmml">v</mi><mi id="A2.I1.i1.p1.1.m1.1.1.3" xref="A2.I1.i1.p1.1.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="A2.I1.i1.p1.1.m1.1b"><apply id="A2.I1.i1.p1.1.m1.1.1.cmml" xref="A2.I1.i1.p1.1.m1.1.1"><csymbol cd="ambiguous" id="A2.I1.i1.p1.1.m1.1.1.1.cmml" xref="A2.I1.i1.p1.1.m1.1.1">subscript</csymbol><ci id="A2.I1.i1.p1.1.m1.1.1.2.cmml" xref="A2.I1.i1.p1.1.m1.1.1.2">𝑣</ci><ci id="A2.I1.i1.p1.1.m1.1.1.3.cmml" xref="A2.I1.i1.p1.1.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I1.i1.p1.1.m1.1c">v_{i}</annotation></semantics></math> to the ideal functionality <math id="A2.I1.i1.p1.2.m2.1" class="ltx_Math" alttext="\mathcal{F}" display="inline"><semantics id="A2.I1.i1.p1.2.m2.1a"><mi class="ltx_font_mathcaligraphic" id="A2.I1.i1.p1.2.m2.1.1" xref="A2.I1.i1.p1.2.m2.1.1.cmml">ℱ</mi><annotation-xml encoding="MathML-Content" id="A2.I1.i1.p1.2.m2.1b"><ci id="A2.I1.i1.p1.2.m2.1.1.cmml" xref="A2.I1.i1.p1.2.m2.1.1">ℱ</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.I1.i1.p1.2.m2.1c">\mathcal{F}</annotation></semantics></math>.</span>
</span></span>
<span id="A2.I1.i2" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">2.</span> 
<span id="A2.I1.i2.p1" class="ltx_para">
<span id="A2.I1.i2.p1.2" class="ltx_p">The ideal functionality <math id="A2.I1.i2.p1.1.m1.1" class="ltx_Math" alttext="\mathcal{F}" display="inline"><semantics id="A2.I1.i2.p1.1.m1.1a"><mi class="ltx_font_mathcaligraphic" id="A2.I1.i2.p1.1.m1.1.1" xref="A2.I1.i2.p1.1.m1.1.1.cmml">ℱ</mi><annotation-xml encoding="MathML-Content" id="A2.I1.i2.p1.1.m1.1b"><ci id="A2.I1.i2.p1.1.m1.1.1.cmml" xref="A2.I1.i2.p1.1.m1.1.1">ℱ</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.I1.i2.p1.1.m1.1c">\mathcal{F}</annotation></semantics></math> sends the list of clients <math id="A2.I1.i2.p1.2.m2.1" class="ltx_Math" alttext="\mathcal{C}_{0}" display="inline"><semantics id="A2.I1.i2.p1.2.m2.1a"><msub id="A2.I1.i2.p1.2.m2.1.1" xref="A2.I1.i2.p1.2.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.I1.i2.p1.2.m2.1.1.2" xref="A2.I1.i2.p1.2.m2.1.1.2.cmml">𝒞</mi><mn id="A2.I1.i2.p1.2.m2.1.1.3" xref="A2.I1.i2.p1.2.m2.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="A2.I1.i2.p1.2.m2.1b"><apply id="A2.I1.i2.p1.2.m2.1.1.cmml" xref="A2.I1.i2.p1.2.m2.1.1"><csymbol cd="ambiguous" id="A2.I1.i2.p1.2.m2.1.1.1.cmml" xref="A2.I1.i2.p1.2.m2.1.1">subscript</csymbol><ci id="A2.I1.i2.p1.2.m2.1.1.2.cmml" xref="A2.I1.i2.p1.2.m2.1.1.2">𝒞</ci><cn type="integer" id="A2.I1.i2.p1.2.m2.1.1.3.cmml" xref="A2.I1.i2.p1.2.m2.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I1.i2.p1.2.m2.1c">\mathcal{C}_{0}</annotation></semantics></math> to the server.</span>
</span></span>
<span id="A2.I1.i3" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">3.</span> 
<span id="A2.I1.i3.p1" class="ltx_para">
<span id="A2.I1.i3.p1.1" class="ltx_p">The server chooses a subset of clients <math id="A2.I1.i3.p1.1.m1.1" class="ltx_Math" alttext="\mathcal{C}_{1}\subset\mathcal{C}_{0}" display="inline"><semantics id="A2.I1.i3.p1.1.m1.1a"><mrow id="A2.I1.i3.p1.1.m1.1.1" xref="A2.I1.i3.p1.1.m1.1.1.cmml"><msub id="A2.I1.i3.p1.1.m1.1.1.2" xref="A2.I1.i3.p1.1.m1.1.1.2.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.I1.i3.p1.1.m1.1.1.2.2" xref="A2.I1.i3.p1.1.m1.1.1.2.2.cmml">𝒞</mi><mn id="A2.I1.i3.p1.1.m1.1.1.2.3" xref="A2.I1.i3.p1.1.m1.1.1.2.3.cmml">1</mn></msub><mo id="A2.I1.i3.p1.1.m1.1.1.1" xref="A2.I1.i3.p1.1.m1.1.1.1.cmml">⊂</mo><msub id="A2.I1.i3.p1.1.m1.1.1.3" xref="A2.I1.i3.p1.1.m1.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.I1.i3.p1.1.m1.1.1.3.2" xref="A2.I1.i3.p1.1.m1.1.1.3.2.cmml">𝒞</mi><mn id="A2.I1.i3.p1.1.m1.1.1.3.3" xref="A2.I1.i3.p1.1.m1.1.1.3.3.cmml">0</mn></msub></mrow><annotation-xml encoding="MathML-Content" id="A2.I1.i3.p1.1.m1.1b"><apply id="A2.I1.i3.p1.1.m1.1.1.cmml" xref="A2.I1.i3.p1.1.m1.1.1"><subset id="A2.I1.i3.p1.1.m1.1.1.1.cmml" xref="A2.I1.i3.p1.1.m1.1.1.1"></subset><apply id="A2.I1.i3.p1.1.m1.1.1.2.cmml" xref="A2.I1.i3.p1.1.m1.1.1.2"><csymbol cd="ambiguous" id="A2.I1.i3.p1.1.m1.1.1.2.1.cmml" xref="A2.I1.i3.p1.1.m1.1.1.2">subscript</csymbol><ci id="A2.I1.i3.p1.1.m1.1.1.2.2.cmml" xref="A2.I1.i3.p1.1.m1.1.1.2.2">𝒞</ci><cn type="integer" id="A2.I1.i3.p1.1.m1.1.1.2.3.cmml" xref="A2.I1.i3.p1.1.m1.1.1.2.3">1</cn></apply><apply id="A2.I1.i3.p1.1.m1.1.1.3.cmml" xref="A2.I1.i3.p1.1.m1.1.1.3"><csymbol cd="ambiguous" id="A2.I1.i3.p1.1.m1.1.1.3.1.cmml" xref="A2.I1.i3.p1.1.m1.1.1.3">subscript</csymbol><ci id="A2.I1.i3.p1.1.m1.1.1.3.2.cmml" xref="A2.I1.i3.p1.1.m1.1.1.3.2">𝒞</ci><cn type="integer" id="A2.I1.i3.p1.1.m1.1.1.3.3.cmml" xref="A2.I1.i3.p1.1.m1.1.1.3.3">0</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I1.i3.p1.1.m1.1c">\mathcal{C}_{1}\subset\mathcal{C}_{0}</annotation></semantics></math> and sends it back to the ideal functionality.</span>
</span></span>
<span id="A2.I1.i4" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">4.</span> 
<span id="A2.I1.i4.p1" class="ltx_para ltx_noindent">
<span id="A2.I1.i4.p1.3" class="ltx_p">The ideal functionality <math id="A2.I1.i4.p1.1.m1.1" class="ltx_Math" alttext="\mathcal{F}" display="inline"><semantics id="A2.I1.i4.p1.1.m1.1a"><mi class="ltx_font_mathcaligraphic" id="A2.I1.i4.p1.1.m1.1.1" xref="A2.I1.i4.p1.1.m1.1.1.cmml">ℱ</mi><annotation-xml encoding="MathML-Content" id="A2.I1.i4.p1.1.m1.1b"><ci id="A2.I1.i4.p1.1.m1.1.1.cmml" xref="A2.I1.i4.p1.1.m1.1.1">ℱ</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.I1.i4.p1.1.m1.1c">\mathcal{F}</annotation></semantics></math> computes <math id="A2.I1.i4.p1.2.m2.1" class="ltx_Math" alttext="\sum_{i\in\mathcal{C}_{1}}v_{i}" display="inline"><semantics id="A2.I1.i4.p1.2.m2.1a"><mrow id="A2.I1.i4.p1.2.m2.1.1" xref="A2.I1.i4.p1.2.m2.1.1.cmml"><msub id="A2.I1.i4.p1.2.m2.1.1.1" xref="A2.I1.i4.p1.2.m2.1.1.1.cmml"><mo id="A2.I1.i4.p1.2.m2.1.1.1.2" xref="A2.I1.i4.p1.2.m2.1.1.1.2.cmml">∑</mo><mrow id="A2.I1.i4.p1.2.m2.1.1.1.3" xref="A2.I1.i4.p1.2.m2.1.1.1.3.cmml"><mi id="A2.I1.i4.p1.2.m2.1.1.1.3.2" xref="A2.I1.i4.p1.2.m2.1.1.1.3.2.cmml">i</mi><mo id="A2.I1.i4.p1.2.m2.1.1.1.3.1" xref="A2.I1.i4.p1.2.m2.1.1.1.3.1.cmml">∈</mo><msub id="A2.I1.i4.p1.2.m2.1.1.1.3.3" xref="A2.I1.i4.p1.2.m2.1.1.1.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.I1.i4.p1.2.m2.1.1.1.3.3.2" xref="A2.I1.i4.p1.2.m2.1.1.1.3.3.2.cmml">𝒞</mi><mn id="A2.I1.i4.p1.2.m2.1.1.1.3.3.3" xref="A2.I1.i4.p1.2.m2.1.1.1.3.3.3.cmml">1</mn></msub></mrow></msub><msub id="A2.I1.i4.p1.2.m2.1.1.2" xref="A2.I1.i4.p1.2.m2.1.1.2.cmml"><mi id="A2.I1.i4.p1.2.m2.1.1.2.2" xref="A2.I1.i4.p1.2.m2.1.1.2.2.cmml">v</mi><mi id="A2.I1.i4.p1.2.m2.1.1.2.3" xref="A2.I1.i4.p1.2.m2.1.1.2.3.cmml">i</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="A2.I1.i4.p1.2.m2.1b"><apply id="A2.I1.i4.p1.2.m2.1.1.cmml" xref="A2.I1.i4.p1.2.m2.1.1"><apply id="A2.I1.i4.p1.2.m2.1.1.1.cmml" xref="A2.I1.i4.p1.2.m2.1.1.1"><csymbol cd="ambiguous" id="A2.I1.i4.p1.2.m2.1.1.1.1.cmml" xref="A2.I1.i4.p1.2.m2.1.1.1">subscript</csymbol><sum id="A2.I1.i4.p1.2.m2.1.1.1.2.cmml" xref="A2.I1.i4.p1.2.m2.1.1.1.2"></sum><apply id="A2.I1.i4.p1.2.m2.1.1.1.3.cmml" xref="A2.I1.i4.p1.2.m2.1.1.1.3"><in id="A2.I1.i4.p1.2.m2.1.1.1.3.1.cmml" xref="A2.I1.i4.p1.2.m2.1.1.1.3.1"></in><ci id="A2.I1.i4.p1.2.m2.1.1.1.3.2.cmml" xref="A2.I1.i4.p1.2.m2.1.1.1.3.2">𝑖</ci><apply id="A2.I1.i4.p1.2.m2.1.1.1.3.3.cmml" xref="A2.I1.i4.p1.2.m2.1.1.1.3.3"><csymbol cd="ambiguous" id="A2.I1.i4.p1.2.m2.1.1.1.3.3.1.cmml" xref="A2.I1.i4.p1.2.m2.1.1.1.3.3">subscript</csymbol><ci id="A2.I1.i4.p1.2.m2.1.1.1.3.3.2.cmml" xref="A2.I1.i4.p1.2.m2.1.1.1.3.3.2">𝒞</ci><cn type="integer" id="A2.I1.i4.p1.2.m2.1.1.1.3.3.3.cmml" xref="A2.I1.i4.p1.2.m2.1.1.1.3.3.3">1</cn></apply></apply></apply><apply id="A2.I1.i4.p1.2.m2.1.1.2.cmml" xref="A2.I1.i4.p1.2.m2.1.1.2"><csymbol cd="ambiguous" id="A2.I1.i4.p1.2.m2.1.1.2.1.cmml" xref="A2.I1.i4.p1.2.m2.1.1.2">subscript</csymbol><ci id="A2.I1.i4.p1.2.m2.1.1.2.2.cmml" xref="A2.I1.i4.p1.2.m2.1.1.2.2">𝑣</ci><ci id="A2.I1.i4.p1.2.m2.1.1.2.3.cmml" xref="A2.I1.i4.p1.2.m2.1.1.2.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I1.i4.p1.2.m2.1c">\sum_{i\in\mathcal{C}_{1}}v_{i}</annotation></semantics></math> and sends the sum to the server if <math id="A2.I1.i4.p1.3.m3.1" class="ltx_Math" alttext="|\mathcal{C}_{1}|\geq t" display="inline"><semantics id="A2.I1.i4.p1.3.m3.1a"><mrow id="A2.I1.i4.p1.3.m3.1.1" xref="A2.I1.i4.p1.3.m3.1.1.cmml"><mrow id="A2.I1.i4.p1.3.m3.1.1.1.1" xref="A2.I1.i4.p1.3.m3.1.1.1.2.cmml"><mo stretchy="false" id="A2.I1.i4.p1.3.m3.1.1.1.1.2" xref="A2.I1.i4.p1.3.m3.1.1.1.2.1.cmml">|</mo><msub id="A2.I1.i4.p1.3.m3.1.1.1.1.1" xref="A2.I1.i4.p1.3.m3.1.1.1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.I1.i4.p1.3.m3.1.1.1.1.1.2" xref="A2.I1.i4.p1.3.m3.1.1.1.1.1.2.cmml">𝒞</mi><mn id="A2.I1.i4.p1.3.m3.1.1.1.1.1.3" xref="A2.I1.i4.p1.3.m3.1.1.1.1.1.3.cmml">1</mn></msub><mo stretchy="false" id="A2.I1.i4.p1.3.m3.1.1.1.1.3" xref="A2.I1.i4.p1.3.m3.1.1.1.2.1.cmml">|</mo></mrow><mo id="A2.I1.i4.p1.3.m3.1.1.2" xref="A2.I1.i4.p1.3.m3.1.1.2.cmml">≥</mo><mi id="A2.I1.i4.p1.3.m3.1.1.3" xref="A2.I1.i4.p1.3.m3.1.1.3.cmml">t</mi></mrow><annotation-xml encoding="MathML-Content" id="A2.I1.i4.p1.3.m3.1b"><apply id="A2.I1.i4.p1.3.m3.1.1.cmml" xref="A2.I1.i4.p1.3.m3.1.1"><geq id="A2.I1.i4.p1.3.m3.1.1.2.cmml" xref="A2.I1.i4.p1.3.m3.1.1.2"></geq><apply id="A2.I1.i4.p1.3.m3.1.1.1.2.cmml" xref="A2.I1.i4.p1.3.m3.1.1.1.1"><abs id="A2.I1.i4.p1.3.m3.1.1.1.2.1.cmml" xref="A2.I1.i4.p1.3.m3.1.1.1.1.2"></abs><apply id="A2.I1.i4.p1.3.m3.1.1.1.1.1.cmml" xref="A2.I1.i4.p1.3.m3.1.1.1.1.1"><csymbol cd="ambiguous" id="A2.I1.i4.p1.3.m3.1.1.1.1.1.1.cmml" xref="A2.I1.i4.p1.3.m3.1.1.1.1.1">subscript</csymbol><ci id="A2.I1.i4.p1.3.m3.1.1.1.1.1.2.cmml" xref="A2.I1.i4.p1.3.m3.1.1.1.1.1.2">𝒞</ci><cn type="integer" id="A2.I1.i4.p1.3.m3.1.1.1.1.1.3.cmml" xref="A2.I1.i4.p1.3.m3.1.1.1.1.1.3">1</cn></apply></apply><ci id="A2.I1.i4.p1.3.m3.1.1.3.cmml" xref="A2.I1.i4.p1.3.m3.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I1.i4.p1.3.m3.1c">|\mathcal{C}_{1}|\geq t</annotation></semantics></math> clients; otherwise, does nothing.</span>
</span></span>
</span>
</span>
</p>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 15: </span>Ideal functionality <math id="A2.F15.7.m1.1" class="ltx_Math" alttext="\mathcal{F}" display="inline"><semantics id="A2.F15.7.m1.1b"><mi class="ltx_font_mathcaligraphic" id="A2.F15.7.m1.1.1" xref="A2.F15.7.m1.1.1.cmml">ℱ</mi><annotation-xml encoding="MathML-Content" id="A2.F15.7.m1.1c"><ci id="A2.F15.7.m1.1.1.cmml" xref="A2.F15.7.m1.1.1">ℱ</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.F15.7.m1.1d">\mathcal{F}</annotation></semantics></math> for secure aggregation</figcaption>
</figure>
</section>
<section id="A2.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">B.2 </span>Overview of Our Solution</h3>

<div id="A2.SS2.p1" class="ltx_para ltx_noindent">
<p id="A2.SS2.p1.1" class="ltx_p">To avoid sending big chunks of data across the boundary of the secure enclave, we will aggregate random masks, instead of the actual data, inside the secure enclave. The high-level idea is to mask clients’ private inputs with some additive masks, while the server will be responsible for aggregating the masked inputs and trusted party will be responsible for aggregating the masks. Note that a 128-bit seed is sufficient to represent a random mask. The amount of data transferred into the secure enclave for each client will be a constant, despite of amount of data to aggregate. Our protocol can be divided into three steps:</p>
</div>
<div id="A2.SS2.p2" class="ltx_para ltx_noindent">
<ol id="A2.I2" class="ltx_enumerate">
<li id="A2.I2.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span> 
<div id="A2.I2.i1.p1" class="ltx_para">
<p id="A2.I2.i1.p1.1" class="ltx_p">New client checks in and validates the identity of the trusted party.</p>
</div>
</li>
<li id="A2.I2.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span> 
<div id="A2.I2.i2.p1" class="ltx_para">
<p id="A2.I2.i2.p1.1" class="ltx_p">Client sends masked input to the untrusted server and demasking information to the trusted party.</p>
</div>
</li>
<li id="A2.I2.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">3.</span> 
<div id="A2.I2.i3.p1" class="ltx_para ltx_noindent">
<p id="A2.I2.i3.p1.1" class="ltx_p">The trusted party instructs the untrusted server how to demask the sum of all masked inputs.</p>
</div>
</li>
</ol>
</div>
</section>
<section id="A2.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">B.3 </span>Protocol Detail</h3>

<div id="A2.SS3.p1" class="ltx_para ltx_noindent">
<p id="A2.SS3.p1.1" class="ltx_p">Our protocol is detailed in <a href="#A2.F16" title="In B.3 Protocol Detail ‣ Appendix B Protocol Design and Security Proof" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">16</span></a>. We use Diffie–Hellman key exchange protocol to establish private communication channels between the trusted party and the clients.</p>
</div>
<figure id="A2.F16" class="ltx_figure">
<p id="A2.F16.2" class="ltx_p ltx_align_center">
<span id="A2.F16.2.2.2" class="ltx_inline-block ltx_minipage ltx_align_middle ltx_framed ltx_framed_rectangle" style="width:411.9pt;">
<span id="A2.F16.2.2.2.2" class="ltx_p">Client <math id="A2.F16.1.1.1.1.m1.1" class="ltx_Math" alttext="i" display="inline"><semantics id="A2.F16.1.1.1.1.m1.1a"><mi id="A2.F16.1.1.1.1.m1.1.1" xref="A2.F16.1.1.1.1.m1.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="A2.F16.1.1.1.1.m1.1b"><ci id="A2.F16.1.1.1.1.m1.1.1.cmml" xref="A2.F16.1.1.1.1.m1.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.F16.1.1.1.1.m1.1c">i</annotation></semantics></math> has input <math id="A2.F16.2.2.2.2.m2.1" class="ltx_Math" alttext="v_{i}\in G^{\ell}" display="inline"><semantics id="A2.F16.2.2.2.2.m2.1a"><mrow id="A2.F16.2.2.2.2.m2.1.1" xref="A2.F16.2.2.2.2.m2.1.1.cmml"><msub id="A2.F16.2.2.2.2.m2.1.1.2" xref="A2.F16.2.2.2.2.m2.1.1.2.cmml"><mi id="A2.F16.2.2.2.2.m2.1.1.2.2" xref="A2.F16.2.2.2.2.m2.1.1.2.2.cmml">v</mi><mi id="A2.F16.2.2.2.2.m2.1.1.2.3" xref="A2.F16.2.2.2.2.m2.1.1.2.3.cmml">i</mi></msub><mo id="A2.F16.2.2.2.2.m2.1.1.1" xref="A2.F16.2.2.2.2.m2.1.1.1.cmml">∈</mo><msup id="A2.F16.2.2.2.2.m2.1.1.3" xref="A2.F16.2.2.2.2.m2.1.1.3.cmml"><mi id="A2.F16.2.2.2.2.m2.1.1.3.2" xref="A2.F16.2.2.2.2.m2.1.1.3.2.cmml">G</mi><mi mathvariant="normal" id="A2.F16.2.2.2.2.m2.1.1.3.3" xref="A2.F16.2.2.2.2.m2.1.1.3.3.cmml">ℓ</mi></msup></mrow><annotation-xml encoding="MathML-Content" id="A2.F16.2.2.2.2.m2.1b"><apply id="A2.F16.2.2.2.2.m2.1.1.cmml" xref="A2.F16.2.2.2.2.m2.1.1"><in id="A2.F16.2.2.2.2.m2.1.1.1.cmml" xref="A2.F16.2.2.2.2.m2.1.1.1"></in><apply id="A2.F16.2.2.2.2.m2.1.1.2.cmml" xref="A2.F16.2.2.2.2.m2.1.1.2"><csymbol cd="ambiguous" id="A2.F16.2.2.2.2.m2.1.1.2.1.cmml" xref="A2.F16.2.2.2.2.m2.1.1.2">subscript</csymbol><ci id="A2.F16.2.2.2.2.m2.1.1.2.2.cmml" xref="A2.F16.2.2.2.2.m2.1.1.2.2">𝑣</ci><ci id="A2.F16.2.2.2.2.m2.1.1.2.3.cmml" xref="A2.F16.2.2.2.2.m2.1.1.2.3">𝑖</ci></apply><apply id="A2.F16.2.2.2.2.m2.1.1.3.cmml" xref="A2.F16.2.2.2.2.m2.1.1.3"><csymbol cd="ambiguous" id="A2.F16.2.2.2.2.m2.1.1.3.1.cmml" xref="A2.F16.2.2.2.2.m2.1.1.3">superscript</csymbol><ci id="A2.F16.2.2.2.2.m2.1.1.3.2.cmml" xref="A2.F16.2.2.2.2.m2.1.1.3.2">𝐺</ci><ci id="A2.F16.2.2.2.2.m2.1.1.3.3.cmml" xref="A2.F16.2.2.2.2.m2.1.1.3.3">ℓ</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.F16.2.2.2.2.m2.1c">v_{i}\in G^{\ell}</annotation></semantics></math>. The server and the trusted party have no inputs.</span>
<span id="A2.I3" class="ltx_enumerate">
<span id="A2.I3.i1" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">1.</span> 
<span id="A2.I3.i1.p1" class="ltx_para">
<span id="A2.I3.i1.p1.2" class="ltx_p">The trusted party runs <math id="A2.I3.i1.p1.1.m1.1" class="ltx_Math" alttext="N(N&gt;n)" display="inline"><semantics id="A2.I3.i1.p1.1.m1.1a"><mrow id="A2.I3.i1.p1.1.m1.1.1" xref="A2.I3.i1.p1.1.m1.1.1.cmml"><mi id="A2.I3.i1.p1.1.m1.1.1.3" xref="A2.I3.i1.p1.1.m1.1.1.3.cmml">N</mi><mo lspace="0em" rspace="0em" id="A2.I3.i1.p1.1.m1.1.1.2" xref="A2.I3.i1.p1.1.m1.1.1.2.cmml">​</mo><mrow id="A2.I3.i1.p1.1.m1.1.1.1.1" xref="A2.I3.i1.p1.1.m1.1.1.1.1.1.cmml"><mo stretchy="false" id="A2.I3.i1.p1.1.m1.1.1.1.1.2" xref="A2.I3.i1.p1.1.m1.1.1.1.1.1.cmml">(</mo><mrow id="A2.I3.i1.p1.1.m1.1.1.1.1.1" xref="A2.I3.i1.p1.1.m1.1.1.1.1.1.cmml"><mi id="A2.I3.i1.p1.1.m1.1.1.1.1.1.2" xref="A2.I3.i1.p1.1.m1.1.1.1.1.1.2.cmml">N</mi><mo id="A2.I3.i1.p1.1.m1.1.1.1.1.1.1" xref="A2.I3.i1.p1.1.m1.1.1.1.1.1.1.cmml">&gt;</mo><mi id="A2.I3.i1.p1.1.m1.1.1.1.1.1.3" xref="A2.I3.i1.p1.1.m1.1.1.1.1.1.3.cmml">n</mi></mrow><mo stretchy="false" id="A2.I3.i1.p1.1.m1.1.1.1.1.3" xref="A2.I3.i1.p1.1.m1.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="A2.I3.i1.p1.1.m1.1b"><apply id="A2.I3.i1.p1.1.m1.1.1.cmml" xref="A2.I3.i1.p1.1.m1.1.1"><times id="A2.I3.i1.p1.1.m1.1.1.2.cmml" xref="A2.I3.i1.p1.1.m1.1.1.2"></times><ci id="A2.I3.i1.p1.1.m1.1.1.3.cmml" xref="A2.I3.i1.p1.1.m1.1.1.3">𝑁</ci><apply id="A2.I3.i1.p1.1.m1.1.1.1.1.1.cmml" xref="A2.I3.i1.p1.1.m1.1.1.1.1"><gt id="A2.I3.i1.p1.1.m1.1.1.1.1.1.1.cmml" xref="A2.I3.i1.p1.1.m1.1.1.1.1.1.1"></gt><ci id="A2.I3.i1.p1.1.m1.1.1.1.1.1.2.cmml" xref="A2.I3.i1.p1.1.m1.1.1.1.1.1.2">𝑁</ci><ci id="A2.I3.i1.p1.1.m1.1.1.1.1.1.3.cmml" xref="A2.I3.i1.p1.1.m1.1.1.1.1.1.3">𝑛</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I3.i1.p1.1.m1.1c">N(N&gt;n)</annotation></semantics></math> DH key exchange protocol instances and obtains <math id="A2.I3.i1.p1.2.m2.1" class="ltx_Math" alttext="N" display="inline"><semantics id="A2.I3.i1.p1.2.m2.1a"><mi id="A2.I3.i1.p1.2.m2.1.1" xref="A2.I3.i1.p1.2.m2.1.1.cmml">N</mi><annotation-xml encoding="MathML-Content" id="A2.I3.i1.p1.2.m2.1b"><ci id="A2.I3.i1.p1.2.m2.1.1.cmml" xref="A2.I3.i1.p1.2.m2.1.1">𝑁</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.I3.i1.p1.2.m2.1c">N</annotation></semantics></math> DH key exchange initial messages. The trusted party then sends these initial messages with their indices and signatures to the server.</span>
</span></span>
<span id="A2.I3.i2" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">2.</span> 
<span id="A2.I3.i2.p1" class="ltx_para">
<span id="A2.I3.i2.p1.2" class="ltx_p">When the <math id="A2.I3.i2.p1.1.m1.1" class="ltx_Math" alttext="i" display="inline"><semantics id="A2.I3.i2.p1.1.m1.1a"><mi id="A2.I3.i2.p1.1.m1.1.1" xref="A2.I3.i2.p1.1.m1.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="A2.I3.i2.p1.1.m1.1b"><ci id="A2.I3.i2.p1.1.m1.1.1.cmml" xref="A2.I3.i2.p1.1.m1.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.I3.i2.p1.1.m1.1c">i</annotation></semantics></math>’th client checks in with the server, the server sends the <math id="A2.I3.i2.p1.2.m2.1" class="ltx_Math" alttext="i" display="inline"><semantics id="A2.I3.i2.p1.2.m2.1a"><mi id="A2.I3.i2.p1.2.m2.1.1" xref="A2.I3.i2.p1.2.m2.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="A2.I3.i2.p1.2.m2.1b"><ci id="A2.I3.i2.p1.2.m2.1.1.cmml" xref="A2.I3.i2.p1.2.m2.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.I3.i2.p1.2.m2.1c">i</annotation></semantics></math>’th initial message and the corresponding signature received from the trusted party to this client.</span>
</span></span>
<span id="A2.I3.i3" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">3.</span> 
<span id="A2.I3.i3.p1" class="ltx_para">
<span id="A2.I3.i3.p1.2" class="ltx_p">Upon receiving a DH key exchange initial message and the corresponding signature, client <math id="A2.I3.i3.p1.1.m1.1" class="ltx_Math" alttext="i" display="inline"><semantics id="A2.I3.i3.p1.1.m1.1a"><mi id="A2.I3.i3.p1.1.m1.1.1" xref="A2.I3.i3.p1.1.m1.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="A2.I3.i3.p1.1.m1.1b"><ci id="A2.I3.i3.p1.1.m1.1.1.cmml" xref="A2.I3.i3.p1.1.m1.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.I3.i3.p1.1.m1.1c">i</annotation></semantics></math> validates the signature and aborts if not valid. Otherwise, the client generates a DH key exchange completing message and obtains a secret <math id="A2.I3.i3.p1.2.m2.1" class="ltx_Math" alttext="k_{i}" display="inline"><semantics id="A2.I3.i3.p1.2.m2.1a"><msub id="A2.I3.i3.p1.2.m2.1.1" xref="A2.I3.i3.p1.2.m2.1.1.cmml"><mi id="A2.I3.i3.p1.2.m2.1.1.2" xref="A2.I3.i3.p1.2.m2.1.1.2.cmml">k</mi><mi id="A2.I3.i3.p1.2.m2.1.1.3" xref="A2.I3.i3.p1.2.m2.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="A2.I3.i3.p1.2.m2.1b"><apply id="A2.I3.i3.p1.2.m2.1.1.cmml" xref="A2.I3.i3.p1.2.m2.1.1"><csymbol cd="ambiguous" id="A2.I3.i3.p1.2.m2.1.1.1.cmml" xref="A2.I3.i3.p1.2.m2.1.1">subscript</csymbol><ci id="A2.I3.i3.p1.2.m2.1.1.2.cmml" xref="A2.I3.i3.p1.2.m2.1.1.2">𝑘</ci><ci id="A2.I3.i3.p1.2.m2.1.1.3.cmml" xref="A2.I3.i3.p1.2.m2.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I3.i3.p1.2.m2.1c">k_{i}</annotation></semantics></math> that will be shared with the trusted party.</span>
</span></span>
<span id="A2.I3.i4" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">4.</span> 
<span id="A2.I3.i4.p1" class="ltx_para">
<span id="A2.I3.i4.p1.6" class="ltx_p">Client <math id="A2.I3.i4.p1.1.m1.1" class="ltx_Math" alttext="i" display="inline"><semantics id="A2.I3.i4.p1.1.m1.1a"><mi id="A2.I3.i4.p1.1.m1.1.1" xref="A2.I3.i4.p1.1.m1.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="A2.I3.i4.p1.1.m1.1b"><ci id="A2.I3.i4.p1.1.m1.1.1.cmml" xref="A2.I3.i4.p1.1.m1.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.I3.i4.p1.1.m1.1c">i</annotation></semantics></math> picks a random seed <math id="A2.I3.i4.p1.2.m2.1" class="ltx_Math" alttext="s_{i}" display="inline"><semantics id="A2.I3.i4.p1.2.m2.1a"><msub id="A2.I3.i4.p1.2.m2.1.1" xref="A2.I3.i4.p1.2.m2.1.1.cmml"><mi id="A2.I3.i4.p1.2.m2.1.1.2" xref="A2.I3.i4.p1.2.m2.1.1.2.cmml">s</mi><mi id="A2.I3.i4.p1.2.m2.1.1.3" xref="A2.I3.i4.p1.2.m2.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="A2.I3.i4.p1.2.m2.1b"><apply id="A2.I3.i4.p1.2.m2.1.1.cmml" xref="A2.I3.i4.p1.2.m2.1.1"><csymbol cd="ambiguous" id="A2.I3.i4.p1.2.m2.1.1.1.cmml" xref="A2.I3.i4.p1.2.m2.1.1">subscript</csymbol><ci id="A2.I3.i4.p1.2.m2.1.1.2.cmml" xref="A2.I3.i4.p1.2.m2.1.1.2">𝑠</ci><ci id="A2.I3.i4.p1.2.m2.1.1.3.cmml" xref="A2.I3.i4.p1.2.m2.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I3.i4.p1.2.m2.1c">s_{i}</annotation></semantics></math> and uses it as the random seed to randomly generate <math id="A2.I3.i4.p1.3.m3.1" class="ltx_Math" alttext="m_{i}\in G^{\ell}" display="inline"><semantics id="A2.I3.i4.p1.3.m3.1a"><mrow id="A2.I3.i4.p1.3.m3.1.1" xref="A2.I3.i4.p1.3.m3.1.1.cmml"><msub id="A2.I3.i4.p1.3.m3.1.1.2" xref="A2.I3.i4.p1.3.m3.1.1.2.cmml"><mi id="A2.I3.i4.p1.3.m3.1.1.2.2" xref="A2.I3.i4.p1.3.m3.1.1.2.2.cmml">m</mi><mi id="A2.I3.i4.p1.3.m3.1.1.2.3" xref="A2.I3.i4.p1.3.m3.1.1.2.3.cmml">i</mi></msub><mo id="A2.I3.i4.p1.3.m3.1.1.1" xref="A2.I3.i4.p1.3.m3.1.1.1.cmml">∈</mo><msup id="A2.I3.i4.p1.3.m3.1.1.3" xref="A2.I3.i4.p1.3.m3.1.1.3.cmml"><mi id="A2.I3.i4.p1.3.m3.1.1.3.2" xref="A2.I3.i4.p1.3.m3.1.1.3.2.cmml">G</mi><mi mathvariant="normal" id="A2.I3.i4.p1.3.m3.1.1.3.3" xref="A2.I3.i4.p1.3.m3.1.1.3.3.cmml">ℓ</mi></msup></mrow><annotation-xml encoding="MathML-Content" id="A2.I3.i4.p1.3.m3.1b"><apply id="A2.I3.i4.p1.3.m3.1.1.cmml" xref="A2.I3.i4.p1.3.m3.1.1"><in id="A2.I3.i4.p1.3.m3.1.1.1.cmml" xref="A2.I3.i4.p1.3.m3.1.1.1"></in><apply id="A2.I3.i4.p1.3.m3.1.1.2.cmml" xref="A2.I3.i4.p1.3.m3.1.1.2"><csymbol cd="ambiguous" id="A2.I3.i4.p1.3.m3.1.1.2.1.cmml" xref="A2.I3.i4.p1.3.m3.1.1.2">subscript</csymbol><ci id="A2.I3.i4.p1.3.m3.1.1.2.2.cmml" xref="A2.I3.i4.p1.3.m3.1.1.2.2">𝑚</ci><ci id="A2.I3.i4.p1.3.m3.1.1.2.3.cmml" xref="A2.I3.i4.p1.3.m3.1.1.2.3">𝑖</ci></apply><apply id="A2.I3.i4.p1.3.m3.1.1.3.cmml" xref="A2.I3.i4.p1.3.m3.1.1.3"><csymbol cd="ambiguous" id="A2.I3.i4.p1.3.m3.1.1.3.1.cmml" xref="A2.I3.i4.p1.3.m3.1.1.3">superscript</csymbol><ci id="A2.I3.i4.p1.3.m3.1.1.3.2.cmml" xref="A2.I3.i4.p1.3.m3.1.1.3.2">𝐺</ci><ci id="A2.I3.i4.p1.3.m3.1.1.3.3.cmml" xref="A2.I3.i4.p1.3.m3.1.1.3.3">ℓ</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I3.i4.p1.3.m3.1c">m_{i}\in G^{\ell}</annotation></semantics></math>, and sends <math id="A2.I3.i4.p1.4.m4.1" class="ltx_Math" alttext="v_{i}+m_{i}" display="inline"><semantics id="A2.I3.i4.p1.4.m4.1a"><mrow id="A2.I3.i4.p1.4.m4.1.1" xref="A2.I3.i4.p1.4.m4.1.1.cmml"><msub id="A2.I3.i4.p1.4.m4.1.1.2" xref="A2.I3.i4.p1.4.m4.1.1.2.cmml"><mi id="A2.I3.i4.p1.4.m4.1.1.2.2" xref="A2.I3.i4.p1.4.m4.1.1.2.2.cmml">v</mi><mi id="A2.I3.i4.p1.4.m4.1.1.2.3" xref="A2.I3.i4.p1.4.m4.1.1.2.3.cmml">i</mi></msub><mo id="A2.I3.i4.p1.4.m4.1.1.1" xref="A2.I3.i4.p1.4.m4.1.1.1.cmml">+</mo><msub id="A2.I3.i4.p1.4.m4.1.1.3" xref="A2.I3.i4.p1.4.m4.1.1.3.cmml"><mi id="A2.I3.i4.p1.4.m4.1.1.3.2" xref="A2.I3.i4.p1.4.m4.1.1.3.2.cmml">m</mi><mi id="A2.I3.i4.p1.4.m4.1.1.3.3" xref="A2.I3.i4.p1.4.m4.1.1.3.3.cmml">i</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="A2.I3.i4.p1.4.m4.1b"><apply id="A2.I3.i4.p1.4.m4.1.1.cmml" xref="A2.I3.i4.p1.4.m4.1.1"><plus id="A2.I3.i4.p1.4.m4.1.1.1.cmml" xref="A2.I3.i4.p1.4.m4.1.1.1"></plus><apply id="A2.I3.i4.p1.4.m4.1.1.2.cmml" xref="A2.I3.i4.p1.4.m4.1.1.2"><csymbol cd="ambiguous" id="A2.I3.i4.p1.4.m4.1.1.2.1.cmml" xref="A2.I3.i4.p1.4.m4.1.1.2">subscript</csymbol><ci id="A2.I3.i4.p1.4.m4.1.1.2.2.cmml" xref="A2.I3.i4.p1.4.m4.1.1.2.2">𝑣</ci><ci id="A2.I3.i4.p1.4.m4.1.1.2.3.cmml" xref="A2.I3.i4.p1.4.m4.1.1.2.3">𝑖</ci></apply><apply id="A2.I3.i4.p1.4.m4.1.1.3.cmml" xref="A2.I3.i4.p1.4.m4.1.1.3"><csymbol cd="ambiguous" id="A2.I3.i4.p1.4.m4.1.1.3.1.cmml" xref="A2.I3.i4.p1.4.m4.1.1.3">subscript</csymbol><ci id="A2.I3.i4.p1.4.m4.1.1.3.2.cmml" xref="A2.I3.i4.p1.4.m4.1.1.3.2">𝑚</ci><ci id="A2.I3.i4.p1.4.m4.1.1.3.3.cmml" xref="A2.I3.i4.p1.4.m4.1.1.3.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I3.i4.p1.4.m4.1c">v_{i}+m_{i}</annotation></semantics></math>, <math id="A2.I3.i4.p1.5.m5.1" class="ltx_Math" alttext="d_{i}\coloneqq\mathsf{Enc}_{k_{i}}(s_{i})" display="inline"><semantics id="A2.I3.i4.p1.5.m5.1a"><mrow id="A2.I3.i4.p1.5.m5.1.1" xref="A2.I3.i4.p1.5.m5.1.1.cmml"><msub id="A2.I3.i4.p1.5.m5.1.1.3" xref="A2.I3.i4.p1.5.m5.1.1.3.cmml"><mi id="A2.I3.i4.p1.5.m5.1.1.3.2" xref="A2.I3.i4.p1.5.m5.1.1.3.2.cmml">d</mi><mi id="A2.I3.i4.p1.5.m5.1.1.3.3" xref="A2.I3.i4.p1.5.m5.1.1.3.3.cmml">i</mi></msub><mo id="A2.I3.i4.p1.5.m5.1.1.2" xref="A2.I3.i4.p1.5.m5.1.1.2.cmml">≔</mo><mrow id="A2.I3.i4.p1.5.m5.1.1.1" xref="A2.I3.i4.p1.5.m5.1.1.1.cmml"><msub id="A2.I3.i4.p1.5.m5.1.1.1.3" xref="A2.I3.i4.p1.5.m5.1.1.1.3.cmml"><mi id="A2.I3.i4.p1.5.m5.1.1.1.3.2" xref="A2.I3.i4.p1.5.m5.1.1.1.3.2.cmml">𝖤𝗇𝖼</mi><msub id="A2.I3.i4.p1.5.m5.1.1.1.3.3" xref="A2.I3.i4.p1.5.m5.1.1.1.3.3.cmml"><mi id="A2.I3.i4.p1.5.m5.1.1.1.3.3.2" xref="A2.I3.i4.p1.5.m5.1.1.1.3.3.2.cmml">k</mi><mi id="A2.I3.i4.p1.5.m5.1.1.1.3.3.3" xref="A2.I3.i4.p1.5.m5.1.1.1.3.3.3.cmml">i</mi></msub></msub><mo lspace="0em" rspace="0em" id="A2.I3.i4.p1.5.m5.1.1.1.2" xref="A2.I3.i4.p1.5.m5.1.1.1.2.cmml">​</mo><mrow id="A2.I3.i4.p1.5.m5.1.1.1.1.1" xref="A2.I3.i4.p1.5.m5.1.1.1.1.1.1.cmml"><mo stretchy="false" id="A2.I3.i4.p1.5.m5.1.1.1.1.1.2" xref="A2.I3.i4.p1.5.m5.1.1.1.1.1.1.cmml">(</mo><msub id="A2.I3.i4.p1.5.m5.1.1.1.1.1.1" xref="A2.I3.i4.p1.5.m5.1.1.1.1.1.1.cmml"><mi id="A2.I3.i4.p1.5.m5.1.1.1.1.1.1.2" xref="A2.I3.i4.p1.5.m5.1.1.1.1.1.1.2.cmml">s</mi><mi id="A2.I3.i4.p1.5.m5.1.1.1.1.1.1.3" xref="A2.I3.i4.p1.5.m5.1.1.1.1.1.1.3.cmml">i</mi></msub><mo stretchy="false" id="A2.I3.i4.p1.5.m5.1.1.1.1.1.3" xref="A2.I3.i4.p1.5.m5.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="A2.I3.i4.p1.5.m5.1b"><apply id="A2.I3.i4.p1.5.m5.1.1.cmml" xref="A2.I3.i4.p1.5.m5.1.1"><ci id="A2.I3.i4.p1.5.m5.1.1.2.cmml" xref="A2.I3.i4.p1.5.m5.1.1.2">≔</ci><apply id="A2.I3.i4.p1.5.m5.1.1.3.cmml" xref="A2.I3.i4.p1.5.m5.1.1.3"><csymbol cd="ambiguous" id="A2.I3.i4.p1.5.m5.1.1.3.1.cmml" xref="A2.I3.i4.p1.5.m5.1.1.3">subscript</csymbol><ci id="A2.I3.i4.p1.5.m5.1.1.3.2.cmml" xref="A2.I3.i4.p1.5.m5.1.1.3.2">𝑑</ci><ci id="A2.I3.i4.p1.5.m5.1.1.3.3.cmml" xref="A2.I3.i4.p1.5.m5.1.1.3.3">𝑖</ci></apply><apply id="A2.I3.i4.p1.5.m5.1.1.1.cmml" xref="A2.I3.i4.p1.5.m5.1.1.1"><times id="A2.I3.i4.p1.5.m5.1.1.1.2.cmml" xref="A2.I3.i4.p1.5.m5.1.1.1.2"></times><apply id="A2.I3.i4.p1.5.m5.1.1.1.3.cmml" xref="A2.I3.i4.p1.5.m5.1.1.1.3"><csymbol cd="ambiguous" id="A2.I3.i4.p1.5.m5.1.1.1.3.1.cmml" xref="A2.I3.i4.p1.5.m5.1.1.1.3">subscript</csymbol><ci id="A2.I3.i4.p1.5.m5.1.1.1.3.2.cmml" xref="A2.I3.i4.p1.5.m5.1.1.1.3.2">𝖤𝗇𝖼</ci><apply id="A2.I3.i4.p1.5.m5.1.1.1.3.3.cmml" xref="A2.I3.i4.p1.5.m5.1.1.1.3.3"><csymbol cd="ambiguous" id="A2.I3.i4.p1.5.m5.1.1.1.3.3.1.cmml" xref="A2.I3.i4.p1.5.m5.1.1.1.3.3">subscript</csymbol><ci id="A2.I3.i4.p1.5.m5.1.1.1.3.3.2.cmml" xref="A2.I3.i4.p1.5.m5.1.1.1.3.3.2">𝑘</ci><ci id="A2.I3.i4.p1.5.m5.1.1.1.3.3.3.cmml" xref="A2.I3.i4.p1.5.m5.1.1.1.3.3.3">𝑖</ci></apply></apply><apply id="A2.I3.i4.p1.5.m5.1.1.1.1.1.1.cmml" xref="A2.I3.i4.p1.5.m5.1.1.1.1.1"><csymbol cd="ambiguous" id="A2.I3.i4.p1.5.m5.1.1.1.1.1.1.1.cmml" xref="A2.I3.i4.p1.5.m5.1.1.1.1.1">subscript</csymbol><ci id="A2.I3.i4.p1.5.m5.1.1.1.1.1.1.2.cmml" xref="A2.I3.i4.p1.5.m5.1.1.1.1.1.1.2">𝑠</ci><ci id="A2.I3.i4.p1.5.m5.1.1.1.1.1.1.3.cmml" xref="A2.I3.i4.p1.5.m5.1.1.1.1.1.1.3">𝑖</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I3.i4.p1.5.m5.1c">d_{i}\coloneqq\mathsf{Enc}_{k_{i}}(s_{i})</annotation></semantics></math> as well as DH key exchange completing message to the server. <math id="A2.I3.i4.p1.6.m6.1" class="ltx_Math" alttext="\mathsf{Enc}" display="inline"><semantics id="A2.I3.i4.p1.6.m6.1a"><mi id="A2.I3.i4.p1.6.m6.1.1" xref="A2.I3.i4.p1.6.m6.1.1.cmml">𝖤𝗇𝖼</mi><annotation-xml encoding="MathML-Content" id="A2.I3.i4.p1.6.m6.1b"><ci id="A2.I3.i4.p1.6.m6.1.1.cmml" xref="A2.I3.i4.p1.6.m6.1.1">𝖤𝗇𝖼</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.I3.i4.p1.6.m6.1c">\mathsf{Enc}</annotation></semantics></math> employs standard techniques like MAC and sequential number to detect any tampered encryption.</span>
</span></span>
<span id="A2.I3.i5" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">5.</span> 
<span id="A2.I3.i5.p1" class="ltx_para">
<span id="A2.I3.i5.p1.6" class="ltx_p">Upon receiving masked vector <math id="A2.I3.i5.p1.1.m1.1" class="ltx_Math" alttext="v_{i}+m_{i}" display="inline"><semantics id="A2.I3.i5.p1.1.m1.1a"><mrow id="A2.I3.i5.p1.1.m1.1.1" xref="A2.I3.i5.p1.1.m1.1.1.cmml"><msub id="A2.I3.i5.p1.1.m1.1.1.2" xref="A2.I3.i5.p1.1.m1.1.1.2.cmml"><mi id="A2.I3.i5.p1.1.m1.1.1.2.2" xref="A2.I3.i5.p1.1.m1.1.1.2.2.cmml">v</mi><mi id="A2.I3.i5.p1.1.m1.1.1.2.3" xref="A2.I3.i5.p1.1.m1.1.1.2.3.cmml">i</mi></msub><mo id="A2.I3.i5.p1.1.m1.1.1.1" xref="A2.I3.i5.p1.1.m1.1.1.1.cmml">+</mo><msub id="A2.I3.i5.p1.1.m1.1.1.3" xref="A2.I3.i5.p1.1.m1.1.1.3.cmml"><mi id="A2.I3.i5.p1.1.m1.1.1.3.2" xref="A2.I3.i5.p1.1.m1.1.1.3.2.cmml">m</mi><mi id="A2.I3.i5.p1.1.m1.1.1.3.3" xref="A2.I3.i5.p1.1.m1.1.1.3.3.cmml">i</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="A2.I3.i5.p1.1.m1.1b"><apply id="A2.I3.i5.p1.1.m1.1.1.cmml" xref="A2.I3.i5.p1.1.m1.1.1"><plus id="A2.I3.i5.p1.1.m1.1.1.1.cmml" xref="A2.I3.i5.p1.1.m1.1.1.1"></plus><apply id="A2.I3.i5.p1.1.m1.1.1.2.cmml" xref="A2.I3.i5.p1.1.m1.1.1.2"><csymbol cd="ambiguous" id="A2.I3.i5.p1.1.m1.1.1.2.1.cmml" xref="A2.I3.i5.p1.1.m1.1.1.2">subscript</csymbol><ci id="A2.I3.i5.p1.1.m1.1.1.2.2.cmml" xref="A2.I3.i5.p1.1.m1.1.1.2.2">𝑣</ci><ci id="A2.I3.i5.p1.1.m1.1.1.2.3.cmml" xref="A2.I3.i5.p1.1.m1.1.1.2.3">𝑖</ci></apply><apply id="A2.I3.i5.p1.1.m1.1.1.3.cmml" xref="A2.I3.i5.p1.1.m1.1.1.3"><csymbol cd="ambiguous" id="A2.I3.i5.p1.1.m1.1.1.3.1.cmml" xref="A2.I3.i5.p1.1.m1.1.1.3">subscript</csymbol><ci id="A2.I3.i5.p1.1.m1.1.1.3.2.cmml" xref="A2.I3.i5.p1.1.m1.1.1.3.2">𝑚</ci><ci id="A2.I3.i5.p1.1.m1.1.1.3.3.cmml" xref="A2.I3.i5.p1.1.m1.1.1.3.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I3.i5.p1.1.m1.1c">v_{i}+m_{i}</annotation></semantics></math>, encryption <math id="A2.I3.i5.p1.2.m2.1" class="ltx_Math" alttext="d_{i}" display="inline"><semantics id="A2.I3.i5.p1.2.m2.1a"><msub id="A2.I3.i5.p1.2.m2.1.1" xref="A2.I3.i5.p1.2.m2.1.1.cmml"><mi id="A2.I3.i5.p1.2.m2.1.1.2" xref="A2.I3.i5.p1.2.m2.1.1.2.cmml">d</mi><mi id="A2.I3.i5.p1.2.m2.1.1.3" xref="A2.I3.i5.p1.2.m2.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="A2.I3.i5.p1.2.m2.1b"><apply id="A2.I3.i5.p1.2.m2.1.1.cmml" xref="A2.I3.i5.p1.2.m2.1.1"><csymbol cd="ambiguous" id="A2.I3.i5.p1.2.m2.1.1.1.cmml" xref="A2.I3.i5.p1.2.m2.1.1">subscript</csymbol><ci id="A2.I3.i5.p1.2.m2.1.1.2.cmml" xref="A2.I3.i5.p1.2.m2.1.1.2">𝑑</ci><ci id="A2.I3.i5.p1.2.m2.1.1.3.cmml" xref="A2.I3.i5.p1.2.m2.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I3.i5.p1.2.m2.1c">d_{i}</annotation></semantics></math>, and the DH key exchange completing message from client <math id="A2.I3.i5.p1.3.m3.1" class="ltx_Math" alttext="i" display="inline"><semantics id="A2.I3.i5.p1.3.m3.1a"><mi id="A2.I3.i5.p1.3.m3.1.1" xref="A2.I3.i5.p1.3.m3.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="A2.I3.i5.p1.3.m3.1b"><ci id="A2.I3.i5.p1.3.m3.1.1.cmml" xref="A2.I3.i5.p1.3.m3.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.I3.i5.p1.3.m3.1c">i</annotation></semantics></math>, the server aggregates <math id="A2.I3.i5.p1.4.m4.1" class="ltx_Math" alttext="v_{i}+m_{i}" display="inline"><semantics id="A2.I3.i5.p1.4.m4.1a"><mrow id="A2.I3.i5.p1.4.m4.1.1" xref="A2.I3.i5.p1.4.m4.1.1.cmml"><msub id="A2.I3.i5.p1.4.m4.1.1.2" xref="A2.I3.i5.p1.4.m4.1.1.2.cmml"><mi id="A2.I3.i5.p1.4.m4.1.1.2.2" xref="A2.I3.i5.p1.4.m4.1.1.2.2.cmml">v</mi><mi id="A2.I3.i5.p1.4.m4.1.1.2.3" xref="A2.I3.i5.p1.4.m4.1.1.2.3.cmml">i</mi></msub><mo id="A2.I3.i5.p1.4.m4.1.1.1" xref="A2.I3.i5.p1.4.m4.1.1.1.cmml">+</mo><msub id="A2.I3.i5.p1.4.m4.1.1.3" xref="A2.I3.i5.p1.4.m4.1.1.3.cmml"><mi id="A2.I3.i5.p1.4.m4.1.1.3.2" xref="A2.I3.i5.p1.4.m4.1.1.3.2.cmml">m</mi><mi id="A2.I3.i5.p1.4.m4.1.1.3.3" xref="A2.I3.i5.p1.4.m4.1.1.3.3.cmml">i</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="A2.I3.i5.p1.4.m4.1b"><apply id="A2.I3.i5.p1.4.m4.1.1.cmml" xref="A2.I3.i5.p1.4.m4.1.1"><plus id="A2.I3.i5.p1.4.m4.1.1.1.cmml" xref="A2.I3.i5.p1.4.m4.1.1.1"></plus><apply id="A2.I3.i5.p1.4.m4.1.1.2.cmml" xref="A2.I3.i5.p1.4.m4.1.1.2"><csymbol cd="ambiguous" id="A2.I3.i5.p1.4.m4.1.1.2.1.cmml" xref="A2.I3.i5.p1.4.m4.1.1.2">subscript</csymbol><ci id="A2.I3.i5.p1.4.m4.1.1.2.2.cmml" xref="A2.I3.i5.p1.4.m4.1.1.2.2">𝑣</ci><ci id="A2.I3.i5.p1.4.m4.1.1.2.3.cmml" xref="A2.I3.i5.p1.4.m4.1.1.2.3">𝑖</ci></apply><apply id="A2.I3.i5.p1.4.m4.1.1.3.cmml" xref="A2.I3.i5.p1.4.m4.1.1.3"><csymbol cd="ambiguous" id="A2.I3.i5.p1.4.m4.1.1.3.1.cmml" xref="A2.I3.i5.p1.4.m4.1.1.3">subscript</csymbol><ci id="A2.I3.i5.p1.4.m4.1.1.3.2.cmml" xref="A2.I3.i5.p1.4.m4.1.1.3.2">𝑚</ci><ci id="A2.I3.i5.p1.4.m4.1.1.3.3.cmml" xref="A2.I3.i5.p1.4.m4.1.1.3.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I3.i5.p1.4.m4.1c">v_{i}+m_{i}</annotation></semantics></math> to a running sum <math id="A2.I3.i5.p1.5.m5.1" class="ltx_Math" alttext="\sum(v+m)" display="inline"><semantics id="A2.I3.i5.p1.5.m5.1a"><mrow id="A2.I3.i5.p1.5.m5.1.1" xref="A2.I3.i5.p1.5.m5.1.1.cmml"><mo rspace="0em" id="A2.I3.i5.p1.5.m5.1.1.2" xref="A2.I3.i5.p1.5.m5.1.1.2.cmml">∑</mo><mrow id="A2.I3.i5.p1.5.m5.1.1.1.1" xref="A2.I3.i5.p1.5.m5.1.1.1.1.1.cmml"><mo stretchy="false" id="A2.I3.i5.p1.5.m5.1.1.1.1.2" xref="A2.I3.i5.p1.5.m5.1.1.1.1.1.cmml">(</mo><mrow id="A2.I3.i5.p1.5.m5.1.1.1.1.1" xref="A2.I3.i5.p1.5.m5.1.1.1.1.1.cmml"><mi id="A2.I3.i5.p1.5.m5.1.1.1.1.1.2" xref="A2.I3.i5.p1.5.m5.1.1.1.1.1.2.cmml">v</mi><mo id="A2.I3.i5.p1.5.m5.1.1.1.1.1.1" xref="A2.I3.i5.p1.5.m5.1.1.1.1.1.1.cmml">+</mo><mi id="A2.I3.i5.p1.5.m5.1.1.1.1.1.3" xref="A2.I3.i5.p1.5.m5.1.1.1.1.1.3.cmml">m</mi></mrow><mo stretchy="false" id="A2.I3.i5.p1.5.m5.1.1.1.1.3" xref="A2.I3.i5.p1.5.m5.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="A2.I3.i5.p1.5.m5.1b"><apply id="A2.I3.i5.p1.5.m5.1.1.cmml" xref="A2.I3.i5.p1.5.m5.1.1"><sum id="A2.I3.i5.p1.5.m5.1.1.2.cmml" xref="A2.I3.i5.p1.5.m5.1.1.2"></sum><apply id="A2.I3.i5.p1.5.m5.1.1.1.1.1.cmml" xref="A2.I3.i5.p1.5.m5.1.1.1.1"><plus id="A2.I3.i5.p1.5.m5.1.1.1.1.1.1.cmml" xref="A2.I3.i5.p1.5.m5.1.1.1.1.1.1"></plus><ci id="A2.I3.i5.p1.5.m5.1.1.1.1.1.2.cmml" xref="A2.I3.i5.p1.5.m5.1.1.1.1.1.2">𝑣</ci><ci id="A2.I3.i5.p1.5.m5.1.1.1.1.1.3.cmml" xref="A2.I3.i5.p1.5.m5.1.1.1.1.1.3">𝑚</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I3.i5.p1.5.m5.1c">\sum(v+m)</annotation></semantics></math> and sends the encryption <math id="A2.I3.i5.p1.6.m6.1" class="ltx_Math" alttext="d_{i}" display="inline"><semantics id="A2.I3.i5.p1.6.m6.1a"><msub id="A2.I3.i5.p1.6.m6.1.1" xref="A2.I3.i5.p1.6.m6.1.1.cmml"><mi id="A2.I3.i5.p1.6.m6.1.1.2" xref="A2.I3.i5.p1.6.m6.1.1.2.cmml">d</mi><mi id="A2.I3.i5.p1.6.m6.1.1.3" xref="A2.I3.i5.p1.6.m6.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="A2.I3.i5.p1.6.m6.1b"><apply id="A2.I3.i5.p1.6.m6.1.1.cmml" xref="A2.I3.i5.p1.6.m6.1.1"><csymbol cd="ambiguous" id="A2.I3.i5.p1.6.m6.1.1.1.cmml" xref="A2.I3.i5.p1.6.m6.1.1">subscript</csymbol><ci id="A2.I3.i5.p1.6.m6.1.1.2.cmml" xref="A2.I3.i5.p1.6.m6.1.1.2">𝑑</ci><ci id="A2.I3.i5.p1.6.m6.1.1.3.cmml" xref="A2.I3.i5.p1.6.m6.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I3.i5.p1.6.m6.1c">d_{i}</annotation></semantics></math>, the completing message, and the index of the corresponding initial message to the trusted party.</span>
</span></span>
<span id="A2.I3.i6" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">6.</span> 
<span id="A2.I3.i6.p1" class="ltx_para">
<span id="A2.I3.i6.p1.8" class="ltx_p">Upon receiving encryption <math id="A2.I3.i6.p1.1.m1.1" class="ltx_Math" alttext="d_{i}" display="inline"><semantics id="A2.I3.i6.p1.1.m1.1a"><msub id="A2.I3.i6.p1.1.m1.1.1" xref="A2.I3.i6.p1.1.m1.1.1.cmml"><mi id="A2.I3.i6.p1.1.m1.1.1.2" xref="A2.I3.i6.p1.1.m1.1.1.2.cmml">d</mi><mi id="A2.I3.i6.p1.1.m1.1.1.3" xref="A2.I3.i6.p1.1.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="A2.I3.i6.p1.1.m1.1b"><apply id="A2.I3.i6.p1.1.m1.1.1.cmml" xref="A2.I3.i6.p1.1.m1.1.1"><csymbol cd="ambiguous" id="A2.I3.i6.p1.1.m1.1.1.1.cmml" xref="A2.I3.i6.p1.1.m1.1.1">subscript</csymbol><ci id="A2.I3.i6.p1.1.m1.1.1.2.cmml" xref="A2.I3.i6.p1.1.m1.1.1.2">𝑑</ci><ci id="A2.I3.i6.p1.1.m1.1.1.3.cmml" xref="A2.I3.i6.p1.1.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I3.i6.p1.1.m1.1c">d_{i}</annotation></semantics></math> and the completing message for the <math id="A2.I3.i6.p1.2.m2.1" class="ltx_Math" alttext="i" display="inline"><semantics id="A2.I3.i6.p1.2.m2.1a"><mi id="A2.I3.i6.p1.2.m2.1.1" xref="A2.I3.i6.p1.2.m2.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="A2.I3.i6.p1.2.m2.1b"><ci id="A2.I3.i6.p1.2.m2.1.1.cmml" xref="A2.I3.i6.p1.2.m2.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.I3.i6.p1.2.m2.1c">i</annotation></semantics></math>’th initial message for DH-key exchange, the trusted party computes the shared secret <math id="A2.I3.i6.p1.3.m3.1" class="ltx_Math" alttext="k_{i}" display="inline"><semantics id="A2.I3.i6.p1.3.m3.1a"><msub id="A2.I3.i6.p1.3.m3.1.1" xref="A2.I3.i6.p1.3.m3.1.1.cmml"><mi id="A2.I3.i6.p1.3.m3.1.1.2" xref="A2.I3.i6.p1.3.m3.1.1.2.cmml">k</mi><mi id="A2.I3.i6.p1.3.m3.1.1.3" xref="A2.I3.i6.p1.3.m3.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="A2.I3.i6.p1.3.m3.1b"><apply id="A2.I3.i6.p1.3.m3.1.1.cmml" xref="A2.I3.i6.p1.3.m3.1.1"><csymbol cd="ambiguous" id="A2.I3.i6.p1.3.m3.1.1.1.cmml" xref="A2.I3.i6.p1.3.m3.1.1">subscript</csymbol><ci id="A2.I3.i6.p1.3.m3.1.1.2.cmml" xref="A2.I3.i6.p1.3.m3.1.1.2">𝑘</ci><ci id="A2.I3.i6.p1.3.m3.1.1.3.cmml" xref="A2.I3.i6.p1.3.m3.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I3.i6.p1.3.m3.1c">k_{i}</annotation></semantics></math> and uses it to recover <math id="A2.I3.i6.p1.4.m4.1" class="ltx_Math" alttext="s_{i}=\mathsf{Dec}_{k_{i}}(d_{i})" display="inline"><semantics id="A2.I3.i6.p1.4.m4.1a"><mrow id="A2.I3.i6.p1.4.m4.1.1" xref="A2.I3.i6.p1.4.m4.1.1.cmml"><msub id="A2.I3.i6.p1.4.m4.1.1.3" xref="A2.I3.i6.p1.4.m4.1.1.3.cmml"><mi id="A2.I3.i6.p1.4.m4.1.1.3.2" xref="A2.I3.i6.p1.4.m4.1.1.3.2.cmml">s</mi><mi id="A2.I3.i6.p1.4.m4.1.1.3.3" xref="A2.I3.i6.p1.4.m4.1.1.3.3.cmml">i</mi></msub><mo id="A2.I3.i6.p1.4.m4.1.1.2" xref="A2.I3.i6.p1.4.m4.1.1.2.cmml">=</mo><mrow id="A2.I3.i6.p1.4.m4.1.1.1" xref="A2.I3.i6.p1.4.m4.1.1.1.cmml"><msub id="A2.I3.i6.p1.4.m4.1.1.1.3" xref="A2.I3.i6.p1.4.m4.1.1.1.3.cmml"><mi id="A2.I3.i6.p1.4.m4.1.1.1.3.2" xref="A2.I3.i6.p1.4.m4.1.1.1.3.2.cmml">𝖣𝖾𝖼</mi><msub id="A2.I3.i6.p1.4.m4.1.1.1.3.3" xref="A2.I3.i6.p1.4.m4.1.1.1.3.3.cmml"><mi id="A2.I3.i6.p1.4.m4.1.1.1.3.3.2" xref="A2.I3.i6.p1.4.m4.1.1.1.3.3.2.cmml">k</mi><mi id="A2.I3.i6.p1.4.m4.1.1.1.3.3.3" xref="A2.I3.i6.p1.4.m4.1.1.1.3.3.3.cmml">i</mi></msub></msub><mo lspace="0em" rspace="0em" id="A2.I3.i6.p1.4.m4.1.1.1.2" xref="A2.I3.i6.p1.4.m4.1.1.1.2.cmml">​</mo><mrow id="A2.I3.i6.p1.4.m4.1.1.1.1.1" xref="A2.I3.i6.p1.4.m4.1.1.1.1.1.1.cmml"><mo stretchy="false" id="A2.I3.i6.p1.4.m4.1.1.1.1.1.2" xref="A2.I3.i6.p1.4.m4.1.1.1.1.1.1.cmml">(</mo><msub id="A2.I3.i6.p1.4.m4.1.1.1.1.1.1" xref="A2.I3.i6.p1.4.m4.1.1.1.1.1.1.cmml"><mi id="A2.I3.i6.p1.4.m4.1.1.1.1.1.1.2" xref="A2.I3.i6.p1.4.m4.1.1.1.1.1.1.2.cmml">d</mi><mi id="A2.I3.i6.p1.4.m4.1.1.1.1.1.1.3" xref="A2.I3.i6.p1.4.m4.1.1.1.1.1.1.3.cmml">i</mi></msub><mo stretchy="false" id="A2.I3.i6.p1.4.m4.1.1.1.1.1.3" xref="A2.I3.i6.p1.4.m4.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="A2.I3.i6.p1.4.m4.1b"><apply id="A2.I3.i6.p1.4.m4.1.1.cmml" xref="A2.I3.i6.p1.4.m4.1.1"><eq id="A2.I3.i6.p1.4.m4.1.1.2.cmml" xref="A2.I3.i6.p1.4.m4.1.1.2"></eq><apply id="A2.I3.i6.p1.4.m4.1.1.3.cmml" xref="A2.I3.i6.p1.4.m4.1.1.3"><csymbol cd="ambiguous" id="A2.I3.i6.p1.4.m4.1.1.3.1.cmml" xref="A2.I3.i6.p1.4.m4.1.1.3">subscript</csymbol><ci id="A2.I3.i6.p1.4.m4.1.1.3.2.cmml" xref="A2.I3.i6.p1.4.m4.1.1.3.2">𝑠</ci><ci id="A2.I3.i6.p1.4.m4.1.1.3.3.cmml" xref="A2.I3.i6.p1.4.m4.1.1.3.3">𝑖</ci></apply><apply id="A2.I3.i6.p1.4.m4.1.1.1.cmml" xref="A2.I3.i6.p1.4.m4.1.1.1"><times id="A2.I3.i6.p1.4.m4.1.1.1.2.cmml" xref="A2.I3.i6.p1.4.m4.1.1.1.2"></times><apply id="A2.I3.i6.p1.4.m4.1.1.1.3.cmml" xref="A2.I3.i6.p1.4.m4.1.1.1.3"><csymbol cd="ambiguous" id="A2.I3.i6.p1.4.m4.1.1.1.3.1.cmml" xref="A2.I3.i6.p1.4.m4.1.1.1.3">subscript</csymbol><ci id="A2.I3.i6.p1.4.m4.1.1.1.3.2.cmml" xref="A2.I3.i6.p1.4.m4.1.1.1.3.2">𝖣𝖾𝖼</ci><apply id="A2.I3.i6.p1.4.m4.1.1.1.3.3.cmml" xref="A2.I3.i6.p1.4.m4.1.1.1.3.3"><csymbol cd="ambiguous" id="A2.I3.i6.p1.4.m4.1.1.1.3.3.1.cmml" xref="A2.I3.i6.p1.4.m4.1.1.1.3.3">subscript</csymbol><ci id="A2.I3.i6.p1.4.m4.1.1.1.3.3.2.cmml" xref="A2.I3.i6.p1.4.m4.1.1.1.3.3.2">𝑘</ci><ci id="A2.I3.i6.p1.4.m4.1.1.1.3.3.3.cmml" xref="A2.I3.i6.p1.4.m4.1.1.1.3.3.3">𝑖</ci></apply></apply><apply id="A2.I3.i6.p1.4.m4.1.1.1.1.1.1.cmml" xref="A2.I3.i6.p1.4.m4.1.1.1.1.1"><csymbol cd="ambiguous" id="A2.I3.i6.p1.4.m4.1.1.1.1.1.1.1.cmml" xref="A2.I3.i6.p1.4.m4.1.1.1.1.1">subscript</csymbol><ci id="A2.I3.i6.p1.4.m4.1.1.1.1.1.1.2.cmml" xref="A2.I3.i6.p1.4.m4.1.1.1.1.1.1.2">𝑑</ci><ci id="A2.I3.i6.p1.4.m4.1.1.1.1.1.1.3.cmml" xref="A2.I3.i6.p1.4.m4.1.1.1.1.1.1.3">𝑖</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I3.i6.p1.4.m4.1c">s_{i}=\mathsf{Dec}_{k_{i}}(d_{i})</annotation></semantics></math>. Then the trusted party re-generates <math id="A2.I3.i6.p1.5.m5.1" class="ltx_Math" alttext="m_{i}" display="inline"><semantics id="A2.I3.i6.p1.5.m5.1a"><msub id="A2.I3.i6.p1.5.m5.1.1" xref="A2.I3.i6.p1.5.m5.1.1.cmml"><mi id="A2.I3.i6.p1.5.m5.1.1.2" xref="A2.I3.i6.p1.5.m5.1.1.2.cmml">m</mi><mi id="A2.I3.i6.p1.5.m5.1.1.3" xref="A2.I3.i6.p1.5.m5.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="A2.I3.i6.p1.5.m5.1b"><apply id="A2.I3.i6.p1.5.m5.1.1.cmml" xref="A2.I3.i6.p1.5.m5.1.1"><csymbol cd="ambiguous" id="A2.I3.i6.p1.5.m5.1.1.1.cmml" xref="A2.I3.i6.p1.5.m5.1.1">subscript</csymbol><ci id="A2.I3.i6.p1.5.m5.1.1.2.cmml" xref="A2.I3.i6.p1.5.m5.1.1.2">𝑚</ci><ci id="A2.I3.i6.p1.5.m5.1.1.3.cmml" xref="A2.I3.i6.p1.5.m5.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I3.i6.p1.5.m5.1c">m_{i}</annotation></semantics></math> with <math id="A2.I3.i6.p1.6.m6.1" class="ltx_Math" alttext="s_{i}" display="inline"><semantics id="A2.I3.i6.p1.6.m6.1a"><msub id="A2.I3.i6.p1.6.m6.1.1" xref="A2.I3.i6.p1.6.m6.1.1.cmml"><mi id="A2.I3.i6.p1.6.m6.1.1.2" xref="A2.I3.i6.p1.6.m6.1.1.2.cmml">s</mi><mi id="A2.I3.i6.p1.6.m6.1.1.3" xref="A2.I3.i6.p1.6.m6.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="A2.I3.i6.p1.6.m6.1b"><apply id="A2.I3.i6.p1.6.m6.1.1.cmml" xref="A2.I3.i6.p1.6.m6.1.1"><csymbol cd="ambiguous" id="A2.I3.i6.p1.6.m6.1.1.1.cmml" xref="A2.I3.i6.p1.6.m6.1.1">subscript</csymbol><ci id="A2.I3.i6.p1.6.m6.1.1.2.cmml" xref="A2.I3.i6.p1.6.m6.1.1.2">𝑠</ci><ci id="A2.I3.i6.p1.6.m6.1.1.3.cmml" xref="A2.I3.i6.p1.6.m6.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I3.i6.p1.6.m6.1c">s_{i}</annotation></semantics></math> and aggregates it to a running sum <math id="A2.I3.i6.p1.7.m7.1" class="ltx_Math" alttext="\sum m" display="inline"><semantics id="A2.I3.i6.p1.7.m7.1a"><mrow id="A2.I3.i6.p1.7.m7.1.1" xref="A2.I3.i6.p1.7.m7.1.1.cmml"><mo id="A2.I3.i6.p1.7.m7.1.1.1" xref="A2.I3.i6.p1.7.m7.1.1.1.cmml">∑</mo><mi id="A2.I3.i6.p1.7.m7.1.1.2" xref="A2.I3.i6.p1.7.m7.1.1.2.cmml">m</mi></mrow><annotation-xml encoding="MathML-Content" id="A2.I3.i6.p1.7.m7.1b"><apply id="A2.I3.i6.p1.7.m7.1.1.cmml" xref="A2.I3.i6.p1.7.m7.1.1"><sum id="A2.I3.i6.p1.7.m7.1.1.1.cmml" xref="A2.I3.i6.p1.7.m7.1.1.1"></sum><ci id="A2.I3.i6.p1.7.m7.1.1.2.cmml" xref="A2.I3.i6.p1.7.m7.1.1.2">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I3.i6.p1.7.m7.1c">\sum m</annotation></semantics></math>. After that, the trusted party will not process any further completing messages to <math id="A2.I3.i6.p1.8.m8.1" class="ltx_Math" alttext="i" display="inline"><semantics id="A2.I3.i6.p1.8.m8.1a"><mi id="A2.I3.i6.p1.8.m8.1.1" xref="A2.I3.i6.p1.8.m8.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="A2.I3.i6.p1.8.m8.1b"><ci id="A2.I3.i6.p1.8.m8.1.1.cmml" xref="A2.I3.i6.p1.8.m8.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.I3.i6.p1.8.m8.1c">i</annotation></semantics></math>’th initial message.</span>
</span></span>
<span id="A2.I3.i7" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">7.</span> 
<span id="A2.I3.i7.p1" class="ltx_para">
<span id="A2.I3.i7.p1.2" class="ltx_p">The server can request the trusted party to generate the unmasking vector. Upon receiving such request, the trusted party sends the running sum <math id="A2.I3.i7.p1.1.m1.1" class="ltx_Math" alttext="\sum m" display="inline"><semantics id="A2.I3.i7.p1.1.m1.1a"><mrow id="A2.I3.i7.p1.1.m1.1.1" xref="A2.I3.i7.p1.1.m1.1.1.cmml"><mo id="A2.I3.i7.p1.1.m1.1.1.1" xref="A2.I3.i7.p1.1.m1.1.1.1.cmml">∑</mo><mi id="A2.I3.i7.p1.1.m1.1.1.2" xref="A2.I3.i7.p1.1.m1.1.1.2.cmml">m</mi></mrow><annotation-xml encoding="MathML-Content" id="A2.I3.i7.p1.1.m1.1b"><apply id="A2.I3.i7.p1.1.m1.1.1.cmml" xref="A2.I3.i7.p1.1.m1.1.1"><sum id="A2.I3.i7.p1.1.m1.1.1.1.cmml" xref="A2.I3.i7.p1.1.m1.1.1.1"></sum><ci id="A2.I3.i7.p1.1.m1.1.1.2.cmml" xref="A2.I3.i7.p1.1.m1.1.1.2">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I3.i7.p1.1.m1.1c">\sum m</annotation></semantics></math> to the server only if at least completing messages of <math id="A2.I3.i7.p1.2.m2.1" class="ltx_Math" alttext="t" display="inline"><semantics id="A2.I3.i7.p1.2.m2.1a"><mi id="A2.I3.i7.p1.2.m2.1.1" xref="A2.I3.i7.p1.2.m2.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="A2.I3.i7.p1.2.m2.1b"><ci id="A2.I3.i7.p1.2.m2.1.1.cmml" xref="A2.I3.i7.p1.2.m2.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.I3.i7.p1.2.m2.1c">t</annotation></semantics></math> clients have been processed. The trusted party ignores any further messages from the server.</span>
</span></span>
<span id="A2.I3.i8" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">8.</span> 
<span id="A2.I3.i8.p1" class="ltx_para ltx_noindent">
<span id="A2.I3.i8.p1.2" class="ltx_p">Upon receiving <math id="A2.I3.i8.p1.1.m1.1" class="ltx_Math" alttext="\sum m" display="inline"><semantics id="A2.I3.i8.p1.1.m1.1a"><mrow id="A2.I3.i8.p1.1.m1.1.1" xref="A2.I3.i8.p1.1.m1.1.1.cmml"><mo id="A2.I3.i8.p1.1.m1.1.1.1" xref="A2.I3.i8.p1.1.m1.1.1.1.cmml">∑</mo><mi id="A2.I3.i8.p1.1.m1.1.1.2" xref="A2.I3.i8.p1.1.m1.1.1.2.cmml">m</mi></mrow><annotation-xml encoding="MathML-Content" id="A2.I3.i8.p1.1.m1.1b"><apply id="A2.I3.i8.p1.1.m1.1.1.cmml" xref="A2.I3.i8.p1.1.m1.1.1"><sum id="A2.I3.i8.p1.1.m1.1.1.1.cmml" xref="A2.I3.i8.p1.1.m1.1.1.1"></sum><ci id="A2.I3.i8.p1.1.m1.1.1.2.cmml" xref="A2.I3.i8.p1.1.m1.1.1.2">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I3.i8.p1.1.m1.1c">\sum m</annotation></semantics></math>, the server computes the sum of all private arrays by <math id="A2.I3.i8.p1.2.m2.1" class="ltx_Math" alttext="\sum v=\sum(v+m)-\sum m" display="inline"><semantics id="A2.I3.i8.p1.2.m2.1a"><mrow id="A2.I3.i8.p1.2.m2.1.1" xref="A2.I3.i8.p1.2.m2.1.1.cmml"><mrow id="A2.I3.i8.p1.2.m2.1.1.3" xref="A2.I3.i8.p1.2.m2.1.1.3.cmml"><mo id="A2.I3.i8.p1.2.m2.1.1.3.1" xref="A2.I3.i8.p1.2.m2.1.1.3.1.cmml">∑</mo><mi id="A2.I3.i8.p1.2.m2.1.1.3.2" xref="A2.I3.i8.p1.2.m2.1.1.3.2.cmml">v</mi></mrow><mo rspace="0.111em" id="A2.I3.i8.p1.2.m2.1.1.2" xref="A2.I3.i8.p1.2.m2.1.1.2.cmml">=</mo><mrow id="A2.I3.i8.p1.2.m2.1.1.1" xref="A2.I3.i8.p1.2.m2.1.1.1.cmml"><mrow id="A2.I3.i8.p1.2.m2.1.1.1.1" xref="A2.I3.i8.p1.2.m2.1.1.1.1.cmml"><mo rspace="0em" id="A2.I3.i8.p1.2.m2.1.1.1.1.2" xref="A2.I3.i8.p1.2.m2.1.1.1.1.2.cmml">∑</mo><mrow id="A2.I3.i8.p1.2.m2.1.1.1.1.1.1" xref="A2.I3.i8.p1.2.m2.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="A2.I3.i8.p1.2.m2.1.1.1.1.1.1.2" xref="A2.I3.i8.p1.2.m2.1.1.1.1.1.1.1.cmml">(</mo><mrow id="A2.I3.i8.p1.2.m2.1.1.1.1.1.1.1" xref="A2.I3.i8.p1.2.m2.1.1.1.1.1.1.1.cmml"><mi id="A2.I3.i8.p1.2.m2.1.1.1.1.1.1.1.2" xref="A2.I3.i8.p1.2.m2.1.1.1.1.1.1.1.2.cmml">v</mi><mo id="A2.I3.i8.p1.2.m2.1.1.1.1.1.1.1.1" xref="A2.I3.i8.p1.2.m2.1.1.1.1.1.1.1.1.cmml">+</mo><mi id="A2.I3.i8.p1.2.m2.1.1.1.1.1.1.1.3" xref="A2.I3.i8.p1.2.m2.1.1.1.1.1.1.1.3.cmml">m</mi></mrow><mo stretchy="false" id="A2.I3.i8.p1.2.m2.1.1.1.1.1.1.3" xref="A2.I3.i8.p1.2.m2.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo rspace="0.055em" id="A2.I3.i8.p1.2.m2.1.1.1.2" xref="A2.I3.i8.p1.2.m2.1.1.1.2.cmml">−</mo><mrow id="A2.I3.i8.p1.2.m2.1.1.1.3" xref="A2.I3.i8.p1.2.m2.1.1.1.3.cmml"><mo id="A2.I3.i8.p1.2.m2.1.1.1.3.1" xref="A2.I3.i8.p1.2.m2.1.1.1.3.1.cmml">∑</mo><mi id="A2.I3.i8.p1.2.m2.1.1.1.3.2" xref="A2.I3.i8.p1.2.m2.1.1.1.3.2.cmml">m</mi></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="A2.I3.i8.p1.2.m2.1b"><apply id="A2.I3.i8.p1.2.m2.1.1.cmml" xref="A2.I3.i8.p1.2.m2.1.1"><eq id="A2.I3.i8.p1.2.m2.1.1.2.cmml" xref="A2.I3.i8.p1.2.m2.1.1.2"></eq><apply id="A2.I3.i8.p1.2.m2.1.1.3.cmml" xref="A2.I3.i8.p1.2.m2.1.1.3"><sum id="A2.I3.i8.p1.2.m2.1.1.3.1.cmml" xref="A2.I3.i8.p1.2.m2.1.1.3.1"></sum><ci id="A2.I3.i8.p1.2.m2.1.1.3.2.cmml" xref="A2.I3.i8.p1.2.m2.1.1.3.2">𝑣</ci></apply><apply id="A2.I3.i8.p1.2.m2.1.1.1.cmml" xref="A2.I3.i8.p1.2.m2.1.1.1"><minus id="A2.I3.i8.p1.2.m2.1.1.1.2.cmml" xref="A2.I3.i8.p1.2.m2.1.1.1.2"></minus><apply id="A2.I3.i8.p1.2.m2.1.1.1.1.cmml" xref="A2.I3.i8.p1.2.m2.1.1.1.1"><sum id="A2.I3.i8.p1.2.m2.1.1.1.1.2.cmml" xref="A2.I3.i8.p1.2.m2.1.1.1.1.2"></sum><apply id="A2.I3.i8.p1.2.m2.1.1.1.1.1.1.1.cmml" xref="A2.I3.i8.p1.2.m2.1.1.1.1.1.1"><plus id="A2.I3.i8.p1.2.m2.1.1.1.1.1.1.1.1.cmml" xref="A2.I3.i8.p1.2.m2.1.1.1.1.1.1.1.1"></plus><ci id="A2.I3.i8.p1.2.m2.1.1.1.1.1.1.1.2.cmml" xref="A2.I3.i8.p1.2.m2.1.1.1.1.1.1.1.2">𝑣</ci><ci id="A2.I3.i8.p1.2.m2.1.1.1.1.1.1.1.3.cmml" xref="A2.I3.i8.p1.2.m2.1.1.1.1.1.1.1.3">𝑚</ci></apply></apply><apply id="A2.I3.i8.p1.2.m2.1.1.1.3.cmml" xref="A2.I3.i8.p1.2.m2.1.1.1.3"><sum id="A2.I3.i8.p1.2.m2.1.1.1.3.1.cmml" xref="A2.I3.i8.p1.2.m2.1.1.1.3.1"></sum><ci id="A2.I3.i8.p1.2.m2.1.1.1.3.2.cmml" xref="A2.I3.i8.p1.2.m2.1.1.1.3.2">𝑚</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I3.i8.p1.2.m2.1c">\sum v=\sum(v+m)-\sum m</annotation></semantics></math>.</span>
</span></span>
</span>
</span>
</p>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 16: </span>Real world protocol for secure aggregation</figcaption>
</figure>
</section>
<section id="A2.SS4" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">B.4 </span>Security Proof</h3>

<figure id="A2.F17" class="ltx_figure"><svg id="A2.F17.pic1" class="ltx_picture ltx_centering" height="640.85" overflow="visible" version="1.1" width="519.93"><g transform="translate(0,640.85) matrix(1 0 0 -1 0 0) translate(-9.86,0) translate(0,636.77)" fill="#000000" stroke="#000000" stroke-width="0.75pt"><g fill="#9B9B9B" fill-opacity="1" stroke-dasharray="0.84pt,2.51pt" stroke-dashoffset="0.0pt"><path d="M 290.58 -142.18 L 529.27 -142.18 L 529.27 -397.47 L 290.58 -397.47 Z"></path></g><g fill="#9B9B9B" fill-opacity="1" stroke-dasharray="0.84pt,2.51pt" stroke-dashoffset="0.0pt"><path d="M 373.6 -121.42 L 446.24 -121.42 L 446.24 -143.21 L 373.6 -143.21 Z"></path></g><path d="M 409.92 -132.32" style="fill:none"></path><g transform="matrix(1.0 0.0 0.0 1.0 380.5 -225.33)" fill="#000000" stroke="#000000"><g class="ltx_tikzmatrix" transform="matrix(1 0 0 -1 0 181.225)"><g class="ltx_tikzmatrix_row" transform="matrix(1 0 0 1 0 186.03)"><g class="ltx_tikzmatrix_col ltx_nopad_l ltx_nopad_r" transform="matrix(1 0 0 -1 0 0)"><text transform="matrix(1 0 0 -1 0 0)">Simulator</text></g></g></g></g><path d="M 409.92 -143.21 C 382.26 -158.41 361.77 -133.91 332.09 -159.82" style="fill:none"></path><g stroke="#000000" fill="#000000" stroke-width="0.75pt"><path d="M 338.09 -149.61 C 336.39 -153.85 334.4 -157.26 332.09 -159.82 C 334.82 -157.71 338.37 -155.98 342.73 -154.62" style="fill:none"></path></g><g fill="#50E3C2" fill-opacity="1" stroke-dasharray="4.5pt,4.5pt" stroke-dashoffset="0.0pt"><path d="M 300.95 -159.82 L 362.18 -159.82 L 362.18 -197.18 L 300.95 -197.18 Z"></path></g><path d="M 331.57 -178.5" style="fill:none"></path><g transform="matrix(1.0 0.0 0.0 1.0 306.03 -312.09)" fill="#000000" stroke="#000000"><g class="ltx_tikzmatrix" transform="matrix(1 0 0 -1 0 252.595)"><g class="ltx_tikzmatrix_row" transform="matrix(1 0 0 1 0 257.44)"><g class="ltx_tikzmatrix_col ltx_nopad_l ltx_nopad_r" transform="matrix(1 0 0 -1 0 0)"><foreignObject width="51.09" height="29.19" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible">
<span id="A2.F17.pic1.3.3.3.1.1.1.1.1" class="ltx_inline-block ltx_minipage ltx_align_middle" style="width:36.9pt;">
<span id="A2.F17.pic1.3.3.3.1.1.1.1.1.1" class="ltx_p ltx_align_center">Trusted</span>
<span id="A2.F17.pic1.3.3.3.1.1.1.1.1.2" class="ltx_p ltx_align_center">party</span>
</span></foreignObject></g></g></g></g><path d="M 409.92 -143.21 L 409.92 -159.82" style="fill:none"></path><g stroke="#000000" fill="#000000" stroke-width="0.75pt"><path d="M 406.51 -148.47 C 408.47 -152.6 409.61 -156.38 409.92 -159.82 C 410.23 -156.38 411.37 -152.6 413.34 -148.47" style="fill:none"></path></g><g fill="#50E3C2" fill-opacity="1" stroke-dasharray="4.5pt,4.5pt" stroke-dashoffset="0.0pt"><path d="M 378.79 -159.82 L 441.05 -159.82 L 441.05 -197.18 L 378.79 -197.18 Z"></path></g><path d="M 409.92 -178.5" style="fill:none"></path><g transform="matrix(1.0 0.0 0.0 1.0 385.68 -311.29)" fill="#000000" stroke="#000000"><g class="ltx_tikzmatrix" transform="matrix(1 0 0 -1 0 251.79)"><g class="ltx_tikzmatrix_row" transform="matrix(1 0 0 1 0 256.64)"><g class="ltx_tikzmatrix_col ltx_nopad_l ltx_nopad_r" transform="matrix(1 0 0 -1 0 0)"><foreignObject width="48.48" height="27.6" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible">
<span id="A2.F17.pic1.4.4.4.1.1.1.1.1" class="ltx_inline-block ltx_minipage ltx_align_middle" style="width:35.0pt;">
<span id="A2.F17.pic1.4.4.4.1.1.1.1.1.1" class="ltx_p ltx_align_center">Honest</span>
<span id="A2.F17.pic1.4.4.4.1.1.1.1.1.2" class="ltx_p ltx_align_center">client</span>
</span></foreignObject></g></g></g></g><path d="M 409.92 -143.21 C 422.13 -159.59 441.5 -132.47 487.75 -159.82" style="fill:none"></path><g stroke="#000000" fill="#000000" stroke-width="0.75pt"><path d="M 476.27 -156.93 C 480.82 -157.36 484.65 -158.32 487.75 -159.82 C 484.97 -157.79 482.31 -154.87 479.77 -151.07" style="fill:none"></path></g><g fill="#50E3C2" fill-opacity="1" stroke-dasharray="4.5pt,4.5pt" stroke-dashoffset="0.0pt"><path d="M 456.62 -159.82 L 518.89 -159.82 L 518.89 -197.18 L 456.62 -197.18 Z"></path></g><path d="M 487.75 -178.5" style="fill:none"></path><g transform="matrix(1.0 0.0 0.0 1.0 463.51 -311.29)" fill="#000000" stroke="#000000"><g class="ltx_tikzmatrix" transform="matrix(1 0 0 -1 0 251.79)"><g class="ltx_tikzmatrix_row" transform="matrix(1 0 0 1 0 256.64)"><g class="ltx_tikzmatrix_col ltx_nopad_l ltx_nopad_r" transform="matrix(1 0 0 -1 0 0)"><foreignObject width="48.48" height="27.6" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible">
<span id="A2.F17.pic1.5.5.5.1.1.1.1.1" class="ltx_inline-block ltx_minipage ltx_align_middle" style="width:35.0pt;">
<span id="A2.F17.pic1.5.5.5.1.1.1.1.1.1" class="ltx_p ltx_align_center">Honest</span>
<span id="A2.F17.pic1.5.5.5.1.1.1.1.1.2" class="ltx_p ltx_align_center">client</span>
</span></foreignObject></g></g></g></g><g stroke-dasharray="0.84pt,2.51pt" stroke-dashoffset="0.0pt"><path d="M 331.57 -197.18 L 409.92 -217.93" style="fill:none"></path></g><g stroke-dasharray="0.84pt,2.51pt" stroke-dashoffset="0.0pt"><path d="M 409.92 -197.18 L 409.92 -217.93" style="fill:none"></path></g><g stroke-dasharray="0.84pt,2.51pt" stroke-dashoffset="0.0pt"><path d="M 487.75 -197.18 L 409.92 -217.93" style="fill:none"></path></g><g fill="#4A90E2" fill-opacity="1"><path d="M 409.92 -249.07 M 467 -249.07 C 467 -266.26 441.44 -280.2 409.92 -280.2 C 378.4 -280.2 352.84 -266.26 352.84 -249.07 C 352.84 -231.87 378.4 -217.93 409.92 -217.93 C 441.44 -217.93 467 -231.87 467 -249.07 Z M 409.92 -249.07"></path></g><path d="M 409.92 -249.07" style="fill:none"></path><g transform="matrix(1.0 0.0 0.0 1.0 374.69 -430.25)" fill="#000000" stroke="#000000"><g class="ltx_tikzmatrix" transform="matrix(1 0 0 -1 0 347.235)"><g class="ltx_tikzmatrix_row" transform="matrix(1 0 0 1 0 352.08)"><g class="ltx_tikzmatrix_col ltx_nopad_l ltx_nopad_r" transform="matrix(1 0 0 -1 0 0)"><foreignObject width="70.46" height="30.29" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible">
<span id="A2.F17.pic1.6.6.6.1.1.1.1.1" class="ltx_inline-block ltx_minipage ltx_align_middle" style="width:50.9pt;">
<span id="A2.F17.pic1.6.6.6.1.1.1.1.1.1" class="ltx_p ltx_align_center">Real world</span>
<span id="A2.F17.pic1.6.6.6.1.1.1.1.1.2" class="ltx_p ltx_align_center">protocol</span>
</span></foreignObject></g></g></g></g><g fill="#F5A623" fill-opacity="1" stroke-dasharray="4.5pt,4.5pt" stroke-dashoffset="0.0pt"><path d="M 300.95 -300.95 L 352.84 -300.95 L 352.84 -327.94 L 300.95 -327.94 Z"></path></g><path d="M 326.9 -314.45" style="fill:none"></path><g transform="matrix(1.0 0.0 0.0 1.0 304.23 -532.38)" fill="#000000" stroke="#000000"><g class="ltx_tikzmatrix" transform="matrix(1 0 0 -1 0 427.57)"><g class="ltx_tikzmatrix_row" transform="matrix(1 0 0 1 0 432.41)"><g class="ltx_tikzmatrix_col ltx_nopad_l ltx_nopad_r" transform="matrix(1 0 0 -1 0 0)"><foreignObject width="45.34" height="16.6" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible">
<span id="A2.F17.pic1.7.7.7.1.1.1.1.1" class="ltx_inline-block ltx_minipage ltx_align_middle" style="width:32.8pt;">
<span id="A2.F17.pic1.7.7.7.1.1.1.1.1.1" class="ltx_p ltx_align_center">Server</span>
</span></foreignObject></g></g></g></g><g fill="#F5A623" fill-opacity="1" stroke-dasharray="4.5pt,4.5pt" stroke-dashoffset="0.0pt"><path d="M 363.22 -300.95 L 435.87 -300.95 L 435.87 -342.47 L 363.22 -342.47 Z"></path></g><path d="M 399.54 -321.71" style="fill:none"></path><g transform="matrix(1.0 0.0 0.0 1.0 366.28 -549.98)" fill="#000000" stroke="#000000"><g class="ltx_tikzmatrix" transform="matrix(1 0 0 -1 0 442.74)"><g class="ltx_tikzmatrix_row" transform="matrix(1 0 0 1 0 447.59)"><g class="ltx_tikzmatrix_col ltx_nopad_l ltx_nopad_r" transform="matrix(1 0 0 -1 0 0)"><foreignObject width="66.53" height="27.6" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible">
<span id="A2.F17.pic1.8.8.8.1.1.1.1.1" class="ltx_inline-block ltx_minipage ltx_align_middle" style="width:48.1pt;">
<span id="A2.F17.pic1.8.8.8.1.1.1.1.1.1" class="ltx_p ltx_align_center">Corrupted</span>
<span id="A2.F17.pic1.8.8.8.1.1.1.1.1.2" class="ltx_p ltx_align_center">client</span>
</span></foreignObject></g></g></g></g><g fill="#F5A623" fill-opacity="1" stroke-dasharray="4.5pt,4.5pt" stroke-dashoffset="0.0pt"><path d="M 446.24 -300.95 L 518.89 -300.95 L 518.89 -342.47 L 446.24 -342.47 Z"></path></g><path d="M 482.57 -321.71" style="fill:none"></path><g transform="matrix(1.0 0.0 0.0 1.0 449.3 -549.98)" fill="#000000" stroke="#000000"><g class="ltx_tikzmatrix" transform="matrix(1 0 0 -1 0 442.74)"><g class="ltx_tikzmatrix_row" transform="matrix(1 0 0 1 0 447.59)"><g class="ltx_tikzmatrix_col ltx_nopad_l ltx_nopad_r" transform="matrix(1 0 0 -1 0 0)"><foreignObject width="66.53" height="27.6" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible">
<span id="A2.F17.pic1.9.9.9.1.1.1.1.1" class="ltx_inline-block ltx_minipage ltx_align_middle" style="width:48.1pt;">
<span id="A2.F17.pic1.9.9.9.1.1.1.1.1.1" class="ltx_p ltx_align_center">Corrupted</span>
<span id="A2.F17.pic1.9.9.9.1.1.1.1.1.2" class="ltx_p ltx_align_center">client</span>
</span></foreignObject></g></g></g></g><g stroke-dasharray="0.84pt,2.51pt" stroke-dashoffset="0.0pt"><path d="M 409.92 -280.2 L 326.9 -300.95" style="fill:none"></path></g><g stroke-dasharray="0.84pt,2.51pt" stroke-dashoffset="0.0pt"><path d="M 409.92 -280.2 L 399.54 -300.95" style="fill:none"></path></g><g stroke-dasharray="0.84pt,2.51pt" stroke-dashoffset="0.0pt"><path d="M 409.92 -280.2 L 482.57 -300.95" style="fill:none"></path></g><g fill="#D0021B" fill-opacity="1" stroke-dasharray="0.84pt,2.51pt" stroke-dashoffset="0.0pt"><path d="M 373.6 -365.3 L 446.24 -365.3 L 446.24 -390.2 L 373.6 -390.2 Z"></path></g><path d="M 409.92 -377.75" style="fill:none"></path><g transform="matrix(1.0 0.0 0.0 1.0 379.1 -635.73)" fill="#000000" stroke="#000000"><g class="ltx_tikzmatrix" transform="matrix(1 0 0 -1 0 509.82)"><g class="ltx_tikzmatrix_row" transform="matrix(1 0 0 1 0 513.28)"><g class="ltx_tikzmatrix_col ltx_nopad_l ltx_nopad_r" transform="matrix(1 0 0 -1 0 0)"><text transform="matrix(1 0 0 -1 0 0)">Adversary</text></g></g></g></g><path d="M 409.92 -365.3 C 385.29 -332.59 347.77 -360.28 326.9 -327.94" style="fill:none"></path><g stroke="#000000" fill="#000000" stroke-width="0.75pt"><path d="M 336.78 -334.48 C 332.63 -332.55 329.33 -330.38 326.9 -327.94 C 328.86 -330.78 330.39 -334.41 331.53 -338.84" style="fill:none"></path></g><path d="M 409.92 -365.3 L 399.54 -342.47" style="fill:none"></path><g stroke="#000000" fill="#000000" stroke-width="0.75pt"><path d="M 407.81 -350.95 C 404.16 -348.19 401.41 -345.37 399.54 -342.47 C 400.85 -345.66 401.59 -349.53 401.75 -354.1" style="fill:none"></path></g><path d="M 409.92 -365.3 C 438.45 -324.41 466.16 -374.14 482.57 -342.47" style="fill:none"></path><g stroke="#000000" fill="#000000" stroke-width="0.75pt"><path d="M 478.56 -353.61 C 479.44 -349.13 480.77 -345.41 482.57 -342.47 C 480.27 -345.04 477.11 -347.4 473.07 -349.55" style="fill:none"></path></g><g fill="#F5A623" fill-opacity="1"><path d="M 300.95 -60.19 L 352.84 -60.19 L 352.84 -87.17 L 300.95 -87.17 Z"></path></g><path d="M 326.9 -73.68" style="fill:none"></path><g transform="matrix(1.0 0.0 0.0 1.0 304.23 -131.11)" fill="#000000" stroke="#000000"><g class="ltx_tikzmatrix" transform="matrix(1 0 0 -1 0 106.55)"><g class="ltx_tikzmatrix_row" transform="matrix(1 0 0 1 0 111.39)"><g class="ltx_tikzmatrix_col ltx_nopad_l ltx_nopad_r" transform="matrix(1 0 0 -1 0 0)"><foreignObject width="45.34" height="16.6" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible">
<span id="A2.F17.pic1.10.10.10.1.1.1.1.1" class="ltx_inline-block ltx_minipage ltx_align_middle" style="width:32.8pt;">
<span id="A2.F17.pic1.10.10.10.1.1.1.1.1.1" class="ltx_p ltx_align_center">Server</span>
</span></foreignObject></g></g></g></g><g fill="#F5A623" fill-opacity="1"><path d="M 363.22 -60.19 L 435.87 -60.19 L 435.87 -93.4 L 363.22 -93.4 Z"></path></g><path d="M 399.54 -76.8" style="fill:none"></path><g transform="matrix(1.0 0.0 0.0 1.0 366.28 -141.79)" fill="#000000" stroke="#000000"><g class="ltx_tikzmatrix" transform="matrix(1 0 0 -1 0 116.19)"><g class="ltx_tikzmatrix_row" transform="matrix(1 0 0 1 0 121.03)"><g class="ltx_tikzmatrix_col ltx_nopad_l ltx_nopad_r" transform="matrix(1 0 0 -1 0 0)"><foreignObject width="66.53" height="27.6" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible">
<span id="A2.F17.pic1.11.11.11.1.1.1.1.1" class="ltx_inline-block ltx_minipage ltx_align_middle" style="width:48.1pt;">
<span id="A2.F17.pic1.11.11.11.1.1.1.1.1.1" class="ltx_p ltx_align_center">Corrupted</span>
<span id="A2.F17.pic1.11.11.11.1.1.1.1.1.2" class="ltx_p ltx_align_center">client</span>
</span></foreignObject></g></g></g></g><g fill="#F5A623" fill-opacity="1"><path d="M 446.24 -60.19 L 518.89 -60.19 L 518.89 -93.4 L 446.24 -93.4 Z"></path></g><path d="M 482.57 -76.8" style="fill:none"></path><g transform="matrix(1.0 0.0 0.0 1.0 449.3 -141.79)" fill="#000000" stroke="#000000"><g class="ltx_tikzmatrix" transform="matrix(1 0 0 -1 0 116.19)"><g class="ltx_tikzmatrix_row" transform="matrix(1 0 0 1 0 121.03)"><g class="ltx_tikzmatrix_col ltx_nopad_l ltx_nopad_r" transform="matrix(1 0 0 -1 0 0)"><foreignObject width="66.53" height="27.6" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible">
<span id="A2.F17.pic1.12.12.12.1.1.1.1.1" class="ltx_inline-block ltx_minipage ltx_align_middle" style="width:48.1pt;">
<span id="A2.F17.pic1.12.12.12.1.1.1.1.1.1" class="ltx_p ltx_align_center">Corrupted</span>
<span id="A2.F17.pic1.12.12.12.1.1.1.1.1.2" class="ltx_p ltx_align_center">client</span>
</span></foreignObject></g></g></g></g><path d="M 409.92 -121.42 C 387.37 -88.71 341.78 -133.53 326.9 -87.17" style="fill:none"></path><g stroke="#000000" fill="#000000" stroke-width="0.75pt"><path d="M 334.47 -96.28 C 331.05 -93.24 328.53 -90.21 326.9 -87.17 C 327.95 -90.46 328.38 -94.38 328.19 -98.95" style="fill:none"></path></g><path d="M 409.92 -121.42 L 399.54 -93.4" style="fill:none"></path><g stroke="#000000" fill="#000000" stroke-width="0.75pt"><path d="M 406.63 -102.89 C 403.38 -99.68 401.01 -96.52 399.54 -93.4 C 400.43 -96.73 400.65 -100.67 400.21 -105.23" style="fill:none"></path></g><path d="M 409.92 -121.42 C 440.53 -80.53 468.23 -130.26 482.57 -93.4" style="fill:none"></path><g stroke="#000000" fill="#000000" stroke-width="0.75pt"><path d="M 480.46 -105.06 C 480.59 -100.49 481.28 -96.6 482.57 -93.4 C 480.73 -96.32 478 -99.17 474.37 -101.96" style="fill:none"></path></g><g fill="#7ED321" fill-opacity="1"><path d="M 228.31 -36.32 M 290.58 -36.32 C 290.58 -53.52 262.7 -67.46 228.31 -67.46 C 193.92 -67.46 166.04 -53.52 166.04 -36.32 C 166.04 -19.13 193.92 -5.19 228.31 -5.19 C 262.7 -5.19 290.58 -19.13 290.58 -36.32 Z M 228.31 -36.32"></path></g><path d="M 228.31 -36.32" style="fill:none"></path><g transform="matrix(1.0 0.0 0.0 1.0 192.3 -75.68)" fill="#000000" stroke="#000000"><g class="ltx_tikzmatrix" transform="matrix(1 0 0 -1 0 63.575)"><g class="ltx_tikzmatrix_row" transform="matrix(1 0 0 1 0 68.42)"><g class="ltx_tikzmatrix_col ltx_nopad_l ltx_nopad_r" transform="matrix(1 0 0 -1 0 0)"><foreignObject width="72.02" height="30.29" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible">
<span id="A2.F17.pic1.13.13.13.1.1.1.1.1" class="ltx_inline-block ltx_minipage ltx_align_middle" style="width:52.1pt;">
<span id="A2.F17.pic1.13.13.13.1.1.1.1.1.1" class="ltx_p ltx_align_center">Ideal world</span>
<span id="A2.F17.pic1.13.13.13.1.1.1.1.1.2" class="ltx_p ltx_align_center">protocol</span>
</span></foreignObject></g></g></g></g><g stroke-dasharray="0.84pt,2.51pt" stroke-dashoffset="0.0pt"><path d="M 110 -36.32 L 166.04 -36.32" style="fill:none"></path></g><g stroke-dasharray="0.84pt,2.51pt" stroke-dashoffset="0.0pt"><path d="M 110 -98.59 L 166.04 -36.32" style="fill:none"></path></g><g stroke-dasharray="0.84pt,2.51pt" stroke-dashoffset="0.0pt"><path d="M 326.9 -60.19 L 290.58 -36.32" style="fill:none"></path></g><g stroke-dasharray="0.84pt,2.51pt" stroke-dashoffset="0.0pt"><path d="M 399.54 -60.19 L 290.58 -36.32" style="fill:none"></path></g><g stroke-dasharray="0.84pt,2.51pt" stroke-dashoffset="0.0pt"><path d="M 482.57 -60.19 L 290.58 -36.32" style="fill:none"></path></g><g fill="#B8E986" fill-opacity="1"><path d="M 51.89 -17.64 L 110 -17.64 L 110 -55 L 51.89 -55 Z"></path></g><path d="M 80.95 -36.32" style="fill:none"></path><g transform="matrix(1.0 0.0 0.0 1.0 56.7 -74.34)" fill="#000000" stroke="#000000"><g class="ltx_tikzmatrix" transform="matrix(1 0 0 -1 0 62.23)"><g class="ltx_tikzmatrix_row" transform="matrix(1 0 0 1 0 67.07)"><g class="ltx_tikzmatrix_col ltx_nopad_l ltx_nopad_r" transform="matrix(1 0 0 -1 0 0)"><foreignObject width="48.48" height="27.6" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible">
<span id="A2.F17.pic1.14.14.14.1.1.1.1.1" class="ltx_inline-block ltx_minipage ltx_align_middle" style="width:35.0pt;">
<span id="A2.F17.pic1.14.14.14.1.1.1.1.1.1" class="ltx_p ltx_align_center">Honest</span>
<span id="A2.F17.pic1.14.14.14.1.1.1.1.1.2" class="ltx_p ltx_align_center">client</span>
</span></foreignObject></g></g></g></g><path d="M 80.95 -57.08" style="fill:none"></path><g transform="matrix(1.0 0.0 0.0 1.0 76.01 -64.59)" fill="#000000" stroke="#000000"><foreignObject width="9.87" height="8.51" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible"><math id="A2.F17.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1" class="ltx_Math" alttext="v_{i}" display="inline"><semantics id="A2.F17.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1a"><msub id="A2.F17.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1" xref="A2.F17.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.cmml"><mi id="A2.F17.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.2" xref="A2.F17.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.2.cmml">v</mi><mi id="A2.F17.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3" xref="A2.F17.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="A2.F17.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1b"><apply id="A2.F17.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.cmml" xref="A2.F17.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1"><csymbol cd="ambiguous" id="A2.F17.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.1.cmml" xref="A2.F17.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1">subscript</csymbol><ci id="A2.F17.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.2.cmml" xref="A2.F17.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.2">𝑣</ci><ci id="A2.F17.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.cmml" xref="A2.F17.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.F17.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1c">v_{i}</annotation></semantics></math></foreignObject></g><g fill="#B8E986" fill-opacity="1"><path d="M 51.89 -79.91 L 110 -79.91 L 110 -117.27 L 51.89 -117.27 Z"></path></g><path d="M 80.95 -98.59" style="fill:none"></path><g transform="matrix(1.0 0.0 0.0 1.0 56.7 -178.11)" fill="#000000" stroke="#000000"><g class="ltx_tikzmatrix" transform="matrix(1 0 0 -1 0 145.25)"><g class="ltx_tikzmatrix_row" transform="matrix(1 0 0 1 0 150.09)"><g class="ltx_tikzmatrix_col ltx_nopad_l ltx_nopad_r" transform="matrix(1 0 0 -1 0 0)"><foreignObject width="48.48" height="27.6" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible">
<span id="A2.F17.pic1.15.15.15.1.1.1.1.1" class="ltx_inline-block ltx_minipage ltx_align_middle" style="width:35.0pt;">
<span id="A2.F17.pic1.15.15.15.1.1.1.1.1.1" class="ltx_p ltx_align_center">Honest</span>
<span id="A2.F17.pic1.15.15.15.1.1.1.1.1.2" class="ltx_p ltx_align_center">client</span>
</span></foreignObject></g></g></g></g><path d="M 80.95 -119.34" style="fill:none"></path><g transform="matrix(1.0 0.0 0.0 1.0 76.01 -126.86)" fill="#000000" stroke="#000000"><foreignObject width="9.87" height="8.51" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible"><math id="A2.F17.pic1.2.2.2.2.2.2.2.2.2.2.2.2.2.1.1.1.1.1.1.1.1.1.m1.1" class="ltx_Math" alttext="v_{i}" display="inline"><semantics id="A2.F17.pic1.2.2.2.2.2.2.2.2.2.2.2.2.2.1.1.1.1.1.1.1.1.1.m1.1a"><msub id="A2.F17.pic1.2.2.2.2.2.2.2.2.2.2.2.2.2.1.1.1.1.1.1.1.1.1.m1.1.1" xref="A2.F17.pic1.2.2.2.2.2.2.2.2.2.2.2.2.2.1.1.1.1.1.1.1.1.1.m1.1.1.cmml"><mi id="A2.F17.pic1.2.2.2.2.2.2.2.2.2.2.2.2.2.1.1.1.1.1.1.1.1.1.m1.1.1.2" xref="A2.F17.pic1.2.2.2.2.2.2.2.2.2.2.2.2.2.1.1.1.1.1.1.1.1.1.m1.1.1.2.cmml">v</mi><mi id="A2.F17.pic1.2.2.2.2.2.2.2.2.2.2.2.2.2.1.1.1.1.1.1.1.1.1.m1.1.1.3" xref="A2.F17.pic1.2.2.2.2.2.2.2.2.2.2.2.2.2.1.1.1.1.1.1.1.1.1.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="A2.F17.pic1.2.2.2.2.2.2.2.2.2.2.2.2.2.1.1.1.1.1.1.1.1.1.m1.1b"><apply id="A2.F17.pic1.2.2.2.2.2.2.2.2.2.2.2.2.2.1.1.1.1.1.1.1.1.1.m1.1.1.cmml" xref="A2.F17.pic1.2.2.2.2.2.2.2.2.2.2.2.2.2.1.1.1.1.1.1.1.1.1.m1.1.1"><csymbol cd="ambiguous" id="A2.F17.pic1.2.2.2.2.2.2.2.2.2.2.2.2.2.1.1.1.1.1.1.1.1.1.m1.1.1.1.cmml" xref="A2.F17.pic1.2.2.2.2.2.2.2.2.2.2.2.2.2.1.1.1.1.1.1.1.1.1.m1.1.1">subscript</csymbol><ci id="A2.F17.pic1.2.2.2.2.2.2.2.2.2.2.2.2.2.1.1.1.1.1.1.1.1.1.m1.1.1.2.cmml" xref="A2.F17.pic1.2.2.2.2.2.2.2.2.2.2.2.2.2.1.1.1.1.1.1.1.1.1.m1.1.1.2">𝑣</ci><ci id="A2.F17.pic1.2.2.2.2.2.2.2.2.2.2.2.2.2.1.1.1.1.1.1.1.1.1.m1.1.1.3.cmml" xref="A2.F17.pic1.2.2.2.2.2.2.2.2.2.2.2.2.2.1.1.1.1.1.1.1.1.1.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.F17.pic1.2.2.2.2.2.2.2.2.2.2.2.2.2.1.1.1.1.1.1.1.1.1.m1.1c">v_{i}</annotation></semantics></math></foreignObject></g><path d="M 10.38 -181.61 L 88.21 -181.61 L 88.21 -202.37 L 10.38 -202.37 Z" style="fill:none"></path><path d="M 176.42 -191.99" style="fill:none"></path><g transform="matrix(1.0 0.0 0.0 1.0 107.24 -334.43)" fill="#000000" stroke="#000000"><g class="ltx_tikzmatrix" transform="matrix(1 0 0 -1 0 270.44)"><g class="ltx_tikzmatrix_row" transform="matrix(1 0 0 1 0 275.27)"><g class="ltx_tikzmatrix_col ltx_nopad_l ltx_nopad_r" transform="matrix(1 0 0 -1 0 0)"><foreignObject width="138.37" height="28.9" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible">
<span id="A2.F17.pic1.16.16.16.1.1.1.1.1" class="ltx_inline-block ltx_minipage ltx_align_middle" style="width:100.0pt;">
<span id="A2.F17.pic1.16.16.16.1.1.1.1.1.1" class="ltx_p ltx_align_center">Real parties in the</span>
<span id="A2.F17.pic1.16.16.16.1.1.1.1.1.2" class="ltx_p ltx_align_center">ideal world protocol</span>
</span></foreignObject></g></g></g></g><g stroke-dasharray="0.84pt,2.51pt" stroke-dashoffset="0.0pt"><path d="M 10.38 -243.88 L 88.21 -243.88" style="fill:none"></path></g><path d="M 176.42 -243.88" style="fill:none"></path><g transform="matrix(1.0 0.0 0.0 1.0 107.24 -420.91)" fill="#000000" stroke="#000000"><g class="ltx_tikzmatrix" transform="matrix(1 0 0 -1 0 339.62)"><g class="ltx_tikzmatrix_row" transform="matrix(1 0 0 1 0 344.46)"><g class="ltx_tikzmatrix_col ltx_nopad_l ltx_nopad_r" transform="matrix(1 0 0 -1 0 0)"><foreignObject width="138.37" height="28.9" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible">
<span id="A2.F17.pic1.17.17.17.1.1.1.1.1" class="ltx_inline-block ltx_minipage ltx_align_middle" style="width:100.0pt;">
<span id="A2.F17.pic1.17.17.17.1.1.1.1.1.1" class="ltx_p ltx_align_center">A party participates</span>
<span id="A2.F17.pic1.17.17.17.1.1.1.1.1.2" class="ltx_p ltx_align_center">in a protocol</span>
</span></foreignObject></g></g></g></g><path d="M 10.38 -285.39 L 88.21 -285.39" style="fill:none"></path><g stroke="#000000" fill="#000000" stroke-width="0.75pt"><path d="M 76.87 -288.8 C 81 -286.84 84.78 -285.7 88.21 -285.39 C 84.78 -285.08 81 -283.94 76.87 -281.97" style="fill:none"></path></g><path d="M 176.42 -285.39" style="fill:none"></path><g transform="matrix(1.0 0.0 0.0 1.0 126.57 -481.8)" fill="#000000" stroke="#000000"><g class="ltx_tikzmatrix" transform="matrix(1 0 0 -1 0 386.67)"><g class="ltx_tikzmatrix_row" transform="matrix(1 0 0 1 0 390.13)"><g class="ltx_tikzmatrix_col ltx_nopad_l ltx_nopad_r" transform="matrix(1 0 0 -1 0 0)"><text transform="matrix(1 0 0 -1 0 0)">Controls a party</text></g></g></g></g><g stroke-dasharray="4.5pt,4.5pt" stroke-dashoffset="0.0pt"><path d="M 10.38 -316.52 L 88.21 -316.52 L 88.21 -337.28 L 10.38 -337.28 Z" style="fill:none"></path></g><path d="M 176.42 -326.9" style="fill:none"></path><g transform="matrix(1.0 0.0 0.0 1.0 107.24 -559.98)" fill="#000000" stroke="#000000"><g class="ltx_tikzmatrix" transform="matrix(1 0 0 -1 0 451.005)"><g class="ltx_tikzmatrix_row" transform="matrix(1 0 0 1 0 455.86)"><g class="ltx_tikzmatrix_col ltx_nopad_l ltx_nopad_r" transform="matrix(1 0 0 -1 0 0)"><foreignObject width="138.37" height="30.29" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible">
<span id="A2.F17.pic1.18.18.18.1.1.1.1.1" class="ltx_inline-block ltx_minipage ltx_align_middle" style="width:100.0pt;">
<span id="A2.F17.pic1.18.18.18.1.1.1.1.1.1" class="ltx_p ltx_align_center">Simulated parties in</span>
<span id="A2.F17.pic1.18.18.18.1.1.1.1.1.2" class="ltx_p ltx_align_center">the real world protocol</span>
</span></foreignObject></g></g></g></g><path d="M 176.42 -368.41" style="fill:none"></path><g transform="matrix(1.0 0.0 0.0 1.0 108.52 -620.17)" fill="#000000" stroke="#000000"><g class="ltx_tikzmatrix" transform="matrix(1 0 0 -1 0 497.36)"><g class="ltx_tikzmatrix_row" transform="matrix(1 0 0 1 0 500.82)"><g class="ltx_tikzmatrix_col ltx_nopad_l ltx_nopad_r" transform="matrix(1 0 0 -1 0 0)"><text transform="matrix(1 0 0 -1 0 0)">Scope of the simulator</text></g></g></g></g><g fill="#9B9B9B" fill-opacity="1" stroke-dasharray="0.84pt,2.51pt" stroke-dashoffset="0.0pt"><path d="M 10.38 -358.03 L 88.21 -358.03 L 88.21 -378.79 L 10.38 -378.79 Z"></path></g></g></svg>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 17: </span>Illustration of the simulator</figcaption>
</figure>
<div id="A2.SS4.p1" class="ltx_para ltx_noindent">
<p id="A2.SS4.p1.2" class="ltx_p">We adopt the simulation-based proof technique to show that the ideal functionality and the real world protocol are computationally indistinguishable. Let <math id="A2.SS4.p1.1.m1.1" class="ltx_Math" alttext="\mathcal{C}_{c}\subset\mathcal{C}" display="inline"><semantics id="A2.SS4.p1.1.m1.1a"><mrow id="A2.SS4.p1.1.m1.1.1" xref="A2.SS4.p1.1.m1.1.1.cmml"><msub id="A2.SS4.p1.1.m1.1.1.2" xref="A2.SS4.p1.1.m1.1.1.2.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.SS4.p1.1.m1.1.1.2.2" xref="A2.SS4.p1.1.m1.1.1.2.2.cmml">𝒞</mi><mi id="A2.SS4.p1.1.m1.1.1.2.3" xref="A2.SS4.p1.1.m1.1.1.2.3.cmml">c</mi></msub><mo id="A2.SS4.p1.1.m1.1.1.1" xref="A2.SS4.p1.1.m1.1.1.1.cmml">⊂</mo><mi class="ltx_font_mathcaligraphic" id="A2.SS4.p1.1.m1.1.1.3" xref="A2.SS4.p1.1.m1.1.1.3.cmml">𝒞</mi></mrow><annotation-xml encoding="MathML-Content" id="A2.SS4.p1.1.m1.1b"><apply id="A2.SS4.p1.1.m1.1.1.cmml" xref="A2.SS4.p1.1.m1.1.1"><subset id="A2.SS4.p1.1.m1.1.1.1.cmml" xref="A2.SS4.p1.1.m1.1.1.1"></subset><apply id="A2.SS4.p1.1.m1.1.1.2.cmml" xref="A2.SS4.p1.1.m1.1.1.2"><csymbol cd="ambiguous" id="A2.SS4.p1.1.m1.1.1.2.1.cmml" xref="A2.SS4.p1.1.m1.1.1.2">subscript</csymbol><ci id="A2.SS4.p1.1.m1.1.1.2.2.cmml" xref="A2.SS4.p1.1.m1.1.1.2.2">𝒞</ci><ci id="A2.SS4.p1.1.m1.1.1.2.3.cmml" xref="A2.SS4.p1.1.m1.1.1.2.3">𝑐</ci></apply><ci id="A2.SS4.p1.1.m1.1.1.3.cmml" xref="A2.SS4.p1.1.m1.1.1.3">𝒞</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.SS4.p1.1.m1.1c">\mathcal{C}_{c}\subset\mathcal{C}</annotation></semantics></math> denotes the indices of all the clients corrupted by the adversary and <math id="A2.SS4.p1.2.m2.1" class="ltx_Math" alttext="\bar{\mathcal{C}_{c}}\subset\mathcal{C}" display="inline"><semantics id="A2.SS4.p1.2.m2.1a"><mrow id="A2.SS4.p1.2.m2.1.1" xref="A2.SS4.p1.2.m2.1.1.cmml"><mover accent="true" id="A2.SS4.p1.2.m2.1.1.2" xref="A2.SS4.p1.2.m2.1.1.2.cmml"><msub id="A2.SS4.p1.2.m2.1.1.2.2" xref="A2.SS4.p1.2.m2.1.1.2.2.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.SS4.p1.2.m2.1.1.2.2.2" xref="A2.SS4.p1.2.m2.1.1.2.2.2.cmml">𝒞</mi><mi id="A2.SS4.p1.2.m2.1.1.2.2.3" xref="A2.SS4.p1.2.m2.1.1.2.2.3.cmml">c</mi></msub><mo id="A2.SS4.p1.2.m2.1.1.2.1" xref="A2.SS4.p1.2.m2.1.1.2.1.cmml">¯</mo></mover><mo id="A2.SS4.p1.2.m2.1.1.1" xref="A2.SS4.p1.2.m2.1.1.1.cmml">⊂</mo><mi class="ltx_font_mathcaligraphic" id="A2.SS4.p1.2.m2.1.1.3" xref="A2.SS4.p1.2.m2.1.1.3.cmml">𝒞</mi></mrow><annotation-xml encoding="MathML-Content" id="A2.SS4.p1.2.m2.1b"><apply id="A2.SS4.p1.2.m2.1.1.cmml" xref="A2.SS4.p1.2.m2.1.1"><subset id="A2.SS4.p1.2.m2.1.1.1.cmml" xref="A2.SS4.p1.2.m2.1.1.1"></subset><apply id="A2.SS4.p1.2.m2.1.1.2.cmml" xref="A2.SS4.p1.2.m2.1.1.2"><ci id="A2.SS4.p1.2.m2.1.1.2.1.cmml" xref="A2.SS4.p1.2.m2.1.1.2.1">¯</ci><apply id="A2.SS4.p1.2.m2.1.1.2.2.cmml" xref="A2.SS4.p1.2.m2.1.1.2.2"><csymbol cd="ambiguous" id="A2.SS4.p1.2.m2.1.1.2.2.1.cmml" xref="A2.SS4.p1.2.m2.1.1.2.2">subscript</csymbol><ci id="A2.SS4.p1.2.m2.1.1.2.2.2.cmml" xref="A2.SS4.p1.2.m2.1.1.2.2.2">𝒞</ci><ci id="A2.SS4.p1.2.m2.1.1.2.2.3.cmml" xref="A2.SS4.p1.2.m2.1.1.2.2.3">𝑐</ci></apply></apply><ci id="A2.SS4.p1.2.m2.1.1.3.cmml" xref="A2.SS4.p1.2.m2.1.1.3">𝒞</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.SS4.p1.2.m2.1c">\bar{\mathcal{C}_{c}}\subset\mathcal{C}</annotation></semantics></math> denotes the indices of the honest clients. Our strategy is to construct a simulator with the following properties
(<a href="#A2.F17" title="In B.4 Security Proof ‣ Appendix B Protocol Design and Security Proof" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">17</span></a>):</p>
</div>
<div id="A2.SS4.p2" class="ltx_para ltx_noindent">
<ol id="A2.I4" class="ltx_enumerate">
<li id="A2.I4.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span> 
<div id="A2.I4.i1.p1" class="ltx_para">
<p id="A2.I4.i1.p1.1" class="ltx_p">The simulator runs the adversary as a subroutine.</p>
</div>
</li>
<li id="A2.I4.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span> 
<div id="A2.I4.i2.p1" class="ltx_para">
<p id="A2.I4.i2.p1.4" class="ltx_p">The simulator executes the real world protocol with the adversary. The simulator plays the role of the trusted party and client <math id="A2.I4.i2.p1.1.m1.1" class="ltx_Math" alttext="i" display="inline"><semantics id="A2.I4.i2.p1.1.m1.1a"><mi id="A2.I4.i2.p1.1.m1.1.1" xref="A2.I4.i2.p1.1.m1.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="A2.I4.i2.p1.1.m1.1b"><ci id="A2.I4.i2.p1.1.m1.1.1.cmml" xref="A2.I4.i2.p1.1.m1.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.I4.i2.p1.1.m1.1c">i</annotation></semantics></math> for all <math id="A2.I4.i2.p1.2.m2.1" class="ltx_Math" alttext="i\in\bar{\mathcal{C}_{c}}" display="inline"><semantics id="A2.I4.i2.p1.2.m2.1a"><mrow id="A2.I4.i2.p1.2.m2.1.1" xref="A2.I4.i2.p1.2.m2.1.1.cmml"><mi id="A2.I4.i2.p1.2.m2.1.1.2" xref="A2.I4.i2.p1.2.m2.1.1.2.cmml">i</mi><mo id="A2.I4.i2.p1.2.m2.1.1.1" xref="A2.I4.i2.p1.2.m2.1.1.1.cmml">∈</mo><mover accent="true" id="A2.I4.i2.p1.2.m2.1.1.3" xref="A2.I4.i2.p1.2.m2.1.1.3.cmml"><msub id="A2.I4.i2.p1.2.m2.1.1.3.2" xref="A2.I4.i2.p1.2.m2.1.1.3.2.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.I4.i2.p1.2.m2.1.1.3.2.2" xref="A2.I4.i2.p1.2.m2.1.1.3.2.2.cmml">𝒞</mi><mi id="A2.I4.i2.p1.2.m2.1.1.3.2.3" xref="A2.I4.i2.p1.2.m2.1.1.3.2.3.cmml">c</mi></msub><mo id="A2.I4.i2.p1.2.m2.1.1.3.1" xref="A2.I4.i2.p1.2.m2.1.1.3.1.cmml">¯</mo></mover></mrow><annotation-xml encoding="MathML-Content" id="A2.I4.i2.p1.2.m2.1b"><apply id="A2.I4.i2.p1.2.m2.1.1.cmml" xref="A2.I4.i2.p1.2.m2.1.1"><in id="A2.I4.i2.p1.2.m2.1.1.1.cmml" xref="A2.I4.i2.p1.2.m2.1.1.1"></in><ci id="A2.I4.i2.p1.2.m2.1.1.2.cmml" xref="A2.I4.i2.p1.2.m2.1.1.2">𝑖</ci><apply id="A2.I4.i2.p1.2.m2.1.1.3.cmml" xref="A2.I4.i2.p1.2.m2.1.1.3"><ci id="A2.I4.i2.p1.2.m2.1.1.3.1.cmml" xref="A2.I4.i2.p1.2.m2.1.1.3.1">¯</ci><apply id="A2.I4.i2.p1.2.m2.1.1.3.2.cmml" xref="A2.I4.i2.p1.2.m2.1.1.3.2"><csymbol cd="ambiguous" id="A2.I4.i2.p1.2.m2.1.1.3.2.1.cmml" xref="A2.I4.i2.p1.2.m2.1.1.3.2">subscript</csymbol><ci id="A2.I4.i2.p1.2.m2.1.1.3.2.2.cmml" xref="A2.I4.i2.p1.2.m2.1.1.3.2.2">𝒞</ci><ci id="A2.I4.i2.p1.2.m2.1.1.3.2.3.cmml" xref="A2.I4.i2.p1.2.m2.1.1.3.2.3">𝑐</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I4.i2.p1.2.m2.1c">i\in\bar{\mathcal{C}_{c}}</annotation></semantics></math>. The adversary plays the role of the server and corrupted clients <math id="A2.I4.i2.p1.3.m3.1" class="ltx_Math" alttext="i" display="inline"><semantics id="A2.I4.i2.p1.3.m3.1a"><mi id="A2.I4.i2.p1.3.m3.1.1" xref="A2.I4.i2.p1.3.m3.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="A2.I4.i2.p1.3.m3.1b"><ci id="A2.I4.i2.p1.3.m3.1.1.cmml" xref="A2.I4.i2.p1.3.m3.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.I4.i2.p1.3.m3.1c">i</annotation></semantics></math> for all <math id="A2.I4.i2.p1.4.m4.1" class="ltx_Math" alttext="i\in\mathcal{C}_{c}" display="inline"><semantics id="A2.I4.i2.p1.4.m4.1a"><mrow id="A2.I4.i2.p1.4.m4.1.1" xref="A2.I4.i2.p1.4.m4.1.1.cmml"><mi id="A2.I4.i2.p1.4.m4.1.1.2" xref="A2.I4.i2.p1.4.m4.1.1.2.cmml">i</mi><mo id="A2.I4.i2.p1.4.m4.1.1.1" xref="A2.I4.i2.p1.4.m4.1.1.1.cmml">∈</mo><msub id="A2.I4.i2.p1.4.m4.1.1.3" xref="A2.I4.i2.p1.4.m4.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.I4.i2.p1.4.m4.1.1.3.2" xref="A2.I4.i2.p1.4.m4.1.1.3.2.cmml">𝒞</mi><mi id="A2.I4.i2.p1.4.m4.1.1.3.3" xref="A2.I4.i2.p1.4.m4.1.1.3.3.cmml">c</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="A2.I4.i2.p1.4.m4.1b"><apply id="A2.I4.i2.p1.4.m4.1.1.cmml" xref="A2.I4.i2.p1.4.m4.1.1"><in id="A2.I4.i2.p1.4.m4.1.1.1.cmml" xref="A2.I4.i2.p1.4.m4.1.1.1"></in><ci id="A2.I4.i2.p1.4.m4.1.1.2.cmml" xref="A2.I4.i2.p1.4.m4.1.1.2">𝑖</ci><apply id="A2.I4.i2.p1.4.m4.1.1.3.cmml" xref="A2.I4.i2.p1.4.m4.1.1.3"><csymbol cd="ambiguous" id="A2.I4.i2.p1.4.m4.1.1.3.1.cmml" xref="A2.I4.i2.p1.4.m4.1.1.3">subscript</csymbol><ci id="A2.I4.i2.p1.4.m4.1.1.3.2.cmml" xref="A2.I4.i2.p1.4.m4.1.1.3.2">𝒞</ci><ci id="A2.I4.i2.p1.4.m4.1.1.3.3.cmml" xref="A2.I4.i2.p1.4.m4.1.1.3.3">𝑐</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I4.i2.p1.4.m4.1c">i\in\mathcal{C}_{c}</annotation></semantics></math>.</p>
</div>
</li>
<li id="A2.I4.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">3.</span> 
<div id="A2.I4.i3.p1" class="ltx_para ltx_noindent">
<p id="A2.I4.i3.p1.1" class="ltx_p">The simulator executes the ideal functionality with the ideal functionality and honest clients. The simulator will play the role of the server and all the clients in <math id="A2.I4.i3.p1.1.m1.1" class="ltx_Math" alttext="\mathcal{C}_{c}" display="inline"><semantics id="A2.I4.i3.p1.1.m1.1a"><msub id="A2.I4.i3.p1.1.m1.1.1" xref="A2.I4.i3.p1.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.I4.i3.p1.1.m1.1.1.2" xref="A2.I4.i3.p1.1.m1.1.1.2.cmml">𝒞</mi><mi id="A2.I4.i3.p1.1.m1.1.1.3" xref="A2.I4.i3.p1.1.m1.1.1.3.cmml">c</mi></msub><annotation-xml encoding="MathML-Content" id="A2.I4.i3.p1.1.m1.1b"><apply id="A2.I4.i3.p1.1.m1.1.1.cmml" xref="A2.I4.i3.p1.1.m1.1.1"><csymbol cd="ambiguous" id="A2.I4.i3.p1.1.m1.1.1.1.cmml" xref="A2.I4.i3.p1.1.m1.1.1">subscript</csymbol><ci id="A2.I4.i3.p1.1.m1.1.1.2.cmml" xref="A2.I4.i3.p1.1.m1.1.1.2">𝒞</ci><ci id="A2.I4.i3.p1.1.m1.1.1.3.cmml" xref="A2.I4.i3.p1.1.m1.1.1.3">𝑐</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I4.i3.p1.1.m1.1c">\mathcal{C}_{c}</annotation></semantics></math>.</p>
</div>
</li>
</ol>
</div>
<div id="A2.SS4.p3" class="ltx_para ltx_noindent">
<p id="A2.SS4.p3.1" class="ltx_p">We prove that the joint view of the adversary as the simulator’s subroutine is computationally indistinguishable from that of a real world execution. The detailed description of the simulator is in <a href="#A2.F18" title="In B.4 Security Proof ‣ Appendix B Protocol Design and Security Proof" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">18</span></a>.</p>
</div>
<figure id="A2.F18" class="ltx_figure">
<p id="A2.F18.2" class="ltx_p ltx_align_center">
<span id="A2.F18.2.2.2" class="ltx_inline-block ltx_minipage ltx_align_middle ltx_framed ltx_framed_rectangle" style="width:411.9pt;">
<span id="A2.F18.2.2.2.2" class="ltx_p">When interacting with the adversary, the simulator follows the real world protocol as the trusted party and client <math id="A2.F18.1.1.1.1.m1.1" class="ltx_Math" alttext="i" display="inline"><semantics id="A2.F18.1.1.1.1.m1.1a"><mi id="A2.F18.1.1.1.1.m1.1.1" xref="A2.F18.1.1.1.1.m1.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="A2.F18.1.1.1.1.m1.1b"><ci id="A2.F18.1.1.1.1.m1.1.1.cmml" xref="A2.F18.1.1.1.1.m1.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.F18.1.1.1.1.m1.1c">i</annotation></semantics></math> for all <math id="A2.F18.2.2.2.2.m2.1" class="ltx_Math" alttext="i\in\bar{\mathcal{C}_{c}}" display="inline"><semantics id="A2.F18.2.2.2.2.m2.1a"><mrow id="A2.F18.2.2.2.2.m2.1.1" xref="A2.F18.2.2.2.2.m2.1.1.cmml"><mi id="A2.F18.2.2.2.2.m2.1.1.2" xref="A2.F18.2.2.2.2.m2.1.1.2.cmml">i</mi><mo id="A2.F18.2.2.2.2.m2.1.1.1" xref="A2.F18.2.2.2.2.m2.1.1.1.cmml">∈</mo><mover accent="true" id="A2.F18.2.2.2.2.m2.1.1.3" xref="A2.F18.2.2.2.2.m2.1.1.3.cmml"><msub id="A2.F18.2.2.2.2.m2.1.1.3.2" xref="A2.F18.2.2.2.2.m2.1.1.3.2.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.F18.2.2.2.2.m2.1.1.3.2.2" xref="A2.F18.2.2.2.2.m2.1.1.3.2.2.cmml">𝒞</mi><mi id="A2.F18.2.2.2.2.m2.1.1.3.2.3" xref="A2.F18.2.2.2.2.m2.1.1.3.2.3.cmml">c</mi></msub><mo id="A2.F18.2.2.2.2.m2.1.1.3.1" xref="A2.F18.2.2.2.2.m2.1.1.3.1.cmml">¯</mo></mover></mrow><annotation-xml encoding="MathML-Content" id="A2.F18.2.2.2.2.m2.1b"><apply id="A2.F18.2.2.2.2.m2.1.1.cmml" xref="A2.F18.2.2.2.2.m2.1.1"><in id="A2.F18.2.2.2.2.m2.1.1.1.cmml" xref="A2.F18.2.2.2.2.m2.1.1.1"></in><ci id="A2.F18.2.2.2.2.m2.1.1.2.cmml" xref="A2.F18.2.2.2.2.m2.1.1.2">𝑖</ci><apply id="A2.F18.2.2.2.2.m2.1.1.3.cmml" xref="A2.F18.2.2.2.2.m2.1.1.3"><ci id="A2.F18.2.2.2.2.m2.1.1.3.1.cmml" xref="A2.F18.2.2.2.2.m2.1.1.3.1">¯</ci><apply id="A2.F18.2.2.2.2.m2.1.1.3.2.cmml" xref="A2.F18.2.2.2.2.m2.1.1.3.2"><csymbol cd="ambiguous" id="A2.F18.2.2.2.2.m2.1.1.3.2.1.cmml" xref="A2.F18.2.2.2.2.m2.1.1.3.2">subscript</csymbol><ci id="A2.F18.2.2.2.2.m2.1.1.3.2.2.cmml" xref="A2.F18.2.2.2.2.m2.1.1.3.2.2">𝒞</ci><ci id="A2.F18.2.2.2.2.m2.1.1.3.2.3.cmml" xref="A2.F18.2.2.2.2.m2.1.1.3.2.3">𝑐</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.F18.2.2.2.2.m2.1c">i\in\bar{\mathcal{C}_{c}}</annotation></semantics></math>, excepts:</span>
<span id="A2.I5" class="ltx_enumerate">
<span id="A2.I5.i1" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">1.</span> 
<span id="A2.I5.i1.p1" class="ltx_para">
<span id="A2.I5.i1.p1.4" class="ltx_p">In <a href="#A2.I3.i3" title="In Figure 16 ‣ B.3 Protocol Detail ‣ Appendix B Protocol Design and Security Proof" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Item</span> <span class="ltx_text ltx_ref_tag">3</span></a>, for <math id="A2.I5.i1.p1.1.m1.1" class="ltx_Math" alttext="i\in\bar{\mathcal{C}_{c}}" display="inline"><semantics id="A2.I5.i1.p1.1.m1.1a"><mrow id="A2.I5.i1.p1.1.m1.1.1" xref="A2.I5.i1.p1.1.m1.1.1.cmml"><mi id="A2.I5.i1.p1.1.m1.1.1.2" xref="A2.I5.i1.p1.1.m1.1.1.2.cmml">i</mi><mo id="A2.I5.i1.p1.1.m1.1.1.1" xref="A2.I5.i1.p1.1.m1.1.1.1.cmml">∈</mo><mover accent="true" id="A2.I5.i1.p1.1.m1.1.1.3" xref="A2.I5.i1.p1.1.m1.1.1.3.cmml"><msub id="A2.I5.i1.p1.1.m1.1.1.3.2" xref="A2.I5.i1.p1.1.m1.1.1.3.2.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.I5.i1.p1.1.m1.1.1.3.2.2" xref="A2.I5.i1.p1.1.m1.1.1.3.2.2.cmml">𝒞</mi><mi id="A2.I5.i1.p1.1.m1.1.1.3.2.3" xref="A2.I5.i1.p1.1.m1.1.1.3.2.3.cmml">c</mi></msub><mo id="A2.I5.i1.p1.1.m1.1.1.3.1" xref="A2.I5.i1.p1.1.m1.1.1.3.1.cmml">¯</mo></mover></mrow><annotation-xml encoding="MathML-Content" id="A2.I5.i1.p1.1.m1.1b"><apply id="A2.I5.i1.p1.1.m1.1.1.cmml" xref="A2.I5.i1.p1.1.m1.1.1"><in id="A2.I5.i1.p1.1.m1.1.1.1.cmml" xref="A2.I5.i1.p1.1.m1.1.1.1"></in><ci id="A2.I5.i1.p1.1.m1.1.1.2.cmml" xref="A2.I5.i1.p1.1.m1.1.1.2">𝑖</ci><apply id="A2.I5.i1.p1.1.m1.1.1.3.cmml" xref="A2.I5.i1.p1.1.m1.1.1.3"><ci id="A2.I5.i1.p1.1.m1.1.1.3.1.cmml" xref="A2.I5.i1.p1.1.m1.1.1.3.1">¯</ci><apply id="A2.I5.i1.p1.1.m1.1.1.3.2.cmml" xref="A2.I5.i1.p1.1.m1.1.1.3.2"><csymbol cd="ambiguous" id="A2.I5.i1.p1.1.m1.1.1.3.2.1.cmml" xref="A2.I5.i1.p1.1.m1.1.1.3.2">subscript</csymbol><ci id="A2.I5.i1.p1.1.m1.1.1.3.2.2.cmml" xref="A2.I5.i1.p1.1.m1.1.1.3.2.2">𝒞</ci><ci id="A2.I5.i1.p1.1.m1.1.1.3.2.3.cmml" xref="A2.I5.i1.p1.1.m1.1.1.3.2.3">𝑐</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I5.i1.p1.1.m1.1c">i\in\bar{\mathcal{C}_{c}}</annotation></semantics></math>, the simulator sends a random vector <math id="A2.I5.i1.p1.2.m2.1" class="ltx_Math" alttext="\tilde{m}_{i}\in G^{\ell}" display="inline"><semantics id="A2.I5.i1.p1.2.m2.1a"><mrow id="A2.I5.i1.p1.2.m2.1.1" xref="A2.I5.i1.p1.2.m2.1.1.cmml"><msub id="A2.I5.i1.p1.2.m2.1.1.2" xref="A2.I5.i1.p1.2.m2.1.1.2.cmml"><mover accent="true" id="A2.I5.i1.p1.2.m2.1.1.2.2" xref="A2.I5.i1.p1.2.m2.1.1.2.2.cmml"><mi id="A2.I5.i1.p1.2.m2.1.1.2.2.2" xref="A2.I5.i1.p1.2.m2.1.1.2.2.2.cmml">m</mi><mo id="A2.I5.i1.p1.2.m2.1.1.2.2.1" xref="A2.I5.i1.p1.2.m2.1.1.2.2.1.cmml">~</mo></mover><mi id="A2.I5.i1.p1.2.m2.1.1.2.3" xref="A2.I5.i1.p1.2.m2.1.1.2.3.cmml">i</mi></msub><mo id="A2.I5.i1.p1.2.m2.1.1.1" xref="A2.I5.i1.p1.2.m2.1.1.1.cmml">∈</mo><msup id="A2.I5.i1.p1.2.m2.1.1.3" xref="A2.I5.i1.p1.2.m2.1.1.3.cmml"><mi id="A2.I5.i1.p1.2.m2.1.1.3.2" xref="A2.I5.i1.p1.2.m2.1.1.3.2.cmml">G</mi><mi mathvariant="normal" id="A2.I5.i1.p1.2.m2.1.1.3.3" xref="A2.I5.i1.p1.2.m2.1.1.3.3.cmml">ℓ</mi></msup></mrow><annotation-xml encoding="MathML-Content" id="A2.I5.i1.p1.2.m2.1b"><apply id="A2.I5.i1.p1.2.m2.1.1.cmml" xref="A2.I5.i1.p1.2.m2.1.1"><in id="A2.I5.i1.p1.2.m2.1.1.1.cmml" xref="A2.I5.i1.p1.2.m2.1.1.1"></in><apply id="A2.I5.i1.p1.2.m2.1.1.2.cmml" xref="A2.I5.i1.p1.2.m2.1.1.2"><csymbol cd="ambiguous" id="A2.I5.i1.p1.2.m2.1.1.2.1.cmml" xref="A2.I5.i1.p1.2.m2.1.1.2">subscript</csymbol><apply id="A2.I5.i1.p1.2.m2.1.1.2.2.cmml" xref="A2.I5.i1.p1.2.m2.1.1.2.2"><ci id="A2.I5.i1.p1.2.m2.1.1.2.2.1.cmml" xref="A2.I5.i1.p1.2.m2.1.1.2.2.1">~</ci><ci id="A2.I5.i1.p1.2.m2.1.1.2.2.2.cmml" xref="A2.I5.i1.p1.2.m2.1.1.2.2.2">𝑚</ci></apply><ci id="A2.I5.i1.p1.2.m2.1.1.2.3.cmml" xref="A2.I5.i1.p1.2.m2.1.1.2.3">𝑖</ci></apply><apply id="A2.I5.i1.p1.2.m2.1.1.3.cmml" xref="A2.I5.i1.p1.2.m2.1.1.3"><csymbol cd="ambiguous" id="A2.I5.i1.p1.2.m2.1.1.3.1.cmml" xref="A2.I5.i1.p1.2.m2.1.1.3">superscript</csymbol><ci id="A2.I5.i1.p1.2.m2.1.1.3.2.cmml" xref="A2.I5.i1.p1.2.m2.1.1.3.2">𝐺</ci><ci id="A2.I5.i1.p1.2.m2.1.1.3.3.cmml" xref="A2.I5.i1.p1.2.m2.1.1.3.3">ℓ</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I5.i1.p1.2.m2.1c">\tilde{m}_{i}\in G^{\ell}</annotation></semantics></math> as <math id="A2.I5.i1.p1.3.m3.1" class="ltx_Math" alttext="v_{i}+m_{i}" display="inline"><semantics id="A2.I5.i1.p1.3.m3.1a"><mrow id="A2.I5.i1.p1.3.m3.1.1" xref="A2.I5.i1.p1.3.m3.1.1.cmml"><msub id="A2.I5.i1.p1.3.m3.1.1.2" xref="A2.I5.i1.p1.3.m3.1.1.2.cmml"><mi id="A2.I5.i1.p1.3.m3.1.1.2.2" xref="A2.I5.i1.p1.3.m3.1.1.2.2.cmml">v</mi><mi id="A2.I5.i1.p1.3.m3.1.1.2.3" xref="A2.I5.i1.p1.3.m3.1.1.2.3.cmml">i</mi></msub><mo id="A2.I5.i1.p1.3.m3.1.1.1" xref="A2.I5.i1.p1.3.m3.1.1.1.cmml">+</mo><msub id="A2.I5.i1.p1.3.m3.1.1.3" xref="A2.I5.i1.p1.3.m3.1.1.3.cmml"><mi id="A2.I5.i1.p1.3.m3.1.1.3.2" xref="A2.I5.i1.p1.3.m3.1.1.3.2.cmml">m</mi><mi id="A2.I5.i1.p1.3.m3.1.1.3.3" xref="A2.I5.i1.p1.3.m3.1.1.3.3.cmml">i</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="A2.I5.i1.p1.3.m3.1b"><apply id="A2.I5.i1.p1.3.m3.1.1.cmml" xref="A2.I5.i1.p1.3.m3.1.1"><plus id="A2.I5.i1.p1.3.m3.1.1.1.cmml" xref="A2.I5.i1.p1.3.m3.1.1.1"></plus><apply id="A2.I5.i1.p1.3.m3.1.1.2.cmml" xref="A2.I5.i1.p1.3.m3.1.1.2"><csymbol cd="ambiguous" id="A2.I5.i1.p1.3.m3.1.1.2.1.cmml" xref="A2.I5.i1.p1.3.m3.1.1.2">subscript</csymbol><ci id="A2.I5.i1.p1.3.m3.1.1.2.2.cmml" xref="A2.I5.i1.p1.3.m3.1.1.2.2">𝑣</ci><ci id="A2.I5.i1.p1.3.m3.1.1.2.3.cmml" xref="A2.I5.i1.p1.3.m3.1.1.2.3">𝑖</ci></apply><apply id="A2.I5.i1.p1.3.m3.1.1.3.cmml" xref="A2.I5.i1.p1.3.m3.1.1.3"><csymbol cd="ambiguous" id="A2.I5.i1.p1.3.m3.1.1.3.1.cmml" xref="A2.I5.i1.p1.3.m3.1.1.3">subscript</csymbol><ci id="A2.I5.i1.p1.3.m3.1.1.3.2.cmml" xref="A2.I5.i1.p1.3.m3.1.1.3.2">𝑚</ci><ci id="A2.I5.i1.p1.3.m3.1.1.3.3.cmml" xref="A2.I5.i1.p1.3.m3.1.1.3.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I5.i1.p1.3.m3.1c">v_{i}+m_{i}</annotation></semantics></math> and a random string as the DH key exchange response on behalf of the honest client <math id="A2.I5.i1.p1.4.m4.1" class="ltx_Math" alttext="i" display="inline"><semantics id="A2.I5.i1.p1.4.m4.1a"><mi id="A2.I5.i1.p1.4.m4.1.1" xref="A2.I5.i1.p1.4.m4.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="A2.I5.i1.p1.4.m4.1b"><ci id="A2.I5.i1.p1.4.m4.1.1.cmml" xref="A2.I5.i1.p1.4.m4.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.I5.i1.p1.4.m4.1c">i</annotation></semantics></math>.</span>
</span></span>
<span id="A2.I5.i2" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">2.</span> 
<span id="A2.I5.i2.p1" class="ltx_para ltx_noindent">
<span id="A2.I5.i2.p1.1" class="ltx_p">In <a href="#A2.I3.i6" title="In Figure 16 ‣ B.3 Protocol Detail ‣ Appendix B Protocol Design and Security Proof" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Item</span> <span class="ltx_text ltx_ref_tag">6</span></a>, upon receiving a DH key exchange response with successfully decrypting the encrypted seed from client <math id="A2.I5.i2.p1.1.m1.1" class="ltx_Math" alttext="i" display="inline"><semantics id="A2.I5.i2.p1.1.m1.1a"><mi id="A2.I5.i2.p1.1.m1.1.1" xref="A2.I5.i2.p1.1.m1.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="A2.I5.i2.p1.1.m1.1b"><ci id="A2.I5.i2.p1.1.m1.1.1.cmml" xref="A2.I5.i2.p1.1.m1.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.I5.i2.p1.1.m1.1c">i</annotation></semantics></math>:</span>
<span id="A2.I5.i2.I1" class="ltx_itemize">
<span id="A2.I5.i2.I1.i1" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">•</span> 
<span id="A2.I5.i2.I1.i1.p1" class="ltx_para">
<span id="A2.I5.i2.I1.i1.p1.1" class="ltx_p">if <math id="A2.I5.i2.I1.i1.p1.1.m1.1" class="ltx_Math" alttext="i\in\mathcal{C}_{c}" display="inline"><semantics id="A2.I5.i2.I1.i1.p1.1.m1.1a"><mrow id="A2.I5.i2.I1.i1.p1.1.m1.1.1" xref="A2.I5.i2.I1.i1.p1.1.m1.1.1.cmml"><mi id="A2.I5.i2.I1.i1.p1.1.m1.1.1.2" xref="A2.I5.i2.I1.i1.p1.1.m1.1.1.2.cmml">i</mi><mo id="A2.I5.i2.I1.i1.p1.1.m1.1.1.1" xref="A2.I5.i2.I1.i1.p1.1.m1.1.1.1.cmml">∈</mo><msub id="A2.I5.i2.I1.i1.p1.1.m1.1.1.3" xref="A2.I5.i2.I1.i1.p1.1.m1.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.I5.i2.I1.i1.p1.1.m1.1.1.3.2" xref="A2.I5.i2.I1.i1.p1.1.m1.1.1.3.2.cmml">𝒞</mi><mi id="A2.I5.i2.I1.i1.p1.1.m1.1.1.3.3" xref="A2.I5.i2.I1.i1.p1.1.m1.1.1.3.3.cmml">c</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="A2.I5.i2.I1.i1.p1.1.m1.1b"><apply id="A2.I5.i2.I1.i1.p1.1.m1.1.1.cmml" xref="A2.I5.i2.I1.i1.p1.1.m1.1.1"><in id="A2.I5.i2.I1.i1.p1.1.m1.1.1.1.cmml" xref="A2.I5.i2.I1.i1.p1.1.m1.1.1.1"></in><ci id="A2.I5.i2.I1.i1.p1.1.m1.1.1.2.cmml" xref="A2.I5.i2.I1.i1.p1.1.m1.1.1.2">𝑖</ci><apply id="A2.I5.i2.I1.i1.p1.1.m1.1.1.3.cmml" xref="A2.I5.i2.I1.i1.p1.1.m1.1.1.3"><csymbol cd="ambiguous" id="A2.I5.i2.I1.i1.p1.1.m1.1.1.3.1.cmml" xref="A2.I5.i2.I1.i1.p1.1.m1.1.1.3">subscript</csymbol><ci id="A2.I5.i2.I1.i1.p1.1.m1.1.1.3.2.cmml" xref="A2.I5.i2.I1.i1.p1.1.m1.1.1.3.2">𝒞</ci><ci id="A2.I5.i2.I1.i1.p1.1.m1.1.1.3.3.cmml" xref="A2.I5.i2.I1.i1.p1.1.m1.1.1.3.3">𝑐</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I5.i2.I1.i1.p1.1.m1.1c">i\in\mathcal{C}_{c}</annotation></semantics></math>, the simulator follows the protocol;</span>
</span></span>
<span id="A2.I5.i2.I1.i2" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">•</span> 
<span id="A2.I5.i2.I1.i2.p1" class="ltx_para ltx_noindent">
<span id="A2.I5.i2.I1.i2.p1.3" class="ltx_p">if <math id="A2.I5.i2.I1.i2.p1.1.m1.1" class="ltx_Math" alttext="i\in\bar{\mathcal{C}_{c}}" display="inline"><semantics id="A2.I5.i2.I1.i2.p1.1.m1.1a"><mrow id="A2.I5.i2.I1.i2.p1.1.m1.1.1" xref="A2.I5.i2.I1.i2.p1.1.m1.1.1.cmml"><mi id="A2.I5.i2.I1.i2.p1.1.m1.1.1.2" xref="A2.I5.i2.I1.i2.p1.1.m1.1.1.2.cmml">i</mi><mo id="A2.I5.i2.I1.i2.p1.1.m1.1.1.1" xref="A2.I5.i2.I1.i2.p1.1.m1.1.1.1.cmml">∈</mo><mover accent="true" id="A2.I5.i2.I1.i2.p1.1.m1.1.1.3" xref="A2.I5.i2.I1.i2.p1.1.m1.1.1.3.cmml"><msub id="A2.I5.i2.I1.i2.p1.1.m1.1.1.3.2" xref="A2.I5.i2.I1.i2.p1.1.m1.1.1.3.2.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.I5.i2.I1.i2.p1.1.m1.1.1.3.2.2" xref="A2.I5.i2.I1.i2.p1.1.m1.1.1.3.2.2.cmml">𝒞</mi><mi id="A2.I5.i2.I1.i2.p1.1.m1.1.1.3.2.3" xref="A2.I5.i2.I1.i2.p1.1.m1.1.1.3.2.3.cmml">c</mi></msub><mo id="A2.I5.i2.I1.i2.p1.1.m1.1.1.3.1" xref="A2.I5.i2.I1.i2.p1.1.m1.1.1.3.1.cmml">¯</mo></mover></mrow><annotation-xml encoding="MathML-Content" id="A2.I5.i2.I1.i2.p1.1.m1.1b"><apply id="A2.I5.i2.I1.i2.p1.1.m1.1.1.cmml" xref="A2.I5.i2.I1.i2.p1.1.m1.1.1"><in id="A2.I5.i2.I1.i2.p1.1.m1.1.1.1.cmml" xref="A2.I5.i2.I1.i2.p1.1.m1.1.1.1"></in><ci id="A2.I5.i2.I1.i2.p1.1.m1.1.1.2.cmml" xref="A2.I5.i2.I1.i2.p1.1.m1.1.1.2">𝑖</ci><apply id="A2.I5.i2.I1.i2.p1.1.m1.1.1.3.cmml" xref="A2.I5.i2.I1.i2.p1.1.m1.1.1.3"><ci id="A2.I5.i2.I1.i2.p1.1.m1.1.1.3.1.cmml" xref="A2.I5.i2.I1.i2.p1.1.m1.1.1.3.1">¯</ci><apply id="A2.I5.i2.I1.i2.p1.1.m1.1.1.3.2.cmml" xref="A2.I5.i2.I1.i2.p1.1.m1.1.1.3.2"><csymbol cd="ambiguous" id="A2.I5.i2.I1.i2.p1.1.m1.1.1.3.2.1.cmml" xref="A2.I5.i2.I1.i2.p1.1.m1.1.1.3.2">subscript</csymbol><ci id="A2.I5.i2.I1.i2.p1.1.m1.1.1.3.2.2.cmml" xref="A2.I5.i2.I1.i2.p1.1.m1.1.1.3.2.2">𝒞</ci><ci id="A2.I5.i2.I1.i2.p1.1.m1.1.1.3.2.3.cmml" xref="A2.I5.i2.I1.i2.p1.1.m1.1.1.3.2.3">𝑐</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I5.i2.I1.i2.p1.1.m1.1c">i\in\bar{\mathcal{C}_{c}}</annotation></semantics></math>, the simulator adds <math id="A2.I5.i2.I1.i2.p1.2.m2.1" class="ltx_Math" alttext="i" display="inline"><semantics id="A2.I5.i2.I1.i2.p1.2.m2.1a"><mi id="A2.I5.i2.I1.i2.p1.2.m2.1.1" xref="A2.I5.i2.I1.i2.p1.2.m2.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="A2.I5.i2.I1.i2.p1.2.m2.1b"><ci id="A2.I5.i2.I1.i2.p1.2.m2.1.1.cmml" xref="A2.I5.i2.I1.i2.p1.2.m2.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.I5.i2.I1.i2.p1.2.m2.1c">i</annotation></semantics></math> to <math id="A2.I5.i2.I1.i2.p1.3.m3.1" class="ltx_Math" alttext="\mathcal{C}_{a}" display="inline"><semantics id="A2.I5.i2.I1.i2.p1.3.m3.1a"><msub id="A2.I5.i2.I1.i2.p1.3.m3.1.1" xref="A2.I5.i2.I1.i2.p1.3.m3.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.I5.i2.I1.i2.p1.3.m3.1.1.2" xref="A2.I5.i2.I1.i2.p1.3.m3.1.1.2.cmml">𝒞</mi><mi id="A2.I5.i2.I1.i2.p1.3.m3.1.1.3" xref="A2.I5.i2.I1.i2.p1.3.m3.1.1.3.cmml">a</mi></msub><annotation-xml encoding="MathML-Content" id="A2.I5.i2.I1.i2.p1.3.m3.1b"><apply id="A2.I5.i2.I1.i2.p1.3.m3.1.1.cmml" xref="A2.I5.i2.I1.i2.p1.3.m3.1.1"><csymbol cd="ambiguous" id="A2.I5.i2.I1.i2.p1.3.m3.1.1.1.cmml" xref="A2.I5.i2.I1.i2.p1.3.m3.1.1">subscript</csymbol><ci id="A2.I5.i2.I1.i2.p1.3.m3.1.1.2.cmml" xref="A2.I5.i2.I1.i2.p1.3.m3.1.1.2">𝒞</ci><ci id="A2.I5.i2.I1.i2.p1.3.m3.1.1.3.cmml" xref="A2.I5.i2.I1.i2.p1.3.m3.1.1.3">𝑎</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I5.i2.I1.i2.p1.3.m3.1c">\mathcal{C}_{a}</annotation></semantics></math>;</span>
</span></span>
</span>
<span id="A2.I5.i2.p1.2" class="ltx_p">If decrypting the encrypted seed fails, ignore the update.</span>
</span>
<span id="A2.I5.i2.p2" class="ltx_para ltx_noindent">
<span id="A2.I5.i2.p2.1" class="ltx_p"><span id="A2.I5.i2.p2.1.1" class="ltx_text ltx_font_bold">Note:</span> The adversary chooses to aggregate honest clients’ inputs whose index is in <math id="A2.I5.i2.p2.1.m1.1" class="ltx_Math" alttext="\mathcal{C}_{a}" display="inline"><semantics id="A2.I5.i2.p2.1.m1.1a"><msub id="A2.I5.i2.p2.1.m1.1.1" xref="A2.I5.i2.p2.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.I5.i2.p2.1.m1.1.1.2" xref="A2.I5.i2.p2.1.m1.1.1.2.cmml">𝒞</mi><mi id="A2.I5.i2.p2.1.m1.1.1.3" xref="A2.I5.i2.p2.1.m1.1.1.3.cmml">a</mi></msub><annotation-xml encoding="MathML-Content" id="A2.I5.i2.p2.1.m1.1b"><apply id="A2.I5.i2.p2.1.m1.1.1.cmml" xref="A2.I5.i2.p2.1.m1.1.1"><csymbol cd="ambiguous" id="A2.I5.i2.p2.1.m1.1.1.1.cmml" xref="A2.I5.i2.p2.1.m1.1.1">subscript</csymbol><ci id="A2.I5.i2.p2.1.m1.1.1.2.cmml" xref="A2.I5.i2.p2.1.m1.1.1.2">𝒞</ci><ci id="A2.I5.i2.p2.1.m1.1.1.3.cmml" xref="A2.I5.i2.p2.1.m1.1.1.3">𝑎</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I5.i2.p2.1.m1.1c">\mathcal{C}_{a}</annotation></semantics></math> and discards rest of the honest clients’ inputs.</span>
</span></span>
<span id="A2.I5.i3" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">3.</span> 
<span id="A2.I5.i3.p1" class="ltx_para">
<span id="A2.I5.i3.p1.1" class="ltx_p">In <a href="#A2.I3.i7" title="In Figure 16 ‣ B.3 Protocol Detail ‣ Appendix B Protocol Design and Security Proof" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Item</span> <span class="ltx_text ltx_ref_tag">7</span></a>, if the trusted party is not expected to generate a unmasking vector, the simulator follows the protocol. Otherwise, the simulator interacts with the real honest clients via the ideal functionality:</span>
<span id="A2.I5.i3.I1" class="ltx_enumerate">
<span id="A2.I5.i3.I1.i1" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">(a)</span> 
<span id="A2.I5.i3.I1.i1.p1" class="ltx_para">
<span id="A2.I5.i3.I1.i1.p1.3" class="ltx_p">For each <math id="A2.I5.i3.I1.i1.p1.1.m1.1" class="ltx_Math" alttext="i\in\mathcal{C}_{c}" display="inline"><semantics id="A2.I5.i3.I1.i1.p1.1.m1.1a"><mrow id="A2.I5.i3.I1.i1.p1.1.m1.1.1" xref="A2.I5.i3.I1.i1.p1.1.m1.1.1.cmml"><mi id="A2.I5.i3.I1.i1.p1.1.m1.1.1.2" xref="A2.I5.i3.I1.i1.p1.1.m1.1.1.2.cmml">i</mi><mo id="A2.I5.i3.I1.i1.p1.1.m1.1.1.1" xref="A2.I5.i3.I1.i1.p1.1.m1.1.1.1.cmml">∈</mo><msub id="A2.I5.i3.I1.i1.p1.1.m1.1.1.3" xref="A2.I5.i3.I1.i1.p1.1.m1.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.I5.i3.I1.i1.p1.1.m1.1.1.3.2" xref="A2.I5.i3.I1.i1.p1.1.m1.1.1.3.2.cmml">𝒞</mi><mi id="A2.I5.i3.I1.i1.p1.1.m1.1.1.3.3" xref="A2.I5.i3.I1.i1.p1.1.m1.1.1.3.3.cmml">c</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="A2.I5.i3.I1.i1.p1.1.m1.1b"><apply id="A2.I5.i3.I1.i1.p1.1.m1.1.1.cmml" xref="A2.I5.i3.I1.i1.p1.1.m1.1.1"><in id="A2.I5.i3.I1.i1.p1.1.m1.1.1.1.cmml" xref="A2.I5.i3.I1.i1.p1.1.m1.1.1.1"></in><ci id="A2.I5.i3.I1.i1.p1.1.m1.1.1.2.cmml" xref="A2.I5.i3.I1.i1.p1.1.m1.1.1.2">𝑖</ci><apply id="A2.I5.i3.I1.i1.p1.1.m1.1.1.3.cmml" xref="A2.I5.i3.I1.i1.p1.1.m1.1.1.3"><csymbol cd="ambiguous" id="A2.I5.i3.I1.i1.p1.1.m1.1.1.3.1.cmml" xref="A2.I5.i3.I1.i1.p1.1.m1.1.1.3">subscript</csymbol><ci id="A2.I5.i3.I1.i1.p1.1.m1.1.1.3.2.cmml" xref="A2.I5.i3.I1.i1.p1.1.m1.1.1.3.2">𝒞</ci><ci id="A2.I5.i3.I1.i1.p1.1.m1.1.1.3.3.cmml" xref="A2.I5.i3.I1.i1.p1.1.m1.1.1.3.3">𝑐</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I5.i3.I1.i1.p1.1.m1.1c">i\in\mathcal{C}_{c}</annotation></semantics></math>, the simulator sends out a <math id="A2.I5.i3.I1.i1.p1.2.m2.1" class="ltx_Math" alttext="0" display="inline"><semantics id="A2.I5.i3.I1.i1.p1.2.m2.1a"><mn id="A2.I5.i3.I1.i1.p1.2.m2.1.1" xref="A2.I5.i3.I1.i1.p1.2.m2.1.1.cmml">0</mn><annotation-xml encoding="MathML-Content" id="A2.I5.i3.I1.i1.p1.2.m2.1b"><cn type="integer" id="A2.I5.i3.I1.i1.p1.2.m2.1.1.cmml" xref="A2.I5.i3.I1.i1.p1.2.m2.1.1">0</cn></annotation-xml></semantics></math>-vector to the ideal functionality on behave of the corrupted client <math id="A2.I5.i3.I1.i1.p1.3.m3.1" class="ltx_Math" alttext="i" display="inline"><semantics id="A2.I5.i3.I1.i1.p1.3.m3.1a"><mi id="A2.I5.i3.I1.i1.p1.3.m3.1.1" xref="A2.I5.i3.I1.i1.p1.3.m3.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="A2.I5.i3.I1.i1.p1.3.m3.1b"><ci id="A2.I5.i3.I1.i1.p1.3.m3.1.1.cmml" xref="A2.I5.i3.I1.i1.p1.3.m3.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.I5.i3.I1.i1.p1.3.m3.1c">i</annotation></semantics></math>.</span>
</span></span>
<span id="A2.I5.i3.I1.i2" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">(b)</span> 
<span id="A2.I5.i3.I1.i2.p1" class="ltx_para">
<span id="A2.I5.i3.I1.i2.p1.1" class="ltx_p">The simulator sends <math id="A2.I5.i3.I1.i2.p1.1.m1.1" class="ltx_Math" alttext="\mathcal{C}_{a}" display="inline"><semantics id="A2.I5.i3.I1.i2.p1.1.m1.1a"><msub id="A2.I5.i3.I1.i2.p1.1.m1.1.1" xref="A2.I5.i3.I1.i2.p1.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.I5.i3.I1.i2.p1.1.m1.1.1.2" xref="A2.I5.i3.I1.i2.p1.1.m1.1.1.2.cmml">𝒞</mi><mi id="A2.I5.i3.I1.i2.p1.1.m1.1.1.3" xref="A2.I5.i3.I1.i2.p1.1.m1.1.1.3.cmml">a</mi></msub><annotation-xml encoding="MathML-Content" id="A2.I5.i3.I1.i2.p1.1.m1.1b"><apply id="A2.I5.i3.I1.i2.p1.1.m1.1.1.cmml" xref="A2.I5.i3.I1.i2.p1.1.m1.1.1"><csymbol cd="ambiguous" id="A2.I5.i3.I1.i2.p1.1.m1.1.1.1.cmml" xref="A2.I5.i3.I1.i2.p1.1.m1.1.1">subscript</csymbol><ci id="A2.I5.i3.I1.i2.p1.1.m1.1.1.2.cmml" xref="A2.I5.i3.I1.i2.p1.1.m1.1.1.2">𝒞</ci><ci id="A2.I5.i3.I1.i2.p1.1.m1.1.1.3.cmml" xref="A2.I5.i3.I1.i2.p1.1.m1.1.1.3">𝑎</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I5.i3.I1.i2.p1.1.m1.1c">\mathcal{C}_{a}</annotation></semantics></math> to the ideal functionality.</span>
</span></span>
<span id="A2.I5.i3.I1.i3" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">(c)</span> 
<span id="A2.I5.i3.I1.i3.p1" class="ltx_para">
<span id="A2.I5.i3.I1.i3.p1.1" class="ltx_p">The simulator receives <math id="A2.I5.i3.I1.i3.p1.1.m1.1" class="ltx_Math" alttext="V" display="inline"><semantics id="A2.I5.i3.I1.i3.p1.1.m1.1a"><mi id="A2.I5.i3.I1.i3.p1.1.m1.1.1" xref="A2.I5.i3.I1.i3.p1.1.m1.1.1.cmml">V</mi><annotation-xml encoding="MathML-Content" id="A2.I5.i3.I1.i3.p1.1.m1.1b"><ci id="A2.I5.i3.I1.i3.p1.1.m1.1.1.cmml" xref="A2.I5.i3.I1.i3.p1.1.m1.1.1">𝑉</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.I5.i3.I1.i3.p1.1.m1.1c">V</annotation></semantics></math>, which is the sum of all honest clients’ inputs, as the server from the ideal functionality.</span>
</span></span>
<span id="A2.I5.i3.I1.i4" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">(d)</span> 
<span id="A2.I5.i3.I1.i4.p1" class="ltx_para ltx_noindent">
<span id="A2.I5.i3.I1.i4.p1.2" class="ltx_p">The simulator sends <math id="A2.I5.i3.I1.i4.p1.1.m1.2" class="ltx_Math" alttext="(\sum m)+(\sum_{i\in\mathcal{C}_{a}}\tilde{m}_{i})-V" display="inline"><semantics id="A2.I5.i3.I1.i4.p1.1.m1.2a"><mrow id="A2.I5.i3.I1.i4.p1.1.m1.2.2" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.cmml"><mrow id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.cmml"><mrow id="A2.I5.i3.I1.i4.p1.1.m1.1.1.1.1.1" xref="A2.I5.i3.I1.i4.p1.1.m1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="A2.I5.i3.I1.i4.p1.1.m1.1.1.1.1.1.2" xref="A2.I5.i3.I1.i4.p1.1.m1.1.1.1.1.1.1.cmml">(</mo><mrow id="A2.I5.i3.I1.i4.p1.1.m1.1.1.1.1.1.1" xref="A2.I5.i3.I1.i4.p1.1.m1.1.1.1.1.1.1.cmml"><mo lspace="0em" id="A2.I5.i3.I1.i4.p1.1.m1.1.1.1.1.1.1.1" xref="A2.I5.i3.I1.i4.p1.1.m1.1.1.1.1.1.1.1.cmml">∑</mo><mi id="A2.I5.i3.I1.i4.p1.1.m1.1.1.1.1.1.1.2" xref="A2.I5.i3.I1.i4.p1.1.m1.1.1.1.1.1.1.2.cmml">m</mi></mrow><mo stretchy="false" id="A2.I5.i3.I1.i4.p1.1.m1.1.1.1.1.1.3" xref="A2.I5.i3.I1.i4.p1.1.m1.1.1.1.1.1.1.cmml">)</mo></mrow><mo id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.3" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.3.cmml">+</mo><mrow id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.cmml"><mo stretchy="false" id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.2" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.cmml">(</mo><mrow id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.cmml"><msub id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.1" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.1.cmml"><mo lspace="0em" id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.1.2" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.1.2.cmml">∑</mo><mrow id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.cmml"><mi id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.2" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.2.cmml">i</mi><mo id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.1" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.1.cmml">∈</mo><msub id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.3" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.3.2" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.3.2.cmml">𝒞</mi><mi id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.3.3" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.3.3.cmml">a</mi></msub></mrow></msub><msub id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.2" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.2.cmml"><mover accent="true" id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.2.2" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.2.2.cmml"><mi id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.2.2.2" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.2.2.2.cmml">m</mi><mo id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.2.2.1" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.2.2.1.cmml">~</mo></mover><mi id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.2.3" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.2.3.cmml">i</mi></msub></mrow><mo stretchy="false" id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.3" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.cmml">)</mo></mrow></mrow><mo id="A2.I5.i3.I1.i4.p1.1.m1.2.2.3" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.3.cmml">−</mo><mi id="A2.I5.i3.I1.i4.p1.1.m1.2.2.4" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.4.cmml">V</mi></mrow><annotation-xml encoding="MathML-Content" id="A2.I5.i3.I1.i4.p1.1.m1.2b"><apply id="A2.I5.i3.I1.i4.p1.1.m1.2.2.cmml" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2"><minus id="A2.I5.i3.I1.i4.p1.1.m1.2.2.3.cmml" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.3"></minus><apply id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.cmml" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2"><plus id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.3.cmml" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.3"></plus><apply id="A2.I5.i3.I1.i4.p1.1.m1.1.1.1.1.1.1.cmml" xref="A2.I5.i3.I1.i4.p1.1.m1.1.1.1.1.1"><sum id="A2.I5.i3.I1.i4.p1.1.m1.1.1.1.1.1.1.1.cmml" xref="A2.I5.i3.I1.i4.p1.1.m1.1.1.1.1.1.1.1"></sum><ci id="A2.I5.i3.I1.i4.p1.1.m1.1.1.1.1.1.1.2.cmml" xref="A2.I5.i3.I1.i4.p1.1.m1.1.1.1.1.1.1.2">𝑚</ci></apply><apply id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.cmml" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1"><apply id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.1.cmml" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.1"><csymbol cd="ambiguous" id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.1.1.cmml" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.1">subscript</csymbol><sum id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.1.2.cmml" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.1.2"></sum><apply id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.cmml" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3"><in id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.1.cmml" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.1"></in><ci id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.2.cmml" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.2">𝑖</ci><apply id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.3.cmml" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.3"><csymbol cd="ambiguous" id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.3.1.cmml" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.3">subscript</csymbol><ci id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.3.2.cmml" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.3.2">𝒞</ci><ci id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.3.3.cmml" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.3.3">𝑎</ci></apply></apply></apply><apply id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.2.cmml" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.2"><csymbol cd="ambiguous" id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.2.1.cmml" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.2">subscript</csymbol><apply id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.2.2.cmml" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.2.2"><ci id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.2.2.1.cmml" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.2.2.1">~</ci><ci id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.2.2.2.cmml" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.2.2.2">𝑚</ci></apply><ci id="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.2.3.cmml" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.2.2.1.1.2.3">𝑖</ci></apply></apply></apply><ci id="A2.I5.i3.I1.i4.p1.1.m1.2.2.4.cmml" xref="A2.I5.i3.I1.i4.p1.1.m1.2.2.4">𝑉</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I5.i3.I1.i4.p1.1.m1.2c">(\sum m)+(\sum_{i\in\mathcal{C}_{a}}\tilde{m}_{i})-V</annotation></semantics></math> to the server in the real world protocol on behalf of the trusted party, where <math id="A2.I5.i3.I1.i4.p1.2.m2.1" class="ltx_Math" alttext="\sum m" display="inline"><semantics id="A2.I5.i3.I1.i4.p1.2.m2.1a"><mrow id="A2.I5.i3.I1.i4.p1.2.m2.1.1" xref="A2.I5.i3.I1.i4.p1.2.m2.1.1.cmml"><mo id="A2.I5.i3.I1.i4.p1.2.m2.1.1.1" xref="A2.I5.i3.I1.i4.p1.2.m2.1.1.1.cmml">∑</mo><mi id="A2.I5.i3.I1.i4.p1.2.m2.1.1.2" xref="A2.I5.i3.I1.i4.p1.2.m2.1.1.2.cmml">m</mi></mrow><annotation-xml encoding="MathML-Content" id="A2.I5.i3.I1.i4.p1.2.m2.1b"><apply id="A2.I5.i3.I1.i4.p1.2.m2.1.1.cmml" xref="A2.I5.i3.I1.i4.p1.2.m2.1.1"><sum id="A2.I5.i3.I1.i4.p1.2.m2.1.1.1.cmml" xref="A2.I5.i3.I1.i4.p1.2.m2.1.1.1"></sum><ci id="A2.I5.i3.I1.i4.p1.2.m2.1.1.2.cmml" xref="A2.I5.i3.I1.i4.p1.2.m2.1.1.2">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I5.i3.I1.i4.p1.2.m2.1c">\sum m</annotation></semantics></math> is the running sum maintained by the trusted party.</span>
</span></span>
</span>
</span></span>
<span id="A2.I5.i4" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">4.</span> 
<span id="A2.I5.i4.p1" class="ltx_para ltx_noindent">
<span id="A2.I5.i4.p1.1" class="ltx_p">In <a href="#A2.I3.i8" title="In Figure 16 ‣ B.3 Protocol Detail ‣ Appendix B Protocol Design and Security Proof" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Item</span> <span class="ltx_text ltx_ref_tag">8</span></a>, no matter what the adversary outputs in the real world protocol in each role, the simulator outputs the same content as the same role in the ideal functionality.</span>
</span></span>
</span>
</span>
</p>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 18: </span>Simulator for secure aggregation</figcaption>
</figure>
<div id="A2.SS4.p4" class="ltx_para ltx_noindent">
<p id="A2.SS4.p4.1" class="ltx_p">We now argue that the adversary’s views are the same in either the simulation or a real world execution with real honest clients. We will show that by a series of computationally indistinguishable hybrid experiments.</p>
</div>
<div id="A2.SS4.p5" class="ltx_para ltx_noindent">
<ol id="A2.I6" class="ltx_enumerate">
<li id="A2.I6.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span> 
<div id="A2.I6.i1.p1" class="ltx_para ltx_noindent">
<p id="A2.I6.i1.p1.2" class="ltx_p"><math id="A2.I6.i1.p1.1.m1.1" class="ltx_Math" alttext="\mathbf{Hybrid}_{0}" display="inline"><semantics id="A2.I6.i1.p1.1.m1.1a"><msub id="A2.I6.i1.p1.1.m1.1.1" xref="A2.I6.i1.p1.1.m1.1.1.cmml"><mi id="A2.I6.i1.p1.1.m1.1.1.2" xref="A2.I6.i1.p1.1.m1.1.1.2.cmml">𝐇𝐲𝐛𝐫𝐢𝐝</mi><mn id="A2.I6.i1.p1.1.m1.1.1.3" xref="A2.I6.i1.p1.1.m1.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="A2.I6.i1.p1.1.m1.1b"><apply id="A2.I6.i1.p1.1.m1.1.1.cmml" xref="A2.I6.i1.p1.1.m1.1.1"><csymbol cd="ambiguous" id="A2.I6.i1.p1.1.m1.1.1.1.cmml" xref="A2.I6.i1.p1.1.m1.1.1">subscript</csymbol><ci id="A2.I6.i1.p1.1.m1.1.1.2.cmml" xref="A2.I6.i1.p1.1.m1.1.1.2">𝐇𝐲𝐛𝐫𝐢𝐝</ci><cn type="integer" id="A2.I6.i1.p1.1.m1.1.1.3.cmml" xref="A2.I6.i1.p1.1.m1.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I6.i1.p1.1.m1.1c">\mathbf{Hybrid}_{0}</annotation></semantics></math>: The simulator executes the real world protocol with the adversary. The simulator plays the role of honest clients with their private inputs <math id="A2.I6.i1.p1.2.m2.1" class="ltx_Math" alttext="v_{i}" display="inline"><semantics id="A2.I6.i1.p1.2.m2.1a"><msub id="A2.I6.i1.p1.2.m2.1.1" xref="A2.I6.i1.p1.2.m2.1.1.cmml"><mi id="A2.I6.i1.p1.2.m2.1.1.2" xref="A2.I6.i1.p1.2.m2.1.1.2.cmml">v</mi><mi id="A2.I6.i1.p1.2.m2.1.1.3" xref="A2.I6.i1.p1.2.m2.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="A2.I6.i1.p1.2.m2.1b"><apply id="A2.I6.i1.p1.2.m2.1.1.cmml" xref="A2.I6.i1.p1.2.m2.1.1"><csymbol cd="ambiguous" id="A2.I6.i1.p1.2.m2.1.1.1.cmml" xref="A2.I6.i1.p1.2.m2.1.1">subscript</csymbol><ci id="A2.I6.i1.p1.2.m2.1.1.2.cmml" xref="A2.I6.i1.p1.2.m2.1.1.2">𝑣</ci><ci id="A2.I6.i1.p1.2.m2.1.1.3.cmml" xref="A2.I6.i1.p1.2.m2.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I6.i1.p1.2.m2.1c">v_{i}</annotation></semantics></math>. The adversary plays the role of the server and corrupted clients. This is exactly the real world protocol execution.</p>
</div>
</li>
<li id="A2.I6.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span> 
<div id="A2.I6.i2.p1" class="ltx_para ltx_noindent">
<p id="A2.I6.i2.p1.2" class="ltx_p"><math id="A2.I6.i2.p1.1.m1.1" class="ltx_Math" alttext="\mathbf{Hybrid}_{1}" display="inline"><semantics id="A2.I6.i2.p1.1.m1.1a"><msub id="A2.I6.i2.p1.1.m1.1.1" xref="A2.I6.i2.p1.1.m1.1.1.cmml"><mi id="A2.I6.i2.p1.1.m1.1.1.2" xref="A2.I6.i2.p1.1.m1.1.1.2.cmml">𝐇𝐲𝐛𝐫𝐢𝐝</mi><mn id="A2.I6.i2.p1.1.m1.1.1.3" xref="A2.I6.i2.p1.1.m1.1.1.3.cmml">1</mn></msub><annotation-xml encoding="MathML-Content" id="A2.I6.i2.p1.1.m1.1b"><apply id="A2.I6.i2.p1.1.m1.1.1.cmml" xref="A2.I6.i2.p1.1.m1.1.1"><csymbol cd="ambiguous" id="A2.I6.i2.p1.1.m1.1.1.1.cmml" xref="A2.I6.i2.p1.1.m1.1.1">subscript</csymbol><ci id="A2.I6.i2.p1.1.m1.1.1.2.cmml" xref="A2.I6.i2.p1.1.m1.1.1.2">𝐇𝐲𝐛𝐫𝐢𝐝</ci><cn type="integer" id="A2.I6.i2.p1.1.m1.1.1.3.cmml" xref="A2.I6.i2.p1.1.m1.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I6.i2.p1.1.m1.1c">\mathbf{Hybrid}_{1}</annotation></semantics></math>: The same as <math id="A2.I6.i2.p1.2.m2.1" class="ltx_Math" alttext="\mathbf{Hybrid}_{0}" display="inline"><semantics id="A2.I6.i2.p1.2.m2.1a"><msub id="A2.I6.i2.p1.2.m2.1.1" xref="A2.I6.i2.p1.2.m2.1.1.cmml"><mi id="A2.I6.i2.p1.2.m2.1.1.2" xref="A2.I6.i2.p1.2.m2.1.1.2.cmml">𝐇𝐲𝐛𝐫𝐢𝐝</mi><mn id="A2.I6.i2.p1.2.m2.1.1.3" xref="A2.I6.i2.p1.2.m2.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="A2.I6.i2.p1.2.m2.1b"><apply id="A2.I6.i2.p1.2.m2.1.1.cmml" xref="A2.I6.i2.p1.2.m2.1.1"><csymbol cd="ambiguous" id="A2.I6.i2.p1.2.m2.1.1.1.cmml" xref="A2.I6.i2.p1.2.m2.1.1">subscript</csymbol><ci id="A2.I6.i2.p1.2.m2.1.1.2.cmml" xref="A2.I6.i2.p1.2.m2.1.1.2">𝐇𝐲𝐛𝐫𝐢𝐝</ci><cn type="integer" id="A2.I6.i2.p1.2.m2.1.1.3.cmml" xref="A2.I6.i2.p1.2.m2.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I6.i2.p1.2.m2.1c">\mathbf{Hybrid}_{0}</annotation></semantics></math>, except:</p>
<ol id="A2.I6.i2.I1" class="ltx_enumerate">
<li id="A2.I6.i2.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">(a)</span> 
<div id="A2.I6.i2.I1.i1.p1" class="ltx_para">
<p id="A2.I6.i2.I1.i1.p1.4" class="ltx_p">In <a href="#A2.I3.i3" title="In Figure 16 ‣ B.3 Protocol Detail ‣ Appendix B Protocol Design and Security Proof" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Item</span> <span class="ltx_text ltx_ref_tag">3</span></a>, for <math id="A2.I6.i2.I1.i1.p1.1.m1.1" class="ltx_Math" alttext="i\in\bar{\mathcal{C}_{c}}" display="inline"><semantics id="A2.I6.i2.I1.i1.p1.1.m1.1a"><mrow id="A2.I6.i2.I1.i1.p1.1.m1.1.1" xref="A2.I6.i2.I1.i1.p1.1.m1.1.1.cmml"><mi id="A2.I6.i2.I1.i1.p1.1.m1.1.1.2" xref="A2.I6.i2.I1.i1.p1.1.m1.1.1.2.cmml">i</mi><mo id="A2.I6.i2.I1.i1.p1.1.m1.1.1.1" xref="A2.I6.i2.I1.i1.p1.1.m1.1.1.1.cmml">∈</mo><mover accent="true" id="A2.I6.i2.I1.i1.p1.1.m1.1.1.3" xref="A2.I6.i2.I1.i1.p1.1.m1.1.1.3.cmml"><msub id="A2.I6.i2.I1.i1.p1.1.m1.1.1.3.2" xref="A2.I6.i2.I1.i1.p1.1.m1.1.1.3.2.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.I6.i2.I1.i1.p1.1.m1.1.1.3.2.2" xref="A2.I6.i2.I1.i1.p1.1.m1.1.1.3.2.2.cmml">𝒞</mi><mi id="A2.I6.i2.I1.i1.p1.1.m1.1.1.3.2.3" xref="A2.I6.i2.I1.i1.p1.1.m1.1.1.3.2.3.cmml">c</mi></msub><mo id="A2.I6.i2.I1.i1.p1.1.m1.1.1.3.1" xref="A2.I6.i2.I1.i1.p1.1.m1.1.1.3.1.cmml">¯</mo></mover></mrow><annotation-xml encoding="MathML-Content" id="A2.I6.i2.I1.i1.p1.1.m1.1b"><apply id="A2.I6.i2.I1.i1.p1.1.m1.1.1.cmml" xref="A2.I6.i2.I1.i1.p1.1.m1.1.1"><in id="A2.I6.i2.I1.i1.p1.1.m1.1.1.1.cmml" xref="A2.I6.i2.I1.i1.p1.1.m1.1.1.1"></in><ci id="A2.I6.i2.I1.i1.p1.1.m1.1.1.2.cmml" xref="A2.I6.i2.I1.i1.p1.1.m1.1.1.2">𝑖</ci><apply id="A2.I6.i2.I1.i1.p1.1.m1.1.1.3.cmml" xref="A2.I6.i2.I1.i1.p1.1.m1.1.1.3"><ci id="A2.I6.i2.I1.i1.p1.1.m1.1.1.3.1.cmml" xref="A2.I6.i2.I1.i1.p1.1.m1.1.1.3.1">¯</ci><apply id="A2.I6.i2.I1.i1.p1.1.m1.1.1.3.2.cmml" xref="A2.I6.i2.I1.i1.p1.1.m1.1.1.3.2"><csymbol cd="ambiguous" id="A2.I6.i2.I1.i1.p1.1.m1.1.1.3.2.1.cmml" xref="A2.I6.i2.I1.i1.p1.1.m1.1.1.3.2">subscript</csymbol><ci id="A2.I6.i2.I1.i1.p1.1.m1.1.1.3.2.2.cmml" xref="A2.I6.i2.I1.i1.p1.1.m1.1.1.3.2.2">𝒞</ci><ci id="A2.I6.i2.I1.i1.p1.1.m1.1.1.3.2.3.cmml" xref="A2.I6.i2.I1.i1.p1.1.m1.1.1.3.2.3">𝑐</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I6.i2.I1.i1.p1.1.m1.1c">i\in\bar{\mathcal{C}_{c}}</annotation></semantics></math>, the simulator sends a random vector <math id="A2.I6.i2.I1.i1.p1.2.m2.1" class="ltx_Math" alttext="\tilde{m}_{i}\in G^{\ell}" display="inline"><semantics id="A2.I6.i2.I1.i1.p1.2.m2.1a"><mrow id="A2.I6.i2.I1.i1.p1.2.m2.1.1" xref="A2.I6.i2.I1.i1.p1.2.m2.1.1.cmml"><msub id="A2.I6.i2.I1.i1.p1.2.m2.1.1.2" xref="A2.I6.i2.I1.i1.p1.2.m2.1.1.2.cmml"><mover accent="true" id="A2.I6.i2.I1.i1.p1.2.m2.1.1.2.2" xref="A2.I6.i2.I1.i1.p1.2.m2.1.1.2.2.cmml"><mi id="A2.I6.i2.I1.i1.p1.2.m2.1.1.2.2.2" xref="A2.I6.i2.I1.i1.p1.2.m2.1.1.2.2.2.cmml">m</mi><mo id="A2.I6.i2.I1.i1.p1.2.m2.1.1.2.2.1" xref="A2.I6.i2.I1.i1.p1.2.m2.1.1.2.2.1.cmml">~</mo></mover><mi id="A2.I6.i2.I1.i1.p1.2.m2.1.1.2.3" xref="A2.I6.i2.I1.i1.p1.2.m2.1.1.2.3.cmml">i</mi></msub><mo id="A2.I6.i2.I1.i1.p1.2.m2.1.1.1" xref="A2.I6.i2.I1.i1.p1.2.m2.1.1.1.cmml">∈</mo><msup id="A2.I6.i2.I1.i1.p1.2.m2.1.1.3" xref="A2.I6.i2.I1.i1.p1.2.m2.1.1.3.cmml"><mi id="A2.I6.i2.I1.i1.p1.2.m2.1.1.3.2" xref="A2.I6.i2.I1.i1.p1.2.m2.1.1.3.2.cmml">G</mi><mi mathvariant="normal" id="A2.I6.i2.I1.i1.p1.2.m2.1.1.3.3" xref="A2.I6.i2.I1.i1.p1.2.m2.1.1.3.3.cmml">ℓ</mi></msup></mrow><annotation-xml encoding="MathML-Content" id="A2.I6.i2.I1.i1.p1.2.m2.1b"><apply id="A2.I6.i2.I1.i1.p1.2.m2.1.1.cmml" xref="A2.I6.i2.I1.i1.p1.2.m2.1.1"><in id="A2.I6.i2.I1.i1.p1.2.m2.1.1.1.cmml" xref="A2.I6.i2.I1.i1.p1.2.m2.1.1.1"></in><apply id="A2.I6.i2.I1.i1.p1.2.m2.1.1.2.cmml" xref="A2.I6.i2.I1.i1.p1.2.m2.1.1.2"><csymbol cd="ambiguous" id="A2.I6.i2.I1.i1.p1.2.m2.1.1.2.1.cmml" xref="A2.I6.i2.I1.i1.p1.2.m2.1.1.2">subscript</csymbol><apply id="A2.I6.i2.I1.i1.p1.2.m2.1.1.2.2.cmml" xref="A2.I6.i2.I1.i1.p1.2.m2.1.1.2.2"><ci id="A2.I6.i2.I1.i1.p1.2.m2.1.1.2.2.1.cmml" xref="A2.I6.i2.I1.i1.p1.2.m2.1.1.2.2.1">~</ci><ci id="A2.I6.i2.I1.i1.p1.2.m2.1.1.2.2.2.cmml" xref="A2.I6.i2.I1.i1.p1.2.m2.1.1.2.2.2">𝑚</ci></apply><ci id="A2.I6.i2.I1.i1.p1.2.m2.1.1.2.3.cmml" xref="A2.I6.i2.I1.i1.p1.2.m2.1.1.2.3">𝑖</ci></apply><apply id="A2.I6.i2.I1.i1.p1.2.m2.1.1.3.cmml" xref="A2.I6.i2.I1.i1.p1.2.m2.1.1.3"><csymbol cd="ambiguous" id="A2.I6.i2.I1.i1.p1.2.m2.1.1.3.1.cmml" xref="A2.I6.i2.I1.i1.p1.2.m2.1.1.3">superscript</csymbol><ci id="A2.I6.i2.I1.i1.p1.2.m2.1.1.3.2.cmml" xref="A2.I6.i2.I1.i1.p1.2.m2.1.1.3.2">𝐺</ci><ci id="A2.I6.i2.I1.i1.p1.2.m2.1.1.3.3.cmml" xref="A2.I6.i2.I1.i1.p1.2.m2.1.1.3.3">ℓ</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I6.i2.I1.i1.p1.2.m2.1c">\tilde{m}_{i}\in G^{\ell}</annotation></semantics></math> as <math id="A2.I6.i2.I1.i1.p1.3.m3.1" class="ltx_Math" alttext="v_{i}+m_{i}" display="inline"><semantics id="A2.I6.i2.I1.i1.p1.3.m3.1a"><mrow id="A2.I6.i2.I1.i1.p1.3.m3.1.1" xref="A2.I6.i2.I1.i1.p1.3.m3.1.1.cmml"><msub id="A2.I6.i2.I1.i1.p1.3.m3.1.1.2" xref="A2.I6.i2.I1.i1.p1.3.m3.1.1.2.cmml"><mi id="A2.I6.i2.I1.i1.p1.3.m3.1.1.2.2" xref="A2.I6.i2.I1.i1.p1.3.m3.1.1.2.2.cmml">v</mi><mi id="A2.I6.i2.I1.i1.p1.3.m3.1.1.2.3" xref="A2.I6.i2.I1.i1.p1.3.m3.1.1.2.3.cmml">i</mi></msub><mo id="A2.I6.i2.I1.i1.p1.3.m3.1.1.1" xref="A2.I6.i2.I1.i1.p1.3.m3.1.1.1.cmml">+</mo><msub id="A2.I6.i2.I1.i1.p1.3.m3.1.1.3" xref="A2.I6.i2.I1.i1.p1.3.m3.1.1.3.cmml"><mi id="A2.I6.i2.I1.i1.p1.3.m3.1.1.3.2" xref="A2.I6.i2.I1.i1.p1.3.m3.1.1.3.2.cmml">m</mi><mi id="A2.I6.i2.I1.i1.p1.3.m3.1.1.3.3" xref="A2.I6.i2.I1.i1.p1.3.m3.1.1.3.3.cmml">i</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="A2.I6.i2.I1.i1.p1.3.m3.1b"><apply id="A2.I6.i2.I1.i1.p1.3.m3.1.1.cmml" xref="A2.I6.i2.I1.i1.p1.3.m3.1.1"><plus id="A2.I6.i2.I1.i1.p1.3.m3.1.1.1.cmml" xref="A2.I6.i2.I1.i1.p1.3.m3.1.1.1"></plus><apply id="A2.I6.i2.I1.i1.p1.3.m3.1.1.2.cmml" xref="A2.I6.i2.I1.i1.p1.3.m3.1.1.2"><csymbol cd="ambiguous" id="A2.I6.i2.I1.i1.p1.3.m3.1.1.2.1.cmml" xref="A2.I6.i2.I1.i1.p1.3.m3.1.1.2">subscript</csymbol><ci id="A2.I6.i2.I1.i1.p1.3.m3.1.1.2.2.cmml" xref="A2.I6.i2.I1.i1.p1.3.m3.1.1.2.2">𝑣</ci><ci id="A2.I6.i2.I1.i1.p1.3.m3.1.1.2.3.cmml" xref="A2.I6.i2.I1.i1.p1.3.m3.1.1.2.3">𝑖</ci></apply><apply id="A2.I6.i2.I1.i1.p1.3.m3.1.1.3.cmml" xref="A2.I6.i2.I1.i1.p1.3.m3.1.1.3"><csymbol cd="ambiguous" id="A2.I6.i2.I1.i1.p1.3.m3.1.1.3.1.cmml" xref="A2.I6.i2.I1.i1.p1.3.m3.1.1.3">subscript</csymbol><ci id="A2.I6.i2.I1.i1.p1.3.m3.1.1.3.2.cmml" xref="A2.I6.i2.I1.i1.p1.3.m3.1.1.3.2">𝑚</ci><ci id="A2.I6.i2.I1.i1.p1.3.m3.1.1.3.3.cmml" xref="A2.I6.i2.I1.i1.p1.3.m3.1.1.3.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I6.i2.I1.i1.p1.3.m3.1c">v_{i}+m_{i}</annotation></semantics></math> and a random string as the DH key exchange response on behalf of the honest client <math id="A2.I6.i2.I1.i1.p1.4.m4.1" class="ltx_Math" alttext="i" display="inline"><semantics id="A2.I6.i2.I1.i1.p1.4.m4.1a"><mi id="A2.I6.i2.I1.i1.p1.4.m4.1.1" xref="A2.I6.i2.I1.i1.p1.4.m4.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="A2.I6.i2.I1.i1.p1.4.m4.1b"><ci id="A2.I6.i2.I1.i1.p1.4.m4.1.1.cmml" xref="A2.I6.i2.I1.i1.p1.4.m4.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.I6.i2.I1.i1.p1.4.m4.1c">i</annotation></semantics></math>.</p>
</div>
</li>
<li id="A2.I6.i2.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">(b)</span> 
<div id="A2.I6.i2.I1.i2.p1" class="ltx_para ltx_noindent">
<p id="A2.I6.i2.I1.i2.p1.1" class="ltx_p">In <a href="#A2.I3.i6" title="In Figure 16 ‣ B.3 Protocol Detail ‣ Appendix B Protocol Design and Security Proof" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Item</span> <span class="ltx_text ltx_ref_tag">6</span></a>, upon receiving a DH key exchange response with successfully decrypting the encrypted seed from client <math id="A2.I6.i2.I1.i2.p1.1.m1.1" class="ltx_Math" alttext="i" display="inline"><semantics id="A2.I6.i2.I1.i2.p1.1.m1.1a"><mi id="A2.I6.i2.I1.i2.p1.1.m1.1.1" xref="A2.I6.i2.I1.i2.p1.1.m1.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="A2.I6.i2.I1.i2.p1.1.m1.1b"><ci id="A2.I6.i2.I1.i2.p1.1.m1.1.1.cmml" xref="A2.I6.i2.I1.i2.p1.1.m1.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.I6.i2.I1.i2.p1.1.m1.1c">i</annotation></semantics></math>:</p>
<ul id="A2.I6.i2.I1.i2.I1" class="ltx_itemize">
<li id="A2.I6.i2.I1.i2.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="A2.I6.i2.I1.i2.I1.i1.p1" class="ltx_para">
<p id="A2.I6.i2.I1.i2.I1.i1.p1.1" class="ltx_p">if <math id="A2.I6.i2.I1.i2.I1.i1.p1.1.m1.1" class="ltx_Math" alttext="i\in\mathcal{C}_{c}" display="inline"><semantics id="A2.I6.i2.I1.i2.I1.i1.p1.1.m1.1a"><mrow id="A2.I6.i2.I1.i2.I1.i1.p1.1.m1.1.1" xref="A2.I6.i2.I1.i2.I1.i1.p1.1.m1.1.1.cmml"><mi id="A2.I6.i2.I1.i2.I1.i1.p1.1.m1.1.1.2" xref="A2.I6.i2.I1.i2.I1.i1.p1.1.m1.1.1.2.cmml">i</mi><mo id="A2.I6.i2.I1.i2.I1.i1.p1.1.m1.1.1.1" xref="A2.I6.i2.I1.i2.I1.i1.p1.1.m1.1.1.1.cmml">∈</mo><msub id="A2.I6.i2.I1.i2.I1.i1.p1.1.m1.1.1.3" xref="A2.I6.i2.I1.i2.I1.i1.p1.1.m1.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.I6.i2.I1.i2.I1.i1.p1.1.m1.1.1.3.2" xref="A2.I6.i2.I1.i2.I1.i1.p1.1.m1.1.1.3.2.cmml">𝒞</mi><mi id="A2.I6.i2.I1.i2.I1.i1.p1.1.m1.1.1.3.3" xref="A2.I6.i2.I1.i2.I1.i1.p1.1.m1.1.1.3.3.cmml">c</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="A2.I6.i2.I1.i2.I1.i1.p1.1.m1.1b"><apply id="A2.I6.i2.I1.i2.I1.i1.p1.1.m1.1.1.cmml" xref="A2.I6.i2.I1.i2.I1.i1.p1.1.m1.1.1"><in id="A2.I6.i2.I1.i2.I1.i1.p1.1.m1.1.1.1.cmml" xref="A2.I6.i2.I1.i2.I1.i1.p1.1.m1.1.1.1"></in><ci id="A2.I6.i2.I1.i2.I1.i1.p1.1.m1.1.1.2.cmml" xref="A2.I6.i2.I1.i2.I1.i1.p1.1.m1.1.1.2">𝑖</ci><apply id="A2.I6.i2.I1.i2.I1.i1.p1.1.m1.1.1.3.cmml" xref="A2.I6.i2.I1.i2.I1.i1.p1.1.m1.1.1.3"><csymbol cd="ambiguous" id="A2.I6.i2.I1.i2.I1.i1.p1.1.m1.1.1.3.1.cmml" xref="A2.I6.i2.I1.i2.I1.i1.p1.1.m1.1.1.3">subscript</csymbol><ci id="A2.I6.i2.I1.i2.I1.i1.p1.1.m1.1.1.3.2.cmml" xref="A2.I6.i2.I1.i2.I1.i1.p1.1.m1.1.1.3.2">𝒞</ci><ci id="A2.I6.i2.I1.i2.I1.i1.p1.1.m1.1.1.3.3.cmml" xref="A2.I6.i2.I1.i2.I1.i1.p1.1.m1.1.1.3.3">𝑐</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I6.i2.I1.i2.I1.i1.p1.1.m1.1c">i\in\mathcal{C}_{c}</annotation></semantics></math>, the simulator follows the protocol;</p>
</div>
</li>
<li id="A2.I6.i2.I1.i2.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="A2.I6.i2.I1.i2.I1.i2.p1" class="ltx_para ltx_noindent">
<p id="A2.I6.i2.I1.i2.I1.i2.p1.3" class="ltx_p">if <math id="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1" class="ltx_Math" alttext="i\in\bar{\mathcal{C}_{c}}" display="inline"><semantics id="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1a"><mrow id="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1.1" xref="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1.1.cmml"><mi id="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1.1.2" xref="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1.1.2.cmml">i</mi><mo id="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1.1.1" xref="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1.1.1.cmml">∈</mo><mover accent="true" id="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1.1.3" xref="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1.1.3.cmml"><msub id="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1.1.3.2" xref="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1.1.3.2.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1.1.3.2.2" xref="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1.1.3.2.2.cmml">𝒞</mi><mi id="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1.1.3.2.3" xref="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1.1.3.2.3.cmml">c</mi></msub><mo id="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1.1.3.1" xref="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1.1.3.1.cmml">¯</mo></mover></mrow><annotation-xml encoding="MathML-Content" id="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1b"><apply id="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1.1.cmml" xref="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1.1"><in id="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1.1.1.cmml" xref="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1.1.1"></in><ci id="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1.1.2.cmml" xref="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1.1.2">𝑖</ci><apply id="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1.1.3.cmml" xref="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1.1.3"><ci id="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1.1.3.1.cmml" xref="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1.1.3.1">¯</ci><apply id="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1.1.3.2.cmml" xref="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1.1.3.2"><csymbol cd="ambiguous" id="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1.1.3.2.1.cmml" xref="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1.1.3.2">subscript</csymbol><ci id="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1.1.3.2.2.cmml" xref="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1.1.3.2.2">𝒞</ci><ci id="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1.1.3.2.3.cmml" xref="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1.1.3.2.3">𝑐</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I6.i2.I1.i2.I1.i2.p1.1.m1.1c">i\in\bar{\mathcal{C}_{c}}</annotation></semantics></math>, the simulator adds <math id="A2.I6.i2.I1.i2.I1.i2.p1.2.m2.1" class="ltx_Math" alttext="i" display="inline"><semantics id="A2.I6.i2.I1.i2.I1.i2.p1.2.m2.1a"><mi id="A2.I6.i2.I1.i2.I1.i2.p1.2.m2.1.1" xref="A2.I6.i2.I1.i2.I1.i2.p1.2.m2.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="A2.I6.i2.I1.i2.I1.i2.p1.2.m2.1b"><ci id="A2.I6.i2.I1.i2.I1.i2.p1.2.m2.1.1.cmml" xref="A2.I6.i2.I1.i2.I1.i2.p1.2.m2.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.I6.i2.I1.i2.I1.i2.p1.2.m2.1c">i</annotation></semantics></math> to <math id="A2.I6.i2.I1.i2.I1.i2.p1.3.m3.1" class="ltx_Math" alttext="\mathcal{C}_{a}" display="inline"><semantics id="A2.I6.i2.I1.i2.I1.i2.p1.3.m3.1a"><msub id="A2.I6.i2.I1.i2.I1.i2.p1.3.m3.1.1" xref="A2.I6.i2.I1.i2.I1.i2.p1.3.m3.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.I6.i2.I1.i2.I1.i2.p1.3.m3.1.1.2" xref="A2.I6.i2.I1.i2.I1.i2.p1.3.m3.1.1.2.cmml">𝒞</mi><mi id="A2.I6.i2.I1.i2.I1.i2.p1.3.m3.1.1.3" xref="A2.I6.i2.I1.i2.I1.i2.p1.3.m3.1.1.3.cmml">a</mi></msub><annotation-xml encoding="MathML-Content" id="A2.I6.i2.I1.i2.I1.i2.p1.3.m3.1b"><apply id="A2.I6.i2.I1.i2.I1.i2.p1.3.m3.1.1.cmml" xref="A2.I6.i2.I1.i2.I1.i2.p1.3.m3.1.1"><csymbol cd="ambiguous" id="A2.I6.i2.I1.i2.I1.i2.p1.3.m3.1.1.1.cmml" xref="A2.I6.i2.I1.i2.I1.i2.p1.3.m3.1.1">subscript</csymbol><ci id="A2.I6.i2.I1.i2.I1.i2.p1.3.m3.1.1.2.cmml" xref="A2.I6.i2.I1.i2.I1.i2.p1.3.m3.1.1.2">𝒞</ci><ci id="A2.I6.i2.I1.i2.I1.i2.p1.3.m3.1.1.3.cmml" xref="A2.I6.i2.I1.i2.I1.i2.p1.3.m3.1.1.3">𝑎</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I6.i2.I1.i2.I1.i2.p1.3.m3.1c">\mathcal{C}_{a}</annotation></semantics></math>;</p>
</div>
</li>
</ul>
<p id="A2.I6.i2.I1.i2.p1.2" class="ltx_p">If decrypting the encrypted seed fails, ignore the update.</p>
</div>
</li>
<li id="A2.I6.i2.I1.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">(c)</span> 
<div id="A2.I6.i2.I1.i3.p1" class="ltx_para ltx_noindent">
<p id="A2.I6.i2.I1.i3.p1.1" class="ltx_p">In <a href="#A2.I3.i7" title="In Figure 16 ‣ B.3 Protocol Detail ‣ Appendix B Protocol Design and Security Proof" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Item</span> <span class="ltx_text ltx_ref_tag">7</span></a>, if the trusted party is expected to generate an unmasking vector, the simulator will send <math id="A2.I6.i2.I1.i3.p1.1.m1.2" class="ltx_Math" alttext="(\sum m)+(\sum_{i\in\mathcal{C}_{a}}\tilde{m}_{i})-\sum_{i\in\mathcal{C}_{a}}v_{i}" display="inline"><semantics id="A2.I6.i2.I1.i3.p1.1.m1.2a"><mrow id="A2.I6.i2.I1.i3.p1.1.m1.2.2" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.cmml"><mrow id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.cmml"><mrow id="A2.I6.i2.I1.i3.p1.1.m1.1.1.1.1.1" xref="A2.I6.i2.I1.i3.p1.1.m1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="A2.I6.i2.I1.i3.p1.1.m1.1.1.1.1.1.2" xref="A2.I6.i2.I1.i3.p1.1.m1.1.1.1.1.1.1.cmml">(</mo><mrow id="A2.I6.i2.I1.i3.p1.1.m1.1.1.1.1.1.1" xref="A2.I6.i2.I1.i3.p1.1.m1.1.1.1.1.1.1.cmml"><mo lspace="0em" id="A2.I6.i2.I1.i3.p1.1.m1.1.1.1.1.1.1.1" xref="A2.I6.i2.I1.i3.p1.1.m1.1.1.1.1.1.1.1.cmml">∑</mo><mi id="A2.I6.i2.I1.i3.p1.1.m1.1.1.1.1.1.1.2" xref="A2.I6.i2.I1.i3.p1.1.m1.1.1.1.1.1.1.2.cmml">m</mi></mrow><mo stretchy="false" id="A2.I6.i2.I1.i3.p1.1.m1.1.1.1.1.1.3" xref="A2.I6.i2.I1.i3.p1.1.m1.1.1.1.1.1.1.cmml">)</mo></mrow><mo id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.3" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.3.cmml">+</mo><mrow id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.cmml"><mo stretchy="false" id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.2" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.cmml">(</mo><mrow id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.cmml"><msub id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.1" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.1.cmml"><mo lspace="0em" id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.1.2" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.1.2.cmml">∑</mo><mrow id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.1.3" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.1.3.cmml"><mi id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.1.3.2" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.1.3.2.cmml">i</mi><mo id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.1.3.1" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.1.3.1.cmml">∈</mo><msub id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.1.3.3" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.1.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.1.3.3.2" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.1.3.3.2.cmml">𝒞</mi><mi id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.1.3.3.3" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.1.3.3.3.cmml">a</mi></msub></mrow></msub><msub id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.2" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.2.cmml"><mover accent="true" id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.2.2" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.2.2.cmml"><mi id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.2.2.2" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.2.2.2.cmml">m</mi><mo id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.2.2.1" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.2.2.1.cmml">~</mo></mover><mi id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.2.3" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.2.3.cmml">i</mi></msub></mrow><mo stretchy="false" id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.3" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.cmml">)</mo></mrow></mrow><mo rspace="0.055em" id="A2.I6.i2.I1.i3.p1.1.m1.2.2.3" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.3.cmml">−</mo><mrow id="A2.I6.i2.I1.i3.p1.1.m1.2.2.4" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.cmml"><msub id="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.1" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.1.cmml"><mo id="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.1.2" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.1.2.cmml">∑</mo><mrow id="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.1.3" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.1.3.cmml"><mi id="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.1.3.2" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.1.3.2.cmml">i</mi><mo id="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.1.3.1" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.1.3.1.cmml">∈</mo><msub id="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.1.3.3" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.1.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.1.3.3.2" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.1.3.3.2.cmml">𝒞</mi><mi id="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.1.3.3.3" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.1.3.3.3.cmml">a</mi></msub></mrow></msub><msub id="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.2" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.2.cmml"><mi id="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.2.2" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.2.2.cmml">v</mi><mi id="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.2.3" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.2.3.cmml">i</mi></msub></mrow></mrow><annotation-xml encoding="MathML-Content" id="A2.I6.i2.I1.i3.p1.1.m1.2b"><apply id="A2.I6.i2.I1.i3.p1.1.m1.2.2.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2"><minus id="A2.I6.i2.I1.i3.p1.1.m1.2.2.3.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.3"></minus><apply id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2"><plus id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.3.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.3"></plus><apply id="A2.I6.i2.I1.i3.p1.1.m1.1.1.1.1.1.1.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.1.1.1.1.1"><sum id="A2.I6.i2.I1.i3.p1.1.m1.1.1.1.1.1.1.1.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.1.1.1.1.1.1.1"></sum><ci id="A2.I6.i2.I1.i3.p1.1.m1.1.1.1.1.1.1.2.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.1.1.1.1.1.1.2">𝑚</ci></apply><apply id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1"><apply id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.1.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.1"><csymbol cd="ambiguous" id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.1.1.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.1">subscript</csymbol><sum id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.1.2.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.1.2"></sum><apply id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.1.3.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.1.3"><in id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.1.3.1.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.1.3.1"></in><ci id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.1.3.2.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.1.3.2">𝑖</ci><apply id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.1.3.3.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.1.3.3"><csymbol cd="ambiguous" id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.1.3.3.1.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.1.3.3">subscript</csymbol><ci id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.1.3.3.2.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.1.3.3.2">𝒞</ci><ci id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.1.3.3.3.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.1.3.3.3">𝑎</ci></apply></apply></apply><apply id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.2.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.2"><csymbol cd="ambiguous" id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.2.1.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.2">subscript</csymbol><apply id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.2.2.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.2.2"><ci id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.2.2.1.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.2.2.1">~</ci><ci id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.2.2.2.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.2.2.2">𝑚</ci></apply><ci id="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.2.3.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.2.2.1.1.2.3">𝑖</ci></apply></apply></apply><apply id="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.4"><apply id="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.1.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.1"><csymbol cd="ambiguous" id="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.1.1.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.1">subscript</csymbol><sum id="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.1.2.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.1.2"></sum><apply id="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.1.3.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.1.3"><in id="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.1.3.1.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.1.3.1"></in><ci id="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.1.3.2.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.1.3.2">𝑖</ci><apply id="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.1.3.3.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.1.3.3"><csymbol cd="ambiguous" id="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.1.3.3.1.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.1.3.3">subscript</csymbol><ci id="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.1.3.3.2.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.1.3.3.2">𝒞</ci><ci id="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.1.3.3.3.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.1.3.3.3">𝑎</ci></apply></apply></apply><apply id="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.2.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.2"><csymbol cd="ambiguous" id="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.2.1.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.2">subscript</csymbol><ci id="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.2.2.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.2.2">𝑣</ci><ci id="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.2.3.cmml" xref="A2.I6.i2.I1.i3.p1.1.m1.2.2.4.2.3">𝑖</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I6.i2.I1.i3.p1.1.m1.2c">(\sum m)+(\sum_{i\in\mathcal{C}_{a}}\tilde{m}_{i})-\sum_{i\in\mathcal{C}_{a}}v_{i}</annotation></semantics></math> to the server if no honest clients’ response is detected to be tampered with in <a href="#A2.I3.i6" title="In Figure 16 ‣ B.3 Protocol Detail ‣ Appendix B Protocol Design and Security Proof" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Item</span> <span class="ltx_text ltx_ref_tag">6</span></a>; otherwise sends a uniform random unmasking vector to the server.</p>
</div>
</li>
</ol>
</div>
<div id="A2.I6.i2.p2" class="ltx_para ltx_noindent">
<p id="A2.I6.i2.p2.1" class="ltx_p"><math id="A2.I6.i2.p2.1.m1.1" class="ltx_Math" alttext="\mathbf{Hybrid}_{0}\approx\mathbf{Hybrid}_{1}" display="inline"><semantics id="A2.I6.i2.p2.1.m1.1a"><mrow id="A2.I6.i2.p2.1.m1.1.1" xref="A2.I6.i2.p2.1.m1.1.1.cmml"><msub id="A2.I6.i2.p2.1.m1.1.1.2" xref="A2.I6.i2.p2.1.m1.1.1.2.cmml"><mi id="A2.I6.i2.p2.1.m1.1.1.2.2" xref="A2.I6.i2.p2.1.m1.1.1.2.2.cmml">𝐇𝐲𝐛𝐫𝐢𝐝</mi><mn id="A2.I6.i2.p2.1.m1.1.1.2.3" xref="A2.I6.i2.p2.1.m1.1.1.2.3.cmml">0</mn></msub><mo id="A2.I6.i2.p2.1.m1.1.1.1" xref="A2.I6.i2.p2.1.m1.1.1.1.cmml">≈</mo><msub id="A2.I6.i2.p2.1.m1.1.1.3" xref="A2.I6.i2.p2.1.m1.1.1.3.cmml"><mi id="A2.I6.i2.p2.1.m1.1.1.3.2" xref="A2.I6.i2.p2.1.m1.1.1.3.2.cmml">𝐇𝐲𝐛𝐫𝐢𝐝</mi><mn id="A2.I6.i2.p2.1.m1.1.1.3.3" xref="A2.I6.i2.p2.1.m1.1.1.3.3.cmml">1</mn></msub></mrow><annotation-xml encoding="MathML-Content" id="A2.I6.i2.p2.1.m1.1b"><apply id="A2.I6.i2.p2.1.m1.1.1.cmml" xref="A2.I6.i2.p2.1.m1.1.1"><approx id="A2.I6.i2.p2.1.m1.1.1.1.cmml" xref="A2.I6.i2.p2.1.m1.1.1.1"></approx><apply id="A2.I6.i2.p2.1.m1.1.1.2.cmml" xref="A2.I6.i2.p2.1.m1.1.1.2"><csymbol cd="ambiguous" id="A2.I6.i2.p2.1.m1.1.1.2.1.cmml" xref="A2.I6.i2.p2.1.m1.1.1.2">subscript</csymbol><ci id="A2.I6.i2.p2.1.m1.1.1.2.2.cmml" xref="A2.I6.i2.p2.1.m1.1.1.2.2">𝐇𝐲𝐛𝐫𝐢𝐝</ci><cn type="integer" id="A2.I6.i2.p2.1.m1.1.1.2.3.cmml" xref="A2.I6.i2.p2.1.m1.1.1.2.3">0</cn></apply><apply id="A2.I6.i2.p2.1.m1.1.1.3.cmml" xref="A2.I6.i2.p2.1.m1.1.1.3"><csymbol cd="ambiguous" id="A2.I6.i2.p2.1.m1.1.1.3.1.cmml" xref="A2.I6.i2.p2.1.m1.1.1.3">subscript</csymbol><ci id="A2.I6.i2.p2.1.m1.1.1.3.2.cmml" xref="A2.I6.i2.p2.1.m1.1.1.3.2">𝐇𝐲𝐛𝐫𝐢𝐝</ci><cn type="integer" id="A2.I6.i2.p2.1.m1.1.1.3.3.cmml" xref="A2.I6.i2.p2.1.m1.1.1.3.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I6.i2.p2.1.m1.1c">\mathbf{Hybrid}_{0}\approx\mathbf{Hybrid}_{1}</annotation></semantics></math>:</p>
<ul id="A2.I6.i2.I2" class="ltx_itemize">
<li id="A2.I6.i2.I2.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="A2.I6.i2.I2.i1.p1" class="ltx_para ltx_noindent">
<p id="A2.I6.i2.I2.i1.p1.4" class="ltx_p">The correctness of <math id="A2.I6.i2.I2.i1.p1.1.m1.1" class="ltx_Math" alttext="\mathbf{Hybrid}_{1}" display="inline"><semantics id="A2.I6.i2.I2.i1.p1.1.m1.1a"><msub id="A2.I6.i2.I2.i1.p1.1.m1.1.1" xref="A2.I6.i2.I2.i1.p1.1.m1.1.1.cmml"><mi id="A2.I6.i2.I2.i1.p1.1.m1.1.1.2" xref="A2.I6.i2.I2.i1.p1.1.m1.1.1.2.cmml">𝐇𝐲𝐛𝐫𝐢𝐝</mi><mn id="A2.I6.i2.I2.i1.p1.1.m1.1.1.3" xref="A2.I6.i2.I2.i1.p1.1.m1.1.1.3.cmml">1</mn></msub><annotation-xml encoding="MathML-Content" id="A2.I6.i2.I2.i1.p1.1.m1.1b"><apply id="A2.I6.i2.I2.i1.p1.1.m1.1.1.cmml" xref="A2.I6.i2.I2.i1.p1.1.m1.1.1"><csymbol cd="ambiguous" id="A2.I6.i2.I2.i1.p1.1.m1.1.1.1.cmml" xref="A2.I6.i2.I2.i1.p1.1.m1.1.1">subscript</csymbol><ci id="A2.I6.i2.I2.i1.p1.1.m1.1.1.2.cmml" xref="A2.I6.i2.I2.i1.p1.1.m1.1.1.2">𝐇𝐲𝐛𝐫𝐢𝐝</ci><cn type="integer" id="A2.I6.i2.I2.i1.p1.1.m1.1.1.3.cmml" xref="A2.I6.i2.I2.i1.p1.1.m1.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I6.i2.I2.i1.p1.1.m1.1c">\mathbf{Hybrid}_{1}</annotation></semantics></math> is obvious since the server will get <math id="A2.I6.i2.I2.i1.p1.2.m2.3" class="ltx_Math" alttext="\sum_{i\in\mathcal{C}_{c}}(v+m)+(\sum_{i\in\mathcal{C}_{a}}\tilde{m}_{i})-\left(\sum_{i\in\mathcal{C}_{c}}m+\sum_{i\in\mathcal{C}_{a}}\tilde{m}_{i}-\sum_{i\in\mathcal{C}_{a}}v_{i}\right)=\sum_{i\in\mathcal{C}_{c}\cup\mathcal{C}_{a}}v" display="inline"><semantics id="A2.I6.i2.I2.i1.p1.2.m2.3a"><mrow id="A2.I6.i2.I2.i1.p1.2.m2.3.3" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.cmml"><mrow id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.cmml"><mrow id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.cmml"><mrow id="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1" xref="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.cmml"><msub id="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.2" xref="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.2.cmml"><mo id="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.2.2" xref="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.2.2.cmml">∑</mo><mrow id="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.2.3" xref="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.2.3.cmml"><mi id="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.2.3.2" xref="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.2.3.2.cmml">i</mi><mo id="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.2.3.1" xref="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.2.3.1.cmml">∈</mo><msub id="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.2.3.3" xref="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.2.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.2.3.3.2" xref="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.2.3.3.2.cmml">𝒞</mi><mi id="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.2.3.3.3" xref="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.2.3.3.3.cmml">c</mi></msub></mrow></msub><mrow id="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.1.1" xref="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.1.1.1.cmml"><mo lspace="0em" stretchy="false" id="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.1.1.2" xref="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.1.1.1" xref="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.1.1.1.cmml"><mi id="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.1.1.1.2" xref="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.1.1.1.2.cmml">v</mi><mo id="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.1.1.1.1" xref="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.1.1.1.1.cmml">+</mo><mi id="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.1.1.1.3" xref="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.1.1.1.3.cmml">m</mi></mrow><mo stretchy="false" id="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.1.1.3" xref="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.3" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.3.cmml">+</mo><mrow id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.cmml"><mo stretchy="false" id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.2" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.cmml">(</mo><mrow id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.cmml"><msub id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.1" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.1.cmml"><mo lspace="0em" id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.1.2" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.1.2.cmml">∑</mo><mrow id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.1.3" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.1.3.cmml"><mi id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.1.3.2" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.1.3.2.cmml">i</mi><mo id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.1.3.1" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.1.3.1.cmml">∈</mo><msub id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.1.3.3" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.1.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.1.3.3.2" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.1.3.3.2.cmml">𝒞</mi><mi id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.1.3.3.3" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.1.3.3.3.cmml">a</mi></msub></mrow></msub><msub id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.2" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.2.cmml"><mover accent="true" id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.2.2" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.2.2.cmml"><mi id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.2.2.2" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.2.2.2.cmml">m</mi><mo id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.2.2.1" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.2.2.1.cmml">~</mo></mover><mi id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.2.3" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.2.3.cmml">i</mi></msub></mrow><mo stretchy="false" id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.3" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.cmml">)</mo></mrow></mrow><mo id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.4" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.4.cmml">−</mo><mrow id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.cmml"><mo id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.2" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.cmml">(</mo><mrow id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.cmml"><mrow id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.cmml"><mrow id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.cmml"><msub id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.1" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.1.cmml"><mo lspace="0em" id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.1.2" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.1.2.cmml">∑</mo><mrow id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.1.3" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.1.3.cmml"><mi id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.1.3.2" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.1.3.2.cmml">i</mi><mo id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.1.3.1" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.1.3.1.cmml">∈</mo><msub id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.1.3.3" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.1.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.1.3.3.2" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.1.3.3.2.cmml">𝒞</mi><mi id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.1.3.3.3" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.1.3.3.3.cmml">c</mi></msub></mrow></msub><mi id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.2" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.2.cmml">m</mi></mrow><mo rspace="0.055em" id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.1" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.1.cmml">+</mo><mrow id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.cmml"><msub id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.1" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.1.cmml"><mo id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.1.2" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.1.2.cmml">∑</mo><mrow id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.1.3" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.1.3.cmml"><mi id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.1.3.2" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.1.3.2.cmml">i</mi><mo id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.1.3.1" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.1.3.1.cmml">∈</mo><msub id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.1.3.3" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.1.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.1.3.3.2" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.1.3.3.2.cmml">𝒞</mi><mi id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.1.3.3.3" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.1.3.3.3.cmml">a</mi></msub></mrow></msub><msub id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.2" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.2.cmml"><mover accent="true" id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.2.2" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.2.2.cmml"><mi id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.2.2.2" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.2.2.2.cmml">m</mi><mo id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.2.2.1" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.2.2.1.cmml">~</mo></mover><mi id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.2.3" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.2.3.cmml">i</mi></msub></mrow></mrow><mo rspace="0.055em" id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.1" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.1.cmml">−</mo><mrow id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.cmml"><msub id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.1" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.1.cmml"><mo id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.1.2" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.1.2.cmml">∑</mo><mrow id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.1.3" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.1.3.cmml"><mi id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.1.3.2" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.1.3.2.cmml">i</mi><mo id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.1.3.1" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.1.3.1.cmml">∈</mo><msub id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.1.3.3" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.1.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.1.3.3.2" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.1.3.3.2.cmml">𝒞</mi><mi id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.1.3.3.3" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.1.3.3.3.cmml">a</mi></msub></mrow></msub><msub id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.2" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.2.cmml"><mi id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.2.2" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.2.2.cmml">v</mi><mi id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.2.3" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.2.3.cmml">i</mi></msub></mrow></mrow><mo id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.3" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.cmml">)</mo></mrow></mrow><mo rspace="0.111em" id="A2.I6.i2.I2.i1.p1.2.m2.3.3.4" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.4.cmml">=</mo><mrow id="A2.I6.i2.I2.i1.p1.2.m2.3.3.5" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.cmml"><msub id="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.cmml"><mo id="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.2" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.2.cmml">∑</mo><mrow id="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.cmml"><mi id="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.2" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.2.cmml">i</mi><mo id="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.1" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.1.cmml">∈</mo><mrow id="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.3" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.3.cmml"><msub id="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.3.2" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.3.2.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.3.2.2" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.3.2.2.cmml">𝒞</mi><mi id="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.3.2.3" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.3.2.3.cmml">c</mi></msub><mo id="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.3.1" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.3.1.cmml">∪</mo><msub id="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.3.3" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.3.3.2" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.3.3.2.cmml">𝒞</mi><mi id="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.3.3.3" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.3.3.3.cmml">a</mi></msub></mrow></mrow></msub><mi id="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.2" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.2.cmml">v</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="A2.I6.i2.I2.i1.p1.2.m2.3b"><apply id="A2.I6.i2.I2.i1.p1.2.m2.3.3.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3"><eq id="A2.I6.i2.I2.i1.p1.2.m2.3.3.4.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.4"></eq><apply id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3"><minus id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.4.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.4"></minus><apply id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2"><plus id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.3.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.3"></plus><apply id="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1"><apply id="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.2.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.2"><csymbol cd="ambiguous" id="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.2.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.2">subscript</csymbol><sum id="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.2.2.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.2.2"></sum><apply id="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.2.3.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.2.3"><in id="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.2.3.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.2.3.1"></in><ci id="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.2.3.2.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.2.3.2">𝑖</ci><apply id="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.2.3.3.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.2.3.3"><csymbol cd="ambiguous" id="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.2.3.3.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.2.3.3">subscript</csymbol><ci id="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.2.3.3.2.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.2.3.3.2">𝒞</ci><ci id="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.2.3.3.3.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.2.3.3.3">𝑐</ci></apply></apply></apply><apply id="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.1.1.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.1.1"><plus id="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.1.1.1.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.1.1.1.1"></plus><ci id="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.1.1.1.2.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.1.1.1.2">𝑣</ci><ci id="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.1.1.1.3.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.1.1.1.1.1.1.1.1.3">𝑚</ci></apply></apply><apply id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1"><apply id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.1"><csymbol cd="ambiguous" id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.1.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.1">subscript</csymbol><sum id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.1.2.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.1.2"></sum><apply id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.1.3.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.1.3"><in id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.1.3.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.1.3.1"></in><ci id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.1.3.2.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.1.3.2">𝑖</ci><apply id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.1.3.3.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.1.3.3"><csymbol cd="ambiguous" id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.1.3.3.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.1.3.3">subscript</csymbol><ci id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.1.3.3.2.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.1.3.3.2">𝒞</ci><ci id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.1.3.3.3.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.1.3.3.3">𝑎</ci></apply></apply></apply><apply id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.2.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.2"><csymbol cd="ambiguous" id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.2.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.2">subscript</csymbol><apply id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.2.2.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.2.2"><ci id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.2.2.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.2.2.1">~</ci><ci id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.2.2.2.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.2.2.2">𝑚</ci></apply><ci id="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.2.3.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.2.2.2.2.2.1.1.2.3">𝑖</ci></apply></apply></apply><apply id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1"><minus id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.1"></minus><apply id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2"><plus id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.1"></plus><apply id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2"><apply id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.1"><csymbol cd="ambiguous" id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.1.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.1">subscript</csymbol><sum id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.1.2.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.1.2"></sum><apply id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.1.3.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.1.3"><in id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.1.3.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.1.3.1"></in><ci id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.1.3.2.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.1.3.2">𝑖</ci><apply id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.1.3.3.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.1.3.3"><csymbol cd="ambiguous" id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.1.3.3.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.1.3.3">subscript</csymbol><ci id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.1.3.3.2.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.1.3.3.2">𝒞</ci><ci id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.1.3.3.3.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.1.3.3.3">𝑐</ci></apply></apply></apply><ci id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.2.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.2.2">𝑚</ci></apply><apply id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3"><apply id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.1"><csymbol cd="ambiguous" id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.1.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.1">subscript</csymbol><sum id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.1.2.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.1.2"></sum><apply id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.1.3.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.1.3"><in id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.1.3.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.1.3.1"></in><ci id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.1.3.2.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.1.3.2">𝑖</ci><apply id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.1.3.3.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.1.3.3"><csymbol cd="ambiguous" id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.1.3.3.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.1.3.3">subscript</csymbol><ci id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.1.3.3.2.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.1.3.3.2">𝒞</ci><ci id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.1.3.3.3.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.1.3.3.3">𝑎</ci></apply></apply></apply><apply id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.2.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.2"><csymbol cd="ambiguous" id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.2.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.2">subscript</csymbol><apply id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.2.2.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.2.2"><ci id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.2.2.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.2.2.1">~</ci><ci id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.2.2.2.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.2.2.2">𝑚</ci></apply><ci id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.2.3.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.2.3.2.3">𝑖</ci></apply></apply></apply><apply id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3"><apply id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.1"><csymbol cd="ambiguous" id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.1.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.1">subscript</csymbol><sum id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.1.2.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.1.2"></sum><apply id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.1.3.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.1.3"><in id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.1.3.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.1.3.1"></in><ci id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.1.3.2.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.1.3.2">𝑖</ci><apply id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.1.3.3.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.1.3.3"><csymbol cd="ambiguous" id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.1.3.3.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.1.3.3">subscript</csymbol><ci id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.1.3.3.2.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.1.3.3.2">𝒞</ci><ci id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.1.3.3.3.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.1.3.3.3">𝑎</ci></apply></apply></apply><apply id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.2.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.2"><csymbol cd="ambiguous" id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.2.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.2">subscript</csymbol><ci id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.2.2.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.2.2">𝑣</ci><ci id="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.2.3.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.3.3.1.1.3.2.3">𝑖</ci></apply></apply></apply></apply><apply id="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.5"><apply id="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1"><csymbol cd="ambiguous" id="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1">subscript</csymbol><sum id="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.2.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.2"></sum><apply id="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3"><in id="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.1"></in><ci id="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.2.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.2">𝑖</ci><apply id="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.3.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.3"><union id="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.3.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.3.1"></union><apply id="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.3.2.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.3.2"><csymbol cd="ambiguous" id="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.3.2.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.3.2">subscript</csymbol><ci id="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.3.2.2.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.3.2.2">𝒞</ci><ci id="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.3.2.3.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.3.2.3">𝑐</ci></apply><apply id="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.3.3.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.3.3"><csymbol cd="ambiguous" id="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.3.3.1.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.3.3">subscript</csymbol><ci id="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.3.3.2.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.3.3.2">𝒞</ci><ci id="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.3.3.3.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.1.3.3.3.3">𝑎</ci></apply></apply></apply></apply><ci id="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.2.cmml" xref="A2.I6.i2.I2.i1.p1.2.m2.3.3.5.2">𝑣</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I6.i2.I2.i1.p1.2.m2.3c">\sum_{i\in\mathcal{C}_{c}}(v+m)+(\sum_{i\in\mathcal{C}_{a}}\tilde{m}_{i})-\left(\sum_{i\in\mathcal{C}_{c}}m+\sum_{i\in\mathcal{C}_{a}}\tilde{m}_{i}-\sum_{i\in\mathcal{C}_{a}}v_{i}\right)=\sum_{i\in\mathcal{C}_{c}\cup\mathcal{C}_{a}}v</annotation></semantics></math> at the end of <math id="A2.I6.i2.I2.i1.p1.3.m3.1" class="ltx_Math" alttext="\mathbf{Hybrid}_{1}" display="inline"><semantics id="A2.I6.i2.I2.i1.p1.3.m3.1a"><msub id="A2.I6.i2.I2.i1.p1.3.m3.1.1" xref="A2.I6.i2.I2.i1.p1.3.m3.1.1.cmml"><mi id="A2.I6.i2.I2.i1.p1.3.m3.1.1.2" xref="A2.I6.i2.I2.i1.p1.3.m3.1.1.2.cmml">𝐇𝐲𝐛𝐫𝐢𝐝</mi><mn id="A2.I6.i2.I2.i1.p1.3.m3.1.1.3" xref="A2.I6.i2.I2.i1.p1.3.m3.1.1.3.cmml">1</mn></msub><annotation-xml encoding="MathML-Content" id="A2.I6.i2.I2.i1.p1.3.m3.1b"><apply id="A2.I6.i2.I2.i1.p1.3.m3.1.1.cmml" xref="A2.I6.i2.I2.i1.p1.3.m3.1.1"><csymbol cd="ambiguous" id="A2.I6.i2.I2.i1.p1.3.m3.1.1.1.cmml" xref="A2.I6.i2.I2.i1.p1.3.m3.1.1">subscript</csymbol><ci id="A2.I6.i2.I2.i1.p1.3.m3.1.1.2.cmml" xref="A2.I6.i2.I2.i1.p1.3.m3.1.1.2">𝐇𝐲𝐛𝐫𝐢𝐝</ci><cn type="integer" id="A2.I6.i2.I2.i1.p1.3.m3.1.1.3.cmml" xref="A2.I6.i2.I2.i1.p1.3.m3.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I6.i2.I2.i1.p1.3.m3.1c">\mathbf{Hybrid}_{1}</annotation></semantics></math>, which is exactly what the server will learn at the end of <math id="A2.I6.i2.I2.i1.p1.4.m4.1" class="ltx_Math" alttext="\mathbf{Hybrid}_{0}" display="inline"><semantics id="A2.I6.i2.I2.i1.p1.4.m4.1a"><msub id="A2.I6.i2.I2.i1.p1.4.m4.1.1" xref="A2.I6.i2.I2.i1.p1.4.m4.1.1.cmml"><mi id="A2.I6.i2.I2.i1.p1.4.m4.1.1.2" xref="A2.I6.i2.I2.i1.p1.4.m4.1.1.2.cmml">𝐇𝐲𝐛𝐫𝐢𝐝</mi><mn id="A2.I6.i2.I2.i1.p1.4.m4.1.1.3" xref="A2.I6.i2.I2.i1.p1.4.m4.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="A2.I6.i2.I2.i1.p1.4.m4.1b"><apply id="A2.I6.i2.I2.i1.p1.4.m4.1.1.cmml" xref="A2.I6.i2.I2.i1.p1.4.m4.1.1"><csymbol cd="ambiguous" id="A2.I6.i2.I2.i1.p1.4.m4.1.1.1.cmml" xref="A2.I6.i2.I2.i1.p1.4.m4.1.1">subscript</csymbol><ci id="A2.I6.i2.I2.i1.p1.4.m4.1.1.2.cmml" xref="A2.I6.i2.I2.i1.p1.4.m4.1.1.2">𝐇𝐲𝐛𝐫𝐢𝐝</ci><cn type="integer" id="A2.I6.i2.I2.i1.p1.4.m4.1.1.3.cmml" xref="A2.I6.i2.I2.i1.p1.4.m4.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I6.i2.I2.i1.p1.4.m4.1c">\mathbf{Hybrid}_{0}</annotation></semantics></math>.</p>
</div>
</li>
<li id="A2.I6.i2.I2.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="A2.I6.i2.I2.i2.p1" class="ltx_para ltx_noindent">
<p id="A2.I6.i2.I2.i2.p1.5" class="ltx_p">The indistinguishability between <math id="A2.I6.i2.I2.i2.p1.1.m1.1" class="ltx_Math" alttext="\mathbf{Hybrid}_{0}" display="inline"><semantics id="A2.I6.i2.I2.i2.p1.1.m1.1a"><msub id="A2.I6.i2.I2.i2.p1.1.m1.1.1" xref="A2.I6.i2.I2.i2.p1.1.m1.1.1.cmml"><mi id="A2.I6.i2.I2.i2.p1.1.m1.1.1.2" xref="A2.I6.i2.I2.i2.p1.1.m1.1.1.2.cmml">𝐇𝐲𝐛𝐫𝐢𝐝</mi><mn id="A2.I6.i2.I2.i2.p1.1.m1.1.1.3" xref="A2.I6.i2.I2.i2.p1.1.m1.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="A2.I6.i2.I2.i2.p1.1.m1.1b"><apply id="A2.I6.i2.I2.i2.p1.1.m1.1.1.cmml" xref="A2.I6.i2.I2.i2.p1.1.m1.1.1"><csymbol cd="ambiguous" id="A2.I6.i2.I2.i2.p1.1.m1.1.1.1.cmml" xref="A2.I6.i2.I2.i2.p1.1.m1.1.1">subscript</csymbol><ci id="A2.I6.i2.I2.i2.p1.1.m1.1.1.2.cmml" xref="A2.I6.i2.I2.i2.p1.1.m1.1.1.2">𝐇𝐲𝐛𝐫𝐢𝐝</ci><cn type="integer" id="A2.I6.i2.I2.i2.p1.1.m1.1.1.3.cmml" xref="A2.I6.i2.I2.i2.p1.1.m1.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I6.i2.I2.i2.p1.1.m1.1c">\mathbf{Hybrid}_{0}</annotation></semantics></math> and <math id="A2.I6.i2.I2.i2.p1.2.m2.1" class="ltx_Math" alttext="\mathbf{Hybrid}_{1}" display="inline"><semantics id="A2.I6.i2.I2.i2.p1.2.m2.1a"><msub id="A2.I6.i2.I2.i2.p1.2.m2.1.1" xref="A2.I6.i2.I2.i2.p1.2.m2.1.1.cmml"><mi id="A2.I6.i2.I2.i2.p1.2.m2.1.1.2" xref="A2.I6.i2.I2.i2.p1.2.m2.1.1.2.cmml">𝐇𝐲𝐛𝐫𝐢𝐝</mi><mn id="A2.I6.i2.I2.i2.p1.2.m2.1.1.3" xref="A2.I6.i2.I2.i2.p1.2.m2.1.1.3.cmml">1</mn></msub><annotation-xml encoding="MathML-Content" id="A2.I6.i2.I2.i2.p1.2.m2.1b"><apply id="A2.I6.i2.I2.i2.p1.2.m2.1.1.cmml" xref="A2.I6.i2.I2.i2.p1.2.m2.1.1"><csymbol cd="ambiguous" id="A2.I6.i2.I2.i2.p1.2.m2.1.1.1.cmml" xref="A2.I6.i2.I2.i2.p1.2.m2.1.1">subscript</csymbol><ci id="A2.I6.i2.I2.i2.p1.2.m2.1.1.2.cmml" xref="A2.I6.i2.I2.i2.p1.2.m2.1.1.2">𝐇𝐲𝐛𝐫𝐢𝐝</ci><cn type="integer" id="A2.I6.i2.I2.i2.p1.2.m2.1.1.3.cmml" xref="A2.I6.i2.I2.i2.p1.2.m2.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I6.i2.I2.i2.p1.2.m2.1c">\mathbf{Hybrid}_{1}</annotation></semantics></math> comes from the fact that both <math id="A2.I6.i2.I2.i2.p1.3.m3.1" class="ltx_Math" alttext="v_{i}+m_{i}" display="inline"><semantics id="A2.I6.i2.I2.i2.p1.3.m3.1a"><mrow id="A2.I6.i2.I2.i2.p1.3.m3.1.1" xref="A2.I6.i2.I2.i2.p1.3.m3.1.1.cmml"><msub id="A2.I6.i2.I2.i2.p1.3.m3.1.1.2" xref="A2.I6.i2.I2.i2.p1.3.m3.1.1.2.cmml"><mi id="A2.I6.i2.I2.i2.p1.3.m3.1.1.2.2" xref="A2.I6.i2.I2.i2.p1.3.m3.1.1.2.2.cmml">v</mi><mi id="A2.I6.i2.I2.i2.p1.3.m3.1.1.2.3" xref="A2.I6.i2.I2.i2.p1.3.m3.1.1.2.3.cmml">i</mi></msub><mo id="A2.I6.i2.I2.i2.p1.3.m3.1.1.1" xref="A2.I6.i2.I2.i2.p1.3.m3.1.1.1.cmml">+</mo><msub id="A2.I6.i2.I2.i2.p1.3.m3.1.1.3" xref="A2.I6.i2.I2.i2.p1.3.m3.1.1.3.cmml"><mi id="A2.I6.i2.I2.i2.p1.3.m3.1.1.3.2" xref="A2.I6.i2.I2.i2.p1.3.m3.1.1.3.2.cmml">m</mi><mi id="A2.I6.i2.I2.i2.p1.3.m3.1.1.3.3" xref="A2.I6.i2.I2.i2.p1.3.m3.1.1.3.3.cmml">i</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="A2.I6.i2.I2.i2.p1.3.m3.1b"><apply id="A2.I6.i2.I2.i2.p1.3.m3.1.1.cmml" xref="A2.I6.i2.I2.i2.p1.3.m3.1.1"><plus id="A2.I6.i2.I2.i2.p1.3.m3.1.1.1.cmml" xref="A2.I6.i2.I2.i2.p1.3.m3.1.1.1"></plus><apply id="A2.I6.i2.I2.i2.p1.3.m3.1.1.2.cmml" xref="A2.I6.i2.I2.i2.p1.3.m3.1.1.2"><csymbol cd="ambiguous" id="A2.I6.i2.I2.i2.p1.3.m3.1.1.2.1.cmml" xref="A2.I6.i2.I2.i2.p1.3.m3.1.1.2">subscript</csymbol><ci id="A2.I6.i2.I2.i2.p1.3.m3.1.1.2.2.cmml" xref="A2.I6.i2.I2.i2.p1.3.m3.1.1.2.2">𝑣</ci><ci id="A2.I6.i2.I2.i2.p1.3.m3.1.1.2.3.cmml" xref="A2.I6.i2.I2.i2.p1.3.m3.1.1.2.3">𝑖</ci></apply><apply id="A2.I6.i2.I2.i2.p1.3.m3.1.1.3.cmml" xref="A2.I6.i2.I2.i2.p1.3.m3.1.1.3"><csymbol cd="ambiguous" id="A2.I6.i2.I2.i2.p1.3.m3.1.1.3.1.cmml" xref="A2.I6.i2.I2.i2.p1.3.m3.1.1.3">subscript</csymbol><ci id="A2.I6.i2.I2.i2.p1.3.m3.1.1.3.2.cmml" xref="A2.I6.i2.I2.i2.p1.3.m3.1.1.3.2">𝑚</ci><ci id="A2.I6.i2.I2.i2.p1.3.m3.1.1.3.3.cmml" xref="A2.I6.i2.I2.i2.p1.3.m3.1.1.3.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I6.i2.I2.i2.p1.3.m3.1c">v_{i}+m_{i}</annotation></semantics></math> and <math id="A2.I6.i2.I2.i2.p1.4.m4.1" class="ltx_Math" alttext="\tilde{m}_{i}" display="inline"><semantics id="A2.I6.i2.I2.i2.p1.4.m4.1a"><msub id="A2.I6.i2.I2.i2.p1.4.m4.1.1" xref="A2.I6.i2.I2.i2.p1.4.m4.1.1.cmml"><mover accent="true" id="A2.I6.i2.I2.i2.p1.4.m4.1.1.2" xref="A2.I6.i2.I2.i2.p1.4.m4.1.1.2.cmml"><mi id="A2.I6.i2.I2.i2.p1.4.m4.1.1.2.2" xref="A2.I6.i2.I2.i2.p1.4.m4.1.1.2.2.cmml">m</mi><mo id="A2.I6.i2.I2.i2.p1.4.m4.1.1.2.1" xref="A2.I6.i2.I2.i2.p1.4.m4.1.1.2.1.cmml">~</mo></mover><mi id="A2.I6.i2.I2.i2.p1.4.m4.1.1.3" xref="A2.I6.i2.I2.i2.p1.4.m4.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="A2.I6.i2.I2.i2.p1.4.m4.1b"><apply id="A2.I6.i2.I2.i2.p1.4.m4.1.1.cmml" xref="A2.I6.i2.I2.i2.p1.4.m4.1.1"><csymbol cd="ambiguous" id="A2.I6.i2.I2.i2.p1.4.m4.1.1.1.cmml" xref="A2.I6.i2.I2.i2.p1.4.m4.1.1">subscript</csymbol><apply id="A2.I6.i2.I2.i2.p1.4.m4.1.1.2.cmml" xref="A2.I6.i2.I2.i2.p1.4.m4.1.1.2"><ci id="A2.I6.i2.I2.i2.p1.4.m4.1.1.2.1.cmml" xref="A2.I6.i2.I2.i2.p1.4.m4.1.1.2.1">~</ci><ci id="A2.I6.i2.I2.i2.p1.4.m4.1.1.2.2.cmml" xref="A2.I6.i2.I2.i2.p1.4.m4.1.1.2.2">𝑚</ci></apply><ci id="A2.I6.i2.I2.i2.p1.4.m4.1.1.3.cmml" xref="A2.I6.i2.I2.i2.p1.4.m4.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I6.i2.I2.i2.p1.4.m4.1c">\tilde{m}_{i}</annotation></semantics></math> are subject to independent uniform distribution over <math id="A2.I6.i2.I2.i2.p1.5.m5.1" class="ltx_Math" alttext="G^{\ell}" display="inline"><semantics id="A2.I6.i2.I2.i2.p1.5.m5.1a"><msup id="A2.I6.i2.I2.i2.p1.5.m5.1.1" xref="A2.I6.i2.I2.i2.p1.5.m5.1.1.cmml"><mi id="A2.I6.i2.I2.i2.p1.5.m5.1.1.2" xref="A2.I6.i2.I2.i2.p1.5.m5.1.1.2.cmml">G</mi><mi mathvariant="normal" id="A2.I6.i2.I2.i2.p1.5.m5.1.1.3" xref="A2.I6.i2.I2.i2.p1.5.m5.1.1.3.cmml">ℓ</mi></msup><annotation-xml encoding="MathML-Content" id="A2.I6.i2.I2.i2.p1.5.m5.1b"><apply id="A2.I6.i2.I2.i2.p1.5.m5.1.1.cmml" xref="A2.I6.i2.I2.i2.p1.5.m5.1.1"><csymbol cd="ambiguous" id="A2.I6.i2.I2.i2.p1.5.m5.1.1.1.cmml" xref="A2.I6.i2.I2.i2.p1.5.m5.1.1">superscript</csymbol><ci id="A2.I6.i2.I2.i2.p1.5.m5.1.1.2.cmml" xref="A2.I6.i2.I2.i2.p1.5.m5.1.1.2">𝐺</ci><ci id="A2.I6.i2.I2.i2.p1.5.m5.1.1.3.cmml" xref="A2.I6.i2.I2.i2.p1.5.m5.1.1.3">ℓ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I6.i2.I2.i2.p1.5.m5.1c">G^{\ell}</annotation></semantics></math>.</p>
</div>
</li>
</ul>
</div>
</li>
<li id="A2.I6.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">3.</span> 
<div id="A2.I6.i3.p1" class="ltx_para ltx_noindent">
<p id="A2.I6.i3.p1.2" class="ltx_p"><math id="A2.I6.i3.p1.1.m1.1" class="ltx_Math" alttext="\mathbf{Hybrid}_{2}" display="inline"><semantics id="A2.I6.i3.p1.1.m1.1a"><msub id="A2.I6.i3.p1.1.m1.1.1" xref="A2.I6.i3.p1.1.m1.1.1.cmml"><mi id="A2.I6.i3.p1.1.m1.1.1.2" xref="A2.I6.i3.p1.1.m1.1.1.2.cmml">𝐇𝐲𝐛𝐫𝐢𝐝</mi><mn id="A2.I6.i3.p1.1.m1.1.1.3" xref="A2.I6.i3.p1.1.m1.1.1.3.cmml">2</mn></msub><annotation-xml encoding="MathML-Content" id="A2.I6.i3.p1.1.m1.1b"><apply id="A2.I6.i3.p1.1.m1.1.1.cmml" xref="A2.I6.i3.p1.1.m1.1.1"><csymbol cd="ambiguous" id="A2.I6.i3.p1.1.m1.1.1.1.cmml" xref="A2.I6.i3.p1.1.m1.1.1">subscript</csymbol><ci id="A2.I6.i3.p1.1.m1.1.1.2.cmml" xref="A2.I6.i3.p1.1.m1.1.1.2">𝐇𝐲𝐛𝐫𝐢𝐝</ci><cn type="integer" id="A2.I6.i3.p1.1.m1.1.1.3.cmml" xref="A2.I6.i3.p1.1.m1.1.1.3">2</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I6.i3.p1.1.m1.1c">\mathbf{Hybrid}_{2}</annotation></semantics></math>: The same as <math id="A2.I6.i3.p1.2.m2.1" class="ltx_Math" alttext="\mathbf{Hybrid}_{1}" display="inline"><semantics id="A2.I6.i3.p1.2.m2.1a"><msub id="A2.I6.i3.p1.2.m2.1.1" xref="A2.I6.i3.p1.2.m2.1.1.cmml"><mi id="A2.I6.i3.p1.2.m2.1.1.2" xref="A2.I6.i3.p1.2.m2.1.1.2.cmml">𝐇𝐲𝐛𝐫𝐢𝐝</mi><mn id="A2.I6.i3.p1.2.m2.1.1.3" xref="A2.I6.i3.p1.2.m2.1.1.3.cmml">1</mn></msub><annotation-xml encoding="MathML-Content" id="A2.I6.i3.p1.2.m2.1b"><apply id="A2.I6.i3.p1.2.m2.1.1.cmml" xref="A2.I6.i3.p1.2.m2.1.1"><csymbol cd="ambiguous" id="A2.I6.i3.p1.2.m2.1.1.1.cmml" xref="A2.I6.i3.p1.2.m2.1.1">subscript</csymbol><ci id="A2.I6.i3.p1.2.m2.1.1.2.cmml" xref="A2.I6.i3.p1.2.m2.1.1.2">𝐇𝐲𝐛𝐫𝐢𝐝</ci><cn type="integer" id="A2.I6.i3.p1.2.m2.1.1.3.cmml" xref="A2.I6.i3.p1.2.m2.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I6.i3.p1.2.m2.1c">\mathbf{Hybrid}_{1}</annotation></semantics></math>, except:</p>
<ol id="A2.I6.i3.I1" class="ltx_enumerate">
<li id="A2.I6.i3.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">(a)</span> 
<div id="A2.I6.i3.I1.i1.p1" class="ltx_para">
<p id="A2.I6.i3.I1.i1.p1.1" class="ltx_p">The simulator no longer has the inputs of honest clients, but runs the ideal functionality with real honest clients.</p>
</div>
</li>
<li id="A2.I6.i3.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">(b)</span> 
<div id="A2.I6.i3.I1.i2.p1" class="ltx_para">
<p id="A2.I6.i3.I1.i2.p1.1" class="ltx_p">In <a href="#A2.I3.i7" title="In Figure 16 ‣ B.3 Protocol Detail ‣ Appendix B Protocol Design and Security Proof" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Item</span> <span class="ltx_text ltx_ref_tag">7</span></a>, if the trusted party is expected to generate an unmasking vector, the simulator interacts with the real honest clients via the ideal functionality:</p>
<ol id="A2.I6.i3.I1.i2.I1" class="ltx_enumerate">
<li id="A2.I6.i3.I1.i2.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">i.</span> 
<div id="A2.I6.i3.I1.i2.I1.i1.p1" class="ltx_para">
<p id="A2.I6.i3.I1.i2.I1.i1.p1.3" class="ltx_p">For each <math id="A2.I6.i3.I1.i2.I1.i1.p1.1.m1.1" class="ltx_Math" alttext="i\in\mathcal{C}_{c}" display="inline"><semantics id="A2.I6.i3.I1.i2.I1.i1.p1.1.m1.1a"><mrow id="A2.I6.i3.I1.i2.I1.i1.p1.1.m1.1.1" xref="A2.I6.i3.I1.i2.I1.i1.p1.1.m1.1.1.cmml"><mi id="A2.I6.i3.I1.i2.I1.i1.p1.1.m1.1.1.2" xref="A2.I6.i3.I1.i2.I1.i1.p1.1.m1.1.1.2.cmml">i</mi><mo id="A2.I6.i3.I1.i2.I1.i1.p1.1.m1.1.1.1" xref="A2.I6.i3.I1.i2.I1.i1.p1.1.m1.1.1.1.cmml">∈</mo><msub id="A2.I6.i3.I1.i2.I1.i1.p1.1.m1.1.1.3" xref="A2.I6.i3.I1.i2.I1.i1.p1.1.m1.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.I6.i3.I1.i2.I1.i1.p1.1.m1.1.1.3.2" xref="A2.I6.i3.I1.i2.I1.i1.p1.1.m1.1.1.3.2.cmml">𝒞</mi><mi id="A2.I6.i3.I1.i2.I1.i1.p1.1.m1.1.1.3.3" xref="A2.I6.i3.I1.i2.I1.i1.p1.1.m1.1.1.3.3.cmml">c</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="A2.I6.i3.I1.i2.I1.i1.p1.1.m1.1b"><apply id="A2.I6.i3.I1.i2.I1.i1.p1.1.m1.1.1.cmml" xref="A2.I6.i3.I1.i2.I1.i1.p1.1.m1.1.1"><in id="A2.I6.i3.I1.i2.I1.i1.p1.1.m1.1.1.1.cmml" xref="A2.I6.i3.I1.i2.I1.i1.p1.1.m1.1.1.1"></in><ci id="A2.I6.i3.I1.i2.I1.i1.p1.1.m1.1.1.2.cmml" xref="A2.I6.i3.I1.i2.I1.i1.p1.1.m1.1.1.2">𝑖</ci><apply id="A2.I6.i3.I1.i2.I1.i1.p1.1.m1.1.1.3.cmml" xref="A2.I6.i3.I1.i2.I1.i1.p1.1.m1.1.1.3"><csymbol cd="ambiguous" id="A2.I6.i3.I1.i2.I1.i1.p1.1.m1.1.1.3.1.cmml" xref="A2.I6.i3.I1.i2.I1.i1.p1.1.m1.1.1.3">subscript</csymbol><ci id="A2.I6.i3.I1.i2.I1.i1.p1.1.m1.1.1.3.2.cmml" xref="A2.I6.i3.I1.i2.I1.i1.p1.1.m1.1.1.3.2">𝒞</ci><ci id="A2.I6.i3.I1.i2.I1.i1.p1.1.m1.1.1.3.3.cmml" xref="A2.I6.i3.I1.i2.I1.i1.p1.1.m1.1.1.3.3">𝑐</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I6.i3.I1.i2.I1.i1.p1.1.m1.1c">i\in\mathcal{C}_{c}</annotation></semantics></math>, the simulator sends out a <math id="A2.I6.i3.I1.i2.I1.i1.p1.2.m2.1" class="ltx_Math" alttext="0" display="inline"><semantics id="A2.I6.i3.I1.i2.I1.i1.p1.2.m2.1a"><mn id="A2.I6.i3.I1.i2.I1.i1.p1.2.m2.1.1" xref="A2.I6.i3.I1.i2.I1.i1.p1.2.m2.1.1.cmml">0</mn><annotation-xml encoding="MathML-Content" id="A2.I6.i3.I1.i2.I1.i1.p1.2.m2.1b"><cn type="integer" id="A2.I6.i3.I1.i2.I1.i1.p1.2.m2.1.1.cmml" xref="A2.I6.i3.I1.i2.I1.i1.p1.2.m2.1.1">0</cn></annotation-xml></semantics></math>-vector to the ideal functionality on behalf of the corrupted client <math id="A2.I6.i3.I1.i2.I1.i1.p1.3.m3.1" class="ltx_Math" alttext="i" display="inline"><semantics id="A2.I6.i3.I1.i2.I1.i1.p1.3.m3.1a"><mi id="A2.I6.i3.I1.i2.I1.i1.p1.3.m3.1.1" xref="A2.I6.i3.I1.i2.I1.i1.p1.3.m3.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="A2.I6.i3.I1.i2.I1.i1.p1.3.m3.1b"><ci id="A2.I6.i3.I1.i2.I1.i1.p1.3.m3.1.1.cmml" xref="A2.I6.i3.I1.i2.I1.i1.p1.3.m3.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.I6.i3.I1.i2.I1.i1.p1.3.m3.1c">i</annotation></semantics></math>.</p>
</div>
</li>
<li id="A2.I6.i3.I1.i2.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">ii.</span> 
<div id="A2.I6.i3.I1.i2.I1.i2.p1" class="ltx_para">
<p id="A2.I6.i3.I1.i2.I1.i2.p1.1" class="ltx_p">The simulator sends <math id="A2.I6.i3.I1.i2.I1.i2.p1.1.m1.1" class="ltx_Math" alttext="\mathcal{C}_{a}" display="inline"><semantics id="A2.I6.i3.I1.i2.I1.i2.p1.1.m1.1a"><msub id="A2.I6.i3.I1.i2.I1.i2.p1.1.m1.1.1" xref="A2.I6.i3.I1.i2.I1.i2.p1.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.I6.i3.I1.i2.I1.i2.p1.1.m1.1.1.2" xref="A2.I6.i3.I1.i2.I1.i2.p1.1.m1.1.1.2.cmml">𝒞</mi><mi id="A2.I6.i3.I1.i2.I1.i2.p1.1.m1.1.1.3" xref="A2.I6.i3.I1.i2.I1.i2.p1.1.m1.1.1.3.cmml">a</mi></msub><annotation-xml encoding="MathML-Content" id="A2.I6.i3.I1.i2.I1.i2.p1.1.m1.1b"><apply id="A2.I6.i3.I1.i2.I1.i2.p1.1.m1.1.1.cmml" xref="A2.I6.i3.I1.i2.I1.i2.p1.1.m1.1.1"><csymbol cd="ambiguous" id="A2.I6.i3.I1.i2.I1.i2.p1.1.m1.1.1.1.cmml" xref="A2.I6.i3.I1.i2.I1.i2.p1.1.m1.1.1">subscript</csymbol><ci id="A2.I6.i3.I1.i2.I1.i2.p1.1.m1.1.1.2.cmml" xref="A2.I6.i3.I1.i2.I1.i2.p1.1.m1.1.1.2">𝒞</ci><ci id="A2.I6.i3.I1.i2.I1.i2.p1.1.m1.1.1.3.cmml" xref="A2.I6.i3.I1.i2.I1.i2.p1.1.m1.1.1.3">𝑎</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I6.i3.I1.i2.I1.i2.p1.1.m1.1c">\mathcal{C}_{a}</annotation></semantics></math> to the ideal functionality.</p>
</div>
</li>
<li id="A2.I6.i3.I1.i2.I1.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">iii.</span> 
<div id="A2.I6.i3.I1.i2.I1.i3.p1" class="ltx_para">
<p id="A2.I6.i3.I1.i2.I1.i3.p1.1" class="ltx_p">The simulator receives <math id="A2.I6.i3.I1.i2.I1.i3.p1.1.m1.1" class="ltx_Math" alttext="V" display="inline"><semantics id="A2.I6.i3.I1.i2.I1.i3.p1.1.m1.1a"><mi id="A2.I6.i3.I1.i2.I1.i3.p1.1.m1.1.1" xref="A2.I6.i3.I1.i2.I1.i3.p1.1.m1.1.1.cmml">V</mi><annotation-xml encoding="MathML-Content" id="A2.I6.i3.I1.i2.I1.i3.p1.1.m1.1b"><ci id="A2.I6.i3.I1.i2.I1.i3.p1.1.m1.1.1.cmml" xref="A2.I6.i3.I1.i2.I1.i3.p1.1.m1.1.1">𝑉</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.I6.i3.I1.i2.I1.i3.p1.1.m1.1c">V</annotation></semantics></math>, which is the sum of all inputs of honest clients, as the server from the ideal functionality.</p>
</div>
</li>
<li id="A2.I6.i3.I1.i2.I1.i4" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">iv.</span> 
<div id="A2.I6.i3.I1.i2.I1.i4.p1" class="ltx_para ltx_noindent">
<p id="A2.I6.i3.I1.i2.I1.i4.p1.2" class="ltx_p">The simulator sends <math id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2" class="ltx_Math" alttext="(\sum m)+(\sum_{i\in\mathcal{C}_{a}}\tilde{m}_{i})-V" display="inline"><semantics id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2a"><mrow id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.cmml"><mrow id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.cmml"><mrow id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.1.1.1.1.1" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.1.1.1.1.1.2" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.1.1.1.1.1.1.cmml">(</mo><mrow id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.1.1.1.1.1.1" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.1.1.1.1.1.1.cmml"><mo lspace="0em" id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.1.1.1.1.1.1.1" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.1.1.1.1.1.1.1.cmml">∑</mo><mi id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.1.1.1.1.1.1.2" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.1.1.1.1.1.1.2.cmml">m</mi></mrow><mo stretchy="false" id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.1.1.1.1.1.3" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.1.1.1.1.1.1.cmml">)</mo></mrow><mo id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.3" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.3.cmml">+</mo><mrow id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.cmml"><mo stretchy="false" id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.2" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.cmml">(</mo><mrow id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.cmml"><msub id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.1" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.1.cmml"><mo lspace="0em" id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.1.2" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.1.2.cmml">∑</mo><mrow id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.cmml"><mi id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.2" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.2.cmml">i</mi><mo id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.1" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.1.cmml">∈</mo><msub id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.3" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.3.2" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.3.2.cmml">𝒞</mi><mi id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.3.3" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.3.3.cmml">a</mi></msub></mrow></msub><msub id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.2" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.2.cmml"><mover accent="true" id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.2.2" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.2.2.cmml"><mi id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.2.2.2" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.2.2.2.cmml">m</mi><mo id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.2.2.1" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.2.2.1.cmml">~</mo></mover><mi id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.2.3" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.2.3.cmml">i</mi></msub></mrow><mo stretchy="false" id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.3" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.cmml">)</mo></mrow></mrow><mo id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.3" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.3.cmml">−</mo><mi id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.4" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.4.cmml">V</mi></mrow><annotation-xml encoding="MathML-Content" id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2b"><apply id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.cmml" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2"><minus id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.3.cmml" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.3"></minus><apply id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.cmml" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2"><plus id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.3.cmml" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.3"></plus><apply id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.1.1.1.1.1.1.cmml" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.1.1.1.1.1"><sum id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.1.1.1.1.1.1.1.cmml" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.1.1.1.1.1.1.1"></sum><ci id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.1.1.1.1.1.1.2.cmml" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.1.1.1.1.1.1.2">𝑚</ci></apply><apply id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.cmml" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1"><apply id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.1.cmml" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.1"><csymbol cd="ambiguous" id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.1.1.cmml" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.1">subscript</csymbol><sum id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.1.2.cmml" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.1.2"></sum><apply id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.cmml" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3"><in id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.1.cmml" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.1"></in><ci id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.2.cmml" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.2">𝑖</ci><apply id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.3.cmml" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.3"><csymbol cd="ambiguous" id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.3.1.cmml" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.3">subscript</csymbol><ci id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.3.2.cmml" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.3.2">𝒞</ci><ci id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.3.3.cmml" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.1.3.3.3">𝑎</ci></apply></apply></apply><apply id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.2.cmml" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.2"><csymbol cd="ambiguous" id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.2.1.cmml" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.2">subscript</csymbol><apply id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.2.2.cmml" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.2.2"><ci id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.2.2.1.cmml" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.2.2.1">~</ci><ci id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.2.2.2.cmml" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.2.2.2">𝑚</ci></apply><ci id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.2.3.cmml" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.2.2.1.1.2.3">𝑖</ci></apply></apply></apply><ci id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.4.cmml" xref="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2.2.4">𝑉</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I6.i3.I1.i2.I1.i4.p1.1.m1.2c">(\sum m)+(\sum_{i\in\mathcal{C}_{a}}\tilde{m}_{i})-V</annotation></semantics></math> to the server in the real world protocol on behalf of the trusted party, where <math id="A2.I6.i3.I1.i2.I1.i4.p1.2.m2.1" class="ltx_Math" alttext="\sum m" display="inline"><semantics id="A2.I6.i3.I1.i2.I1.i4.p1.2.m2.1a"><mrow id="A2.I6.i3.I1.i2.I1.i4.p1.2.m2.1.1" xref="A2.I6.i3.I1.i2.I1.i4.p1.2.m2.1.1.cmml"><mo id="A2.I6.i3.I1.i2.I1.i4.p1.2.m2.1.1.1" xref="A2.I6.i3.I1.i2.I1.i4.p1.2.m2.1.1.1.cmml">∑</mo><mi id="A2.I6.i3.I1.i2.I1.i4.p1.2.m2.1.1.2" xref="A2.I6.i3.I1.i2.I1.i4.p1.2.m2.1.1.2.cmml">m</mi></mrow><annotation-xml encoding="MathML-Content" id="A2.I6.i3.I1.i2.I1.i4.p1.2.m2.1b"><apply id="A2.I6.i3.I1.i2.I1.i4.p1.2.m2.1.1.cmml" xref="A2.I6.i3.I1.i2.I1.i4.p1.2.m2.1.1"><sum id="A2.I6.i3.I1.i2.I1.i4.p1.2.m2.1.1.1.cmml" xref="A2.I6.i3.I1.i2.I1.i4.p1.2.m2.1.1.1"></sum><ci id="A2.I6.i3.I1.i2.I1.i4.p1.2.m2.1.1.2.cmml" xref="A2.I6.i3.I1.i2.I1.i4.p1.2.m2.1.1.2">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I6.i3.I1.i2.I1.i4.p1.2.m2.1c">\sum m</annotation></semantics></math> is the running sum maintained by the trusted party.</p>
</div>
</li>
</ol>
</div>
</li>
<li id="A2.I6.i3.I1.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">(c)</span> 
<div id="A2.I6.i3.I1.i3.p1" class="ltx_para ltx_noindent">
<p id="A2.I6.i3.I1.i3.p1.1" class="ltx_p">In <a href="#A2.I3.i8" title="In Figure 16 ‣ B.3 Protocol Detail ‣ Appendix B Protocol Design and Security Proof" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Item</span> <span class="ltx_text ltx_ref_tag">8</span></a>, no matter what the adversary outputs in the real world protocol, the simulator outputs the same content as the same role in the ideal functionality.</p>
</div>
</li>
</ol>
<p id="A2.I6.i3.p1.3" class="ltx_p">This is exactly the ideal functionality execution with the simulator.</p>
</div>
<div id="A2.I6.i3.p2" class="ltx_para ltx_noindent">
<p id="A2.I6.i3.p2.1" class="ltx_p"><math id="A2.I6.i3.p2.1.m1.1" class="ltx_Math" alttext="\mathbf{Hybrid}_{1}\approx\mathbf{Hybrid}_{2}" display="inline"><semantics id="A2.I6.i3.p2.1.m1.1a"><mrow id="A2.I6.i3.p2.1.m1.1.1" xref="A2.I6.i3.p2.1.m1.1.1.cmml"><msub id="A2.I6.i3.p2.1.m1.1.1.2" xref="A2.I6.i3.p2.1.m1.1.1.2.cmml"><mi id="A2.I6.i3.p2.1.m1.1.1.2.2" xref="A2.I6.i3.p2.1.m1.1.1.2.2.cmml">𝐇𝐲𝐛𝐫𝐢𝐝</mi><mn id="A2.I6.i3.p2.1.m1.1.1.2.3" xref="A2.I6.i3.p2.1.m1.1.1.2.3.cmml">1</mn></msub><mo id="A2.I6.i3.p2.1.m1.1.1.1" xref="A2.I6.i3.p2.1.m1.1.1.1.cmml">≈</mo><msub id="A2.I6.i3.p2.1.m1.1.1.3" xref="A2.I6.i3.p2.1.m1.1.1.3.cmml"><mi id="A2.I6.i3.p2.1.m1.1.1.3.2" xref="A2.I6.i3.p2.1.m1.1.1.3.2.cmml">𝐇𝐲𝐛𝐫𝐢𝐝</mi><mn id="A2.I6.i3.p2.1.m1.1.1.3.3" xref="A2.I6.i3.p2.1.m1.1.1.3.3.cmml">2</mn></msub></mrow><annotation-xml encoding="MathML-Content" id="A2.I6.i3.p2.1.m1.1b"><apply id="A2.I6.i3.p2.1.m1.1.1.cmml" xref="A2.I6.i3.p2.1.m1.1.1"><approx id="A2.I6.i3.p2.1.m1.1.1.1.cmml" xref="A2.I6.i3.p2.1.m1.1.1.1"></approx><apply id="A2.I6.i3.p2.1.m1.1.1.2.cmml" xref="A2.I6.i3.p2.1.m1.1.1.2"><csymbol cd="ambiguous" id="A2.I6.i3.p2.1.m1.1.1.2.1.cmml" xref="A2.I6.i3.p2.1.m1.1.1.2">subscript</csymbol><ci id="A2.I6.i3.p2.1.m1.1.1.2.2.cmml" xref="A2.I6.i3.p2.1.m1.1.1.2.2">𝐇𝐲𝐛𝐫𝐢𝐝</ci><cn type="integer" id="A2.I6.i3.p2.1.m1.1.1.2.3.cmml" xref="A2.I6.i3.p2.1.m1.1.1.2.3">1</cn></apply><apply id="A2.I6.i3.p2.1.m1.1.1.3.cmml" xref="A2.I6.i3.p2.1.m1.1.1.3"><csymbol cd="ambiguous" id="A2.I6.i3.p2.1.m1.1.1.3.1.cmml" xref="A2.I6.i3.p2.1.m1.1.1.3">subscript</csymbol><ci id="A2.I6.i3.p2.1.m1.1.1.3.2.cmml" xref="A2.I6.i3.p2.1.m1.1.1.3.2">𝐇𝐲𝐛𝐫𝐢𝐝</ci><cn type="integer" id="A2.I6.i3.p2.1.m1.1.1.3.3.cmml" xref="A2.I6.i3.p2.1.m1.1.1.3.3">2</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.I6.i3.p2.1.m1.1c">\mathbf{Hybrid}_{1}\approx\mathbf{Hybrid}_{2}</annotation></semantics></math>:
The indistinguishability comes from the fact that</p>
<ul id="A2.I6.i3.I2" class="ltx_itemize">
<li id="A2.I6.i3.I2.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="A2.I6.i3.I2.i1.p1" class="ltx_para">
<p id="A2.I6.i3.I2.i1.p1.1" class="ltx_p">The ideal functionality will correctly sum up the honest clients’ inputs.</p>
</div>
</li>
<li id="A2.I6.i3.I2.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="A2.I6.i3.I2.i2.p1" class="ltx_para ltx_noindent">
<p id="A2.I6.i3.I2.i2.p1.1" class="ltx_p">The simulator’s output in the ideal functionality for each role it plays is identical to the adversary’s output in the real world protocol for the same role.</p>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</section>
</section>
<section id="A3" class="ltx_appendix">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix C </span>Deployment with Intel SGX</h2>

<div id="A3.p1" class="ltx_para ltx_noindent">
<p id="A3.p1.1" class="ltx_p">The secure aggregation protocol (<a href="#A2.F16" title="In B.3 Protocol Detail ‣ Appendix B Protocol Design and Security Proof" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">16</span></a>) we present in <a href="#A2.SS2" title="B.2 Overview of Our Solution ‣ Appendix B Protocol Design and Security Proof" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Section</span> <span class="ltx_text ltx_ref_tag">B.2</span></a> involves a trusted party. When deploying this protocol, we use a Intel SGX enclave to play the role of this trusted party. To enforce the honest behavior of this trusted party, we have to ensure the following two security guarantees.</p>
</div>
<div id="A3.p2" class="ltx_para ltx_noindent">
<ol id="A3.I1" class="ltx_enumerate">
<li id="A3.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span> 
<div id="A3.I1.i1.p1" class="ltx_para">
<p id="A3.I1.i1.p1.1" class="ltx_p">Confidentiality: the trusted party realized by the enclave shares no information with any other party except what is specified in the protocol.</p>
</div>
</li>
<li id="A3.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span> 
<div id="A3.I1.i2.p1" class="ltx_para ltx_noindent">
<p id="A3.I1.i2.p1.3" class="ltx_p">Integrity: the trusted party realized by the enclave executes the protocol with the correct public parameters (including the group <math id="A3.I1.i2.p1.1.m1.1" class="ltx_Math" alttext="G" display="inline"><semantics id="A3.I1.i2.p1.1.m1.1a"><mi id="A3.I1.i2.p1.1.m1.1.1" xref="A3.I1.i2.p1.1.m1.1.1.cmml">G</mi><annotation-xml encoding="MathML-Content" id="A3.I1.i2.p1.1.m1.1b"><ci id="A3.I1.i2.p1.1.m1.1.1.cmml" xref="A3.I1.i2.p1.1.m1.1.1">𝐺</ci></annotation-xml><annotation encoding="application/x-tex" id="A3.I1.i2.p1.1.m1.1c">G</annotation></semantics></math>, the vector length <math id="A3.I1.i2.p1.2.m2.1" class="ltx_Math" alttext="\ell" display="inline"><semantics id="A3.I1.i2.p1.2.m2.1a"><mi mathvariant="normal" id="A3.I1.i2.p1.2.m2.1.1" xref="A3.I1.i2.p1.2.m2.1.1.cmml">ℓ</mi><annotation-xml encoding="MathML-Content" id="A3.I1.i2.p1.2.m2.1b"><ci id="A3.I1.i2.p1.2.m2.1.1.cmml" xref="A3.I1.i2.p1.2.m2.1.1">ℓ</ci></annotation-xml><annotation encoding="application/x-tex" id="A3.I1.i2.p1.2.m2.1c">\ell</annotation></semantics></math> and the threshold <math id="A3.I1.i2.p1.3.m3.1" class="ltx_Math" alttext="t" display="inline"><semantics id="A3.I1.i2.p1.3.m3.1a"><mi id="A3.I1.i2.p1.3.m3.1.1" xref="A3.I1.i2.p1.3.m3.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="A3.I1.i2.p1.3.m3.1b"><ci id="A3.I1.i2.p1.3.m3.1.1.cmml" xref="A3.I1.i2.p1.3.m3.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="A3.I1.i2.p1.3.m3.1c">t</annotation></semantics></math>) without any deviation from the protocol.</p>
</div>
</li>
</ol>
</div>
<div id="A3.p3" class="ltx_para ltx_noindent">
<p id="A3.p3.1" class="ltx_p">In this section, we see how we employ remote attestations and verifiable logs to ensure these properties.</p>
</div>
<section id="A3.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">C.1 </span>Enforce Security with Remote attestations</h3>

<div id="A3.SS1.p1" class="ltx_para ltx_noindent">
<p id="A3.SS1.p1.1" class="ltx_p">Remote attestation technique was originally designed to allow an enclave owner to verify the identity of a trusted binary executed in the cloud. In our use case, there is nothing secret about the code or the initial parameters inside the enclave. Therefore these data can be provided to the clients to allow them play the role of enclave owner and to verify the identity of the trusted binary that plays the role of the trusted party. To be more specific, the extra steps specified in <a href="#A3.F19" title="In C.1 Enforce Security with Remote attestations ‣ Appendix C Deployment with Intel SGX" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">19</span></a> are taken on top of the secure aggregation protocol in <a href="#A2.F16" title="In B.3 Protocol Detail ‣ Appendix B Protocol Design and Security Proof" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">16</span></a> to ensure the honest behavior of the trusted party.</p>
</div>
<figure id="A3.F19" class="ltx_figure">
<p id="A3.F19.1" class="ltx_p ltx_align_center">
<span id="A3.F19.1.1" class="ltx_inline-block ltx_minipage ltx_align_middle ltx_framed ltx_framed_rectangle" style="width:411.9pt;">
<span id="A3.I2" class="ltx_enumerate">
<span id="A3.I2.i0" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">0.</span> 
<span id="A3.I2.i0.p1" class="ltx_para">
<span id="A3.I2.i0.p1.1" class="ltx_p"><span id="A3.I2.i0.p1.1.1" class="ltx_text ltx_font_bold">Before executing the protocol</span>, the code of the trusted party running inside the Intel SGX enclave is open sourced in advance along with the hash of the trusted binary, such that the community can exam the code and rebuild the trusted binary running inside the enclave and verify against the claimed hash.</span>
</span></span>
<span id="A3.I2.i1" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">1.</span> 
<span id="A3.I2.i1.p1" class="ltx_para">
<span id="A3.I2.i1.p1.1" class="ltx_p"><span id="A3.I2.i1.p1.1.1" class="ltx_text ltx_font_bold">In <a href="#A2.I3.i1" title="In Figure 16 ‣ B.3 Protocol Detail ‣ Appendix B Protocol Design and Security Proof" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Item</span> <span class="ltx_text ltx_ref_tag">1</span></a></span>, the Intel SGX enclave, playing the role of the trusted party, generates an attestation quote along with each DH key exchange request and sends it to the server. This attestation quote can be used to verify the initial state of the enclave. It consists of the DH key exchange request, the hash of running trusted binary, and the hash of public parameters for the protocol.</span>
</span></span>
<span id="A3.I2.i2" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">2.</span> 
<span id="A3.I2.i2.p1" class="ltx_para">
<span id="A3.I2.i2.p1.1" class="ltx_p"><span id="A3.I2.i2.p1.1.1" class="ltx_text ltx_font_bold">In <a href="#A2.I3.i2" title="In Figure 16 ‣ B.3 Protocol Detail ‣ Appendix B Protocol Design and Security Proof" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Item</span> <span class="ltx_text ltx_ref_tag">2</span></a></span>, the server sends the public parameters used in the protocol and the corresponding attestation quotes to the clients.</span>
</span></span>
<span id="A3.I2.i3" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">3.</span> 
<span id="A3.I2.i3.p1" class="ltx_para ltx_noindent">
<span id="A3.I2.i3.p1.1" class="ltx_p"><span id="A3.I2.i3.p1.1.1" class="ltx_text ltx_font_bold">In <a href="#A2.I3.i3" title="In Figure 16 ‣ B.3 Protocol Detail ‣ Appendix B Protocol Design and Security Proof" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Item</span> <span class="ltx_text ltx_ref_tag">3</span></a></span>, upon receiving an attestation quote along with the key exchange request from the server, the client verifies the quote to ensure:</span>
<span id="A3.I2.i3.I1" class="ltx_enumerate">
<span id="A3.I2.i3.I1.i1" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">(a)</span> 
<span id="A3.I2.i3.I1.i1.p1" class="ltx_para">
<span id="A3.I2.i3.I1.i1.p1.1" class="ltx_p">the hash of the running trusted binary is the same as the one published with the open sourced code;</span>
</span></span>
<span id="A3.I2.i3.I1.i2" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">(b)</span> 
<span id="A3.I2.i3.I1.i2.p1" class="ltx_para ltx_noindent">
<span id="A3.I2.i3.I1.i2.p1.1" class="ltx_p">the hash of the public parameters provided by the server matches the hash included in the attestation quote.</span>
</span></span>
</span>
<span id="A3.I2.i3.p1.2" class="ltx_p">The client aborts if any of these conditions cannot be verified.</span>
</span></span>
</span>
</span>
</p>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 19: </span>Deploying the protocol with Intel SGX enclaves</figcaption>
</figure>
<div id="A3.SS1.p2" class="ltx_para ltx_noindent">
<p id="A3.SS1.p2.1" class="ltx_p">We follow the standard assumptions of SGX:</p>
<ol id="A3.I3" class="ltx_enumerate">
<li id="A3.I3.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span> 
<div id="A3.I3.i1.p1" class="ltx_para">
<p id="A3.I3.i1.p1.1" class="ltx_p">It is infeasible to forge an attestation quote that does not match the running trusted binary and/or the hash of public parameters as the custom payload, but can be verified against Intel’s collateral.</p>
</div>
</li>
<li id="A3.I3.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span> 
<div id="A3.I3.i2.p1" class="ltx_para">
<p id="A3.I3.i2.p1.1" class="ltx_p">It is infeasible to tamper with the trusted binary executed inside the enclave.</p>
</div>
</li>
<li id="A3.I3.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">3.</span> 
<div id="A3.I3.i3.p1" class="ltx_para ltx_noindent">
<p id="A3.I3.i3.p1.1" class="ltx_p">It is infeasible to access the data stored inside the enclave except via the predefined APIs.</p>
</div>
</li>
</ol>
</div>
<div id="A3.SS1.p3" class="ltx_para ltx_noindent">
<p id="A3.SS1.p3.1" class="ltx_p">Under these assumptions and other standard assumptions<span id="footnote4" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">4</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">4</sup><span class="ltx_tag ltx_tag_note">4</span>Including: 1. the hash algorithm we use is collusion resistant; and 2. AES is a secure block cipher.</span></span></span>
, clients accept an attestation quote only if:</p>
<ol id="A3.I4" class="ltx_enumerate">
<li id="A3.I4.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span> 
<div id="A3.I4.i1.p1" class="ltx_para">
<p id="A3.I4.i1.p1.1" class="ltx_p">the quote is generated by a legitimate enclave;</p>
</div>
</li>
<li id="A3.I4.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span> 
<div id="A3.I4.i2.p1" class="ltx_para">
<p id="A3.I4.i2.p1.1" class="ltx_p">the enclave is running the predefined code;</p>
</div>
</li>
<li id="A3.I4.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">3.</span> 
<div id="A3.I4.i3.p1" class="ltx_para ltx_noindent">
<p id="A3.I4.i3.p1.1" class="ltx_p">the enclave is running with server-claimed parameters;</p>
</div>
</li>
</ol>
</div>
<div id="A3.SS1.p4" class="ltx_para ltx_noindent">
<p id="A3.SS1.p4.1" class="ltx_p">These arguments jointly assert the enclave is faithfully playing the role of the trusted party. The clients will proceed in the protocol with their private inputs only if they can validate the faithful trusted party. With that said, the server will not hear back from clients unless attestation quotes from a legitimate enclave with correct trusted binary and parameters are forwarded to the clients.</p>
</div>
<div id="A3.SS1.p5" class="ltx_para ltx_noindent">
<p id="A3.SS1.p5.1" class="ltx_p">In addition, the server cannot successfully tamper with the data that is meant to be sent into the enclave, i.e. the DH key exchange response and the encrypted seed. This is because the decryption fails if any of them is modified by the server. Furthermore, the encrypted seed and the response is not accepted by another enclave instance either since it will not have the necessary private randomness to recover the shared key correctly. In summary, the server must use exactly the same enclave during the whole protocol, otherwise it is effectively dropping clients.</p>
</div>
</section>
<section id="A3.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">C.2 </span>Updating the Trusted Binary with Verifiable Logs</h3>

<div id="A3.SS2.p1" class="ltx_para ltx_noindent">
<p id="A3.SS2.p1.1" class="ltx_p">Remote attestations allow clients to validate the trusted binary’s identity against a hardcoded hash. Such design makes it impossible to update the trusted binary in the future without updating the clients at the same time. To ease the updating process, verifiable logs<cite class="ltx_cite ltx_citemacro_cite"><a href="#bib.bib2" title="" class="ltx_ref">ver </a>; <a href="#bib.bib1" title="" class="ltx_ref">tri </a></cite> can be used to note down any changes made to the code that will run inside an enclave.</p>
</div>
<div id="A3.SS2.p2" class="ltx_para ltx_noindent">
<p id="A3.SS2.p2.1" class="ltx_p">A verifiable log is implemented by a Merkle tree and append-only. Each new record appended to the end of the log is added as a new leaf in the underlying Merkle tree. The hash of the root of the Merkle tree serves as the snapshot of the whole log. An inclusion proof can be generated to demonstrate a record is indeed included in the log. A consistency check can be performed between two snapshots to decide if the corresponding append-only logs are consistent with each other.</p>
</div>
<div id="A3.SS2.p3" class="ltx_para ltx_noindent">
<p id="A3.SS2.p3.1" class="ltx_p">There are several steps to integrate this technique, as detailed in <a href="#A3.F20" title="In C.2 Updating the Trusted Binary with Verifiable Logs ‣ Appendix C Deployment with Intel SGX" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">20</span></a>.</p>
</div>
<figure id="A3.F20" class="ltx_figure">
<p id="A3.F20.1" class="ltx_p ltx_align_center">
<span id="A3.F20.1.1" class="ltx_inline-block ltx_minipage ltx_align_middle ltx_framed ltx_framed_rectangle" style="width:411.9pt;">
<span id="A3.I5" class="ltx_enumerate">
<span id="A3.I5.i0" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">0.</span> 
<span id="A3.I5.i0.p1" class="ltx_para">
<span id="A3.I5.i0.p1.1" class="ltx_p"><span id="A3.I5.i0.p1.1.1" class="ltx_text ltx_font_bold">Before releasing the trusted binary</span>, append the identity and manifest of the trusted binary to the verifiable log if it is not already there.</span>
</span></span>
<span id="A3.I5.i1" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">1.</span> 
<span id="A3.I5.i1.p1" class="ltx_para">
<span id="A3.I5.i1.p1.1" class="ltx_p"><span id="A3.I5.i1.p1.1.1" class="ltx_text ltx_font_bold">In <a href="#A2.I3.i2" title="In Figure 16 ‣ B.3 Protocol Detail ‣ Appendix B Protocol Design and Security Proof" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Item</span> <span class="ltx_text ltx_ref_tag">2</span></a></span>, the server needs to generate an inclusion proof that the trusted binary used in the protocol is included in the latest snapshot.</span>
</span></span>
<span id="A3.I5.i2" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">2.</span> 
<span id="A3.I5.i2.p1" class="ltx_para ltx_noindent">
<span id="A3.I5.i2.p1.1" class="ltx_p"><span id="A3.I5.i2.p1.1.1" class="ltx_text ltx_font_bold">In <a href="#A2.I3.i3" title="In Figure 16 ‣ B.3 Protocol Detail ‣ Appendix B Protocol Design and Security Proof" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Item</span> <span class="ltx_text ltx_ref_tag">3</span></a></span>, the client requests for the latest log snapshot from the server and validates the inclusion proof. The client aborts if the proof cannot be validated.</span>
</span></span>
</span>
<span id="A3.F20.1.1.1" class="ltx_p"><span id="A3.F20.1.1.1.1" class="ltx_text ltx_font_bold">Auditing:</span> Anyone can audit the code running inside the enclave with the following steps:</span>
<span id="A3.I6" class="ltx_enumerate">
<span id="A3.I6.i1" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">1.</span> 
<span id="A3.I6.i1.p1" class="ltx_para">
<span id="A3.I6.i1.p1.1" class="ltx_p">Request for the latest log snapshot via the same API.</span>
</span></span>
<span id="A3.I6.i2" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">2.</span> 
<span id="A3.I6.i2.p1" class="ltx_para">
<span id="A3.I6.i2.p1.1" class="ltx_p">Request for all the records (i.e. the trusted binaries) in the log and any of the corresponding source code used for building the trusted binaries to audit.</span>
</span></span>
<span id="A3.I6.i3" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_item">3.</span> 
<span id="A3.I6.i3.p1" class="ltx_para ltx_noindent">
<span id="A3.I6.i3.p1.1" class="ltx_p">Check if the source code can be used to build the expected trust binaries. Verify if there is any diversion from the protocol design in the binary.</span>
</span></span>
</span>
</span>
</p>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 20: </span>Deploying the protocol with verifiable logs</figcaption>
</figure>
<div id="A3.SS2.p4" class="ltx_para ltx_noindent">
<p id="A3.SS2.p4.1" class="ltx_p">Note that both clients and auditors use the same API to request the log’s latest snapshot. Therefore the auditors and clients share the same snapshots. Due to the unforgeability of the underlying secure hashes, any logged trusted binary cannot avoid audition without being noticed. On the other hand, clients will only proceed in the protocol only if the trusted binary is logged. In summary, no trusted binary that interacts with clients can avoid audition without getting caught.</p>
</div>
<div id="A3.SS2.p5" class="ltx_para ltx_noindent">
<p id="A3.SS2.p5.1" class="ltx_p">With this auditing mechanism in place and sufficient public auditors watching the latest snapshots, the trusted binary can be updated on a regular basis without updating on the client side.</p>
</div>
</section>
</section>
<section id="A4" class="ltx_appendix">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix D </span>Fixed Point Conversion</h2>

<div id="A4.p1" class="ltx_para ltx_noindent">
<p id="A4.p1.15" class="ltx_p">Our secure aggregation protocol works with a finite group. On the other hand, machine learning algorithms operate on real numbers. Hence we need to convert between fixed point and floating point. We observe that plain integer additions and element additions in an integral finite group (e.g. <math id="A4.p1.1.m1.1" class="ltx_Math" alttext="\mathbb{Z}_{32}" display="inline"><semantics id="A4.p1.1.m1.1a"><msub id="A4.p1.1.m1.1.1" xref="A4.p1.1.m1.1.1.cmml"><mi id="A4.p1.1.m1.1.1.2" xref="A4.p1.1.m1.1.1.2.cmml">ℤ</mi><mn id="A4.p1.1.m1.1.1.3" xref="A4.p1.1.m1.1.1.3.cmml">32</mn></msub><annotation-xml encoding="MathML-Content" id="A4.p1.1.m1.1b"><apply id="A4.p1.1.m1.1.1.cmml" xref="A4.p1.1.m1.1.1"><csymbol cd="ambiguous" id="A4.p1.1.m1.1.1.1.cmml" xref="A4.p1.1.m1.1.1">subscript</csymbol><ci id="A4.p1.1.m1.1.1.2.cmml" xref="A4.p1.1.m1.1.1.2">ℤ</ci><cn type="integer" id="A4.p1.1.m1.1.1.3.cmml" xref="A4.p1.1.m1.1.1.3">32</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A4.p1.1.m1.1c">\mathbb{Z}_{32}</annotation></semantics></math>) share the same behavior if there is no wrap-around/overflow. Therefore we cover the gap between real numbers and group elements by using integers as a bridge. A real number is picked as the scaling factor <math id="A4.p1.2.m2.1" class="ltx_Math" alttext="c" display="inline"><semantics id="A4.p1.2.m2.1a"><mi id="A4.p1.2.m2.1.1" xref="A4.p1.2.m2.1.1.cmml">c</mi><annotation-xml encoding="MathML-Content" id="A4.p1.2.m2.1b"><ci id="A4.p1.2.m2.1.1.cmml" xref="A4.p1.2.m2.1.1">𝑐</ci></annotation-xml><annotation encoding="application/x-tex" id="A4.p1.2.m2.1c">c</annotation></semantics></math> in advance. Any real number <math id="A4.p1.3.m3.1" class="ltx_Math" alttext="a" display="inline"><semantics id="A4.p1.3.m3.1a"><mi id="A4.p1.3.m3.1.1" xref="A4.p1.3.m3.1.1.cmml">a</mi><annotation-xml encoding="MathML-Content" id="A4.p1.3.m3.1b"><ci id="A4.p1.3.m3.1.1.cmml" xref="A4.p1.3.m3.1.1">𝑎</ci></annotation-xml><annotation encoding="application/x-tex" id="A4.p1.3.m3.1c">a</annotation></semantics></math> waiting for aggregation is multiplied by <math id="A4.p1.4.m4.1" class="ltx_Math" alttext="c" display="inline"><semantics id="A4.p1.4.m4.1a"><mi id="A4.p1.4.m4.1.1" xref="A4.p1.4.m4.1.1.cmml">c</mi><annotation-xml encoding="MathML-Content" id="A4.p1.4.m4.1b"><ci id="A4.p1.4.m4.1.1.cmml" xref="A4.p1.4.m4.1.1">𝑐</ci></annotation-xml><annotation encoding="application/x-tex" id="A4.p1.4.m4.1c">c</annotation></semantics></math> and rounded to the nearest integer <math id="A4.p1.5.m5.1" class="ltx_Math" alttext="[ca]" display="inline"><semantics id="A4.p1.5.m5.1a"><mrow id="A4.p1.5.m5.1.1.1" xref="A4.p1.5.m5.1.1.2.cmml"><mo stretchy="false" id="A4.p1.5.m5.1.1.1.2" xref="A4.p1.5.m5.1.1.2.1.cmml">[</mo><mrow id="A4.p1.5.m5.1.1.1.1" xref="A4.p1.5.m5.1.1.1.1.cmml"><mi id="A4.p1.5.m5.1.1.1.1.2" xref="A4.p1.5.m5.1.1.1.1.2.cmml">c</mi><mo lspace="0em" rspace="0em" id="A4.p1.5.m5.1.1.1.1.1" xref="A4.p1.5.m5.1.1.1.1.1.cmml">​</mo><mi id="A4.p1.5.m5.1.1.1.1.3" xref="A4.p1.5.m5.1.1.1.1.3.cmml">a</mi></mrow><mo stretchy="false" id="A4.p1.5.m5.1.1.1.3" xref="A4.p1.5.m5.1.1.2.1.cmml">]</mo></mrow><annotation-xml encoding="MathML-Content" id="A4.p1.5.m5.1b"><apply id="A4.p1.5.m5.1.1.2.cmml" xref="A4.p1.5.m5.1.1.1"><csymbol cd="latexml" id="A4.p1.5.m5.1.1.2.1.cmml" xref="A4.p1.5.m5.1.1.1.2">delimited-[]</csymbol><apply id="A4.p1.5.m5.1.1.1.1.cmml" xref="A4.p1.5.m5.1.1.1.1"><times id="A4.p1.5.m5.1.1.1.1.1.cmml" xref="A4.p1.5.m5.1.1.1.1.1"></times><ci id="A4.p1.5.m5.1.1.1.1.2.cmml" xref="A4.p1.5.m5.1.1.1.1.2">𝑐</ci><ci id="A4.p1.5.m5.1.1.1.1.3.cmml" xref="A4.p1.5.m5.1.1.1.1.3">𝑎</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A4.p1.5.m5.1c">[ca]</annotation></semantics></math>. For the next step an integral finite group (<math id="A4.p1.6.m6.1" class="ltx_Math" alttext="\mathbb{Z}_{n}" display="inline"><semantics id="A4.p1.6.m6.1a"><msub id="A4.p1.6.m6.1.1" xref="A4.p1.6.m6.1.1.cmml"><mi id="A4.p1.6.m6.1.1.2" xref="A4.p1.6.m6.1.1.2.cmml">ℤ</mi><mi id="A4.p1.6.m6.1.1.3" xref="A4.p1.6.m6.1.1.3.cmml">n</mi></msub><annotation-xml encoding="MathML-Content" id="A4.p1.6.m6.1b"><apply id="A4.p1.6.m6.1.1.cmml" xref="A4.p1.6.m6.1.1"><csymbol cd="ambiguous" id="A4.p1.6.m6.1.1.1.cmml" xref="A4.p1.6.m6.1.1">subscript</csymbol><ci id="A4.p1.6.m6.1.1.2.cmml" xref="A4.p1.6.m6.1.1.2">ℤ</ci><ci id="A4.p1.6.m6.1.1.3.cmml" xref="A4.p1.6.m6.1.1.3">𝑛</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A4.p1.6.m6.1c">\mathbb{Z}_{n}</annotation></semantics></math>) is picked to simulate the plain integer addition. We map <math id="A4.p1.7.m7.2" class="ltx_Math" alttext="[-\lfloor n/2\rfloor,\lceil n/2\rceil)" display="inline"><semantics id="A4.p1.7.m7.2a"><mrow id="A4.p1.7.m7.2.2.2" xref="A4.p1.7.m7.2.2.3.cmml"><mo stretchy="false" id="A4.p1.7.m7.2.2.2.3" xref="A4.p1.7.m7.2.2.3.cmml">[</mo><mrow id="A4.p1.7.m7.1.1.1.1" xref="A4.p1.7.m7.1.1.1.1.cmml"><mo id="A4.p1.7.m7.1.1.1.1a" xref="A4.p1.7.m7.1.1.1.1.cmml">−</mo><mrow id="A4.p1.7.m7.1.1.1.1.1.1" xref="A4.p1.7.m7.1.1.1.1.1.2.cmml"><mo stretchy="false" id="A4.p1.7.m7.1.1.1.1.1.1.2" xref="A4.p1.7.m7.1.1.1.1.1.2.1.cmml">⌊</mo><mrow id="A4.p1.7.m7.1.1.1.1.1.1.1" xref="A4.p1.7.m7.1.1.1.1.1.1.1.cmml"><mi id="A4.p1.7.m7.1.1.1.1.1.1.1.2" xref="A4.p1.7.m7.1.1.1.1.1.1.1.2.cmml">n</mi><mo id="A4.p1.7.m7.1.1.1.1.1.1.1.1" xref="A4.p1.7.m7.1.1.1.1.1.1.1.1.cmml">/</mo><mn id="A4.p1.7.m7.1.1.1.1.1.1.1.3" xref="A4.p1.7.m7.1.1.1.1.1.1.1.3.cmml">2</mn></mrow><mo stretchy="false" id="A4.p1.7.m7.1.1.1.1.1.1.3" xref="A4.p1.7.m7.1.1.1.1.1.2.1.cmml">⌋</mo></mrow></mrow><mo id="A4.p1.7.m7.2.2.2.4" xref="A4.p1.7.m7.2.2.3.cmml">,</mo><mrow id="A4.p1.7.m7.2.2.2.2.1" xref="A4.p1.7.m7.2.2.2.2.2.cmml"><mo stretchy="false" id="A4.p1.7.m7.2.2.2.2.1.2" xref="A4.p1.7.m7.2.2.2.2.2.1.cmml">⌈</mo><mrow id="A4.p1.7.m7.2.2.2.2.1.1" xref="A4.p1.7.m7.2.2.2.2.1.1.cmml"><mi id="A4.p1.7.m7.2.2.2.2.1.1.2" xref="A4.p1.7.m7.2.2.2.2.1.1.2.cmml">n</mi><mo id="A4.p1.7.m7.2.2.2.2.1.1.1" xref="A4.p1.7.m7.2.2.2.2.1.1.1.cmml">/</mo><mn id="A4.p1.7.m7.2.2.2.2.1.1.3" xref="A4.p1.7.m7.2.2.2.2.1.1.3.cmml">2</mn></mrow><mo stretchy="false" id="A4.p1.7.m7.2.2.2.2.1.3" xref="A4.p1.7.m7.2.2.2.2.2.1.cmml">⌉</mo></mrow><mo stretchy="false" id="A4.p1.7.m7.2.2.2.5" xref="A4.p1.7.m7.2.2.3.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="A4.p1.7.m7.2b"><interval closure="closed-open" id="A4.p1.7.m7.2.2.3.cmml" xref="A4.p1.7.m7.2.2.2"><apply id="A4.p1.7.m7.1.1.1.1.cmml" xref="A4.p1.7.m7.1.1.1.1"><minus id="A4.p1.7.m7.1.1.1.1.2.cmml" xref="A4.p1.7.m7.1.1.1.1"></minus><apply id="A4.p1.7.m7.1.1.1.1.1.2.cmml" xref="A4.p1.7.m7.1.1.1.1.1.1"><floor id="A4.p1.7.m7.1.1.1.1.1.2.1.cmml" xref="A4.p1.7.m7.1.1.1.1.1.1.2"></floor><apply id="A4.p1.7.m7.1.1.1.1.1.1.1.cmml" xref="A4.p1.7.m7.1.1.1.1.1.1.1"><divide id="A4.p1.7.m7.1.1.1.1.1.1.1.1.cmml" xref="A4.p1.7.m7.1.1.1.1.1.1.1.1"></divide><ci id="A4.p1.7.m7.1.1.1.1.1.1.1.2.cmml" xref="A4.p1.7.m7.1.1.1.1.1.1.1.2">𝑛</ci><cn type="integer" id="A4.p1.7.m7.1.1.1.1.1.1.1.3.cmml" xref="A4.p1.7.m7.1.1.1.1.1.1.1.3">2</cn></apply></apply></apply><apply id="A4.p1.7.m7.2.2.2.2.2.cmml" xref="A4.p1.7.m7.2.2.2.2.1"><ceiling id="A4.p1.7.m7.2.2.2.2.2.1.cmml" xref="A4.p1.7.m7.2.2.2.2.1.2"></ceiling><apply id="A4.p1.7.m7.2.2.2.2.1.1.cmml" xref="A4.p1.7.m7.2.2.2.2.1.1"><divide id="A4.p1.7.m7.2.2.2.2.1.1.1.cmml" xref="A4.p1.7.m7.2.2.2.2.1.1.1"></divide><ci id="A4.p1.7.m7.2.2.2.2.1.1.2.cmml" xref="A4.p1.7.m7.2.2.2.2.1.1.2">𝑛</ci><cn type="integer" id="A4.p1.7.m7.2.2.2.2.1.1.3.cmml" xref="A4.p1.7.m7.2.2.2.2.1.1.3">2</cn></apply></apply></interval></annotation-xml><annotation encoding="application/x-tex" id="A4.p1.7.m7.2c">[-\lfloor n/2\rfloor,\lceil n/2\rceil)</annotation></semantics></math> onto <math id="A4.p1.8.m8.1" class="ltx_Math" alttext="\mathbb{Z}_{n}" display="inline"><semantics id="A4.p1.8.m8.1a"><msub id="A4.p1.8.m8.1.1" xref="A4.p1.8.m8.1.1.cmml"><mi id="A4.p1.8.m8.1.1.2" xref="A4.p1.8.m8.1.1.2.cmml">ℤ</mi><mi id="A4.p1.8.m8.1.1.3" xref="A4.p1.8.m8.1.1.3.cmml">n</mi></msub><annotation-xml encoding="MathML-Content" id="A4.p1.8.m8.1b"><apply id="A4.p1.8.m8.1.1.cmml" xref="A4.p1.8.m8.1.1"><csymbol cd="ambiguous" id="A4.p1.8.m8.1.1.1.cmml" xref="A4.p1.8.m8.1.1">subscript</csymbol><ci id="A4.p1.8.m8.1.1.2.cmml" xref="A4.p1.8.m8.1.1.2">ℤ</ci><ci id="A4.p1.8.m8.1.1.3.cmml" xref="A4.p1.8.m8.1.1.3">𝑛</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A4.p1.8.m8.1c">\mathbb{Z}_{n}</annotation></semantics></math> by mapping integer <math id="A4.p1.9.m9.4" class="ltx_Math" alttext="0,1,\dots,\lceil n/2\rceil-1" display="inline"><semantics id="A4.p1.9.m9.4a"><mrow id="A4.p1.9.m9.4.4.1" xref="A4.p1.9.m9.4.4.2.cmml"><mn id="A4.p1.9.m9.1.1" xref="A4.p1.9.m9.1.1.cmml">0</mn><mo id="A4.p1.9.m9.4.4.1.2" xref="A4.p1.9.m9.4.4.2.cmml">,</mo><mn id="A4.p1.9.m9.2.2" xref="A4.p1.9.m9.2.2.cmml">1</mn><mo id="A4.p1.9.m9.4.4.1.3" xref="A4.p1.9.m9.4.4.2.cmml">,</mo><mi mathvariant="normal" id="A4.p1.9.m9.3.3" xref="A4.p1.9.m9.3.3.cmml">…</mi><mo id="A4.p1.9.m9.4.4.1.4" xref="A4.p1.9.m9.4.4.2.cmml">,</mo><mrow id="A4.p1.9.m9.4.4.1.1" xref="A4.p1.9.m9.4.4.1.1.cmml"><mrow id="A4.p1.9.m9.4.4.1.1.1.1" xref="A4.p1.9.m9.4.4.1.1.1.2.cmml"><mo stretchy="false" id="A4.p1.9.m9.4.4.1.1.1.1.2" xref="A4.p1.9.m9.4.4.1.1.1.2.1.cmml">⌈</mo><mrow id="A4.p1.9.m9.4.4.1.1.1.1.1" xref="A4.p1.9.m9.4.4.1.1.1.1.1.cmml"><mi id="A4.p1.9.m9.4.4.1.1.1.1.1.2" xref="A4.p1.9.m9.4.4.1.1.1.1.1.2.cmml">n</mi><mo id="A4.p1.9.m9.4.4.1.1.1.1.1.1" xref="A4.p1.9.m9.4.4.1.1.1.1.1.1.cmml">/</mo><mn id="A4.p1.9.m9.4.4.1.1.1.1.1.3" xref="A4.p1.9.m9.4.4.1.1.1.1.1.3.cmml">2</mn></mrow><mo stretchy="false" id="A4.p1.9.m9.4.4.1.1.1.1.3" xref="A4.p1.9.m9.4.4.1.1.1.2.1.cmml">⌉</mo></mrow><mo id="A4.p1.9.m9.4.4.1.1.2" xref="A4.p1.9.m9.4.4.1.1.2.cmml">−</mo><mn id="A4.p1.9.m9.4.4.1.1.3" xref="A4.p1.9.m9.4.4.1.1.3.cmml">1</mn></mrow></mrow><annotation-xml encoding="MathML-Content" id="A4.p1.9.m9.4b"><list id="A4.p1.9.m9.4.4.2.cmml" xref="A4.p1.9.m9.4.4.1"><cn type="integer" id="A4.p1.9.m9.1.1.cmml" xref="A4.p1.9.m9.1.1">0</cn><cn type="integer" id="A4.p1.9.m9.2.2.cmml" xref="A4.p1.9.m9.2.2">1</cn><ci id="A4.p1.9.m9.3.3.cmml" xref="A4.p1.9.m9.3.3">…</ci><apply id="A4.p1.9.m9.4.4.1.1.cmml" xref="A4.p1.9.m9.4.4.1.1"><minus id="A4.p1.9.m9.4.4.1.1.2.cmml" xref="A4.p1.9.m9.4.4.1.1.2"></minus><apply id="A4.p1.9.m9.4.4.1.1.1.2.cmml" xref="A4.p1.9.m9.4.4.1.1.1.1"><ceiling id="A4.p1.9.m9.4.4.1.1.1.2.1.cmml" xref="A4.p1.9.m9.4.4.1.1.1.1.2"></ceiling><apply id="A4.p1.9.m9.4.4.1.1.1.1.1.cmml" xref="A4.p1.9.m9.4.4.1.1.1.1.1"><divide id="A4.p1.9.m9.4.4.1.1.1.1.1.1.cmml" xref="A4.p1.9.m9.4.4.1.1.1.1.1.1"></divide><ci id="A4.p1.9.m9.4.4.1.1.1.1.1.2.cmml" xref="A4.p1.9.m9.4.4.1.1.1.1.1.2">𝑛</ci><cn type="integer" id="A4.p1.9.m9.4.4.1.1.1.1.1.3.cmml" xref="A4.p1.9.m9.4.4.1.1.1.1.1.3">2</cn></apply></apply><cn type="integer" id="A4.p1.9.m9.4.4.1.1.3.cmml" xref="A4.p1.9.m9.4.4.1.1.3">1</cn></apply></list></annotation-xml><annotation encoding="application/x-tex" id="A4.p1.9.m9.4c">0,1,\dots,\lceil n/2\rceil-1</annotation></semantics></math> to group element <math id="A4.p1.10.m10.4" class="ltx_Math" alttext="0,1,\dots,\lceil n/2\rceil-1" display="inline"><semantics id="A4.p1.10.m10.4a"><mrow id="A4.p1.10.m10.4.4.1" xref="A4.p1.10.m10.4.4.2.cmml"><mn id="A4.p1.10.m10.1.1" xref="A4.p1.10.m10.1.1.cmml">0</mn><mo id="A4.p1.10.m10.4.4.1.2" xref="A4.p1.10.m10.4.4.2.cmml">,</mo><mn id="A4.p1.10.m10.2.2" xref="A4.p1.10.m10.2.2.cmml">1</mn><mo id="A4.p1.10.m10.4.4.1.3" xref="A4.p1.10.m10.4.4.2.cmml">,</mo><mi mathvariant="normal" id="A4.p1.10.m10.3.3" xref="A4.p1.10.m10.3.3.cmml">…</mi><mo id="A4.p1.10.m10.4.4.1.4" xref="A4.p1.10.m10.4.4.2.cmml">,</mo><mrow id="A4.p1.10.m10.4.4.1.1" xref="A4.p1.10.m10.4.4.1.1.cmml"><mrow id="A4.p1.10.m10.4.4.1.1.1.1" xref="A4.p1.10.m10.4.4.1.1.1.2.cmml"><mo stretchy="false" id="A4.p1.10.m10.4.4.1.1.1.1.2" xref="A4.p1.10.m10.4.4.1.1.1.2.1.cmml">⌈</mo><mrow id="A4.p1.10.m10.4.4.1.1.1.1.1" xref="A4.p1.10.m10.4.4.1.1.1.1.1.cmml"><mi id="A4.p1.10.m10.4.4.1.1.1.1.1.2" xref="A4.p1.10.m10.4.4.1.1.1.1.1.2.cmml">n</mi><mo id="A4.p1.10.m10.4.4.1.1.1.1.1.1" xref="A4.p1.10.m10.4.4.1.1.1.1.1.1.cmml">/</mo><mn id="A4.p1.10.m10.4.4.1.1.1.1.1.3" xref="A4.p1.10.m10.4.4.1.1.1.1.1.3.cmml">2</mn></mrow><mo stretchy="false" id="A4.p1.10.m10.4.4.1.1.1.1.3" xref="A4.p1.10.m10.4.4.1.1.1.2.1.cmml">⌉</mo></mrow><mo id="A4.p1.10.m10.4.4.1.1.2" xref="A4.p1.10.m10.4.4.1.1.2.cmml">−</mo><mn id="A4.p1.10.m10.4.4.1.1.3" xref="A4.p1.10.m10.4.4.1.1.3.cmml">1</mn></mrow></mrow><annotation-xml encoding="MathML-Content" id="A4.p1.10.m10.4b"><list id="A4.p1.10.m10.4.4.2.cmml" xref="A4.p1.10.m10.4.4.1"><cn type="integer" id="A4.p1.10.m10.1.1.cmml" xref="A4.p1.10.m10.1.1">0</cn><cn type="integer" id="A4.p1.10.m10.2.2.cmml" xref="A4.p1.10.m10.2.2">1</cn><ci id="A4.p1.10.m10.3.3.cmml" xref="A4.p1.10.m10.3.3">…</ci><apply id="A4.p1.10.m10.4.4.1.1.cmml" xref="A4.p1.10.m10.4.4.1.1"><minus id="A4.p1.10.m10.4.4.1.1.2.cmml" xref="A4.p1.10.m10.4.4.1.1.2"></minus><apply id="A4.p1.10.m10.4.4.1.1.1.2.cmml" xref="A4.p1.10.m10.4.4.1.1.1.1"><ceiling id="A4.p1.10.m10.4.4.1.1.1.2.1.cmml" xref="A4.p1.10.m10.4.4.1.1.1.1.2"></ceiling><apply id="A4.p1.10.m10.4.4.1.1.1.1.1.cmml" xref="A4.p1.10.m10.4.4.1.1.1.1.1"><divide id="A4.p1.10.m10.4.4.1.1.1.1.1.1.cmml" xref="A4.p1.10.m10.4.4.1.1.1.1.1.1"></divide><ci id="A4.p1.10.m10.4.4.1.1.1.1.1.2.cmml" xref="A4.p1.10.m10.4.4.1.1.1.1.1.2">𝑛</ci><cn type="integer" id="A4.p1.10.m10.4.4.1.1.1.1.1.3.cmml" xref="A4.p1.10.m10.4.4.1.1.1.1.1.3">2</cn></apply></apply><cn type="integer" id="A4.p1.10.m10.4.4.1.1.3.cmml" xref="A4.p1.10.m10.4.4.1.1.3">1</cn></apply></list></annotation-xml><annotation encoding="application/x-tex" id="A4.p1.10.m10.4c">0,1,\dots,\lceil n/2\rceil-1</annotation></semantics></math> and integer <math id="A4.p1.11.m11.4" class="ltx_Math" alttext="-\lfloor n/2\rfloor,-\lfloor n/2\rfloor+1,\dots,-1" display="inline"><semantics id="A4.p1.11.m11.4a"><mrow id="A4.p1.11.m11.4.4.3" xref="A4.p1.11.m11.4.4.4.cmml"><mrow id="A4.p1.11.m11.2.2.1.1" xref="A4.p1.11.m11.2.2.1.1.cmml"><mo id="A4.p1.11.m11.2.2.1.1a" xref="A4.p1.11.m11.2.2.1.1.cmml">−</mo><mrow id="A4.p1.11.m11.2.2.1.1.1.1" xref="A4.p1.11.m11.2.2.1.1.1.2.cmml"><mo stretchy="false" id="A4.p1.11.m11.2.2.1.1.1.1.2" xref="A4.p1.11.m11.2.2.1.1.1.2.1.cmml">⌊</mo><mrow id="A4.p1.11.m11.2.2.1.1.1.1.1" xref="A4.p1.11.m11.2.2.1.1.1.1.1.cmml"><mi id="A4.p1.11.m11.2.2.1.1.1.1.1.2" xref="A4.p1.11.m11.2.2.1.1.1.1.1.2.cmml">n</mi><mo id="A4.p1.11.m11.2.2.1.1.1.1.1.1" xref="A4.p1.11.m11.2.2.1.1.1.1.1.1.cmml">/</mo><mn id="A4.p1.11.m11.2.2.1.1.1.1.1.3" xref="A4.p1.11.m11.2.2.1.1.1.1.1.3.cmml">2</mn></mrow><mo stretchy="false" id="A4.p1.11.m11.2.2.1.1.1.1.3" xref="A4.p1.11.m11.2.2.1.1.1.2.1.cmml">⌋</mo></mrow></mrow><mo id="A4.p1.11.m11.4.4.3.4" xref="A4.p1.11.m11.4.4.4.cmml">,</mo><mrow id="A4.p1.11.m11.3.3.2.2" xref="A4.p1.11.m11.3.3.2.2.cmml"><mrow id="A4.p1.11.m11.3.3.2.2.1" xref="A4.p1.11.m11.3.3.2.2.1.cmml"><mo id="A4.p1.11.m11.3.3.2.2.1a" xref="A4.p1.11.m11.3.3.2.2.1.cmml">−</mo><mrow id="A4.p1.11.m11.3.3.2.2.1.1.1" xref="A4.p1.11.m11.3.3.2.2.1.1.2.cmml"><mo stretchy="false" id="A4.p1.11.m11.3.3.2.2.1.1.1.2" xref="A4.p1.11.m11.3.3.2.2.1.1.2.1.cmml">⌊</mo><mrow id="A4.p1.11.m11.3.3.2.2.1.1.1.1" xref="A4.p1.11.m11.3.3.2.2.1.1.1.1.cmml"><mi id="A4.p1.11.m11.3.3.2.2.1.1.1.1.2" xref="A4.p1.11.m11.3.3.2.2.1.1.1.1.2.cmml">n</mi><mo id="A4.p1.11.m11.3.3.2.2.1.1.1.1.1" xref="A4.p1.11.m11.3.3.2.2.1.1.1.1.1.cmml">/</mo><mn id="A4.p1.11.m11.3.3.2.2.1.1.1.1.3" xref="A4.p1.11.m11.3.3.2.2.1.1.1.1.3.cmml">2</mn></mrow><mo stretchy="false" id="A4.p1.11.m11.3.3.2.2.1.1.1.3" xref="A4.p1.11.m11.3.3.2.2.1.1.2.1.cmml">⌋</mo></mrow></mrow><mo id="A4.p1.11.m11.3.3.2.2.2" xref="A4.p1.11.m11.3.3.2.2.2.cmml">+</mo><mn id="A4.p1.11.m11.3.3.2.2.3" xref="A4.p1.11.m11.3.3.2.2.3.cmml">1</mn></mrow><mo id="A4.p1.11.m11.4.4.3.5" xref="A4.p1.11.m11.4.4.4.cmml">,</mo><mi mathvariant="normal" id="A4.p1.11.m11.1.1" xref="A4.p1.11.m11.1.1.cmml">…</mi><mo id="A4.p1.11.m11.4.4.3.6" xref="A4.p1.11.m11.4.4.4.cmml">,</mo><mrow id="A4.p1.11.m11.4.4.3.3" xref="A4.p1.11.m11.4.4.3.3.cmml"><mo id="A4.p1.11.m11.4.4.3.3a" xref="A4.p1.11.m11.4.4.3.3.cmml">−</mo><mn id="A4.p1.11.m11.4.4.3.3.2" xref="A4.p1.11.m11.4.4.3.3.2.cmml">1</mn></mrow></mrow><annotation-xml encoding="MathML-Content" id="A4.p1.11.m11.4b"><list id="A4.p1.11.m11.4.4.4.cmml" xref="A4.p1.11.m11.4.4.3"><apply id="A4.p1.11.m11.2.2.1.1.cmml" xref="A4.p1.11.m11.2.2.1.1"><minus id="A4.p1.11.m11.2.2.1.1.2.cmml" xref="A4.p1.11.m11.2.2.1.1"></minus><apply id="A4.p1.11.m11.2.2.1.1.1.2.cmml" xref="A4.p1.11.m11.2.2.1.1.1.1"><floor id="A4.p1.11.m11.2.2.1.1.1.2.1.cmml" xref="A4.p1.11.m11.2.2.1.1.1.1.2"></floor><apply id="A4.p1.11.m11.2.2.1.1.1.1.1.cmml" xref="A4.p1.11.m11.2.2.1.1.1.1.1"><divide id="A4.p1.11.m11.2.2.1.1.1.1.1.1.cmml" xref="A4.p1.11.m11.2.2.1.1.1.1.1.1"></divide><ci id="A4.p1.11.m11.2.2.1.1.1.1.1.2.cmml" xref="A4.p1.11.m11.2.2.1.1.1.1.1.2">𝑛</ci><cn type="integer" id="A4.p1.11.m11.2.2.1.1.1.1.1.3.cmml" xref="A4.p1.11.m11.2.2.1.1.1.1.1.3">2</cn></apply></apply></apply><apply id="A4.p1.11.m11.3.3.2.2.cmml" xref="A4.p1.11.m11.3.3.2.2"><plus id="A4.p1.11.m11.3.3.2.2.2.cmml" xref="A4.p1.11.m11.3.3.2.2.2"></plus><apply id="A4.p1.11.m11.3.3.2.2.1.cmml" xref="A4.p1.11.m11.3.3.2.2.1"><minus id="A4.p1.11.m11.3.3.2.2.1.2.cmml" xref="A4.p1.11.m11.3.3.2.2.1"></minus><apply id="A4.p1.11.m11.3.3.2.2.1.1.2.cmml" xref="A4.p1.11.m11.3.3.2.2.1.1.1"><floor id="A4.p1.11.m11.3.3.2.2.1.1.2.1.cmml" xref="A4.p1.11.m11.3.3.2.2.1.1.1.2"></floor><apply id="A4.p1.11.m11.3.3.2.2.1.1.1.1.cmml" xref="A4.p1.11.m11.3.3.2.2.1.1.1.1"><divide id="A4.p1.11.m11.3.3.2.2.1.1.1.1.1.cmml" xref="A4.p1.11.m11.3.3.2.2.1.1.1.1.1"></divide><ci id="A4.p1.11.m11.3.3.2.2.1.1.1.1.2.cmml" xref="A4.p1.11.m11.3.3.2.2.1.1.1.1.2">𝑛</ci><cn type="integer" id="A4.p1.11.m11.3.3.2.2.1.1.1.1.3.cmml" xref="A4.p1.11.m11.3.3.2.2.1.1.1.1.3">2</cn></apply></apply></apply><cn type="integer" id="A4.p1.11.m11.3.3.2.2.3.cmml" xref="A4.p1.11.m11.3.3.2.2.3">1</cn></apply><ci id="A4.p1.11.m11.1.1.cmml" xref="A4.p1.11.m11.1.1">…</ci><apply id="A4.p1.11.m11.4.4.3.3.cmml" xref="A4.p1.11.m11.4.4.3.3"><minus id="A4.p1.11.m11.4.4.3.3.1.cmml" xref="A4.p1.11.m11.4.4.3.3"></minus><cn type="integer" id="A4.p1.11.m11.4.4.3.3.2.cmml" xref="A4.p1.11.m11.4.4.3.3.2">1</cn></apply></list></annotation-xml><annotation encoding="application/x-tex" id="A4.p1.11.m11.4c">-\lfloor n/2\rfloor,-\lfloor n/2\rfloor+1,\dots,-1</annotation></semantics></math> to group elements <math id="A4.p1.12.m12.4" class="ltx_Math" alttext="\lceil n/2\rceil,\lceil n/2\rceil+1,\dots,n-1" display="inline"><semantics id="A4.p1.12.m12.4a"><mrow id="A4.p1.12.m12.4.4.3" xref="A4.p1.12.m12.4.4.4.cmml"><mrow id="A4.p1.12.m12.2.2.1.1.1" xref="A4.p1.12.m12.2.2.1.1.2.cmml"><mo stretchy="false" id="A4.p1.12.m12.2.2.1.1.1.2" xref="A4.p1.12.m12.2.2.1.1.2.1.cmml">⌈</mo><mrow id="A4.p1.12.m12.2.2.1.1.1.1" xref="A4.p1.12.m12.2.2.1.1.1.1.cmml"><mi id="A4.p1.12.m12.2.2.1.1.1.1.2" xref="A4.p1.12.m12.2.2.1.1.1.1.2.cmml">n</mi><mo id="A4.p1.12.m12.2.2.1.1.1.1.1" xref="A4.p1.12.m12.2.2.1.1.1.1.1.cmml">/</mo><mn id="A4.p1.12.m12.2.2.1.1.1.1.3" xref="A4.p1.12.m12.2.2.1.1.1.1.3.cmml">2</mn></mrow><mo stretchy="false" id="A4.p1.12.m12.2.2.1.1.1.3" xref="A4.p1.12.m12.2.2.1.1.2.1.cmml">⌉</mo></mrow><mo id="A4.p1.12.m12.4.4.3.4" xref="A4.p1.12.m12.4.4.4.cmml">,</mo><mrow id="A4.p1.12.m12.3.3.2.2" xref="A4.p1.12.m12.3.3.2.2.cmml"><mrow id="A4.p1.12.m12.3.3.2.2.1.1" xref="A4.p1.12.m12.3.3.2.2.1.2.cmml"><mo stretchy="false" id="A4.p1.12.m12.3.3.2.2.1.1.2" xref="A4.p1.12.m12.3.3.2.2.1.2.1.cmml">⌈</mo><mrow id="A4.p1.12.m12.3.3.2.2.1.1.1" xref="A4.p1.12.m12.3.3.2.2.1.1.1.cmml"><mi id="A4.p1.12.m12.3.3.2.2.1.1.1.2" xref="A4.p1.12.m12.3.3.2.2.1.1.1.2.cmml">n</mi><mo id="A4.p1.12.m12.3.3.2.2.1.1.1.1" xref="A4.p1.12.m12.3.3.2.2.1.1.1.1.cmml">/</mo><mn id="A4.p1.12.m12.3.3.2.2.1.1.1.3" xref="A4.p1.12.m12.3.3.2.2.1.1.1.3.cmml">2</mn></mrow><mo stretchy="false" id="A4.p1.12.m12.3.3.2.2.1.1.3" xref="A4.p1.12.m12.3.3.2.2.1.2.1.cmml">⌉</mo></mrow><mo id="A4.p1.12.m12.3.3.2.2.2" xref="A4.p1.12.m12.3.3.2.2.2.cmml">+</mo><mn id="A4.p1.12.m12.3.3.2.2.3" xref="A4.p1.12.m12.3.3.2.2.3.cmml">1</mn></mrow><mo id="A4.p1.12.m12.4.4.3.5" xref="A4.p1.12.m12.4.4.4.cmml">,</mo><mi mathvariant="normal" id="A4.p1.12.m12.1.1" xref="A4.p1.12.m12.1.1.cmml">…</mi><mo id="A4.p1.12.m12.4.4.3.6" xref="A4.p1.12.m12.4.4.4.cmml">,</mo><mrow id="A4.p1.12.m12.4.4.3.3" xref="A4.p1.12.m12.4.4.3.3.cmml"><mi id="A4.p1.12.m12.4.4.3.3.2" xref="A4.p1.12.m12.4.4.3.3.2.cmml">n</mi><mo id="A4.p1.12.m12.4.4.3.3.1" xref="A4.p1.12.m12.4.4.3.3.1.cmml">−</mo><mn id="A4.p1.12.m12.4.4.3.3.3" xref="A4.p1.12.m12.4.4.3.3.3.cmml">1</mn></mrow></mrow><annotation-xml encoding="MathML-Content" id="A4.p1.12.m12.4b"><list id="A4.p1.12.m12.4.4.4.cmml" xref="A4.p1.12.m12.4.4.3"><apply id="A4.p1.12.m12.2.2.1.1.2.cmml" xref="A4.p1.12.m12.2.2.1.1.1"><ceiling id="A4.p1.12.m12.2.2.1.1.2.1.cmml" xref="A4.p1.12.m12.2.2.1.1.1.2"></ceiling><apply id="A4.p1.12.m12.2.2.1.1.1.1.cmml" xref="A4.p1.12.m12.2.2.1.1.1.1"><divide id="A4.p1.12.m12.2.2.1.1.1.1.1.cmml" xref="A4.p1.12.m12.2.2.1.1.1.1.1"></divide><ci id="A4.p1.12.m12.2.2.1.1.1.1.2.cmml" xref="A4.p1.12.m12.2.2.1.1.1.1.2">𝑛</ci><cn type="integer" id="A4.p1.12.m12.2.2.1.1.1.1.3.cmml" xref="A4.p1.12.m12.2.2.1.1.1.1.3">2</cn></apply></apply><apply id="A4.p1.12.m12.3.3.2.2.cmml" xref="A4.p1.12.m12.3.3.2.2"><plus id="A4.p1.12.m12.3.3.2.2.2.cmml" xref="A4.p1.12.m12.3.3.2.2.2"></plus><apply id="A4.p1.12.m12.3.3.2.2.1.2.cmml" xref="A4.p1.12.m12.3.3.2.2.1.1"><ceiling id="A4.p1.12.m12.3.3.2.2.1.2.1.cmml" xref="A4.p1.12.m12.3.3.2.2.1.1.2"></ceiling><apply id="A4.p1.12.m12.3.3.2.2.1.1.1.cmml" xref="A4.p1.12.m12.3.3.2.2.1.1.1"><divide id="A4.p1.12.m12.3.3.2.2.1.1.1.1.cmml" xref="A4.p1.12.m12.3.3.2.2.1.1.1.1"></divide><ci id="A4.p1.12.m12.3.3.2.2.1.1.1.2.cmml" xref="A4.p1.12.m12.3.3.2.2.1.1.1.2">𝑛</ci><cn type="integer" id="A4.p1.12.m12.3.3.2.2.1.1.1.3.cmml" xref="A4.p1.12.m12.3.3.2.2.1.1.1.3">2</cn></apply></apply><cn type="integer" id="A4.p1.12.m12.3.3.2.2.3.cmml" xref="A4.p1.12.m12.3.3.2.2.3">1</cn></apply><ci id="A4.p1.12.m12.1.1.cmml" xref="A4.p1.12.m12.1.1">…</ci><apply id="A4.p1.12.m12.4.4.3.3.cmml" xref="A4.p1.12.m12.4.4.3.3"><minus id="A4.p1.12.m12.4.4.3.3.1.cmml" xref="A4.p1.12.m12.4.4.3.3.1"></minus><ci id="A4.p1.12.m12.4.4.3.3.2.cmml" xref="A4.p1.12.m12.4.4.3.3.2">𝑛</ci><cn type="integer" id="A4.p1.12.m12.4.4.3.3.3.cmml" xref="A4.p1.12.m12.4.4.3.3.3">1</cn></apply></list></annotation-xml><annotation encoding="application/x-tex" id="A4.p1.12.m12.4c">\lceil n/2\rceil,\lceil n/2\rceil+1,\dots,n-1</annotation></semantics></math>. This conversion allows to support both positive and negative real numbers between <math id="A4.p1.13.m13.1" class="ltx_Math" alttext="-\lfloor n/2\rfloor/c" display="inline"><semantics id="A4.p1.13.m13.1a"><mrow id="A4.p1.13.m13.1.1" xref="A4.p1.13.m13.1.1.cmml"><mo id="A4.p1.13.m13.1.1a" xref="A4.p1.13.m13.1.1.cmml">−</mo><mrow id="A4.p1.13.m13.1.1.1" xref="A4.p1.13.m13.1.1.1.cmml"><mrow id="A4.p1.13.m13.1.1.1.1.1" xref="A4.p1.13.m13.1.1.1.1.2.cmml"><mo stretchy="false" id="A4.p1.13.m13.1.1.1.1.1.2" xref="A4.p1.13.m13.1.1.1.1.2.1.cmml">⌊</mo><mrow id="A4.p1.13.m13.1.1.1.1.1.1" xref="A4.p1.13.m13.1.1.1.1.1.1.cmml"><mi id="A4.p1.13.m13.1.1.1.1.1.1.2" xref="A4.p1.13.m13.1.1.1.1.1.1.2.cmml">n</mi><mo id="A4.p1.13.m13.1.1.1.1.1.1.1" xref="A4.p1.13.m13.1.1.1.1.1.1.1.cmml">/</mo><mn id="A4.p1.13.m13.1.1.1.1.1.1.3" xref="A4.p1.13.m13.1.1.1.1.1.1.3.cmml">2</mn></mrow><mo stretchy="false" id="A4.p1.13.m13.1.1.1.1.1.3" xref="A4.p1.13.m13.1.1.1.1.2.1.cmml">⌋</mo></mrow><mo id="A4.p1.13.m13.1.1.1.2" xref="A4.p1.13.m13.1.1.1.2.cmml">/</mo><mi id="A4.p1.13.m13.1.1.1.3" xref="A4.p1.13.m13.1.1.1.3.cmml">c</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="A4.p1.13.m13.1b"><apply id="A4.p1.13.m13.1.1.cmml" xref="A4.p1.13.m13.1.1"><minus id="A4.p1.13.m13.1.1.2.cmml" xref="A4.p1.13.m13.1.1"></minus><apply id="A4.p1.13.m13.1.1.1.cmml" xref="A4.p1.13.m13.1.1.1"><divide id="A4.p1.13.m13.1.1.1.2.cmml" xref="A4.p1.13.m13.1.1.1.2"></divide><apply id="A4.p1.13.m13.1.1.1.1.2.cmml" xref="A4.p1.13.m13.1.1.1.1.1"><floor id="A4.p1.13.m13.1.1.1.1.2.1.cmml" xref="A4.p1.13.m13.1.1.1.1.1.2"></floor><apply id="A4.p1.13.m13.1.1.1.1.1.1.cmml" xref="A4.p1.13.m13.1.1.1.1.1.1"><divide id="A4.p1.13.m13.1.1.1.1.1.1.1.cmml" xref="A4.p1.13.m13.1.1.1.1.1.1.1"></divide><ci id="A4.p1.13.m13.1.1.1.1.1.1.2.cmml" xref="A4.p1.13.m13.1.1.1.1.1.1.2">𝑛</ci><cn type="integer" id="A4.p1.13.m13.1.1.1.1.1.1.3.cmml" xref="A4.p1.13.m13.1.1.1.1.1.1.3">2</cn></apply></apply><ci id="A4.p1.13.m13.1.1.1.3.cmml" xref="A4.p1.13.m13.1.1.1.3">𝑐</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A4.p1.13.m13.1c">-\lfloor n/2\rfloor/c</annotation></semantics></math> to <math id="A4.p1.14.m14.1" class="ltx_Math" alttext="\lceil n/2\rceil/c" display="inline"><semantics id="A4.p1.14.m14.1a"><mrow id="A4.p1.14.m14.1.1" xref="A4.p1.14.m14.1.1.cmml"><mrow id="A4.p1.14.m14.1.1.1.1" xref="A4.p1.14.m14.1.1.1.2.cmml"><mo stretchy="false" id="A4.p1.14.m14.1.1.1.1.2" xref="A4.p1.14.m14.1.1.1.2.1.cmml">⌈</mo><mrow id="A4.p1.14.m14.1.1.1.1.1" xref="A4.p1.14.m14.1.1.1.1.1.cmml"><mi id="A4.p1.14.m14.1.1.1.1.1.2" xref="A4.p1.14.m14.1.1.1.1.1.2.cmml">n</mi><mo id="A4.p1.14.m14.1.1.1.1.1.1" xref="A4.p1.14.m14.1.1.1.1.1.1.cmml">/</mo><mn id="A4.p1.14.m14.1.1.1.1.1.3" xref="A4.p1.14.m14.1.1.1.1.1.3.cmml">2</mn></mrow><mo stretchy="false" id="A4.p1.14.m14.1.1.1.1.3" xref="A4.p1.14.m14.1.1.1.2.1.cmml">⌉</mo></mrow><mo id="A4.p1.14.m14.1.1.2" xref="A4.p1.14.m14.1.1.2.cmml">/</mo><mi id="A4.p1.14.m14.1.1.3" xref="A4.p1.14.m14.1.1.3.cmml">c</mi></mrow><annotation-xml encoding="MathML-Content" id="A4.p1.14.m14.1b"><apply id="A4.p1.14.m14.1.1.cmml" xref="A4.p1.14.m14.1.1"><divide id="A4.p1.14.m14.1.1.2.cmml" xref="A4.p1.14.m14.1.1.2"></divide><apply id="A4.p1.14.m14.1.1.1.2.cmml" xref="A4.p1.14.m14.1.1.1.1"><ceiling id="A4.p1.14.m14.1.1.1.2.1.cmml" xref="A4.p1.14.m14.1.1.1.1.2"></ceiling><apply id="A4.p1.14.m14.1.1.1.1.1.cmml" xref="A4.p1.14.m14.1.1.1.1.1"><divide id="A4.p1.14.m14.1.1.1.1.1.1.cmml" xref="A4.p1.14.m14.1.1.1.1.1.1"></divide><ci id="A4.p1.14.m14.1.1.1.1.1.2.cmml" xref="A4.p1.14.m14.1.1.1.1.1.2">𝑛</ci><cn type="integer" id="A4.p1.14.m14.1.1.1.1.1.3.cmml" xref="A4.p1.14.m14.1.1.1.1.1.3">2</cn></apply></apply><ci id="A4.p1.14.m14.1.1.3.cmml" xref="A4.p1.14.m14.1.1.3">𝑐</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A4.p1.14.m14.1c">\lceil n/2\rceil/c</annotation></semantics></math>. In summary, a real number is first mapped to an integer before it is finally mapped to a group element in <math id="A4.p1.15.m15.1" class="ltx_Math" alttext="\mathbb{Z}_{n}" display="inline"><semantics id="A4.p1.15.m15.1a"><msub id="A4.p1.15.m15.1.1" xref="A4.p1.15.m15.1.1.cmml"><mi id="A4.p1.15.m15.1.1.2" xref="A4.p1.15.m15.1.1.2.cmml">ℤ</mi><mi id="A4.p1.15.m15.1.1.3" xref="A4.p1.15.m15.1.1.3.cmml">n</mi></msub><annotation-xml encoding="MathML-Content" id="A4.p1.15.m15.1b"><apply id="A4.p1.15.m15.1.1.cmml" xref="A4.p1.15.m15.1.1"><csymbol cd="ambiguous" id="A4.p1.15.m15.1.1.1.cmml" xref="A4.p1.15.m15.1.1">subscript</csymbol><ci id="A4.p1.15.m15.1.1.2.cmml" xref="A4.p1.15.m15.1.1.2">ℤ</ci><ci id="A4.p1.15.m15.1.1.3.cmml" xref="A4.p1.15.m15.1.1.3">𝑛</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A4.p1.15.m15.1c">\mathbb{Z}_{n}</annotation></semantics></math>.</p>
</div>
<div id="A4.p2" class="ltx_para ltx_noindent">
<p id="A4.p2.2" class="ltx_p">Note that our protocol in fact does group-element addition on the private inputs. To properly simulate the behavior of integer addition, wrap-round needs to be avoided. In other words, the parties need to estimate the scale of the model updates to aggregate, the desired accuracy to properly pick the parameters including the scaling factor <math id="A4.p2.1.m1.1" class="ltx_Math" alttext="c" display="inline"><semantics id="A4.p2.1.m1.1a"><mi id="A4.p2.1.m1.1.1" xref="A4.p2.1.m1.1.1.cmml">c</mi><annotation-xml encoding="MathML-Content" id="A4.p2.1.m1.1b"><ci id="A4.p2.1.m1.1.1.cmml" xref="A4.p2.1.m1.1.1">𝑐</ci></annotation-xml><annotation encoding="application/x-tex" id="A4.p2.1.m1.1c">c</annotation></semantics></math> and the finite group <math id="A4.p2.2.m2.1" class="ltx_Math" alttext="\mathbb{Z}_{n}" display="inline"><semantics id="A4.p2.2.m2.1a"><msub id="A4.p2.2.m2.1.1" xref="A4.p2.2.m2.1.1.cmml"><mi id="A4.p2.2.m2.1.1.2" xref="A4.p2.2.m2.1.1.2.cmml">ℤ</mi><mi id="A4.p2.2.m2.1.1.3" xref="A4.p2.2.m2.1.1.3.cmml">n</mi></msub><annotation-xml encoding="MathML-Content" id="A4.p2.2.m2.1b"><apply id="A4.p2.2.m2.1.1.cmml" xref="A4.p2.2.m2.1.1"><csymbol cd="ambiguous" id="A4.p2.2.m2.1.1.1.cmml" xref="A4.p2.2.m2.1.1">subscript</csymbol><ci id="A4.p2.2.m2.1.1.2.cmml" xref="A4.p2.2.m2.1.1.2">ℤ</ci><ci id="A4.p2.2.m2.1.1.3.cmml" xref="A4.p2.2.m2.1.1.3">𝑛</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A4.p2.2.m2.1c">\mathbb{Z}_{n}</annotation></semantics></math>.</p>
</div>
</section>
<section id="A5" class="ltx_appendix">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix E </span>Additional System Design Details</h2>

<section id="A5.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">E.1 </span>Enforcing Max Concurrency</h3>

<div id="A5.SS1.p1" class="ltx_para ltx_noindent">
<p id="A5.SS1.p1.1" class="ltx_p">To prevent unbounded client participation, the system enforces an upper bound of concurrently participating clients (<span id="A5.SS1.p1.1.1" class="ltx_text ltx_font_italic">C</span>) for every task based on task configuration. A client can be selected for a task only if number of <span id="A5.SS1.p1.1.2" class="ltx_text ltx_font_italic">active</span> clients is below the configured threshold. An active client may become inactive for various reasons. The client may have completed execution, or it may be considered dead due to missed heartbeats or execution error. Finally, clients may also be aborted by the server if <span id="A5.SS1.p1.1.3" class="ltx_text ltx_font_italic">staleness</span> (measured as the difference between current and initial model versions) is higher than a configurable value.</p>
</div>
</section>
<section id="A5.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">E.2 </span>Handling Staleness</h3>

<div id="A5.SS2.p1" class="ltx_para ltx_noindent">
<p id="A5.SS2.p1.11" class="ltx_p">The cost of asynchronous training is staleness of model updates. In this section, we describe how our AsyncFL system tracks and handles staleness. The server model is identified by a <span id="A5.SS2.p1.11.1" class="ltx_text ltx_font_italic">model version</span>—a non-negative natural number that is incremented every time a new server model is generated. A new server model is generated when <math id="A5.SS2.p1.1.m1.1" class="ltx_Math" alttext="K" display="inline"><semantics id="A5.SS2.p1.1.m1.1a"><mi id="A5.SS2.p1.1.m1.1.1" xref="A5.SS2.p1.1.m1.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="A5.SS2.p1.1.m1.1b"><ci id="A5.SS2.p1.1.m1.1.1.cmml" xref="A5.SS2.p1.1.m1.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="A5.SS2.p1.1.m1.1c">K</annotation></semantics></math> client updates have been aggregated. In an asynchronous FL systems, clients can download a model with an <span id="A5.SS2.p1.11.2" class="ltx_text ltx_font_italic">initial</span> version, but upload results when the server model has moved to a different <span id="A5.SS2.p1.11.3" class="ltx_text ltx_font_italic">final</span> version. Recall that we define staleness as the difference between the model version in which a client uses to start local training, and the server model version at the time instance when a client uploads its update.
For each client, the aggregator records initial model version to track staleness.
Let <math id="A5.SS2.p1.2.m2.1" class="ltx_Math" alttext="s_{i}" display="inline"><semantics id="A5.SS2.p1.2.m2.1a"><msub id="A5.SS2.p1.2.m2.1.1" xref="A5.SS2.p1.2.m2.1.1.cmml"><mi id="A5.SS2.p1.2.m2.1.1.2" xref="A5.SS2.p1.2.m2.1.1.2.cmml">s</mi><mi id="A5.SS2.p1.2.m2.1.1.3" xref="A5.SS2.p1.2.m2.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="A5.SS2.p1.2.m2.1b"><apply id="A5.SS2.p1.2.m2.1.1.cmml" xref="A5.SS2.p1.2.m2.1.1"><csymbol cd="ambiguous" id="A5.SS2.p1.2.m2.1.1.1.cmml" xref="A5.SS2.p1.2.m2.1.1">subscript</csymbol><ci id="A5.SS2.p1.2.m2.1.1.2.cmml" xref="A5.SS2.p1.2.m2.1.1.2">𝑠</ci><ci id="A5.SS2.p1.2.m2.1.1.3.cmml" xref="A5.SS2.p1.2.m2.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A5.SS2.p1.2.m2.1c">s_{i}</annotation></semantics></math> be the staleness of client <math id="A5.SS2.p1.3.m3.1" class="ltx_Math" alttext="i" display="inline"><semantics id="A5.SS2.p1.3.m3.1a"><mi id="A5.SS2.p1.3.m3.1.1" xref="A5.SS2.p1.3.m3.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="A5.SS2.p1.3.m3.1b"><ci id="A5.SS2.p1.3.m3.1.1.cmml" xref="A5.SS2.p1.3.m3.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="A5.SS2.p1.3.m3.1c">i</annotation></semantics></math> with initial version <math id="A5.SS2.p1.4.m4.1" class="ltx_Math" alttext="V_{\text{initial}}" display="inline"><semantics id="A5.SS2.p1.4.m4.1a"><msub id="A5.SS2.p1.4.m4.1.1" xref="A5.SS2.p1.4.m4.1.1.cmml"><mi id="A5.SS2.p1.4.m4.1.1.2" xref="A5.SS2.p1.4.m4.1.1.2.cmml">V</mi><mtext id="A5.SS2.p1.4.m4.1.1.3" xref="A5.SS2.p1.4.m4.1.1.3a.cmml">initial</mtext></msub><annotation-xml encoding="MathML-Content" id="A5.SS2.p1.4.m4.1b"><apply id="A5.SS2.p1.4.m4.1.1.cmml" xref="A5.SS2.p1.4.m4.1.1"><csymbol cd="ambiguous" id="A5.SS2.p1.4.m4.1.1.1.cmml" xref="A5.SS2.p1.4.m4.1.1">subscript</csymbol><ci id="A5.SS2.p1.4.m4.1.1.2.cmml" xref="A5.SS2.p1.4.m4.1.1.2">𝑉</ci><ci id="A5.SS2.p1.4.m4.1.1.3a.cmml" xref="A5.SS2.p1.4.m4.1.1.3"><mtext mathsize="70%" id="A5.SS2.p1.4.m4.1.1.3.cmml" xref="A5.SS2.p1.4.m4.1.1.3">initial</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A5.SS2.p1.4.m4.1c">V_{\text{initial}}</annotation></semantics></math> and final version <math id="A5.SS2.p1.5.m5.1" class="ltx_Math" alttext="V_{\text{final}}" display="inline"><semantics id="A5.SS2.p1.5.m5.1a"><msub id="A5.SS2.p1.5.m5.1.1" xref="A5.SS2.p1.5.m5.1.1.cmml"><mi id="A5.SS2.p1.5.m5.1.1.2" xref="A5.SS2.p1.5.m5.1.1.2.cmml">V</mi><mtext id="A5.SS2.p1.5.m5.1.1.3" xref="A5.SS2.p1.5.m5.1.1.3a.cmml">final</mtext></msub><annotation-xml encoding="MathML-Content" id="A5.SS2.p1.5.m5.1b"><apply id="A5.SS2.p1.5.m5.1.1.cmml" xref="A5.SS2.p1.5.m5.1.1"><csymbol cd="ambiguous" id="A5.SS2.p1.5.m5.1.1.1.cmml" xref="A5.SS2.p1.5.m5.1.1">subscript</csymbol><ci id="A5.SS2.p1.5.m5.1.1.2.cmml" xref="A5.SS2.p1.5.m5.1.1.2">𝑉</ci><ci id="A5.SS2.p1.5.m5.1.1.3a.cmml" xref="A5.SS2.p1.5.m5.1.1.3"><mtext mathsize="70%" id="A5.SS2.p1.5.m5.1.1.3.cmml" xref="A5.SS2.p1.5.m5.1.1.3">final</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A5.SS2.p1.5.m5.1c">V_{\text{final}}</annotation></semantics></math>; thus <math id="A5.SS2.p1.6.m6.1" class="ltx_Math" alttext="s_{i}=V_{\text{final}}-V_{\text{initial}}" display="inline"><semantics id="A5.SS2.p1.6.m6.1a"><mrow id="A5.SS2.p1.6.m6.1.1" xref="A5.SS2.p1.6.m6.1.1.cmml"><msub id="A5.SS2.p1.6.m6.1.1.2" xref="A5.SS2.p1.6.m6.1.1.2.cmml"><mi id="A5.SS2.p1.6.m6.1.1.2.2" xref="A5.SS2.p1.6.m6.1.1.2.2.cmml">s</mi><mi id="A5.SS2.p1.6.m6.1.1.2.3" xref="A5.SS2.p1.6.m6.1.1.2.3.cmml">i</mi></msub><mo id="A5.SS2.p1.6.m6.1.1.1" xref="A5.SS2.p1.6.m6.1.1.1.cmml">=</mo><mrow id="A5.SS2.p1.6.m6.1.1.3" xref="A5.SS2.p1.6.m6.1.1.3.cmml"><msub id="A5.SS2.p1.6.m6.1.1.3.2" xref="A5.SS2.p1.6.m6.1.1.3.2.cmml"><mi id="A5.SS2.p1.6.m6.1.1.3.2.2" xref="A5.SS2.p1.6.m6.1.1.3.2.2.cmml">V</mi><mtext id="A5.SS2.p1.6.m6.1.1.3.2.3" xref="A5.SS2.p1.6.m6.1.1.3.2.3a.cmml">final</mtext></msub><mo id="A5.SS2.p1.6.m6.1.1.3.1" xref="A5.SS2.p1.6.m6.1.1.3.1.cmml">−</mo><msub id="A5.SS2.p1.6.m6.1.1.3.3" xref="A5.SS2.p1.6.m6.1.1.3.3.cmml"><mi id="A5.SS2.p1.6.m6.1.1.3.3.2" xref="A5.SS2.p1.6.m6.1.1.3.3.2.cmml">V</mi><mtext id="A5.SS2.p1.6.m6.1.1.3.3.3" xref="A5.SS2.p1.6.m6.1.1.3.3.3a.cmml">initial</mtext></msub></mrow></mrow><annotation-xml encoding="MathML-Content" id="A5.SS2.p1.6.m6.1b"><apply id="A5.SS2.p1.6.m6.1.1.cmml" xref="A5.SS2.p1.6.m6.1.1"><eq id="A5.SS2.p1.6.m6.1.1.1.cmml" xref="A5.SS2.p1.6.m6.1.1.1"></eq><apply id="A5.SS2.p1.6.m6.1.1.2.cmml" xref="A5.SS2.p1.6.m6.1.1.2"><csymbol cd="ambiguous" id="A5.SS2.p1.6.m6.1.1.2.1.cmml" xref="A5.SS2.p1.6.m6.1.1.2">subscript</csymbol><ci id="A5.SS2.p1.6.m6.1.1.2.2.cmml" xref="A5.SS2.p1.6.m6.1.1.2.2">𝑠</ci><ci id="A5.SS2.p1.6.m6.1.1.2.3.cmml" xref="A5.SS2.p1.6.m6.1.1.2.3">𝑖</ci></apply><apply id="A5.SS2.p1.6.m6.1.1.3.cmml" xref="A5.SS2.p1.6.m6.1.1.3"><minus id="A5.SS2.p1.6.m6.1.1.3.1.cmml" xref="A5.SS2.p1.6.m6.1.1.3.1"></minus><apply id="A5.SS2.p1.6.m6.1.1.3.2.cmml" xref="A5.SS2.p1.6.m6.1.1.3.2"><csymbol cd="ambiguous" id="A5.SS2.p1.6.m6.1.1.3.2.1.cmml" xref="A5.SS2.p1.6.m6.1.1.3.2">subscript</csymbol><ci id="A5.SS2.p1.6.m6.1.1.3.2.2.cmml" xref="A5.SS2.p1.6.m6.1.1.3.2.2">𝑉</ci><ci id="A5.SS2.p1.6.m6.1.1.3.2.3a.cmml" xref="A5.SS2.p1.6.m6.1.1.3.2.3"><mtext mathsize="70%" id="A5.SS2.p1.6.m6.1.1.3.2.3.cmml" xref="A5.SS2.p1.6.m6.1.1.3.2.3">final</mtext></ci></apply><apply id="A5.SS2.p1.6.m6.1.1.3.3.cmml" xref="A5.SS2.p1.6.m6.1.1.3.3"><csymbol cd="ambiguous" id="A5.SS2.p1.6.m6.1.1.3.3.1.cmml" xref="A5.SS2.p1.6.m6.1.1.3.3">subscript</csymbol><ci id="A5.SS2.p1.6.m6.1.1.3.3.2.cmml" xref="A5.SS2.p1.6.m6.1.1.3.3.2">𝑉</ci><ci id="A5.SS2.p1.6.m6.1.1.3.3.3a.cmml" xref="A5.SS2.p1.6.m6.1.1.3.3.3"><mtext mathsize="70%" id="A5.SS2.p1.6.m6.1.1.3.3.3.cmml" xref="A5.SS2.p1.6.m6.1.1.3.3.3">initial</mtext></ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A5.SS2.p1.6.m6.1c">s_{i}=V_{\text{final}}-V_{\text{initial}}</annotation></semantics></math>. We down-weight client <math id="A5.SS2.p1.7.m7.1" class="ltx_Math" alttext="i" display="inline"><semantics id="A5.SS2.p1.7.m7.1a"><mi id="A5.SS2.p1.7.m7.1.1" xref="A5.SS2.p1.7.m7.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="A5.SS2.p1.7.m7.1b"><ci id="A5.SS2.p1.7.m7.1.1.cmml" xref="A5.SS2.p1.7.m7.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="A5.SS2.p1.7.m7.1c">i</annotation></semantics></math>’s update using the same scheme as <cite class="ltx_cite ltx_citemacro_citet">Nguyen et al. (<a href="#bib.bib24" title="" class="ltx_ref">2021</a>)</cite>. Formally, let <math id="A5.SS2.p1.8.m8.1" class="ltx_Math" alttext="w_{i}" display="inline"><semantics id="A5.SS2.p1.8.m8.1a"><msub id="A5.SS2.p1.8.m8.1.1" xref="A5.SS2.p1.8.m8.1.1.cmml"><mi id="A5.SS2.p1.8.m8.1.1.2" xref="A5.SS2.p1.8.m8.1.1.2.cmml">w</mi><mi id="A5.SS2.p1.8.m8.1.1.3" xref="A5.SS2.p1.8.m8.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="A5.SS2.p1.8.m8.1b"><apply id="A5.SS2.p1.8.m8.1.1.cmml" xref="A5.SS2.p1.8.m8.1.1"><csymbol cd="ambiguous" id="A5.SS2.p1.8.m8.1.1.1.cmml" xref="A5.SS2.p1.8.m8.1.1">subscript</csymbol><ci id="A5.SS2.p1.8.m8.1.1.2.cmml" xref="A5.SS2.p1.8.m8.1.1.2">𝑤</ci><ci id="A5.SS2.p1.8.m8.1.1.3.cmml" xref="A5.SS2.p1.8.m8.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A5.SS2.p1.8.m8.1c">w_{i}</annotation></semantics></math> be the weight of client <math id="A5.SS2.p1.9.m9.1" class="ltx_Math" alttext="i" display="inline"><semantics id="A5.SS2.p1.9.m9.1a"><mi id="A5.SS2.p1.9.m9.1.1" xref="A5.SS2.p1.9.m9.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="A5.SS2.p1.9.m9.1b"><ci id="A5.SS2.p1.9.m9.1.1.cmml" xref="A5.SS2.p1.9.m9.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="A5.SS2.p1.9.m9.1c">i</annotation></semantics></math> whose staleness is <math id="A5.SS2.p1.10.m10.1" class="ltx_Math" alttext="s_{i}" display="inline"><semantics id="A5.SS2.p1.10.m10.1a"><msub id="A5.SS2.p1.10.m10.1.1" xref="A5.SS2.p1.10.m10.1.1.cmml"><mi id="A5.SS2.p1.10.m10.1.1.2" xref="A5.SS2.p1.10.m10.1.1.2.cmml">s</mi><mi id="A5.SS2.p1.10.m10.1.1.3" xref="A5.SS2.p1.10.m10.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="A5.SS2.p1.10.m10.1b"><apply id="A5.SS2.p1.10.m10.1.1.cmml" xref="A5.SS2.p1.10.m10.1.1"><csymbol cd="ambiguous" id="A5.SS2.p1.10.m10.1.1.1.cmml" xref="A5.SS2.p1.10.m10.1.1">subscript</csymbol><ci id="A5.SS2.p1.10.m10.1.1.2.cmml" xref="A5.SS2.p1.10.m10.1.1.2">𝑠</ci><ci id="A5.SS2.p1.10.m10.1.1.3.cmml" xref="A5.SS2.p1.10.m10.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A5.SS2.p1.10.m10.1c">s_{i}</annotation></semantics></math>, then <math id="A5.SS2.p1.11.m11.1" class="ltx_Math" alttext="w_{i}\coloneqq 1/\sqrt{1+s_{i}}" display="inline"><semantics id="A5.SS2.p1.11.m11.1a"><mrow id="A5.SS2.p1.11.m11.1.1" xref="A5.SS2.p1.11.m11.1.1.cmml"><msub id="A5.SS2.p1.11.m11.1.1.2" xref="A5.SS2.p1.11.m11.1.1.2.cmml"><mi id="A5.SS2.p1.11.m11.1.1.2.2" xref="A5.SS2.p1.11.m11.1.1.2.2.cmml">w</mi><mi id="A5.SS2.p1.11.m11.1.1.2.3" xref="A5.SS2.p1.11.m11.1.1.2.3.cmml">i</mi></msub><mo id="A5.SS2.p1.11.m11.1.1.1" xref="A5.SS2.p1.11.m11.1.1.1.cmml">≔</mo><mrow id="A5.SS2.p1.11.m11.1.1.3" xref="A5.SS2.p1.11.m11.1.1.3.cmml"><mn id="A5.SS2.p1.11.m11.1.1.3.2" xref="A5.SS2.p1.11.m11.1.1.3.2.cmml">1</mn><mo id="A5.SS2.p1.11.m11.1.1.3.1" xref="A5.SS2.p1.11.m11.1.1.3.1.cmml">/</mo><msqrt id="A5.SS2.p1.11.m11.1.1.3.3" xref="A5.SS2.p1.11.m11.1.1.3.3.cmml"><mrow id="A5.SS2.p1.11.m11.1.1.3.3.2" xref="A5.SS2.p1.11.m11.1.1.3.3.2.cmml"><mn id="A5.SS2.p1.11.m11.1.1.3.3.2.2" xref="A5.SS2.p1.11.m11.1.1.3.3.2.2.cmml">1</mn><mo id="A5.SS2.p1.11.m11.1.1.3.3.2.1" xref="A5.SS2.p1.11.m11.1.1.3.3.2.1.cmml">+</mo><msub id="A5.SS2.p1.11.m11.1.1.3.3.2.3" xref="A5.SS2.p1.11.m11.1.1.3.3.2.3.cmml"><mi id="A5.SS2.p1.11.m11.1.1.3.3.2.3.2" xref="A5.SS2.p1.11.m11.1.1.3.3.2.3.2.cmml">s</mi><mi id="A5.SS2.p1.11.m11.1.1.3.3.2.3.3" xref="A5.SS2.p1.11.m11.1.1.3.3.2.3.3.cmml">i</mi></msub></mrow></msqrt></mrow></mrow><annotation-xml encoding="MathML-Content" id="A5.SS2.p1.11.m11.1b"><apply id="A5.SS2.p1.11.m11.1.1.cmml" xref="A5.SS2.p1.11.m11.1.1"><ci id="A5.SS2.p1.11.m11.1.1.1.cmml" xref="A5.SS2.p1.11.m11.1.1.1">≔</ci><apply id="A5.SS2.p1.11.m11.1.1.2.cmml" xref="A5.SS2.p1.11.m11.1.1.2"><csymbol cd="ambiguous" id="A5.SS2.p1.11.m11.1.1.2.1.cmml" xref="A5.SS2.p1.11.m11.1.1.2">subscript</csymbol><ci id="A5.SS2.p1.11.m11.1.1.2.2.cmml" xref="A5.SS2.p1.11.m11.1.1.2.2">𝑤</ci><ci id="A5.SS2.p1.11.m11.1.1.2.3.cmml" xref="A5.SS2.p1.11.m11.1.1.2.3">𝑖</ci></apply><apply id="A5.SS2.p1.11.m11.1.1.3.cmml" xref="A5.SS2.p1.11.m11.1.1.3"><divide id="A5.SS2.p1.11.m11.1.1.3.1.cmml" xref="A5.SS2.p1.11.m11.1.1.3.1"></divide><cn type="integer" id="A5.SS2.p1.11.m11.1.1.3.2.cmml" xref="A5.SS2.p1.11.m11.1.1.3.2">1</cn><apply id="A5.SS2.p1.11.m11.1.1.3.3.cmml" xref="A5.SS2.p1.11.m11.1.1.3.3"><root id="A5.SS2.p1.11.m11.1.1.3.3a.cmml" xref="A5.SS2.p1.11.m11.1.1.3.3"></root><apply id="A5.SS2.p1.11.m11.1.1.3.3.2.cmml" xref="A5.SS2.p1.11.m11.1.1.3.3.2"><plus id="A5.SS2.p1.11.m11.1.1.3.3.2.1.cmml" xref="A5.SS2.p1.11.m11.1.1.3.3.2.1"></plus><cn type="integer" id="A5.SS2.p1.11.m11.1.1.3.3.2.2.cmml" xref="A5.SS2.p1.11.m11.1.1.3.3.2.2">1</cn><apply id="A5.SS2.p1.11.m11.1.1.3.3.2.3.cmml" xref="A5.SS2.p1.11.m11.1.1.3.3.2.3"><csymbol cd="ambiguous" id="A5.SS2.p1.11.m11.1.1.3.3.2.3.1.cmml" xref="A5.SS2.p1.11.m11.1.1.3.3.2.3">subscript</csymbol><ci id="A5.SS2.p1.11.m11.1.1.3.3.2.3.2.cmml" xref="A5.SS2.p1.11.m11.1.1.3.3.2.3.2">𝑠</ci><ci id="A5.SS2.p1.11.m11.1.1.3.3.2.3.3.cmml" xref="A5.SS2.p1.11.m11.1.1.3.3.2.3.3">𝑖</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A5.SS2.p1.11.m11.1c">w_{i}\coloneqq 1/\sqrt{1+s_{i}}</annotation></semantics></math>. Finally, to bound staleness, the aggregator abort clients whose staleness is larger than a configurable parameter, <span id="A5.SS2.p1.11.4" class="ltx_text ltx_font_italic">maximum staleness</span>.</p>
</div>
<div id="A5.SS2.p2" class="ltx_para ltx_noindent">
<p id="A5.SS2.p2.1" class="ltx_p">After every server model update, the aggregator aborts clients whose staleness is larger than a configurable parameter, <span id="A5.SS2.p2.1.1" class="ltx_text ltx_font_italic">maximum staleness</span>.</p>
</div>
</section>
<section id="A5.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">E.3 </span>Switching between SyncFL and AsyncFL</h3>

<div id="A5.SS3.p1" class="ltx_para ltx_noindent">
<p id="A5.SS3.p1.1" class="ltx_p"><span id="A5.SS3.p1.1.1" class="ltx_text ltx_font_smallcaps">Papaya</span> highlights that an FL system can support both synchronous and asynchronous training by using client independence, fast model aggregation, high client utilization and asynchronous secure aggregation. These properties improve the performance of both training regime.</p>
</div>
<div id="A5.SS3.p2" class="ltx_para ltx_noindent">
<p id="A5.SS3.p2.1" class="ltx_p">Switching from SyncFL to AsyncFL in our system requires three small changes in behavior: client demand computation, handling of stale clients, and model aggregation.</p>
</div>
<div id="A5.SS3.p3" class="ltx_para ltx_noindent">
<p id="A5.SS3.p3.3" class="ltx_p"><span id="A5.SS3.p3.3.1" class="ltx_text ltx_font_bold">Client demand computation. </span> In AsyncFL, client demand is computed as <math id="A5.SS3.p3.1.m1.1" class="ltx_Math" alttext="\mathit{concurrency}-\mathit{active\_clients}" display="inline"><semantics id="A5.SS3.p3.1.m1.1a"><mrow id="A5.SS3.p3.1.m1.1.1" xref="A5.SS3.p3.1.m1.1.1.cmml"><mi id="A5.SS3.p3.1.m1.1.1.2" xref="A5.SS3.p3.1.m1.1.1.2.cmml">𝑐𝑜𝑛𝑐𝑢𝑟𝑟𝑒𝑛𝑐𝑦</mi><mo id="A5.SS3.p3.1.m1.1.1.1" xref="A5.SS3.p3.1.m1.1.1.1.cmml">−</mo><mrow id="A5.SS3.p3.1.m1.1.1.3" xref="A5.SS3.p3.1.m1.1.1.3.cmml"><mi id="A5.SS3.p3.1.m1.1.1.3.2" xref="A5.SS3.p3.1.m1.1.1.3.2.cmml">𝑎𝑐𝑡𝑖𝑣𝑒</mi><mo lspace="0em" rspace="0em" id="A5.SS3.p3.1.m1.1.1.3.1" xref="A5.SS3.p3.1.m1.1.1.3.1.cmml">​</mo><mi mathvariant="normal" id="A5.SS3.p3.1.m1.1.1.3.3" xref="A5.SS3.p3.1.m1.1.1.3.3.cmml">_</mi><mo lspace="0em" rspace="0em" id="A5.SS3.p3.1.m1.1.1.3.1a" xref="A5.SS3.p3.1.m1.1.1.3.1.cmml">​</mo><mi id="A5.SS3.p3.1.m1.1.1.3.4" xref="A5.SS3.p3.1.m1.1.1.3.4.cmml">𝑐𝑙𝑖𝑒𝑛𝑡𝑠</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="A5.SS3.p3.1.m1.1b"><apply id="A5.SS3.p3.1.m1.1.1.cmml" xref="A5.SS3.p3.1.m1.1.1"><minus id="A5.SS3.p3.1.m1.1.1.1.cmml" xref="A5.SS3.p3.1.m1.1.1.1"></minus><ci id="A5.SS3.p3.1.m1.1.1.2.cmml" xref="A5.SS3.p3.1.m1.1.1.2">𝑐𝑜𝑛𝑐𝑢𝑟𝑟𝑒𝑛𝑐𝑦</ci><apply id="A5.SS3.p3.1.m1.1.1.3.cmml" xref="A5.SS3.p3.1.m1.1.1.3"><times id="A5.SS3.p3.1.m1.1.1.3.1.cmml" xref="A5.SS3.p3.1.m1.1.1.3.1"></times><ci id="A5.SS3.p3.1.m1.1.1.3.2.cmml" xref="A5.SS3.p3.1.m1.1.1.3.2">𝑎𝑐𝑡𝑖𝑣𝑒</ci><ci id="A5.SS3.p3.1.m1.1.1.3.3.cmml" xref="A5.SS3.p3.1.m1.1.1.3.3">_</ci><ci id="A5.SS3.p3.1.m1.1.1.3.4.cmml" xref="A5.SS3.p3.1.m1.1.1.3.4">𝑐𝑙𝑖𝑒𝑛𝑡𝑠</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A5.SS3.p3.1.m1.1c">\mathit{concurrency}-\mathit{active\_clients}</annotation></semantics></math>.
However, in a typical SyncFL round, client demand is high in the beginning of a round, but decreases as clients report results (see Figure <a href="#S6.F7" title="Figure 7 ‣ 6.1 Client Independence ‣ 6 System Design" class="ltx_ref"><span class="ltx_text ltx_ref_tag">7</span></a>). In SyncFL, client demand is computed as <math id="A5.SS3.p3.2.m2.1" class="ltx_Math" alttext="\mathit{concurrency}\cdot(1+o)-\mathit{completed\_clients}" display="inline"><semantics id="A5.SS3.p3.2.m2.1a"><mrow id="A5.SS3.p3.2.m2.1.1" xref="A5.SS3.p3.2.m2.1.1.cmml"><mrow id="A5.SS3.p3.2.m2.1.1.1" xref="A5.SS3.p3.2.m2.1.1.1.cmml"><mi id="A5.SS3.p3.2.m2.1.1.1.3" xref="A5.SS3.p3.2.m2.1.1.1.3.cmml">𝑐𝑜𝑛𝑐𝑢𝑟𝑟𝑒𝑛𝑐𝑦</mi><mo lspace="0.222em" rspace="0.222em" id="A5.SS3.p3.2.m2.1.1.1.2" xref="A5.SS3.p3.2.m2.1.1.1.2.cmml">⋅</mo><mrow id="A5.SS3.p3.2.m2.1.1.1.1.1" xref="A5.SS3.p3.2.m2.1.1.1.1.1.1.cmml"><mo stretchy="false" id="A5.SS3.p3.2.m2.1.1.1.1.1.2" xref="A5.SS3.p3.2.m2.1.1.1.1.1.1.cmml">(</mo><mrow id="A5.SS3.p3.2.m2.1.1.1.1.1.1" xref="A5.SS3.p3.2.m2.1.1.1.1.1.1.cmml"><mn id="A5.SS3.p3.2.m2.1.1.1.1.1.1.2" xref="A5.SS3.p3.2.m2.1.1.1.1.1.1.2.cmml">1</mn><mo id="A5.SS3.p3.2.m2.1.1.1.1.1.1.1" xref="A5.SS3.p3.2.m2.1.1.1.1.1.1.1.cmml">+</mo><mi id="A5.SS3.p3.2.m2.1.1.1.1.1.1.3" xref="A5.SS3.p3.2.m2.1.1.1.1.1.1.3.cmml">o</mi></mrow><mo stretchy="false" id="A5.SS3.p3.2.m2.1.1.1.1.1.3" xref="A5.SS3.p3.2.m2.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="A5.SS3.p3.2.m2.1.1.2" xref="A5.SS3.p3.2.m2.1.1.2.cmml">−</mo><mrow id="A5.SS3.p3.2.m2.1.1.3" xref="A5.SS3.p3.2.m2.1.1.3.cmml"><mi id="A5.SS3.p3.2.m2.1.1.3.2" xref="A5.SS3.p3.2.m2.1.1.3.2.cmml">𝑐𝑜𝑚𝑝𝑙𝑒𝑡𝑒𝑑</mi><mo lspace="0em" rspace="0em" id="A5.SS3.p3.2.m2.1.1.3.1" xref="A5.SS3.p3.2.m2.1.1.3.1.cmml">​</mo><mi mathvariant="normal" id="A5.SS3.p3.2.m2.1.1.3.3" xref="A5.SS3.p3.2.m2.1.1.3.3.cmml">_</mi><mo lspace="0em" rspace="0em" id="A5.SS3.p3.2.m2.1.1.3.1a" xref="A5.SS3.p3.2.m2.1.1.3.1.cmml">​</mo><mi id="A5.SS3.p3.2.m2.1.1.3.4" xref="A5.SS3.p3.2.m2.1.1.3.4.cmml">𝑐𝑙𝑖𝑒𝑛𝑡𝑠</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="A5.SS3.p3.2.m2.1b"><apply id="A5.SS3.p3.2.m2.1.1.cmml" xref="A5.SS3.p3.2.m2.1.1"><minus id="A5.SS3.p3.2.m2.1.1.2.cmml" xref="A5.SS3.p3.2.m2.1.1.2"></minus><apply id="A5.SS3.p3.2.m2.1.1.1.cmml" xref="A5.SS3.p3.2.m2.1.1.1"><ci id="A5.SS3.p3.2.m2.1.1.1.2.cmml" xref="A5.SS3.p3.2.m2.1.1.1.2">⋅</ci><ci id="A5.SS3.p3.2.m2.1.1.1.3.cmml" xref="A5.SS3.p3.2.m2.1.1.1.3">𝑐𝑜𝑛𝑐𝑢𝑟𝑟𝑒𝑛𝑐𝑦</ci><apply id="A5.SS3.p3.2.m2.1.1.1.1.1.1.cmml" xref="A5.SS3.p3.2.m2.1.1.1.1.1"><plus id="A5.SS3.p3.2.m2.1.1.1.1.1.1.1.cmml" xref="A5.SS3.p3.2.m2.1.1.1.1.1.1.1"></plus><cn type="integer" id="A5.SS3.p3.2.m2.1.1.1.1.1.1.2.cmml" xref="A5.SS3.p3.2.m2.1.1.1.1.1.1.2">1</cn><ci id="A5.SS3.p3.2.m2.1.1.1.1.1.1.3.cmml" xref="A5.SS3.p3.2.m2.1.1.1.1.1.1.3">𝑜</ci></apply></apply><apply id="A5.SS3.p3.2.m2.1.1.3.cmml" xref="A5.SS3.p3.2.m2.1.1.3"><times id="A5.SS3.p3.2.m2.1.1.3.1.cmml" xref="A5.SS3.p3.2.m2.1.1.3.1"></times><ci id="A5.SS3.p3.2.m2.1.1.3.2.cmml" xref="A5.SS3.p3.2.m2.1.1.3.2">𝑐𝑜𝑚𝑝𝑙𝑒𝑡𝑒𝑑</ci><ci id="A5.SS3.p3.2.m2.1.1.3.3.cmml" xref="A5.SS3.p3.2.m2.1.1.3.3">_</ci><ci id="A5.SS3.p3.2.m2.1.1.3.4.cmml" xref="A5.SS3.p3.2.m2.1.1.3.4">𝑐𝑙𝑖𝑒𝑛𝑡𝑠</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A5.SS3.p3.2.m2.1c">\mathit{concurrency}\cdot(1+o)-\mathit{completed\_clients}</annotation></semantics></math>, where <math id="A5.SS3.p3.3.m3.1" class="ltx_Math" alttext="o" display="inline"><semantics id="A5.SS3.p3.3.m3.1a"><mi id="A5.SS3.p3.3.m3.1.1" xref="A5.SS3.p3.3.m3.1.1.cmml">o</mi><annotation-xml encoding="MathML-Content" id="A5.SS3.p3.3.m3.1b"><ci id="A5.SS3.p3.3.m3.1.1.cmml" xref="A5.SS3.p3.3.m3.1.1">𝑜</ci></annotation-xml><annotation encoding="application/x-tex" id="A5.SS3.p3.3.m3.1c">o</annotation></semantics></math> is the over-selection factor.</p>
</div>
<div id="A5.SS3.p4" class="ltx_para ltx_noindent">
<p id="A5.SS3.p4.1" class="ltx_p"><span id="A5.SS3.p4.1.1" class="ltx_text ltx_font_bold">Aborting stale clients. </span> When a server model update is performed in SyncFL, users that are still training are aborted (users may still be training because of over-selection). In AsyncFL, users that are still training continue normally, unless their staleness would exceed <span id="A5.SS3.p4.1.2" class="ltx_text ltx_font_italic">maximum staleness</span>.</p>
</div>
<div id="A5.SS3.p5" class="ltx_para ltx_noindent">
<p id="A5.SS3.p5.1" class="ltx_p"><span id="A5.SS3.p5.1.1" class="ltx_text ltx_font_bold">Model Aggregation. </span> AsyncFL and SyncFL use different model aggregation algorithms.</p>
</div>
<div id="A5.SS3.p6" class="ltx_para ltx_noindent">
<p id="A5.SS3.p6.1" class="ltx_p">These three behavior changes are relatively minor. Thus, switching between SyncFL and AsyncFL can be done via a configuration change.</p>
</div>
</section>
<section id="A5.SS4" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">E.4 </span>Failure Recovery</h3>

<div id="A5.SS4.p1" class="ltx_para ltx_noindent">
<p id="A5.SS4.p1.1" class="ltx_p">Fast recovery and isolated impact from failures help the system minimize model training progress impact. Below we outline mechanisms employed:</p>
</div>
<div id="A5.SS4.p2" class="ltx_para ltx_noindent">
<p id="A5.SS4.p2.1" class="ltx_p"><span id="A5.SS4.p2.1.1" class="ltx_text ltx_font_bold">Client Routing</span>. Client requests are routed by selectors using assignment maps (model training task to corresponding aggregator identity) refreshed from coordinator on every report. Upon selector failure or selector having stale assignment map clients retry through a different selector. Failed or stale selector refreshes assignment map on next report to coordinator.</p>
</div>
<div id="A5.SS4.p3" class="ltx_para ltx_noindent">
<p id="A5.SS4.p3.1" class="ltx_p"><span id="A5.SS4.p3.1.1" class="ltx_text ltx_font_bold">Client Participation</span>. Coordinator assigns clients to tasks. Upon coordinator failure participating clients are not affected, only for the duration of the recovery no new clients are assigned. Selectors and aggregators wait until a new leader coordinator is elected meanwhile continuing to operate based on last known assignments. After the leader election coordinator enters the recovery period (typically 30s) to rebuild the current assignment map from aggregator reports and then resumes assignments.</p>
</div>
<div id="A5.SS4.p4" class="ltx_para ltx_noindent">
<p id="A5.SS4.p4.1" class="ltx_p"><span id="A5.SS4.p4.1.1" class="ltx_text ltx_font_bold">Task Execution</span>. Aggregator executes assigned tasks. Upon aggregator failure or unresponsiveness, coordinator detects failures after several missed heartbeats and reassigns all tasks to other aggregators, updates and distributes the new assignment map to selectors. Coordinator detects stale assignments in aggregator reports via sequence numbers and requests to stop executing stale assignments.</p>
</div>
</section>
<section id="A5.SS5" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">E.5 </span>Edge Training Engine</h3>

<div id="A5.SS5.p1" class="ltx_para ltx_noindent">
<p id="A5.SS5.p1.1" class="ltx_p">The Papaya client is built to be both a hosting platform and an ML framework. An Example Store collects training data in persistent storage and enforces the data use and retention policy. An Executor abstracts model training logic in a general way that supports easily swapping in different ML tasks (data source, model, loss, etc.). The implementation is based on PyTorch Mobile and relies on two features: selective build and the mobile interpreter. Selective build only compiles in ops used by the application to reduce the binary size. The mobile interpreter facilitates efficient cross-platform execution (Android, iOS, Linux) by providing common functionality to save and load model code and parameters, execute forward and backward passes, and optimizer steps.</p>
</div>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
</section><div class="ltx_rdf" about="" property="dcterms:creator" content="Anonymous Authors"></div>
<div class="ltx_rdf" about="" property="dcterms:subject" content="Machine Learning, MLSys"></div>
<div class="ltx_rdf" about="" property="dcterms:subject" content="mlsys 2022"></div>
<div class="ltx_rdf" about="" property="dcterms:title" content="Papaya: Practical, Private, and Scalable Federated Learning"></div>

</article>
</div>
<div class="ar5iv-footer"><a href="/html/2111.04876" class="ar5iv-nav-button ar5iv-nav-button-prev">◄</a>
    <a class="ar5iv-home-button" href="/"><img height="40" alt="ar5iv homepage" src="/assets/ar5iv.png"></a>
    <a href="/feeling_lucky" class="ar5iv-text-button">Feeling<br>lucky?</a>
    <a href="/log/2111.04877" class="ar5iv-text-button ar5iv-severity-warning">Conversion<br>report</a>
    <a class="ar5iv-text-button" target="_blank" href="https://github.com/dginev/ar5iv/issues/new?template=improve-article--arxiv-id-.md&title=Improve+article+2111.04877">Report<br>an issue</a>
    <a href="https://arxiv.org/abs/2111.04877" class="ar5iv-text-button arxiv-ui-theme">View&nbsp;original<br>on&nbsp;arXiv</a><a href="/html/2111.04878" class="ar5iv-nav-button ar5iv-nav-button-next">►</a>
</div><footer class="ltx_page_footer">
<a class="ar5iv-toggle-color-scheme" href="javascript:toggleColorScheme()" title="Toggle ar5iv color scheme"><span class="color-scheme-icon"></span></a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/license" target="_blank">Copyright</a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/policies/privacy_policy" target="_blank">Privacy Policy</a>

<div class="ltx_page_logo">Generated  on Sat Mar  2 02:56:00 2024 by <a target="_blank" href="http://dlmf.nist.gov/LaTeXML/" class="ltx_LaTeXML_logo"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg==" alt="Mascot Sammy"></a>
</div></footer>
</div>

    <script>
      var canMathML = typeof(MathMLElement) == "function";
      if (!canMathML) {
        var body = document.querySelector("body");
        body.firstElementChild.setAttribute('style', 'opacity: 0;');
        var loading = document.createElement("div");
        loading.setAttribute("id", "mathjax-loading-spinner");
        var message = document.createElement("div");
        message.setAttribute("id", "mathjax-loading-message");
        message.innerText = "Typesetting Equations...";
        body.prepend(loading);
        body.prepend(message);

        var el = document.createElement("script");
        el.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js";
        document.querySelector("head").appendChild(el);

        window.MathJax = {
          startup: {
            pageReady: () => {
              return MathJax.startup.defaultPageReady().then(() => {
                body.removeChild(loading);
                body.removeChild(message);
                body.firstElementChild.removeAttribute('style');
              }); } } };
      }
    </script>
    <script>
    // Auxiliary function, building the preview feature when
    // an inline citation is clicked
    function clicked_cite(e) {
      e.preventDefault();
      let cite = this.closest('.ltx_cite');
      let next = cite.nextSibling;
      if (next && next.nodeType == Node.ELEMENT_NODE && next.getAttribute('class') == "ar5iv-bibitem-preview") {
        next.remove();
        return; }
      // Before adding a preview modal,
      // cleanup older previews, in case they're still open
      document.querySelectorAll('span.ar5iv-bibitem-preview').forEach(function(node) {
        node.remove();
      })

      // Create the preview
      preview = document.createElement('span');
      preview.setAttribute('class','ar5iv-bibitem-preview');
      let target = document.getElementById(this.getAttribute('href').slice(1));
      target.childNodes.forEach(function (child) {
        preview.append(child.cloneNode(true));
      });
      let close_x = document.createElement('button');
      close_x.setAttribute("aria-label","Close modal for bibliography item preview");
      close_x.textContent = "×";
      close_x.setAttribute('class', 'ar5iv-button-close-preview');
      close_x.setAttribute('onclick','this.parentNode.remove()');
      preview.append(close_x);
      preview.querySelectorAll('.ltx_tag_bibitem').forEach(function(node) {
        node.remove();
      });
      cite.parentNode.insertBefore(preview, cite.nextSibling);
      return;
    }
    // Global Document initialization:
    // - assign the preview feature to all inline citation links
    document.querySelectorAll(".ltx_cite .ltx_ref").forEach(function (link) {
      link.addEventListener("click", clicked_cite);
    });
    </script>
    </body>
</html>
